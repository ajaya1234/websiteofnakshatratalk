/*! For license information please see main.ba6c9c06.js.LICENSE.txt */
(function(){var __webpack_modules__={4050:function(e,t,n){"use strict";n.r(t);n(2791);var r=n(1087),i=n(184);t.default=function(){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{children:(0,i.jsxs)("footer",{class:"section-t-space footer-section-2 footer-color-3",children:[(0,i.jsx)("div",{class:"container-fluid-lg",children:(0,i.jsxs)("div",{class:"main-footer",children:[(0,i.jsxs)("div",{class:"row",children:[(0,i.jsxs)("div",{class:"col-lg-3 col-md-4 col-6",children:[(0,i.jsx)("a",{href:"index-2.html",class:"foot-logo theme-logo",children:(0,i.jsx)("img",{src:"assets/121.png",class:"img-fluid blur-up lazyloaded",alt:""})}),(0,i.jsxs)("ul",{class:"social-icon",children:[(0,i.jsx)("li",{class:"light-bg",children:(0,i.jsx)("a",{href:"https://www.facebook.com/",class:"footer-link-color",children:(0,i.jsx)("i",{class:"fab fa-facebook-f"})})}),(0,i.jsx)("li",{class:"light-bg",children:(0,i.jsx)("a",{href:"https://accounts.google.com/signin/v2/identifier?flowName=GlifWebSignIn&flowEntry=ServiceLogin",class:"footer-link-color",children:(0,i.jsx)("i",{class:"fab fa-google"})})}),(0,i.jsx)("li",{class:"light-bg",children:(0,i.jsx)("a",{href:"https://twitter.com/i/flow/login",class:"footer-link-color",children:(0,i.jsx)("i",{class:"fab fa-twitter"})})}),(0,i.jsx)("li",{class:"light-bg",children:(0,i.jsx)("a",{href:"https://www.instagram.com/",class:"footer-link-color",children:(0,i.jsx)("i",{class:"fab fa-instagram"})})}),(0,i.jsx)("li",{class:"light-bg",children:(0,i.jsx)("a",{href:"https://in.pinterest.com/",class:"footer-link-color",children:(0,i.jsx)("i",{class:"fab fa-pinterest-p"})})})]}),(0,i.jsx)("div",{class:"footer-title",children:(0,i.jsx)("h4",{class:"text-white",children:"Contact Us"})}),(0,i.jsxs)("ul",{class:"footer-address footer-contact",children:[(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:"javascript:void(0)",class:"light-text",children:(0,i.jsxs)("div",{class:"inform-box flex-start-box",children:[(0,i.jsx)("i",{"data-feather":"mail"}),(0,i.jsx)("p",{children:"Email : Contact@Nakshatratalk.com"})]})})}),(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:"javascript:void(0)",class:"light-text",children:(0,i.jsxs)("div",{class:"inform-box",children:[(0,i.jsx)("i",{"data-feather":"phone"}),(0,i.jsx)("p",{children:"Call us: "})]})})})]}),(0,i.jsx)("div",{class:"footer-title",style:{paddingTop:"20px"},children:(0,i.jsx)("h4",{class:"text-white",children:"Corporate Policy"})}),(0,i.jsxs)("ul",{class:"footer-list footer-contact footer-list-light",children:[(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/PrivacyPolicy",class:"light-text",children:"Privacy Policy"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/PrivacyPolicy",class:"light-text",children:"Terms Of Use"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"#",class:"light-text",children:"Refund & Cancellation"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"#",class:"light-text",children:"Disclaimer"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"#",class:"light-text",children:"Cookies Policy"})})]}),(0,i.jsx)("div",{class:"footer-title",style:{paddingTop:"20px"},children:(0,i.jsx)("h4",{class:"text-white",children:"Secure"})}),(0,i.jsxs)("ul",{class:"footer-list footer-list-light footer-contact",children:[(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/AstrologersList",class:"light-text",children:"Verified Best Astrologers"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"#",class:"light-text",children:"Secure Payments"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/PrivacyPolicy",class:"light-text",children:"Privacy & Confidentiality"})})]})]}),(0,i.jsxs)("div",{class:"col-lg-3 col-md-4 col-6",children:[(0,i.jsx)("div",{class:"footer-title",children:(0,i.jsx)("h4",{class:"text-white",children:"Auspicious Muhurat"})}),(0,i.jsxs)("ul",{class:"footer-list footer-contact footer-list-light",children:[(0,i.jsx)("li",{children:(0,i.jsxs)(r.rU,{to:"#",class:"light-text",children:["Marriage"," "]})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/muhurat",class:"light-text",children:"Bhoomi Pujan"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/muhurat",class:"light-text",children:"Griha Pravesh"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/muhurat",class:"light-text",children:"Gold Purchase"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/muhurat",class:"light-text",children:"Mundan"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/muhurat",class:"light-text",children:"Naamkaran"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/muhurat",class:"light-text",children:"Vehicle Purchase"})})]}),(0,i.jsx)("div",{class:"footer-title",style:{paddingTop:"20px"},children:(0,i.jsx)("h4",{class:"text-white",children:"Shopping"})}),(0,i.jsxs)("ul",{class:"footer-list footer-contact footer-list-light",children:[(0,i.jsx)("li",{children:(0,i.jsxs)(r.rU,{to:"/pooja",class:"light-text",children:["Nakshatra Pooja"," "]})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"#",class:"light-text",children:"Nakshatra Mart"})})]})]}),(0,i.jsxs)("div",{class:"col-lg-3 col-md-4 col-6",children:[(0,i.jsx)("div",{class:"footer-title",children:(0,i.jsx)("h4",{class:"text-white",children:"Important Links"})}),(0,i.jsxs)("ul",{class:"footer-list footer-list-light footer-contact",children:[(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/kundali",class:"light-text",children:"Kundli"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/kundali_milan",class:"light-text",children:"Kundli Matching"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/kundali_milan",class:"light-text",children:"Doshas in Kundli"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/panchang",class:"light-text",children:"Panchang"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/AstrologersList",class:"light-text",children:"Call Astrologer"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/chatastrologer",class:"light-text",children:"Chat Astrologer"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/tarot",class:"light-text",children:"Tarot"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"#",class:"light-text",children:"Palmistry"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/blog",class:"light-text",children:"Nakshatra Blog"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"/Reviews",class:"light-text",children:"Nakshatra Reviews"})})]})]}),(0,i.jsxs)("div",{class:"col-lg-3 col-md-4 col-6",children:[(0,i.jsx)("div",{class:"footer-title",children:(0,i.jsx)("h4",{class:"text-white",children:"Festivals"})}),(0,i.jsxs)("ul",{class:"footer-list footer-list-light footer-contact",children:[(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"#",class:"light-text",children:"Holi"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"#",class:"light-text",children:"Chaitra Navratri"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"#",class:"light-text",children:"Raksha Bandhan"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"#",class:"light-text",children:"Sharadiya Navratri"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"#",class:"light-text",children:"Dussehra"})}),(0,i.jsx)("li",{children:(0,i.jsx)(r.rU,{to:"#",class:"light-text",children:"Diwali"})})]}),(0,i.jsx)("div",{class:"footer-title",style:{paddingTop:"20px"},children:(0,i.jsx)("h4",{class:"text-white",children:"For Astrologer"})}),(0,i.jsxs)("ul",{class:"footer-list footer-list-light footer-contact",children:[(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:"C:/Users/Dell/Desktop/Nakshatratalk-astro/pages/examples/sign-in.html",class:"light-text",children:"Astrologer Login"})}),(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:"C:/Users/Dell/Desktop/Nakshatratalk-astro/pages/examples/sign-up.html",class:"light-text",children:"Astrologer Registration"})})]}),(0,i.jsx)("div",{class:"footer-title",style:{paddingTop:"20px"},children:(0,i.jsx)("h4",{class:"text-white",children:"Download Our App"})}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:"#",children:(0,i.jsx)("img",{src:"../assets/images/app/android.png",style:{height:" 70px",width:"200px"}})})}),(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:"#",children:(0,i.jsx)("img",{src:"../assets/images/app/ios.png",style:{height:" 70px",width:"200px"}})})})]})]})]}),(0,i.jsx)("div",{class:"col-lg-3 col-md-4 col-6"})]})}),(0,i.jsxs)("div",{class:"sub-footer sub-footer-lite  section-t-space",children:[(0,i.jsx)("div",{class:"left-footer",children:(0,i.jsx)("p",{class:"light-text",children:"2022 Copyright By NakshatraTalk"})}),(0,i.jsxs)("ul",{class:"payment-box",children:[(0,i.jsx)("li",{children:(0,i.jsx)("img",{src:"../assets/images/icon/paymant/visa.png",class:"blur-up lazyload",alt:""})}),(0,i.jsx)("li",{children:(0,i.jsx)("img",{src:"../assets/images/icon/paymant/discover.png",alt:"",class:"blur-up lazyload"})}),(0,i.jsx)("li",{children:(0,i.jsx)("img",{src:"../assets/images/icon/paymant/american.png",alt:"",class:"blur-up lazyload"})}),(0,i.jsx)("li",{children:(0,i.jsx)("img",{src:"../assets/images/icon/paymant/master-card.png",alt:"",class:"blur-up lazyload"})}),(0,i.jsx)("li",{children:(0,i.jsx)("img",{src:"../assets/images/icon/paymant/giro-pay.png",alt:"",class:"blur-up lazyload"})})]})]})]})})})}},8278:function(t,n,r){"use strict";r.d(n,{Ep:function(){return S},J0:function(){return y},RQ:function(){return q},WK:function(){return Y},X3:function(){return K},Zn:function(){return V},Zq:function(){return B},aU:function(){return i},cP:function(){return w},fp:function(){return T},lX:function(){return m},pC:function(){return G}});var i,o=r(3144),a=r(5671),s=r(136),c=r(7277),u=r(8664),l=r(9439),d=r(4506),h=r(7762),f=r(3433);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));var v,g="popstate";function m(e){return void 0===e&&(e={}),x((function(e,t){var n=e.location;return E("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:S(t)}),null,e)}function y(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function b(t,n){if(!t){"undefined"!==typeof console&&console.warn(n);try{throw new Error(n)}catch(e){}}}function _(e,t){return{usr:e.state,key:e.key,idx:t}}function E(e,t,n,r){return void 0===n&&(n=null),p({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?w(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function S(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,o=e.hash,a=void 0===o?"":o;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),a&&"#"!==a&&(n+="#"===a.charAt(0)?a:"#"+a),n}function w(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function x(e,t,n,r){void 0===r&&(r={});var o=r,a=o.window,s=void 0===a?document.defaultView:a,c=o.v5Compat,u=void 0!==c&&c,l=s.history,d=i.Pop,h=null,f=v();function v(){return(l.state||{idx:null}).idx}function m(){d=i.Pop;var e=v(),t=null==e?null:e-f;f=e,h&&h({action:d,location:w.location,delta:t})}function b(e){var t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:S(e);return y(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,l.replaceState(p({},l.state,{idx:f}),""));var w={get action(){return d},get location(){return e(s,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(g,m),h=e,function(){s.removeEventListener(g,m),h=null}},createHref:function(e){return t(s,e)},createURL:b,encodeLocation:function(e){var t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){d=i.Push;var r=E(w.location,e,t);n&&n(r,e);var o=_(r,f=v()+1),a=w.createHref(r);try{l.pushState(o,"",a)}catch(c){s.location.assign(a)}u&&h&&h({action:d,location:w.location,delta:1})},replace:function(e,t){d=i.Replace;var r=E(w.location,e,t);n&&n(r,e);var o=_(r,f=v()),a=w.createHref(r);l.replaceState(o,"",a),u&&h&&h({action:d,location:w.location,delta:0})},go:function(e){return l.go(e)}};return w}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function T(e,t,n){void 0===n&&(n="/");var r=V(("string"===typeof t?w(t):t).pathname||"/",n);if(null==r)return null;var i=I(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var o=null,a=0;null==o&&a<i.length;++a)o=L(i[a],U(r));return o}function I(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,o){var a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(y(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var s=q([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(y(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),I(e.children,t,c,s)),(null!=e.path||e.index)&&t.push({path:s,score:P(s,e.index),routesMeta:c})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,o=(0,h.Z)(R(e.path));try{for(o.s();!(r=o.n()).done;){var a=r.value;i(e,t,a)}}catch(s){o.e(s)}finally{o.f()}}else i(e,t)})),t}function R(e){var t=e.split("/");if(0===t.length)return[];var n=(0,d.Z)(t),r=n[0],i=n.slice(1),o=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===i.length)return o?[a,""]:[a];var s=R(i.join("/")),c=[];return c.push.apply(c,(0,f.Z)(s.map((function(e){return""===e?a:[a,e].join("/")})))),o&&c.push.apply(c,(0,f.Z)(s)),c.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var k=/^:\w+$/,O=3,C=2,A=1,N=10,j=-2,D=function(e){return"*"===e};function P(e,t){var n=e.split("/"),r=n.length;return n.some(D)&&(r+=j),t&&(r+=C),n.filter((function(e){return!D(e)})).reduce((function(e,t){return e+(k.test(t)?O:""===t?A:N)}),r)}function L(e,t){for(var n=e.routesMeta,r={},i="/",o=[],a=0;a<n.length;++a){var s=n[a],c=a===n.length-1,u="/"===i?t:t.slice(i.length)||"/",l=M({path:s.relativePath,caseSensitive:s.caseSensitive,end:c},u);if(!l)return null;Object.assign(r,l.params);var d=s.route;o.push({params:r,pathname:q([i,l.pathname]),pathnameBase:W(q([i,l.pathnameBase])),route:d}),"/"!==l.pathnameBase&&(i=q([i,l.pathnameBase]))}return o}function M(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);b("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),r=(0,l.Z)(n,2),i=r[0],o=r[1],a=t.match(i);if(!a)return null;var s=a[0],c=s.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:o.reduce((function(e,t,n){if("*"===t){var r=u[n]||"";c=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return b(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(u[n]||"",t),e}),{}),pathname:s,pathnameBase:c,pattern:e}}function U(e){try{return decodeURI(e)}catch(t){return b(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function V(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function F(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function B(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function G(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=w(e):(y(!(i=p({},e)).pathname||!i.pathname.includes("?"),F("?","pathname","search",i)),y(!i.pathname||!i.pathname.includes("#"),F("#","pathname","hash",i)),y(!i.search||!i.search.includes("#"),F("#","search","hash",i)));var o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(r||null==s)o=n;else{var c=t.length-1;if(s.startsWith("..")){for(var u=s.split("/");".."===u[0];)u.shift(),c-=1;i.pathname=u.join("/")}o=c>=0?t[c]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?w(e):e,r=n.pathname,i=n.search,o=void 0===i?"":i,a=n.hash,s=void 0===a?"":a,c=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:c,search:H(o),hash:z(s)}}(i,o),d=s&&"/"!==s&&s.endsWith("/"),h=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!d&&!h||(l.pathname+="/"),l}var q=function(e){return e.join("/").replace(/\/\/+/g,"/")},W=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},H=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},z=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},K=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}((0,u.Z)(Error));function Y(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Z=["post","put","patch","delete"],J=(new Set(Z),["get"].concat(Z));new Set(J),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred")},3322:function(e,t,n){var r=n(4993).default,i=n(1588).default,o=n(3808).default,a=n(7424).default,s=n(4704).default,c=n(7061).default,u=n(7156).default,l=n(6115).default,d=n(3496).default,h=n(1655).default,f=n(6389).default,p=n(6690).default,v=n(9728).default,g=n(861).default,m=n(8416).default;e.exports=function(){"use strict";var e,t,y,b,_;function E(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{},w=function(e){try{return!!e()}catch(e){return!0}},x=!w((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),T=x,I=Function.prototype,R=I.bind,k=I.call,O=T&&R.bind(k,k),C=T?function(e){return e&&O(e)}:function(e){return e&&function(){return k.apply(e,arguments)}},A=C({}.isPrototypeOf),N=function(e){return e&&e.Math==Math&&e},j=N("object"==typeof globalThis&&globalThis)||N("object"==typeof window&&window)||N("object"==typeof self&&self)||N("object"==typeof S&&S)||function(){return this}()||Function("return this")(),D=x,P=Function.prototype,L=P.apply,M=P.call,U="object"==typeof Reflect&&Reflect.apply||(D?M.bind(L):function(){return M.apply(L,arguments)}),V=function(e){return"function"==typeof e},F={},B=!w((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),G=x,q=Function.prototype.call,W=G?q.bind(q):function(){return q.apply(q,arguments)},H={},z={}.propertyIsEnumerable,K=Object.getOwnPropertyDescriptor,Y=K&&!z.call({1:2},1);H.f=Y?function(e){var t=K(this,e);return!!t&&t.enumerable}:z;var Z,J,X=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Q=C,$=Q({}.toString),ee=Q("".slice),te=function(e){return ee($(e),8,-1)},ne=C,re=w,ie=te,oe=j.Object,ae=ne("".split),se=re((function(){return!oe("z").propertyIsEnumerable(0)}))?function(e){return"String"==ie(e)?ae(e,""):oe(e)}:oe,ce=j.TypeError,ue=function(e){if(null==e)throw ce("Can't call method on "+e);return e},le=se,de=ue,he=function(e){return le(de(e))},fe=V,pe=function(e){return"object"==typeof e?null!==e:fe(e)},ve={},ge=ve,me=j,ye=V,be=function(e){return ye(e)?e:void 0},_e=function(e,t){return arguments.length<2?be(ge[e])||be(me[e]):ge[e]&&ge[e][t]||me[e]&&me[e][t]},Ee=_e("navigator","userAgent")||"",Se=j,we=Ee,xe=Se.process,Te=Se.Deno,Ie=xe&&xe.versions||Te&&Te.version,Re=Ie&&Ie.v8;Re&&(J=(Z=Re.split("."))[0]>0&&Z[0]<4?1:+(Z[0]+Z[1])),!J&&we&&(!(Z=we.match(/Edge\/(\d+)/))||Z[1]>=74)&&(Z=we.match(/Chrome\/(\d+)/))&&(J=+Z[1]);var ke=J,Oe=ke,Ce=w,Ae=!!Object.getOwnPropertySymbols&&!Ce((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Oe&&Oe<41})),Ne=Ae&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,je=_e,De=V,Pe=A,Le=Ne,Me=j.Object,Ue=Le?function(e){return"symbol"==typeof e}:function(e){var t=je("Symbol");return De(t)&&Pe(t.prototype,Me(e))},Ve=j.String,Fe=function(e){try{return Ve(e)}catch(e){return"Object"}},Be=V,Ge=Fe,qe=j.TypeError,We=function(e){if(Be(e))return e;throw qe(Ge(e)+" is not a function")},He=We,ze=function(e,t){var n=e[t];return null==n?void 0:He(n)},Ke=W,Ye=V,Ze=pe,Je=j.TypeError,Xe={exports:{}},Qe=j,$e=Object.defineProperty,et=function(e,t){try{$e(Qe,e,{value:t,configurable:!0,writable:!0})}catch(w){Qe[e]=t}return t},tt="__core-js_shared__",nt=j[tt]||et(tt,{}),rt=nt;(Xe.exports=function(e,t){return rt[e]||(rt[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.3",mode:"pure",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var it=ue,ot=j.Object,at=function(e){return ot(it(e))},st=at,ct=C({}.hasOwnProperty),ut=Object.hasOwn||function(e,t){return ct(st(e),t)},lt=C,dt=0,ht=Math.random(),ft=lt(1..toString),pt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+ft(++dt+ht,36)},vt=j,gt=Xe.exports,mt=ut,yt=pt,bt=Ae,_t=Ne,Et=gt("wks"),St=vt.Symbol,wt=St&&St.for,xt=_t?St:St&&St.withoutSetter||yt,Tt=function(e){if(!mt(Et,e)||!bt&&"string"!=typeof Et[e]){var t="Symbol."+e;bt&&mt(St,e)?Et[e]=St[e]:Et[e]=_t&&wt?wt(t):xt(t)}return Et[e]},It=W,Rt=pe,kt=Ue,Ot=ze,Ct=function(e,t){var n,r;if("string"===t&&Ye(n=e.toString)&&!Ze(r=Ke(n,e)))return r;if(Ye(n=e.valueOf)&&!Ze(r=Ke(n,e)))return r;if("string"!==t&&Ye(n=e.toString)&&!Ze(r=Ke(n,e)))return r;throw Je("Can't convert object to primitive value")},At=Tt,Nt=j.TypeError,jt=At("toPrimitive"),Dt=function(e,t){if(!Rt(e)||kt(e))return e;var n,r=Ot(e,jt);if(r){if(void 0===t&&(t="default"),n=It(r,e,t),!Rt(n)||kt(n))return n;throw Nt("Can't convert object to primitive value")}return void 0===t&&(t="number"),Ct(e,t)},Pt=Ue,Lt=function(e){var t=Dt(e,"string");return Pt(t)?t:t+""},Mt=pe,Ut=j.document,Vt=Mt(Ut)&&Mt(Ut.createElement),Ft=function(e){return Vt?Ut.createElement(e):{}},Bt=Ft,Gt=!B&&!w((function(){return 7!=Object.defineProperty(Bt("div"),"a",{get:function(){return 7}}).a})),qt=B,Wt=W,Ht=H,zt=X,Kt=he,Yt=Lt,Zt=ut,Jt=Gt,Xt=Object.getOwnPropertyDescriptor;F.f=qt?Xt:function(e,t){if(e=Kt(e),t=Yt(t),Jt)try{return Xt(e,t)}catch(e){}if(Zt(e,t))return zt(!Wt(Ht.f,e,t),e[t])};var Qt=w,$t=V,en=/#|\.prototype\./,tn=function(e,t){var n=rn[nn(e)];return n==an||n!=on&&($t(t)?Qt(t):!!t)},nn=tn.normalize=function(e){return String(e).replace(en,".").toLowerCase()},rn=tn.data={},on=tn.NATIVE="N",an=tn.POLYFILL="P",sn=tn,cn=We,un=x,ln=C(C.bind),dn=function(e,t){return cn(e),void 0===t?e:un?ln(e,t):function(){return e.apply(t,arguments)}},hn={},fn=B&&w((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),pn=j,vn=pe,gn=pn.String,mn=pn.TypeError,yn=function(e){if(vn(e))return e;throw mn(gn(e)+" is not an object")},bn=B,_n=Gt,En=fn,Sn=yn,wn=Lt,xn=j.TypeError,Tn=Object.defineProperty,In=Object.getOwnPropertyDescriptor,Rn="enumerable",kn="configurable",On="writable";hn.f=bn?En?function(e,t,n){if(Sn(e),t=wn(t),Sn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&On in n&&!n.writable){var r=In(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:kn in n?n.configurable:r.configurable,enumerable:Rn in n?n.enumerable:r.enumerable,writable:!1})}return Tn(e,t,n)}:Tn:function(e,t,n){if(Sn(e),t=wn(t),Sn(n),_n)try{return Tn(e,t,n)}catch(e){}if("get"in n||"set"in n)throw xn("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Cn=hn,An=X,Nn=B?function(e,t,n){return Cn.f(e,t,An(1,n))}:function(e,t,n){return e[t]=n,e},jn=j,Dn=U,Pn=C,Ln=V,Mn=F.f,Un=sn,Vn=ve,Fn=dn,Bn=Nn,Gn=ut,qn=function(e){var t=function t(n,r,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,i)}return Dn(e,this,arguments)};return t.prototype=e.prototype,t},Wn=function(e,t){var n,r,i,o,a,s,c,u,l=e.target,d=e.global,h=e.stat,f=e.proto,p=d?jn:h?jn[l]:(jn[l]||{}).prototype,v=d?Vn:Vn[l]||Bn(Vn,l,{})[l],g=v.prototype;for(i in t)n=!Un(d?i:l+(h?".":"#")+i,e.forced)&&p&&Gn(p,i),a=v[i],n&&(s=e.noTargetGet?(u=Mn(p,i))&&u.value:p[i]),o=n&&s?s:t[i],n&&typeof a==typeof o||(c=e.bind&&n?Fn(o,jn):e.wrap&&n?qn(o):f&&Ln(o)?Pn(o):o,(e.sham||o&&o.sham||a&&a.sham)&&Bn(c,"sham",!0),Bn(v,i,c),f&&(Gn(Vn,r=l+"Prototype")||Bn(Vn,r,{}),Bn(Vn[r],i,o),e.real&&g&&!g[i]&&Bn(g,i,o)))},Hn=Math.ceil,zn=Math.floor,Kn=function(e){var t=+e;return t!=t||0===t?0:(t>0?zn:Hn)(t)},Yn=Kn,Zn=Math.min,Jn=function(e){return e>0?Zn(Yn(e),9007199254740991):0},Xn=function(e){return Jn(e.length)},Qn=We,$n=at,er=se,tr=Xn,nr=j.TypeError,rr=function(e){return function(t,n,r,i){Qn(n);var o=$n(t),a=er(o),s=tr(o),c=e?s-1:0,u=e?-1:1;if(r<2)for(;;){if(c in a){i=a[c],c+=u;break}if(c+=u,e?c<0:s<=c)throw nr("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=u)c in a&&(i=n(i,a[c],c,o));return i}},ir={left:rr(!1),right:rr(!0)},or=w,ar=function(e,t){var n=[][e];return!!n&&or((function(){n.call(null,t||function(){throw 1},1)}))},sr="process"==te(j.process),cr=ir.left,ur=ke,lr=sr;Wn({target:"Array",proto:!0,forced:!ar("reduce")||!lr&&ur>79&&ur<83},{reduce:function(e){var t=arguments.length;return cr(this,e,t,t>1?arguments[1]:void 0)}});var dr=ve,hr=function(e){return dr[e+"Prototype"]},fr=hr("Array").reduce,pr=A,vr=fr,gr=Array.prototype,mr=function(e){var t=e.reduce;return e===gr||pr(gr,e)&&t===gr.reduce?vr:t},yr=mr,br=!0,_r=!0;function Er(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Sr(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function wr(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(br=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function xr(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(_r=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Tr(){if("object"==typeof window){if(br)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Ir(e,t){_r&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Rr(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=Er(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=Er(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=Er(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function kr(e){return"[object Object]"===Object.prototype.toString.call(e)}function Or(e){var t;return kr(e)?yr(t=Object.keys(e)).call(t,(function(t,n){var r=kr(e[n]),i=r?Or(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,m({},n,i))}),{}):e}function Cr(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach((function(i){i.endsWith("Id")?e(t,t.get(n[i]),r):i.endsWith("Ids")&&n[i].forEach((function(n){e(t,t.get(n),r)}))})))}(e,n,i)}))})),i}var Ar=Xe.exports,Nr=pt,jr=Ar("keys"),Dr=function(e){return jr[e]||(jr[e]=Nr(e))},Pr=!w((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Lr=j,Mr=ut,Ur=V,Vr=at,Fr=Pr,Br=Dr("IE_PROTO"),Gr=Lr.Object,qr=Gr.prototype,Wr=Fr?Gr.getPrototypeOf:function(e){var t=Vr(e);if(Mr(t,Br))return t[Br];var n=t.constructor;return Ur(n)&&t instanceof n?n.prototype:t instanceof Gr?qr:null},Hr=j,zr=V,Kr=Hr.String,Yr=Hr.TypeError,Zr=C,Jr=yn,Xr=function(e){if("object"==typeof e||zr(e))return e;throw Yr("Can't set "+Kr(e)+" as a prototype")},Qr=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Zr(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Jr(n),Xr(r),t?e(n,r):n.__proto__=r,n}}():void 0),$r={},ei=Kn,ti=Math.max,ni=Math.min,ri=function(e,t){var n=ei(e);return n<0?ti(n+t,0):ni(n,t)},ii=he,oi=ri,ai=Xn,si=function(e){return function(t,n,r){var i,o=ii(t),a=ai(o),s=oi(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},ci={includes:si(!0),indexOf:si(!1)},ui={},li=ut,di=he,hi=ci.indexOf,fi=ui,pi=C([].push),vi=function(e,t){var n,r=di(e),i=0,o=[];for(n in r)!li(fi,n)&&li(r,n)&&pi(o,n);for(;t.length>i;)li(r,n=t[i++])&&(~hi(o,n)||pi(o,n));return o},gi=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],mi=vi,yi=gi.concat("length","prototype");$r.f=Object.getOwnPropertyNames||function(e){return mi(e,yi)};var bi={};bi.f=Object.getOwnPropertySymbols;var _i=_e,Ei=$r,Si=bi,wi=yn,xi=C([].concat),Ti=_i("Reflect","ownKeys")||function(e){var t=Ei.f(wi(e)),n=Si.f;return n?xi(t,n(e)):t},Ii=ut,Ri=Ti,ki=F,Oi=hn,Ci={},Ai=vi,Ni=gi,ji=Object.keys||function(e){return Ai(e,Ni)},Di=B,Pi=fn,Li=hn,Mi=yn,Ui=he,Vi=ji;Ci.f=Di&&!Pi?Object.defineProperties:function(e,t){Mi(e);for(var n,r=Ui(t),i=Vi(t),o=i.length,a=0;o>a;)Li.f(e,n=i[a++],r[n]);return e};var Fi,Bi=_e("document","documentElement"),Gi=yn,qi=Ci,Wi=gi,Hi=ui,zi=Bi,Ki=Ft,Yi=Dr("IE_PROTO"),Zi=function(){},Ji=function(e){return"<script>"+e+"<\/script>"},Xi=function(e){e.write(Ji("")),e.close();var t=e.parentWindow.Object;return e=null,t},Qi=function(){try{Fi=new ActiveXObject("htmlfile")}catch(e){}var e,t;Qi="undefined"!=typeof document?document.domain&&Fi?Xi(Fi):((t=Ki("iframe")).style.display="none",zi.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Ji("document.F=Object")),e.close(),e.F):Xi(Fi);for(var n=Wi.length;n--;)delete Qi.prototype[Wi[n]];return Qi()};Hi[Yi]=!0;var $i=Object.create||function(e,t){var n;return null!==e?(Zi.prototype=Gi(e),n=new Zi,Zi.prototype=null,n[Yi]=e):n=Qi(),void 0===t?n:qi.f(n,t)},eo=C("".replace),to=String(Error("zxcasd").stack),no=/\n\s*at [^:]*:[^\n]*/,ro=no.test(to),io=pe,oo=Nn,ao={},so=ao,co=Tt("iterator"),uo=Array.prototype,lo={};lo[Tt("toStringTag")]="z";var ho="[object z]"===String(lo),fo=j,po=ho,vo=V,go=te,mo=Tt("toStringTag"),yo=fo.Object,bo="Arguments"==go(function(){return arguments}()),_o=po?go:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=yo(e),mo))?n:bo?go(t):"Object"==(r=go(t))&&vo(t.callee)?"Arguments":r},Eo=_o,So=ze,wo=ao,xo=Tt("iterator"),To=function(e){if(null!=e)return So(e,xo)||So(e,"@@iterator")||wo[Eo(e)]},Io=W,Ro=We,ko=yn,Oo=Fe,Co=To,Ao=j.TypeError,No=W,jo=yn,Do=ze,Po=dn,Lo=W,Mo=yn,Uo=Fe,Vo=function(e){return void 0!==e&&(so.Array===e||uo[co]===e)},Fo=Xn,Bo=A,Go=function(e,t){var n=arguments.length<2?Co(e):t;if(Ro(n))return ko(Io(n,e));throw Ao(Oo(e)+" is not iterable")},qo=To,Wo=function(e,t,n){var r,i;jo(e);try{if(!(r=Do(e,"return"))){if("throw"===t)throw n;return n}r=No(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return jo(r),n},Ho=j.TypeError,zo=function(e,t){this.stopped=e,this.result=t},Ko=zo.prototype,Yo=function(e,t,n){var r,i,o,a,s,c,u,l=n&&n.that,d=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),p=Po(t,l),v=function(e){return r&&Wo(r,"normal",e),new zo(!0,e)},g=function(e){return d?(Mo(e),f?p(e[0],e[1],v):p(e[0],e[1])):f?p(e,v):p(e)};if(h)r=e;else{if(!(i=qo(e)))throw Ho(Uo(e)+" is not iterable");if(Vo(i)){for(o=0,a=Fo(e);a>o;o++)if((s=g(e[o]))&&Bo(Ko,s))return s;return new zo(!1)}r=Go(e,i)}for(c=r.next;!(u=Lo(c,r)).done;){try{s=g(u.value)}catch(e){Wo(r,"throw",e)}if("object"==typeof s&&s&&Bo(Ko,s))return s}return new zo(!1)},Zo=_o,Jo=j.String,Xo=function(e){if("Symbol"===Zo(e))throw TypeError("Cannot convert a Symbol value to a string");return Jo(e)},Qo=Xo,$o=X,ea=!w((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",$o(1,7)),7!==e.stack)})),ta=Wn,na=j,ra=A,ia=Wr,oa=Qr,aa=function(e,t,n){for(var r=Ri(t),i=Oi.f,o=ki.f,a=0;a<r.length;a++){var s=r[a];Ii(e,s)||n&&Ii(n,s)||i(e,s,o(t,s))}},sa=$i,ca=Nn,ua=X,la=function(e,t){if(ro&&"string"==typeof e)for(;t--;)e=eo(e,no,"");return e},da=function(e,t){io(t)&&"cause"in t&&oo(e,"cause",t.cause)},ha=Yo,fa=function(e,t){return void 0===e?arguments.length<2?"":t:Qo(e)},pa=ea,va=Tt("toStringTag"),ga=na.Error,ma=[].push,ya=function(e,t){var n,r=arguments.length>2?arguments[2]:void 0,i=ra(ba,this);oa?n=oa(new ga,i?ia(this):ba):(n=i?this:sa(ba),ca(n,va,"Error")),void 0!==t&&ca(n,"message",fa(t)),pa&&ca(n,"stack",la(n.stack,1)),da(n,r);var o=[];return ha(e,ma,{that:o}),ca(n,"errors",o),n};oa?oa(ya,ga):aa(ya,ga,{name:!0});var ba=ya.prototype=sa(ga.prototype,{constructor:ua(1,ya),message:ua(1,""),name:ua(1,"AggregateError")});ta({global:!0},{AggregateError:ya});var _a=V,Ea=nt,Sa=C(Function.toString);_a(Ea.inspectSource)||(Ea.inspectSource=function(e){return Sa(e)});var wa,xa,Ta,Ia=Ea.inspectSource,Ra=V,ka=Ia,Oa=j.WeakMap,Ca=Ra(Oa)&&/native code/.test(ka(Oa)),Aa=j,Na=C,ja=pe,Da=Nn,Pa=ut,La=nt,Ma=Dr,Ua=ui,Va="Object already initialized",Fa=Aa.TypeError,Ba=Aa.WeakMap;if(Ca||La.state){var Ga=La.state||(La.state=new Ba),qa=Na(Ga.get),Wa=Na(Ga.has),Ha=Na(Ga.set);wa=function(e,t){if(Wa(Ga,e))throw new Fa(Va);return t.facade=e,Ha(Ga,e,t),t},xa=function(e){return qa(Ga,e)||{}},Ta=function(e){return Wa(Ga,e)}}else{var za=Ma("state");Ua[za]=!0,wa=function(e,t){if(Pa(e,za))throw new Fa(Va);return t.facade=e,Da(e,za,t),t},xa=function(e){return Pa(e,za)?e[za]:{}},Ta=function(e){return Pa(e,za)}}var Ka,Ya,Za,Ja={set:wa,get:xa,has:Ta,enforce:function(e){return Ta(e)?xa(e):wa(e,{})},getterFor:function(e){return function(t){var n;if(!ja(t)||(n=xa(t)).type!==e)throw Fa("Incompatible receiver, "+e+" required");return n}}},Xa=B,Qa=ut,$a=Function.prototype,es=Xa&&Object.getOwnPropertyDescriptor,ts=Qa($a,"name"),ns={EXISTS:ts,PROPER:ts&&"something"===function(){}.name,CONFIGURABLE:ts&&(!Xa||Xa&&es($a,"name").configurable)},rs=Nn,is=function(e,t,n,r){r&&r.enumerable?e[t]=n:rs(e,t,n)},os=w,as=V,ss=$i,cs=Wr,us=is,ls=Tt("iterator"),ds=!1;[].keys&&("next"in(Za=[].keys())?(Ya=cs(cs(Za)))!==Object.prototype&&(Ka=Ya):ds=!0);var hs=null==Ka||os((function(){var e={};return Ka[ls].call(e)!==e}));as((Ka=hs?{}:ss(Ka))[ls])||us(Ka,ls,(function(){return this}));var fs={IteratorPrototype:Ka,BUGGY_SAFARI_ITERATORS:ds},ps=_o,vs=ho?{}.toString:function(){return"[object "+ps(this)+"]"},gs=ho,ms=hn.f,ys=Nn,bs=ut,_s=vs,Es=Tt("toStringTag"),Ss=function(e,t,n,r){if(e){var i=n?e:e.prototype;bs(i,Es)||ms(i,Es,{configurable:!0,value:t}),r&&!gs&&ys(i,"toString",_s)}},ws=fs.IteratorPrototype,xs=$i,Ts=X,Is=Ss,Rs=ao,ks=function(){return this},Os=Wn,Cs=W,As=function(e,t,n,r){var i=t+" Iterator";return e.prototype=xs(ws,{next:Ts(+!r,n)}),Is(e,i,!1,!0),Rs[i]=ks,e},Ns=Wr,js=Ss,Ds=is,Ps=ao,Ls=ns.PROPER,Ms=fs.BUGGY_SAFARI_ITERATORS,Us=Tt("iterator"),Vs="keys",Fs="values",Bs="entries",Gs=function(){return this},qs=function(e,t,n,r,i,o,a){As(n,t,r);var s,c,u,l=function(e){if(e===i&&v)return v;if(!Ms&&e in f)return f[e];switch(e){case Vs:case Fs:case Bs:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",h=!1,f=e.prototype,p=f[Us]||f["@@iterator"]||i&&f[i],v=!Ms&&p||l(i),g="Array"==t&&f.entries||p;if(g&&(s=Ns(g.call(new e)))!==Object.prototype&&s.next&&(js(s,d,!0,!0),Ps[d]=Gs),Ls&&i==Fs&&p&&p.name!==Fs&&(h=!0,v=function(){return Cs(p,this)}),i)if(c={values:l(Fs),keys:o?v:l(Vs),entries:l(Bs)},a)for(u in c)(Ms||h||!(u in f))&&Ds(f,u,c[u]);else Os({target:t,proto:!0,forced:Ms||h},c);return a&&f[Us]!==v&&Ds(f,Us,v,{name:i}),Ps[t]=v,c},Ws=he,Hs=ao,zs=Ja;hn.f;var Ks=qs,Ys="Array Iterator",Zs=zs.set,Js=zs.getterFor(Ys);Ks(Array,"Array",(function(e,t){Zs(this,{type:Ys,target:Ws(e),index:0,kind:t})}),(function(){var e=Js(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),Hs.Arguments=Hs.Array;var Xs=j.Promise,Qs=is,$s=_e,ec=hn,tc=B,nc=Tt("species"),rc=A,ic=j.TypeError,oc=Tt("iterator"),ac=!1;try{var sc=0,cc={next:function(){return{done:!!sc++}},return:function(){ac=!0}};cc[oc]=function(){return this},Array.from(cc,(function(){throw 2}))}catch(E){}var uc=C,lc=w,dc=V,hc=_o,fc=Ia,pc=function(){},vc=[],gc=_e("Reflect","construct"),mc=/^\s*(?:class|function)\b/,yc=uc(mc.exec),bc=!mc.exec(pc),_c=function(e){if(!dc(e))return!1;try{return gc(pc,vc,e),!0}catch(e){return!1}},Ec=function(e){if(!dc(e))return!1;switch(hc(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return bc||!!yc(mc,fc(e))}catch(e){return!0}};Ec.sham=!0;var Sc,wc,xc,Tc,Ic=!gc||lc((function(){var e;return _c(_c.call)||!_c(Object)||!_c((function(){e=!0}))||e}))?Ec:_c,Rc=Ic,kc=Fe,Oc=j.TypeError,Cc=yn,Ac=function(e){if(Rc(e))return e;throw Oc(kc(e)+" is not a constructor")},Nc=Tt("species"),jc=function(e,t){var n,r=Cc(e).constructor;return void 0===r||null==(n=Cc(r)[Nc])?t:Ac(n)},Dc=C([].slice),Pc=/(?:ipad|iphone|ipod).*applewebkit/i.test(Ee),Lc=j,Mc=U,Uc=dn,Vc=V,Fc=ut,Bc=w,Gc=Bi,qc=Dc,Wc=Ft,Hc=Pc,zc=sr,Kc=Lc.setImmediate,Yc=Lc.clearImmediate,Zc=Lc.process,Jc=Lc.Dispatch,Xc=Lc.Function,Qc=Lc.MessageChannel,$c=Lc.String,eu=0,tu={},nu="onreadystatechange";try{Sc=Lc.location}catch(E){}var ru=function(e){if(Fc(tu,e)){var t=tu[e];delete tu[e],t()}},iu=function(e){return function(){ru(e)}},ou=function(e){ru(e.data)},au=function(e){Lc.postMessage($c(e),Sc.protocol+"//"+Sc.host)};Kc&&Yc||(Kc=function(e){var t=qc(arguments,1);return tu[++eu]=function(){Mc(Vc(e)?e:Xc(e),void 0,t)},wc(eu),eu},Yc=function(e){delete tu[e]},zc?wc=function(e){Zc.nextTick(iu(e))}:Jc&&Jc.now?wc=function(e){Jc.now(iu(e))}:Qc&&!Hc?(Tc=(xc=new Qc).port2,xc.port1.onmessage=ou,wc=Uc(Tc.postMessage,Tc)):Lc.addEventListener&&Vc(Lc.postMessage)&&!Lc.importScripts&&Sc&&"file:"!==Sc.protocol&&!Bc(au)?(wc=au,Lc.addEventListener("message",ou,!1)):wc=nu in Wc("script")?function(e){Gc.appendChild(Wc("script")).onreadystatechange=function(){Gc.removeChild(this),ru(e)}}:function(e){setTimeout(iu(e),0)});var su,cu,uu,lu,du,hu,fu,pu,vu={set:Kc,clear:Yc},gu=j,mu=/ipad|iphone|ipod/i.test(Ee)&&void 0!==gu.Pebble,yu=/web0s(?!.*chrome)/i.test(Ee),bu=j,_u=dn,Eu=F.f,Su=vu.set,wu=Pc,xu=mu,Tu=yu,Iu=sr,Ru=bu.MutationObserver||bu.WebKitMutationObserver,ku=bu.document,Ou=bu.process,Cu=bu.Promise,Au=Eu(bu,"queueMicrotask"),Nu=Au&&Au.value;Nu||(su=function(){var e,t;for(Iu&&(e=Ou.domain)&&e.exit();cu;){t=cu.fn,cu=cu.next;try{t()}catch(e){throw cu?lu():uu=void 0,e}}uu=void 0,e&&e.enter()},wu||Iu||Tu||!Ru||!ku?!xu&&Cu&&Cu.resolve?((fu=Cu.resolve(void 0)).constructor=Cu,pu=_u(fu.then,fu),lu=function(){pu(su)}):Iu?lu=function(){Ou.nextTick(su)}:(Su=_u(Su,bu),lu=function(){Su(su)}):(du=!0,hu=ku.createTextNode(""),new Ru(su).observe(hu,{characterData:!0}),lu=function(){hu.data=du=!du}));var ju=Nu||function(e){var t={fn:e,next:void 0};uu&&(uu.next=t),cu||(cu=t,lu()),uu=t},Du={},Pu=We,Lu=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=Pu(t),this.reject=Pu(n)};Du.f=function(e){return new Lu(e)};var Mu=yn,Uu=pe,Vu=Du,Fu=function(e,t){if(Mu(e),Uu(t)&&t.constructor===e)return t;var n=Vu.f(e);return(0,n.resolve)(t),n.promise},Bu=j,Gu=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},qu=function(){this.head=null,this.tail=null};qu.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var Wu,Hu,zu,Ku="object"==typeof window,Yu=Wn,Zu=j,Ju=_e,Xu=W,Qu=Xs,$u=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:Qs(e,r,t[r],n);return e},el=Ss,tl=function(e){var t=$s(e),n=ec.f;tc&&t&&!t[nc]&&n(t,nc,{configurable:!0,get:function(){return this}})},nl=We,rl=V,il=pe,ol=function(e,t){if(rc(t,e))return e;throw ic("Incorrect invocation")},al=Ia,sl=Yo,cl=function(e,t){if(!t&&!ac)return!1;var n=!1;try{var r={};r[oc]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},ul=jc,ll=vu.set,dl=ju,hl=Fu,fl=function(e,t){var n=Bu.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))},pl=Du,vl=Gu,gl=qu,ml=Ja,yl=sn,bl=Ku,_l=sr,El=ke,Sl=Tt("species"),wl="Promise",xl=ml.getterFor(wl),Tl=ml.set,Il=ml.getterFor(wl),Rl=Qu&&Qu.prototype,kl=Qu,Ol=Rl,Cl=Zu.TypeError,Al=Zu.document,Nl=Zu.process,jl=pl.f,Dl=jl,Pl=!!(Al&&Al.createEvent&&Zu.dispatchEvent),Ll=rl(Zu.PromiseRejectionEvent),Ml="unhandledrejection",Ul=yl(wl,(function(){var e=al(kl),t=e!==String(kl);if(!t&&66===El)return!0;if(!Ol.finally)return!0;if(El>=51&&/native code/.test(e))return!1;var n=new kl((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[Sl]=r,!(n.then((function(){}))instanceof r)||!t&&bl&&!Ll})),Vl=Ul||!cl((function(e){kl.all(e).catch((function(){}))})),Fl=function(e){var t;return!(!il(e)||!rl(t=e.then))&&t},Bl=function(e,t){var n,r,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(a||(2===t.rejection&&zl(t),t.rejection=1),!0===s?n=o:(l&&l.enter(),n=s(o),l&&(l.exit(),i=!0)),n===e.promise?u(Cl("Promise-chain cycle")):(r=Fl(n))?Xu(r,n,c,u):c(n)):u(o)}catch(e){l&&!i&&l.exit(),u(e)}},Gl=function(e,t){e.notified||(e.notified=!0,dl((function(){for(var n,r=e.reactions;n=r.get();)Bl(n,e);e.notified=!1,t&&!e.rejection&&Wl(e)})))},ql=function(e,t,n){var r,i;Pl?((r=Al.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),Zu.dispatchEvent(r)):r={promise:t,reason:n},!Ll&&(i=Zu["on"+e])?i(r):e===Ml&&fl("Unhandled promise rejection",n)},Wl=function(e){Xu(ll,Zu,(function(){var t,n=e.facade,r=e.value;if(Hl(e)&&(t=vl((function(){_l?Nl.emit("unhandledRejection",r,n):ql(Ml,n,r)})),e.rejection=_l||Hl(e)?2:1,t.error))throw t.value}))},Hl=function(e){return 1!==e.rejection&&!e.parent},zl=function(e){Xu(ll,Zu,(function(){var t=e.facade;_l?Nl.emit("rejectionHandled",t):ql("rejectionhandled",t,e.value)}))},Kl=function(e,t,n){return function(r){e(t,r,n)}},Yl=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Gl(e,!0))},Zl=function e(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw Cl("Promise can't be resolved itself");var i=Fl(n);i?dl((function(){var r={done:!1};try{Xu(i,n,Kl(e,r,t),Kl(Yl,r,t))}catch(n){Yl(r,n,t)}})):(t.value=n,t.state=1,Gl(t,!1))}catch(n){Yl({done:!1},n,t)}}};Ul&&(Ol=(kl=function(e){ol(this,Ol),nl(e),Xu(Wu,this);var t=xl(this);try{e(Kl(Zl,t),Kl(Yl,t))}catch(e){Yl(t,e)}}).prototype,(Wu=function(e){Tl(this,{type:wl,done:!1,notified:!1,parent:!1,reactions:new gl,rejection:!1,state:0,value:void 0})}).prototype=$u(Ol,{then:function(e,t){var n=Il(this),r=jl(ul(this,kl));return n.parent=!0,r.ok=!rl(e)||e,r.fail=rl(t)&&t,r.domain=_l?Nl.domain:void 0,0==n.state?n.reactions.add(r):dl((function(){Bl(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),Hu=function(){var e=new Wu,t=xl(e);this.promise=e,this.resolve=Kl(Zl,t),this.reject=Kl(Yl,t)},pl.f=jl=function(e){return e===kl||e===zu?new Hu(e):Dl(e)}),Yu({global:!0,wrap:!0,forced:Ul},{Promise:kl}),el(kl,wl,!1,!0),tl(wl),zu=Ju(wl),Yu({target:wl,stat:!0,forced:Ul},{reject:function(e){var t=jl(this);return Xu(t.reject,void 0,e),t.promise}}),Yu({target:wl,stat:!0,forced:!0},{resolve:function(e){return hl(this===zu?kl:this,e)}}),Yu({target:wl,stat:!0,forced:Vl},{all:function(e){var t=this,n=jl(t),r=n.resolve,i=n.reject,o=vl((function(){var n=nl(t.resolve),o=[],a=0,s=1;sl(e,(function(e){var c=a++,u=!1;s++,Xu(n,t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=jl(t),r=n.reject,i=vl((function(){var i=nl(t.resolve);sl(e,(function(e){Xu(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Jl=W,Xl=We,Ql=Du,$l=Gu,ed=Yo;Wn({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=Ql.f(t),r=n.resolve,i=n.reject,o=$l((function(){var n=Xl(t.resolve),i=[],o=0,a=1;ed(e,(function(e){var s=o++,c=!1;a++,Jl(n,t,e).then((function(e){c||(c=!0,i[s]={status:"fulfilled",value:e},--a||r(i))}),(function(e){c||(c=!0,i[s]={status:"rejected",reason:e},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}});var td=We,nd=_e,rd=W,id=Du,od=Gu,ad=Yo,sd="No one promise resolved";Wn({target:"Promise",stat:!0},{any:function(e){var t=this,n=nd("AggregateError"),r=id.f(t),i=r.resolve,o=r.reject,a=od((function(){var r=td(t.resolve),a=[],s=0,c=1,u=!1;ad(e,(function(e){var l=s++,d=!1;c++,rd(r,t,e).then((function(e){d||u||(u=!0,i(e))}),(function(e){d||u||(d=!0,a[l]=e,--c||o(new n(a,sd)))}))})),--c||o(new n(a,sd))}));return a.error&&o(a.value),r.promise}});var cd=Xs,ud=_e,ld=V,dd=jc,hd=Fu;Wn({target:"Promise",proto:!0,real:!0,forced:!!cd&&w((function(){cd.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=dd(this,ud("Promise")),n=ld(e);return this.then(n?function(n){return hd(t,e()).then((function(){return n}))}:e,n?function(n){return hd(t,e()).then((function(){throw n}))}:e)}});var fd=C,pd=Kn,vd=Xo,gd=ue,md=fd("".charAt),yd=fd("".charCodeAt),bd=fd("".slice),_d=function(e){return function(t,n){var r,i,o=vd(gd(t)),a=pd(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=yd(o,a))<55296||r>56319||a+1===s||(i=yd(o,a+1))<56320||i>57343?e?md(o,a):r:e?bd(o,a,a+2):i-56320+(r-55296<<10)+65536}},Ed=(_d(!1),_d(!0)),Sd=Xo,wd=Ja,xd=qs,Td="String Iterator",Id=wd.set,Rd=wd.getterFor(Td);xd(String,"String",(function(e){Id(this,{type:Td,string:Sd(e),index:0})}),(function(){var e,t=Rd(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=Ed(n,r),t.index+=e.length,{value:e,done:!1})}));var kd=ve.Promise,Od={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Cd=j,Ad=_o,Nd=Nn,jd=ao,Dd=Tt("toStringTag");for(var Pd in Od){var Ld=Cd[Pd],Md=Ld&&Ld.prototype;Md&&Ad(Md)!==Dd&&Nd(Md,Dd,Pd),jd[Pd]=jd.Array}var Ud=kd,Vd=Ud,Fd=Tr;function Bd(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),(o={})[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};o((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){var a=e.video.facingMode;a=a&&("object"==typeof a?a:{ideal:a});var s,c=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||c)&&(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?s=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(s=["front"]),s))return n.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return s.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&s.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=a.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),Fd("chrome: "+JSON.stringify(e)),i(e)}));e.video=r(e.video)}return Fd("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){var a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return i(e,(function(e){return a(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Vd.reject(o(e))}))}))}}}}function Gd(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function qd(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Sr(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function Wd(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Hd(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],o=n[2];if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){i(s(a(e)))};return t.apply(this,[c,r])}return new Vd((function(n,r){t.apply(e,[function(e){n(s(a(e)))},r])})).then(i,o)}}}function zd(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return Cr(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),Sr(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return Cr(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,o=arguments[0];return this.getSenders().forEach((function(e){e.track===o&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===o&&(n?r=!0:n=e),e.track===o})),r||t&&n?Vd.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Vd.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function Kd(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}function Yd(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Kd(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var o=this.getSenders().find((function(e){return e.track===t}));if(o)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var a=this._streams[n.id];if(a)a.addTrack(t),Vd.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=m({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var r=s(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return s(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=c(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function c(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function Zd(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=m({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}))}function Jd(e,t){Sr(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var Xd=Object.freeze({__proto__:null,shimMediaStream:Gd,shimOnTrack:qd,shimGetSendersWithDtmf:Wd,shimGetStats:Hd,shimSenderReceiverGetStats:zd,shimAddTrackRemoveTrackWithNative:Kd,shimAddTrackRemoveTrack:Yd,shimPeerConnection:Zd,fixNegotiationNeeded:Jd,shimGetUserMedia:Bd,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function Qd(e,t){var n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){Ir("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),i(e.audio,"autoGainControl","mozAutoGainControl"),i(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},r&&r.prototype.getSettings){var a=r.prototype.getSettings;r.prototype.getSettings=function(){var e=a.apply(this,arguments);return i(e,"mozAutoGainControl","autoGainControl"),i(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),i(e,"autoGainControl","mozAutoGainControl"),i(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function $d(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function eh(e,t){if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=m({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),i=e[0],o=e[1],a=e[2];return r.apply(this,[i||null]).then((function(e){if(t.version<53&&!o)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(o,a)}}}function th(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Vd.resolve(new Map)}}}function nh(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),Sr(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function rh(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;Ir("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function ih(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function oh(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]);var n=(e=g(e)).length>0;n&&e.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();(!("encodings"in o)||1===o.encodings.length&&0===Object.keys(o.encodings[0]).length)&&(o.encodings=e,i.sendEncodings=e,this.setParametersPromises.push(i.setParameters(o).then((function(){delete i.sendEncodings})).catch((function(){delete i.sendEncodings}))))}return r})}}function ah(e){if("object"==typeof e&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function sh(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Vd.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function ch(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Vd.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}var uh=Object.freeze({__proto__:null,shimOnTrack:$d,shimPeerConnection:eh,shimSenderGetStats:th,shimReceiverGetStats:nh,shimRemoveStream:rh,shimRTCDataChannel:ih,shimAddTransceiver:oh,shimGetParameters:ah,shimCreateOffer:sh,shimCreateAnswer:ch,shimGetUserMedia:Qd,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Vd.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}});function lh(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function dh(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function hh(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Vd.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Vd.resolve()):i};var s=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Vd.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Vd.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Vd.resolve()):r},t.addIceCandidate=s}}function fh(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(ph(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function ph(e){return e&&void 0!==e.video?Object.assign({},e,{video:Or(e.video)}):e}function vh(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(Ir("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,r.push(o)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function gh(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function mh(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function yh(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var bh=Object.freeze({__proto__:null,shimLocalStreamsAPI:lh,shimRemoteStreamsAPI:dh,shimCallbacksAPI:hh,shimGetUserMedia:fh,shimConstraints:ph,shimRTCIceServerUrls:vh,shimTrackEventTransceiver:gh,shimCreateOfferLegacy:mh,shimAudioContext:yh}),_h="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff",Eh=ue,Sh=Xo,wh=C("".replace),xh="[\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]",Th=RegExp("^"+xh+xh+"*"),Ih=RegExp(xh+xh+"*$"),Rh=function(e){return function(t){var n=Sh(Eh(t));return 1&e&&(n=wh(n,Th,"")),2&e&&(n=wh(n,Ih,"")),n}},kh={start:Rh(1),end:Rh(2),trim:Rh(3)},Oh=ns.PROPER,Ch=w,Ah=_h,Nh=kh.trim;Wn({target:"String",proto:!0,forced:function(e){return Ch((function(){return!!Ah[e]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[e]()||Oh&&Ah[e].name!==e}))}("trim")},{trim:function(){return Nh(this)}});var jh=hr("String").trim,Dh=A,Ph=jh,Lh=String.prototype,Mh=function(e){var t=e.trim;return"string"==typeof e||e===Lh||Dh(Lh,e)&&t===Lh.trim?Ph:t},Uh={exports:{}};!function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return Mh(e).call(e).split("\n").map((function(e){return Mh(e).call(e)}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){var n;return Mh(n=t>0?"m="+e:e).call(n)+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation);var n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++){var o,a;t=Mh(o=r[i]).call(o).split("="),n[Mh(a=t[0]).call(a)]=t[1]}return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},t.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],a=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=t.parseRtpMap(a),c=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var i=0;return n.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],i=t.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),o&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;var o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(n=i[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");i.length>0&&(n=parseInt(i[0].substr(19),10)),isNaN(n)&&(n=65536);var o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};var a=t.matchPrefix(e,"a=sctpmap:");if(a.length>0){var s=a[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var i=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){for(var r=t.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t}(Uh);var Vh=Uh.exports,Fh=Object.freeze(E({__proto__:null,default:Vh},[Uh.exports]));function Bh(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=Vh.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Sr(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function Gh(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Sr(e,"icecandidate",(function(e){if(e.candidate){var t=Vh.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function qh(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=Vh.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=Vh.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=Vh.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76&&"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}),n(arguments[0])){var e,s=r(arguments[0]),c=i(s),u=o(arguments[0],s);e=0===c&&0===u?Number.POSITIVE_INFINITY:0===c||0===u?Math.max(c,u):Math.min(c,u);var l={};Object.defineProperty(l,"maxMessageSize",{get:function(){return e}}),this._sctp=l}return a.apply(this,arguments)}}}function Wh(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},Sr(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function Hh(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function zh(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71)&&!("safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==Mh(e).call(e)})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}}function Kh(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Vd.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Vd.resolve())})}}function Yh(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this,t=arguments[0]||{};if("object"!=typeof t||t.type&&t.sdp)return n.apply(this,arguments);if(!(t={type:t.type,sdp:t.sdp}).type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":t.type="offer";break;default:t.type="answer"}return t.sdp||"offer"!==t.type&&"answer"!==t.type?n.apply(this,[t]):("offer"===t.type?this.createOffer:this.createAnswer).apply(this).then((function(t){return n.apply(e,[t])}))})}}var Zh,Jh,Xh=Object.freeze({__proto__:null,shimRTCIceCandidate:Bh,shimRTCIceCandidateRelayProtocol:Gh,shimMaxMessageSize:qh,shimSendThrowTypeError:Wh,shimConnectionState:Hh,removeExtmapAllowMixed:zh,shimAddIceCandidateNullOrEmpty:Kh,shimParameterlessSetLocalDescription:Yh});!function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},n=Tr,r=Rr(e),i={browserDetails:r,commonShim:Xh,extractVersion:Er,disableLog:wr,disableWarnings:xr,sdp:Fh};switch(r.browser){case"chrome":if(!Xd||!Zd||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Xd,Kh(e,r),Yh(e),Bd(e,r),Gd(e),Zd(e,r),qd(e),Yd(e,r),Wd(e),Hd(e),zd(e),Jd(e,r),Bh(e),Gh(e),Hh(e),qh(e,r),Wh(e),zh(e,r);break;case"firefox":if(!uh||!eh||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=uh,Kh(e,r),Yh(e),Qd(e,r),eh(e,r),$d(e),rh(e),th(e),nh(e),ih(e),oh(e),ah(e),sh(e),ch(e),Bh(e),Hh(e),qh(e,r),Wh(e);break;case"safari":if(!bh||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=bh,Kh(e,r),Yh(e),vh(e),mh(e),hh(e),lh(e),dh(e),gh(e),fh(e),yh(e),Bh(e),Gh(e),qh(e,r),Wh(e),zh(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window}),function(e){e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot"}(Zh||(Zh={})),function(e){e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger"}(Jh||(Jh={}));var Qh={exports:{}};!function(e,t){!function(n,r){var i="function",o="undefined",a="object",s="string",c="major",u="model",l="name",d="type",h="vendor",f="version",p="architecture",v="console",g="mobile",m="tablet",y="smarttv",b="wearable",_="embedded",E="Amazon",S="Apple",w="ASUS",x="BlackBerry",T="Google",I="Huawei",R="LG",k="Microsoft",O="Motorola",C="Samsung",A="Sharp",N="Sony",j="Xiaomi",D="Zebra",P="Facebook",L="Chromium OS",M="Mac OS",U=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},V=function(e,t){return typeof e===s&&-1!==F(t).indexOf(F(e))},F=function(e){return e.toLowerCase()},B=function(e,t){if(typeof e===s)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,350)},G=function(e,t){for(var n,o,s,c,u,l,d=0;d<t.length&&!u;){var h=t[d],f=t[d+1];for(n=o=0;n<h.length&&!u&&h[n];)if(u=h[n++].exec(e))for(s=0;s<f.length;s++)l=u[++o],typeof(c=f[s])===a&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):r:this[c[0]]=l?c[1].call(this,l,c[2]):r:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):r):this[c]=l||r;d+=2}},q=function(e,t){for(var n in t)if(typeof t[n]===a&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(V(t[n][i],e))return"?"===n?r:n}else if(V(t[n],e))return"?"===n?r:n;return e},W={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},H={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,f],[/opios[\/ ]+([\w\.]+)/i],[f,[l,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[f,[l,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[l,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[l,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[f,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[l,"IE"]],[/yabrowser\/([\w\.]+)/i],[f,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure Browser"],f],[/\bfocus\/([\w\.]+)/i],[f,[l,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[f,[l,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[l,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[l,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[f,[l,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 Browser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[l,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,P],f],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[l,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[l,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[l,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,"Chrome WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[l,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[f,q,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[l,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,f],[/(cobalt)\/([\w\.]+)/i],[l,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,F]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",F]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[h,C],[d,m]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[h,C],[d,g]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[h,S],[d,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[h,S],[d,m]],[/(macintosh);/i],[u,[h,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[h,A],[d,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[h,I],[d,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[h,I],[d,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[h,j],[d,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[h,j],[d,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[h,"OPPO"],[d,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[h,"Vivo"],[d,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[h,"Realme"],[d,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[h,O],[d,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[h,O],[d,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[h,R],[d,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[h,R],[d,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[h,"Lenovo"],[d,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[h,"Nokia"],[d,g]],[/(pixel c)\b/i],[u,[h,T],[d,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[h,T],[d,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[h,N],[d,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[h,N],[d,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[h,"OnePlus"],[d,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[h,E],[d,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[h,E],[d,g]],[/(playbook);[-\w\),; ]+(rim)/i],[u,h,[d,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[h,x],[d,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[h,w],[d,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[h,w],[d,g]],[/(nexus 9)/i],[u,[h,"HTC"],[d,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[u,/_/g," "],[d,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[h,"Acer"],[d,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[h,"Meizu"],[d,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,u,[d,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,u,[d,m]],[/(surface duo)/i],[u,[h,k],[d,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[h,"Fairphone"],[d,g]],[/(u304aa)/i],[u,[h,"AT&T"],[d,g]],[/\bsie-(\w*)/i],[u,[h,"Siemens"],[d,g]],[/\b(rct\w+) b/i],[u,[h,"RCA"],[d,m]],[/\b(venue[\d ]{2,7}) b/i],[u,[h,"Dell"],[d,m]],[/\b(q(?:mv|ta)\w+) b/i],[u,[h,"Verizon"],[d,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[h,"Barnes & Noble"],[d,m]],[/\b(tm\d{3}\w+) b/i],[u,[h,"NuVision"],[d,m]],[/\b(k88) b/i],[u,[h,"ZTE"],[d,m]],[/\b(nx\d{3}j) b/i],[u,[h,"ZTE"],[d,g]],[/\b(gen\d{3}) b.+49h/i],[u,[h,"Swiss"],[d,g]],[/\b(zur\d{3}) b/i],[u,[h,"Swiss"],[d,m]],[/\b((zeki)?tb.*\b) b/i],[u,[h,"Zeki"],[d,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],u,[d,m]],[/\b(ns-?\w{0,9}) b/i],[u,[h,"Insignia"],[d,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[h,"NextBook"],[d,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],u,[d,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],u,[d,g]],[/\b(ph-1) /i],[u,[h,"Essential"],[d,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[h,"Envizen"],[d,m]],[/\b(trio[-\w\. ]+) b/i],[u,[h,"MachSpeed"],[d,m]],[/\btu_(1491) b/i],[u,[h,"Rotor"],[d,m]],[/(shield[\w ]+) b/i],[u,[h,"Nvidia"],[d,m]],[/(sprint) (\w+)/i],[h,u,[d,g]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[h,k],[d,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[h,D],[d,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[h,D],[d,g]],[/smart-tv.+(samsung)/i],[h,[d,y]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[h,C],[d,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,R],[d,y]],[/(apple) ?tv/i],[h,[u,"Apple TV"],[d,y]],[/crkey/i],[[u,"Chromecast"],[h,T],[d,y]],[/droid.+aft(\w)( bui|\))/i],[u,[h,E],[d,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[h,A],[d,y]],[/(bravia[\w ]+)( bui|\))/i],[u,[h,N],[d,y]],[/(mitv-\w{5}) bui/i],[u,[h,j],[d,y]],[/Hbbtv.*(technisat) (.*);/i],[h,u,[d,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,B],[u,B],[d,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,u,[d,v]],[/droid.+; (shield) bui/i],[u,[h,"Nvidia"],[d,v]],[/(playstation [345portablevi]+)/i],[u,[h,N],[d,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[h,k],[d,v]],[/((pebble))app/i],[h,u,[d,b]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[h,S],[d,b]],[/droid.+; (glass) \d/i],[u,[h,T],[d,b]],[/droid.+; (wt63?0{2,3})\)/i],[u,[h,D],[d,b]],[/(quest( 2| pro)?)/i],[u,[h,P],[d,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[d,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[d,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[d,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,g]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[l,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[l,[f,q,W]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[l,"Windows"],[f,q,W]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,M],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,f],[/\(bb(10);/i],[f,[l,x]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[l,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[l,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,L],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,f],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[l,f]]},z=function e(t,c){if(typeof t===a&&(c=t,t=r),!(this instanceof e))return new e(t,c).getResult();var u=typeof n!==o&&n.navigator?n.navigator:r,l=t||(u&&u.userAgent?u.userAgent:""),d=u&&u.userAgentData?u.userAgentData:r,h=c?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(H,c):H;return this.getBrowser=function(){var e={};return e.name=r,e.version=r,G.call(e,l,h.browser),e.major=function(e){return typeof e===s?e.replace(/[^\d\.]/g,"").split(".")[0]:r}(e.version),u&&u.brave&&typeof u.brave.isBrave==i&&(e.name="Brave"),e},this.getCPU=function(){var e={};return e.architecture=r,G.call(e,l,h.cpu),e},this.getDevice=function(){var e={};return e.vendor=r,e.model=r,e.type=r,G.call(e,l,h.device),!e.type&&d&&d.mobile&&(e.type=g),"Macintosh"==e.model&&u&&typeof u.standalone!==o&&u.maxTouchPoints&&u.maxTouchPoints>2&&(e.model="iPad",e.type=m),e},this.getEngine=function(){var e={};return e.name=r,e.version=r,G.call(e,l,h.engine),e},this.getOS=function(){var e={};return e.name=r,e.version=r,G.call(e,l,h.os),!e.name&&d&&"Unknown"!=d.platform&&(e.name=d.platform.replace(/chrome os/i,L).replace(/macos/i,M)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return l},this.setUA=function(e){return l=typeof e===s&&e.length>350?B(e,350):e,this},this.setUA(l),this};z.VERSION="0.7.34",z.BROWSER=U([l,f,c]),z.CPU=U([p]),z.DEVICE=U([u,h,d,v,g,y,m,b,_]),z.ENGINE=z.OS=U([l,f]),e.exports&&(t=e.exports=z),t.UAParser=z;var K=typeof n!==o&&(n.jQuery||n.Zepto);if(K&&!K.ua){var Y=new z;K.ua=Y.getResult(),K.ua.get=function(){return Y.getUA()},K.ua.set=function(e){Y.setUA(e);var t=Y.getResult();for(var n in t)K.ua[n]=t[n]}}}("object"==typeof window?window:S)}(Qh,Qh.exports);var $h,ef,tf=new(0,Qh.exports),nf=tf.getResult(),rf=null;function of(e){if(!rf){e&&tf.setUA(e);var t=function(e){if("Blink"===e.engine.name&&"WeChat"!==e.browser.name)return Jh.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return Jh.CHROME;case"Safari":case"Mobile Safari":return Jh.SAFARI;case"Edge":return Jh.EDGE;case"Firefox":return Jh.FIREFOX;case"QQBrowser":return Jh.QQ;case"Opera":return Jh.OPERA;case"WeChat":return Jh.WECHAT;default:return e.browser.name||""}}(nf=tf.getResult()),n=function(e){return("Blink"===e.engine.name?e.engine.version||"":e.browser.version||"").split(".")[0]}(nf),r=function(e){return"Windows"===e.os.name?e.os.version?e.os.name+" "+e.os.version:e.os.name:e.os.name||""}(nf),i=nf.os.version;if(!(t&&n&&r&&i))return{name:t,version:n,os:r,osVersion:i};rf={name:t,version:n,os:r,osVersion:i}}return rf}function af(){return of().os}function sf(){var e=of();return"".concat(e.os," ").concat(e.osVersion)}function cf(){var e=of();return!!("WebKit"===nf.engine.name&&e.os===Zh.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==Jh.SAFARI||pf()&&e.name!==Jh.SAFARI)}function uf(){var e=of();if(cf()){if(e.os===Zh.MAC_OS)return!0;if(e.os===Zh.IOS){var t=nf.os.version&&nf.os.version.split(".");if(t&&14===Number(t[0])&&t[1]&&Number(t[1])>=3)return!0;if(t&&Number(t[0])>14)return!0}}return!1}function lf(){return"WebKit"===nf.engine.name}function df(){return of().name===Jh.CHROME}function hf(){return of().name===Jh.SAFARI}function ff(){return of().name===Jh.FIREFOX}function pf(){return of().os===Zh.IOS}function vf(e){var t=of();return!(t.name!==Jh.CHROME||!t.osVersion)&&Number(t.version)>=e}function gf(e){var t=of();return!(t.name!==Jh.EDGE||!t.osVersion)&&Number(t.version)>=e}function mf(e){var t=of();return!(t.name!==Jh.OPERA||!t.osVersion)&&Number(t.version)>=e}function yf(){var e=of();return!(e.name!==Jh.CHROME||!e.osVersion)&&Number(e.version)<=90}function bf(){var e=of();if(e.os!==Zh.IOS||!e.osVersion)return!1;var t=e.osVersion.split(".");return Number(t[0])<14||14===Number(t[0])&&Number(t[1])<=6}function _f(){var e=of();if(e.os!==Zh.IOS||!e.osVersion)return!1;var t=e.osVersion.split(".");return 15===Number(t[0])}function Ef(){var e=of();if(e.os!==Zh.IOS||!e.osVersion)return!1;var t=e.osVersion.split(".");return 16===Number(t[0])}function Sf(){var e=of();if(e.os!==Zh.IOS||!e.osVersion)return!1;var t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=1}function wf(){return hf()&&navigator.maxTouchPoints>0}function xf(){return of().name===Jh.WECHAT}function Tf(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function If(){var e=of();return e.name!==Jh.EDGE&&e.name!==Jh.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function Rf(){return af()===Zh.ANDROID}function kf(){var e=of();return Rf()&&(e.name===Jh.CHROME||e.name===Jh.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}!function(e){e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY"}($h||($h={})),function(e){e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver"}(ef||(ef={}));var Of={exports:{}},Cf=Wn,Af=B,Nf=hn.f;Cf({target:"Object",stat:!0,forced:Object.defineProperty!==Nf,sham:!Af},{defineProperty:Nf});var jf=ve.Object,Df=Of.exports=function(e,t,n){return jf.defineProperty(e,t,n)};jf.defineProperty.sham&&(Df.sham=!0);var Pf=Of.exports;function Lf(e,t,n){return t in e?Pf(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mf,Uf={exports:{}},Vf=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},Ff=Vf,Bf=Object.prototype.toString,Gf=(Mf=Object.create(null),function(e){var t=Bf.call(e);return Mf[t]||(Mf[t]=t.slice(8,-1).toLowerCase())});function qf(e){return e=e.toLowerCase(),function(t){return Gf(t)===e}}function Wf(e){return Array.isArray(e)}function Hf(e){return void 0===e}var zf=qf("ArrayBuffer");function Kf(e){return null!==e&&"object"==typeof e}function Yf(e){if("object"!==Gf(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var Zf=qf("Date"),Jf=qf("File"),Xf=qf("Blob"),Qf=qf("FileList");function $f(e){return"[object Function]"===Bf.call(e)}var ep=qf("URLSearchParams");function tp(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Wf(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var np,rp=(np="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return np&&e instanceof np}),ip={isArray:Wf,isArrayBuffer:zf,isBuffer:function(e){return null!==e&&!Hf(e)&&null!==e.constructor&&!Hf(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||Bf.call(e)===t||$f(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&zf(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Kf,isPlainObject:Yf,isUndefined:Hf,isDate:Zf,isFile:Jf,isBlob:Xf,isFunction:$f,isStream:function(e){return Kf(e)&&$f(e.pipe)},isURLSearchParams:ep,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:tp,merge:function e(){var t={};function n(n,r){Yf(t[r])&&Yf(n)?t[r]=e(t[r],n):Yf(n)?t[r]=e({},n):Wf(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)tp(arguments[r],n);return t},extend:function(e,t,n){return tp(t,(function(t,r){e[r]=n&&"function"==typeof t?Ff(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,i,o,a={};t=t||{};do{for(i=(r=Object.getOwnPropertyNames(e)).length;i-- >0;)a[o=r[i]]||(t[o]=e[o],a[o]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Gf,kindOfTest:qf,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(Hf(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:rp,isFileList:Qf},op=ip;function ap(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var sp=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(op.isURLSearchParams(t))r=t.toString();else{var i=[];op.forEach(t,(function(e,t){null!=e&&(op.isArray(e)?t+="[]":e=[e],op.forEach(e,(function(e){op.isDate(e)?e=e.toISOString():op.isObject(e)&&(e=JSON.stringify(e)),i.push(ap(t)+"="+ap(e))})))})),r=i.join("&")}if(r){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e},cp=ip;function up(){this.handlers=[]}up.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},up.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},up.prototype.forEach=function(e){cp.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var lp=up,dp=ip,hp=ip;function fp(e,t,n,r,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}hp.inherits(fp,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var pp=fp.prototype,vp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){vp[e]={value:e}})),Object.defineProperties(fp,vp),Object.defineProperty(pp,"isAxiosError",{value:!0}),fp.from=function(e,t,n,r,i,o){var a=Object.create(pp);return hp.toFlatObject(e,a,(function(e){return e!==Error.prototype})),fp.call(a,e.message,t,n,r,i),a.name=e.name,o&&Object.assign(a,o),a};var gp=fp,mp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},yp=ip,bp=function(e,t){t=t||new FormData;var n=[];function r(e){return null===e?"":yp.isDate(e)?e.toISOString():yp.isArrayBuffer(e)||yp.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(i,o){if(yp.isPlainObject(i)||yp.isArray(i)){if(-1!==n.indexOf(i))throw Error("Circular reference detected in "+o);n.push(i),yp.forEach(i,(function(n,i){if(!yp.isUndefined(n)){var a,s=o?o+"."+i:i;if(n&&!o&&"object"==typeof n)if(yp.endsWith(i,"{}"))n=JSON.stringify(n);else if(yp.endsWith(i,"[]")&&(a=yp.toArray(n)))return void a.forEach((function(e){!yp.isUndefined(e)&&t.append(s,r(e))}));e(n,s)}})),n.pop()}else t.append(o,r(i))}(e),t},_p=gp,Ep=ip,Sp=Ep.isStandardBrowserEnv()?{write:function(e,t,n,r,i,o){var a=[];a.push(e+"="+encodeURIComponent(t)),Ep.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Ep.isString(r)&&a.push("path="+r),Ep.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},wp=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},xp=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},Tp=function(e,t){return e&&!wp(t)?xp(e,t):t},Ip=ip,Rp=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],kp=ip,Op=kp.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=kp.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},Cp=gp;function Ap(e){Cp.call(this,null==e?"canceled":e,Cp.ERR_CANCELED),this.name="CanceledError"}ip.inherits(Ap,Cp,{__CANCEL__:!0});var Np=Ap,jp=ip,Dp=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new _p("Request failed with status code "+n.status,[_p.ERR_BAD_REQUEST,_p.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)},Pp=Sp,Lp=sp,Mp=Tp,Up=function(e){var t,n,r,i={};return e?(Ip.forEach(e.split("\n"),(function(e){if(r=e.indexOf(":"),t=Ip.trim(e.substr(0,r)).toLowerCase(),n=Ip.trim(e.substr(r+1)),t){if(i[t]&&Rp.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i):i},Vp=Op,Fp=mp,Bp=gp,Gp=Np,qp=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""},Wp=function(e){return new Promise((function(t,n){var r,i=e.data,o=e.headers,a=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}jp.isFormData(i)&&jp.isStandardBrowserEnv()&&delete o["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var u=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(u+":"+l)}var d=Mp(e.baseURL,e.url);function h(){if(c){var r="getAllResponseHeaders"in c?Up(c.getAllResponseHeaders()):null,i={data:a&&"text"!==a&&"json"!==a?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:e,request:c};Dp((function(e){t(e),s()}),(function(e){n(e),s()}),i),c=null}}if(c.open(e.method.toUpperCase(),Lp(d,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(h)},c.onabort=function(){c&&(n(new Bp("Request aborted",Bp.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new Bp("Network Error",Bp.ERR_NETWORK,e,c,c)),c=null},c.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||Fp;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Bp(t,r.clarifyTimeoutError?Bp.ETIMEDOUT:Bp.ECONNABORTED,e,c)),c=null},jp.isStandardBrowserEnv()){var f=(e.withCredentials||Vp(d))&&e.xsrfCookieName?Pp.read(e.xsrfCookieName):void 0;f&&(o[e.xsrfHeaderName]=f)}"setRequestHeader"in c&&jp.forEach(o,(function(e,t){void 0===i&&"content-type"===t.toLowerCase()?delete o[t]:c.setRequestHeader(t,e)})),jp.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&"json"!==a&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(r=function(e){c&&(n(!e||e&&e.type?new Gp:e),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r))),i||(i=null);var p=qp(d);p&&-1===["http","https","file"].indexOf(p)?n(new Bp("Unsupported protocol "+p+":",Bp.ERR_BAD_REQUEST,e)):c.send(i)}))},Hp=ip,zp=function(e,t){dp.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},Kp=gp,Yp=bp,Zp={"Content-Type":"application/x-www-form-urlencoded"};function Jp(e,t){!Hp.isUndefined(e)&&Hp.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var Xp,Qp={transitional:mp,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(Xp=Wp),Xp),transformRequest:[function(e,t){if(zp(t,"Accept"),zp(t,"Content-Type"),Hp.isFormData(e)||Hp.isArrayBuffer(e)||Hp.isBuffer(e)||Hp.isStream(e)||Hp.isFile(e)||Hp.isBlob(e))return e;if(Hp.isArrayBufferView(e))return e.buffer;if(Hp.isURLSearchParams(e))return Jp(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,r=Hp.isObject(e),i=t&&t["Content-Type"];if((n=Hp.isFileList(e))||r&&"multipart/form-data"===i){var o=this.env&&this.env.FormData;return Yp(n?{"files[]":e}:e,o&&new o)}return r||"application/json"===i?(Jp(t,"application/json"),function(e,t,n){if(Hp.isString(e))try{return(t||JSON.parse)(e),Hp.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Qp.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,i=!n&&"json"===this.responseType;if(i||r&&Hp.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw Kp.from(e,Kp.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:null},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Hp.forEach(["delete","get","head"],(function(e){Qp.headers[e]={}})),Hp.forEach(["post","put","patch"],(function(e){Qp.headers[e]=Hp.merge(Zp)}));var $p=Qp,ev=ip,tv=$p,nv=function(e){return!(!e||!e.__CANCEL__)},rv=ip,iv=function(e,t,n){var r=this||tv;return ev.forEach(n,(function(n){e=n.call(r,e,t)})),e},ov=nv,av=$p,sv=Np;function cv(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new sv}var uv=ip,lv=function(e,t){t=t||{};var n={};function r(e,t){return uv.isPlainObject(e)&&uv.isPlainObject(t)?uv.merge(e,t):uv.isPlainObject(t)?uv.merge({},t):uv.isArray(t)?t.slice():t}function i(n){return uv.isUndefined(t[n])?uv.isUndefined(e[n])?void 0:r(void 0,e[n]):r(e[n],t[n])}function o(e){if(!uv.isUndefined(t[e]))return r(void 0,t[e])}function a(n){return uv.isUndefined(t[n])?uv.isUndefined(e[n])?void 0:r(void 0,e[n]):r(void 0,t[n])}function s(n){return n in t?r(e[n],t[n]):n in e?r(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s};return uv.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||i,r=t(e);uv.isUndefined(r)&&t!==s||(n[e]=r)})),n},dv="0.27.2",hv=dv,fv=gp,pv={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){pv[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var vv={};pv.transitional=function(e,t,n){function r(e,t){return"[Axios v"+hv+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,o){if(!1===e)throw new fv(r(i," has been removed"+(t?" in "+t:"")),fv.ERR_DEPRECATED);return t&&!vv[i]&&(vv[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};var gv=ip,mv=sp,yv=lp,bv=function(e){return cv(e),e.headers=e.headers||{},e.data=iv.call(e,e.data,e.headers,e.transformRequest),e.headers=rv.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),rv.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||av.adapter)(e).then((function(t){return cv(e),t.data=iv.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return ov(t)||(cv(e),t&&t.response&&(t.response.data=iv.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},_v=lv,Ev=Tp,Sv={assertOptions:function(e,t,n){if("object"!=typeof e)throw new fv("options must be an object",fv.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],c=void 0===s||a(s,o,e);if(!0!==c)throw new fv("option "+o+" must be "+c,fv.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new fv("Unknown option "+o,fv.ERR_BAD_OPTION)}},validators:pv},wv=Sv.validators;function xv(e){this.defaults=e,this.interceptors={request:new yv,response:new yv}}xv.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=_v(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&Sv.assertOptions(n,{silentJSONParsing:wv.transitional(wv.boolean),forcedJSONParsing:wv.transitional(wv.boolean),clarifyTimeoutError:wv.transitional(wv.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,a=[];if(this.interceptors.response.forEach((function(e){a.push(e.fulfilled,e.rejected)})),!i){var s=[bv,void 0];for(Array.prototype.unshift.apply(s,r),s=s.concat(a),o=Promise.resolve(t);s.length;)o=o.then(s.shift(),s.shift());return o}for(var c=t;r.length;){var u=r.shift(),l=r.shift();try{c=u(c)}catch(e){l(e);break}}try{o=bv(c)}catch(e){return Promise.reject(e)}for(;a.length;)o=o.then(a.shift(),a.shift());return o},xv.prototype.getUri=function(e){e=_v(this.defaults,e);var t=Ev(e.baseURL,e.url);return mv(t,e.params,e.paramsSerializer)},gv.forEach(["delete","get","head","options"],(function(e){xv.prototype[e]=function(t,n){return this.request(_v(n||{},{method:e,url:t,data:(n||{}).data}))}})),gv.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(_v(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}xv.prototype[e]=t(),xv.prototype[e+"Form"]=t(!0)}));var Tv=xv,Iv=Np;function Rv(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new Iv(e),t(n.reason))}))}Rv.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Rv.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},Rv.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},Rv.source=function(){var e;return{token:new Rv((function(t){e=t})),cancel:e}};var kv=Rv,Ov=ip,Cv=ip,Av=Vf,Nv=Tv,jv=lv,Dv=function e(t){var n=new Nv(t),r=Av(Nv.prototype.request,n);return Cv.extend(r,Nv.prototype,n),Cv.extend(r,n),r.create=function(n){return e(jv(t,n))},r}($p);Dv.Axios=Nv,Dv.CanceledError=Np,Dv.CancelToken=kv,Dv.isCancel=nv,Dv.VERSION=dv,Dv.toFormData=bp,Dv.AxiosError=gp,Dv.Cancel=Dv.CanceledError,Dv.all=function(e){return Promise.all(e)},Dv.spread=function(e){return function(t){return e.apply(null,t)}},Dv.isAxiosError=function(e){return Ov.isObject(e)&&!0===e.isAxiosError},Uf.exports=Dv,Uf.exports.default=Dv;var Pv,Lv=Uf.exports,Mv=function(){function e(t){p(this,e),Lf(this,"logger",void 0),Lf(this,"prefixLists",[]),this.logger=t}return v(e,[{key:"debug",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this.logger).debug.apply(e,g(this.prefixLists).concat(n))}},{key:"info",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this.logger).info.apply(e,g(this.prefixLists).concat(n))}},{key:"warning",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this.logger).warning.apply(e,g(this.prefixLists).concat(n))}},{key:"error",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this.logger).error.apply(e,g(this.prefixLists).concat(n))}},{key:"prefix",value:function(e){return this.prefixLists.push(e),this}},{key:"popPrefix",value:function(){return this.prefixLists.pop(),this}}]),e}(),Uv=function(){function e(){p(this,e),Lf(this,"_events",{}),Lf(this,"addListener",this.on)}return v(e,[{key:"getListeners",value:function(e){return this._events[e]?this._events[e].map((function(e){return e.listener})):[]}},{key:"on",value:function(e,t){this._events[e]||(this._events[e]=[]);var n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!1})}},{key:"once",value:function(e,t){this._events[e]||(this._events[e]=[]);var n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!0})}},{key:"off",value:function(e,t){if(this._events[e]){var n=this._events[e],r=this._indexOfListener(n,t);-1!==r&&n.splice(r,1),0===this._events[e].length&&delete this._events[e]}}},{key:"removeAllListeners",value:function(e){e?delete this._events[e]:this._events={}}},{key:"emit",value:function(e){this._events[e]||(this._events[e]=[]);for(var t=this._events[e].map((function(e){return e})),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o+=1){var a=t[o];a.once&&this.off(e,a.listener),a.listener.apply(this,r||[])}}},{key:"_indexOfListener",value:function(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}}]),e}(),Vv=new(function(e){h(n,e);var t=f(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"reportLogUploadError",value:function(e){this.emit("REPORT_LOG_UPLOAD",e)}}]),n}(Uv));!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.INIT_WEBSOCKET_TIMEOUT="INIT_WEBSOCKET_TIMEOUT",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION"}(Pv||(Pv={}));var Fv=function(e){h(n,e);var t=f(n);function n(e){var r;p(this,n);var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2?arguments[2]:void 0;return r=t.call(this,i),Lf(l(r),"code",void 0),Lf(l(r),"message",void 0),Lf(l(r),"data",void 0),Lf(l(r),"name","AgoraRTCException"),r.code=e,r.message="AgoraRTCError ".concat(r.code,": ").concat(i),r.data=o,r}return v(n,[{key:"toString",value:function(){return this.data?"data: ".concat(JSON.stringify(this.data),"\n").concat(this.stack):"".concat(this.stack)}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return"error"===e&&Zv.error(this.toString()),"warning"===e&&Zv.warning(this.toString()),this}},{key:"throw",value:function(){throw this.print(),this}}]),n}(d(Error)),Bv={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function Gv(e,t){var n=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,n)}function qv(e,t,n,r){var i=Object.assign({},Bv,r),o=i.timeout,a=function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e){return new Vd((function(t){window.setTimeout(t,e)}))}(o);case 2:o*=i.timeoutFactor,o=Math.min(i.maxRetryTimeout,o);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=!1,l=new Vd(function(){var r=u(c().mark((function r(o,u){var l,d;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=t||function(){return!1},n=n||function(){return!0},l=0;case 2:if(!(l<i.maxRetryCount)){r.next=28;break}if(!s){r.next=5;break}return r.abrupt("return",u(new Fv(Pv.OPERATION_ABORTED)));case 5:return r.prev=5,r.next=8,e();case 8:if(d=r.sent,t(d,l)){r.next=11;break}return r.abrupt("return",o(d));case 11:if(l+1!==i.maxRetryCount){r.next=13;break}return r.abrupt("return",o(d));case 13:return r.next=15,a();case 15:r.next=25;break;case 17:if(r.prev=17,r.t0=r.catch(5),n(r.t0,l)){r.next=21;break}return r.abrupt("return",u(r.t0));case 21:if(l+1!==i.maxRetryCount){r.next=23;break}return r.abrupt("return",u(r.t0));case 23:return r.next=25,a();case 25:l+=1,r.next=2;break;case 28:case"end":return r.stop()}}),r,null,[[5,17]])})));return function(e,t){return r.apply(this,arguments)}}());return l.cancel=function(){return s=!0},l}function Wv(){var e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function Hv(){var e=new Date,t=/((\d+:){2}\d+)/.exec((new Date).toUTCString());return t?(null==t?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}var zv={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},Kv=Date.now(),Yv=function(e){for(var t in zv)if(Object.prototype.hasOwnProperty.call(zv,t)&&zv[t]===e)return t;return"DEFAULT"},Zv=new(function(){function e(){var t=this;p(this,e),Lf(this,"proxyServerURL",void 0),Lf(this,"logLevel",zv.DEBUG),Lf(this,"uploadState","collecting"),Lf(this,"uploadLogWaitingList",[]),Lf(this,"uploadLogUploadingList",[]),Lf(this,"uploadErrorCount",0),Lf(this,"currentLogID",0),Lf(this,"url",void 0),Lf(this,"extLog",(function(e,n){t.appendLogToWaitingList.apply(t,[e].concat(g(n)))}))}return v(e,[{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[zv.DEBUG].concat(t);this.log.apply(this,r)}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[zv.INFO].concat(t);this.log.apply(this,r)}},{key:"warning",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[zv.WARNING].concat(t);this.log.apply(this,r)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[zv.ERROR].concat(t);this.log.apply(this,r)}},{key:"upload",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[zv.DEBUG].concat(t);this.uploadLog.apply(this,r)}},{key:"setLogLevel",value:function(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}},{key:"enableLogUpload",value:function(){ug("UPLOAD_LOG",!0)}},{key:"disableLogUpload",value:function(){ug("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}},{key:"setProxyServer",value:function(e){this.proxyServerURL=e}},{key:"prefix",value:function(e){return new Mv(this).prefix(e)}},{key:"log",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Date.now()-Kv<100)setTimeout((function(){e.log.apply(e,n)}),Date.now()-Kv);else{var i=Math.max(0,Math.min(4,n[0]));if(n[0]=Wv()+" Agora-SDK [".concat(Yv(i),"]:"),this.appendLogToWaitingList.apply(this,[i].concat(n)),!(i<this.logLevel)){var o=Wv()+" %cAgora-SDK [".concat(Yv(i),"]:"),a=[];if(!lg("USE_NEW_LOG"))switch(i){case zv.DEBUG:a=[o,"color: #64B5F6;"].concat(n.slice(1)),console.log.apply(console,a);break;case zv.INFO:a=[o,"color: #1E88E5; font-weight: bold;"].concat(n.slice(1)),console.log.apply(console,a);break;case zv.WARNING:a=[o,"color: #FB8C00; font-weight: bold;"].concat(n.slice(1)),console.warn.apply(console,a);break;case zv.ERROR:a=[o,"color: #B00020; font-weight: bold;"].concat(n.slice(1)),console.error.apply(console,a)}}}}},{key:"uploadLog",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Date.now()-Kv<100)setTimeout((function(){e.uploadLog.apply(e,n)}),Date.now()-Kv);else{var i=Math.max(0,Math.min(4,n[0]));n[0]=Wv()+" Agora-SDK [".concat(Yv(i),"]:"),this.appendLogToWaitingList.apply(this,[i].concat(n))}}},{key:"appendLogToWaitingList",value:function(e){if(lg("UPLOAD_LOG")){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Array.isArray(n[0])?n[0][0]=Hv()+" Agora-SDK [".concat(Yv(e),"]:"):n[0]=Hv()+" Agora-SDK [".concat(Yv(e),"]:");var i="";n.forEach((function(e){"object"==typeof e&&(e=JSON.stringify(e)),i+="".concat(e," ")})),this.uploadLogWaitingList.push({payload_str:i,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}}},{key:"startUpload",value:function(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}},{key:"uploadLogs",value:function(){var e=u(c().mark((function e(){var t,n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.uploadLogUploadingList,n={sdk_version:Xv,process_id:lg("PROCESS_ID"),payload:JSON.stringify(t)},e.abrupt("return",qv(u(c().mark((function e(){var t,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lv.post(r.url||(r.proxyServerURL?"https://".concat(r.proxyServerURL,"/ls/?h=").concat(lg("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(lg("LOG_UPLOAD_SERVER"),"/upload/v1")),n,{responseType:"text"});case 2:if("OK"===(t=e.sent).data){e.next=6;break}throw(i=new Error("unexpected upload log response")).response=t,i;case 6:case"end":return e.stop()}}),e)}))),(function(){return r.uploadLogUploadingList=[],!1}),(function(e){return e.response?Vv.reportLogUploadError({status:e.response.status,data:e.response.data,headers:e.response.headers,message:e.message}):e.request?Vv.reportLogUploadError({status:e.request.status,message:e.message}):Vv.reportLogUploadError({status:-1,message:e.message}),!0}),{timeout:lg("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:lg("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"uploadLogInterval",value:function(){var e=this;0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,lg("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then((function(){e.uploadErrorCount=0,e.uploadLogWaitingList.length>0&&window.setTimeout((function(){return e.uploadLogInterval()}),lg("UPLOAD_LOG_INTERVAL"))})).catch((function(t){e.uploadErrorCount+=1,e.uploadErrorCount<2?window.setTimeout((function(){return e.uploadLogInterval()}),lg("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout((function(){return e.uploadLogInterval()}),lg("UPLOAD_LOG_RETRY_INTERVAL_V1"))})))}}]),e}()),Jv="v4.18.0-0-gcacc234f-dirty(6/21/2023, 3:22:58 PM)",Xv=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;var t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-alpha\.([0-9]+)/);if(t&&t[1]&&t[2]){var n=t[1],r=t[2];return"".concat(n,".").concat(r)}var i=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-special\.([0-9]+)/);if(i&&i[1]&&i[2]){var o=i[1],a=i[2];return"".concat(o,".").concat(100*(Number(a)+1))}return"4.0.0.999"}("4.18.0"),Qv=function(){try{return!0===JSON.parse("true")}catch(E){return!0}}(),$v=["CHINA","GLOBAL"],eg=function(){var e="us".concat("erna","me"),t="pa".concat("sswo","rd"),n=["t","s","t"];n.splice(1,0,"e");for(var r=n.join(""),i=[],o=0;o<6;o++)i.push("1");var a=i.join(""),s={};return s[e]=r,s[t]=a,Object.assign(s,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=eg;var tg={"90p":pg(160,90),"90p_1":pg(160,90),"120p":pg(160,120,15,30,65),"120p_1":pg(160,120,15,30,65),"120p_3":pg(120,120,15,30,50),"120p_4":pg(212,120),"180p":pg(320,180,15,30,140),"180p_1":pg(320,180,15,30,140),"180p_3":pg(180,180,15,30,100),"180p_4":pg(240,180,15,30,120),"240p":pg(320,240,15,40,200),"240p_1":pg(320,240,15,40,200),"240p_3":pg(240,240,15,40,140),"240p_4":pg(424,240,15,40,220),"360p":pg(640,360,15,80,400),"360p_1":pg(640,360,15,80,400),"360p_3":pg(360,360,15,80,260),"360p_4":pg(640,360,30,80,600),"360p_6":pg(360,360,30,80,400),"360p_7":pg(480,360,15,80,320),"360p_8":pg(480,360,30,80,490),"360p_9":pg(640,360,15,80,800),"360p_10":pg(640,360,24,80,800),"360p_11":pg(640,360,24,80,1e3),"480p":pg(640,480,15,100,500),"480p_1":pg(640,480,15,100,500),"480p_2":pg(640,480,30,100,1e3),"480p_3":pg(480,480,15,100,400),"480p_4":pg(640,480,30,100,750),"480p_6":pg(480,480,30,100,600),"480p_8":pg(848,480,15,100,610),"480p_9":pg(848,480,30,100,930),"480p_10":pg(640,480,10,100,400),"720p":pg(1280,720,15,120,1130),"720p_1":pg(1280,720,15,120,1130),"720p_2":pg(1280,720,30,120,2e3),"720p_3":pg(1280,720,30,120,1710),"720p_5":pg(960,720,15,120,910),"720p_6":pg(960,720,30,120,1380),"1080p":pg(1920,1080,15,120,2080),"1080p_1":pg(1920,1080,15,120,2080),"1080p_2":pg(1920,1080,30,120,3e3),"1080p_3":pg(1920,1080,30,120,3150),"1080p_5":pg(1920,1080,60,120,4780),"1440p":pg(2560,1440,30,120,4850),"1440p_1":pg(2560,1440,30,120,4850),"1440p_2":pg(2560,1440,60,120,7350),"4k":pg(3840,2160,30,120,8910),"4k_1":pg(3840,2160,30,120,8910),"4k_3":pg(3840,2160,60,120,13500)},ng={"480p":vg(640,480,5),"480p_1":vg(640,480,5),"480p_2":vg(640,480,30),"480p_3":vg(640,480,15),"720p":vg(1280,720,5),"720p_1":vg(1280,720,5),"720p_2":vg(1280,720,30),"720p_3":vg(1280,720,15),"1080p":vg(1920,1080,5),"1080p_1":vg(1920,1080,5),"1080p_2":vg(1920,1080,30),"1080p_3":vg(1920,1080,15)},rg={"1SL1TL":gg(1,1),"3SL3TL":gg(3,3),"2SL3TL":gg(2,3)};function ig(e){return e||(e="480p_1"),"string"==typeof e?Object.assign({},tg[e]):e}function og(e){return"string"==typeof e?Object.assign({},ng[e]):e}function ag(e){return"string"==typeof e?Object.assign({},rg[e]):e}var sg={speech_low_quality:fg(16e3,!1),speech_standard:fg(32e3,!1,18),music_standard:fg(48e3,!1),standard_stereo:fg(48e3,!0,56),high_quality:fg(48e3,!1,128),high_quality_stereo:fg(48e3,!0,192)};function cg(e){return"string"==typeof e?Object.assign({},sg[e]):e}function ug(e,t,n){Object.keys(dg).includes(e)&&(!n&&Object.keys(hg).includes(e)||(dg[e]=t))}function lg(e){return dg[e]}var dg={PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:$v,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],SUBSCRIBE_TWCC:!1,PUBLISH_TWCC:!1,PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,USE_PUB_RTX:!1,USE_SUB_RTX:!1,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION:2e3,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!0,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,ENABLE_USER_LICENSE_CHECK:!0,SIGNAL_CHANNEL:0,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,SVC:[],ENABLE_ENCODED_TRANSFORM:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0}},hg={};function fg(e,t,n){return{sampleRate:e,stereo:t,bitrate:n}}function pg(e,t,n,r,i){return{width:e,height:t,frameRate:n,bitrateMin:r,bitrateMax:i}}function vg(e,t,n,r,i){return{width:{max:e},height:{max:t},frameRate:n,bitrateMin:r,bitrateMax:i}}function gg(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}Qv||(dg.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],dg.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],dg.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],dg.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],dg.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],dg.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],dg.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",dg.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",dg.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",dg.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",dg.AREAS=["NORTH_AMERICA","OVERSEA"]);var mg=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],yg=[],bg=[];function _g(e,t){return!!t&&yg.some((function(n){return n.uid===e&&n.channelName===t}))}var Eg=Lt,Sg=hn,wg=X,xg=function(e,t,n){var r=Eg(t);r in e?Sg.f(e,r,wg(0,n)):e[r]=n},Tg=ri,Ig=Xn,Rg=xg,kg=j.Array,Og=Math.max,Cg=function(e,t,n){for(var r=Ig(e),i=Tg(t,r),o=Tg(void 0===n?r:n,r),a=kg(Og(o-i,0)),s=0;i<o;i++,s++)Rg(a,s,e[i]);return a.length=s,a},Ag=Cg,Ng=Math.floor,jg=function e(t,n){var r=t.length,i=Ng(r/2);return r<8?Dg(t,n):Pg(t,e(Ag(t,0,i),n),e(Ag(t,i),n),n)},Dg=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},Pg=function(e,t,n,r){for(var i=t.length,o=n.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e},Lg=jg,Mg=Ee.match(/firefox\/(\d+)/i),Ug=!!Mg&&+Mg[1],Vg=/MSIE|Trident/.test(Ee),Fg=Ee.match(/AppleWebKit\/(\d+)\./),Bg=!!Fg&&+Fg[1],Gg=Wn,qg=C,Wg=We,Hg=at,zg=Xn,Kg=Xo,Yg=w,Zg=Lg,Jg=ar,Xg=Ug,Qg=Vg,$g=ke,em=Bg,tm=[],nm=qg(tm.sort),rm=qg(tm.push),im=Yg((function(){tm.sort(void 0)})),om=Yg((function(){tm.sort(null)})),am=Jg("sort"),sm=!Yg((function(){if($g)return $g<70;if(!(Xg&&Xg>3)){if(Qg)return!0;if(em)return em<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)tm.push({k:t+r,v:n})}for(tm.sort((function(e,t){return t.v-e.v})),r=0;r<tm.length;r++)t=tm[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));Gg({target:"Array",proto:!0,forced:im||!om||!am||!sm},{sort:function(e){void 0!==e&&Wg(e);var t=Hg(this);if(sm)return void 0===e?nm(t):nm(t,e);var n,r,i=[],o=zg(t);for(r=0;r<o;r++)r in t&&rm(i,t[r]);for(Zg(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Kg(t)>Kg(n)?1:-1}}(e)),n=i.length,r=0;r<n;)t[r]=i[r++];for(;r<o;)delete t[r++];return t}});var cm,um,lm,dm=hr("Array").sort,hm=A,fm=dm,pm=Array.prototype,vm=function(e){var t=e.sort;return e===pm||hm(pm,e)&&t===pm.sort?fm:t};function gm(e,t){if("boolean"!=typeof e)throw new Fv(Pv.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function mm(e,t,n){if(!n.includes(e))throw new Fv(Pv.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(n)))}function ym(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(e<n||e>r||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&!Im(e))throw new Fv(Pv.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(n,", ").concat(r,"]. integer only"))}function bm(e,t){if("number"!=typeof e){if(!(e.min||e.max||e.ideal||e.exact))throw new Fv(Pv.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));void 0!==e.min&&ym(e.min,"".concat(t,".min"),0,1/0),void 0!==e.max&&ym(e.max,"".concat(t,".max"),1,1/0),void 0!==e.exact&&ym(e.exact,"".concat(t,".exact"),1,1/0),void 0!==e.ideal&&ym(e.ideal,"".concat(t,".ideal"),1,1/0)}else ym(e,t,1,1/0)}function _m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new Fv(Pv.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!Tm(e,n,r,i))throw new Fv(Pv.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(i?" ASCII characters only.":""))}function Em(e,t){if(!Array.isArray(e))throw new Fv(Pv.INVALID_PARAMS,"".concat(t," should be an array"))}function Sm(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw Zv.error("Invalid Channel Name ".concat(e)),new Fv(Pv.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function wm(e){if(!("number"==typeof(t=e)&&Math.floor(t)===t&&0<=t&&t<=4294967295||Tm(e,1,255)))throw Zv.error("Invalid UID ".concat(e," ").concat(typeof e)),new Fv(Pv.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var t;"string"==typeof e&&Zv.warning("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}function xm(e){return null==e}function Tm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"string"==typeof e&&e.length<=n&&e.length>=t&&(!r||Rm(e))}function Im(e){return"number"==typeof e&&e%1==0}function Rm(e){if("string"!=typeof e)return!1;for(var t=0;t<e.length;t+=1){var n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}!function(e){e.FREE="free",e.UPLOADING="uploading"}(cm||(cm={})),function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}(um||(um={})),function(e){e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata"}(lm||(lm={}));var km={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};function Om(e){return _m(e.reportId,"params.reportId",0,100,!1),_m(e.category,"params.category",0,100,!1),_m(e.event,"params.event",0,100,!1),_m(e.label,"params.label",0,100,!1),ym(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}var Cm,Am,Nm,jm,Dm,Pm,Lm,Mm,Um,Vm,Fm,Bm,Gm,qm,Wm,Hm,zm,Km,Ym,Zm,Jm,Xm,Qm,$m,ey={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};function ty(e){return ym(e.timeout,"config.timeout",0,1e5),ym(e.timeoutFactor,"config.timeoutFactor",0,100,!1),ym(e.maxRetryCount,"config.maxRetryConfig",0,1/0),ym(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}function ny(e){return mm(e.codec,"config.codec",["vp8","vp9","av1","h264","h265"]),mm(e.mode,"config.mode",["rtc","live"]),void 0!==e.audioCodec&&mm(e.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==e.proxyServer&&_m(e.proxyServer,"config.proxyServer",1,1e4),void 0!==e.turnServer&&iy(e.turnServer),void 0!==e.httpRetryConfig&&ty(e.httpRetryConfig),void 0!==e.websocketRetryConfig&&ty(e.websocketRetryConfig),!0}function ry(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach((function(e){if(!e.urls)throw Error()}))}catch(e){return!1}return!0}function iy(e){return _m(e.turnServerURL,"turnServerURL"),_m(e.username,"username"),_m(e.password,"password"),e.udpport&&ym(e.udpport,"udpport",1,99999,!0),e.forceturn&&gm(e.forceturn,"forceturn"),e.security&&gm(e.security,"security"),e.tcpport&&ym(e.tcpport,"tcpport",1,99999,!0),!0}function oy(e){return void 0!==e.level&&mm(e.level,"level",[1,2,3]),!0}!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats"}(Cm||(Cm={})),function(e){e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats"}(Am||(Am={})),function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}(Nm||(Nm={})),function(e){e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED"}(jm||(jm={})),function(e){e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.DATACHANNEL_FAILBACK="Client._datachannelFailback",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.ADD_INJECT_STREAM_URL="Client.addInjectStreamUrl",e.REMOVE_INJECT_STREAM_URL="Client.removeInjectStreamUrl",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage"}(Dm||(Dm={})),function(e){e.TRACER="tracer"}(Pm||(Pm={})),function(e){e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND"}(Lm||(Lm={})),function(e){e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged"}(Mm||(Mm={})),function(e){e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR"}(Um||(Um={})),function(e){e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR"}(Vm||(Vm={})),function(e){e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND"}(Fm||(Fm={})),function(e){e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV"}(Bm||(Bm={})),function(e){e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY"}(Gm||(Gm={})),function(e){e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY"}(qm||(qm={})),function(e){e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.FALLBACK="FALLBACK",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL"}(Wm||(Wm={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.INJECT_STREAM_STATUS="stream-inject-status",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result"}(Hm||(Hm={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(zm||(zm={})),function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed"}(Km||(Km={})),function(e){e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_WAITTING_FINISH="ws_reconnect_waitting_finish",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_CONNECTING="datachannel_connecting",e.DATACHANNEL_FAILBACK="datachannel_failback"}(Ym||(Ym={})),function(e){e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.SUBSCRIBE="subscribe",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter"}(Zm||(Zm={})),function(e){e.PUBLISH_STATS="publish_stats",e.PUBLISH_RELATED_STATS="publish_related_stats",e.SUBSCRIBE_STATS="subscribe_stats",e.SUBSCRIBE_RELATED_STATS="subscribe_related_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.TRANSPORT_STATS="transport_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats"}(Jm||(Jm={})),function(e){e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list"}(Xm||(Xm={})),function(e){e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.NEED_ANSWER="NEED_ANSWER",e.NEED_RENEGOTIATE="NEED_RENEGOTIATE",e.P2P_LOST="P2P_LOST",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NEED_UNPUB="NEED_UNPUB",e.NEED_UNSUB="NEED_UNSUB",e.NEED_UPLOAD="NEED_UPLOAD",e.NEED_CONTROL="NEED_CONTROL",e.START_RECONNECT="START_RECONNECT",e.END_RECONNECT="END_RECONNECT",e.NEED_SIGNAL_RTT="NEED_SIGNAL_RTT"}(Qm||(Qm={})),function(e){e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source"}($m||($m={}));var ay,sy,cy,uy={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,currentPacketLossRate:0},ly={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},dy={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},hy={uplinkNetworkQuality:0,downlinkNetworkQuality:0},fy={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};!function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_WAITTING_FINISH="websocket:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire"}(ay||(ay={})),function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(sy||(sy={})),function(e){e[e.INJECT_STREAM_STATUS_START_SUCCESS=0]="INJECT_STREAM_STATUS_START_SUCCESS",e[e.INJECT_STREAM_STATUS_START_ALREADY_EXISTS=1]="INJECT_STREAM_STATUS_START_ALREADY_EXISTS",e[e.INJECT_STREAM_STATUS_START_UNAUTHORIZED=2]="INJECT_STREAM_STATUS_START_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_START_TIMEOUT=3]="INJECT_STREAM_STATUS_START_TIMEOUT",e[e.INJECT_STREAM_STATUS_START_FAILED=4]="INJECT_STREAM_STATUS_START_FAILED",e[e.INJECT_STREAM_STATUS_STOP_SUCCESS=5]="INJECT_STREAM_STATUS_STOP_SUCCESS",e[e.INJECT_STREAM_STATUS_STOP_NOT_FOUND=6]="INJECT_STREAM_STATUS_STOP_NOT_FOUND",e[e.INJECT_STREAM_STATUS_STOP_UNAUTHORIZED=7]="INJECT_STREAM_STATUS_STOP_UNAUTHORIZED",e[e.INJECT_STREAM_STATUS_STOP_TIMEOUT=8]="INJECT_STREAM_STATUS_STOP_TIMEOUT",e[e.INJECT_STREAM_STATUS_STOP_FAILED=9]="INJECT_STREAM_STATUS_STOP_FAILED",e[e.INJECT_STREAM_STATUS_BROKEN=10]="INJECT_STREAM_STATUS_BROKEN"}(cy||(cy={}));var py={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},vy={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function gy(e,t){_m(e.url,"".concat(t,".url"),1,1e3,!1),xm(e.x)||ym(e.x,"".concat(t,".x"),0,1e4),xm(e.y)||ym(e.y,"".concat(t,".y"),0,1e4),xm(e.width)||ym(e.width,"".concat(t,".width"),0,1e4),xm(e.height)||ym(e.height,"".concat(t,".height"),0,1e4),xm(e.zOrder)||ym(e.zOrder,"".concat(t,".zOrder"),0,255),xm(e.alpha)||ym(e.alpha,"".concat(t,".alpha"),0,1,!1)}var my,yy,by,_y,Ey,Sy,wy,xy,Ty,Iy,Ry,ky,Oy,Cy,Ay,Ny,jy,Dy,Py,Ly,My,Uy={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},Vy={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30};function Fy(e){if(!e.channelName)throw new Fv(Pv.INVALID_PARAMS,"invalid channelName in info");if("number"!=typeof e.uid)throw new Fv(Pv.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&_m(e.token,"info.token",1,2047),wm(e.uid),Sm(e.channelName),!0}function By(e){return mm(e,"mediaSource",["screen","window","application"]),!0}!function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(my||(my={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(yy||(yy={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(by||(by={})),function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(_y||(_y={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(Ey||(Ey={})),function(e){e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(Sy||(Sy={})),function(e){e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE"}(wy||(wy={})),function(e){e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED"}(xy||(xy={})),function(e){e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low"}(Ty||(Ty={})),function(e){e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.REQUEST_DC_CONNECTION_PARAMS="request-dc-connection-params",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.DATACHANNEL_PRECONNECT="datachannel_preconnect",e.DATACHANNEL_FAILBACK="datachannel_failback",e.RESET_SIGNAL="reset-signal"}(Iy||(Iy={})),function(e){e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data"}(Ry||(Ry={})),function(e){e[e.websocket=0]="websocket",e[e.datachannel=1]="datachannel"}(ky||(ky={})),function(e){e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track"}(Oy||(Oy={})),function(e){e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream"}(Cy||(Cy={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(Ay||(Ay={})),function(e){e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM"}(Ny||(Ny={})),function(e){e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY"}(jy||(jy={})),function(e){e.TRANSCEIVER_UPDATED="transceiver-updated"}(Dy||(Dy={})),function(e){e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed"}(Py||(Py={})),function(e){e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status"}(Ly||(Ly={})),function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS"}(My||(My={}));var Gy,qy=[My.AFRICA,My.ASIA,My.CHINA,My.EUROPE,My.GLOBAL,My.INDIA,My.JAPAN,My.NORTH_AMERICA,My.OCEANIA,My.OVERSEA,My.SOUTH_AMERICA];!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL"}(Gy||(Gy={}));var Wy,Hy,zy,Ky,Yy,Zy,Jy,Xy,Qy,$y,eb,tb,nb,rb,ib,ob,ab,sb,cb={CHINA:{},ASIA:{CODE:Gy.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:Gy.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:Gy.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:Gy.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:Gy.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:Gy.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:Gy.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:Gy.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:Gy.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:Gy.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:Gy.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:Gy.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:Gy.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};Qv&&(cb.CHINA={CODE:Gy.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),function(e){e.UPDATE_BITRATE_LIMIT="update_bitrate_limit"}(Wy||(Wy={}));var ub=function(e){h(n,e);var t=f(n);function n(e,r){var i;return p(this,n),i=t.call(this),Lf(l(i),"onICEConnectionStateChange",void 0),Lf(l(i),"onConnectionStateChange",void 0),Lf(l(i),"onDTLSTransportStateChange",void 0),Lf(l(i),"onDTLSTransportError",void 0),Lf(l(i),"onICETransportStateChange",void 0),Lf(l(i),"onFirstAudioReceived",void 0),Lf(l(i),"onFirstVideoReceived",void 0),Lf(l(i),"onFirstAudioDecoded",void 0),Lf(l(i),"onFirstVideoDecoded",void 0),Lf(l(i),"onFirstVideoDecodedTimeout",void 0),Lf(l(i),"onSelectedLocalCandidateChanged",void 0),Lf(l(i),"onSelectedRemoteCandidateChanged",void 0),Lf(l(i),"establishPromise",void 0),i}return v(n)}(Uv);!function(e){e.SEND="sendonly",e.RECV="recvonly",e.SENDRECV="sendrecv",e.INACTIVE="inactive"}(Hy||(Hy={})),function(e){e.VIDEO="video",e.AUDIO="audio"}(zy||(zy={})),function(e){e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.RELAY=2]="RELAY"}(Ky||(Ky={})),function(e){e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.TCP_RESTART=1]="TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED"}(Yy||(Yy={})),function(e){e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack"}(Zy||(Zy={})),function(e){e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected"}(Jy||(Jy={})),function(e){e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState"}(Xy||(Xy={})),function(e){e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}(Qy||(Qy={})),function(e){e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE"}($y||($y={})),function(e){e.ON_TRACK="on_track",e.ON_NODE="on_node"}(eb||(eb={})),function(e){e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints"}(tb||(tb={})),function(e){e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED"}(nb||(nb={})),function(e){e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED"}(rb||(rb={})),function(e){e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url"}(ib||(ib={})),function(e){e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK"}(ob||(ob={})),function(e){e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_WAITTING_FINISH="transmitter:reconnect_waitting_finish",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback"}(ab||(ab={})),function(e){e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.SECURITY_POLICY_VIOLATION="security-policy-violation"}(sb||(sb={}));var lb,db={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1};function hb(){return db}!function(e){e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK"}(lb||(lb={}));var fb=te,pb=Array.isArray||function(e){return"Array"==fb(e)},vb=j,gb=pb,mb=Ic,yb=pe,bb=Tt("species"),_b=vb.Array,Eb=function(e){var t;return gb(e)&&(t=e.constructor,(mb(t)&&(t===_b||gb(t.prototype))||yb(t)&&null===(t=t[bb]))&&(t=void 0)),void 0===t?_b:t},Sb=function(e,t){return new(Eb(e))(0===t?0:t)},wb=dn,xb=se,Tb=at,Ib=Xn,Rb=Sb,kb=C([].push),Ob=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(c,u,l,d){for(var h,f,p=Tb(c),v=xb(p),g=wb(u,l),m=Ib(v),y=0,b=d||Rb,_=t?b(c,m):n||a?b(c,0):void 0;m>y;y++)if((s||y in v)&&(f=g(h=v[y],y,p),e))if(t)_[y]=f;else if(f)switch(e){case 3:return!0;case 5:return h;case 6:return y;case 2:kb(_,h)}else switch(e){case 4:return!1;case 7:kb(_,h)}return o?-1:r||i?i:_}},Cb={forEach:Ob(0),map:Ob(1),filter:Ob(2),some:Ob(3),every:Ob(4),find:Ob(5),findIndex:Ob(6),filterReject:Ob(7)},Ab=Cb.forEach,Nb=ar("forEach")?[].forEach:function(e){return Ab(this,e,arguments.length>1?arguments[1]:void 0)};Wn({target:"Array",proto:!0,forced:[].forEach!=Nb},{forEach:Nb});var jb=hr("Array").forEach,Db=_o,Pb=ut,Lb=A,Mb=jb,Ub=Array.prototype,Vb={DOMTokenList:!0,NodeList:!0},Fb=function(e){var t=e.forEach;return e===Ub||Lb(Ub,e)&&t===Ub.forEach||Pb(Vb,Db(e))?Mb:t},Bb=at,Gb=ji;Wn({target:"Object",stat:!0,forced:w((function(){Gb(1)}))},{keys:function(e){return Gb(Bb(e))}});var qb=ve.Object.keys,Wb=mr,Hb=Wn,zb=pb,Kb=C([].reverse),Yb=[1,2];Hb({target:"Array",proto:!0,forced:String(Yb)===String(Yb.reverse())},{reverse:function(){return zb(this)&&(this.length=this.length),Kb(this)}});var Zb=hr("Array").reverse,Jb=A,Xb=Zb,Qb=Array.prototype,$b=function(e){var t=e.reverse;return e===Qb||Jb(Qb,e)&&t===Qb.reverse?Xb:t},e_=w,t_=ke,n_=Tt("species"),r_=function(e){return t_>=51||!e_((function(){var t=[];return(t.constructor={})[n_]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},i_=Wn,o_=j,a_=pb,s_=Ic,c_=pe,u_=ri,l_=Xn,d_=he,h_=xg,f_=Tt,p_=Dc,v_=r_("slice"),g_=f_("species"),m_=o_.Array,y_=Math.max;i_({target:"Array",proto:!0,forced:!v_},{slice:function(e,t){var n,r,i,o=d_(this),a=l_(o),s=u_(e,a),c=u_(void 0===t?a:t,a);if(a_(o)&&(n=o.constructor,(s_(n)&&(n===m_||a_(n.prototype))||c_(n)&&null===(n=n[g_]))&&(n=void 0),n===m_||void 0===n))return p_(o,s,c);for(r=new(void 0===n?m_:n)(y_(c-s,0)),i=0;s<c;s++,i++)s in o&&h_(r,i,o[s]);return r.length=i,r}});var b_=hr("Array").slice,__=A,E_=b_,S_=Array.prototype,w_=function(e){var t=e.slice;return e===S_||__(S_,e)&&t===S_.slice?E_:t};function x_(e,t,n,r,i){var o,a,s,c={};return Fb(o=qb(r)).call(o,(function(e){c[e]=r[e]})),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=Wb(a=$b(s=w_(n).call(n)).call(s)).call(a,(function(n,r){return r(e,t,n)||n}),c),i&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(i):void 0,c.initializer=void 0),void 0===c.initializer&&(Pf(e,t,c),c=null),c}var T_=hr("Array").keys,I_=_o,R_=ut,k_=A,O_=T_,C_=Array.prototype,A_={DOMTokenList:!0,NodeList:!0},N_=function(e){var t=e.keys;return e===C_||k_(C_,e)&&t===C_.keys||R_(A_,I_(e))?O_:t};function j_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j_(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P_(e,t,n,r){return new Vd((function(i,o){t.timeout=t.timeout||lg("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),mw(t.data)):n&&(t.data.size?t.data.size:t.data instanceof FormData?function(e){var t=0;/DingTalk/i.test(navigator.userAgent)&&e.realFormData&&(e=e.realFormData),e.forEach((function(e){t+="string"==typeof e?mw(e):e.size}))}(t.data):mw(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,Lv.request(t).then((function(e){"string"==typeof e.data?mw(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?e.data.byteLength:mw(JSON.stringify(e.data)),r&&i({data:e.data,headers:e.headers}),i(e.data)})).catch((function(e){Lv.isCancel(e)?o(new Fv(Pv.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new Fv(Pv.NETWORK_TIMEOUT,e.message)):e.response?o(new Fv(Pv.NETWORK_RESPONSE_ERROR,e.response.status)):o(new Fv(Pv.NETWORK_ERROR,e.message))}))}))}function L_(e,t){return M_.apply(this,arguments)}function M_(){return M_=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Blob([n.data],{type:"buffer"}),e.next=3,P_(t,D_(D_({},n),{},{data:r,headers:{"Content-Type":"application/octet-stream"}}),!0);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),M_.apply(this,arguments)}var U_=new(function(e){h(n,e);var t=f(n);function n(){var e;return p(this,n),e=t.call(this),Lf(l(e),"_moduleName","network-indicator"),Lf(l(e),"_networkState",Qy.ONLINE),Lf(l(e),"onlineWaiter",void 0),window.addEventListener("online",(function(){e.networkState=Qy.ONLINE})),window.addEventListener("offline",(function(){e.networkState=Qy.OFFLINE})),e}return v(n,[{key:"networkState",get:function(){return this._networkState},set:function(e){var t=this;Zv.info("[".concat(this._moduleName,"]")+"network state changed, "+this._networkState+" -> "+e),this.emit($y.NETWORK_STATE_CHANGE,e,this._networkState),e===Qy.ONLINE?this.emit($y.ONLINE):e===Qy.OFFLINE&&(this.onlineWaiter=new Vd((function(e){t.once($y.ONLINE,(function(){t.onlineWaiter=void 0,e(Qy.ONLINE)}))})),this.emit($y.OFFLINE)),this._networkState=e}}]),n}(Uv)),V_=!1,F_=new(function(e){h(n,e);var t=f(n);function n(){var e;return p(this,n),e=t.apply(this,arguments),Lf(l(e),"onAutoplayFailed",void 0),Lf(l(e),"onAudioAutoplayFailed",void 0),e}return v(n)}(Uv));function B_(){if(of(),!V_){var e=function e(t){t.preventDefault(),V_=!1,kf()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};V_=!0,kf()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),Zv.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),F_.onAutoplayFailed?F_.onAutoplayFailed():F_.onAudioAutoplayFailed?Zv.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):Zv.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),F_.emit("autoplay-failed")}}function G_(e){return(new TextEncoder).encode(e)}var q_=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n},W_=function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t){var n="";return new Uint8Array(e).forEach((function(e){n+=e.toString(t).padStart(2,"0")})),n},e.next=3,crypto.subtle.digest("SHA-256",G_(t));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1,16));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function H_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H_(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){var i=r.value;if("function"==typeof i){var o=e.className||t.__className__||("AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name);r.value=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r;if(e.argsMap)try{s=e.argsMap.apply(e,[this].concat(r))}catch(e){Zv.warning(e),s=[]}try{JSON.stringify(s)}catch(e){Zv.warning("arguments for method ".concat(o,".").concat(String(n)," not serializable for apiInvoke.")),s=[]}var c=(e.report||Y_).reportApiInvoke(this._sessionId||null,{name:"".concat(o,".").concat(String(n)),options:s,tag:Pm.TRACER,reportResult:e.reportResult},e.throttleTime);try{var u=i.apply(this,r);return u instanceof Vd?u.then((function(t){return c.onSuccess(e.reportResult&&t),t})).catch((function(e){throw c.onError(e),e})):(c.onSuccess(e.reportResult&&u),u)}catch(e){throw c.onError(e),e}}}return r}}var Y_=new(function(){function e(){var t=this;p(this,e),Lf(this,"baseInfoMap",new Map),Lf(this,"proxyServer",void 0),Lf(this,"clientList",yg),Lf(this,"eventUploadTimer",void 0),Lf(this,"setSessionIdTimer",void 0),Lf(this,"url",void 0),Lf(this,"backupUrl",void 0),Lf(this,"_appId",void 0),Lf(this,"keyEventUploadPendingItems",[]),Lf(this,"normalEventUploadPendingItems",[]),Lf(this,"apiInvokeUploadPendingItems",[]),Lf(this,"apiInvokeCount",0),Lf(this,"ltsList",[]),Lf(this,"lastSendNormalEventTime",Date.now()),Lf(this,"customReportCounterTimer",void 0),Lf(this,"customReportCount",0),Lf(this,"extApiInvoke",function(){var e=u(c().mark((function e(n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=s(n);try{for(r.s();!(i=r.n()).done;)o=i.value,a=z_(z_({},o),{},{sid:null,invokeId:++t.apiInvokeCount,tag:Pm.TRACER}),t.sendApiInvoke(a)}catch(c){r.e(c)}finally{r.f()}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),lg("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),lg("EVENT_REPORT_SEND_INTERVAL"))}return v(e,[{key:"adjustSessionStartTime",value:function(e){if(this.baseInfoMap.has(e)||this.baseInfoMap.get(e)){var t=this.baseInfoMap.get(e),n=Date.now(),r=t.startTime;t.startTime=n,Zv.debug("rewrite session ".concat(e," startTime: ").concat(n," , ").concat(n-r,"ms")),this.baseInfoMap.set(e,t)}else Zv.error("adjust session ".concat(e," start time, sid is not exist or info is undefined"))}},{key:"setAppId",value:function(e){this._appId=e}},{key:"reportApiInvoke",value:function(e,t,n){var r=this;t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;var i=Date.now();this.apiInvokeCount+=1;var o=this.apiInvokeCount,a=function(){return{tag:t.tag,invokeId:o,sid:e,name:t.name,apiInvokeTime:i,options:t.options,states:t.states||null}},s=!!lg("SHOW_REPORT_INVOKER_LOG");s&&Zv.info("".concat(t.name," start"),t.options);var c=!1;yw(t.timeout).then((function(){c||(r.sendApiInvoke(z_(z_({},a()),{},{error:Pv.API_INVOKE_TIMEOUT,success:!1})),Zv.debug("".concat(t.name," timeout")))}));var u=new Fv(Pv.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:function(e){var i=function(){if(c)throw u;return c=!0,r.sendApiInvoke(z_(z_({},a()),{},{success:!0},t.reportResult&&{result:e})),s&&Zv.info("".concat(t.name," onSuccess")),e};return n?Uw(i,t.name+"Success",n,(function(){return c=!0})):i()},onError:function(e){var i=function(){if(c)throw e;c=!0,r.sendApiInvoke(z_(z_({},a()),{},{success:!1,error:e})),s&&Zv.info("".concat(t.name," onFailure"),e.toString())};return n?Uw(i,t.name+"Error",n,(function(){return c=!0})):i()}}}},{key:"sessionInit",value:function(e,t){if(!this.baseInfoMap.has(e)){var n=Date.now(),r=this.createBaseInfo(e,n);r.cname=t.cname;var i=Object.assign({},{willUploadConsoleLog:lg("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:Qv?"global":"oversea",areas:lg("AREAS")&&lg("AREAS").join(",")},t.extend),o=Date.now(),a=z_(z_({},r),{},{eventType:Cm.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,build:Jv,lts:o,elapse:o-n,extend:JSON.stringify(i),mode:t.mode,process:lg("PROCESS_ID"),appType:lg("APP_TYPE"),success:!0,version:Xv});this.send({type:Am.SESSION,data:a},!0)}}},{key:"joinChooseServer",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=z_(z_({},r),{},{eventType:Cm.JOIN_CHOOSE_SERVER,lts:i,eventElapse:i-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:i-n.startTime,success:t.succ,chooseServerAddrList:JSON.stringify(t.serverList),uid:t.uid?parseInt(t.uid):null,cid:t.cid?parseInt(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0,isHttp3:t.isHttp3});this.send({type:Am.JOIN_CHOOSE_SERVER,data:o},!0)}}},{key:"reqUserAccount",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=z_(z_({},r),{},{eventType:Cm.REQ_USER_ACCOUNT,lts:i,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:i-n.startTime,eventElapse:i-t.lts,extend:JSON.stringify(t.extend)});this.send({type:Am.REQ_USER_ACCOUNT,data:o},!0)}}},{key:"joinGateway",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info;t.vid&&(r.vid=t.vid),r.uid=t.uid,r.cid=t.cid;var i=Date.now(),o=t.firstSuccess,a=t.avoidJoinStartTime,s=t.isProxy,c=t.addr,u=i-(o&&a?a:n.startTime),l=z_(z_({},r),{},{eventType:Cm.JOIN_GATEWAY,lts:i,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,elapse:u,eventElapse:i-t.lts,firstSuccess:o,signalChannel:t.signalChannel}),d=l.success?1:0;if(t.succ&&(n.lastJoinSuccessTime=i),o)this.send({type:Am.JOIN_GATEWAY,data:l},!0);else{var h;if(c)if(s){var f=c.match(/h=(\d{1,3}-){3}\d{1,3}/g),p=c.match(/p=[0-9]{1,6}/g);h={isSuccess:d,gatewayIp:f&&f.length?f[0].split("=")[1].replace(/-/g,"."):"",port:p&&p.length?p[0].split("=")[1]:"",isProxy:s?1:0}}else{var v=c.match(/wss:\/\/(\d{1,3}-){3}\d{1,3}/g),g=c.match(/:[0-9]{1,6}/g);h={isSuccess:d,gatewayIp:v&&v.length?v[0].split("//")[1].replace(/-/g,"."):"",port:g&&g.length?g[0].split(":")[1]:"",isProxy:s?1:0}}else h={isSuccess:d,gatewayIp:"",port:"",isProxy:s?1:0};delete l.success,delete l.eventType,delete l.firstSuccess,l.vid=Number(l.vid);var m=Object.assign({},l,h,{eventType:Cm.REJOIN_GATEWAY});this.send({type:Am.RE_JOIN_GATEWAY,data:m},!0)}}}},{key:"joinChannelTimeout",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=Date.now(),i=z_(z_({},n.info),{},{lts:r,timeout:t,elapse:r-n.startTime});this.send({type:Am.JOIN_CHANNEL_TIMEOUT,data:i},!0)}}},{key:"publish",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=z_(z_({},r),{},{eventType:Cm.PUBLISH,lts:i,eventElapse:t.eventElapse,elapse:i-n.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:Am.PUBLISH,data:o},!0)}}},{key:"subscribe",value:function(e,t,n){var r=this.baseInfoMap.get(e);if(r){var i=r.info,o=Date.now(),a=z_(z_({},i),{},{eventType:Cm.SUBSCRIBE,lts:o,eventElapse:t.eventElapse,elapse:o-r.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid},n&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof t.peerid?a.peerSuid=t.peerid:a.peer=t.peerid,this.send({type:Am.SUBSCRIBE,data:a},!0)}}},{key:"wsCompressorInit",value:function(e){var t,n=g(N_(t=this.baseInfoMap).call(t)),r=n.length?n[0]:"UnableToGetSid",i=this.baseInfoMap.get(r);if(i){var o=i.info,a=Date.now(),s=z_(z_({},o),{},{eventType:Cm.WS_COMPRESSOR_INIT,lts:a,eventElapse:e.eventElapse,elapse:a-i.startTime,status:e.status?1:2});this.send({type:Am.WS_COMPRESSOR_INIT,data:s},!0)}}},{key:"firstRemoteVideoDecode",value:function(e,t,n,r){var i=this.baseInfoMap.get(e);if(i){var o=i.info,a=Date.now(),s=z_(z_(z_({},o),r),{},{elapse:a-i.startTime,eventType:t,lts:a,firstDecodeFrame:Math.max(a-i.startTime,0),apEnd:Math.max(r.apEnd-i.startTime,0),apStart:Math.max(r.apStart-i.startTime,0),joinGwEnd:Math.max(r.joinGwEnd-i.startTime,0),joinGwStart:Math.max(r.joinGwStart-i.startTime,0),pcEnd:Math.max(r.pcEnd-i.startTime,0),pcStart:Math.max(r.pcStart-i.startTime,0),subscriberEnd:Math.max(r.subscriberEnd-i.startTime,0),subscriberStart:Math.max(r.subscriberStart-i.startTime,0),videoAddNotify:Math.max(r.videoAddNotify-i.startTime,0)});this.send({type:n,data:s},!0)}}},{key:"firstRemoteFrame",value:function(e,t,n,r){var i=this.baseInfoMap.get(e);if(i){var o=i.info,a=Date.now(),s=z_(z_(z_({},o),r),{},{elapse:a-i.startTime,eventType:t,lts:a});this.send({type:n,data:s},!0)}}},{key:"pcStats",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=z_(z_(z_({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),elapse:i-n.startTime,eventType:Cm.PC_STATS,lts:i});this.send({type:Am.PC_STATS,data:o},!0)}}},{key:"onGatewayStream",value:function(e,t,n,r){var i=this.baseInfoMap.get(e);if(i){var o=i.info,a=Date.now(),s=z_(z_(z_({},o),r),{},{eventType:t,lts:a});this.send({type:n,data:s},!0)}}},{key:"streamSwitch",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=z_(z_({},r),{},{eventType:Cm.STREAM_SWITCH,lts:i,isDual:t.isdual,elapse:i-n.startTime,success:t.succ});this.send({type:Am.STREAM_SWITCH,data:o},!0)}}},{key:"requestProxyAppCenter",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=z_(z_({},r),{},{eventType:Cm.REQUEST_PROXY_APPCENTER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:Am.REQUEST_PROXY_APPCENTER,data:o},!0)}}},{key:"requestProxyWorkerManager",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=z_(z_({},r),{},{eventType:Cm.REQUEST_PROXY_WORKER_MANAGER,lts:i,eventElapse:i-t.lts,elapse:i-n.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:Am.REQUEST_PROXY_WORKER_MANAGER,data:o},!0)}}},{key:"setProxyServer",value:function(e){this.proxyServer=e,e?Zv.debug("reportProxyServerurl: ".concat(e)):Zv.debug("disable reportProxyServerurl: ".concat(e))}},{key:"peerPublishStatus",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=z_(z_({},r),{},{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:i,elapse:i-n.startTime,joinChannelSuccessElapse:i-(n.lastJoinSuccessTime||i),peerPublishDurationVideo:t.videoPublishDuration,peerPublishDurationAudio:t.audioPublishDuration});this.send({type:Am.PEER_PUBLISH_STATUS,data:o},!0)}}},{key:"workerEvent",value:function(e,t){var n=this,r=this.baseInfoMap.get(e);if(r){var i=r.info,o=Date.now();(function(e,t,n){var r=e[t];if(!r||"string"!=typeof r)return[e];e[t]="";for(var i=mw(JSON.stringify(e)),o=0,a=[],s=0,c=0;c<r.length;c++)(s+=r.charCodeAt(c)<=127?1:3)<=n-i||(a[a.length]=gw(gw({},e),{},m({},t,r.substring(o,c))),o=c,s=r.charCodeAt(c)<=127?1:3);return o!==r.length-1&&(a[a.length]=gw(gw({},e),{},m({},t,r.substring(o)))),a})(z_(z_(z_({},i),t),{},{elapse:o-r.startTime,lts:o,productType:"WebRTC"}),"payload",1300).forEach((function(e){return n.send({type:Am.WORKER_EVENT,data:e},!0)}))}}},{key:"apworkerEvent",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=z_(z_(z_({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:Am.AP_WORKER_EVENT,data:o},!0)}}},{key:"joinWebProxyAP",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=z_(z_(z_({},r),t),{},{elapse:i-n.startTime,lts:i,extend:t.extend||void 0});this.send({type:Am.JOIN_WEB_PROXY_AP,data:o},!0)}}},{key:"WebSocketQuit",value:function(e,t){var n=this.baseInfoMap.get(e);if(n){var r=n.info,i=Date.now(),o=z_(z_(z_({},r),t),{},{elapse:i-n.startTime,lts:i});this.send({type:Am.WEBSOCKET_QUIT,data:o},!0)}}},{key:"sendCustomReportMessage",value:function(){var e=u(c().mark((function e(t,n){var r,i,o=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.customReportCount+=n.length,!(this.customReportCount>lg("CUSTOM_REPORT_LIMIT"))){e.next=2;break}throw new Fv(Pv.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);case 2:if(this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((function(){o.customReportCount=0}),5e3)),r=Date.now(),i=n.map((function(e){return{type:Am.USER_ANALYTICS,data:z_(z_({sid:t},e),{},{lts:r})}})),e.prev=4,!lg("NEW_REPORT_SERVER")){e.next=10;break}return e.next=8,this.postDataToStatsCollector2(i);case 8:e.next=12;break;case 10:return e.next=12,this.postDataToStatsCollector(i);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(4),Zv.error("send custom report message failed",e.t0.toString()),new Fv(Pv.CUSTOM_REPORT_SEND_FAILED,e.t0.message);case 17:case"end":return e.stop()}}),e,this,[[4,14]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"autoplayFailed",value:function(e,t,n,r){if(e){var i=this.baseInfoMap.get(e);if(i){var o=i.info,a=Date.now(),s=z_(z_({},o),{},{vid:void 0===o.vid?0:Number(o.vid),lts:a,elapse:a-i.startTime,cbRegistered:F_.onAutoplayFailed||F_.onAudioAutoplayFailed?1:-1,errorMsg:n,mediaType:t,trackId:r,extend:void 0});this.send({type:Am.AUTOPLAY_FAILED,data:s},!0)}}}},{key:"sendApiInvoke",value:function(e){var t=lg("NOT_REPORT_EVENT");if(e.tag&&t.includes&&t.includes(e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;var n=this.baseInfoMap.get(e.sid);if(!n)return this.apiInvokeUploadPendingItems.push(e),!1;var r=n.info,i=r.cname,o=r.uid,a=r.cid;e.lts=e.lts||Date.now();var s=void 0;if(e.error)if(e.error instanceof Fv){var c=e.error,u=c.code,l=c.message;s=u||l||e.error.toString()}else s=e.error.toString();var d={invokeId:e.invokeId,sid:e.sid,cname:i,cid:a,uid:o,lts:e.lts,success:e.success,elapse:e.lts-n.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?s:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:Am.API_INVOKE,data:d},!1),!0}},{key:"appendSessionId",value:function(){var e=this;this.clientList.forEach((function(t){if(t._sessionId)for(var n=e.apiInvokeUploadPendingItems.length,r=0;r<n;r++){var i=e.apiInvokeUploadPendingItems.shift();i&&(i.sid=t._sessionId,e.sendApiInvoke(Object.assign({},i)))}}))}},{key:"send",value:function(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>lg("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}},{key:"doSend",value:function(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}},{key:"sendItems",value:function(e,t){for(var n=this,r=[],i=[];e.length;){var o=e.shift();r.length<20?r.push(o):i.push(o)}e.push.apply(e,i);for(var a=0,s=[].concat(r);a<s.length;a++){var c,u=s[a];-1!==this.ltsList.indexOf(u.data.lts)?(u.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(u.data.lts)):(this.ltsList.push(u.data.lts),vm(c=this.ltsList).call(c,(function(e,t){return e-t})))}return t||(this.lastSendNormalEventTime=Date.now()),lg("ENABLE_EVENT_REPORT")?(r.length&&(lg("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(r):this.postDataToStatsCollector(r)).catch(function(e){return function(r){lg("EVENT_REPORT_RETRY")&&(t?n.keyEventUploadPendingItems=n.keyEventUploadPendingItems.concat(e):(n.normalEventUploadPendingItems=n.normalEventUploadPendingItems.concat(e),n.normalEventUploadPendingItems.length>lg("NORMAL_EVENT_QUEUE_CAPACITY")&&(n.normalEventUploadPendingItems.splice(0,n.normalEventUploadPendingItems.length-lg("NORMAL_EVENT_QUEUE_CAPACITY")),Zv.warning("report: drop normal events"))))}}(r)),e):e}},{key:"postDataToStatsCollector2",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=U_.networkState===Qy.OFFLINE,!e.t0){e.next=4;break}return e.next=4,Vd.race([U_.onlineWaiter,yw(2*Bv.maxRetryTimeout)]);case 4:n=function(e){var t=new Uint8Array;return e.forEach((function(e){var n=G_(JSON.stringify(e.data)),r=new ArrayBuffer(5),i=function(e){var t=0;return Object.entries(Am).forEach((function(n){var r=a(n,2),i=r[0];r[1]===e.type&&(t=jm[i])})),t}(e),o=new DataView(r);o.setUint16(0,n.byteLength,!0),o.setUint8(2,255&i),o.setUint8(3,i>>>8&255),o.setUint8(4,i>>>16&255),t=q_(t,new Uint8Array(r)),t=q_(t,n)})),t},r="event",i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(lg("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(r):"https://".concat(lg("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(r),o=0;case 7:if(!(o<2)){e.next=23;break}return 1===o&&(i=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(lg("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(r):"https://".concat(lg("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(r)),e.prev=9,e.next=12,P_(i,{timeout:1e4,data:n(t),headers:z_(z_({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0);case 12:e.next=19;break;case 14:if(e.prev=14,e.t1=e.catch(9),1!==o){e.next=18;break}throw e.t1;case 18:return e.abrupt("continue",20);case 19:return e.abrupt("return");case 20:o+=1,e.next=7;break;case 23:case"end":return e.stop()}}),e,this,[[9,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"postDataToStatsCollector",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s=this,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]&&u[1],r={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:t.map((function(e){return JSON.stringify(e)})),vid:function(e){var t=e&&e.data.sid&&s.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0}(t[0])},e.t0=U_.networkState===Qy.OFFLINE,!e.t0){e.next=6;break}return e.next=6,Vd.race([U_.onlineWaiter,yw(2*Bv.maxRetryTimeout)]);case 6:i=n?"/events/proto-raws":"/events/messages",o=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(lg("EVENT_REPORT_DOMAIN"),"&p=").concat(lg("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(lg("EVENT_REPORT_DOMAIN"),":").concat(lg("STATS_COLLECTOR_PORT")).concat(i)),a=0;case 9:if(!(a<2)){e.next=30;break}if(1===a&&(o=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(lg("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(lg("STATS_COLLECTOR_PORT"),"&d=").concat(i):"https://".concat(lg("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(lg("STATS_COLLECTOR_PORT")).concat(i))),e.prev=11,!n){e.next=17;break}return e.next=15,L_(o,{timeout:1e4,data:r});case 15:e.next=19;break;case 17:return e.next=19,P_(o,{timeout:1e4,data:r});case 19:e.next=26;break;case 21:if(e.prev=21,e.t1=e.catch(11),1!==a){e.next=25;break}throw e.t1;case 25:return e.abrupt("continue",27);case 26:return e.abrupt("return");case 27:a+=1,e.next=9;break;case 30:case"end":return e.stop()}}),e,this,[[11,21]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createBaseInfo",value:function(e,t){var n=Object.assign({},ey);return n.sid=e,this.baseInfoMap.set(e,{info:n,startTime:t}),n}},{key:"reportResourceTiming",value:function(e,t){var n=performance.getEntriesByName(e),r=n[n.length-1];r&&this.reportApiInvoke(t,{name:"Client.resourceTiming",options:r,tag:Pm.TRACER}).onSuccess()}}]),e}());Vv.on("REPORT_LOG_UPLOAD",(function(e){e.networkState=U_.networkState,Y_.reportApiInvoke(null,{name:"logUploadError",options:e,tag:Pm.TRACER})}));var Z_,J_=function(e){h(n,e);var t=f(n);function n(e,r){var i;return p(this,n),i=t.call(this),Lf(l(i),"trackMediaType",void 0),Lf(l(i),"_ID",void 0),Lf(l(i),"_rtpTransceiver",void 0),Lf(l(i),"_lowRtpTransceiver",void 0),Lf(l(i),"_hints",[]),Lf(l(i),"_isClosed",!1),Lf(l(i),"_originMediaStreamTrack",void 0),Lf(l(i),"_mediaStreamTrack",void 0),Lf(l(i),"_external",{}),i._ID=r||_w(8,"track-"),i._originMediaStreamTrack=e,i._mediaStreamTrack=e,function(e){bg.includes(e)||bg.push(e)}(l(i)),i}return v(n,[{key:"toString",value:function(){return this._ID}},{key:"getTrackId",value:function(){return this._ID}},{key:"getMediaStreamTrack",value:function(e){if(!e){var t=Y_.reportApiInvoke(null,{name:Dm.GET_MEDIA_STREAM_TRACK,options:[],tag:Pm.TRACER});this._mediaStreamTrack&&"string"==typeof this._mediaStreamTrack.label?t.onSuccess(this._mediaStreamTrack.label):t.onSuccess("")}return this._mediaStreamTrack}},{key:"getRTCRtpTransceiver",value:function(e){return e===Ay.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}},{key:"getMediaStreamTrackSettings",value:function(){return this.getMediaStreamTrack(!0).getSettings()}},{key:"close",value:function(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){var t=bg.indexOf(e);-1!==t&&bg.splice(t,1)}(this),this.emit(Py.CLOSED)}},{key:"_updateRtpTransceiver",value:function(e,t){if(t===Ay.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(Dy.TRANSCEIVER_UPDATED,e,t)}}]),n}(Uv),X_=1,Q_=function(){function e(t){p(this,e),Lf(this,"lockingPromise",Vd.resolve()),Lf(this,"locks",0),Lf(this,"name",""),Lf(this,"lockId",void 0),this.lockId=X_++,t&&(this.name=t),Zv.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}return v(e,[{key:"isLocked",get:function(){return this.locks>0}},{key:"lock",value:function(e){var t,n=this;this.locks+=1,Zv.debug("[lock-".concat(this.name,"-").concat(this.lockId,"] is locked, current queue ").concat(this.locks,". ").concat("string"==typeof e?e:""));var r=new Vd((function(r){t=function(){n.locks-=1,Zv.debug("[lock-".concat(n.name,"-").concat(n.lockId,"] is not locked, current queue ").concat(n.locks,". ").concat("string"==typeof e?e:"")),r()}})),i=this.lockingPromise.then((function(){return t}));return this.lockingPromise=this.lockingPromise.then((function(){return r})),i}}]),e}();function $_(e,t){return function(n,r,i){var o=i.value;if("function"!=typeof o)throw new Error("Cannot use mutex on object property.");return i.value=u(c().mark((function n(){var i,a,s,u,l,d=arguments;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this[t]){n.next=3;break}throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));case 3:return n.next=5,i.lock("From ".concat(e,".").concat(r));case 5:for(a=n.sent,n.prev=6,s=d.length,u=new Array(s),l=0;l<s;l++)u[l]=d[l];return n.next=10,o.apply(this,u);case 10:return n.abrupt("return",n.sent);case 11:return n.prev=11,a(),n.finish(11);case 14:case"end":return n.stop()}}),n,this,[[6,,11,14]])}))),i}}var eE=function(e){h(n,e);var t=f(n);function n(e,r){var i;return p(this,n),i=t.call(this,e,r),Lf(l(i),"_enabled",!0),Lf(l(i),"_muted",!1),Lf(l(i),"_isExternalTrack",!1),Lf(l(i),"_isClosed",!1),Lf(l(i),"_enabledMutex",void 0),Lf(l(i),"processor",void 0),Lf(l(i),"_processorContext",void 0),Lf(l(i),"_handleTrackEnded",(function(){i.onTrackEnded()})),i._enabledMutex=new Q_("".concat(i.getTrackId())),e.addEventListener("ended",i._handleTrackEnded),i}return v(n,[{key:"isExternalTrack",get:function(){return this._isExternalTrack}},{key:"muted",get:function(){return this._muted}},{key:"enabled",get:function(){return this._enabled}},{key:"processorContext",get:function(){return this._processorContext},set:function(e){this._processorContext=e}},{key:"getTrackLabel",value:function(){var e,t;return null!==(e=null===(t=this._originMediaStreamTrack)||void 0===t?void 0:t.label)&&void 0!==e?e:""}},{key:"close",value:function(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,Zv.debug("[".concat(this.getTrackId(),"] close")),this.emit(Oy.NEED_CLOSE),i(o(n.prototype),"close",this).call(this))}},{key:"_updateOriginMediaStreamTrack",value:function(){var e=u(c().mark((function e(t,n){var r,i=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>2&&void 0!==i[2]&&i[2],this._isExternalTrack=r,e.t0=t!==this._originMediaStreamTrack,!e.t0){e.next=14;break}return this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),n&&this._originMediaStreamTrack.stop(),t.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=t,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),e.next=13,Iw(this,Oy.NEED_REPLACE_TRACK,this);case 13:this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext});case 14:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_getDefaultPlayerConfig",value:function(){return{}}},{key:"onTrackEnded",value:function(){Zv.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Py.TRACK_ENDED)}},{key:"stateCheck",value:function(e,t){if(Zv.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),gm(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new Fv(Pv.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print();if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new Fv(Pv.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print()}},{key:"getProcessorStats",value:function(){return this.processorContext.gatherStats()}},{key:"getProcessorUsage",value:function(){return this.processorContext.gatherUsage()}}]),n}(J_);function tE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}!function(e){e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change"}(Z_||(Z_={}));var nE=window.AudioContext||window.webkitAudioContext,rE=null,iE=new(function(e){h(n,e);var t=f(n);function n(){var e;return p(this,n),e=t.apply(this,arguments),Lf(l(e),"prevState",void 0),Lf(l(e),"curState",void 0),Lf(l(e),"currentTime",void 0),Lf(l(e),"currentTimeStuckAt",void 0),Lf(l(e),"interruptDetectorTrack",void 0),Lf(l(e),"onLocalAudioTrackMute",(function(){Zv.info("ios15-interruption-start"),e.emit(Z_.IOS_15_16_INTERRUPTION_START)})),Lf(l(e),"onLocalAudioTrackUnmute",u(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Zv.info("ios15-interruption-end"),"running"===e.curState&&!e.duringInterruption){t.next=5;break}Zv.info("ios15-interruption-end-canceled"),t.next=10;break;case 5:if(t.t0=rE,!t.t0){t.next=9;break}return t.next=9,rE.suspend();case 9:e.emit(Z_.IOS_15_16_INTERRUPTION_END);case 10:case"end":return t.stop()}}),t)})))),e}return v(n,[{key:"duringInterruption",get:function(){return"running"===this.prevState&&"interrupted"===this.curState}},{key:"bindInterruptDetectorTrack",value:function(e){Zv.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}},{key:"unbindInterruptDetectorTrack",value:function(e){Zv.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}}]),n}(Uv));function oE(){if(nE){Zv.info("create audio context");var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tE(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},lg("WEBAUDIO_INIT_OPTIONS"));Zv.debug("audio context init option:",JSON.stringify(e)),rE=new nE(e),iE.curState=rE.state,rE.onstatechange=function(){iE.prevState=iE.curState,iE.curState=rE?rE.state:void 0;var e=iE.prevState,t=iE.curState,n="running"===t,r="interrupted"===t,i="running"===e,o="suspended"===e,a="interrupted"===e,s=of().osVersion;(pf()||wf())&&i&&r&&(Zv.info("ios".concat(s,"-interruption-start")),iE.emit(Z_.IOS_INTERRUPTION_START)),(pf()||wf())&&(o||a)&&n&&(Zv.info("ios".concat(s,"-interruption-end")),iE.emit(Z_.IOS_INTERRUPTION_END)),e!==t&&(Zv.debug("AudioContext State Change","".concat(e,"=>").concat(t)),iE.emit(Z_.STATE_CHANGE))},setInterval((function(){var e,t=null===(e=rE)||void 0===e?void 0:e.currentTime;iE.currentTime!==t?(iE.currentTimeStuckAt&&(Zv.debug("AudioContext current time resume at ".concat(t)),iE.currentTimeStuckAt=void 0),iE.currentTime=t):(t!==iE.currentTimeStuckAt&&(Y_.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:t},tag:Pm.TRACER}).onSuccess(),Zv.warning("AudioContext current time stuck at ".concat(t))),iE.currentTimeStuckAt=t)}),5e3),function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s,u,l,d,h,f,p,v,g,m,y;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g=function(){f(!0)},v=function(){r.removeEventListener("playing",v),r.removeEventListener("abort",v),r.removeEventListener("error",v),a=!1,f(!1)},p=function(e){if(o!==e){o=e;for(var t=0,r=n;t<r.length;t++){var i=r[t];e?window.addEventListener(i,g,{capture:!0,passive:!0}):window.removeEventListener(i,g,{capture:!0,passive:!0})}}},f=function(e){if(!a)if(r.paused)if(e){p(!1),a=!0;var t=void 0;try{(t=r.play())?t.then(v,v):(r.addEventListener("playing",v),r.addEventListener("abort",v),r.addEventListener("error",v))}catch(e){v()}}else p(!0);else p(!1)},h=function(){s(!0)},d=function(){s(!1)},l=function(){s(!0)},u=function(e){if(i!==e){i=e;for(var t=0,r=n;t<r.length;t+=1){var o=r[t];e?window.addEventListener(o,h,{capture:!0,passive:!0}):window.removeEventListener(o,h,{capture:!0,passive:!0})}}},s=function(e){"running"===t.state?u(!1):pf()||wf()?"suspended"===t.state&&(u(!0),e&&t.resume().then(d,d)):"closed"!==t.state&&(u(!0),e&&t.resume().then(d,d))},n=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"],i=!1,o=!1,a=!1,pf()&&(m=t.createMediaStreamDestination(),(y=document.createElement("div")).innerHTML="<audio x-webkit-airplay='deny'></audio>",(r=y.children.item(0)).controls=!1,r.disableRemotePlayback=!0,r.preload="auto",r.srcObject=m.stream,f(!0)),iE.on(Z_.STATE_CHANGE,l),s(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(rE)}else Zv.error("your browser is not support web audio")}function aE(){if(!rE){if(oE(),!rE)throw new Fv(Pv.NOT_SUPPORTED,"can not create audio context");return rE}return rE}function sE(){return!!rE}function cE(e){if(!function(){if(null!==uE)return uE;var e=aE(),t=e.createBufferSource(),n=e.createGain(),r=e.createGain();t.connect(n),t.connect(r),t.disconnect(n);var i=!1;try{t.disconnect(n)}catch(e){i=!0}return t.disconnect(),uE=i,i}()){var t=e.connect,n=e.disconnect;e.connect=function(n,r,i){return e._inputNodes||(e._inputNodes=[]),e._inputNodes.includes(n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,r,i)):t.call(e,n,r)),e},e.disconnect=function(r,i,o){n.call(e),r?Ow(e._inputNodes,r):e._inputNodes=[];var a,c=s(e._inputNodes);try{for(c.s();!(a=c.n()).done;){var u=a.value;t.call(e,u)}}catch(l){c.e(l)}finally{c.f()}}}}var uE=null;function lE(e,t){var n=!1,r=1/t;if(lg("DISABLE_WEBAUDIO"))var i=window.setInterval((function(){n?window.clearInterval(i):e(performance.now()/1e3)}),1e3*r);else{var o=aE(),a=o.createGain();a.gain.value=0,a.connect(o.destination);var s=function t(){if(n)a=null;else{var i=o.createOscillator();i.onended=t,i.connect(a),i.start(0),i.stop(o.currentTime+r),e(o.currentTime)}};s()}return function(){n=!0}}var dE=function(){function e(){p(this,e),Lf(this,"context",void 0),Lf(this,"analyserNode",void 0),Lf(this,"sourceNode",void 0),this.context=aE(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}return v(e,[{key:"updateSource",value:function(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch(e){}this.sourceNode=e,null==e||e.connect(this.analyserNode)}}},{key:"getVolumeLevel",value:function(){if(!this.sourceNode)return 0;if(!this.context||pf()||wf()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;var e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{var t=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(t);for(var n=0;n<e.length;++n)e[n]=t[n]/128-1}var r=yr(e).call(e,(function(e,t){return e+t*t}),0)/e.length;return Math.max(10*Math.log10(r)+100,0)/100}},{key:"getAnalyserNode",value:function(){return this.analyserNode}},{key:"rebuildAnalyser",value:function(){try{var e,t;null===(e=this.sourceNode)||void 0===e||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,null===(t=this.sourceNode)||void 0===t||t.connect(this.analyserNode)}catch(e){Zv.warning("rebuild analyser node failed.")}}},{key:"destroy",value:function(){this.updateSource(void 0)}}]),e}(),hE=function(e){h(n,e);var t=f(n);function n(){var e;return p(this,n),e=t.call(this),Lf(l(e),"outputNode",void 0),Lf(l(e),"outputTrack",void 0),Lf(l(e),"isPlayed",!1),Lf(l(e),"sourceNode",void 0),Lf(l(e),"context",void 0),Lf(l(e),"audioBufferNode",void 0),Lf(l(e),"destNode",void 0),Lf(l(e),"audioOutputLevel",0),Lf(l(e),"volumeLevelAnalyser",void 0),Lf(l(e),"_processedNode",void 0),Lf(l(e),"playNode",void 0),Lf(l(e),"isDestroyed",!1),Lf(l(e),"onNoAudioInput",void 0),Lf(l(e),"isNoAudioInput",!1),Lf(l(e),"_noAudioInputCount",0),e.context=aE(),e.playNode=e.context.destination,e.outputNode=e.context.createGain(),cE(e.outputNode),e.volumeLevelAnalyser=new dE,e}return v(n,[{key:"processSourceNode",get:function(){return this.sourceNode}},{key:"processedNode",get:function(){return this._processedNode},set:function(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var n;null===(n=this.sourceNode)||void 0===n||n.disconnect(this.outputNode)}catch(e){}null===(t=this._processedNode)||void 0===t||t.disconnect(),this._processedNode=e,this.connect()}}},{key:"startGetAudioBuffer",value:function(e){var t=this;this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=function(e){t.emit($m.ON_AUDIO_BUFFER,function(e){for(var t=0;t<e.outputBuffer.numberOfChannels;t+=1)for(var n=e.outputBuffer.getChannelData(t),r=0;r<n.length;r+=1)n[r]=0;return e.inputBuffer}(e))})}},{key:"stopGetAudioBuffer",value:function(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}},{key:"createOutputTrack",value:function(){if(!hb().webAudioMediaStreamDest)throw new Fv(Pv.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}},{key:"play",value:function(e){"running"!==this.context.state&&Aw((function(){iE.emit("autoplay-failed")})),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}},{key:"stop",value:function(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(E){}this.isPlayed=!1}},{key:"getAccurateVolumeLevel",value:function(){return this.volumeLevelAnalyser.getVolumeLevel()}},{key:"checkHasAudioInput",value:function(){var e=u(c().mark((function e(){var t,n,r,i,o,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=a.length>0&&void 0!==a[0]?a[0]:0)>5)){e.next=3;break}return e.abrupt("return",(this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1));case 3:for(pf()||wf()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume(),(n=this.volumeLevelAnalyser.getAnalyserNode()).getFloatTimeDomainData?(r=new Float32Array(n.fftSize),n.getFloatTimeDomainData(r)):(r=new Uint8Array(n.fftSize),n.getByteTimeDomainData(r)),i=!1,o=0;o<r.length;o++)0!==r[o]&&(i=!0);if(!i){e.next=12;break}e.t0=(this.isNoAudioInput=!1,!0),e.next=20;break;case 12:return e.next=14,yw(200);case 14:return e.next=16,this.checkHasAudioInput(t?t+1:1);case 16:if(e.t1=e.sent,!e.t1){e.next=19;break}e.t1=i;case 19:e.t0=e.t1;case 20:return e.abrupt("return",e.t0);case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAudioVolume",value:function(){return this.outputNode.gain.value}},{key:"setVolume",value:function(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}},{key:"destroy",value:function(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}},{key:"disconnect",value:function(){var e,t;null===(e=this.processedNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}},{key:"connect",value:function(){var e;this.processedNode?null===(e=this.processedNode)||void 0===e||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}]),n}(Uv),fE=function(e){h(n,e);var t=f(n);function n(e,i,o){var a,s;if(p(this,n),a=t.call(this),Lf(l(a),"sourceNode",void 0),Lf(l(a),"track",void 0),Lf(l(a),"clonedTrack",void 0),Lf(l(a),"audioElement",void 0),Lf(l(a),"isCurrentTrackCloned",!1),Lf(l(a),"isRemoteTrack",!1),Lf(l(a),"originVolumeLevelAnalyser",void 0),Lf(l(a),"rebuildWebAudio",u(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zv.debug("ready to rebuild web audio, state:",a.context.state),e.t0=a.isNoAudioInput,!e.t0){e.next=5;break}return e.next=5,a.checkHasAudioInput();case 5:if(a.isNoAudioInput&&!a.isDestroyed){e.next=7;break}return e.abrupt("return",(document.body.removeEventListener("click",a.rebuildWebAudio,!0),void Zv.debug("rebuild web audio success, current volume status",a.getAccurateVolumeLevel())));case 7:a.context.resume().then((function(){return Zv.info("resume success")})),Zv.debug("rebuild web audio because of ios 12 bugs"),a.disconnect(),t=a.track,a.track=a.track.clone(),a.isCurrentTrackCloned?t.stop():a.isCurrentTrackCloned=!0,n=new MediaStream([a.track]),a.sourceNode=a.context.createMediaStreamSource(n),cE(a.sourceNode),a.volumeLevelAnalyser.rebuildAnalyser(),r=a.outputNode.gain.value,a.outputNode=a.context.createGain(),a.outputNode.gain.setValueAtTime(r,a.context.currentTime),cE(a.outputNode),a.emit($m.UPDATE_SOURCE),a.connect(),a.audioElement.srcObject=n,a.isPlayed&&a.play(a.playNode),a.checkHasAudioInput();case 14:case"end":return e.stop()}}),e)})))),"audio"!==e.kind)throw new Fv(Pv.UNEXPECTED_ERROR);a.track=e;var d=new MediaStream([a.track]);if(a.isRemoteTrack=!!i,a.sourceNode=a.context.createMediaStreamSource(d),cE(a.sourceNode),o){var h=o.clone();h.enabled=!0,a.clonedTrack=h,Zv.debug("create an unmuted track ".concat(h.id," from the original track ").concat(o.id," to get the volume"));var f=a.context.createMediaStreamSource(new MediaStream([h]));cE(f),a.originVolumeLevelAnalyser=new dE,a.originVolumeLevelAnalyser.updateSource(f)}a.connect(),a.audioElement=document.createElement("audio"),a.audioElement.srcObject=d;var v=of();return i&&v.os===Zh.IOS&&Number(null===(s=v.osVersion)||void 0===s?void 0:s.split(".")[0])<15&&(iE.on(Z_.STATE_CHANGE,(function(){"suspended"===a.context.state?document.body.addEventListener("click",a.rebuildWebAudio,!0):"running"===a.context.state&&a.rebuildWebAudio()})),a.checkHasAudioInput().then((function(e){e||document.body.addEventListener("click",a.rebuildWebAudio,!0)}))),r(a)}return v(n,[{key:"isFreeze",get:function(){return!1}},{key:"updateTrack",value:function(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;var t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),cE(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit($m.UPDATE_SOURCE),this.audioElement.srcObject=t}},{key:"destroy",value:function(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),iE.off("state-change",this.rebuildWebAudio),null===(e=this.originVolumeLevelAnalyser)||void 0===e||e.destroy(),this.clonedTrack=void 0,i(o(n.prototype),"destroy",this).call(this)}},{key:"createMediaStreamSourceNode",value:function(e){return this.context.createMediaStreamSource(new MediaStream([e]))}},{key:"updateOriginTrack",value:function(e){var t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),Zv.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));var n=this.context.createMediaStreamSource(new MediaStream([t]));cE(n),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(n)}},{key:"getOriginVolumeLevel",value:function(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}]),n}(hE);function pE(e,t){return vE.apply(this,arguments)}function vE(){return vE=u(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e,t){return e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t},i={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxHeight:r(n.height,1080),maxWidth:r(n.width,1920)}}},n.frameRate&&"number"!=typeof n.frameRate?(i.video.mandatory.maxFrameRate=n.frameRate.max,i.video.mandatory.minFrameRate=n.frameRate.min):"number"==typeof n.frameRate&&(i.video.mandatory.maxFrameRate=n.frameRate),e.next=4,navigator.mediaDevices.getUserMedia(i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),vE.apply(this,arguments)}function gE(e){return mE.apply(this,arguments)}function mE(){return mE=u(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yE(t.mediaSource);case 2:return n=e.sent,e.next=5,function(e){return new Vd((function(t,n){var r=document.createElement("div");r.innerText="share screen",r.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var i=document.createElement("div");i.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var o=document.createElement("div");o.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",o.setAttribute("style","height: 12%;");var a=document.createElement("div");a.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var s=document.createElement("div");s.setAttribute("style","text-align: right; padding: 16px 0;");var c=document.createElement("button");c.innerHTML="cancel",c.setAttribute("style","width: 85px;"),c.onclick=function(){document.body.removeChild(u);var e=new Error("NotAllowedError");e.name="NotAllowedError",n(e)},s.appendChild(c),i.appendChild(o),i.appendChild(a),i.appendChild(s);var u=document.createElement("div");u.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),u.appendChild(r),u.appendChild(i),document.body.appendChild(u),e.map((function(e){if(e.id){var n=document.createElement("div");n.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");var r=e.thumbnail;r.getSize().width>1920&&(r=r.resize({width:1920})),n.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+r.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",n.onclick=function(){document.body.removeChild(u),t(e.id)},a.appendChild(n)}}))}))}(n);case 5:return r=e.sent,e.next=8,pE(r,t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),mE.apply(this,arguments)}function yE(e){return bE.apply(this,arguments)}function bE(){return bE=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=["window","screen"],"application"!==t&&"window"!==t||(n=["window"]),"screen"===t&&(n=["screen"]),r=EE()){e.next=5;break}throw new Fv(Pv.ELECTRON_IS_NULL);case 5:i=null;try{i=(null===(o=r.desktopCapturer)||void 0===o?void 0:o.getSources({types:n}))||r.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:n})}catch(t){i=null}return i&&i.then||(i=new Vd((function(e,t){r.desktopCapturer.getSources({types:n},(function(n,r){n?t(n):e(r)}))}))),e.prev=8,e.next=11,i;case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(8),new Fv(Pv.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,e.t0.toString());case 17:case"end":return e.stop()}}),e,null,[[8,14]])}))),bE.apply(this,arguments)}var _E=null;function EE(){if(_E)return _E;try{return _E=window.require("electron")}catch(E){return null}}function SE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var wE=new Q_("safari"),xE=!1,TE=!1;function IE(e,t){return RE.apply(this,arguments)}function RE(){return RE=u(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,i=null;case 1:if(!(r<2)){e.next=23;break}return e.prev=2,e.next=5,kE(t,n,r>0);case 5:return i=e.sent,e.abrupt("break",23);case 9:if(e.prev=9,e.t0=e.catch(2),!(e.t0 instanceof Fv)){e.next=13;break}throw Zv.error("[".concat(n,"] ").concat(e.t0.toString())),e.t0;case 13:if((o=CE(e.t0.name||e.t0.code||e.t0,e.t0.message)).code!==Pv.MEDIA_OPTION_INVALID){e.next=20;break}return Zv.debug("[".concat(n,"] detect media option invalid, retry")),r+=1,e.next=19,yw(500);case 19:return e.abrupt("continue",21);case 20:throw Zv.error("[".concat(n,"] ").concat(o.toString())),o;case 21:e.next=1;break;case 23:if(i){e.next=25;break}throw new Fv(Pv.UNEXPECTED_ERROR,"can not find stream after getUserMedia");case 25:return e.abrupt("return",i);case 26:case"end":return e.stop()}}),e,null,[[2,9]])}))),RE.apply(this,arguments)}function kE(e,t,n){return OE.apply(this,arguments)}function OE(){return OE=u(c().mark((function e(t,n,r){var i,o,a,s,u,l,d,h,f,p,v,m,y,b,_,E,S;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=2;break}throw new Fv(Pv.NOT_SUPPORTED,"can not find getUserMedia");case 2:if(r&&(t.video&&(delete t.video.width,delete t.video.height),t.screen&&(delete t.screen.width,delete t.screen.height)),i=hb(),o=new MediaStream,t.audioSource&&o.addTrack(t.audioSource),t.videoSource&&o.addTrack(t.videoSource),t.audio||t.video||t.screen){e.next=6;break}return e.abrupt("return",(Zv.debug("Using Video Source/ Audio Source"),o));case 6:if(!t.screen){e.next=64;break}if(!EE()){e.next=25;break}if(!t.screen.sourceId){e.next=17;break}return e.t0=AE,e.t1=o,e.next=13,pE(t.screen.sourceId,t.screen);case 13:e.t2=e.sent,(0,e.t0)(e.t1,e.t2),e.next=23;break;case 17:return e.t3=AE,e.t4=o,e.next=21,gE(t.screen);case 21:e.t5=e.sent,(0,e.t3)(e.t4,e.t5);case 23:e.next=64;break;case 25:if(!(df()&&t.screen.extensionId&&t.screen.mandatory)){e.next=41;break}if(i.getStreamFromExtension){e.next=28;break}throw new Fv(Pv.NOT_SUPPORTED,"This browser does not support screen sharing");case 28:return Zv.debug("[".concat(n,'] Screen access on chrome stable, looking for extension"')),e.next=31,m=t.screen.extensionId,y=n,new Vd((function(e,t){try{chrome.runtime.sendMessage(m,{getStream:!0},(function(n){if(!n||!n.streamId)return Zv.error("[".concat(y,"] No response from Chrome Plugin. Plugin not installed properly"),n),void t(new Fv(Pv.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(n.streamId)}))}catch(e){Zv.error("[".concat(y,"] AgoraRTC screensharing plugin is not accessible(").concat(m,")"),e.toString()),t(new Fv(Pv.CHROME_PLUGIN_NOT_INSTALL))}}));case 31:return a=e.sent,t.screen.mandatory.chromeMediaSourceId=a,e.t6=AE,e.t7=o,e.next=37,navigator.mediaDevices.getUserMedia({video:{mandatory:t.screen.mandatory}});case 37:e.t8=e.sent,(0,e.t6)(e.t7,e.t8),e.next=64;break;case 41:if(!i.getDisplayMedia){e.next=53;break}return t.screen.mediaSource&&By(t.screen.mediaSource),u={width:t.screen.width,height:t.screen.height,frameRate:t.screen.frameRate,displaySurface:null!==(s=t.screen.displaySurface)&&void 0!==s?s:"screen"===t.screen.mediaSource?"monitor":t.screen.mediaSource},l=t.screen,d=l.selfBrowserSurface,h=l.surfaceSwitching,f=l.systemAudio,p={selfBrowserSurface:d,surfaceSwitching:h,systemAudio:f},!d&&delete p.selfBrowserSurface,!h&&delete p.surfaceSwitching,!f&&delete p.systemAudio,Zv.debug("[".concat(n,"] getDisplayMedia:"),JSON.stringify({video:u,audio:!!t.screenAudio,controls:p})),e.t9=AE,e.t10=o,e.next=49,navigator.mediaDevices.getDisplayMedia(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SE(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({video:u,audio:!!t.screenAudio},p));case 49:e.t11=e.sent,(0,e.t9)(e.t10,e.t11),e.next=64;break;case 53:if(ff()){e.next=55;break}throw Zv.error("[".concat(n,"] This browser does not support screenSharing")),new Fv(Pv.NOT_SUPPORTED,"This browser does not support screen sharing");case 55:return t.screen.mediaSource&&By(t.screen.mediaSource),v={video:{mediaSource:t.screen.mediaSource,width:t.screen.width,height:t.screen.height,frameRate:t.screen.frameRate}},Zv.debug("[".concat(n,"] getUserMedia: ").concat(JSON.stringify(v))),e.t12=AE,e.t13=o,e.next=62,navigator.mediaDevices.getUserMedia(v);case 62:e.t14=e.sent,(0,e.t12)(e.t13,e.t14);case 64:if(t.video||t.audio){e.next=66;break}return e.abrupt("return",o);case 66:if(b={video:t.video,audio:t.audio},_=lg("MEDIA_DEVICE_CONSTRAINTS"))try{"string"==typeof _&&(_=JSON.parse(_)),b=function e(t,n){if(!Fw(t)||!Fw(n))return n;if(Array.isArray(t)&&!Array.isArray(n)||!Array.isArray(t)&&Array.isArray(n))return n;if(Array.isArray(n)&&Array.isArray(t)){for(var r=g(t),i=0;i<n.length;i++)r[i]=e(t[i],n[i]);return r}var o=gw({},t);for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(Object.prototype.hasOwnProperty.call(t,a)?o[a]=e(t[a],n[a]):o[a]=n[a]);return o}(b,_)}catch(t){}if(Zv.debug("[".concat(n,"] GetUserMedia"),JSON.stringify(b)),of(),S=null,e.t15=hf()||pf()||cf(),!e.t15){e.next=75;break}return e.next=74,wE.lock();case 74:S=e.sent;case 75:return e.prev=75,e.next=78,navigator.mediaDevices.getUserMedia(b);case 78:E=e.sent,e.next=84;break;case 81:throw e.prev=81,e.t16=e.catch(75),S&&S(),e.t16;case 84:return e.abrupt("return",(b.audio&&(xE=!0),b.video&&(TE=!0),AE(o,E),S&&S(),o));case 85:case"end":return e.stop()}}),e,null,[[75,81]])}))),OE.apply(this,arguments)}function CE(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new Fv(Pv.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new Fv(Pv.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new Fv(Pv.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new Fv(Pv.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new Fv(Pv.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new Fv(Pv.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return Zv.error("getUserMedia unexpected error",e),new Fv(Pv.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function AE(e,t){var n=e.getVideoTracks()[0],r=e.getAudioTracks()[0],i=t.getVideoTracks()[0],o=t.getAudioTracks()[0];o&&(r&&e.removeTrack(r),e.addTrack(o)),i&&(n&&e.removeTrack(n),e.addTrack(i))}var NE=new(function(e){h(n,e);var t=f(n);function n(){var e;return p(this,n),e=t.call(this),Lf(l(e),"_state",Lm.IDLE),Lf(l(e),"isAccessMicrophonePermission",!1),Lf(l(e),"isAccessCameraPermission",!1),Lf(l(e),"lastAccessMicrophonePermission",!1),Lf(l(e),"lastAccessCameraPermission",!1),Lf(l(e),"checkdeviceMatched",!1),Lf(l(e),"deviceInfoMap",new Map),e.init().then((function(){navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",e.updateDevicesInfo.bind(l(e))),window.setInterval((function(){(lg("ENUMERATE_DEVICES_INTERVAL")||(Rf()||af()===Zh.HARMONY_OS)&&If())&&e.updateDevicesInfo()}),lg("ENUMERATE_DEVICES_INTERVAL_TIME"))})).catch((function(e){return Zv.error(e.toString())})),e}return v(n,[{key:"state",get:function(){return this._state},set:function(e){e!==this._state&&(this.emit(Mm.STATE_CHANGE,e),this._state=e)}},{key:"enumerateDevices",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u,l,d,h,f,p,v,g=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>2&&void 0!==g[2]&&g[2],navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){e.next=3;break}return e.abrupt("return",new Fv(Pv.NOT_SUPPORTED,"enumerateDevices() not supported.").throw());case 3:return e.next=5,navigator.mediaDevices.enumerateDevices();case 5:if(i=e.sent,o=this.checkMediaDeviceInfoIsOk(i),a=!this.isAccessMicrophonePermission&&t,s=!this.isAccessCameraPermission&&n,o.audio&&(a=!1),o.video&&(s=!1),u=null,l=null,d=null,r||!a&&!s){e.next=65;break}if(!wE.isLocked){e.next=18;break}return Zv.debug("[device manager] wait GUM lock"),e.next=15,wE.lock();case 15:e.t0=e.sent,(0,e.t0)(),Zv.debug("[device manager] GUM unlock");case 18:if(xE&&(a=!1,this.isAccessMicrophonePermission=!0),TE&&(s=!1,this.isAccessCameraPermission=!0),Zv.debug("[device manager] check media device permissions",t,n,a,s),!a||!s){e.next=34;break}return e.prev=19,e.next=22,navigator.mediaDevices.getUserMedia({audio:!0,video:!0});case 22:d=e.sent,e.next=31;break;case 25:if(e.prev=25,e.t1=e.catch(19),(h=CE(e.t1.name||e.t1.code||e.t1,e.t1.message)).code!==Pv.PERMISSION_DENIED){e.next=30;break}throw h;case 30:Zv.warning("getUserMedia failed in getDevices",h);case 31:this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0,e.next=64;break;case 34:if(!a){e.next=50;break}return e.prev=35,e.next=38,navigator.mediaDevices.getUserMedia({audio:t});case 38:u=e.sent,e.next=47;break;case 41:if(e.prev=41,e.t2=e.catch(35),(f=CE(e.t2.name||e.t2.code||e.t2,e.t2.message)).code!==Pv.PERMISSION_DENIED){e.next=46;break}throw f;case 46:Zv.warning("getUserMedia failed in getDevices",f);case 47:this.isAccessMicrophonePermission=!0,e.next=64;break;case 50:if(!s){e.next=64;break}return e.prev=51,e.next=54,navigator.mediaDevices.getUserMedia({video:n});case 54:l=e.sent,e.next=63;break;case 57:if(e.prev=57,e.t3=e.catch(51),(p=CE(e.t3.name||e.t3.code||e.t3,e.t3.message)).code!==Pv.PERMISSION_DENIED){e.next=62;break}throw p;case 62:Zv.warning("getUserMedia failed in getDevices",p);case 63:this.isAccessCameraPermission=!0;case 64:Zv.debug("[device manager] mic permission",t,"cam permission",n);case 65:return e.prev=65,e.next=68,navigator.mediaDevices.enumerateDevices();case 68:return v=e.sent,e.abrupt("return",(u&&u.getTracks().forEach((function(e){return e.stop()})),l&&l.getTracks().forEach((function(e){return e.stop()})),d&&d.getTracks().forEach((function(e){return e.stop()})),u=null,l=null,d=null,v));case 72:return e.prev=72,e.t4=e.catch(65),u&&u.getTracks().forEach((function(e){return e.stop()})),l&&l.getTracks().forEach((function(e){return e.stop()})),d&&d.getTracks().forEach((function(e){return e.stop()})),u=null,l=null,d=null,e.abrupt("return",new Fv(Pv.ENUMERATE_DEVICES_FAILED,e.t4.toString()).throw());case 76:case"end":return e.stop()}}),e,this,[[19,25],[35,41],[51,57],[65,72]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRecordingDevices",value:function(){var e=u(c().mark((function e(){var t,n=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,this.enumerateDevices(!0,!1,t);case 3:return e.abrupt("return",e.sent.filter((function(e){return"audioinput"===e.kind})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCamerasDevices",value:function(){var e=u(c().mark((function e(){var t,n=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,this.enumerateDevices(!1,!0,t);case 3:return e.abrupt("return",e.sent.filter((function(e){return"videoinput"===e.kind})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSpeakers",value:function(){var e=u(c().mark((function e(){var t,n=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,this.enumerateDevices(!0,!1,t);case 3:return e.abrupt("return",e.sent.filter((function(e){return"audiooutput"===e.kind})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"searchDeviceIdByName",value:function(e){var t=null;return this.deviceInfoMap.forEach((function(n){n.device.label===e&&(t=n.device.deviceId)})),t}},{key:"getDeviceById",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enumerateDevices(!0,!0,!0);case 2:if(n=e.sent.find((function(e){return e.deviceId===t}))){e.next=5;break}throw new Fv(Pv.DEVICE_NOT_FOUND,"deviceId: ".concat(t));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"init",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state=Lm.INITING,e.prev=1,e.next=4,this.updateDevicesInfo();case 4:this.state=Lm.INITEND,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),Zv.warning("Device Detection functionality cannot start properly.",e.t0.toString()),this.state=Lm.IDLE,("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)||new Fv(Pv.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),e.t0;case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateDevicesInfo",value:function(){var e=u(c().mark((function e(){var t,n,r,i,o,a,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enumerateDevices(!0,!0,!0);case 2:if(t=e.sent,n=Date.now(),r=[],t[0]&&t[0].label&&!1===this.checkdeviceMatched&&(this.checkdeviceMatched=!0,i=t.find((function(e){return"audioinput"===e.kind&&"default"===e.deviceId})),o=t.find((function(e){return"audiooutput"===e.kind&&"default"===e.deviceId})),i&&o?o.groupId===i.groupId?Zv.debug("[device-check] default input ".concat(i.label," and output ").concat(o.label," is the same group")):Zv.warning("[device-check] default input ".concat(i.label," and output ").concat(o.label," is not the same group")):Zv.debug("[device-check] default input or output not found")),a=this.checkMediaDeviceInfoIsOk(t),t.forEach((function(e){if(e.deviceId){var t=s.deviceInfoMap.get("".concat(e.kind,"_").concat(e.deviceId));if("ACTIVE"!==(t?t.state:"INACTIVE")){var i={initAt:n,updateAt:n,device:e,state:"ACTIVE"};s.deviceInfoMap.set("".concat(e.kind,"_").concat(e.deviceId),i),r.push(i)}t&&(t.updateAt=n)}})),this.deviceInfoMap.forEach((function(e,t){"ACTIVE"===e.state&&e.updateAt!==n&&(e.state="INACTIVE",r.push(e))})),this.state===Lm.INITEND){e.next=9;break}return e.abrupt("return",(a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0))));case 9:r.forEach((function(e){switch(e.device.kind){case"audioinput":s.lastAccessMicrophonePermission&&s.isAccessMicrophonePermission&&s.emit(Mm.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":s.lastAccessCameraPermission&&s.isAccessCameraPermission&&s.emit(Mm.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":s.lastAccessMicrophonePermission&&s.isAccessMicrophonePermission&&s.emit(Mm.PLAYOUT_DEVICE_CHANGED,e)}})),a.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),a.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"checkMediaDeviceInfoIsOk",value:function(e){var t,n=e.filter((function(e){return"audioinput"===e.kind})),r=e.filter((function(e){return"videoinput"===e.kind})),i={audio:!1,video:!1},o=s(n);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.label&&a.deviceId){i.audio=!0;break}}}catch(d){o.e(d)}finally{o.f()}var c,u=s(r);try{for(u.s();!(c=u.n()).done;){var l=c.value;if(l.label&&l.deviceId){i.video=!0;break}}}catch(d){u.e(d)}finally{u.f()}return i}}]),n}(Uv)),jE=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],DE=new(function(){function e(){var t=this;p(this,e),Lf(this,"onAutoplayFailed",void 0),Lf(this,"elementMap",new Map),Lf(this,"elementStateMap",new Map),Lf(this,"elementsNeedToResume",[]),Lf(this,"sinkIdMap",new Map),Lf(this,"autoResumeAfterInterruption",(function(){Array.from(t.elementMap.entries()).forEach((function(e){var n=a(e,2),r=n[0],i=n[1],o=t.elementStateMap.get(r),s=i.srcObject.getAudioTracks()[0];_f()?s&&"live"===s.readyState&&"running"===iE.curState&&(Zv.debug("auto resume after interruption for iOS 15"),i.pause(),i.play()):o&&"paused"===o&&s&&"live"===s.readyState&&"running"===iE.curState&&(Zv.debug("auto resume after interruption for iOS"),i.play())}))})),Lf(this,"autoResumeAfterInterruptionOnIOS15_16",(function(){Array.from(t.elementMap.entries()).forEach((function(e){var t=a(e,2),n=(t[0],t[1]),r=n.srcObject.getAudioTracks()[0];r&&"live"===r.readyState&&(Zv.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),n.pause(),n.play())}))})),this.autoResumeAudioElement(),iE.on(Z_.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),iE.on(Z_.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),iE.on(Z_.STATE_CHANGE,(function(){pf()&&"suspended"===iE.prevState&&"running"===iE.curState&&t.autoResumeAfterInterruption()}))}return v(e,[{key:"setSinkID",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.elementMap.get(t),this.sinkIdMap.set(t,n),!r){e.next=10;break}return e.prev=2,e.next=5,r.setSinkId(n);case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),new Fv(Pv.PERMISSION_DENIED,"can not set sink id: "+e.t0.toString());case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"play",value:function(e,t,n,r){var i=this;if(!this.elementMap.has(t)){var o=document.createElement("audio");o.autoplay=!0,o.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,o),this.elementMap.set(t,o),this.elementStateMap.set(t,lm.INIT),this.setVolume(t,n);var a=this.sinkIdMap.get(t);if(a)try{o.setSinkId(a).catch((function(e){Zv.warning("[".concat(t,"] set sink id failed"),e.toString())}))}catch(e){Zv.warning("[".concat(t,"] set sink id failed"),e.toString())}var s=o.play();s&&s.then&&s.catch((function(e){r&&Y_.autoplayFailed(r,"audio",e.message,t),Zv.warning("audio element play warning",e.toString()),i.elementMap.has(t)&&"NotAllowedError"===e.name&&(Zv.warning("detected audio element autoplay failed"),i.elementsNeedToResume.push(o),Aw((function(){i.onAutoplayFailed&&i.onAutoplayFailed(),B_()})))}))}}},{key:"updateTrack",value:function(e,t){var n=this.elementMap.get(e);n&&(n.srcObject=new MediaStream([t]))}},{key:"isPlaying",value:function(e){return this.elementMap.has(e)&&"playing"===this.elementStateMap.get(e)}},{key:"setVolume",value:function(e,t){var n=this.elementMap.get(e);n&&(t=Math.max(0,Math.min(100,t)),n.volume=t/100)}},{key:"stop",value:function(e){var t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),t){var n=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(n,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}}},{key:"bindAudioElementEvents",value:function(e,t){var n=this;jE.forEach((function(r){t.addEventListener(r,(function(r){var i=n.elementStateMap.get(e),o="pause"===r.type?"paused":r.type;if(Zv.debug("[".concat(e,"] audio-element-status change ").concat(i," => ").concat(o)),"error"===r.type){var a=null==t?void 0:t.error;a&&Zv.error("[".concat(e,"] media error, code: ").concat(a.code,", message: ").concat(a.message))}n.elementStateMap.set(e,o)}))}))}},{key:"getPlayerState",value:function(e){return this.elementStateMap.get(e)||"uninit"}},{key:"autoResumeAudioElement",value:function(){var e=this,t=function(){e.elementsNeedToResume.forEach((function(e){e.play().then((function(e){Zv.debug("Auto resume audio element success")})).catch((function(e){Zv.warning("Auto resume audio element failed!",e)}))})),e.elementsNeedToResume=[]};new Vd((function(e){document.body?e():window.addEventListener("load",(function(){return e()}))})).then((function(){kf()?document.body.addEventListener("click",t,!0):(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0))}))}}]),e}());function PE(){return function(e,t,n){var r=n.value;return"function"==typeof r&&(n.value=function(){this._isClosed&&new Fv(Pv.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=r.apply(this,t);return i instanceof Vd?new Vd((function(e,t){i.then(e).catch(t)})):i}),n}}var LE=hr("Array").values,ME=_o,UE=ut,VE=A,FE=LE,BE=Array.prototype,GE={DOMTokenList:!0,NodeList:!0},qE=function(e){var t=e.values;return e===BE||VE(BE,e)&&t===BE.values||UE(GE,ME(e))?FE:t};function WE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WE(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zE,KE,YE,ZE,JE,XE,QE,$E,eS,tS,nS,rS,iS,oS,aS,sS,cS,uS,lS,dS,hS,fS,pS,vS,gS,mS,yS,bS,_S,ES,SS,wS,xS,TS,IS,RS,kS,OS,CS,AS,NS,jS,DS,PS=function(e){h(n,e);var t=f(n);function n(e){var r;return p(this,n),r=t.call(this),Lf(l(r),"name","VideoProcessorDestination"),Lf(l(r),"ID","0"),Lf(l(r),"_source",void 0),Lf(l(r),"videoContext",void 0),Lf(l(r),"inputTrack",void 0),r.videoContext=e,r}return v(n,[{key:"kind",get:function(){return"video"}},{key:"enabled",get:function(){return!0}},{key:"pipe",value:function(){throw new Fv(Pv.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}},{key:"unpipe",value:function(){throw new Fv(Pv.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}},{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"updateInput",value:function(e){if(e.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(eb.ON_TRACK,e.track))}},{key:"reset",value:function(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(eb.ON_TRACK,void 0)}}]),n}(Uv),LS=function(e){h(n,e);var t=f(n);function n(e,r){var i;return p(this,n),i=t.call(this),Lf(l(i),"constraintsMap",new Map),Lf(l(i),"statsRegistry",[]),Lf(l(i),"usageRegistry",[]),Lf(l(i),"trackId",void 0),Lf(l(i),"direction",void 0),Lf(l(i),"_chained",!1),i.trackId=e,i.direction=r,i}return v(n,[{key:"chained",get:function(){return this._chained},set:function(e){this._chained=e}},{key:"getConstraints",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tw(this,tb.REQUEST_CONSTRAINTS);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"requestApplyConstraints",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(Zv.info("processor ".concat(n.name," requestApplyConstraints for ").concat(this.trackId)),t&&this.constraintsMap.set(n,t),Iw(this,tb.REQUEST_UPDATE_CONSTRAINTS,Array.from(qE(r=this.constraintsMap).call(r)))));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"requestRevertConstraints",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.constraintsMap.has(t)){e.next=2;break}return e.abrupt("return",(Zv.info("processor ".concat(t.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(t),Iw(this,tb.REQUEST_UPDATE_CONSTRAINTS,Array.from(qE(n=this.constraintsMap).call(n)))));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"registerStats",value:function(e,t,n){this.statsRegistry.find((function(n){return n.processorID===e.ID&&n.processorName===e.name&&n.type===t}))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}},{key:"unregisterStats",value:function(e,t){var n=this.statsRegistry.findIndex((function(n){return n.processorID===e.ID&&n.processorName===e.name&&n.type===t}));-1!==n&&this.statsRegistry.splice(n,1)}},{key:"gatherStats",value:function(){var e,t=[],n=s(this.statsRegistry);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.processorID,o=r.processorName,a=r.type,c=r.cb;try{var u=c();t.push({processorID:i,processorName:o,type:a,stats:u})}catch(t){Zv.error(new Fv(Pv.UNEXPECTED_ERROR,t.message))}}}catch(l){n.e(l)}finally{n.f()}return t}},{key:"registerUsage",value:function(e,t){this.usageRegistry.find((function(t){return t.processorID===e.ID&&t.processorName===e.name}))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}},{key:"unregisterUsage",value:function(e){var t=this.usageRegistry.findIndex((function(t){return t.processorID===e.ID&&t.processorName===e.name}));-1!==t&&this.usageRegistry.splice(t,1)}},{key:"gatherUsage",value:function(){var e=u(c().mark((function e(){var t,n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.chained){e.next=3;break}return e.abrupt("return",[]);case 3:n=s(this.usageRegistry),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=23;break}if(i=r.value.cb,e.prev=8,o=i(),e.t0=o instanceof Vd,!e.t0){e.next=15;break}return e.next=14,o;case 14:o=e.sent;case 15:t.push(HE(HE({},o),{},{direction:this.direction})),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(8),Zv.error("gather extension usage error",e.t1);case 21:e.next=6;break;case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(4),n.e(e.t2);case 28:return e.prev=28,n.f(),e.finish(28);case 31:return e.abrupt("return",t);case 32:case"end":return e.stop()}}),e,this,[[4,25,28,31],[8,18]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDirection",value:function(){return this.direction}}]),n}(Uv),MS=function(e){h(n,e);var t=f(n);function n(e){var r;return p(this,n),r=t.call(this),Lf(l(r),"name","AudioProcessorDestination"),Lf(l(r),"ID","0"),Lf(l(r),"inputTrack",void 0),Lf(l(r),"inputNode",void 0),Lf(l(r),"audioProcessorContext",void 0),Lf(l(r),"_source",void 0),r.audioProcessorContext=e,r}return v(n,[{key:"kind",get:function(){return"audio"}},{key:"enabled",get:function(){return!0}},{key:"pipe",value:function(){throw new Fv(Pv.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}},{key:"unpipe",value:function(){throw new Fv(Pv.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}},{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"reset",value:function(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(eb.ON_TRACK,void 0),this.emit(eb.ON_NODE,void 0)}},{key:"updateInput",value:function(e){if(e.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(eb.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(eb.ON_NODE,this.inputNode))}}]),n}(Uv),US=function(e){h(n,e);var t=f(n);function n(e,r,i){var o;return p(this,n),o=t.call(this),Lf(l(o),"constraintsMap",new Map),Lf(l(o),"statsRegistry",[]),Lf(l(o),"audioContext",void 0),Lf(l(o),"trackId",void 0),Lf(l(o),"direction",void 0),Lf(l(o),"usageRegistry",[]),Lf(l(o),"_chained",!1),o.audioContext=e,o.trackId=r,o.direction=i,o}return v(n,[{key:"chained",get:function(){return this._chained},set:function(e){this._chained=e}},{key:"getConstraints",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tw(this,tb.REQUEST_CONSTRAINTS));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAudioContext",value:function(){return this.audioContext}},{key:"requestApplyConstraints",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(Zv.info("processor ".concat(n.name," requestApplyConstraints for ").concat(this.trackId)),t&&this.constraintsMap.set(n,t),Iw(this,tb.REQUEST_UPDATE_CONSTRAINTS,Array.from(qE(r=this.constraintsMap).call(r)))));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"requestRevertConstraints",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.constraintsMap.has(t)){e.next=2;break}return e.abrupt("return",(this.constraintsMap.delete(t),Iw(this,tb.REQUEST_UPDATE_CONSTRAINTS,Array.from(qE(n=this.constraintsMap).call(n)))));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"registerStats",value:function(e,t,n){this.statsRegistry.find((function(n){return n.processorID===e.ID&&n.processorName===e.name&&n.type===t}))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}},{key:"unregisterStats",value:function(e,t){var n=this.statsRegistry.findIndex((function(n){return n.processorID===e.ID&&n.processorName===e.name&&n.type===t}));-1!==n&&this.statsRegistry.splice(n,1)}},{key:"gatherStats",value:function(){var e,t=[],n=s(this.statsRegistry);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.processorID,o=r.processorName,a=r.type,c=r.cb;try{var u=c();t.push({processorID:i,processorName:o,type:a,stats:u})}catch(t){Zv.error(new Fv(Pv.UNEXPECTED_ERROR,t.message))}}}catch(l){n.e(l)}finally{n.f()}return t}},{key:"registerUsage",value:function(e,t){this.usageRegistry.find((function(t){return t.processorID===e.ID&&t.processorName===e.name}))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}},{key:"unregisterUsage",value:function(e){var t=this.usageRegistry.findIndex((function(t){return t.processorID===e.ID&&t.processorName===e.name}));-1!==t&&this.usageRegistry.splice(t,1)}},{key:"gatherUsage",value:function(){var e=u(c().mark((function e(){var t,n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.chained){e.next=3;break}return e.abrupt("return",[]);case 3:n=s(this.usageRegistry),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=23;break}if(i=r.value.cb,e.prev=8,o=i(),e.t0=o instanceof Vd,!e.t0){e.next=15;break}return e.next=14,o;case 14:o=e.sent;case 15:t.push(HE(HE({},o),{},{direction:this.direction})),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(8),Zv.error("gather extension usage error",e.t1);case 21:e.next=6;break;case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(4),n.e(e.t2);case 28:return e.prev=28,n.f(),e.finish(28);case 31:return e.abrupt("return",t);case 32:case"end":return e.stop()}}),e,this,[[4,25,28,31],[8,18]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDirection",value:function(){return this.direction}}]),n}(Uv),VS=function(e){h(n,e);var t=f(n);function n(){var e;return p(this,n),e=t.call(this),Lf(l(e),"context",void 0),Lf(l(e),"processSourceNode",void 0),Lf(l(e),"outputTrack",void 0),Lf(l(e),"processedNode",void 0),Lf(l(e),"clonedTrack",void 0),Lf(l(e),"outputNode",void 0),e.outputNode=new FS,e}return v(n,[{key:"isPlayed",get:function(){return!0}},{key:"isFreeze",get:function(){return!1}},{key:"setVolume",value:function(){}},{key:"createOutputTrack",value:function(){throw new Fv(Pv.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}},{key:"getOriginVolumeLevel",value:function(){return 0}},{key:"getAccurateVolumeLevel",value:function(){return 0}},{key:"stopGetAudioBuffer",value:function(){}},{key:"startGetAudioBuffer",value:function(){}},{key:"play",value:function(){}},{key:"stop",value:function(){}},{key:"destroy",value:function(){}},{key:"updateTrack",value:function(){}},{key:"updateOriginTrack",value:function(){}},{key:"createMediaStreamSourceNode",value:function(){}}]),n}(Uv),FS=function(){function e(){p(this,e)}return v(e,[{key:"disconnect",value:function(){}},{key:"connect",value:function(){}}]),e}(),BS=null,GS=function(){function e(){var t=this;p(this,e),Lf(this,"state","open"),Lf(this,"trigger",void 0),Lf(this,"tasks",[]),Zv.debug("[macro-task-queue] is created."),this.trigger=setTimeout((function(){t.state="closed",Zv.debug("[macro-task-queue] will be closed, all remaining tasks will execute. [".concat(t.tasks.map((function(e){return e.key})),"]")),t.trigger=void 0,t.tasks.forEach((function(e){return(0,e.func)()})),t.tasks.length=0,Zv.debug("[macro-task-queue] is closed.")}))}return v(e,[{key:"enqueue",value:function(e,t){"closed"!==this.state&&(this.tasks.push({key:e,func:t}),Zv.debug("[macro-task-queue] is queued, current queue ".concat(this.tasks.length,". ").concat("string"==typeof e?e:"")))}},{key:"runTask",value:function(e){if("closed"!==this.state){var t=this.tasks.findIndex((function(t){return t.key===e}));if(-1!==t){var n=this.tasks.splice(t,1);Zv.debug("[macro-task-queue] is unqueued, current queue ".concat(this.tasks.length,". ").concat("string"==typeof e?e:"")),n[0].func()}}}},{key:"release",value:function(){this.trigger&&(this.state="closed",clearTimeout(this.trigger),this.trigger=void 0,this.tasks.length=0,Zv.debug("[macro-task-queue] is closed."))}}]),e}();function qS(e){return function(t,n,r){var i,o=null!==(i=r.value)&&void 0!==i?i:r.get,a=function(){BS&&"open"===BS.state&&BS.runTask(e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return null==o?void 0:o.apply.apply(o,[this].concat(n))};return r.value?r.value=a:r.get=a,r}}function WS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WS(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.UPDATE_TRACK_SOURCE="update-track-source"}(zE||(zE={}));var zS=(KE=qS("INIT_WEBAUDIO"),YE=qS("INIT_WEBAUDIO"),ZE=qS("INIT_WEBAUDIO"),JE=K_({argsMap:function(e,t){return[e.getTrackId(),t]},throttleTime:300}),XE=K_({argsMap:function(e,t){return[e.getTrackId(),t]}}),QE=PE(),$E=$_("LocalAudioTrack","_enabledMutex"),eS=K_({argsMap:function(e,t){return[e.getTrackId(),t]}}),tS=PE(),nS=$_("LocalAudioTrack","_enabledMutex"),rS=K_({argsMap:function(e,t){return[e.getTrackId(),t]}}),iS=PE(),oS=PE(),aS=PE(),sS=K_({argsMap:function(e){return[e.getTrackId()]}}),cS=PE(),uS=K_({argsMap:function(e){return[e.getTrackId()]}}),lS=PE(),dS=K_({argsMap:function(e){return[e.getTrackId()]}}),hS=K_({argsMap:function(e,t){return[e.getTrackId(),t.name]}}),fS=K_({argsMap:function(e){return[e.getTrackId()]}}),x_((pS=function(e){h(n,e);var t=f(n);function n(e,r,i,o,a){var s;p(this,n),s=t.call(this,e,i),Lf(l(s),"trackMediaType","audio"),Lf(l(s),"_encoderConfig",void 0),Lf(l(s),"_trackSource",void 0),Lf(l(s),"_enabled",!0),Lf(l(s),"_volume",100),Lf(l(s),"_useAudioElement",!1),Lf(l(s),"_bypassWebAudio",!1),Lf(l(s),"processor",void 0),Lf(l(s),"_processorContext",void 0),Lf(l(s),"_processorDestination",void 0),Lf(l(s),"_getOriginVolumeLevel",void 0),s._encoderConfig=r,s._getOriginVolumeLevel=!!o;var c=function(){s.processorContext=new US(s._source.context,s.getTrackId(),"local"),s.processorDestination=new MS(s.processorContext),s.bindProcessorDestinationEvents(),s._source.on($m.UPDATE_SOURCE,(function(){s.processor&&s.processor.updateInput({node:s._source.processSourceNode,context:s.processorContext})}))},u=a&&hf()&&!sE();return lg("DISABLE_WEBAUDIO")?(s._source=new VS,s._useAudioElement=!0,s._bypassWebAudio=!0):u?s._source=new VS:(s._source=new fE(e,!1,s._getOriginVolumeLevel?e:void 0),lg("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(s._useAudioElement=!0)),c(),!lg("DISABLE_WEBAUDIO")&&u&&(BS||(BS=new GS),BS).enqueue("INIT_WEBAUDIO",(function(){s._source=new fE(e,!1,s._getOriginVolumeLevel?e:void 0),lg("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")||(s._useAudioElement=!0),c(),s.emit(zE.UPDATE_TRACK_SOURCE)})),s}return v(n,[{key:"_source",get:function(){return this._trackSource},set:function(e){this._trackSource=e}},{key:"processorContext",get:function(){return this._processorContext},set:function(e){this._processorContext=e}},{key:"processorDestination",get:function(){return this._processorDestination},set:function(e){this._processorDestination=e}},{key:"isPlaying",get:function(){return this._useAudioElement?DE.isPlaying(this.getTrackId()):this._source.isPlayed}},{key:"__className__",get:function(){return"LocalAudioTrack"}},{key:"setVolume",value:function(e){var t=this;ym(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&DE.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void Zv.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));var n=this._source.createOutputTrack();this._mediaStreamTrack!==n&&(this._mediaStreamTrack=n,Iw(this,Oy.NEED_REPLACE_TRACK,this).then((function(){Zv.debug("[".concat(t.getTrackId(),"] replace web audio track success"))})).catch((function(e){Zv.warning("[".concat(t.getTrackId(),"] replace web audio track failed"),e)})))}catch(e){}}},{key:"getVolumeLevel",value:function(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}},{key:"setPlaybackDevice",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._useAudioElement){e.next=2;break}throw new Fv(Pv.NOT_SUPPORTED,"your browser does not support setting the audio output device");case 2:return e.next=4,DE.setSinkID(this.getTrackId(),t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setEnabled",value:function(){var e=u(c().mark((function e(t,n,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._setEnabled(t,n,r));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"_setEnabled",value:function(){var e=u(c().mark((function e(t,n,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}if(t!==this._enabled){e.next=3;break}return e.abrupt("return");case 3:this.stateCheck("enabled",t);case 4:if(Zv.info("[".concat(this.getTrackId(),"] start setEnabled"),t),!t){e.next=18;break}return this._originMediaStreamTrack.enabled=!0,e.prev=6,r||(this._enabled=!0),e.next=10,Iw(this,Oy.NEED_ENABLE_TRACK,this);case 10:Zv.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(t," success")),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(6),r||(this._enabled=!1),Zv.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.t0.toString()),e.t0;case 16:e.next=27;break;case 18:return this._originMediaStreamTrack.enabled=!1,r||(this._enabled=!1),e.prev=19,e.next=22,Iw(this,Oy.NEED_DISABLE_TRACK,this);case 22:e.next=27;break;case 24:throw e.prev=24,e.t1=e.catch(19),r||(this._enabled=!0),Zv.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.t1.toString()),e.t1;case 27:case"end":return e.stop()}}),e,this,[[6,13],[19,24]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"setMuted",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t!==this._muted,!e.t0){e.next=13;break}if(this.stateCheck("muted",t),this._muted=t,this._originMediaStreamTrack.enabled=!t,Zv.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(t)),!t){e.next=11;break}return e.next=9,Iw(this,Oy.NEED_MUTE_TRACK,this);case 9:e.next=13;break;case 11:return e.next=13,Iw(this,Oy.NEED_UNMUTE_TRACK,this);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getStats",value:function(){return Dw((function(){Zv.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")}),"localAudioTrackGetStatsWarning"),Rw(this,Oy.GET_STATS)||HS({},uy)}},{key:"setAudioFrameCallback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners($m.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners($m.ON_AUDIO_BUFFER),this._source.on($m.ON_AUDIO_BUFFER,(function(t){return e(t)}))}},{key:"play",value:function(){Zv.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(Zv.debug("[".concat(this.getTrackId(),"] start audio playback in element")),DE.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}},{key:"stop",value:function(){Zv.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?DE.stop(this.getTrackId()):this._source.stop()}},{key:"close",value:function(){i(o(n.prototype),"close",this).call(this),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe(),this._source.destroy()}},{key:"_updatePlayerSource",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Zv.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&DE.updateTrack(this.getTrackId(),this._mediaStreamTrack)}},{key:"_updateOriginMediaStreamTrack",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._originMediaStreamTrack!==t,!e.t0){e.next=17;break}if(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t.addEventListener("ended",this._handleTrackEnded),n&&this._originMediaStreamTrack.stop(),this._originMediaStreamTrack=t,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this.processor.updateInput({track:t,context:this.processorContext}),this._mediaStreamTrack===this._source.outputTrack){e.next=15;break}return this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),e.next=13,Iw(this,Oy.NEED_REPLACE_TRACK,this);case 13:e.next=16;break;case 15:this._source.updateTrack(this._originMediaStreamTrack);case 16:this._getOriginVolumeLevel&&this._source.updateOriginTrack(t);case 17:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"renewMediaStreamTrack",value:function(e){return Vd.resolve(void 0)}},{key:"pipe",value:function(e){if(this._bypassWebAudio)throw new Fv(Pv.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new Fv(Pv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}},{key:"unpipe",value:function(){var e;if(this.processor){var t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}}},{key:"bindProcessorDestinationEvents",value:function(){var e=this;this.processorDestination.on(eb.ON_TRACK,function(){var t=u(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=10;break}if(t.t0=n!==e._mediaStreamTrack,!t.t0){t.next=8;break}return e._mediaStreamTrack=n,e._updatePlayerSource(!1),e._source.processedNode=e._source.createMediaStreamSourceNode(n),t.next=8,Iw(e,Oy.NEED_REPLACE_TRACK,e);case 8:t.next=16;break;case 10:if(t.t1=e._mediaStreamTrack!==e._originMediaStreamTrack,!t.t1){t.next=16;break}return e._mediaStreamTrack=e._originMediaStreamTrack,e._updatePlayerSource(),t.next=16,Iw(e,Oy.NEED_REPLACE_TRACK,e);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.processorDestination.on(eb.ON_NODE,(function(t){e._source.processedNode=t}))}},{key:"unbindProcessorDestinationEvents",value:function(){this.processorDestination.removeAllListeners(eb.ON_TRACK),this.processorDestination.removeAllListeners(eb.ON_NODE)}},{key:"unbindProcessorContextEvents",value:function(){this.processorContext.removeAllListeners(tb.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(tb.REQUEST_CONSTRAINTS)}}]),n}(eE)).prototype,"_source",[KE],Object.getOwnPropertyDescriptor(pS.prototype,"_source"),pS.prototype),x_(pS.prototype,"processorContext",[YE],Object.getOwnPropertyDescriptor(pS.prototype,"processorContext"),pS.prototype),x_(pS.prototype,"processorDestination",[ZE],Object.getOwnPropertyDescriptor(pS.prototype,"processorDestination"),pS.prototype),x_(pS.prototype,"setVolume",[JE],Object.getOwnPropertyDescriptor(pS.prototype,"setVolume"),pS.prototype),x_(pS.prototype,"setPlaybackDevice",[XE,QE],Object.getOwnPropertyDescriptor(pS.prototype,"setPlaybackDevice"),pS.prototype),x_(pS.prototype,"setEnabled",[$E,eS,tS],Object.getOwnPropertyDescriptor(pS.prototype,"setEnabled"),pS.prototype),x_(pS.prototype,"setMuted",[nS,rS,iS],Object.getOwnPropertyDescriptor(pS.prototype,"setMuted"),pS.prototype),x_(pS.prototype,"getStats",[oS],Object.getOwnPropertyDescriptor(pS.prototype,"getStats"),pS.prototype),x_(pS.prototype,"setAudioFrameCallback",[aS],Object.getOwnPropertyDescriptor(pS.prototype,"setAudioFrameCallback"),pS.prototype),x_(pS.prototype,"play",[sS,cS],Object.getOwnPropertyDescriptor(pS.prototype,"play"),pS.prototype),x_(pS.prototype,"stop",[uS,lS],Object.getOwnPropertyDescriptor(pS.prototype,"stop"),pS.prototype),x_(pS.prototype,"close",[dS],Object.getOwnPropertyDescriptor(pS.prototype,"close"),pS.prototype),x_(pS.prototype,"pipe",[hS],Object.getOwnPropertyDescriptor(pS.prototype,"pipe"),pS.prototype),x_(pS.prototype,"unpipe",[fS],Object.getOwnPropertyDescriptor(pS.prototype,"unpipe"),pS.prototype),pS),KS=(vS=K_({argsMap:function(e,t){return[e.getTrackId(),t]}}),gS=PE(),mS=$_("MicrophoneAudioTrack","_enabledMutex"),yS=K_({argsMap:function(e,t,n){return[e.getTrackId(),t,n]}}),bS=PE(),_S=K_({argsMap:function(e){return[e.getTrackId()]}}),x_((ES=function(e){h(n,e);var t=f(n);function n(e,r,i,o){var a;return p(this,n),a=t.call(this,e,r.encoderConfig?cg(r.encoderConfig):{},o,lg("GET_VOLUME_OF_MUTED_AUDIO_TRACK"),!0),Lf(l(a),"_config",void 0),Lf(l(a),"_deviceName","default"),Lf(l(a),"_constraints",void 0),Lf(l(a),"_originalConstraints",void 0),Lf(l(a),"_enabled",!0),a._config=r,a._constraints=i,a._originalConstraints=i,a._deviceName=e.label,"boolean"==typeof r.bypassWebAudio&&(a._bypassWebAudio=r.bypassWebAudio),(_f()||Ef())&&iE.bindInterruptDetectorTrack(l(a)),a.on(zE.UPDATE_TRACK_SOURCE,(function(){a.bindProcessorContextEvents()})),sE()&&a.bindProcessorContextEvents(),a}return v(n,[{key:"__className__",get:function(){return"MicrophoneAudioTrack"}},{key:"setDevice",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zv.info("[".concat(this.getTrackId(),"] start set device to ").concat(t)),!this._enabled){e.next=35;break}return e.prev=1,e.next=4,NE.getDeviceById(t);case 4:return n=e.sent,(r={}).audio=HS({},this._constraints),r.audio.deviceId={exact:t},this._originMediaStreamTrack.stop(),i=null,e.prev=8,e.next=11,IE(r,this.getTrackId());case 11:i=e.sent,e.next=23;break;case 14:return e.prev=14,e.t0=e.catch(8),Zv.error("[".concat(this.getTrackId(),"] setDevice failed"),e.t0.toString()),e.next=19,IE({audio:this._constraints},this.getTrackId());case 19:return i=e.sent,e.next=22,this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!1);case 22:throw e.t0;case 23:return e.next=25,this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!1);case 25:this._deviceName=n.label,this._config.microphoneId=t,this._constraints.deviceId={exact:t},e.next=33;break;case 30:throw e.prev=30,e.t1=e.catch(1),Zv.error("[".concat(this.getTrackId(),"] setDevice error"),e.t1.toString()),e.t1;case 33:e.next=45;break;case 35:return e.prev=35,e.next=38,NE.getDeviceById(t);case 38:o=e.sent,this._deviceName=o.label,this._config.microphoneId=t,this._constraints.deviceId={exact:t},e.next=45;break;case 42:throw e.prev=42,e.t2=e.catch(35),Zv.error("[".concat(this.getTrackId(),"] setDevice error"),e.t2.toString()),e.t2;case 45:Zv.info("[".concat(this.getTrackId(),"] set device to ").concat(t," success"));case 46:case"end":return e.stop()}}),e,this,[[1,30],[8,14],[35,42]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setEnabled",value:function(){var e=u(c().mark((function e(t,r,a){var s,u,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return Zv.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),e.next=4,i(o(n.prototype),"_setEnabled",this).call(this,t);case 4:return e.abrupt("return",e.sent);case 5:if(a){e.next=9;break}if(t!==this._enabled){e.next=8;break}return e.abrupt("return");case 8:this.stateCheck("enabled",t);case 9:if(Zv.info("[".concat(this.getTrackId(),"] start setEnabled"),t),t){e.next=20;break}return this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),null===(s=this._source.clonedTrack)||void 0===s||s.stop(),a||(this._enabled=!1),e.prev=11,e.next=14,Iw(this,Oy.NEED_DISABLE_TRACK,this);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(11),Zv.error("[".concat(this.getTrackId(),"] setEnabled false failed"),e.t0.toString()),e.t0;case 19:return e.abrupt("return");case 20:return u=HS({},this._constraints),(l=NE.searchDeviceIdByName(this._deviceName))&&!u.deviceId&&(u.deviceId=l),e.prev=22,a||(this._enabled=!0),e.next=26,IE({audio:this._constraints},this.getTrackId());case 26:return d=e.sent,e.next=29,this._updateOriginMediaStreamTrack(d.getAudioTracks()[0],!1);case 29:return e.next=31,Iw(this,Oy.NEED_ENABLE_TRACK,this);case 31:e.next=36;break;case 33:throw e.prev=33,e.t1=e.catch(22),a||(this._enabled=!1),Zv.error("[".concat(this.getTrackId(),"] setEnabled true failed"),e.t1.toString()),e.t1;case 36:Zv.info("[".concat(this.getTrackId(),"] setEnabled success"));case 37:case"end":return e.stop()}}),e,this,[[11,16],[22,33]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){i(o(n.prototype),"close",this).call(this),(_f()||Ef())&&iE.unbindInterruptDetectorTrack(this)}},{key:"onTrackEnded",value:function(){var e=this;if((pf()||wf())&&this._enabled&&!this._isClosed&&iE.duringInterruption){var t=function(){var n=u(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(iE.off(Z_.IOS_INTERRUPTION_END,t),n.t0=e._enabled&&!e._isClosed,!n.t0){n.next=8;break}return Zv.debug("[".concat(e.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),n.next=6,e.setEnabled(!1);case 6:return n.next=8,e.setEnabled(!0);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();iE.on(Z_.IOS_INTERRUPTION_END,t)}else Zv.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Py.TRACK_ENDED)}},{key:"renewMediaStreamTrack",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t||this._constraints,(r=NE.searchDeviceIdByName(this._deviceName))&&!n.deviceId&&(n.deviceId=r),this._constraints=n,!this._enabled){e.next=8;break}return this._originMediaStreamTrack.stop(),e.next=5,IE({audio:this._constraints},this.getTrackId());case 5:return i=e.sent,e.next=8,this._updateOriginMediaStreamTrack(i.getAudioTracks()[0],!0);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"bindProcessorContextEvents",value:function(){var e=this;this.processorContext.on(tb.REQUEST_UPDATE_CONSTRAINTS,function(){var t=u(c().mark((function t(n,r,i){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=Object.assign.apply(Object,[{},e._originalConstraints].concat(g(n))),t.next=4,e.renewMediaStreamTrack(o);case 4:r(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this.processorContext.on(tb.REQUEST_CONSTRAINTS,function(){var t=u(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(e._originMediaStreamTrack.getSettings());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}]),n}(zS)).prototype,"setDevice",[vS,gS],Object.getOwnPropertyDescriptor(ES.prototype,"setDevice"),ES.prototype),x_(ES.prototype,"setEnabled",[mS,yS,bS],Object.getOwnPropertyDescriptor(ES.prototype,"setEnabled"),ES.prototype),x_(ES.prototype,"close",[_S],Object.getOwnPropertyDescriptor(ES.prototype,"close"),ES.prototype),ES),YS=(SS=K_({argsMap:function(e,t){return[e.getTrackId(),t,e.duration]}}),wS=PE(),xS=K_({argsMap:function(e){return[e.getTrackId()]}}),TS=PE(),IS=K_({argsMap:function(e){return[e.getTrackId()]}}),RS=PE(),kS=K_({argsMap:function(e){return[e.getTrackId()]}}),OS=PE(),CS=K_({argsMap:function(e){return[e.getTrackId()]}}),AS=PE(),NS=K_({argsMap:function(e){return[e.getTrackId()]}}),jS=PE(),x_((DS=function(e){h(n,e);var t=f(n);function n(e,r,i,o){var a;p(this,n),a=t.call(this,r.createOutputTrack(),i,o),Lf(l(a),"source",void 0),Lf(l(a),"_bufferSource",void 0),a.source=e,a._bufferSource=r,a._bufferSource.on($m.AUDIO_SOURCE_STATE_CHANGE,(function(e){a.emit(Py.SOURCE_STATE_CHANGE,e)}));try{a._mediaStreamTrack=a._source.createOutputTrack()}catch(e){}return a}return v(n,[{key:"__className__",get:function(){return"BufferSourceAudioTrack"}},{key:"currentState",get:function(){return this._bufferSource.currentState}},{key:"duration",get:function(){return this._bufferSource.duration}},{key:"playbackSpeed",get:function(){return this._bufferSource.playbackSpeed}},{key:"getCurrentTime",value:function(){return this._bufferSource.currentTime}},{key:"startProcessAudioBuffer",value:function(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}},{key:"pauseProcessAudioBuffer",value:function(){this._bufferSource.pauseProcessAudioBuffer()}},{key:"seekAudioBuffer",value:function(e){this._bufferSource.seekAudioBuffer(e)}},{key:"resumeProcessAudioBuffer",value:function(){this._bufferSource.resumeProcessAudioBuffer()}},{key:"stopProcessAudioBuffer",value:function(){this._bufferSource.stopProcessAudioBuffer()}},{key:"setAudioBufferPlaybackSpeed",value:function(e){ym(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}]),n}(zS)).prototype,"startProcessAudioBuffer",[SS,wS],Object.getOwnPropertyDescriptor(DS.prototype,"startProcessAudioBuffer"),DS.prototype),x_(DS.prototype,"pauseProcessAudioBuffer",[xS,TS],Object.getOwnPropertyDescriptor(DS.prototype,"pauseProcessAudioBuffer"),DS.prototype),x_(DS.prototype,"seekAudioBuffer",[IS,RS],Object.getOwnPropertyDescriptor(DS.prototype,"seekAudioBuffer"),DS.prototype),x_(DS.prototype,"resumeProcessAudioBuffer",[kS,OS],Object.getOwnPropertyDescriptor(DS.prototype,"resumeProcessAudioBuffer"),DS.prototype),x_(DS.prototype,"stopProcessAudioBuffer",[CS,AS],Object.getOwnPropertyDescriptor(DS.prototype,"stopProcessAudioBuffer"),DS.prototype),x_(DS.prototype,"setAudioBufferPlaybackSpeed",[NS,jS],Object.getOwnPropertyDescriptor(DS.prototype,"setAudioBufferPlaybackSpeed"),DS.prototype),DS),ZS=function(e){h(n,e);var t=f(n);function n(){var e;p(this,n);var r=aE().createMediaStreamDestination();e=t.call(this,r.stream.getAudioTracks()[0],void 0,_w(8,"track-mix-")),Lf(l(e),"trackList",void 0),Lf(l(e),"destNode",void 0);try{e._mediaStreamTrack=e._source.createOutputTrack()}catch(r){}return e.destNode=r,e.trackList=[],e}return v(n,[{key:"__className__",get:function(){return"MixingAudioTrack"}},{key:"isActive",get:function(){var e,t=s(this.trackList);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n._enabled&&!n._isClosed&&!n.muted)return!0}}catch(r){t.e(r)}finally{t.f()}return!1}},{key:"hasAudioTrack",value:function(e){return-1!==this.trackList.indexOf(e)}},{key:"addAudioTrack",value:function(e){-1===this.trackList.indexOf(e)?(Zv.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):Zv.debug("track ".concat(e.getTrackId()," is already added"))}},{key:"removeAudioTrack",value:function(e){if(-1!==this.trackList.indexOf(e)){Zv.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(e){}Ow(this.trackList,e),this.updateEncoderConfig()}}},{key:"updateEncoderConfig",value:function(){var e={};this.trackList.forEach((function(t){t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))})),this._encoderConfig=e}},{key:"_updateRtpTransceiver",value:function(e){this._rtpTransceiver!==e&&(this._rtpTransceiver=e,this.trackList.forEach((function(t){t instanceof n?t.emit(Dy.TRANSCEIVER_UPDATED,e):t._updateRtpTransceiver(e)})))}}]),n}(zS),JS=function(e){h(n,e);var t=f(n);function n(){var e;return p(this,n),e=t.apply(this,arguments),Lf(l(e),"resultStorage",new Map),e}return v(n,[{key:"setLocalAudioStats",value:function(e,t,n){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(n,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(n,t))}},{key:"setLocalVideoStats",value:function(e,t,n){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(n,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(n,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(n))}},{key:"setRemoteAudioStats",value:function(e,t){var n=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",n,this.checkAudioOutputLevel(t))}},{key:"setRemoteVideoStats",value:function(e,t){var n=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",n,this.checkVideoDecode(t))}},{key:"record",value:function(e,t,n){this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});var r=this.resultStorage.get(e);if(r&&(r.result.push(n),r.result.length>=5)){var i=r.result.includes(!0);r.isPrevNormal&&!i&&this.emit("exception",XS[e],e,t),!r.isPrevNormal&&i&&this.emit("exception",XS[e]+2e3,e+"_RECOVER",t),r.isPrevNormal=i,r.result=[]}}},{key:"checkAudioOutputLevel",value:function(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}},{key:"checkAudioInputLevel",value:function(e,t){return t instanceof ZS&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}},{key:"checkFramerateInput",value:function(e,t){var n=null;t._encoderConfig&&t._encoderConfig.frameRate&&(n=sw(t._encoderConfig.frameRate));var r=e.captureFrameRate;return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)}},{key:"checkFramerateSent",value:function(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}},{key:"checkSendVideoBitrate",value:function(e,t){return!!t.muted||0!==e.sendBitrate}},{key:"checkSendAudioBitrate",value:function(e,t){return t instanceof ZS&&!t.isActive||!!t.muted||0!==e.sendBitrate}},{key:"checkVideoDecode",value:function(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}]),n}(Uv),XS={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},QS=new(function(){function e(){p(this,e)}return v(e,[{key:"markSubscribeStart",value:function(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}},{key:"markPublishStart",value:function(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}},{key:"measureFromSubscribeStart",value:function(e,t){var n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(n.length>0){var r=n[n.length-1];return Math.round(performance.now()-r.startTime)}return 0}},{key:"measureFromPublishStart",value:function(e,t){var n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(n.length>0){var r=n[n.length-1];return Math.round(performance.now()-r.startTime)}return 0}}]),e}());function $S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ew(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$S(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tw=function(){function e(t){var n=this;p(this,e),Lf(this,"store",void 0),Lf(this,"onStatsException",void 0),Lf(this,"onUploadPublishDuration",void 0),Lf(this,"onStatsChanged",void 0),Lf(this,"localStats",new Map),Lf(this,"remoteStats",new Map),Lf(this,"updateStatsInterval",void 0),Lf(this,"trafficStats",void 0),Lf(this,"trafficStatsPeerList",[]),Lf(this,"uplinkStats",void 0),Lf(this,"exceptionMonitor",void 0),Lf(this,"p2pChannel",void 0),Lf(this,"scalabilityMode",$h.L1T1),Lf(this,"updateStats",(function(){n.p2pChannel&&(n.updateRemoteStats(n.p2pChannel),n.updateLocalStats(n.p2pChannel))})),this.store=t,this.updateStatsInterval=window.setInterval(this.updateStats,1e3),this.exceptionMonitor=new JS,this.exceptionMonitor.on("exception",(function(e,t,r){n.onStatsException&&n.onStatsException(e,t,r)}))}return v(e,[{key:"reset",value:function(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}},{key:"getLocalAudioTrackStats",value:function(){return this.localStats.get(Zy.LocalAudioTrack)||ew({},uy)}},{key:"getLocalVideoTrackStats",value:function(){return this.localStats.get(Zy.LocalVideoTrack)||ew({},ly)}},{key:"getRemoteAudioTrackStats",value:function(e){var t=this,n=function(e,n){if(!t.trafficStats)return n;var r=t.trafficStats.peer_delay.find((function(t){return t.peer_uid===e}));return r&&(n.publishDuration=r.B_ppad+(Date.now()-t.trafficStats.timestamp)),n},r={};if(e){var i,o=null===(i=this.remoteStats.get(e))||void 0===i?void 0:i.audioStats;o&&(r[e]=n(e,o))}else Array.from(this.remoteStats.entries()).forEach((function(e){var t=a(e,2),i=t[0],o=t[1].audioStats;o&&(r[i]=n(i,o))}));return r}},{key:"getRemoteNetworkQualityStats",value:function(e){var t={};if(e){var n,r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.networkStats;r&&(t[e]=r)}else Array.from(this.remoteStats.entries()).forEach((function(e){var n=a(e,2),r=n[0],i=n[1].networkStats;i&&(t[r]=i)}));return t}},{key:"getRemoteVideoTrackStats",value:function(e){var t=this,n=function(e,n){if(!t.trafficStats)return n;var r=t.trafficStats.peer_delay.find((function(t){return t.peer_uid===e}));return r&&(n.publishDuration=r.B_ppvd+(Date.now()-t.trafficStats.timestamp)),n},r={};if(e){var i,o=null===(i=this.remoteStats.get(e))||void 0===i?void 0:i.videoStats;o&&(r[e]=n(e,o))}else Array.from(this.remoteStats.entries()).forEach((function(e){var t=a(e,2),i=t[0],o=t[1].videoStats;o&&(r[i]=n(i,o))}));return r}},{key:"getRTCStats",value:function(){var e=0,t=0,n=0,r=0,i=this.localStats.get(Zy.LocalAudioTrack);i&&(e+=i.sendBytes,t+=i.sendBitrate);var o=this.localStats.get(Zy.LocalVideoTrack);o&&(e+=o.sendBytes,t+=o.sendBitrate);var a=this.localStats.get(Zy.LocalVideoLowTrack);a&&(e+=a.sendBytes,t+=a.sendBitrate),this.remoteStats.forEach((function(e){var t=e.audioStats,i=e.videoStats;t&&(n+=t.receiveBytes,r+=t.receiveBitrate),i&&(n+=i.receiveBytes,r+=i.receiveBitrate)}));var s=1;return this.trafficStats&&(s+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:s,SendBitrate:t,SendBytes:e,RecvBytes:n,RecvBitrate:r,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}},{key:"addLocalStats",value:function(e){this.localStats.set(e,void 0)}},{key:"removeLocalStats",value:function(e){e?this.localStats.delete(e):this.localStats.clear()}},{key:"addRemoteStats",value:function(e){this.remoteStats.set(e,{})}},{key:"removeRemoteStats",value:function(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}},{key:"addP2PChannel",value:function(e){this.p2pChannel=e}},{key:"updateTrafficStats",value:function(e){var t=this;e.peer_delay=e.peer_delay.filter((function(e){return void 0!==e.B_ppad||void 0!==e.B_ppvd})),e.peer_delay.filter((function(e){return-1===t.trafficStatsPeerList.indexOf(e.peer_uid)})).forEach((function(e){var n,r=null===(n=t.p2pChannel)||void 0===n?void 0:n.getRemoteMedia(e.peer_uid),i=null!=r&&r.videoSSRC?QS.measureFromSubscribeStart(t.store.clientId,r.videoSSRC):0,o=null!=r&&r.audioSSRC?QS.measureFromSubscribeStart(t.store.clientId,r.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(t.onUploadPublishDuration&&t.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,i>o?i:o),t.trafficStatsPeerList.push(e.peer_uid))})),this.trafficStats=e}},{key:"updateUplinkStats",value:function(e){this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&Zv.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(e.B_fir)),this.uplinkStats=e}},{key:"isLocalVideoFreeze",value:function(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3}},{key:"updateLocalStats",value:function(e){var t=this;Array.from(this.localStats.entries()).forEach((function(n){var r=a(n,2),i=r[0],o=r[1];switch(i){case Zy.LocalVideoTrack:case Zy.LocalVideoLowTrack:var s,c=o,u=ew({},ly),l=e.getStats(),d=e.getLocalMedia(i);if(l){var h=l.videoSend.find((function(e){return e.ssrc===(null==d?void 0:d.ssrcs[0].ssrcId)}));if(h){var f=e.getLocalVideoSize(),p=e.getEncoderConfig(Zy.LocalVideoTrack);"H264"!==h.codec&&"H265"!==h.codec&&"VP8"!==h.codec&&"VP9"!==h.codec&&"AV1X"!==h.codec&&"AV1"!==h.codec||(u.codecType=h.codec),u.sendBytes=h.bytes,u.sendBitrate=c?8*Math.max(0,u.sendBytes-c.sendBytes):0,h.inputFrame?(u.captureFrameRate=h.inputFrame.frameRate,u.captureResolutionHeight=h.inputFrame.height,u.captureResolutionWidth=h.inputFrame.width):f&&(u.captureResolutionWidth=f.width,u.captureResolutionHeight=f.height),h.sentFrame?(u.sendFrameRate=h.sentFrame.frameRate,u.sendResolutionHeight=h.sentFrame.height,u.sendResolutionWidth=h.sentFrame.width):f&&(u.sendResolutionWidth=f.width,u.sendResolutionHeight=f.height),h.avgEncodeMs&&(u.encodeDelay=h.avgEncodeMs),p&&p.bitrateMax&&(u.targetSendBitrate=1e3*p.bitrateMax),u.sendPackets=h.packets,u.sendPacketsLost=h.packetsLost,u.totalDuration=c?c.totalDuration+1:1,u.totalFreezeTime=c?c.totalFreezeTime:0,t.isLocalVideoFreeze(h)&&(u.totalFreezeTime+=1),h.scalabilityMode&&t.scalabilityMode!==h.scalabilityMode&&(Zv.debug("[".concat(t.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(h.scalabilityMode)),t.scalabilityMode=h.scalabilityMode)}t.trafficStats&&(u.sendPacketsLost=t.trafficStats.B_pvlr4/100)}t.localStats.set(i,u),((null==c?void 0:c.sendResolutionWidth)!==u.sendResolutionWidth||(null==c?void 0:c.sendResolutionHeight)!==u.sendResolutionHeight)&&(null===(s=t.onStatsChanged)||void 0===s||s.call(t,"resolution",{width:u.sendResolutionWidth,height:u.sendResolutionHeight})),u&&d&&t.exceptionMonitor.setLocalVideoStats(t.store.uid,d.track,u);break;case Zy.LocalAudioTrack:var v=o,g=ew({},uy),m=e.getStats(),y=e.getLocalMedia(i);if(m){var b=m.audioSend.find((function(e){return e.ssrc===(null==y?void 0:y.ssrcs[0].ssrcId)}));if(b){if("opus"!==b.codec&&"aac"!==b.codec&&"PCMU"!==b.codec&&"PCMA"!==b.codec&&"G722"!==b.codec||(g.codecType=b.codec),b.inputLevel)g.sendVolumeLevel=Math.round(32767*b.inputLevel);else{var _=e.getLocalAudioVolume();_&&(g.sendVolumeLevel=Math.round(32767*_))}g.sendBytes=b.bytes,g.sendPackets=b.packets,g.sendPacketsLost=b.packetsLost,g.sendBitrate=v?8*Math.max(0,g.sendBytes-v.sendBytes):0}}t.trafficStats&&(g.sendPacketsLost=t.trafficStats.B_pvlr4/100),t.localStats.set(Zy.LocalAudioTrack,g),g&&y&&t.exceptionMonitor.setLocalAudioStats(t.store.uid,y.track,g)}}))}},{key:"updateRemoteStats",value:function(t){var n=this;Array.from(this.remoteStats.entries()).forEach((function(r){var i=a(r,2),o=i[0],s=i[1],c=s.videoStats,u=s.audioStats,l=c,d=s.videoPcStats,h=ew({},dy),f=ew({},fy),p=ew({},hy),v=t.getRemoteMedia(o),g=v.audioTrack,m=v.videoTrack,y=v.audioSSRC,b=v.videoSSRC,_=t.getStats(),E=null==_?void 0:_.audioRecv.find((function(e){return e.ssrc===y})),S=null==_?void 0:_.videoRecv.find((function(e){return e.ssrc===b})),w=n.trafficStats&&n.trafficStats.peer_delay.find((function(e){return e.peer_uid===o}));if(E&&("opus"!==E.codec&&"aac"!==E.codec&&"PCMU"!==E.codec&&"PCMA"!==E.codec&&"G722"!==E.codec||(h.codecType=E.codec),E.outputLevel?h.receiveLevel=Math.round(32767*E.outputLevel):g&&(h.receiveLevel=Math.round(32767*g.getVolumeLevel())),h.receiveBytes=E.bytes,h.receivePackets=E.packets,h.receivePacketsLost=E.packetsLost,h.packetLossRate=h.receivePacketsLost/(h.receivePackets+h.receivePacketsLost),h.receiveBitrate=u?8*Math.max(0,h.receiveBytes-u.receiveBytes):0,h.totalDuration=u?u.totalDuration+1:1,h.totalFreezeTime=u?u.totalFreezeTime:0,h.freezeRate=h.totalFreezeTime/h.totalDuration,h.receiveDelay=E.jitterBufferMs,h.totalDuration>10&&e.isRemoteAudioFreeze(g)&&(h.totalFreezeTime+=1)),S){"H264"!==S.codec&&"H265"!==S.codec&&"VP8"!==S.codec&&"VP9"!==S.codec&&"AV1X"!==S.codec&&"AV1"!==S.codec||(f.codecType=S.codec),f.receiveBytes=S.bytes,f.receiveBitrate=l?8*Math.max(0,f.receiveBytes-l.receiveBytes):0,f.decodeFrameRate=S.decodeFrameRate<0?0:S.decodeFrameRate,f.renderFrameRate=S.decodeFrameRate<0?0:S.decodeFrameRate,S.outputFrame&&(f.renderFrameRate=S.outputFrame.frameRate),S.receivedFrame?(f.receiveFrameRate=S.receivedFrame.frameRate,f.receiveResolutionHeight=S.receivedFrame.height,f.receiveResolutionWidth=S.receivedFrame.width):m&&(f.receiveResolutionHeight=m._videoHeight||0,f.receiveResolutionWidth=m._videoWidth||0),void 0!==S.framesRateFirefox&&(f.receiveFrameRate=Math.round(S.framesRateFirefox)),f.receivePackets=S.packets,f.receivePacketsLost=S.packetsLost,f.packetLossRate=f.receivePacketsLost/(f.receivePackets+f.receivePacketsLost),f.totalDuration=l?l.totalDuration+1:1,f.totalFreezeTime=l?l.totalFreezeTime:0,f.receiveDelay=S.jitterBufferMs||0;var x=!!b&&t.getRemoteVideoIsReady(b);m&&x&&e.isRemoteVideoFreeze(m,S,d)&&(f.totalFreezeTime+=1),f.freezeRate=f.totalFreezeTime/f.totalDuration}w&&(h.end2EndDelay=w.B_ad,f.end2EndDelay=w.B_vd,h.transportDelay=w.B_ed,f.transportDelay=w.B_ed,h.currentPacketLossRate=w.B_ealr4/100,f.currentPacketLossRate=w.B_evlr4/100,p.uplinkNetworkQuality=w.B_punq?w.B_punq:0,p.downlinkNetworkQuality=w.B_pdnq?w.B_pdnq:0),n.remoteStats.set(o,{audioStats:h,videoStats:f,videoPcStats:S,networkStats:p}),g&&n.exceptionMonitor.setRemoteAudioStats(g,h),m&&n.exceptionMonitor.setRemoteVideoStats(m,f)}))}}],[{key:"isRemoteVideoFreeze",value:function(e,t,n){if(!e)return!1;var r=!!n&&t.framesDecodeFreezeTime>n.framesDecodeFreezeTime,i=!n||t.framesDecodeCount>n.framesDecodeCount;return r||!i}},{key:"isRemoteAudioFreeze",value:function(e){return!!e&&e._isFreeze()}}]),e}(),nw=new(function(e){h(n,e);var t=f(n);function n(){var e;return p(this,n),e=t.call(this),Lf(l(e),"_lastHiddenTime",0),Lf(l(e),"_lastVisibleTime",0),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState?e._lastHiddenTime=performance.now():e._lastVisibleTime=performance.now(),Zv.debug("document visibility went ".concat(document.visibilityState)),e.emit("VISIBILITY_CHANGE",document.visibilityState)})),e}return v(n,[{key:"visibility",get:function(){return document.visibilityState}},{key:"lastHiddenTime",get:function(){return this._lastHiddenTime}},{key:"lastVisibleTime",get:function(){return this._lastVisibleTime}}]),n}(Uv));function rw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rw(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ow(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(lg("TURN_DOMAIN")):(Zv.info("Cannot recognized as IP address ".concat(e,". Used As Host instead")),e)}function aw(e,t){var n,r,i=lg("GATEWAY_DOMAINS"),o=i[1]&&-1!==t.indexOf(i[1])?1:0;e.addresses=e.addresses||[];var a=e.addresses.map((function(e){return e.domain_prefix?{address:"".concat(e.domain_prefix,".").concat(i[o++%i.length],":").concat(e.port)}:e.ip.match(/^[\.\:\d]+$/)?{ip:e.ip,port:e.port,address:"".concat(e.ip.replace(/[^\d]/g,"-"),".").concat(i[o++%i.length],":").concat(e.port)}:(Zv.info("Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),{ip:e.ip,port:e.port,address:"".concat(e.ip,":").concat(e.port)})}));if(null!==(n=e.detail)&&void 0!==n&&n[18]&&"string"==typeof(null===(r=e.detail)||void 0===r?void 0:r[18]))for(var s=e.detail[18],c=null==s?void 0:s.split(";"),u=0;u<c.length;u++){var l,d=Mh(l=c[u]).call(l);a[u]&&d&&(a[u].ip6=d)}return{gatewayAddrs:a,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function sw(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function cw(e){var t=e._encoderConfig;if(!t)return{};var n={resolution:t.width&&t.height?"".concat(sw(t.width),"x").concat(sw(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return"number"==typeof t.frameRate?(n.maxFrameRate=t.frameRate,n.minFrameRate=t.frameRate):t.frameRate&&(n.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,n.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),n}function uw(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function lw(e,t){var n,r,i=void 0;switch(t){case lb.CHOOSE_SERVER:n=4096,r="choose server";break;case lb.CLOUD_PROXY:n=1048576,r="proxy";break;case lb.CLOUD_PROXY_5:n=4194304,r="proxy5";break;case lb.CLOUD_PROXY_FALLBACK:n=4194310,r="proxy fallback";break;default:throw new Fv(Pv.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach((function(t){t.buffer&&t.buffer.flag===n&&(i={code:t.buffer.code,addresses:(t.buffer.edges_services||[]).map((function(e){return iw(iw({},e),{},{ticket:t.buffer.cert})})),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:iw(iw({},t.buffer.detail),e.detail),flag:t.buffer.flag,opid:e.opid,cert:t.buffer.cert})})),!i)throw new Fv(Pv.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(r," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return i}function dw(e,t){return hw.apply(this,arguments)}function hw(){return hw=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vd.all(t.addresses.map(function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ow(t.ip),e.t1=t.port,e.t2=t.port,e.t3=n&&lg("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?n.toString():eg.username,!(n&&lg("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext)){e.next=10;break}return e.next=7,W_(n.toString());case 7:e.t4=e.sent,e.next=11;break;case 10:e.t4=eg.password;case 11:return e.t5=e.t4,e.abrupt("return",{address:e.t0,tcpport:e.t1,udpport:e.t2,username:e.t3,password:e.t5});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),hw.apply(this,arguments)}function fw(e,t){var n=t._videoWidth||t.getMediaStreamTrack(!0).getSettings().width;return n||Zv.warning("cannot get original video track's width, default scale down 4 times for low stream"),n?n/sw(e.width):4}function pw(e){var t=e.candidateType,n=e.relayProtocol,r=e.type,i=e.address,o=e.port,a=e.protocol;return"local-candidate"===r?{candidateType:t,relayProtocol:n,protocol:a}:{candidateType:t,relayProtocol:n,address:i,port:o,protocol:a}}function vw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vw(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mw(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function yw(e){return new Vd((function(t){window.setTimeout(t,e)}))}function bw(e){var t=new Fv(Pv.TIMEOUT,"timeout");return new Vd((function(n,r){window.setTimeout((function(){return r(t)}),e)}))}function _w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0,n=Math.random().toString(16).substr(2,e).toLowerCase();return n.length===e?"".concat(t).concat(n):"".concat(t).concat(n)+_w(e-n.length,"")}function Ew(){return _w(32,"").toUpperCase()}var Sw=function(){};function ww(e){return new Vd((function(t,n){var r=!1,i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.autoplay=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(i);var o=pf()?"canplay":"playing";i.addEventListener(o,(function(){var e=i.videoWidth,n=i.videoHeight;!e&&ff()||(r=!0,i.srcObject=null,i.remove(),t([e,n]))})),i.srcObject=new MediaStream([e]),i.play().catch(Sw),setTimeout((function(){r||(i.srcObject=null,i.remove(),t([i.videoWidth,i.videoHeight]))}),4e3)}))}function xw(e){return Vd.all(e.map((function(e){return e.then((function(e){throw e}),(function(e){return e}))}))).then((function(e){throw e}),(function(e){return e}))}function Tw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return 0===e.getListeners(t).length?Vd.reject(new Fv(Pv.UNEXPECTED_ERROR,"can not emit promise")):new Vd((function(n,i){e.emit.apply(e,[t].concat(r,[n,i]))}))}function Iw(e,t){if(0===e.getListeners(t).length)return Vd.resolve();for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Tw.apply(void 0,[e,t].concat(r))}function Rw(e,t){if(0===e.getListeners(t).length)return null;for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return kw.apply(void 0,[e,t].concat(r))}function kw(e,t){for(var n=null,r=null,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];if(e.emit.apply(e,[t].concat(o,[function(e){n=e},function(e){r=e}])),null!==r)throw r;if(null===n)throw new Fv(Pv.UNEXPECTED_ERROR,"handler is not sync");return n}function Ow(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}function Cw(e){var t=[];return e.forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),t}function Aw(e){Vd.resolve().then(e)}function Nw(e){return JSON.parse(JSON.stringify(e))}var jw={};function Dw(e,t){jw[t]||(jw[t]=!0,e())}function Pw(e){for(var t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length)),r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n}function Lw(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}var Mw=new(function(){function e(){p(this,e),Lf(this,"fnMap",new Map)}return v(e,[{key:"throttleByKey",value:function(e,t,n,r){for(var i=this,o=arguments.length,a=new Array(o>4?o-4:0),s=4;s<o;s++)a[s-4]=arguments[s];if(this.fnMap.has(t)){var c=this.fnMap.get(t);if(c.threshold!==n){c.fn.apply(c,g(c.args)),clearTimeout(c.timer);var u=window.setTimeout((function(){var e=i.fnMap.get(t);e&&e.fn.apply(e,g(e.args)),i.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:u,args:a,skipFn:r})}else c.skipFn&&c.skipFn.apply(c,g(c.args)),this.fnMap.set(t,gw(gw({},c),{},{fn:e,args:a,skipFn:r}))}else{var l=window.setTimeout((function(){var e=i.fnMap.get(t);e&&e.fn.apply(e,g(e.args)),i.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:l,args:a,skipFn:r})}}}]),e}()),Uw=Mw.throttleByKey.bind(Mw),Vw=function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s,l,d,h,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fragementLength,r=t.referenceList,i=t.asyncMapHandler,o=t.allFailedhandler,a=t.promisesCollector,s=0,l=n,h=0,f=function(){var e=u(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=s*l,t=e+l;return r.slice(e,t).map(i)}(),a&&a.push.apply(a,g(t)),e.prev=2,e.next=5,xw(t);case 5:d=e.sent,e.next=15;break;case 8:if(e.prev=8,e.t0=e.catch(2),s++,(h+=l)>=r.length){e.next=14;break}return e.next=13,f();case 13:return e.abrupt("return",void e.sent);case 14:o(e.t0);case 15:t.forEach((function(e){return e.cancel()}));case 16:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),e.next=6,f();case 6:return e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Fw(e){return"object"==typeof e&&null!==e&&!(e instanceof RegExp)}var Bw=(m(b={},Um.ACCESS_POINT,(m(e={},Bm.NO_FLAG_SET,{desc:"flag is zero",retry:!1}),m(e,Bm.FLAG_SET_BUT_EMPTY,{desc:"flag is empty",retry:!1}),m(e,Bm.INVALID_FALG_SET,{desc:"invalid flag",retry:!1}),m(e,Bm.FLAG_SET_BUT_NO_RE,{desc:"flag set unilbs but no request",retry:!1}),m(e,Bm.INVALID_SERVICE_ID,{desc:"invalid service id",retry:!1}),m(e,Bm.NO_SERVICE_AVAILABLE,{desc:"no service available",retry:!0}),m(e,Bm.NO_SERVICE_AVAILABLE_P2P,{desc:"no unilbs p2p service available",retry:!0}),m(e,Bm.NO_SERVICE_AVAILABLE_VOET,{desc:"no unilbs voice service available",retry:!0}),m(e,Bm.NO_SERVICE_AVAILABLE_WEBRTC,{desc:"no unilbs webrtc service available",retry:!0}),m(e,Bm.NO_SERVICE_AVAILABLE_CDS,{desc:"no cds service available",retry:!0}),m(e,Bm.NO_SERVICE_AVAILABLE_CDN,{desc:"no cdn dispatcher service available",retry:!0}),m(e,Bm.NO_SERVICE_AVAILABLE_TDS,{desc:"no tds service available",retry:!0}),m(e,Bm.NO_SERVICE_AVAILABLE_REPORT,{desc:"no unilbs report service available",retry:!0}),m(e,Bm.NO_SERVICE_AVAILABLE_APP_CENTER,{desc:"no app center service available",retry:!0}),m(e,Bm.NO_SERVICE_AVAILABLE_ENV0,{desc:"no unilbs sig env0 service available",retry:!0}),m(e,Bm.NO_SERVICE_AVAILABLE_VOET,{desc:"no unilbs voet service available",retry:!0}),m(e,Bm.NO_SERVICE_AVAILABLE_STRING_UID,{desc:"no string uid service available",retry:!0}),m(e,Bm.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS,{desc:"no webrtc unilbs service available",retry:!0}),e)),m(b,Um.UNILBS,(m(t={},Fm.INVALID_VENDOR_KEY,{desc:"invalid vendor key, can not find appid",retry:!1}),m(t,Fm.INVALID_CHANNEL_NAME,{desc:"invalid channel name",retry:!1}),m(t,Fm.INTERNAL_ERROR,{desc:"unilbs internal error",retry:!1}),m(t,Fm.NO_AUTHORIZED,{desc:"invalid token, authorized failed",retry:!1}),m(t,Fm.DYNAMIC_KEY_TIMEOUT,{desc:"dynamic key or token timeout",retry:!1}),m(t,Fm.NO_ACTIVE_STATUS,{desc:"no active status",retry:!1}),m(t,Fm.DYNAMIC_KEY_EXPIRED,{desc:"dynamic key expired",retry:!1}),m(t,Fm.STATIC_USE_DYNAMIC_KEY,{desc:"static use dynamic key",retry:!1}),m(t,Fm.DYNAMIC_USE_STATIC_KEY,{desc:"dynamic use static key",retry:!1}),m(t,Fm.USER_OVERLOAD,{desc:"amount of users over load",retry:!1}),m(t,Fm.FORBIDDEN_REGION,{desc:"the request is forbidden in this area",retry:!1}),m(t,Fm.CANNOT_MEET_AREA_DEMAND,{desc:"unable to allocate services in this area",retry:!1}),t)),m(b,Um.STRING_UID_ALLOCATOR,(m(y={},Vm.IIIEGAL_APPID,{desc:"invalid appid",retry:!1}),m(y,Vm.IIIEGAL_UID,{desc:"invalid string uid",retry:!1}),m(y,Vm.INTERNAL_ERROR,{desc:"string uid allocator internal error",retry:!0}),y)),b);function Gw(e){var t=Bw[Math.floor(e/1e4)];if(!t)return{desc:"unkonw error",retry:!1};var n=t[e%1e4];if(!n){if(Math.floor(e/1e4)===Um.ACCESS_POINT){var r=e%1e4;if("1"===r.toString()[0])return{desc:e.toString(),retry:!1};if("2"===r.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unkonw error",retry:!1}}return n}var qw=(m(_={},Gm.K_TIMESTAMP_EXPIRED,{desc:"K_TIMESTAMP_EXPIRED",action:"failed"}),m(_,Gm.K_CHANNEL_PERMISSION_INVALID,{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"}),m(_,Gm.K_CERTIFICATE_INVALID,{desc:"K_CERTIFICATE_INVALID",action:"failed"}),m(_,Gm.K_CHANNEL_NAME_EMPTY,{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"}),m(_,Gm.K_CHANNEL_NOT_FOUND,{desc:"K_CHANNEL_NOT_FOUND",action:"failed"}),m(_,Gm.K_TICKET_INVALID,{desc:"K_TICKET_INVALID",action:"failed"}),m(_,Gm.K_CHANNEL_CONFLICTED,{desc:"K_CHANNEL_CONFLICTED",action:"failed"}),m(_,Gm.K_SERVICE_NOT_READY,{desc:"K_SERVICE_NOT_READY",action:"tryNext"}),m(_,Gm.K_SERVICE_TOO_HEAVY,{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"}),m(_,Gm.K_UID_BANNED,{desc:"K_UID_BANNED",action:"failed"}),m(_,Gm.K_IP_BANNED,{desc:"K_IP_BANNED",action:"failed"}),m(_,Gm.ERR_INVALID_VENDOR_KEY,{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"}),m(_,Gm.ERR_INVALID_CHANNEL_NAME,{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"}),m(_,Gm.WARN_NO_AVAILABLE_CHANNEL,{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"}),m(_,Gm.WARN_LOOKUP_CHANNEL_TIMEOUT,{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"}),m(_,Gm.WARN_LOOKUP_CHANNEL_REJECTED,{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"}),m(_,Gm.WARN_OPEN_CHANNEL_TIMEOUT,{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"}),m(_,Gm.WARN_OPEN_CHANNEL_REJECTED,{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"}),m(_,Gm.WARN_REQUEST_DEFERRED,{desc:"WARN_REQUEST_DEFERRED",action:"failed"}),m(_,Gm.ERR_DYNAMIC_KEY_TIMEOUT,{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"}),m(_,Gm.ERR_NO_AUTHORIZED,{desc:"ERR_NO_AUTHORIZED",action:"failed"}),m(_,Gm.ERR_VOM_SERVICE_UNAVAILABLE,{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"}),m(_,Gm.ERR_NO_CHANNEL_AVAILABLE_CODE,{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"}),m(_,Gm.ERR_MASTER_VOCS_UNAVAILABLE,{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"}),m(_,Gm.ERR_INTERNAL_ERROR,{desc:"ERR_INTERNAL_ERROR",action:"tryNext"}),m(_,Gm.ERR_NO_ACTIVE_STATUS,{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"}),m(_,Gm.ERR_INVALID_UID,{desc:"ERR_INVALID_UID",action:"failed"}),m(_,Gm.ERR_DYNAMIC_KEY_EXPIRED,{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"}),m(_,Gm.ERR_STATIC_USE_DYANMIC_KE,{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"}),m(_,Gm.ERR_DYNAMIC_USE_STATIC_KE,{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"}),m(_,Gm.ERR_NO_VOCS_AVAILABLE,{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"}),m(_,Gm.ERR_NO_VOS_AVAILABLE,{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"}),m(_,Gm.ERR_JOIN_CHANNEL_TIMEOUT,{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"}),m(_,Gm.ERR_JOIN_BY_MULTI_IP,{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"}),m(_,Gm.ERR_NOT_JOINED,{desc:"ERR_NOT_JOINED",action:"failed"}),m(_,Gm.ERR_REPEAT_JOIN_REQUEST,{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"}),m(_,Gm.ERR_REPEAT_JOIN_CHANNEL,{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"}),m(_,Gm.ERR_INVALID_VENDOR_KEY,{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"}),m(_,Gm.ERR_INVALID_CHANNEL_NAME,{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"}),m(_,Gm.ERR_INVALID_STRINGUID,{desc:"ERR_INVALID_STRINGUID",action:"failed"}),m(_,Gm.ERR_TOO_MANY_USERS,{desc:"ERR_TOO_MANY_USERS",action:"tryNext"}),m(_,Gm.ERR_SET_CLIENT_ROLE_TIMEOUT,{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"}),m(_,Gm.ERR_SET_CLIENT_ROLE_NO_PERMISSION,{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"}),m(_,Gm.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE,{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"}),m(_,Gm.ERR_PUBLISH_REQUEST_INVALID,{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"}),m(_,Gm.ERR_SUBSCRIBE_REQUEST_INVALID,{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"}),m(_,Gm.ERR_NOT_SUPPORTED_MESSAGE,{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"}),m(_,Gm.ERR_ILLEAGAL_PLUGIN,{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"}),m(_,Gm.ILLEGAL_CLIENT_ROLE_LEVEL,{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"}),m(_,Gm.ERR_REJOIN_TOKEN_INVALID,{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"}),m(_,Gm.ERR_REJOIN_USER_NOT_JOINED,{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"}),m(_,Gm.ERR_INVALID_OPTIONAL_INFO,{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"}),m(_,Gm.ERR_TEST_RECOVER,{desc:"ERR_TEST_RECOVER",action:"recover"}),m(_,Gm.ERR_TEST_TRYNEXT,{desc:"ERR_TEST_TRYNEXT",action:"recover"}),m(_,Gm.ERR_TEST_RETRY,{desc:"ERR_TEST_RETRY",action:"recover"}),m(_,Gm.ILLEGAL_AES_PASSWORD,{desc:"ERR_TEST_RETRY",action:"failed"}),m(_,Gm.ERR_TOO_MANY_BROADCASTERS,{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"}),m(_,Gm.ERR_TOO_MANY_SUBSCRIBERS,{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"}),m(_,Gm.ERR_LICENSE_ILLEGAL,{desc:"ERR_LICENSE_ILLEGAL",action:"quit"}),m(_,Gm.ERR_LICENSE_MISSING,{desc:"ERR_LICENSE_MISSING",action:"quit"}),m(_,Gm.ERR_LICENSE_EXPIRED,{desc:"ERR_LICENSE_EXPIRED",action:"quit"}),m(_,Gm.ERR_LICENSE_MINUTES_EXCEEDED,{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"}),m(_,Gm.ERR_LICENSE_PERIOD_INVALID,{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"}),m(_,Gm.ERR_LICENSE_MULTIPLE_SDK_SERVICE,{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}),_);function Ww(e){return qw[e]||{desc:"UNKNOW_ERROR_".concat(e),action:"failed"}}function Hw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var zw=function(e){h(n,e);var t=f(n);function n(e,r){var i;p(this,n);var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0;i=t.call(this),Lf(l(i),"connectionID",0),Lf(l(i),"currentURLIndex",0),Lf(l(i),"urls",void 0),Lf(l(i),"_reconnectMode","tryNext"),Lf(l(i),"reconnectReason",void 0),Lf(l(i),"_initMutex",new Q_("websocket")),Lf(l(i),"name",void 0),Lf(l(i),"_state","closed"),Lf(l(i),"reconnectInterrupter",void 0),Lf(l(i),"websocket",void 0),Lf(l(i),"retryConfig",void 0),Lf(l(i),"reconnectCount",0),Lf(l(i),"forceCloseTimeout",5e3),Lf(l(i),"onlineReconnectListener",void 0),Lf(l(i),"useCompress",void 0),Lf(l(i),"tryDoubleDomain",!1),Lf(l(i),"wsInflateLength",0),Lf(l(i),"wsDeflateLength",0),Lf(l(i),"closeEstablishingWs",(function(){})),Lf(l(i),"store",void 0),Lf(l(i),"joinChannelServiceRecordIndex",void 0),i.store=s,i.name=e,i.retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hw(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r),i.useCompress=o,i.tryDoubleDomain=a;var c=r.timeout,u=r.timeoutFactor,d=Math.max(300,Math.floor(3*c/5)),h=Math.max(1.2,Math.floor(8*u)/10);return Qy.ONLINE&&(i.retryConfig.timeout=d,i.retryConfig.timeoutFactor=h),U_.on($y.NETWORK_STATE_CHANGE,(function(e,t){e!==t&&(i.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===Qy.ONLINE?(i.retryConfig.timeout=d,i.retryConfig.timeoutFactor=h):(i.retryConfig.timeout=c,i.retryConfig.timeoutFactor=u))})),i}return v(n,[{key:"url",get:function(){return this.websocket?this.websocket.url:null}},{key:"reconnectMode",get:function(){return this._reconnectMode},set:function(e){["tryNext","recover"].includes(e)&&this.resetReconnectCount(e),this._reconnectMode=e}},{key:"state",get:function(){return this._state},set:function(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(ay.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(ay.CONNECTED):"closed"===this._state?this.emit(ay.CLOSED):"failed"===this._state&&this.emit(ay.FAILED))}},{key:"resetReconnectCount",value:function(e){Zv.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0}},{key:"getConnection",value:function(){return this.websocket||void 0}},{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;this.forceCloseTimeout=n;var r=function(n,r){t.urls=e;var i=t.urls[t.currentURLIndex];t.state="connecting",t.createWebSocketConnection(i).then(n).catch(r),t.once(ay.CLOSED,(function(){return r(new Fv(Pv.WS_DISCONNECT))})),t.once(ay.CONNECTED,(function(){return n()}))};return this._initMutex.lock().then((function(e){return new Vd((function(e,t){r(e,t)})).then((function(){e()})).catch((function(){e()}))}))}},{key:"close",value:function(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;var n=this.websocket;t?setTimeout((function(){return n.close()}),500):n.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}},{key:"reconnect",value:function(e,t){if(this.websocket){var n;void 0!==e&&(this.reconnectMode=e),Zv.debug("[".concat(this.name,"] reconnect is triggered initiative")),"number"==typeof this.joinChannelServiceRecordIndex&&(null===(n=this.store)||void 0===n||n.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinChannelServiceRecordIndex));var r=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),r&&r.bind(this.websocket)({code:9999,reason:t})}else Zv.warning("[".concat(this.name,"] can not reconnect, no websocket"))}},{key:"sendMessage",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new Fv(Pv.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(e){throw new Fv(Pv.WS_ERR,"send websocket message error"+e.toString())}}},{key:"setWsInflateData",value:function(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}},{key:"getWsInflateData",value:function(){var e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}},{key:"clearWsInflateData",value:function(){this.wsInflateLength=0,this.wsDeflateLength=0}},{key:"createWebSocketConnection",value:function(){var e=u(c().mark((function e(t,n){var r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.connectionID+=1,this.connectionID,this.joinChannelServiceRecordIndex=void 0,new Vd((function(e,i){var o,a=function(t){var n;null===(n=r.store)||void 0===n||n.signalChannelOpen(),Zv.debug("[".concat(r.name,"] websocket opened:"),t),r.reconnectMode="retry",r.state="connected",r.resetReconnectCount("opened"),e()},s=function(){var t=u(c().mark((function t(n){var o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Zv.debug("[".concat(r.name,"] websocket close ").concat(r.websocket&&r.websocket.url,", code: ").concat(n.code,", reason: ").concat(n.reason,", current mode: ").concat(r.reconnectMode)),!(r.reconnectCount<r.retryConfig.maxRetryCount)){t.next=13;break}return"connected"===r.state&&(r.reconnectReason=n.reason,r.state="reconnecting"),o=Rw(r,ay.WILL_RECONNECT,r.reconnectMode)||r.reconnectMode,t.next=5,r.reconnectWithAction(o);case 5:if(a=t.sent,"closed"!==r.state){t.next=8;break}return t.abrupt("return",void Zv.debug("[".concat(r.connectionID,"] ws is closed, no need to reconnect")));case 8:if(a){t.next=10;break}return t.abrupt("return",(i(new Fv(Pv.WS_DISCONNECT,"websocket reconnect failed: ".concat(n.code))),void r.close(!0)));case 10:e(),t.next=14;break;case 13:i(new Fv(Pv.WS_DISCONNECT,"websocket close: ".concat(n.code))),r.close();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(e){r.emit(ay.ON_MESSAGE,e)};r.websocket&&(r.websocket.onclose=null,r.websocket.close()),lg("GATEWAY_WSS_ADDRESS")&&r.name.startsWith("gateway")&&(t=lg("GATEWAY_WSS_ADDRESS")),Zv.debug("[".concat(r.name,"] start connect, url: ").concat(t));var d=null===(o=r.store)||void 0===o?void 0:o.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});r.chooseBestWebsocketConnection(t,!!n,d).then((function(e){var t;r.websocket=e,a&&a(e.url),e.onclose=s,e.onmessage=l,null===(t=r.store)||void 0===t||t.recordJoinChannelService({endTs:Date.now(),status:"success"},d),r.joinChannelServiceRecordIndex=d})).catch((function(e){var t;if(null===(t=r.store)||void 0===t||t.recordJoinChannelService({endTs:Date.now(),status:e instanceof Fv&&e.code===Pv.WS_ABORT?"aborted":"error",errors:[e]},d),"closed"!==r.state){if(e instanceof Fv&&e.code===Pv.WS_ERR){var n=new Fv(Pv.WS_ERR,"init websocket failed! Error: ".concat(e.toString()));return Zv.error("[".concat(r.name,"]").concat(n)),void i(n)}s&&s(e)}else i(new Fv(Pv.WS_DISCONNECT,"websocket is closed: ".concat(e.toString())))}))}))));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"reconnectWithAction",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s,l,d,h=this,f=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(f.length>1&&void 0!==f[1])||f[1],!(this.reconnectCount>=this.retryConfig.maxRetryCount)){e.next=3;break}return e.abrupt("return",!1);case 3:if(this.urls){e.next=5;break}return e.abrupt("return",!1);case 5:if("closed"!==this.state){e.next=7;break}return e.abrupt("return",!1);case 7:if(this.onlineReconnectListener||U_.networkState!==Qy.OFFLINE||(this.onlineReconnectListener=U_.onlineWaiter&&U_.onlineWaiter.then((function(){h.onlineReconnectListener=void 0}))),r=!0,this.reconnectInterrupter=function(){r=!1},!n){e.next=14;break}return i=Gv(this.reconnectCount,this.retryConfig),Zv.debug("[".concat(this.name,"] wait ").concat(i,"ms to reconnect websocket, mode: ").concat(t)),e.next=14,Vd.race([yw(i),this.onlineReconnectListener||new Vd((function(){}))]);case 14:if("closed"!==this.state&&r){e.next=16;break}return e.abrupt("return",!1);case 16:if(this.reconnectCount+=1,o=function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.emit(ay.RECONNECT_CREATE_CONNECTION,n),e.next=3,h.createWebSocketConnection(t);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=18,"retry"!==t){e.next=26;break}return a=this.urls[this.currentURLIndex],this.emit(ay.RECONNECT_WAITTING_FINISH,t),e.next=24,o(a,t);case 24:e.next=49;break;case 26:if("tryNext"!==t){e.next=38;break}if(this.currentURLIndex+=1,!(this.currentURLIndex>=this.urls.length)){e.next=31;break}return e.next=30,this.reconnectWithAction("recover",!1);case 30:return e.abrupt("return",e.sent);case 31:return Zv.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),s=this.urls[this.currentURLIndex],this.emit(ay.RECONNECT_WAITTING_FINISH,t),e.next=36,o(s,t);case 36:e.next=49;break;case 38:if("recover"!==t){e.next=49;break}return Zv.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.emit(ay.RECONNECT_WAITTING_FINISH,t),e.next=44,Tw(this,ay.REQUEST_NEW_URLS);case 44:return this.urls=e.sent,this.currentURLIndex=0,l=this.urls[this.currentURLIndex],e.next=49,o(l,t);case 49:return e.abrupt("return",!0);case 52:if(e.prev=52,e.t0=e.catch(18),Zv.error("[".concat(this.name,"] reconnect failed"),e.t0.toString()),!(null!=e.t0&&null!==(d=e.t0.data)&&void 0!==d&&d.desc&&Array.isArray(e.t0.data.desc)&&e.t0.data.desc.length&&e.t0.data.desc.includes("dynamic key expired"))){e.next=59;break}e.t1=(this.emit(ay.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1),e.next=62;break;case 59:return e.next=61,this.reconnectWithAction(t,n);case 61:e.t1=e.sent;case 62:return e.abrupt("return",e.t1);case 63:case"end":return e.stop()}}),e,this,[[18,52]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"chooseBestWebsocketConnection",value:function(){var e=u(c().mark((function e(t,n,r){var i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Vd((function(e,o){var a=!1,s=[];i.closeEstablishingWs=function(){Zv.debug("[choose-best-ws] close establishing websockets"),s.forEach((function(e){e.onclose=null,e.onopen=null,e.onmessage=null,e.close()})),o(new Fv(Pv.WS_ABORT,"choose best websocket aborted"))};var c,u=lg("GATEWAY_DOMAINS"),l=t.indexOf("?h="),d=u.find((function(e){return-1!==l?t.includes(e,l):t.includes(e)}));Zv.debug("[choose-best-ws] currentDomain: ",d,", domains: ",u);var h=!i.tryDoubleDomain||n||!d;if(!h&&d){var f,p=Date.now();try{u.forEach((function(e){var n=-1===l?t.replace(d,e):t.substr(0,l)+t.substr(l).replace(d,e),r=new WebSocket(n);r.binaryType="arraybuffer",s.push(r),Zv.debug("[choose-best-ws] ws is connecting:",r.url)}))}catch(t){for(Zv.debug("[choose-best-ws] ws create failed, fallback to single url"),s.forEach((function(e){return e.close()}));s.length;)s.pop();h=!0}null===(f=i.store)||void 0===f||f.recordJoinChannelService({urls:s.map((function(e){return e.url})),service:"gateway"},r),s.forEach((function(t){t.onopen=function(){if(!a){var n=Date.now()-p;Zv.debug("[choose-best-ws] ws open cost ".concat(n,"ms")),s.filter((function(e){return e!==t})).forEach((function(e){Zv.debug("[choose-best-ws]close backup websocket: ".concat(e.url)),e.close()})),a=!0,e(t)}},t.onclose=function(e){c=e,a||s.find((function(e){return!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING)}))||(Zv.debug("[choose-best-ws] all websocket is closed"),a=!0,o(c))},t.onmessage=function(e){Zv.debug("[choose-best-ws]".concat(t.url," onmessage: ").concat(e.data))}})),yw(i.forceCloseTimeout).then((function(){s.forEach((function(e){e.readyState!==WebSocket.OPEN&&e.close()}))}))}if(h){var v,g;Zv.debug("[choose-best-ws] use single url: ",t),null===(v=i.store)||void 0===v||v.recordJoinChannelService({urls:[t],service:"gateway"},r);try{g=new WebSocket(t),s.push(g),g.binaryType="arraybuffer"}catch(t){var m=new Fv(Pv.WS_ERR,"init websocket failed! Error: ".concat(t.toString()));return Zv.error("[".concat(i.name,"]").concat(m)),void o(m)}g.onopen=function(){e(g)},g.onclose=function(e){o(e)},g.onmessage=function(e){Zv.debug("[choose-best-ws]".concat(g.url," onmessage: ").concat(e.data))},yw(i.forceCloseTimeout).then((function(){g&&g.readyState!==WebSocket.OPEN&&g.close()}))}})).then((function(e){return i.closeEstablishingWs=void 0,e})).catch((function(e){throw i.closeEstablishingWs=void 0,e})));case 1:case"end":return e.stop()}}),e)})));function t(t,n,r){return e.apply(this,arguments)}return t}()}]),n}(Uv),Kw=function(){function e(t){p(this,e),Lf(this,"input",[]),Lf(this,"size",void 0),this.size=t}return v(e,[{key:"add",value:function(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}},{key:"mean",value:function(){var e;return 0===this.input.length?0:yr(e=this.input).call(e,(function(e,t){return e+t}))/this.input.length}}]),e}(),Yw=function(e){h(n,e);var t=f(n);function n(e,r){var i;return p(this,n),i=t.call(this),Lf(l(i),"_disconnectedReason",void 0),Lf(l(i),"_websocketReconnectReason",void 0),Lf(l(i),"_connectionState",Km.CLOSED),Lf(l(i),"reconnectToken",void 0),Lf(l(i),"websocket",void 0),Lf(l(i),"openConnectionTime",void 0),Lf(l(i),"clientId",void 0),Lf(l(i),"lastMsgTime",Date.now()),Lf(l(i),"uploadCache",[]),Lf(l(i),"uploadCacheInterval",void 0),Lf(l(i),"rttRolling",new Kw(5)),Lf(l(i),"pingpongTimer",void 0),Lf(l(i),"wsInflateDataTimer",void 0),Lf(l(i),"pingpongTimeoutCount",0),Lf(l(i),"joinResponse",void 0),Lf(l(i),"multiIpOption",void 0),Lf(l(i),"initError",void 0),Lf(l(i),"spec",void 0),Lf(l(i),"store",void 0),Lf(l(i),"onWebsocketMessage",(function(e){if(e.data instanceof ArrayBuffer)i.emit(Ym.ON_BINARY_DATA,e.data);else{var t=JSON.parse(e.data);if(i.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){var n="res-@".concat(t._id);i.emit(n,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){if(i.emit(t._type,t._message),t._type===Xm.ON_NOTIFICATION&&i.handleNotification(t._message),t._type===Xm.ON_USER_BANNED)switch(t._message.error_code){case 14:i.close(Wm.UID_BANNED);break;case 15:i.close(Wm.IP_BANNED);break;case 16:i.close(Wm.CHANNEL_BANNED)}if(t._type===Xm.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case Gm.ERR_LICENSE_MISSING:i.close(Wm.LICENSE_MISSING);break;case Gm.ERR_LICENSE_EXPIRED:i.close(Wm.LICENSE_EXPIRED);break;case Gm.ERR_LICENSE_MINUTES_EXCEEDED:i.close(Wm.LICENSE_MINUTES_EXCEEDED);break;case Gm.ERR_LICENSE_PERIOD_INVALID:i.close(Wm.LICENSE_PERIOD_INVALID);break;case Gm.ERR_LICENSE_MULTIPLE_SDK_SERVICE:i.close(Wm.LICENSE_MULTIPLE_SDK_SERVICE);break;case Gm.ERR_LICENSE_ILLEGAL:i.close(Wm.LICENSE_ILLEGAL);break;default:i.close()}}}})),i.clientId=e.clientId,i.spec=e,i.store=r,i.websocket=new zw("gateway-".concat(i.clientId),i.spec.retryConfig,!0,!0,r),i.handleWebsocketEvents(),window.addEventListener("offline",(function(){i.connectionState===Km.CONNECTED&&i.reconnect("retry",zm.OFFLINE)})),i}return v(n,[{key:"connectionState",get:function(){return this._connectionState},set:function(e){e!==this._connectionState&&(this._connectionState=e,e===Km.CONNECTED?this.emit(Ym.WS_CONNECTED):e===Km.RECONNECTING?this.emit(Ym.WS_RECONNECTING,this._websocketReconnectReason):e===Km.CLOSED&&this.emit(Ym.WS_CLOSED,this._disconnectedReason))}},{key:"currentURLIndex",get:function(){return this.websocket.currentURLIndex}},{key:"url",get:function(){return this.websocket?this.websocket.url:null}},{key:"rtt",get:function(){return this.rttRolling.mean()}},{key:"request",value:function(){var e=u(c().mark((function e(t,n,r,i){var o,a,s,u,l,d,h,f,p,v=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=_w(6,""),a={_id:o,_type:t,_message:n},s=this.websocket.connectionID,u=function(){return new Vd((function(e,n){if(v.connectionState===Km.CONNECTED)return e();var r=function(){v.off(Ym.WS_CLOSED,i),e()},i=function(){v.off(Ym.WS_CONNECTED,r),n(new Fv(Pv.WS_ABORT))};v.once(Ym.WS_CONNECTED,r),v.once(Ym.WS_CLOSED,i),t!==Zm.PUBLISH&&t!==Zm.SUBSCRIBE&&t!==Zm.UNSUBSCRIBE&&t!==Zm.UNPUBLISH&&t!==Zm.CONTROL&&t!==Zm.RESTART_ICE||v.once(Ym.DISCONNECT_P2P,(function(){n(new Fv(Pv.DISCONNECT_P2P))})),t!==Zm.PUBLISH&&t!==Zm.RESTART_ICE||v.once(Ym.ABORT_P2P_EXECUTION,(function(){n(new Fv(Pv.DISCONNECT_P2P))}))}))},e.t0=this.connectionState!==Km.CONNECTING&&this.connectionState!==Km.RECONNECTING||t===Zm.JOIN||t===Zm.REJOIN,e.t0){e.next=5;break}return e.next=5,u();case 5:if(this.websocket.sendMessage(a,!0),!i){e.next=8;break}return e.abrupt("return");case 8:return l=new Vd((function(e,r){var i=!1,a=function(r,o){i=!0,e({isSuccess:"success"===r,message:o||{}}),v.off(Ym.WS_CLOSED,c),v.off(Ym.WS_RECONNECTING,c),v.emit(Ym.REQUEST_SUCCESS,t,n)};v.once("res-@".concat(o),a);var c=function e(){r(new Fv(Pv.WS_ABORT,"type: ".concat(t))),v.off(Ym.WS_CLOSED,e),v.off(Ym.WS_RECONNECTING,e),v.off("res-@".concat(o),a)};v.once(Ym.WS_CLOSED,c),v.once(Ym.WS_RECONNECTING,c),yw(lg("SIGNAL_REQUEST_TIMEOUT")).then((function(){v.websocket.connectionID!==s||i||(Zv.warning("[".concat(v.clientId,"] ws request timeout, type: ").concat(t)),v.emit(Ym.REQUEST_TIMEOUT,t,n))}))})),d=null,e.prev=10,e.next=13,l;case 13:d=e.sent,e.next=35;break;case 16:if(e.prev=16,e.t1=e.catch(10),this.connectionState!==Km.CLOSED&&t!==Zm.LEAVE){e.next=20;break}throw new Fv(Pv.WS_ABORT);case 20:if(this.spec.forceWaitGatewayResponse&&!r){e.next=24;break}e.t2=e.t1.throw(),e.next=34;break;case 24:if(t!==Zm.JOIN&&t!==Zm.REJOIN){e.next=28;break}e.t3=null,e.next=33;break;case 28:return e.next=30,u();case 30:return e.next=32,this.request(t,n);case 32:e.t3=e.sent;case 33:e.t2=e.t3;case 34:return e.abrupt("return",e.t2);case 35:if(!d.isSuccess){e.next=37;break}return e.abrupt("return",d.message);case 37:if(h=Number(d.message.error_code||d.message.code),f=Ww(h),p=new Fv(Pv.UNEXPECTED_RESPONSE,"".concat(f.desc,": ").concat(d.message.error_str),{code:h,data:d.message}),"success"!==f.action){e.next=42;break}e.t4=d.message,e.next=67;break;case 42:if(Zv.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(t,", error_code: ").concat(h,", message: ").concat(f.desc,", action: ").concat(f.action)),h!==Gm.ERR_TOO_MANY_BROADCASTERS){e.next=47;break}e.t5=t===Zm.JOIN||t===Zm.REJOIN?(this.initError=p,this.close(),p.throw()):p.throw(),e.next=66;break;case 47:if("failed"!==f.action){e.next=51;break}e.t6=p.throw(),e.next=65;break;case 51:if("quit"!==f.action){e.next=55;break}e.t7=(this.initError=p,this.close(),p.throw()),e.next=64;break;case 55:if(h===Gm.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=d.message.option,Zv.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",zm.MULTI_IP)):this.reconnect(f.action,zm.SERVER_ERROR),t!==Zm.JOIN&&t!==Zm.REJOIN){e.next=60;break}e.t8=null,e.next=63;break;case 60:return e.next=62,this.request(t,n);case 62:e.t8=e.sent;case 63:e.t7=e.t8;case 64:e.t6=e.t7;case 65:e.t5=e.t6;case 66:e.t4=e.t5;case 67:return e.abrupt("return",e.t4);case 68:case"end":return e.stop()}}),e,this,[[10,16]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"waitMessage",value:function(e,t){var n=this;return new Vd((function(r){var i=function i(o){(!t||t(o))&&(n.off(e,i),r(o))};n.on(e,i)}))}},{key:"upload",value:function(e,t){var n=this,r={_type:e,_message:t};try{this.websocket.sendMessage(r)}catch(e){var i=lg("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>i&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((function(){if(n.connectionState===Km.CONNECTED){var e=n.uploadCache.splice(0,1)[0];0===n.uploadCache.length&&(window.clearInterval(n.uploadCacheInterval),n.uploadCacheInterval=void 0),n.upload(e._type,e._message)}}),lg("UPLOAD_CACHE_INTERVAL")||2e3))}}},{key:"send",value:function(e,t){var n={_type:e,_message:t};this.websocket.sendMessage(n)}},{key:"init",value:function(e,t){var n=this;return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Vd((function(r,i){n.once(Ym.WS_CONNECTED,(function(){return r(n.joinResponse)})),n.once(Ym.WS_CLOSED,(function(){return i(n.initError||new Fv(Pv.WS_ABORT))})),n.connectionState=Km.CONNECTING,n.websocket.init(e).catch(i),n.wsInflateDataTimer&&window.clearInterval(n.wsInflateDataTimer),n.wsInflateDataTimer=window.setInterval((function(){n.handleWsInflateData()}),2e4),setTimeout((function(){t&&void 0===n.openConnectionTime&&(Zv.debug("[".concat(n.clientId,"] init websocket timeout while join with fallback to proxy")),i(new Fv(Pv.INIT_WEBSOCKET_TIMEOUT)))}),lg("JOIN_WITH_FALLBACK_PROXY_PENDING_DURATION"))}))}},{key:"close",value:function(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||Wm.LEAVE,this.connectionState=Km.CLOSED,Zv.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),e===Wm.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new zw("gateway-".concat(this.clientId),this.spec.retryConfig,!0,!0,this.store),this.handleWebsocketEvents())}},{key:"join",value:function(){var e=u(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.joinResponse){e.next=11;break}return this.emit(Ym.ABORT_P2P_EXECUTION),e.next=4,Tw(this,Ym.REQUEST_JOIN_INFO);case 4:return t=e.sent,e.next=7,this.request(Zm.JOIN,t);case 7:if(n=e.sent){e.next=10;break}return e.abrupt("return",(this.emit(Ym.REPORT_JOIN_GATEWAY,Pv.TIMEOUT,this.url||""),!1));case 10:this.joinResponse=n,this.emit(Ym.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token;case 11:return e.abrupt("return",(this.connectionState=Km.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"rejoin",value:function(){var e=u(c().mark((function e(){var t,n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reconnectToken){e.next=2;break}throw new Fv(Pv.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");case 2:return(t=kw(this,Ym.REQUEST_REJOIN_INFO)).token=this.reconnectToken,e.next=6,this.request(Zm.REJOIN,t);case 6:return n=e.sent,e.abrupt("return",!!n&&(this.connectionState=Km.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),n.peers&&n.peers.forEach((function(e){r.emit(Xm.ON_USER_ONLINE,{uid:e.uid}),e.audio&&r.emit(Xm.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&r.emit(Xm.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?r.emit(Xm.MUTE_AUDIO,{uid:e.uid}):r.emit(Xm.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?r.emit(Xm.MUTE_VIDEO,{uid:e.uid}):r.emit(Xm.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?r.emit(Xm.ENABLE_LOCAL_AUDIO,{uid:e.uid}):r.emit(Xm.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?r.emit(Xm.ENABLE_LOCAL_VIDEO,{uid:e.uid}):r.emit(Xm.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||r.emit(Xm.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reconnect",value:function(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}},{key:"handleNotification",value:function(e){Zv.debug("[".concat(this.clientId,"] receive notification: "),e);var t=Ww(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(Wm.UID_BANNED),void this.close()):void this.reconnect(t.action,zm.SERVER_ERROR);Zv.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}},{key:"handlePingPong",value:function(){var e=this;if(this.websocket&&"connected"===this.websocket.state){this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;var t=lg("PING_PONG_TIME_OUT"),n=Date.now();this.pingpongTimeoutCount>=t&&(Zv.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(n-this.lastMsgTime,"ms")),n-this.lastMsgTime>lg("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",zm.TIMEOUT):this.request(Zm.PING,void 0,!0).then((function(){e.pingpongTimeoutCount=0;var t=Date.now()-n;e.rttRolling.add(t),lg("REPORT_STATS")&&e.send(Zm.PING_BACK,{pingpongElapse:t})})).catch((function(e){}))}}},{key:"handleWsInflateData",value:function(){var e=this.websocket.getWsInflateData(),t=e.wsInflateLength,n=e.wsDeflateLength;0!==t&&0!==n&&this.upload(Jm.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:n,ws_inflate_length:t})}},{key:"handleWebsocketEvents",value:function(){var e=this;this.websocket.on(ay.RECONNECT_WAITTING_FINISH,(function(t){e.emit(Ym.WS_RECONNECT_WAITTING_FINISH,t)})),this.websocket.on(ay.RECONNECT_CREATE_CONNECTION,(function(t){e.emit(Ym.WS_RECONNECT_CREATE_CONNECTION,t)})),this.websocket.on(ay.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(ay.CLOSED,(function(){e.connectionState=Km.CLOSED})),this.websocket.on(ay.FAILED,(function(){e._disconnectedReason=Wm.NETWORK_ERROR,e.connectionState=Km.CLOSED})),this.websocket.on(ay.RECONNECTING,(function(t){e._websocketReconnectReason=t,e.joinResponse=void 0,e.connectionState===Km.CONNECTED?e.connectionState=Km.RECONNECTING:e.connectionState=Km.CONNECTING})),this.websocket.on(ay.WILL_RECONNECT,(function(t,n){if(kw(e,Ym.IS_P2P_DISCONNECTED)&&"retry"===t)return Zv.debug("".concat(e.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e.reconnectToken=void 0,e.emit(Ym.NEED_RENEW_SESSION),e.emit(Ym.DISCONNECT_P2P),n("tryNext");"retry"!==t&&(Zv.debug("".concat(e.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(t)),e.reconnectToken=void 0,e.emit(Ym.NEED_RENEW_SESSION),e.emit(Ym.DISCONNECT_P2P)),n(t)})),this.websocket.on(ay.CONNECTED,(function(){e.openConnectionTime=Date.now(),e.reconnectToken?e.rejoin().catch((function(t){Zv.warning("[".concat(e.clientId,"] rejoin failed ").concat(t)),e.reconnect("tryNext",zm.SERVER_ERROR)})):e.join().catch((function(t){if(e.emit(Ym.REPORT_JOIN_GATEWAY,t.message||t.code,e.url||""),t instanceof Fv&&t.code===Pv.UNEXPECTED_RESPONSE&&t.data.code===Gm.ERR_NO_AUTHORIZED)return Zv.warning("[".concat(e.clientId,"] reconnect no authorized, recover")),void e.reconnect("recover",zm.SERVER_ERROR);Zv.error("[".concat(e.clientId,"] join gateway request failed"),t.toString()),e.spec.forceWaitGatewayResponse?e.reconnect("tryNext",zm.SERVER_ERROR):(e.initError=t,e.close())}))})),this.websocket.on(ay.REQUEST_NEW_URLS,(function(t,n){Tw(e,Ym.REQUEST_RECOVER,e.multiIpOption).then(t).catch(n)})),this.websocket.on(ay.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(function(){e.emit(Xm.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}]),n}(Uv);function Zw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Jw,Xw=function(e){h(n,e);var t=f(n);function n(e,r,i,o){var a;return p(this,n),a=t.call(this),Lf(l(a),"connectionID",0),Lf(l(a),"currentURLIndex",0),Lf(l(a),"reconnectReason",void 0),Lf(l(a),"_reconnectMode","tryNext"),Lf(l(a),"_initMutex",void 0),Lf(l(a),"_name",void 0),Lf(l(a),"_state","closed"),Lf(l(a),"_reconnectInterrupter",void 0),Lf(l(a),"_url",void 0),Lf(l(a),"_retryConfig",void 0),Lf(l(a),"_reconnectCount",0),Lf(l(a),"_forceCloseTimeout",5e3),Lf(l(a),"_onlineReconnectListener",void 0),Lf(l(a),"_closeEstablishingTransmitter",(function(){})),Lf(l(a),"_store",void 0),Lf(l(a),"_joinChannelServiceRecordIndex",void 0),Lf(l(a),"_transmitter",void 0),Lf(l(a),"_useCompress",void 0),Lf(l(a),"_inflateLength",0),Lf(l(a),"_deflateLength",0),a._store=o,a._name=e,a._retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zw(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r),a._useCompress=i,a}return v(n,[{key:"url",get:function(){return this._url?this._url:null}},{key:"reconnectMode",get:function(){return this._reconnectMode},set:function(e){["tryNext","recover"].includes(e)&&this.resetReconnectCount(e),this._reconnectMode=e}},{key:"state",get:function(){return this._state},set:function(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(ab.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(ab.CONNECTED):"closed"===this._state?this.emit(ab.CLOSED):"failed"===this._state&&this.emit(ab.FAILED))}},{key:"resetReconnectCount",value:function(e){Zv.debug("".concat(this._name," reset reconnect count, reason: ").concat(e)),this._reconnectCount=0}},{key:"close",value:function(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this._reconnectInterrupter&&this._reconnectInterrupter(),this._transmitter){this._transmitter.onclose=null,this._transmitter.onopen=null,this._transmitter.onmessage=null;var n=this._transmitter;t?setTimeout((function(){return n.close()}),500):n.close(),this._transmitter=void 0}this.state=e?"failed":"closed",this._closeEstablishingTransmitter&&this._closeEstablishingTransmitter()}},{key:"reconnect",value:function(e,t){if(this._transmitter){var n;void 0!==e&&(this.reconnectMode=e),Zv.debug("[".concat(this._name,"] reconnect is triggered initiative")),"number"==typeof this._joinChannelServiceRecordIndex&&(null===(n=this._store)||void 0===n||n.recordJoinChannelService({status:"error",errors:[new Error(t)]},this._joinChannelServiceRecordIndex));var r=this._transmitter.onclose;this._transmitter.onclose=null,this._transmitter.close(),r&&r.bind(this._transmitter)({code:9999,reason:t})}else Zv.warning("[".concat(this._name,"] can not reconnect, no websocket"))}},{key:"getInflateData",value:function(){var e=this._inflateLength,t=this._deflateLength;return this.clearInflateData(),{inflateLength:e,deflateLength:t}}},{key:"setInflateData",value:function(e){this._deflateLength=this._deflateLength+e.originLength,this._inflateLength=this._inflateLength+e.compressedLength}},{key:"clearInflateData",value:function(){this._inflateLength=0,this._deflateLength=0}}]),n}(Uv);function Qw(e,t,n){if("getBigUint64"in DataView.prototype)return e.getBigUint64(t,n);var r=e.getUint32(t,n),i=e.getUint32(t+4,n),o=Number(!!n),a=Number(!n);return BigInt(r*a+i*o)<<BigInt(32)|BigInt(r*o+i*a)}function $w(e,t,n,r){if("setBigUint64"in DataView.prototype)return e.setBigUint64(t,n,r);var i=Number(n>>BigInt(32)),o=Number(n&BigInt(4294967295));r?(e.setUint32(t+4,i,r),e.setUint32(t,o,r)):(e.setUint32(t,i,r),e.setUint32(t+4,o,r))}!function(e){e[e.Default=0]="Default",e[e.Ack=1]="Ack"}(Jw||(Jw={}));var ex=function(){function e(t,n,r){p(this,e),Lf(this,"version",1),Lf(this,"initialRTO",void 0),Lf(this,"maxBatchAckCount",void 0),Lf(this,"maxRTO",void 0),Lf(this,"initialRTT",void 0),Lf(this,"ID",void 0),Lf(this,"rtt",void 0),Lf(this,"packetNumber",1),Lf(this,"rtoRatioMap",new Map),Lf(this,"timeoutMap",new Map),Lf(this,"unorderedPacketQueue",[]),Lf(this,"batchAckPacketQueue",[]),Lf(this,"lastOrderedPacketNumber",0),Lf(this,"batchAckTimer",void 0),Lf(this,"sendImpl",void 0),Lf(this,"receiveImpl",void 0),this.sendImpl=t,this.receiveImpl=n,this.ID=_w(7,"transmitter-"),this.initialRTO=void 0!==(null==r?void 0:r.initialRTO)?r.initialRTO:lg("TRANSMITTER_INITIAL_RTO"),this.initialRTT=void 0!==(null==r?void 0:r.initialRTT)?r.initialRTT:lg("TRANSMITTER_INITIAL_RTT"),this.rtt=void 0!==(null==r?void 0:r.initialRTT)?r.initialRTT:lg("TRANSMITTER_INITIAL_RTT"),this.maxBatchAckCount=void 0!==(null==r?void 0:r.maxBatchAckCount)?r.maxBatchAckCount:lg("TRANSMITTER_MAX_BATCH_ACK_COUNT"),this.maxRTO=void 0!==(null==r?void 0:r.maxRTO)?r.maxRTO:lg("TRANSMITTER_MAX_RTO")}return v(e,[{key:"packetize",value:function(e,t){return{type:Jw.Default,version:this.version,packetNumber:t,payload:e}}},{key:"serialize",value:function(e){switch(e.type){case Jw.Default:var t;t="string"==typeof e.payload?(new TextEncoder).encode(e.payload):e.payload;var n=new ArrayBuffer(t.length+15),r=new DataView(n);return r.setUint16(0,e.version),r.setUint8(2,e.type),r.setUint32(3,e.packetNumber),$w(r,7,BigInt(e.sendTs)),new Uint8Array(r.buffer).set(t,15),n;case Jw.Ack:var i=new ArrayBuffer(16),o=new DataView(i);return o.setUint16(0,e.version),o.setUint8(2,e.type),o.setUint32(3,e.maxAckPacketNumber),o.setUint8(7,e.shift),$w(o,8,BigInt(e.ackSendTs)),i}}},{key:"deserialize",value:function(e){var t=new DataView(e),n=t.getUint16(0),r=t.getUint8(2);switch(r){case Jw.Default:var i=t.getUint32(3),o=Qw(t,7),a=e.slice(15),s=(new TextDecoder).decode(a);return{version:n,type:r,packetNumber:i,sendTs:Number(o),payload:s};case Jw.Ack:var c=t.getUint32(3),u=t.getUint8(7),l=Qw(t,8);return{version:n,type:r,maxAckPacketNumber:c,shift:u,ackSendTs:Number(l)};default:throw Zv.error("[".concat(this.ID,"] Unrecognized packet type ").concat(r)),new Error("Unrecognized packet type ".concat(r))}}},{key:"sendMessage",value:function(e){var t=this,n=this.packetize(e,this.packetNumber);this.packetNumber=4294967295===this.packetNumber?1:this.packetNumber+1;var r=this.calculateRTO(n),i=window.setTimeout((function(){t.resendMessage(n)}),r);this.timeoutMap.set(n.packetNumber,i),this.sendPacket(n)}},{key:"onData",value:function(e){var t=this.deserialize(e);t.type===Jw.Default?this.ack(t):t.type===Jw.Ack&&(this.updateRTT(t,Math.round(performance.now())),this.clearRTO(t))}},{key:"close",value:function(){this.rtt=this.initialRTT,this.packetNumber=1,Array.from(this.timeoutMap.entries()).forEach((function(e){var t=a(e,2),n=(t[0],t[1]);window.clearTimeout(n)})),this.timeoutMap=new Map,this.rtoRatioMap=new Map,this.unorderedPacketQueue=[],this.batchAckPacketQueue=[],this.lastOrderedPacketNumber=0,void 0!==this.batchAckTimer&&window.clearTimeout(this.batchAckTimer)}},{key:"resendMessage",value:function(e){var t=this,n=this.calculateRTO(e),r=window.setTimeout((function(){t.resendMessage(e)}),n);this.timeoutMap.set(e.packetNumber,r),this.sendPacket(e)}},{key:"calculateRTO",value:function(e){var t=this.rtoRatioMap.get(e.packetNumber);if(void 0===t)return this.rtoRatioMap.set(e.packetNumber,1),this.initialRTO;var n=9*this.rtt/8*t;return this.rtoRatioMap.set(e.packetNumber,t+1),n>this.maxRTO?this.maxRTO:n}},{key:"updateRTT",value:function(e,t){var n=e.ackSendTs;this.rtt=this.rtt*(7/8)+(t-n-this.rtt)/8}},{key:"ack",value:function(e){var t=this;if(e.packetNumber===this.lastOrderedPacketNumber+1)for(this.batchAckPacketQueue.length>=this.maxBatchAckCount&&this.batchAck(),this.batchAckTimer?this.batchAckPacketQueue.push(e):(this.batchAckPacketQueue.push(e),this.batchAckTimer=window.setTimeout((function(){t.batchAck()}),this.rtt/8)),this.lastOrderedPacketNumber+=1,this.receiveImpl(e.payload);;){var n=this.unorderedPacketQueue[0];if(!n){this.unorderedPacketQueue.shift();break}this.batchAckTimer&&this.batchAck(),this.receiveImpl(n.payload),this.unorderedPacketQueue.shift(),this.lastOrderedPacketNumber+=1}else if(e.packetNumber<=this.lastOrderedPacketNumber){var r={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:Jw.Ack,version:this.version};this.sendPacket(r)}else if(e.packetNumber>this.lastOrderedPacketNumber){this.unorderedPacketQueue[e.packetNumber-this.lastOrderedPacketNumber-2]=e;var i={ackSendTs:e.sendTs,maxAckPacketNumber:e.packetNumber,shift:0,type:Jw.Ack,version:this.version};this.sendPacket(i)}}},{key:"batchAck",value:function(){window.clearTimeout(this.batchAckTimer),this.batchAckTimer=void 0;var e={ackSendTs:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].sendTs,maxAckPacketNumber:this.batchAckPacketQueue[this.batchAckPacketQueue.length-1].packetNumber,shift:this.batchAckPacketQueue.length-1,type:Jw.Ack,version:this.version};this.sendPacket(e),this.batchAckPacketQueue=[]}},{key:"sendPacket",value:function(e){e.type===Jw.Default&&(e.sendTs=Math.round(performance.now()));var t=this.serialize(e);this.sendImpl(t)}},{key:"clearRTO",value:function(e){for(var t=e.maxAckPacketNumber-e.shift;t<=e.maxAckPacketNumber;t++){var n=this.timeoutMap.get(t);void 0!==n&&window.clearTimeout(n),this.timeoutMap.delete(t),this.rtoRatioMap.delete(t)}}}]),e}(),tx=function(e){h(n,e);var t=f(n);function n(e,r){var i;p(this,n),i=t.call(this,e,r,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3?arguments[3]:void 0),Lf(l(i),"_initMutex",void 0),Lf(l(i),"_reconnectInterrupter",void 0),Lf(l(i),"_url",void 0),Lf(l(i),"_transmitter",void 0),Lf(l(i),"_addresses",void 0),Lf(l(i),"_reliableTransmission",void 0),i._initMutex=new Q_("datachannel");var o=r.timeout,a=r.timeoutFactor,s=Math.max(300,Math.floor(3*o/5)),c=Math.max(1.2,Math.floor(8*a)/10);return Qy.ONLINE&&(i._retryConfig.timeout=s,i._retryConfig.timeoutFactor=c),U_.on($y.NETWORK_STATE_CHANGE,(function(e,t){e!==t&&(i.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===Qy.ONLINE?(i._retryConfig.timeout=s,i._retryConfig.timeoutFactor=c):(i._retryConfig.timeout=o,i._retryConfig.timeoutFactor=a))})),i}return v(n,[{key:"getConnection",value:function(){if(this._reliableTransmission)return this._reliableTransmission}},{key:"init",value:function(){var e=u(c().mark((function e(t){var n,r,i=this,o=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:5e3,this._forceCloseTimeout=n,r=function(e,n){i._addresses=t,i.currentURLIndex=i._addresses.findIndex((function(e){return e.fingerprint||lg("FINGERPRINT")}));var r=i._addresses[i.currentURLIndex];i.state="connecting",i.createTransmitterConnection(r).then(e).catch(n),i.once(ab.CLOSED,(function(){return n(new Fv(Pv.WS_DISCONNECT))})),i.once(ab.CONNECTED,(function(){return e()}))},e.abrupt("return",this._initMutex.lock().then((function(e){return new Vd((function(e,t){r(e,t)})).then((function(){e()})).catch((function(){e()}))})));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendMessage",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._transmitter||!this._reliableTransmission)throw new Fv(Pv.WS_ABORT,"datachannel is not ready");try{t||(e=JSON.stringify(e)),this._reliableTransmission.sendMessage(e)}catch(e){throw new Fv(Pv.WS_ERR,"send datachannel signal message error"+e.toString())}}},{key:"unbindDcCloseEventListener",value:function(){this._transmitter&&(this._transmitter.onclose=null)}},{key:"sendMessageWithJSON",value:function(e){var t=JSON.stringify(e);return{compressed:t,compressedLength:t.length,origin:e}}},{key:"sendMessageWithUint8Array",value:function(e){return{compressed:e,compressedLength:e.byteLength,origin:e}}},{key:"createTransmitterConnection",value:function(e){var t=this;return this.connectionID+=1,this._joinChannelServiceRecordIndex=void 0,this._url="dc://".concat(e.ip,":").concat(e.port),new Vd((function(n,r){var i,o=function(){Zv.debug("[".concat(t._name,"] datachannel opened:"),t._url),t.reconnectMode="retry",t.state="connected",t.resetReconnectCount("opened"),n()},a=function(){var e=u(c().mark((function e(i){var o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(o=t._closeEstablishingTransmitter)||void 0===o||o.call(t),Zv.debug("[".concat(t._name,"] datachannel close ").concat(t._url,", code: ").concat(i.code,", reason: ").concat(i.reason,", current mode: ").concat(t.reconnectMode)),!(t._reconnectCount<t._retryConfig.maxRetryCount)){e.next=13;break}return"connected"===t.state&&(t.reconnectReason=i.reason,t.state="reconnecting"),a=Rw(t,ab.WILL_RECONNECT,t.reconnectMode)||t.reconnectMode,e.next=5,t.reconnectWithAction(a);case 5:if(s=e.sent,"closed"!==t.state){e.next=8;break}return e.abrupt("return",void Zv.debug("[".concat(t.connectionID,"] dc is closed, no need to reconnect")));case 8:if(s){e.next=10;break}return e.abrupt("return",(r(new Fv(Pv.WS_DISCONNECT,"datachannel reconnect failed: ".concat(i.code))),void t.close(!0)));case 10:n(),e.next=14;break;case 13:r(new Fv(Pv.WS_DISCONNECT,"datachannel close: ".concat(i.code))),t.close();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(e){var n;null===(n=t._reliableTransmission)||void 0===n||n.onData(e.data)};t._transmitter&&(t._transmitter.onclose=null,t._transmitter.close()),t._reliableTransmission&&(t._reliableTransmission.close(),t._reliableTransmission=void 0),Zv.debug("[".concat(t._name,"] start connect, address: ").concat(JSON.stringify(e)));var l=null===(i=t._store)||void 0===i?void 0:i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"}),d=Date.now();Tw(t,ab.TO_CONNECT_DATACHANNEL,e).then((function(e){var n,r;if(!e)throw new Error("transmissonInfo not exist yet");var i=e.transmitter,c=e.close;t._transmitter=i,null===(n=t._store)||void 0===n||n.signalChannelOpen();var u=Date.now()-d;Zv.debug("[choose dc] dc open cost ".concat(u,"ms")),t._reliableTransmission=new ex((function(e){var n;t._transmitter&&"open"===t._transmitter.readyState&&(null===(n=t._transmitter)||void 0===n||n.send(e))}),(function(e){"string"==typeof e&&t.emit(ab.ON_MESSAGE,e)})),t._closeEstablishingTransmitter=function(){var e;null===(e=t._reliableTransmission)||void 0===e||e.close(),t._reliableTransmission=void 0,c()},o&&o(),i.onclose=a,i.onmessage=s,null===(r=t._store)||void 0===r||r.recordJoinChannelService({endTs:Date.now(),status:"success"},l),t._joinChannelServiceRecordIndex=l})).catch((function(e){var n;if(null===(n=t._store)||void 0===n||n.recordJoinChannelService({endTs:Date.now(),status:e instanceof Fv&&e.code===Pv.WS_ABORT?"aborted":"error",errors:[e]},l),"closed"!==t.state){if(e instanceof Fv&&e.code===Pv.WS_ERR){var i=new Fv(Pv.WS_ERR,"init datachannel failed! Error: ".concat(e.toString()));return Zv.error("[".concat(t._name,"]").concat(i)),void r(i)}a&&a(e)}else r(new Fv(Pv.WS_DISCONNECT,"datachannel is closed: ".concat(e.toString())))}))}))}},{key:"reconnectWithAction",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s,l,d,h=this,f=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(f.length>1&&void 0!==f[1])||f[1],!(this._reconnectCount>=this._retryConfig.maxRetryCount)){e.next=3;break}return e.abrupt("return",!1);case 3:if(this._addresses){e.next=5;break}return e.abrupt("return",!1);case 5:if("closed"!==this.state){e.next=7;break}return e.abrupt("return",!1);case 7:if(this._onlineReconnectListener||U_.networkState!==Qy.OFFLINE||(this._onlineReconnectListener=U_.onlineWaiter&&U_.onlineWaiter.then((function(){h._onlineReconnectListener=void 0}))),r=!0,this._reconnectInterrupter=function(){r=!1},!n){e.next=14;break}return i=Gv(this._reconnectCount,this._retryConfig),Zv.debug("[".concat(this._name,"] wait ").concat(i,"ms to reconnect datachannel, mode: ").concat(t)),e.next=14,Vd.race([yw(i),this._onlineReconnectListener||new Vd((function(){}))]);case 14:if("closed"!==this.state&&r){e.next=16;break}return e.abrupt("return",!1);case 16:if(this._reconnectCount+=1,o=function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.emit(ab.RECONNECT_CREATE_CONNECTION,n),e.next=3,h.createTransmitterConnection(t);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=18,"retry"!==t){e.next=26;break}return a=this._addresses[this.currentURLIndex],this.emit(ab.RECONNECT_WAITTING_FINISH,t),e.next=24,o(a,t);case 24:e.next=50;break;case 26:if("tryNext"!==t){e.next=49;break}this.currentURLIndex+=1,s=this.currentURLIndex;case 29:if(!(s<this._addresses.length)){e.next=37;break}if(!this._addresses[s].fingerprint&&!lg("FINGERPRINT")){e.next=33;break}return this.currentURLIndex=s,e.abrupt("break",37);case 33:this.currentURLIndex+=1;case 34:s++,e.next=29;break;case 37:if(!(this.currentURLIndex>=this._addresses.length)){e.next=42;break}return Zv.debug("[".concat(this._name,"] the available addresses are exhausted, change to recover")),e.next=41,this.reconnectWithAction("recover",!1);case 41:return e.abrupt("return",e.sent);case 42:return Zv.debug("[".concat(this._name,"] datachannel url length: ").concat(this._addresses.length," current index: ").concat(this.currentURLIndex)),l=this._addresses[this.currentURLIndex],this.emit(ab.RECONNECT_WAITTING_FINISH,t),e.next=47,o(l,t);case 47:e.next=50;break;case 49:"recover"===t&&(Zv.debug("[".concat(this._name,"] start to failback to websocket")),this.resetReconnectCount("recover mode"),this.emit(ab.RECONNECT_WAITTING_FINISH,t),this.emit(ab.FAILBACK));case 50:return e.abrupt("return",!0);case 53:if(e.prev=53,e.t0=e.catch(18),Zv.error("[".concat(this._name,"] reconnect failed"),e.t0.toString()),!(null!=e.t0&&null!==(d=e.t0.data)&&void 0!==d&&d.desc&&Array.isArray(e.t0.data.desc)&&e.t0.data.desc.length&&e.t0.data.desc.includes("dynamic key expired"))){e.next=60;break}e.t1=(this.emit(ab.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1),e.next=63;break;case 60:return e.next=62,this.reconnectWithAction(t,n);case 62:e.t1=e.sent;case 63:return e.abrupt("return",e.t1);case 64:case"end":return e.stop()}}),e,this,[[18,53]])})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(Xw),nx=function(e){h(n,e);var t=f(n);function n(e,r){var i;return p(this,n),i=t.call(this),Lf(l(i),"_disconnectedReason",void 0),Lf(l(i),"_websocketReconnectReason",void 0),Lf(l(i),"_connectionState",Km.CLOSED),Lf(l(i),"reconnectToken",void 0),Lf(l(i),"websocket",void 0),Lf(l(i),"openConnectionTime",void 0),Lf(l(i),"clientId",void 0),Lf(l(i),"lastMsgTime",Date.now()),Lf(l(i),"uploadCache",[]),Lf(l(i),"uploadCacheInterval",void 0),Lf(l(i),"rttRolling",new Kw(5)),Lf(l(i),"pingpongTimer",void 0),Lf(l(i),"inflateDataTimer",void 0),Lf(l(i),"pingpongTimeoutCount",0),Lf(l(i),"joinResponse",void 0),Lf(l(i),"multiIpOption",void 0),Lf(l(i),"initError",void 0),Lf(l(i),"spec",void 0),Lf(l(i),"store",void 0),Lf(l(i),"onWebsocketMessage",(function(e){if(e instanceof ArrayBuffer)i.emit(Ym.ON_BINARY_DATA,e);else{var t=JSON.parse(e);if(i.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){var n="res-@".concat(t._id);i.emit(n,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")&&(i.emit(t._type,t._message),t._type===Xm.ON_NOTIFICATION&&i.handleNotification(t._message),t._type===Xm.ON_USER_BANNED))switch(t._message.error_code){case 14:i.close(Wm.UID_BANNED);break;case 15:i.close(Wm.IP_BANNED);break;case 16:i.close(Wm.CHANNEL_BANNED)}}})),i.clientId=e.clientId,i.spec=e,i.store=r,i.websocket=new tx("gateway-".concat(i.clientId),i.spec.retryConfig,!0,r),i.handleWebsocketEvents(),window.addEventListener("offline",(function(){i.connectionState===Km.CONNECTED&&i.reconnect("retry",ob.OFFLINE)})),i}return v(n,[{key:"connectionState",get:function(){return this._connectionState},set:function(e){e!==this._connectionState&&(this._connectionState=e,e===Km.CONNECTED?this.emit(Ym.WS_CONNECTED):e===Km.RECONNECTING?this.emit(Ym.WS_RECONNECTING,this._websocketReconnectReason):e===Km.CLOSED&&this.emit(Ym.WS_CLOSED,this._disconnectedReason))}},{key:"currentURLIndex",get:function(){return this.websocket.currentURLIndex}},{key:"url",get:function(){return this.websocket?this.websocket.url:null}},{key:"rtt",get:function(){return this.rttRolling.mean()}},{key:"request",value:function(){var e=u(c().mark((function e(t,n,r,i){var o,a,s,u,l,d,h,f,p,v=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=_w(6,""),a={_id:o,_type:t,_message:n},s=this.websocket.connectionID,u=function(){return new Vd((function(e,n){if(v.connectionState===Km.CONNECTED)return e();var r=function(){v.off(Ym.WS_CLOSED,i),e()},i=function(){v.off(Ym.WS_CONNECTED,r),n(new Fv(Pv.WS_ABORT))};v.once(Ym.WS_CONNECTED,r),v.once(Ym.WS_CLOSED,i),t!==Zm.PUBLISH&&t!==Zm.SUBSCRIBE&&t!==Zm.UNSUBSCRIBE&&t!==Zm.UNPUBLISH&&t!==Zm.CONTROL&&t!==Zm.RESTART_ICE||v.once(Ym.DISCONNECT_P2P,(function(){n(new Fv(Pv.DISCONNECT_P2P))})),t!==Zm.PUBLISH&&t!==Zm.RESTART_ICE||v.once(Ym.ABORT_P2P_EXECUTION,(function(){n(new Fv(Pv.DISCONNECT_P2P))}))}))},e.t0=this.connectionState!==Km.CONNECTING&&this.connectionState!==Km.RECONNECTING||t===Zm.JOIN||t===Zm.REJOIN,e.t0){e.next=5;break}return e.next=5,u();case 5:if(t===Zm.LEAVE&&(this.websocket.unbindDcCloseEventListener(),i=!0),this.websocket.sendMessage(a,!0,!1),!i){e.next=9;break}return e.abrupt("return");case 9:return l=new Vd((function(e,r){var i=!1,a=function(r,o){i=!0,e({isSuccess:"success"===r,message:o||{}}),v.off(Ym.WS_CLOSED,c),v.off(Ym.WS_RECONNECTING,c),v.emit(Ym.REQUEST_SUCCESS,t,n)};v.once("res-@".concat(o),a);var c=function e(){r(new Fv(Pv.WS_ABORT,"type: ".concat(t))),v.off(Ym.WS_CLOSED,e),v.off(Ym.WS_RECONNECTING,e),v.off("res-@".concat(o),a)};v.once(Ym.WS_CLOSED,c),v.once(Ym.WS_RECONNECTING,c),yw(lg("SIGNAL_REQUEST_TIMEOUT")).then((function(){v.websocket.connectionID!==s||i||(Zv.warning("dc request timeout, type: ".concat(t)),v.emit(Ym.REQUEST_TIMEOUT,t,n))}))})),d=null,e.prev=11,e.next=14,l;case 14:d=e.sent,e.next=36;break;case 17:if(e.prev=17,e.t1=e.catch(11),this.connectionState!==Km.CLOSED&&t!==Zm.LEAVE){e.next=21;break}throw new Fv(Pv.WS_ABORT);case 21:if(this.spec.forceWaitGatewayResponse&&!r){e.next=25;break}e.t2=e.t1.throw(),e.next=35;break;case 25:if(t!==Zm.JOIN&&t!==Zm.REJOIN){e.next=29;break}e.t3=null,e.next=34;break;case 29:return e.next=31,u();case 31:return e.next=33,this.request(t,n);case 33:e.t3=e.sent;case 34:e.t2=e.t3;case 35:return e.abrupt("return",e.t2);case 36:if(!d.isSuccess){e.next=38;break}return e.abrupt("return",d.message);case 38:if(h=Number(d.message.error_code||d.message.code),f=Ww(h),p=new Fv(Pv.UNEXPECTED_RESPONSE,"".concat(f.desc,": ").concat(d.message.error_str),{code:h,data:d.message}),"success"!==f.action){e.next=43;break}e.t4=d.message,e.next=68;break;case 43:if(Zv.warning("[".concat(this.websocket.connectionID,"] unexpected response from type ").concat(t,", error_code: ").concat(h,", message: ").concat(f.desc,", action: ").concat(f.action)),h!==Gm.ERR_TOO_MANY_BROADCASTERS){e.next=48;break}e.t5=t===Zm.JOIN||t===Zm.REJOIN?(this.initError=p,this.close(),p.throw()):p.throw(),e.next=67;break;case 48:if("failed"!==f.action){e.next=52;break}e.t6=p.throw(),e.next=66;break;case 52:if("quit"!==f.action){e.next=56;break}e.t7=(this.initError=p,this.close(),p.throw()),e.next=65;break;case 56:if(h===Gm.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=d.message.option,Zv.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",ob.MULTI_IP)):this.reconnect(f.action,ob.SERVER_ERROR),t!==Zm.JOIN&&t!==Zm.REJOIN){e.next=61;break}e.t8=null,e.next=64;break;case 61:return e.next=63,this.request(t,n);case 63:e.t8=e.sent;case 64:e.t7=e.t8;case 65:e.t6=e.t7;case 66:e.t5=e.t6;case 67:e.t4=e.t5;case 68:return e.abrupt("return",e.t4);case 69:case"end":return e.stop()}}),e,this,[[11,17]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"waitMessage",value:function(e,t){var n=this;return new Vd((function(r){var i=function i(o){(!t||t(o))&&(n.off(e,i),r(o))};n.on(e,i)}))}},{key:"upload",value:function(e,t){var n=this,r={_type:e,_message:t};try{this.websocket.sendMessage(r)}catch(e){var i=lg("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(r),this.uploadCache.length>i&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((function(){if(n.connectionState===Km.CONNECTED){var e=n.uploadCache.splice(0,1)[0];0===n.uploadCache.length&&(window.clearInterval(n.uploadCacheInterval),n.uploadCacheInterval=void 0),n.upload(e._type,e._message)}}),lg("UPLOAD_CACHE_INTERVAL")||2e3))}}},{key:"send",value:function(e,t){var n={_type:e,_message:t};this.websocket.sendMessage(n)}},{key:"init",value:function(e,t){var n=this;return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new Vd((function(r,i){n.once(Ym.WS_CONNECTED,(function(){return r(n.joinResponse)})),n.once(Ym.WS_CLOSED,(function(){return i(n.initError||new Fv(Pv.WS_ABORT))})),n.connectionState=Km.CONNECTING,n.websocket.init(e).catch(i),n.websocket.once(ab.FAILBACK,(function(){void 0===n.openConnectionTime&&i(new Fv(Pv.INIT_DATACHANNEL_TIMEOUT))})),n.inflateDataTimer&&window.clearInterval(n.inflateDataTimer),n.inflateDataTimer=window.setInterval((function(){n.handleInflateData()}),2e4),setTimeout((function(){t&&void 0===n.openConnectionTime&&(Zv.debug("[".concat(n.clientId,"] init datachannel timeout while join with failback to websocket")),i(new Fv(Pv.INIT_DATACHANNEL_TIMEOUT)))}),lg("DC_JOIN_WITH_FAILBACK"))}))}},{key:"close",value:function(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.inflateDataTimer&&(this.handleInflateData(),window.clearInterval(this.inflateDataTimer),this.inflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||Wm.LEAVE,this.connectionState=Km.CLOSED,Zv.debug("[".concat(this.clientId,"] ")+"will close datachannel in signal"),this.websocket.close(),e===Wm.FALLBACK&&(this.websocket.removeAllListeners(),this.websocket=new tx("gateway-".concat(this.clientId),this.spec.retryConfig,!0,this.store),this.handleWebsocketEvents())}},{key:"join",value:function(){var e=u(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.joinResponse){e.next=11;break}return this.emit(Ym.ABORT_P2P_EXECUTION),e.next=4,Tw(this,Ym.DATACHANNEL_CONNECTING);case 4:return t=e.sent,e.next=7,this.request(Zm.JOIN,t);case 7:if(n=e.sent){e.next=10;break}return e.abrupt("return",(this.emit(Ym.REPORT_JOIN_GATEWAY,Pv.TIMEOUT,this.url||""),!1));case 10:this.joinResponse=n,this.emit(Ym.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token;case 11:return e.abrupt("return",(this.connectionState=Km.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"rejoin",value:function(){var e=u(c().mark((function e(){var t,n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reconnectToken){e.next=2;break}throw new Fv(Pv.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");case 2:return(t=kw(this,Ym.REQUEST_REJOIN_INFO)).token=this.reconnectToken,e.next=6,this.request(Zm.REJOIN,t);case 6:return n=e.sent,e.abrupt("return",!!n&&(this.connectionState=Km.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),n.peers&&n.peers.forEach((function(e){r.emit(Xm.ON_USER_ONLINE,{uid:e.uid}),e.audio&&r.emit(Xm.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&r.emit(Xm.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?r.emit(Xm.MUTE_AUDIO,{uid:e.uid}):r.emit(Xm.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?r.emit(Xm.MUTE_VIDEO,{uid:e.uid}):r.emit(Xm.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?r.emit(Xm.ENABLE_LOCAL_AUDIO,{uid:e.uid}):r.emit(Xm.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?r.emit(Xm.ENABLE_LOCAL_VIDEO,{uid:e.uid}):r.emit(Xm.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||r.emit(Xm.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reconnect",value:function(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}},{key:"handleNotification",value:function(e){Zv.debug("[".concat(this.clientId,"] receive notification: "),e);var t=Ww(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(Wm.UID_BANNED),void this.close()):void this.reconnect(t.action,ob.SERVER_ERROR);Zv.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}},{key:"handlePingPong",value:function(){var e=this;if(this.websocket&&"connected"===this.websocket.state){this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;var t=lg("PING_PONG_TIME_OUT"),n=Date.now();this.pingpongTimeoutCount>=t&&(Zv.warning("PINGPONG Timeout. Last Socket Message: ".concat(n-this.lastMsgTime,"ms")),n-this.lastMsgTime>lg("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",ob.TIMEOUT):this.request(Zm.PING,void 0,!0).then((function(){e.pingpongTimeoutCount=0;var t=Date.now()-n;e.rttRolling.add(t),lg("REPORT_STATS")&&e.send(Zm.PING_BACK,{pingpongElapse:t})})).catch((function(e){}))}}},{key:"handleInflateData",value:function(){var e=this.websocket.getInflateData(),t=e.inflateLength,n=e.deflateLength;0!==t&&0!==n&&this.upload(Jm.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:n,ws_inflate_length:t})}},{key:"handleWebsocketEvents",value:function(){var e=this;this.websocket.on(ab.RECONNECT_WAITTING_FINISH,(function(t){e.emit(Ym.WS_RECONNECT_WAITTING_FINISH,t)})),this.websocket.on(ab.RECONNECT_CREATE_CONNECTION,(function(t){e.emit(Ym.WS_RECONNECT_CREATE_CONNECTION,t)})),this.websocket.on(ab.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(ab.CLOSED,(function(){e.connectionState=Km.CLOSED})),this.websocket.on(ab.FAILED,(function(){e._disconnectedReason=Wm.NETWORK_ERROR,e.connectionState=Km.CLOSED})),this.websocket.on(ab.RECONNECTING,(function(t){e._websocketReconnectReason=t,e.joinResponse=void 0,e.connectionState===Km.CONNECTED?e.connectionState=Km.RECONNECTING:e.connectionState=Km.CONNECTING})),this.websocket.on(ab.WILL_RECONNECT,(function(t,n){if(kw(e,Ym.IS_P2P_DISCONNECTED)&&"retry"===t)return Zv.debug("".concat(e.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e.reconnectToken=void 0,e.emit(Ym.NEED_RENEW_SESSION),e.emit(Ym.DISCONNECT_P2P),n("tryNext");"retry"!==t&&(Zv.debug("".concat(e.clientId," websockt will_connect event, renewSession reconnectMode is ").concat(t)),e.reconnectToken=void 0,e.emit(Ym.NEED_RENEW_SESSION),e.emit(Ym.DISCONNECT_P2P)),n(t)})),this.websocket.on(ab.CONNECTED,(function(){e.openConnectionTime=Date.now(),e.reconnectToken?e.rejoin().catch((function(t){Zv.warning("[".concat(e.clientId,"] rejoin failed ").concat(t)),e.reconnect("tryNext",ob.SERVER_ERROR)})):e.join().catch((function(t){if(e.emit(Ym.REPORT_JOIN_GATEWAY,t.message||t.code,e.url||""),t instanceof Fv&&t.code===Pv.UNEXPECTED_RESPONSE&&t.data.code===Gm.ERR_NO_AUTHORIZED)return Zv.warning("[".concat(e.clientId,"] reconnect no authorized, recover")),void e.reconnect("recover",ob.SERVER_ERROR);Zv.error("[".concat(e.clientId,"] join gateway request failed"),t.toString()),e.spec.forceWaitGatewayResponse?e.reconnect("tryNext",ob.SERVER_ERROR):(e.initError=t,e.close())}))})),this.websocket.on(ab.REQUEST_NEW_URLS,(function(t,n){Tw(e,Ym.REQUEST_RECOVER,e.multiIpOption).then(t).catch(n)})),this.websocket.on(ab.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(function(){e.emit(Xm.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})),this.websocket.on(ab.TO_CONNECT_DATACHANNEL,function(){var t=u(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Tw(e,Ym.DATACHANNEL_PRECONNECT,n).then(r).catch(i));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),this.websocket.on(ab.FAILBACK,(function(){void 0!==e.openConnectionTime&&e.emit(Ym.DATACHANNEL_FAILBACK)}))}}]),n}(Uv);function rx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ix(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rx(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ox=new Map,ax=function(e){h(n,e);var t=f(n);function n(e,r){var i;return p(this,n),i=t.call(this),Lf(l(i),"store",void 0),Lf(l(i),"joinInfo",void 0),Lf(l(i),"key",void 0),Lf(l(i),"signal",void 0),Lf(l(i),"role",void 0),Lf(l(i),"inChannelInfo",{joinAt:null,duration:0}),Lf(l(i),"spec",void 0),Lf(l(i),"_state","DISCONNECTED"),Lf(l(i),"_statsCollector",void 0),Lf(l(i),"_disconnectedReason",void 0),Lf(l(i),"isSignalRecover",!1),Lf(l(i),"hasChangeBGPAddress",!1),Lf(l(i),"trafficStatsInterval",void 0),Lf(l(i),"networkQualityInterval",void 0),Lf(l(i),"_joinGatewayStartTime",0),Lf(l(i),"_signalTimeout",!1),Lf(l(i),"_clientRoleOptions",void 0),Lf(l(i),"_isProactiveJoin",!1),i.store=e,i.spec=r,i.signal=i.store.useDataChannel?new nx(ix(ix({},r),{},{retryConfig:r.websocketRetryConfig}),e):new Yw(ix(ix({},r),{},{retryConfig:r.websocketRetryConfig}),e),i._statsCollector=r.statsCollector,i.role=r.role||"audience",i._clientRoleOptions=r.clientRoleOptions,i.handleSignalEvents(),i}return v(n,[{key:"state",get:function(){return this._state},set:function(e){if(e!==this._state){var t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(Iy.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(Iy.CONNECTION_STATE_CHANGE,e,t)}}},{key:"joinGatewayStartTime",get:function(){return this._joinGatewayStartTime},set:function(e){Zv.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}},{key:"join",value:function(){var e=u(c().mark((function e(t,n,r){var i,o,a,s,u,l,d,h,f,p=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.signal instanceof nx&&(i=!1,"disabled"!==t.cloudProxyServer?(Zv.debug("[".concat(this.store.clientId,"] Dc is not supported, because cloudProxyServer are not supported (").concat(t.cloudProxyServer,")")),i=!0):"".concat(t.apResponse.cid,"_").concat(t.apResponse.cert).length>255||"".concat(t.apResponse.cid,"_").concat(t.apResponse.cert).length<22?(Zv.debug("[".concat(this.store.clientId,"] Dc is not supported, because ticket length is incorrect, it has to be between 22 and 255")),i=!0):t.apResponse.addresses.some((function(e){return e.fingerprint}))||lg("FINGERPRINT")||(Zv.debug("[".concat(this.store.clientId,"] Dc is not supported, because fingerprint does not exist")),i=!0),i&&this.resetSignal()),this.store.joinGatewayStart(),"disabled"!==t.cloudProxyServer&&(this.hasChangeBGPAddress=!0),o=Date.now(),(a=ox.get(t.cname))||(a=new Map,ox.set(t.cname,a)),this._isProactiveJoin=!0,!a.has(t.uid)){e.next=7;break}throw s=new Fv(Pv.UID_CONFLICT),Y_.joinGateway(t.sid,{lts:o,succ:!1,ec:s.message,addr:null,uid:t.uid,cid:t.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!t.proxyServer,signalChannel:this.signal instanceof nx?"1":"0"}),this._isProactiveJoin=!1,s;case 7:if(a.set(t.uid,!0),this.joinInfo=t,this.key=n,u=0,this.joinGatewayStartTime=o,l=t.proxyServer,e.prev=11,Zv.debug("[".concat(this.store.clientId,"] use ").concat(this.signal instanceof nx?"datachannel":"websocket"," join uid ").concat(u)),!(this.signal instanceof nx)){e.next=18;break}return e.next=15,this.signal.init(t.apResponse.addresses,r);case 15:d=e.sent,e.next=22;break;case 18:return h=t.proxyServer,f=h?t.gatewayAddrs.map((function(e){var t=e.address.split(":");return"wss://".concat(h,"/ws/?h=").concat(t[0],"&p=").concat(t[1])})):t.gatewayAddrs.map((function(e){return"wss://".concat(e.address)})),e.next=21,this.signal.init(f,r);case 21:d=e.sent;case 22:u=d.uid,Zv.debug("[".concat(this.store.clientId,"] ").concat(this.signal instanceof nx?"datachannel":"websocket"," join uid ").concat(u," cost ").concat(Date.now()-this.joinGatewayStartTime)),e.next=32;break;case 25:if(e.prev=25,e.t0=e.catch(11),!e.t0||e.t0.code!==Pv.INIT_WEBSOCKET_TIMEOUT){e.next=29;break}throw Zv.warning("[".concat(this.store.clientId,"] User join failed"),e.t0.toString()),e.t0;case 29:if(!e.t0||e.t0.code!==Pv.INIT_DATACHANNEL_TIMEOUT){e.next=31;break}throw Zv.warning("[".concat(this.store.clientId,"] User join datachannel failed"),e.t0.toString()),this.resetSignal(),e.t0;case 31:throw Zv.error("[".concat(this.store.clientId,"] User join failed"),e.t0.toString()),Y_.joinGateway(t.sid,{lts:o,succ:!1,ec:e.t0.message,addr:this.signal.url,uid:t.uid,cid:t.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!l,signalChannel:this.signal instanceof nx?"1":"0"}),this._isProactiveJoin=!1,a.delete(t.uid),this.signal.close(),e.t0;case 32:return e.abrupt("return",(this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),Zv.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval((function(){p.updateTrafficStats().catch((function(e){Zv.warning("[".concat(p.store.clientId,"] get traffic stats error"),e.toString())}))}),3e3),this.networkQualityInterval=window.setInterval((function(){navigator&&void 0!==navigator.onLine&&!navigator.onLine?p.emit(Iy.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):p._signalTimeout?p.emit(Iy.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===p.state&&p._statsCollector.trafficStats?p.emit(Iy.NETWORK_QUALITY,{uplinkNetworkQuality:uw(p._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:uw(p._statsCollector.trafficStats.B_dnq)}):p.emit(Iy.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3),this.store.joinGatewayEnd(),u));case 33:case"end":return e.stop()}}),e,this,[[11,25]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"leave",value:function(){var e=u(c().mark((function e(){var t,n,r=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0],n=r.length>1?r[1]:void 0,"DISCONNECTED"===this.state){e.next=14;break}if(n!==Wm.FALLBACK&&(this.state="DISCONNECTING"),e.prev=3,e.t0=t||this.signal.connectionState!==Km.CONNECTED,e.t0){e.next=8;break}return e.next=8,function(e,t){return t===1/0?e:Vd.race([e,bw(t)])}(this.signal.request(Zm.LEAVE,void 0,!0),3e3);case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(3),Zv.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),e.t1);case 13:this.signal.close(n),n!==Wm.FALLBACK&&(this.state="DISCONNECTED"),this.reset();case 14:case"end":return e.stop()}}),e,this,[[3,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"publish",value:function(){var e=u(c().mark((function e(t,n,r){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));case 2:return i={state:"offer",p2p_id:this.store.p2pId,ortc:n,mode:this.spec.mode,extend:lg("PUB_EXTEND"),twcc:!!lg("PUBLISH_TWCC"),rtx:!!lg("USE_PUB_RTX")},e.prev=3,e.next=6,this.signal.request(Zm.PUBLISH,i,!0);case 6:return e.abrupt("return",e.sent._message);case 9:if(e.prev=9,e.t0=e.catch(3),!r||!e.t0.data||e.t0.data.code!==Gm.ERR_PUBLISH_REQUEST_INVALID){e.next=16;break}return Zv.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),e.t0.toString()),e.next=15,this.tryUnpubBeforeRepub(t,n);case 15:return e.abrupt("return",this.publish(t,n,!1));case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"unpublish",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=3;break}throw new Fv(Pv.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));case 3:return e.next=5,this.signal.request(Zm.UNPUBLISH,{stream_id:n,ortc:t},!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Zv.warning("[".concat(this.store.clientId,"] unpublish warning: "),e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"subscribe",value:function(){var e=u(c().mark((function e(t,n,r){var i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));case 2:return i={stream_id:t,stream_type:n.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!lg("SUBSCRIBE_TWCC"),rtx:!!lg("USE_SUB_RTX"),extend:lg("SUB_EXTEND"),ssrcId:n.ssrcId,svc:Array.isArray(lg("SVC"))&&0!==lg("SVC").length?lg("SVC"):void 0},e.prev=3,e.next=6,this.signal.request(Zm.SUBSCRIBE,i,!0);case 6:return e.abrupt("return",e.sent._message);case 9:if(e.prev=9,e.t0=e.catch(3),!r||!e.t0.data||e.t0.data.code!==Gm.ERR_SUBSCRIBE_REQUEST_INVALID){e.next=18;break}return Zv.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),e.t0.toString()),e.next=15,this.tryUnsubBeforeResub(t,n);case 15:return e.next=17,this.subscribe(t,n,!1);case 17:return e.abrupt("return",e.sent);case 18:throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"subscribeAll",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.state||"RECONNECTING"===this.state){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));case 2:return r={p2p_id:this.store.p2pId,users:t,dtx:!1,rtx:!!lg("USE_SUB_RTX")},e.prev=3,e.next=6,this.signal.request(Zm.SUBSCRIBE_STREAMS,r,!0);case 6:case 17:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!n||!e.t0.data||e.t0.data.code!==Gm.ERR_SUBSCRIBE_REQUEST_INVALID){e.next=18;break}return Zv.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),e.t0.toString()),e.next=15,this.tryMassUnsubBeforeResub(t);case 15:return e.next=17,this.subscribeAll(t,!1);case 18:throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setVideoProfile",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e){if(e.bitrateMax&&e.bitrateMin&&e.frameRate&&e.height&&e.width){var t=e.frameRate,n=e.width,r=e.height,i=!0;return"number"!=typeof t&&((t=t.exact||t.ideal||t.max||t.min||0)||(i=!1)),"number"!=typeof n&&((n=n.exact||n.ideal||n.max||n.min||0)||(i=!1)),"number"!=typeof r&&(r=r.exact||r.ideal||r.max||r.min||0,t||(i=!1)),i?{stream_type:0,width:n,height:r,fps:t,start_bps:1e3*e.bitrateMax,min_bps:1e3*e.bitrateMin,target_bps:1e3*e.bitrateMax}:void 0}}(t),!n){e.next=3;break}return e.abrupt("return",this.signal.request(Zm.SET_VIDEO_PROFILE,n));case 3:Zv.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unsubscribe",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signal.request(Zm.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:t,stream_id:n},!0);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Zv.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"massUnsubscribe",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signal.request(Zm.UNSUBSCRIBE_STREAMS,t,!0);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Zv.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"reconnectPC",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.iceParameters,r=t.dtlsParameters,i=t.rtpCapabilities,e.next=3,this.signal.request(Zm.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:n,dtlsParameters:r,rtpCapabilities:i}},!0);case 3:return e.t0=e.sent,e.t1=this.getCurrentGatewayAddress(),e.abrupt("return",{gatewayEstablishParams:e.t0,gatewayAddress:e.t1});case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getGatewayInfo",value:function(){return this.signal.request(Zm.GATEWAY_INFO)}},{key:"renewToken",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Zm.RENEW_TOKEN,t);case 2:this.key=t.token;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setClientRole",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&(this._clientRoleOptions=Object.assign({},n)),"CONNECTED"===this.state){e.next=2;break}return e.abrupt("return",void(this.role=t));case 2:return r=void 0,r="audience"===t?this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:0,e.next=6,this.signal.request(Zm.SET_CLIENT_ROLE,{role:t,level:r,client_ts:Date.now()});case 6:this.role=t;case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setRemoteVideoStreamType",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Zm.SWITCH_VIDEO_STREAM,{stream_id:t,stream_type:n});case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setDefaultRemoteVideoStreamType",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Zm.DEFAULT_VIDEO_STREAM,{stream_type:t});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setStreamFallbackOption",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Zm.SET_FALLBACK_OPTION,{stream_id:t,fallback_type:n});case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"pickSVCLayer",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Zm.PICK_SVC_LAYER,{stream_id:t,spatial_layer:n.spatialLayer,temporal_layer:n.temporalLayer});case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getInChannelInfo",value:function(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),ix({},this.inChannelInfo)}},{key:"getGatewayVersion",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Zm.GATEWAY_INFO);case 2:return e.abrupt("return",e.sent.version);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reset",value:function(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){var e=ox.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}},{key:"updateTurnConfigFromSignal",value:function(){if(this.joinInfo){var e=function(e){var t;return(t=e.startsWith("dc")?e.match(/(dc\:\/\/)?([^:]+):(\d+)/):e.match(/(wss\:\/\/)?([^:]+):(\d+)/))?{username:eg.username,password:eg.password,turnServerURL:t[2],tcpport:parseInt(t[3])+30,udpport:parseInt(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(ix(ix({},eg),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}}},{key:"updateTrafficStats",value:function(){var e=u(c().mark((function e(){var t,n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.state){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.signal.request(Zm.TRAFFIC_STATS,void 0,!0);case 4:(t=e.sent).timestamp=Date.now(),t.peer_delay.forEach((function(e){var t=n._statsCollector.trafficStats&&n._statsCollector.trafficStats.peer_delay.find((function(t){return t.peer_uid===e.peer_uid}));t&&t.B_st!==e.B_st&&Aw((function(){n.emit(Iy.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)}))})),this._statsCollector.updateTrafficStats(t);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getJoinMessage",value:function(e){if(!this.joinInfo||!this.key)throw new Fv(Pv.UNEXPECTED_ERROR,"can not generate join message, no join info");var t=Object.assign({},this.joinInfo.apResponse),n=lg("REPORT_APP_SCENARIO");if("string"!=typeof n)try{n=JSON.stringify(n)}catch(e){n=void 0}n&&n.length>128&&(n=void 0);var r=ix({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:Xv,browser:navigator.userAgent,process_id:lg("PROCESS_ID"),mode:this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:lg("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:n,attributes:{userAttributes:{enablePublishedUserList:lg("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:lg("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:"number"==typeof lg("SUBSCRIBE_AUDIO_FILTER_TOPN")?lg("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:"boolean"==typeof lg("ENABLE_PUBLISH_AUDIO_FILTER")?lg("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:"boolean"==typeof lg("ENABLE_USER_LICENSE_CHECK")?lg("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:!0===lg("USE_PUB_RTX")||!0===lg("USE_SUB_RTX")||void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(r.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(r.aes_mode=this.joinInfo.aesmode,lg("ENCRYPT_AES")?(r.aes_secret=this.joinInfo.aespassword,r.aes_encrypt=!0):r.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(r.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(r.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),void 0!==this.joinInfo.defaultVideoStream&&(r.default_video_stream=this.joinInfo.defaultVideoStream),r}},{key:"getRejoinMessage",value:function(){if(!this.joinInfo)throw new Fv(Pv.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}},{key:"handleSignalEvents",value:function(){var e=this;this.signal.on(Ym.WS_RECONNECT_WAITTING_FINISH,(function(t){["tryNext","recover"].includes(t)&&e.joinInfo&&Y_.adjustSessionStartTime(e.joinInfo.sid)})),this.signal.on(Ym.WS_RECONNECT_CREATE_CONNECTION,(function(t){e.joinGatewayStartTime=Date.now()})),this.signal.on(Ym.WS_RECONNECTING,(function(t){e.joinInfo&&Y_.WebSocketQuit(e.joinInfo.sid,{lts:Date.now(),succ:-1,cname:e.joinInfo.cname,uid:e.joinInfo.uid,cid:e.joinInfo.cid,errorCode:t||zm.NETWORK_ERROR}),e.joinInfo&&(e.state="RECONNECTING",Y_.sessionInit(e.joinInfo.sid,{lts:(new Date).getTime(),extend:e.isSignalRecover?{recover:!0}:{rejoin:!0},cname:e.joinInfo.cname,appid:e.joinInfo.appId,mode:e.spec.mode}),e.isSignalRecover=!1,e.joinGatewayStartTime=Date.now())})),this.signal.on(Ym.WS_CLOSED,(function(t){var n;switch(t){case Wm.LEAVE:n=zm.LEAVE;break;case Wm.UID_BANNED:case Wm.IP_BANNED:case Wm.CHANNEL_BANNED:case Wm.SERVER_ERROR:n=zm.SERVER_ERROR;break;case Wm.FALLBACK:n=zm.FALLBACK;break;case Wm.LICENSE_MISSING:case Wm.LICENSE_EXPIRED:case Wm.LICENSE_MINUTES_EXCEEDED:case Wm.LICENSE_PERIOD_INVALID:case Wm.LICENSE_MULTIPLE_SDK_SERVICE:case Wm.LICENSE_ILLEGAL:n=t;break;default:n=zm.NETWORK_ERROR}Zv.debug("[".concat(e.store.clientId,"] [signal] websocket closed, reason: ").concat(n||"undefined -> "+zm.NETWORK_ERROR)),e.joinInfo&&Y_.WebSocketQuit(e.joinInfo.sid,{lts:Date.now(),succ:t===Wm.LEAVE?1:-1,cname:e.joinInfo.cname,uid:e.joinInfo.uid,cid:e.joinInfo.cid,errorCode:n}),e._disconnectedReason=t,t!==Wm.FALLBACK&&(e.state="DISCONNECTED"),e.reset()})),this.signal.on(Ym.WS_CONNECTED,(function(){if(e.updateTurnConfigFromSignal(),e.state="CONNECTED",e.joinInfo&&("audience"===e.role&&e._clientRoleOptions&&e._clientRoleOptions.level&&(Zv.debug("[".concat(e.store.clientId,"] patch to send set client role, role: ").concat(e.role,", mode: ").concat(e.spec.mode,", level: ").concat(e._clientRoleOptions&&e._clientRoleOptions.level)),e.setClientRole(e.role,e._clientRoleOptions)),Y_.joinGateway(e.joinInfo.sid,{lts:e.joinGatewayStartTime,succ:!0,ec:null,vid:e.joinInfo.vid,addr:e.signal.url,uid:e.joinInfo.uid,cid:e.joinInfo.cid,firstSuccess:e._isProactiveJoin,avoidJoinStartTime:e.store.avoidJoinStart,isProxy:!!e.joinInfo.proxyServer,signalChannel:e.signal instanceof nx?"1":"0"}),e._isProactiveJoin=!1,e.joinInfo.useLocalAccessPoint&&1===e.joinInfo.setLocalAPVersion)){var t=e.signal.url&&e.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!t)return void Zv.error("[".concat(e.store.clientId,"] set local access point after joined failed: ").concat(t));ug("EVENT_REPORT_DOMAIN",t[1]),ug("EVENT_REPORT_BACKUP_DOMAIN",t[1]),ug("LOG_UPLOAD_SERVER","".concat(t[1],":6444"))}})),this.signal.on(Xm.ON_UPLINK_STATS,(function(t){e._statsCollector.updateUplinkStats(t)})),this.signal.on(Ym.REQUEST_RECOVER,(function(t,n,r){if(!e.joinInfo)return r(new Fv(Pv.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));t&&(e.joinInfo.multiIP=t,e.hasChangeBGPAddress=!0),e.isSignalRecover=!0,Tw(e,Iy.REQUEST_NEW_GATEWAY_LIST).then(n).catch(r)})),this.signal.on(Ym.REQUEST_JOIN_INFO,function(){var t=u(c().mark((function t(n){var r,i,o,a,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.updateTurnConfigFromSignal(),t.next=3,Tw(e,Iy.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(r=e.joinInfo)||void 0===r?void 0:r.turnServer});case 3:i=t.sent,o=i.iceParameters,a=i.dtlsParameters,s=i.rtpCapabilities,n(e.getJoinMessage({ortc:{iceParameters:o,dtlsParameters:a,rtpCapabilities:s,version:"2"}}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.signal.on(Ym.REQUEST_REJOIN_INFO,(function(t){t(e.getRejoinMessage())})),this.signal.on(Ym.REPORT_JOIN_GATEWAY,(function(t,n){e.joinInfo&&(Y_.joinGateway(e.joinInfo.sid,{lts:e.joinGatewayStartTime,succ:!1,ec:t,addr:n,uid:e.joinInfo.uid,cid:e.joinInfo.cid,firstSuccess:e._isProactiveJoin,avoidJoinStartTime:e.store.avoidJoinStart,isProxy:!!e.joinInfo.proxyServer,signalChannel:e.signal instanceof nx?"1":"0"}),e._isProactiveJoin=!1)})),this.signal.on(Ym.IS_P2P_DISCONNECTED,(function(t){t(kw(e,Iy.IS_P2P_DISCONNECTED))})),this.signal.on(Ym.DISCONNECT_P2P,(function(){e.emit(Iy.DISCONNECT_P2P)})),this.signal.on(Ym.NEED_RENEW_SESSION,(function(){e.emit(Iy.NEED_RENEW_SESSION)})),this.signal.on(Ym.REQUEST_SUCCESS,(function(){e._signalTimeout=!1})),this.signal.on(Ym.REQUEST_TIMEOUT,(function(){e._signalTimeout=!0})),this.signal.on(Ym.JOIN_RESPONSE,(function(t){var n=e.getCurrentGatewayAddress();e.emit(Iy.JOIN_RESPONSE,t,n)})),this.signal.on(Ym.DATACHANNEL_PRECONNECT,function(){var t=u(c().mark((function t(n,r,i){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.updateTurnConfigFromSignal(),o=e.getCurrentGatewayAddress(),t.abrupt("return",Tw(e,Iy.DATACHANNEL_PRECONNECT,n,o).then(r).catch(i));case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),this.signal.on(Ym.DATACHANNEL_CONNECTING,function(){var t=u(c().mark((function t(n){var r,i,o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tw(e,Iy.REQUEST_DC_CONNECTION_PARAMS);case 2:r=t.sent,i=r.iceParameters,o=r.dtlsParameters,a=r.rtpCapabilities,n(e.getJoinMessage({ortc:{iceParameters:i,dtlsParameters:o,rtpCapabilities:a,version:"2"}}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.signal.on(Ym.DATACHANNEL_FAILBACK,(function(){Zv.warning("[".concat(e.store.clientId,"] User join datachannel failed")),e.reset(),e.resetSignal(),e.emit(Iy.DATACHANNEL_FAILBACK)}))}},{key:"tryUnsubBeforeResub",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signal.request(Zm.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:t,ortc:[n]},!0);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),Zv.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),e.t0),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"tryUnpubBeforeRepub",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signal.request(Zm.UNPUBLISH,{stream_id:t,ortc:n},!0);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),Zv.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),e.t0),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"tryMassUnsubBeforeResub",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={users:t.map((function(e){return{stream_id:e.stream_id,stream_type:e.stream_type}}))},e.prev=1,e.next=4,this.signal.request(Zm.UNSUBSCRIBE_STREAMS,n,!0);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),Zv.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteLocal",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={action:t.find((function(e){return e.stream_type===Ty.Audio}))?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:t,stream_id:n},e.prev=1,e.next=4,this.signal.request(Zm.CONTROL,r,!0,!0);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),Zv.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"unmuteLocal",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={action:t.find((function(e){return e.stream_type===Ty.Audio}))?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:t,stream_id:n},e.prev=1,e.next=4,this.signal.request(Zm.CONTROL,r,!0,!0);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),Zv.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),e.t0),e.t0;case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"uploadStats",value:function(e,t){this.signal.upload(e,t)}},{key:"getSignalRTT",value:function(){return this.signal.rtt}},{key:"restartICE",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:t},e.prev=1,e.next=4,this.signal.request(Zm.RESTART_ICE,n,!0);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),Zv.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),e.t0),e.t0;case 10:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"reconnect",value:function(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,zm.P2P_FAILED)}},{key:"getCurrentGatewayAddress",value:function(){var e;if(!lg("GATEWAY_WSS_ADDRESS"))return null!==(e=this.joinInfo)&&void 0!==e&&e.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}},{key:"setPublishAudioFilterEnabled",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.request(Zm.SET_PARAMETER,{enablePublishAudioFilter:t});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetSignal",value:function(){this.signal&&(this.signal.removeAllListeners(),this.signal.close(Wm.FALLBACK)),this.store.useDataChannel=!1,this.signal=new Yw(ix(ix({},this.spec),{},{retryConfig:this.spec.websocketRetryConfig}),this.store),this.handleSignalEvents(),this.emit(Iy.RESET_SIGNAL,ky.websocket)}}]),n}(Uv);!function(){var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof S&&S];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function o(e,t){if(t)e:{var n=i;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in n))break e;n=n[a]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function s(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}if(o("Symbol",(function(e){function t(e,t){this.A=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}})),o("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<n.length;o++){var s=i[n[o]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&r(s.prototype,e,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return e})),"function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var c;e:{var u={};try{u.__proto__={a:!0},c=u.a;break e}catch(e){}c=!1}n=c?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var l=n;function d(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function h(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function f(e,t){return e.h=3,{value:t}}function p(e){this.g=new d,this.G=e}function v(e,t,n,r){try{var i=t.call(e.g.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.m=!1,i;var o=i.value}catch(t){return e.g.j=null,e.g.s(t),g(e)}return e.g.j=null,r.call(e.g,o),g(e)}function g(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(t){e.g.v=void 0,e.g.s(t)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function m(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){h(e.g);var n=e.g.j;return n?v(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),g(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function y(e,t){return t=new m(new p(t)),l&&e.prototype&&l(t,e.prototype),t}if(d.prototype.o=function(e){this.v=e},d.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},d.prototype.return=function(e){this.l={return:e},this.h=this.u},p.prototype.o=function(e){return h(this.g),this.g.j?v(this,this.g.j.next,e,this.g.o):(this.g.o(e),g(this))},p.prototype.s=function(e){return h(this.g),this.g.j?v(this,this.g.j.throw,e,this.g.o):(this.g.s(e),g(this))},o("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var b=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},_=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},E=function(e,t,n){return t instanceof Blob?(n=void 0!==n?String(n+""):"string"==typeof t.name?t.name:"blob",t.name===n&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],n)),[String(e),t]):[String(e),String(t)]},w=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},x="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,T=x.FormData,I=x.XMLHttpRequest&&x.XMLHttpRequest.prototype.send,R=x.Request&&x.fetch,k=x.navigator&&x.navigator.sendBeacon,O=x.Element&&x.Element.prototype,C=x.Symbol&&Symbol.toStringTag;C&&(Blob.prototype[C]||(Blob.prototype[C]="Blob"),"File"in x&&!File.prototype[C]&&(File.prototype[C]="File"));try{new File([],"")}catch(e){x.File=function(e,t,n){return e=new Blob(e,n||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(n&&void 0!==n.lastModified?new Date(n.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),C&&Object.defineProperty(e,C,{value:"File"}),e}}var A=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},N=function(e){this.i=[];var t=this;e&&b(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var n=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];b(n,(function(n){t.append(e.name,n)}))}else"select-multiple"===e.type||"select-one"===e.type?b(e.options,(function(n){!n.disabled&&n.selected&&t.append(e.name,n.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(n="textarea"===e.type?_(e.value):e.value,t.append(e.name,n))}))};if((e=N.prototype).append=function(e,t,n){w(arguments,2),this.i.push(E(e,t,n))},e.delete=function(e){w(arguments,1);var t=[];e=String(e),b(this.i,(function(n){n[0]!==e&&t.push(n)})),this.i=t},e.entries=function e(){var t,n=this;return y(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<n.i.length?e=f(e,n.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){w(arguments,1);for(var n=s(this),r=n.next();!r.done;r=n.next()){var i=s(r.value);r=i.next().value,i=i.next().value,e.call(t,i,r,this)}},e.get=function(e){w(arguments,1);var t=this.i;e=String(e);for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n][1];return null},e.getAll=function(e){w(arguments,1);var t=[];return e=String(e),b(this.i,(function(n){n[0]===e&&t.push(n[1])})),t},e.has=function(e){w(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,n,r,i=this;return y(e,(function(e){if(1==e.h&&(t=s(i),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,f(e,s(r).next().value));n=t.next(),e.h=2}))},e.set=function(e,t,n){w(arguments,2),e=String(e);var r=[],i=E(e,t,n),o=!0;b(this.i,(function(t){t[0]===e?o&&(o=!r.push(i)):r.push(t)})),o&&r.push(i),this.i=r},e.values=function e(){var t,n,r,i,o=this;return y(e,(function(e){if(1==e.h&&(t=s(o),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,(i=s(r)).next(),f(e,i.next().value));n=t.next(),e.h=2}))},N.prototype._asNative=function(){for(var e=new T,t=s(this),n=t.next();!n.done;n=t.next()){var r=s(n.value);n=r.next().value,r=r.next().value,e.append(n,r)}return e},N.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],n="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,r){return"string"==typeof e?t.push(n+A(_(r))+'"\r\n\r\n'+_(e)+"\r\n"):t.push(n+A(_(r))+'"; filename="'+A(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},N.prototype[Symbol.iterator]=function(){return this.entries()},N.prototype.toString=function(){return"[object FormData]"},O&&!O.matches&&(O.matches=O.matchesSelector||O.mozMatchesSelector||O.msMatchesSelector||O.oMatchesSelector||O.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),C&&(N.prototype[C]="FormData"),I){var j=x.XMLHttpRequest.prototype.setRequestHeader;x.XMLHttpRequest.prototype.setRequestHeader=function(e,t){j.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},x.XMLHttpRequest.prototype.send=function(e){e instanceof N?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),I.call(this,e)):I.call(this,e)}}R&&(x.fetch=function(e,t){return t&&t.body&&t.body instanceof N&&(t.body=t.body._blob()),R.call(this,e,t)}),k&&(x.navigator.sendBeacon=function(e,t){return t instanceof N&&(t=t._asNative()),k.call(this,e,t)}),x.FormData=N}}();var sx=function(){var e=lg("AREAS");return 0===e.length&&e.push(My.GLOBAL),yr(e).call(e,(function(e,t,n){var r=cx(t);return r?0===n?r:"".concat(e,",").concat(r):e}),"")},cx=function(e){return e===My.OVERSEA?"".concat(Gy.ASIA,",").concat(Gy.EUROPE,",").concat(Gy.AFRICA,",").concat(Gy.NORTH_AMERICA,",").concat(Gy.SOUTH_AMERICA,",").concat(Gy.OCEANIA):Gy[e]},ux=function(e){var t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map((function(e){var n=cb[e],r=Object.keys(n);r&&r.map((function(e){"CODE"!==e&&(t[e]=t[e].concat(n[e]))}))})),t},lx={GLOBAL:{ASIA:[My.CHINA,My.JAPAN,My.INDIA,My.KOREA,My.HKMC],EUROPE:[],NORTH_AMERICA:[My.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},dx=Object.keys(lx[My.GLOBAL]),hx=[My.CHINA,My.NORTH_AMERICA,My.EUROPE,My.ASIA,My.JAPAN,My.INDIA,My.OCEANIA,My.SOUTH_AMERICA,My.AFRICA,My.KOREA,My.HKMC,My.US],fx=function(e,t){var n,r,i=[];if(e.includes(My.GLOBAL)){var o=[My.GLOBAL,My.OVERSEA],a=Object.keys(cb);if(t===My.GLOBAL)throw new Fv(Pv.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===My.CHINA)i=[My.OVERSEA];else if(r=t,dx.includes(r)){var s=(n=t,lx[My.GLOBAL][n]||[]),c=[].concat(o,[t],g(s));i=a.filter((function(e){return!c.includes(e)}))}else if(function(e){var t=!1;return dx.forEach((function(n){lx[My.GLOBAL][n].includes(e)&&(t=!0)})),t}(t)){var u=function(e){var t;return dx.forEach((function(n){lx[My.GLOBAL][n].includes(e)&&(t=n)})),t}(t),l=[].concat(o,[u,t]);i=a.filter((function(e){return!l.includes(e)}))}else i=e;i=function(e){var t=[];return hx.forEach((function(n){e.includes(n)&&t.push(n)})),t.concat(e.filter((function(e){return!hx.includes(e)})))}(i)}else i=e;return i};function px(e){if(!e&&lg("AREAS").includes(My.EXTENSIONS))return Zv.debug("update area from ap : reset"),void vx($v,!0);if(lg("AREAS").includes(My.GLOBAL)&&e){var t=cb.EXTENSIONS;t&&(t={CODE:cx(My.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},Zv.debug("update area from ap success: ".concat(e,",config is "),t),ug("AREAS",[My.EXTENSIONS],!0),Object.keys(t).map((function(e){ug(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?t[e][0]:t[e])})))}}function vx(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Y_.reportApiInvoke(null,{name:Dm.SET_AREA,options:e,tag:Pm.TRACER});try{var r=[];if("string"==typeof e&&(r=[e]),Array.isArray(e)&&(e.forEach((function(e){if(!qy.includes(e))throw new Fv(Pv.INVALID_PARAMS,"invalid area code")})),r=e),"[object Object]"===Object.prototype.toString.call(e)){var i=e.areaCode,o=e.excludedArea;if(!i)throw new Fv(Pv.INVALID_PARAMS,"area code is needed");var a=i;"string"==typeof i&&(a=[i]),r=o?fx(a,o):a}if(!t){if(hg.AREAS){var s=new Fv(Pv.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return n.onError(s),void Zv.warning("setArea is prohibited because of config-distribute")}if(r.includes(My.GLOBAL)&&lg("AREAS")===My.EXTENSIONS){var c=new Fv(Pv.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return n.onError(c),void Zv.warning("setArea is prohibited because of ap extensions")}}ug("AREAS",r,t);var u=ux(r);Object.keys(u).map((function(e){ug(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?u[e][0]:u[e])})),Zv.debug("set area success:",r.join(","))}catch(e){throw n.onError(e),e}n.onSuccess()}function gx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gx(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yx=1;function bx(e,t,n,r,i){yx+=1;var o,a,s={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(Date.now()/1e3),seq:yx,requestId:yx,version:Xv,cname:n.cname},l={service_name:t,json_body:JSON.stringify(s)},d=e[0];return qv(u(c().mark((function e(){var n,i,s,u,h,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Date.now(),e.next=3,P_(d,{data:l,cancelToken:r,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});case 3:if(n=e.sent,a=Date.now()-o,0===n.code){e.next=7;break}throw i=new Fv(Pv.UNEXPECTED_RESPONSE,"live streaming ap error, code"+n.code,{retry:!0,responseTime:a}),Zv.error(i.toString()),i;case 7:if(200===(s=JSON.parse(n.json_body)).code){e.next=11;break}throw u=new Fv(Pv.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(s.code,", reason: ").concat(s.reason),{code:s.code,responseTime:a}),Zv.error(u.toString()),u;case 11:if(s.servers&&0!==s.servers.length){e.next=14;break}throw h=new Fv(Pv.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:s.code,responseTime:a}),Zv.error(h.toString()),h;case 14:return f=function(e,t){return{addressList:e.servers.map((function(e){return"wss://".concat(e.address.replace(/\./g,"-"),".").concat(lg("WORKER_DOMAIN"),":").concat(e.wss,"?serviceName=").concat(encodeURIComponent(t))})),workerToken:e.workerToken,vid:e.vid}}(s,t),e.abrupt("return",(lg("LIVE_STREAMING_ADDRESS")&&(f.addressList=lg("LIVE_STREAMING_ADDRESS")instanceof Array?lg("LIVE_STREAMING_ADDRESS"):[lg("LIVE_STREAMING_ADDRESS")]),mx(mx({},f),{},{responseTime:a})));case 16:case"end":return e.stop()}}),e)}))),(function(r,i){return Y_.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(r.addressList),firstSuccess:0===i,responseTime:a,serverIp:e[i%e.length]}),!1}),(function(r,i){return Y_.apworkerEvent(n.sid,{success:!1,sc:r.data&&r.data.code||200,serviceName:t,responseTime:a,serverIp:e[i%e.length]}),!!(r.code!==Pv.OPERATION_ABORTED&&r.code!==Pv.UNEXPECTED_RESPONSE||r.data&&r.data.retry)&&(d=e[(i+1)%e.length],!0)}),i)}var _x=1;function Ex(e,t,n,r){var i,o=e.url,s=e.areaCode,l=Date.now(),d=Ix(t,s,[lb.CHOOSE_SERVER]),h=a(d,2),f=h[0],p=h[1],v=U_.networkState;return qv(u(c().mark((function e(){var a,s,u,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=v&&U_.networkState===Qy.OFFLINE&&U_.onlineWaiter,!e.t0){e.next=4;break}return e.next=4,Vd.race([U_.onlineWaiter,yw(r&&r.maxRetryTimeout||Bv.maxRetryTimeout)]);case 4:return v=U_.networkState,e.next=7,P_(o,{data:f,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);case 7:return a=e.sent,s=a.data,u=a.headers,i="1"===u.http3?1:-1,Y_.reportResourceTiming(o,t.sid),wx(s,o,t,l,[lb.CHOOSE_SERVER],i),d=lw(s,lb.CHOOSE_SERVER),e.abrupt("return",(xx(d),aw(d,o)));case 13:case"end":return e.stop()}}),e)}))),(function(e){return e&&Y_.joinChooseServer(t.sid,{lts:l,succ:!0,csAddr:o,opid:p,serverList:e.gatewayAddrs.map((function(e){return e.address})),ec:null,cid:e.cid.toString(),uid:e.uid.toString(),csIp:e.csIp,unilbsServerIds:[lb.CHOOSE_SERVER].toString(),isHttp3:i}),!1}),(function(e){return e.code!==Pv.OPERATION_ABORTED&&(e.code===Pv.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(Y_.joinChooseServer(t.sid,{lts:l,succ:!1,csAddr:o,serverList:null,opid:p,ec:e.code,csIp:e.data&&e.data.csIp,unilbsServerIds:[lb.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:v}),isHttp3:i}),Zv.warning("[".concat(t.clientId,"] Choose server network error, retry"),e),!0))}),r)}function Sx(e,t,n,r){var i,o=e.url,s=e.areaCode,l=e.serviceIds,d=Date.now(),h=Ix(t,s,l),f=a(h,2),p=f[0],v=f[1],g=void 0;return qv(u(c().mark((function e(){var a,s,u,h,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=g&&U_.networkState===Qy.OFFLINE&&U_.onlineWaiter,!e.t0){e.next=4;break}return e.next=4,Vd.race([U_.onlineWaiter,yw(r&&r.maxRetryTimeout||Bv.maxRetryTimeout)]);case 4:return g=U_.networkState,e.next=7,P_(o,{data:p,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);case 7:return a=e.sent,s=a.data,u=a.headers,i="1"===u.http3?1:-1,Y_.reportResourceTiming(o,t.sid),wx(s,o,t,d,l,i),h=lw(s,lb.CHOOSE_SERVER),f=lw(s,"proxy5"===t.cloudProxyServer?lb.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?lb.CLOUD_PROXY:lb.CLOUD_PROXY_FALLBACK),e.abrupt("return",(xx(h),{gatewayInfo:aw(h,o),proxyInfo:f,url:o}));case 13:case"end":return e.stop()}}),e)}))),(function(e){return e.gatewayInfo&&Y_.joinChooseServer(t.sid,{lts:d,succ:!0,csAddr:o,serverList:e.gatewayInfo.gatewayAddrs.map((function(e){return e.address})),ec:null,opid:v,cid:e.gatewayInfo.cid.toString(),uid:e.gatewayInfo.uid.toString(),csIp:e.gatewayInfo.csIp,unilbsServerIds:l.toString(),isHttp3:i}),e.proxyInfo&&Y_.joinWebProxyAP(t.sid,{lts:d,sucess:1,apServerAddr:o,turnServerAddrList:e.proxyInfo.addresses.map((function(e){return e.ip})).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:l.toString()}),!1}),(function(e){return e.code!==Pv.OPERATION_ABORTED&&(e.code===Pv.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(Y_.joinWebProxyAP(t.sid,{lts:d,sucess:0,apServerAddr:o,turnServerAddrList:null,errorCode:e.code,eventType:t.cloudProxyServer,unilbsServerIds:l.toString(),extend:JSON.stringify({networkState:g})}),Zv.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),e),!0))}),r)}var wx=function(e,t,n,r,i,o){var a=[],s=function(a){4096===a.flag?Y_.joinChooseServer(n.sid,{lts:r,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:a.error.message,csIp:a.error.data&&a.error.data.csIp,unilbsServerIds:i.toString(),isHttp3:o}):1048576!==a.flag&&4194304!==a.flag&&4194310!==a.flag||Y_.joinWebProxyAP(n.sid,{lts:r,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:a.error.code,eventType:n.cloudProxyServer,unilbsServerIds:i.toString()})};if(e.response_body.forEach((function(t){var n=t.buffer.code;if(23===t.uri&&0===n&&!t.buffer.edges_services)if(4194310===t.buffer.flag)Zv.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),t.buffer.edges_services=[];else{var r={error:new Fv(Pv.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:t.buffer.flag};a.push(r),s(r)}if(0!==n){var i=Gw(n),o={error:new Fv(Pv.CAN_NOT_GET_GATEWAY_SERVER,i.desc,{desc:i.desc,retry:i.retry,csIp:e.detail[502]}),flag:t.buffer.flag};4194310===t.buffer.flag?Zv.warning(o.error.toString()):a.push(o),s(o)}})),a.length)throw Zv.warning("[".concat(n.clientId,"] multi unilbs ").concat(t," failed, ").concat(a.map((function(e){return"flag: ".concat(e.flag,", message: ").concat(e.error.message,", retry: ").concat(e.error.data.retry)})).join(" | "))),new Fv(Pv.CAN_NOT_GET_GATEWAY_SERVER,a.map((function(e){return"flag: ".concat(e.flag,", message: ").concat(e.error.message)})).join(" | "),{retry:!!a.find((function(e){return e.error.data.retry})),csIp:e.detail[502],desc:g(new Set(a.map((function(e){var t,n;return null==e||null===(t=e.error)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.desc})).filter((function(e){return!!e}))))})},xx=function(e){var t,n,r,i;if(e.addresses&&0===e.addresses.length&&0===e.code)throw new Fv(Pv.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(lg("AP_AREA")&&(null!==(r=e.detail)&&void 0!==r&&r[23]&&"string"==typeof(null===(i=e.detail)||void 0===i?void 0:i[23])?px(e.detail[23].toLowerCase()):px()),null!==(t=e.detail)&&void 0!==t&&t[19]&&"string"==typeof(null===(n=e.detail)||void 0===n?void 0:n[19]))for(var o=e.detail[19],a=null==o?void 0:o.split(";"),s=0;s<a.length;s++){var c,u=Mh(c=a[s]).call(c);e.addresses[s]&&a&&(e.addresses[s].fingerprint=u)}if(lg("GATEWAY_ADDRESS")&&lg("GATEWAY_ADDRESS").length>0){Zv.debug("assign gateway address to",lg("GATEWAY_ADDRESS"));var l=lg("GATEWAY_ADDRESS").map((function(t){var n,r,i=null!==(n=null===(r=e.addresses.find((function(e){return e.ip===t.ip&&e.port===t.port})))||void 0===r?void 0:r.fingerprint)&&void 0!==n?n:"";return{ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:i}}));e.addresses=l}},Tx=function(e,t){if(e.response_body&&e.response_body.length){var n=e.response_body[0];if(0!==n.buffer.code){var r=Gw(n.buffer.code);throw new Fv(Pv.UPDATE_TICKET_FAILED,"[".concat(n.buffer.code,"]: ").concat(r.desc),{retry:r.retry})}return n.buffer.ticket}throw Zv.debug("update ticket request received ap response without response body:",t),new Fv(Pv.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},Ix=function(e,t,n){var r=Math.floor(Math.random()*Math.pow(10,12)),i={appid:e.appId,client_ts:Date.now(),opid:r,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:{6:e.stringUid,11:t,12:lg("USE_NEW_TOKEN")?"1":void 0,22:t},key:e.token,service_ids:n,uid:e.uid||0}}]};i.request_bodies.forEach((function(t){e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))}));var o=new FormData;return o.append("request",JSON.stringify(i)),[o,r]},Rx=function(e,t){var n=Math.floor(Math.random()*Math.pow(10,12)),r={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map((function(e){return{ip:e.ip,port:e.port}}))}}]},i=new FormData;return i.append("request",JSON.stringify(r)),[i,n]},kx=0;function Ox(e,t,n,r){return Cx.apply(this,arguments)}function Cx(){return Cx=u(c().mark((function e(t,n,r,i){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=u(c().mark((function e(t,n,r,i){var o,a,s,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null,a=[],s=function(){var e=u(c().mark((function e(){var o,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=lg("WEBCS_DOMAIN").slice(0,lg("AJAX_REQUEST_CONCURRENT")).map((function(e){return{url:t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v2/transpond/webrtc?v=2"):"https://".concat(e,"/api/v2/transpond/webrtc?v=2"),areaCode:sx()}})),s=i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:o.map((function(e){return e.url}))}),e.next=4,Vw({fragementLength:lg("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:function(e){return Zv.debug("[".concat(t.clientId,"] Connect to choose_server:"),e.url),Ex(e,t,n,r)},allFailedhandler:function(e){throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:a});case 4:return u=e.sent,e.abrupt("return",(i.recordJoinChannelService({endTs:Date.now(),status:"success"},s),u));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=u(c().mark((function e(){var s,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yw(1e3);case 2:if(null===o){e.next=4;break}return e.abrupt("return",o);case 4:return s=lg("WEBCS_DOMAIN_BACKUP_LIST").map((function(e){return{url:t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v2/transpond/webrtc?v=2"):"https://".concat(e,"/api/v2/transpond/webrtc?v=2"),areaCode:sx()}})),u=i.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:s.map((function(e){return e.url}))}),e.next=8,Vw({fragementLength:lg("FRAGEMENT_LENGTH"),referenceList:s,asyncMapHandler:function(e){return Zv.debug("[".concat(t.clientId,"] Connect to backup choose_server:"),e.url),Ex(e,t,n,r)},allFailedhandler:function(e){throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},u),e[0]},promisesCollector:a});case 8:return l=e.sent,e.abrupt("return",(i.recordJoinChannelService({endTs:Date.now(),status:"success"},u),l));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=2,e.next=5,xw([s(),l()]);case 5:return o=e.sent,a.length&&a.forEach((function(e){return e.cancel&&"function"==typeof e.cancel&&e.cancel()})),e.abrupt("return",o);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0[0];case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,n,r,i),e.next=3,o;case 3:return e.t0=e.sent,e.abrupt("return",{gatewayInfo:e.t0});case 5:case"end":return e.stop()}}),e)}))),Cx.apply(this,arguments)}function Ax(e,t,n,r,i){return Nx.apply(this,arguments)}function Nx(){return Nx=u(c().mark((function e(t,n,r,i,o){var a,s,u,l,d,h,f,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("disabled"!==(a=t.cloudProxyServer)){e.next=18;break}if(i){e.next=4;break}return e.abrupt("return");case 4:if(!t.useLocalAccessPoint){e.next=8;break}return e.next=7,Ox(t,n,r,o);case 7:case 17:return e.abrupt("return",e.sent);case 8:if(!lg("JOIN_WITH_FALLBACK_MEDIA_PROXY")){e.next=15;break}return e.next=11,Mx(t,n,r,o);case 11:return s=e.sent,u=s.gatewayInfo,l=s.proxyInfo,e.abrupt("return",(t.turnServer&&"auto"!==t.turnServer.mode||(t.turnServer={mode:"manual",servers:l.map((function(e){return{turnServerURL:e.address,tcpport:e.tcpport||eg.tcpport,udpport:e.udpport||eg.udpport,username:e.username||eg.username,password:e.password||eg.password,forceturn:!1,security:!0}}))}),{gatewayInfo:u}));case 15:return e.next=17,Ox(t,n,r,o);case 18:return e.next=20,Mx(t,n,r,o);case 20:return d=e.sent,h=d.proxyInfo,f=d.gatewayInfo,p={gatewayInfo:f},e.abrupt("return",(t.turnServer={mode:"manual",servers:h.map((function(e){return{turnServerURL:e.address,tcpport:"proxy3"===a?void 0:e.tcpport?e.tcpport:eg.tcpport,udpport:"proxy4"===a?void 0:e.udpport?e.udpport:eg.udpport,username:e.username||eg.username,password:e.password||eg.password,forceturn:"proxy4"!==a,security:"proxy5"===a}}))},Zv.debug("[".concat(t.clientId,"] set proxy server: ").concat(t.proxyServer,", mode: ").concat(a)),p));case 25:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function jx(e,t,n,r,i){return Dx.apply(this,arguments)}function Dx(){return Dx=u(c().mark((function e(t,n,r,i,o){var a,s,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=lg("ACCOUNT_REGISTER").slice(0,lg("AJAX_REQUEST_CONCURRENT")),s=[],s=n.proxyServer?a.map((function(e){return"https://".concat(n.proxyServer,"/ap/?url=").concat(e+"/api/v1")})):a.map((function(e){return"https://".concat(e,"/api/v1")})),l=null==o?void 0:o.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:s}),e.prev=4,e.next=7,function(){var e=u(c().mark((function e(t,n,r,i,o){var a,s,u,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Date.now(),s={sid:r.sid,opid:10,appid:r.appId,string_uid:n},u=t[0],e.next=4,qv((function(){return P_(u+"".concat(-1===u.indexOf("?")?"?":"&","action=stringuid"),{data:s,cancelToken:i,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}})}),(function(e,r){if(0===e.code){if(e.uid<=0||e.uid>=Math.pow(2,32))throw Zv.error("Invalid Uint Uid ".concat(n," => ").concat(e.uid),e),Y_.reqUserAccount(s.sid,{lts:a,success:!1,serverAddr:u,stringUid:s.string_uid,uid:e.uid,errorCode:Pv.INVALID_UINT_UID_FROM_STRING_UID,extend:s}),new Fv(Pv.INVALID_UINT_UID_FROM_STRING_UID);return Y_.reqUserAccount(s.sid,{lts:a,success:!0,serverAddr:u,stringUid:s.string_uid,uid:e.uid,errorCode:null,extend:s}),!1}var i=Gw(e.code);return i.retry&&(u=t[(r+1)%t.length]),Y_.reqUserAccount(s.sid,{lts:a,success:!1,serverAddr:u,stringUid:s.string_uid,uid:e.uid,errorCode:i.desc,extend:s}),i.retry}),(function(e,n){return e.code!==Pv.OPERATION_ABORTED&&(Y_.reqUserAccount(s.sid,{lts:a,success:!1,serverAddr:u,stringUid:s.string_uid,uid:null,errorCode:e.code,extend:s}),u=t[(n+1)%t.length],!0)}),o);case 4:if(0===(l=e.sent).code){e.next=8;break}throw d=Gw(l.code),new Fv(Pv.UNEXPECTED_RESPONSE,d.desc);case 8:return e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}()(s,t,n,r,i);case 7:return d=e.sent,e.abrupt("return",(null==o||o.recordJoinChannelService({status:"success",endTs:Date.now()},l),d.uid));case 11:throw e.prev=11,e.t0=e.catch(4),null==o||o.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[e.t0]},l),e.t0;case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),Dx.apply(this,arguments)}function Px(e,t,n){return Lx.apply(this,arguments)}function Lx(){return Lx=u(c().mark((function e(t,n,r){var i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lg("CDS_AP").slice(0,lg("AJAX_REQUEST_CONCURRENT")).map((function(e){return t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1"):"https://".concat(e,"/api/v1?action=config")})).map((function(e){return function(e,t,n,r){var i=of(),o={flag:64,cipher_method:0,features:{device:i.name,system:i.os,system_general:navigator.userAgent,vendor:t.appId,version:Xv,cname:t.cname,sid:t.sid,session_id:t.sid,detail:"",proxyServer:t.proxyServer}};return qv((function(){return P_(e,{data:o,timeout:1e3,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}})}),void 0,(function(e){return e.code!==Pv.OPERATION_ABORTED}),r)}(e,t,n,r)})),o=null,a=null,s={},e.prev=2,e.next=5,xw(i);case 5:o=e.sent,e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(2),e.t0.code!==Pv.OPERATION_ABORTED){e.next=12;break}throw e.t0;case 12:a=e.t0;case 13:if(i.forEach((function(e){return e.cancel()})),Y_.reportApiInvoke(t.sid,{name:Dm.REQUEST_CONFIG_DISTRIBUTE,options:{error:a,res:o}}).onSuccess(),o&&o.test_tags)try{s=function(e){if(!e.test_tags)return{};var t=e.test_tags,n=Object.keys(t),r={};return n.forEach((function(e){var n,i=Mh(n=e.slice(4)).call(n),o=JSON.parse(t[e])[1];r[i]=o})),r}(o)}catch(t){}return e.abrupt("return",s);case 16:case"end":return e.stop()}}),e,null,[[2,8]])}))),Lx.apply(this,arguments)}function Mx(e,t,n,r){return Ux.apply(this,arguments)}function Ux(){return Ux=u(c().mark((function e(t,n,r,i){var o,a,s,l,d,h,f,p,v,g,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=lg("PROXY_SERVER_TYPE3"),a=function(e,t,n){var r=n||o;return Array.isArray(r)&&(r=t%2==0?o[1]:o[0]),"https://".concat(r,"/ap/?url=").concat(e)},s=null,l=[],d=function(){var e=u(c().mark((function e(){var o,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=lg("WEBCS_DOMAIN").slice(0,lg("AJAX_REQUEST_CONCURRENT")).map((function(e,n){return{url:"disabled"===t.cloudProxyServer&&t.proxyServer?a("".concat(e,"/api/v2/transpond/webrtc?v=2"),n,t.proxyServer):"disabled"===t.cloudProxyServer||"fallback"===t.cloudProxyServer?"https://".concat(e,"/api/v2/transpond/webrtc?v=2"):a("".concat(e,"/api/v2/transpond/webrtc?v=2"),n),areaCode:sx(),serviceIds:[lb.CHOOSE_SERVER,"proxy5"===t.cloudProxyServer?lb.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?lb.CLOUD_PROXY:lb.CLOUD_PROXY_FALLBACK]}})),s=i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:o.map((function(e){return e.url}))}),e.next=4,Vw({fragementLength:lg("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:function(e){return Zv.debug("[".concat(t.clientId,"] Connect to choose_server:"),e.url),Sx(e,t,n,r)},allFailedhandler:function(e){throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:l});case 4:return u=e.sent,e.abrupt("return",(i.recordJoinChannelService({endTs:Date.now(),status:"success"},s),u));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=u(c().mark((function e(){var o,u,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yw(1e3);case 2:if(null===s){e.next=4;break}return e.abrupt("return",s);case 4:return o=lg("WEBCS_DOMAIN_BACKUP_LIST").map((function(e,n){return{url:"disabled"===t.cloudProxyServer&&t.proxyServer?a("".concat(e,"/api/v2/transpond/webrtc?v=2"),n,t.proxyServer):"disabled"===t.cloudProxyServer||"fallback"===t.cloudProxyServer?"https://".concat(e,"/api/v2/transpond/webrtc?v=2"):a("".concat(e,"/api/v2/transpond/webrtc?v=2"),n),areaCode:sx(),serviceIds:[lb.CHOOSE_SERVER,"proxy5"===t.cloudProxyServer?lb.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?lb.CLOUD_PROXY:lb.CLOUD_PROXY_FALLBACK]}})),u=i.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:o.map((function(e){return e.url}))}),e.next=8,Vw({fragementLength:lg("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:function(e){return Zv.debug("[".concat(t.clientId,"] Connect to backup choose_server:"),e.url),Sx(e,t,n,r)},allFailedhandler:function(e){throw i.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},u),e[0]},promisesCollector:l});case 8:return d=e.sent,e.abrupt("return",(i.recordJoinChannelService({endTs:Date.now(),status:"success"},u),d));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=3,e.next=6,xw([d(),h()]);case 6:g=e.sent,f=g.gatewayInfo,p=g.proxyInfo,v=g.url,e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(3),e.t0[0];case 15:if(l.length&&l.forEach((function(e){return e.cancel&&"function"==typeof e.cancel&&e.cancel()})),f&&p){e.next=17;break}throw new Fv(Pv.UNEXPECTED_ERROR,"missing gateway or proxy response").print();case 17:return t.apUrl=v,"disabled"!==t.cloudProxyServer&&Array.isArray(o)&&v&&(m=/^https?:\/\/(.+?)(\/.*)?$/.exec(v)[1],o.includes(m)&&(t.proxyServer=m,Zv.setProxyServer(m),Y_.setProxyServer(m))),e.t1=f,e.next=21,dw(p,f.uid);case 21:return e.t2=e.sent,s={gatewayInfo:e.t1,proxyInfo:e.t2},e.abrupt("return",s);case 24:case"end":return e.stop()}}),e,null,[[3,12]])}))),Ux.apply(this,arguments)}function Vx(e,t,n,r){return Fx.apply(this,arguments)}function Fx(){return Fx=u(c().mark((function e(t,n,r,i){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=lg("UAP_AP").slice(0,lg("AJAX_REQUEST_CONCURRENT")).map((function(e){return n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")})),e.next=3,bx(o,t,n,r,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Fx.apply(this,arguments)}function Bx(e,t,n){return Gx.apply(this,arguments)}function Gx(){return Gx=u(c().mark((function e(t,n,r){var i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lg("UAP_AP").slice(0,lg("AJAX_REQUEST_CONCURRENT")).map((function(e){return t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")})).map((function(e){return function(e,t,n,r){var i={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:Date.now(),version:Xv,cname:t.cname,uid:t.uid.toString(),requestId:_x,seq:_x};_x+=1;var o={service_name:"tele_channel",json_body:JSON.stringify(i)};return qv(u(c().mark((function t(){var r,i,a,s,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P_(e,{data:o,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});case 2:if(0===(r=t.sent).code){t.next=6;break}throw i=new Fv(Pv.UNEXPECTED_RESPONSE,"cross channel ap error, code"+r.code,{retry:!0}),Zv.error(i.toString()),i;case 6:if(200===(a=JSON.parse(r.json_body)).code){t.next=10;break}throw s=new Fv(Pv.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(a.code,", reason: ").concat(a.reason)),Zv.error(s.toString()),s;case 10:if(a.servers&&0!==a.servers.length){t.next=13;break}throw u=new Fv(Pv.UNEXPECTED_RESPONSE,"cross channel app center empty server"),Zv.error(u.toString()),u;case 13:return t.abrupt("return",{vid:a.vid,workerToken:a.workerToken,addressList:(lg("CHANNEL_MEDIA_RELAY_SERVERS")||a.servers).map((function(e){return"wss://".concat(e.address.replace(/\./g,"-"),".").concat(lg("WORKER_DOMAIN"),":").concat(e.wss)}))});case 14:case"end":return t.stop()}}),t)}))),void 0,(function(e){return!!(e.code!==Pv.OPERATION_ABORTED&&e.code!==Pv.UNEXPECTED_RESPONSE||e.data&&e.data.retry)}),r)}(e,t,n,r)})),e.prev=1,e.next=4,xw(i);case 4:return o=e.sent,e.abrupt("return",(i.forEach((function(e){return e.cancel()})),o));case 8:throw e.prev=8,e.t0=e.catch(1),e.t0[0];case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),Gx.apply(this,arguments)}function qx(e,t,n){return Wx.apply(this,arguments)}function Wx(){return Wx=u(c().mark((function e(t,n,r){var i,o,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,o=[],s=function(){var e=u(c().mark((function e(s){var l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=lg(s?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map((function(e){return t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v2/transpond/webrtc?v=2"):"https://".concat(e,"/api/v2/transpond/webrtc?v=2")})),e.t0=s,!e.t0){e.next=6;break}return e.next=5,yw(1e3);case 5:e.t0=null!==i;case 6:if(!e.t0){e.next=10;break}e.t1=i,e.next=13;break;case 10:return e.next=12,Vw({fragementLength:lg("FRAGEMENT_LENGTH"),referenceList:l,asyncMapHandler:function(e){return Zv.debug("[".concat(t.clientId,"] update ticket, Connect to ").concat(s?"backup":""," choose_server:"),e),function(e,t,n,r){var i=Rx(t,[lb.CHOOSE_SERVER]),o=a(i,1)[0],s=U_.networkState;return qv(u(c().mark((function t(){var i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=s&&U_.networkState===Qy.OFFLINE&&U_.onlineWaiter,!t.t0){t.next=4;break}return t.next=4,Vd.race([U_.onlineWaiter,yw(r&&r.maxRetryTimeout||Bv.maxRetryTimeout)]);case 4:return s=U_.networkState,t.next=7,P_(e,{data:o,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0);case 7:return i=t.sent,t.abrupt("return",Tx(i,e));case 9:case"end":return t.stop()}}),t)}))),(function(){return!1}),(function(e){return e.code!==Pv.OPERATION_ABORTED&&(e.code===Pv.UPDATE_TICKET_FAILED?e.data.retry:(Zv.warning("[".concat(t.clientId,"] update ticket network error, retry"),e),!0))}),r)}(e,t,n,r)},allFailedhandler:function(e){throw e[0]},promisesCollector:o});case 12:e.t1=e.sent;case 13:return e.abrupt("return",e.t1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.prev=2,e.next=5,xw([s(!1),s(!0)]);case 5:return i=e.sent,o.length&&o.forEach((function(e){return e.cancel&&"function"==typeof e.cancel&&e.cancel()})),e.abrupt("return",i);case 10:throw e.prev=10,e.t0=e.catch(2),e.t0[0];case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),Wx.apply(this,arguments)}function Hx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hx(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kx=function(e){h(n,e);var t=f(n);function n(){var e;return p(this,n),e=t.call(this),Lf(l(e),"configs",void 0),Lf(l(e),"joinInfo",void 0),Lf(l(e),"cancelToken",void 0),Lf(l(e),"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),Lf(l(e),"interval",void 0),Lf(l(e),"mutex",new Q_("config-distribute")),Lf(l(e),"mutableParamsRead",!1),e}return v(n,[{key:"startGetConfigDistribute",value:function(e,t){var n=this;this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),lg("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval((function(){n.updateConfigDistribute()}),lg("CONFIG_DISTRIBUTE_INTERVAL")))}},{key:"stopGetConfigDistribute",value:function(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}},{key:"awaitConfigDistributeComplete",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mutex.isLocked){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.mutex.lock();case 4:e.t0=e.sent,(0,e.t0)();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateConfigDistribute",value:function(){var e=u(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mutableParamsRead||(this.mutableParamsRead=!0,Y_.reportApiInvoke(null,{options:void 0,name:Dm.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Pm.TRACER}).onSuccess(JSON.stringify(hg))),this.joinInfo&&this.cancelToken&&this.retryConfig){e.next=3;break}return e.abrupt("return",void Zv.debug("[config-distribute] get config distribute interrupted have no joininfo"));case 3:return e.next=5,this.mutex.lock();case 5:return n=e.sent,e.prev=6,e.next=9,Px(this.joinInfo,this.cancelToken,this.retryConfig);case 9:t=e.sent,Zv.debug("[config-distribute] get config distribute",JSON.stringify(t)),t.limit_bitrate&&this.handleBitrateLimit(t.limit_bitrate),this.cacheGlobalParameterConfig(t),this.configs=t,e.next=20;break;case 16:e.prev=16,e.t0=e.catch(6),r=new Fv(Pv.NETWORK_RESPONSE_ERROR,e.t0),Zv.warning("[config-distribute] ".concat(r.toString()));case 20:return e.prev=20,n(),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[6,16,20,23]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBitrateLimit",value:function(){return this.configs?this.configs.limit_bitrate:void 0}},{key:"handleBitrateLimit",value:function(e){var t;(t=e)&&t.uplink&&t.id&&void 0!==t.uplink.max_bitrate&&void 0!==t.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(Wy.UPDATE_BITRATE_LIMIT,e):this.emit(Wy.UPDATE_BITRATE_LIMIT,e))}},{key:"getLowStreamConfigDistribute",value:function(){return this.configs&&this.configs.limit_bitrate&&zx({},this.configs.limit_bitrate.low_stream_uplink)}},{key:"cacheGlobalParameterConfig",value:function(e){for(var t,n=vm(t=Object.keys(e).filter((function(e){return/^webrtc_ng_global_parameter/.test(e)}))).call(t),r=0;r<n.length;r++)for(var i=n.length-1;i>r;i--){var o=n[i];if("number"==typeof e[o].__priority){var a=e[o].__priority,s=n[i-1];if("number"==typeof e[s].__priority){if(!(a>e[s].__priority))continue;var c=o;n[i]=n[i-1],n[i-1]=c}else{var u=o;n[i]=n[i-1],n[i-1]=u}}}var l={};n.forEach((function(t){var n=e[t],r=n.__expires;Object.keys(n).forEach((function(e){"__priority"===e||"__expires"===e||Object.prototype.hasOwnProperty.call(l,e)||(l[e]=zx({value:n[e]},r&&{expires:r}))}))}));try{var d=JSON.stringify(l),h=window.btoa(d);window.localStorage.setItem("websdk_ng_global_parameter",h),Zv.debug("Caching global parameters ".concat(d))}catch(e){Zv.error("Error caching global parameters:",e.message)}}}]),n}(Uv);function Yx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yx(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jx=function(e){h(n,e);var t=f(n);function n(e,r,i,o){var a;return p(this,n),a=t.call(this),Lf(l(a),"spec",void 0),Lf(l(a),"token",void 0),Lf(l(a),"websocket",void 0),Lf(l(a),"pingpongTimer",void 0),Lf(l(a),"reconnectMode","retry"),Lf(l(a),"serviceMode",void 0),Lf(l(a),"reqId",0),Lf(l(a),"commandReqId",0),Lf(l(a),"handleWebSocketOpen",(function(){a.reconnectMode="retry",a.startPingPong()})),Lf(l(a),"handleWebSocketMessage",(function(e){if(e.data){var t=JSON.parse(e.data);t.requestId?a.emit("@".concat(t.requestId,"-").concat(t.sid),t):a.serviceMode===sy.INJECT?a.emit(my.INJECT_STREAM_STATUS,t):(Y_.workerEvent(a.spec.sid,{actionType:"status",serverCode:t.code,workerType:a.serviceMode===sy.TRANSCODE?1:2}),a.emit(my.PUBLISH_STREAM_STATUS,t))}})),a.spec=r,a.token=e,a.serviceMode=o,a.websocket=new zw("live-streaming",i),a.websocket.on(ay.CONNECTED,a.handleWebSocketOpen),a.websocket.on(ay.ON_MESSAGE,a.handleWebSocketMessage),a.websocket.on(ay.REQUEST_NEW_URLS,(function(e,t){Tw(l(a),my.REQUEST_NEW_ADDRESS).then(e).catch(t)})),a.websocket.on(ay.RECONNECTING,(function(){a.websocket.reconnectMode=a.reconnectMode})),a}return v(n,[{key:"init",value:function(e){return this.websocket.init(e)}},{key:"request",value:function(){var e=u(c().mark((function e(t,n,r,i){var o,a,s,u,l,d,h,f=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reqId+=1,"request"===t&&(this.commandReqId+=1),o=this.commandReqId,(a=this.reqId)&&this.websocket){e.next=4;break}throw new Fv(Pv.UNEXPECTED_ERROR);case 4:if(s=Zx({command:t,sdkVersion:"4.18.0"===Xv?"0.0.1":Xv,seq:a,requestId:a,allocate:r,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},n),"closed"!==this.websocket.state){e.next=7;break}throw new Fv(Pv.WS_DISCONNECT);case 7:if(u=function(){return new Vd((function(e,t){f.websocket.once(ay.CLOSED,(function(){return t(new Fv(Pv.WS_ABORT))})),f.websocket.once(ay.CONNECTED,e)}))},e.t0="connected"!==this.websocket.state,!e.t0){e.next=12;break}return e.next=12,u();case 12:return s.clientRequest&&(s.clientRequest.workerToken=this.token),l=new Vd((function(e,t){var n=function(){t(new Fv(Pv.WS_ABORT))};f.websocket.once(ay.RECONNECTING,n),f.websocket.once(ay.CLOSED,n),f.once("@".concat(a,"-").concat(f.spec.sid),(function(t){e(t)}))})),i&&Y_.workerEvent(this.spec.sid,Zx(Zx({},i),{},{requestId:o,actionType:"request",payload:JSON.stringify(n.clientRequest),serverCode:0,code:0})),d=Date.now(),this.websocket.sendMessage(s),h=null,e.prev=18,e.next=21,l;case 21:h=e.sent,e.next=33;break;case 24:if(e.prev=24,e.t1=e.catch(18),"closed"!==this.websocket.state){e.next=28;break}throw e.t1;case 28:return e.next=30,u();case 30:return e.next=32,this.request(t,n,r);case 32:return e.abrupt("return",e.sent);case 33:return e.abrupt("return",(i&&Y_.workerEvent(this.spec.sid,Zx(Zx({},i),{},{requestId:o,actionType:"response",payload:JSON.stringify(h.serverResponse),serverCode:h.code,success:200===h.code,responseTime:Date.now()-d})),200!==h.code&&this.handleResponseError(h),h));case 34:case"end":return e.stop()}}),e,this,[[18,24]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"tryNextAddress",value:function(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}},{key:"close",value:function(){var e="4.18.0"===Xv?"0.0.1":Xv;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}},{key:"handleResponseError",value:function(e){switch(e.code){case by.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void Zv.warning("live stream response already exists stream");case by.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case by.LIVE_STREAM_RESPONSE_BAD_STREAM:case by.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new Fv(Pv.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case by.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new Fv(Pv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case by.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new Fv(Pv.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case by.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:var t=new Fv(Pv.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(my.WARNING,t,e.serverResponse.url);case by.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:var n=new Fv(Pv.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(my.WARNING,n,e.serverResponse.url);case by.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new Fv(Pv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case by.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new Fv(Pv.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case by.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:var r=new Fv(Pv.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(my.WARNING,r,e.serverResponse.url);case by.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new Fv(Pv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case by.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new Fv(Pv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case by.LIVE_STREAM_RESPONSE_WORKER_LOST:case by.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;throw new Fv(Pv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case by.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new Fv(Pv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new Fv(Pv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case by.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case by.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case by.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case by.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new Fv(Pv.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}},{key:"startPingPong",value:function(){var e=this;this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((function(){"connected"===e.websocket.state&&e.request("ping",{}).catch(Sw)}),6e3)}}]),n}(Uv);function Xx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xx(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $x=function(e){h(n,e);var t=f(n);function n(e){var r;p(this,n);var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bv,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bv;return r=t.call(this),Lf(l(r),"onLiveStreamWarning",void 0),Lf(l(r),"onLiveStreamError",void 0),Lf(l(r),"onInjectStatusChange",void 0),Lf(l(r),"spec",void 0),Lf(l(r),"retryTimeout",1e4),Lf(l(r),"connection",void 0),Lf(l(r),"httpRetryConfig",void 0),Lf(l(r),"wsRetryConfig",void 0),Lf(l(r),"streamingTasks",new Map),Lf(l(r),"isStartingStreamingTask",!1),Lf(l(r),"taskMutex",new Q_("live-streaming")),Lf(l(r),"cancelToken",Lv.CancelToken.source()),Lf(l(r),"transcodingConfig",void 0),Lf(l(r),"injectConfig",Qx({},Vy)),Lf(l(r),"injectLoopTimes",0),Lf(l(r),"uapResponse",void 0),Lf(l(r),"lastTaskId",1),Lf(l(r),"statusError",new Map),r.spec=e,r.httpRetryConfig=o,r.wsRetryConfig=i,r}return v(n,[{key:"setTranscodingConfig",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 66!==(n=Qx(Qx({},Uy),t)).videoCodecProfile&&77!==n.videoCodecProfile&&100!==n.videoCodecProfile&&(Zv.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(n.videoCodecProfile," -> 100")),n.videoCodecProfile=100),n.transcodingUsers||(n.transcodingUsers=n.userConfigs),n.transcodingUsers&&(n.transcodingUsers=n.transcodingUsers.map((function(e){return Qx(Qx(Qx({},py),e),{},{zOrder:e.zOrder?e.zOrder+1:1})}))),function(e){xm(e.width)||ym(e.width,"config.width",0,1e4),xm(e.height)||ym(e.height,"config.height",0,1e4),xm(e.videoBitrate)||ym(e.videoBitrate,"config.videoBitrate",1,1e6),xm(e.videoFrameRate)||ym(e.videoFrameRate,"config.videoFrameRate"),xm(e.lowLatency)||gm(e.lowLatency,"config.lowLatency"),xm(e.audioSampleRate)||mm(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),xm(e.audioBitrate)||ym(e.audioBitrate,"config.audioBitrate",1,128),xm(e.audioChannels)||mm(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),xm(e.videoGop)||ym(e.videoGop,"config.videoGop"),xm(e.videoCodecProfile)||mm(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),xm(e.userCount)||ym(e.userCount,"config.userCount",0,17),xm(e.backgroundColor)||ym(e.backgroundColor,"config.backgroundColor",0,16777215),xm(e.userConfigExtraInfo)||_m(e.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),e.transcodingUsers&&!xm(e.transcodingUsers)&&(Em(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach((function(e,t){wm(e.uid),xm(e.x)||ym(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),xm(e.y)||ym(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),xm(e.width)||ym(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),xm(e.height)||ym(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),xm(e.zOrder)||ym(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),xm(e.alpha)||ym(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)}))),xm(e.watermark)||gy(e.watermark,"watermark"),xm(e.backgroundImage)||gy(e.backgroundImage,"backgroundImage"),e.images&&!xm(e.images)&&(Em(e.images,"config.images"),e.images.forEach((function(e,t){gy(e,"images[".concat(t,"]"))})))}(n),r=[],n.images&&r.push.apply(r,g(n.images.map((function(e){return Qx(Qx(Qx({},vy),e),{},{zOrder:255})})))),n.backgroundImage&&(r.push(Qx(Qx(Qx({},vy),n.backgroundImage),{},{zOrder:0})),delete n.backgroundImage),n.watermark&&(r.push(Qx(Qx(Qx({},vy),n.watermark),{},{zOrder:255})),delete n.watermark),n.images=r,n.transcodingUsers&&(n.userConfigs=n.transcodingUsers.map((function(e){return Qx({},e)})),n.userCount=n.transcodingUsers.length,delete n.transcodingUsers),i=(n.userConfigs||[]).map((function(e){return"number"==typeof e.uid?Vd.resolve(e.uid):jx(e.uid,s.spec,s.cancelToken.token,s.httpRetryConfig)})),e.next=7,Vd.all(i);case 7:if(e.sent.forEach((function(e,t){n.userConfigs&&n.userConfigs[t]&&(n.userConfigs[t].uid=e)})),this.transcodingConfig=n,!this.connection){e.next=22;break}return e.prev=10,e.next=13,this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(qE(o=this.streamingTasks).call(o)).map((function(e){return e.taskId})).join("#")});case 13:a=e.sent,Zv.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(a.code,", config:"),JSON.stringify(this.transcodingConfig)),e.next=22;break;case 17:if(e.prev=17,e.t0=e.catch(10),e.t0.data&&e.t0.data.retry){e.next=21;break}throw e.t0;case 21:e.t0.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((function(t){Zv.warning("[".concat(s.spec.clientId,"] live streaming receive error"),e.t0.toString(),"try to republish",t.url),s.startLiveStreamingTask(t.url,t.mode,e.t0).then((function(){Zv.debug("[".concat(s.spec.clientId,"] live streaming republish ").concat(t.url," success"))})).catch((function(e){Zv.error("[".concat(s.spec.clientId,"] live streaming republish failed"),t.url,e.toString()),s.onLiveStreamError&&s.onLiveStreamError(t.url,e)}))}));case 22:case"end":return e.stop()}}),e,this,[[10,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setInjectStreamConfig",value:function(e,t){this.injectConfig=Object.assign({},this.injectConfig,e),this.injectLoopTimes=t}},{key:"startLiveStreamingTask",value:function(){var e=u(c().mark((function e(t,n,r){var i,o,a,s,u,l,d=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.from(qE(i=this.streamingTasks).call(i)).find((function(e){return e.mode===sy.INJECT}))||n!==sy.INJECT){e.next=2;break}return e.abrupt("return",new Fv(Pv.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw());case 2:if(this.transcodingConfig||n!==sy.TRANSCODE){e.next=4;break}throw new Fv(Pv.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");case 4:return o={command:"PublishStream",ts:Date.now(),url:t,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0},Zv.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(t,", mode: ").concat(n)),e.next=8,this.taskMutex.lock();case 8:if(a=e.sent,this.connection||!r){e.next=11;break}return e.abrupt("return",void a());case 11:if(!this.streamingTasks.get(t)||r){e.next=13;break}return e.abrupt("return",(a(),new Fv(Pv.LIVE_STREAMING_TASK_CONFLICT).throw()));case 13:if(e.prev=13,e.t0=this.connection,e.t0){e.next=19;break}return e.next=18,this.connect(n);case 18:this.connection=e.sent;case 19:e.next=24;break;case 21:throw e.prev=21,e.t1=e.catch(13),a(),e.t1;case 24:e.t2=n,e.next=e.t2===sy.TRANSCODE?27:e.t2===sy.RAW?29:e.t2===sy.INJECT?30:31;break;case 27:return o.transcodingConfig=Qx({},this.transcodingConfig),e.abrupt("break",31);case 29:return e.abrupt("break",31);case 30:o={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:t,loopTimes:this.injectLoopTimes};case 31:return this.uapResponse&&this.uapResponse.vid&&(o.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0,s=this.lastTaskId++,e.prev=33,u=new Vd((function(e,n){yw(d.retryTimeout).then((function(){if(r)return n(r);var e=d.statusError.get(t);return e?(d.statusError.delete(t),n(e)):void 0}))})),e.next=37,Vd.race([this.connection.request("request",{clientRequest:o},!0,{url:t,command:"PublishStream",workerType:n===sy.TRANSCODE?1:2,requestByUser:!r,tid:s.toString()}),u]);case 37:l=e.sent,this.isStartingStreamingTask=!1,Zv.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(l.code)),this.streamingTasks.set(t,{clientRequest:o,mode:n,url:t,taskId:s}),a(),e.next=56;break;case 41:if(e.prev=41,e.t3=e.catch(33),a(),this.isStartingStreamingTask=!1,e.t3.data&&e.t3.data.retry&&!r){e.next=45;break}throw e.t3;case 45:if(!e.t3.data.changeAddress){e.next=52;break}return this.connection.tryNextAddress(),e.next=49,this.startLiveStreamingTask(t,n,e.t3);case 49:e.t4=e.sent,e.next=55;break;case 52:return e.next=54,this.startLiveStreamingTask(t,n,e.t3);case 54:e.t4=e.sent;case 55:return e.abrupt("return",e.t4);case 56:case"end":return e.stop()}}),e,this,[[13,21],[33,41]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"stopLiveStreamingTask",value:function(e){var t=this;return new Vd((function(n,r){var i=t.streamingTasks.get(e);if(!i||!t.connection)return new Fv(Pv.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();var o=i.mode;i.abortTask=function(){Zv.debug("[".concat(t.spec.clientId,"] stop live streaming success(worker exception)")),t.streamingTasks.delete(e),n()},t.connection.request("request",{clientRequest:{command:o===sy.INJECT?"UninjectStream":"UnpublishStream",url:i.url}},!1,{url:e,command:"UnPublishStream",workerType:o===sy.TRANSCODE?1:2,requestByUser:!0,tid:(t.lastTaskId++).toString()}).then((function(r){Zv.debug("[".concat(t.spec.clientId,"] stop live streaming success, code: ").concat(r.code)),t.streamingTasks.delete(e),0===t.streamingTasks.size&&o!==sy.INJECT&&(t.connection&&t.connection.close(),t.connection=void 0),n(),o===sy.INJECT&&t.onInjectStatusChange&&t.onInjectStatusChange(cy.INJECT_STREAM_STATUS_STOP_SUCCESS,t.spec.uid,e)})).catch(r)}))}},{key:"controlInjectStream",value:function(){var e=u(c().mark((function e(t,n,r,i){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=this.streamingTasks.get(t))&&this.connection&&o.mode===sy.INJECT){e.next=3;break}throw new Fv(Pv.INVALID_OPERATION,"can not find inject stream task to control");case 3:return e.next=5,this.connection.request("request",{clientRequest:{command:"ControlStream",url:t,control:n,audioVolume:r,position:i}});case 5:return e.abrupt("return",e.sent.serverResponse);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"resetAllTask",value:function(){var e,t=this,n=Array.from(qE(e=this.streamingTasks).call(e));this.terminate();for(var r=function(){var e=o[i];t.startLiveStreamingTask(e.url,e.mode).catch((function(n){t.onLiveStreamError&&t.onLiveStreamError(e.url,n)}))},i=0,o=n;i<o.length;i++)r()}},{key:"terminate",value:function(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=Lv.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}},{key:"connect",value:function(){var e=u(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.connection){e.next=2;break}throw new Fv(Pv.UNEXPECTED_ERROR,"live streaming connection has already connected");case 2:return e.next=4,Tw(this,yy.REQUEST_WORKER_MANAGER_LIST,t);case 4:return n=e.sent,this.uapResponse=n,this.connection=new Jx(n.workerToken,this.spec,this.wsRetryConfig,t),this.connection.on(my.WARNING,(function(e,t){return r.onLiveStreamWarning&&r.onLiveStreamWarning(t,e)})),this.connection.on(my.PUBLISH_STREAM_STATUS,(function(e){return r.handlePublishStreamServer(e)})),this.connection.on(my.INJECT_STREAM_STATUS,(function(e){return r.handleInjectStreamServerStatus(e)})),this.connection.on(my.REQUEST_NEW_ADDRESS,(function(e,n){if(!r.connection)return n(new Fv(Pv.UNEXPECTED_ERROR,"can not get new live streaming address list"));Tw(r,yy.REQUEST_WORKER_MANAGER_LIST,t).then((function(t){r.uapResponse=t,e(t.addressList)})).catch(n)})),e.next=13,this.connection.init(n.addressList);case 13:return e.abrupt("return",this.connection);case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handlePublishStreamServer",value:function(e){var t=this,n=e.serverStatus&&e.serverStatus.url||"empty_url",r=this.streamingTasks.get(n),i=e.reason;switch(e.code){case by.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case by.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case by.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case by.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:var o=new Fv(Pv.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(r)return Zv.error(o.toString()),this.onLiveStreamError&&this.onLiveStreamError(n,o);if(!this.isStartingStreamingTask)return;this.statusError.set(n,o);case by.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:var a=new Fv(Pv.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,i);return this.onLiveStreamWarning&&this.onLiveStreamWarning(n,a);case by.LIVE_STREAM_RESPONSE_WORKER_LOST:case by.LIVE_STREAM_RESPONSE_WORKER_QUIT:var s;if(!this.connection)return;this.connection.tryNextAddress();for(var c=Array.from(qE(s=this.streamingTasks).call(s)),u=function(){var n=d[l];n.abortTask?n.abortTask():(Zv.warning("[".concat(t.spec.clientId,"] publish stream status code"),e.code,"try to republish",n.url),t.startLiveStreamingTask(n.url,n.mode,new Fv(Pv.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((function(){Zv.debug("[".concat(t.spec.clientId,"] republish live stream success"),n.url)})).catch((function(e){Zv.error(e.toString()),t.onLiveStreamError&&t.onLiveStreamError(n.url,e)})))},l=0,d=c;l<d.length;l++)u();return}}},{key:"handleInjectStreamServerStatus",value:function(e){var t=Number(e.uid),n=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(cy.INJECT_STREAM_STATUS_START_SUCCESS,t,n));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(cy.INJECT_STREAM_STATUS_START_ALREADY_EXISTS,t,n),void this.streamingTasks.delete(n);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(cy.INJECT_STREAM_STATUS_START_UNAUTHORIZED,t,n),void this.streamingTasks.delete(n);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(cy.INJECT_STREAM_STATUS_BROKEN,t,n),void this.streamingTasks.delete(n);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(cy.INJECT_STREAM_STATUS_START_TIMEOUT,t,n),void this.streamingTasks.delete(n);default:return void Zv.debug("inject stream server status",e)}}},{key:"hasUrl",value:function(e){return this.streamingTasks.has(e)}}]),n}(Uv),eT=function(){function e(){p(this,e),Lf(this,"destChannelMediaInfos",new Map),Lf(this,"srcChannelMediaInfo",void 0)}return v(e,[{key:"setSrcChannelInfo",value:function(e){Fy(e),this.srcChannelMediaInfo=e}},{key:"addDestChannelInfo",value:function(e){Fy(e),this.destChannelMediaInfos.set(e.channelName,e)}},{key:"removeDestChannelInfo",value:function(e){Sm(e),this.destChannelMediaInfos.delete(e)}},{key:"getSrcChannelMediaInfo",value:function(){return this.srcChannelMediaInfo}},{key:"getDestChannelMediaInfo",value:function(){return this.destChannelMediaInfos}}]),e}();function tT(e){if(!(e instanceof eT))return new Fv(Pv.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();var t=e.getSrcChannelMediaInfo(),n=e.getDestChannelMediaInfo();return t?0===n.size?new Fv(Pv.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new Fv(Pv.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}var nT=function(e){h(n,e);var t=f(n);function n(e,r,i){var o;return p(this,n),o=t.call(this),Lf(l(o),"ws",void 0),Lf(l(o),"requestId",1),Lf(l(o),"heartBeatTimer",void 0),Lf(l(o),"joinInfo",void 0),Lf(l(o),"clientId",void 0),Lf(l(o),"onOpen",(function(){o.emit("open"),o.startHeartBeatCheck()})),Lf(l(o),"onClose",(function(e){o.emit("close"),o.dispose()})),Lf(l(o),"onMessage",(function(e){var t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(o.emit("status",t.serverStatus),void o.emit(t.serverStatus.command,t.serverStatus)):void 0;o.emit("req_".concat(t.requestId),t)})),o.joinInfo=e,o.clientId=r,o.ws=new zw("cross-channel-".concat(o.clientId),i),o.ws.on(ay.RECONNECTING,(function(){o.ws.reconnectMode="retry",o.emit("reconnecting")})),o.ws.on(ay.CONNECTED,o.onOpen),o.ws.on(ay.ON_MESSAGE,o.onMessage),o.ws.on(ay.CLOSED,o.onClose),o}return v(n,[{key:"isConnect",value:function(){return"connected"===this.ws.state}},{key:"sendMessage",value:function(e){var t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}},{key:"waitStatus",value:function(e){var t=this;return new Vd((function(n,r){var i=window.setTimeout((function(){r(new Fv(Pv.TIMEOUT,"wait status timeout, status: ".concat(e)))}),5e3);t.once(e,(function(t){window.clearTimeout(i),t.state&&0!==t.state?r(new Fv(Pv.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):n(void 0)})),t.once("dispose",(function(){window.clearTimeout(i),r(new Fv(Pv.WS_ABORT))}))}))}},{key:"request",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("closed"!==this.ws.state){e.next=2;break}throw new Fv(Pv.WS_DISCONNECT);case 2:if(n=function(){return new Vd((function(e,t){a.ws.once(ay.CLOSED,(function(){return t(new Fv(Pv.WS_ABORT))})),a.ws.once(ay.CONNECTED,e)}))},e.t0="connected"!==this.ws.state,!e.t0){e.next=7;break}return e.next=7,n();case 7:return r=this.sendMessage(t),i=new Vd((function(e,t){var n=function(){t(new Fv(Pv.WS_ABORT))};a.ws.once(ay.RECONNECTING,n),a.ws.once(ay.CLOSED,n),a.once("req_".concat(r),e),yw(3e3).then((function(){a.removeAllListeners("req_".concat(r)),a.ws.off(ay.RECONNECTING,n),a.ws.off(ay.CLOSED,n),t(new Fv(Pv.TIMEOUT,"cross channel ws request timeout"))}))})),e.next=11,i;case 11:if((o=e.sent)&&200===o.code){e.next=14;break}throw new Fv(Pv.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(o)));case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ws.removeAllListeners(ay.REQUEST_NEW_URLS),this.ws.on(ay.REQUEST_NEW_URLS,(function(e){e(t)})),e.next=4,this.ws.init(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"dispose",value:function(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}},{key:"sendPing",value:function(e){var t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}},{key:"startHeartBeatCheck",value:function(){var e=this;this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval((function(){e.sendPing({command:"ping",appId:e.joinInfo.appId,cname:e.joinInfo.cname,uid:e.joinInfo.uid.toString(),sid:e.joinInfo.sid,ts:+new Date,requestId:0})}),3e3)}},{key:"clearHeartBeatCheck",value:function(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}]),n}(Uv),rT=function(e){h(n,e);var t=f(n);function n(e,r,i,o,a){var s;return p(this,n),s=t.call(this),Lf(l(s),"joinInfo",void 0),Lf(l(s),"sid",void 0),Lf(l(s),"clientId",void 0),Lf(l(s),"cancelToken",Lv.CancelToken.source()),Lf(l(s),"workerToken",void 0),Lf(l(s),"requestId",0),Lf(l(s),"signal",void 0),Lf(l(s),"prevChannelMediaConfig",void 0),Lf(l(s),"httpRetryConfig",void 0),Lf(l(s),"_resolution",void 0),Lf(l(s),"_state",wy.RELAY_STATE_IDLE),Lf(l(s),"errorCode",xy.RELAY_OK),Lf(l(s),"onStatus",(function(e){Zv.debug("[".concat(s.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&s.emit("event",Sy.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&s.emit("event",Sy.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(s.errorCode=xy.SRC_TOKEN_EXPIRED,s.state=wy.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===e.command&&(s.errorCode=xy.DEST_TOKEN_EXPIRED,s.state=wy.RELAY_STATE_FAILURE))})),Lf(l(s),"onReconnect",u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Zv.debug("[".concat(s.clientId,"] ChannelMediaSocket disconnect, reconnecting")),s.emit("event",Sy.NETWORK_DISCONNECTED),s.state=wy.RELAY_STATE_IDLE,s.prevChannelMediaConfig&&s.sendStartRelayMessage(s.prevChannelMediaConfig).catch((function(e){s.state!==wy.RELAY_STATE_IDLE&&(Zv.error("auto restart channel media relay failed",e.toString()),s.errorCode=xy.SERVER_CONNECTION_LOST,s.state=wy.RELAY_STATE_FAILURE)}));case 1:case"end":return e.stop()}}),e)})))),s.joinInfo=e,s.clientId=r,s.sid=Ew(),s.signal=new nT(s.joinInfo,s.clientId,i),s.httpRetryConfig=o,s._resolution=a,s}return v(n,[{key:"state",get:function(){return this._state},set:function(e){e!==this._state&&(e!==wy.RELAY_STATE_FAILURE&&(this.errorCode=xy.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}},{key:"startChannelMediaRelay",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state===wy.RELAY_STATE_IDLE){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION);case 2:return this.state=wy.RELAY_STATE_CONNECTING,e.next=5,this.connect();case 5:return Zv.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success")),e.prev=6,e.next=9,this.sendStartRelayMessage(t);case 9:e.next=20;break;case 11:if(e.prev=11,e.t0=e.catch(6),!e.t0.data||!e.t0.data.serverResponse||"SetSourceChannel"!==e.t0.data.serverResponse.command){e.next=15;break}throw new Fv(Pv.CROSS_CHANNEL_FAILED_JOIN_SRC);case 15:if(!e.t0.data||!e.t0.data.serverResponse||"SetDestChannelStatus"!==e.t0.serverResponse.command){e.next=17;break}throw new Fv(Pv.CROSS_CHANNEL_FAILED_JOIN_DEST);case 17:if(!e.t0.data||!e.t0.data.serverResponse||"StartPacketTransfer"!==e.t0.serverResponse.command){e.next=19;break}throw new Fv(Pv.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);case 19:throw e.t0;case 20:this.prevChannelMediaConfig=t;case 21:case"end":return e.stop()}}),e,this,[[6,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateChannelMediaRelay",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state===wy.RELAY_STATE_RUNNING){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION);case 2:return e.next=4,this.sendUpdateMessage(t);case 4:this.prevChannelMediaConfig=t;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setVideoProfile",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._resolution=t,this.state===wy.RELAY_STATE_RUNNING){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION);case 2:return n=this.genMessage(Ey.SetVideoProfile),e.next=5,this.signal.request(n);case 5:Zv.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stopChannelMediaRelay",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendStopRelayMessage();case 2:Zv.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=wy.RELAY_STATE_IDLE,this.dispose();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"dispose",value:function(){Zv.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=Lv.CancelToken.source(),this.state=wy.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}},{key:"connect",value:function(){var e=u(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bx(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);case 2:return t=e.sent,this.workerToken=t.workerToken,e.next=6,this.signal.connect(t.addressList);case 6:this.emit("event",Sy.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"sendStartRelayMessage",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.genMessage(Ey.StopPacketTransfer),e.next=3,this.signal.request(n);case 3:return e.next=5,this.signal.waitStatus("Normal Quit");case 5:return Zv.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success")),r=this.genMessage(Ey.SetSdkProfile,t),e.next=9,this.signal.request(r);case 9:return Zv.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success")),i=this.genMessage(Ey.SetSourceChannel,t),e.next=13,this.signal.request(i);case 13:return e.next=15,this.signal.waitStatus("SetSourceChannelStatus");case 15:return this.emit("event",Sy.PACKET_JOINED_SRC_CHANNEL),Zv.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success")),o=this.genMessage(Ey.SetSourceUserId,t),e.next=20,this.signal.request(o);case 20:return Zv.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success")),a=this.genMessage(Ey.SetDestChannel,t),e.next=24,this.signal.request(a);case 24:return e.next=26,this.signal.waitStatus("SetDestChannelStatus");case 26:return this.emit("event",Sy.PACKET_JOINED_DEST_CHANNEL),Zv.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success")),s=this.genMessage(Ey.StartPacketTransfer,t),e.next=31,this.signal.request(s);case 31:this.emit("event",Sy.PACKET_SENT_TO_DEST_CHANNEL),this.state=wy.RELAY_STATE_RUNNING,Zv.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution);case 35:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendUpdateMessage",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.genMessage(Ey.UpdateDestChannel,t),e.next=3,this.signal.request(n);case 3:this.emit("event",Sy.PACKET_UPDATE_DEST_CHANNEL),Zv.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendStopRelayMessage",value:function(){var e=u(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.genMessage(Ey.StopPacketTransfer),e.next=3,this.signal.request(t);case 3:Zv.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"genMessage",value:function(e,t){var n=this,r=[],i=[],o=[];this.requestId+=1;var a={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:Xv,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.18.0"===a.sdkVersion&&(a.sdkVersion="0.0.1");var s=null,c=null;switch(e){case Ey.SetSdkProfile:return a.clientRequest={command:"SetSdkProfile",type:"multi_channel"},a;case Ey.SetSourceChannel:if(!(c=t&&t.getSrcChannelMediaInfo()))throw new Fv(Pv.UNEXPECTED_ERROR,"can not find source config");return a.clientRequest={command:"SetSourceChannel",uid:"0",channelName:c.channelName,token:c.token||this.joinInfo.appId},a;case Ey.SetSourceUserId:if(!(c=t&&t.getSrcChannelMediaInfo()))throw new Fv(Pv.UNEXPECTED_ERROR,"can not find source config");return a.clientRequest={command:"SetSourceUserId",uid:c.uid+""},a;case Ey.SetDestChannel:if(!(s=t&&t.getDestChannelMediaInfo()))throw new Fv(Pv.UNEXPECTED_ERROR,"can not find dest config");return s.forEach((function(e){r.push(e.channelName),i.push(e.uid+""),o.push(e.token||n.joinInfo.appId)})),a.clientRequest={command:"SetDestChannel",channelName:r,uid:i,token:o},a;case Ey.StartPacketTransfer:return a.clientRequest={command:"StartPacketTransfer"},a;case Ey.Reconnect:return a.clientRequest={command:"Reconnect"},a;case Ey.StopPacketTransfer:return a.clientRequest={command:"StopPacketTransfer"},a;case Ey.UpdateDestChannel:if(!(s=t&&t.getDestChannelMediaInfo()))throw new Fv(Pv.UNEXPECTED_ERROR,"can not find dest config");return s.forEach((function(e){r.push(e.channelName),i.push(e.uid+""),o.push(e.token||n.joinInfo.appId)})),a.clientRequest={command:"UpdateDestChannel",channelName:r,uid:i,token:o},a;case Ey.SetVideoProfile:a.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return a}}]),n}(Uv),iT=function(e){var t=document.createElement("canvas");return t.width=2,t.height=2,new Vd((function(n,r){t.toBlob(function(){var e=u(c().mark((function e(i){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.remove(),!i){e.next=7;break}return e.next=3,oT(i);case 3:o=e.sent,n({buffer:o,width:t.width,height:t.height}),e.next=8;break;case 7:r(new Fv(Pv.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e,1)}))},oT=function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.arrayBuffer();case 2:return n=e.sent,e.abrupt("return",new Uint8Array(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function aT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aT(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cT,uT,lT=function(){function e(t){var n=this;p(this,e),Lf(this,"trackId",void 0),Lf(this,"config",void 0),Lf(this,"onFirstVideoFrameDecoded",void 0),Lf(this,"freezeTimeCounterList",[]),Lf(this,"renderFreezeAccTime",0),Lf(this,"isKeepLastFrame",!1),Lf(this,"timeUpdatedCount",0),Lf(this,"freezeTime",0),Lf(this,"playbackTime",0),Lf(this,"lastTimeUpdatedTime",0),Lf(this,"autoplayFailed",!1),Lf(this,"videoTrack",void 0),Lf(this,"videoElement",void 0),Lf(this,"cacheVideoElement",void 0),Lf(this,"videoElementCheckInterval",void 0),Lf(this,"_videoElementStatus",lm.NONE),Lf(this,"isGettingVideoDimensions",!1),Lf(this,"startGetVideoDimensions",(function(){var e=function e(){if(n.isGettingVideoDimensions=!0,n.videoElement.videoWidth*n.videoElement.videoHeight>4)return Zv.debug("[".concat(n.trackId,"] current video dimensions:"),n.videoElement.videoWidth,n.videoElement.videoHeight),void(n.isGettingVideoDimensions=!1);setTimeout(e,500)};!n.isGettingVideoDimensions&&e()})),Lf(this,"autoResumeAfterInterruption",(function(){n.videoTrack&&"live"===n.videoTrack.readyState&&"running"===iE.curState&&(Zv.debug("[track-".concat(n.trackId,"] video element paused, auto resume for ").concat(sf())),Sf()?(n.videoElement.srcObject=null,n.videoElement.srcObject=new MediaStream([n.videoTrack]),n.videoElement.play()):(n.videoElement.pause(),n.videoElement.play()))})),Lf(this,"handleVideoEvents",(function(e){switch(e.type){case"play":case"playing":n.startGetVideoDimensions(),n.videoElementStatus=lm.PLAYING;break;case"loadeddata":if(n.onFirstVideoFrameDecoded&&n.onFirstVideoFrameDecoded(),n.cacheVideoElement){try{n.cacheVideoElement.srcObject=null,n.cacheVideoElement.remove()}catch(e){}n.cacheVideoElement=void 0}break;case"canplay":n.videoElementStatus=lm.CANPLAY;break;case"stalled":n.videoElementStatus=lm.STALLED;break;case"suspend":n.videoElementStatus=lm.SUSPEND;break;case"pause":n.videoElementStatus=lm.PAUSED,pf()||wf()||hf()&&n.autoplayFailed||!n.videoTrack||"live"!==n.videoTrack.readyState||(Zv.debug("[track-".concat(n.trackId,"] video element paused, auto resume")),n.videoElement.play());break;case"waiting":n.videoElementStatus=lm.WAITING;break;case"abort":n.videoElementStatus=lm.ABORT;break;case"ended":n.videoElementStatus=lm.ENDED;break;case"emptied":n.videoElementStatus=lm.EMPTIED;break;case"error":n.videoElementStatus=lm.ERROR;var t=n.videoElement.error;t&&Zv.error("[".concat(n.trackId,"] media error, code: ").concat(t.code,", message: ").concat(t.message));break;case"timeupdate":var r=performance.now();if(n.timeUpdatedCount+=1,n.timeUpdatedCount<10)return void(n.lastTimeUpdatedTime=r);var i=r-n.lastTimeUpdatedTime,o=n.lastTimeUpdatedTime;if(n.lastTimeUpdatedTime=r,nw.lastVisibleTime<nw.lastHiddenTime||o<nw.lastHiddenTime||o<nw.lastVisibleTime)return;for(i>lg("VIDEO_FREEZE_DURATION")&&(n.freezeTime+=i),n.playbackTime+=i;n.playbackTime>=6e3;){n.playbackTime-=6e3;var a=Math.min(6e3,n.freezeTime);n.freezeTimeCounterList.push(a),n.freezeTime=Math.max(0,n.freezeTime-6e3)}}})),Lf(this,"autoResumeAfterInterruptionOnIOS15_16",(function(){n.videoTrack&&"live"===n.videoTrack.readyState&&(Zv.debug("[track-".concat(n.trackId,"] video element paused, auto resume for ").concat(sf())),Sf()?(n.videoElement.srcObject=null,n.videoElement.srcObject=new MediaStream([n.videoTrack]),n.videoElement.play()):(n.videoElement.pause(),n.videoElement.play()))})),this.trackId=t.trackId,this.config=t,t.element instanceof HTMLVideoElement?this.videoElement=t.element:this.videoElement=document.createElement("video"),iE.on(Z_.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),iE.on(Z_.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}return v(e,[{key:"videoElementStatus",get:function(){return this._videoElementStatus},set:function(e){e!==this._videoElementStatus&&(Zv.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}},{key:"getVideoElement",value:function(){return this.videoElement}},{key:"getContainerElement",value:function(){var e;return null!==(e=this.videoElement.parentElement)&&void 0!==e?e:void 0}},{key:"updateConfig",value:function(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()}},{key:"updateVideoTrack",value:function(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())}},{key:"play",value:function(e){var t=this,n=this.videoElement.play();n&&n.catch&&n.catch((function(n){e&&Y_.autoplayFailed(e,"video",n.message,t.trackId),"NotAllowedError"===n.name?(Zv.warning("detected video element autoplay failed",n),t.autoplayFailed=!0,t.handleAutoPlayFailed()):Zv.warning("[".concat(t.trackId,"] play warning: "),n)}));var r=of();if(("Safari"===r.name&&15===Number(r.version)||_f())&&n&&n.then&&n.catch){var i=function(){t.config.mirror&&(t.videoElement.style.transform="rotateY(180deg)")};n.then(i).catch(i)}}},{key:"getCurrentFrame",value:function(){var e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;var t=e.getContext("2d");if(!t)return Zv.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);var n=t.getImageData(0,0,e.width,e.height);return e.remove(),n}},{key:"getCurrentFrameToUint8Array",value:function(){var e=u(c().mark((function e(t){var n,r,i,o=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:1,(r=document.createElement("canvas")).width=this.videoElement.videoWidth,r.height=this.videoElement.videoHeight,!(i=r.getContext("2d"))){e.next=8;break}e.t0=(i.drawImage(this.videoElement,0,0,r.width,r.height),new Vd((function(e,i){r.toBlob(function(){var t=u(c().mark((function t(n){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.remove(),!n){t.next=7;break}return t.next=3,oT(n);case 3:o=t.sent,e({buffer:o,width:r.width,height:r.height}),t.next=8;break;case 7:i(new Fv(Pv.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t,n<0?.1:n>1?1:n)}))),e.next=11;break;case 8:return e.next=10,iT(t);case 10:e.t0=e.sent;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"destroy",value:function(){iE.off(Z_.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),iE.off(Z_.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[]}},{key:"initVideoElement",value:function(){var e=this;if(this.videoElementStatus=lm.INIT,!this.videoElementCheckInterval&&(dT.forEach((function(t){e.videoElement.addEventListener(t,e.handleVideoEvents)})),this.videoElementCheckInterval=window.setInterval((function(){(function(e){return e!==document.body&&document.body.contains(e)})(e.videoElement)||(e.videoElementStatus=lm.DESTROYED)}),1e3),lg("ENABLE_VIDEO_FRAME_CALLBACK"))){var t,n,r,i=function t(n,i){if(e.videoElementStatus===lm.PLAYING){if(r){var o=i.presentationTime-r.presentationTime;o>lg("VIDEO_FREEZE_DURATION")&&nw.lastVisibleTime>=nw.lastHiddenTime&&r.timestamp>nw.lastVisibleTime&&r.timestamp>nw.lastHiddenTime&&(e.renderFreezeAccTime+=o)}r=sT(sT({},i),{},{timestamp:n})}var a,s;lg("ENABLE_VIDEO_FRAME_CALLBACK")&&(null===(a=(s=e.videoElement).requestVideoFrameCallback)||void 0===a||a.call(s,t))};null===(t=(n=this.videoElement).requestVideoFrameCallback)||void 0===t||t.call(n,i)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),Rf()&&(this.videoElement.poster="noposter");var o=of();"Safari"===o.name&&15===Number(o.version)||_f()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,ff()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,ff()&&this.videoElement.load());var a=this.videoElement.play();void 0!==a&&a.catch((function(t){Zv.debug("[".concat(e.trackId,"] playback interrupted"),t.toString())}))}},{key:"resetVideoElement",value:function(){var e=this;dT.forEach((function(t){e.videoElement&&e.videoElement.removeEventListener(t,e.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=lm.NONE}},{key:"handleAutoPlayFailed",value:function(){var e=this,t=function t(n){n.preventDefault(),e.videoElement.play().then((function(){Zv.debug("[".concat(e.trackId,"] Video element for trackId:").concat(e.trackId," autoplay resumed."))})).catch((function(e){Zv.error(e)})),e.autoplayFailed=!1,kf()?document.body.removeEventListener("click",t,!0):(document.body.removeEventListener("touchstart",t,!0),document.body.removeEventListener("mousedown",t,!0))};kf()?document.body.addEventListener("click",t,!0):(document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("mousedown",t,!0)),B_()}}]),e}(),dT=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"],hT=function(e){h(n,e);var t=f(n);function n(e){var r;return p(this,n),r=t.call(this,e),Lf(l(r),"container",void 0),Lf(l(r),"slot",void 0),r.slot=e.element,r.updateConfig(e),r}return v(n,[{key:"updateConfig",value:function(e){this.config=e,this.trackId=e.trackId;var t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}},{key:"updateVideoTrack",value:function(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}},{key:"play",value:function(e){var t;null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)&&i(o(n.prototype),"play",this).call(this,e)}},{key:"getCurrentFrame",value:function(){var e;return null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)?i(o(n.prototype),"getCurrentFrame",this).call(this):new ImageData(2,2)}},{key:"getCurrentFrameToUint8Array",value:function(){var e=u(c().mark((function e(t){var r,a,s=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:1,null===(r=this.container)||void 0===r||!r.contains(this.videoElement)){e.next=7;break}return e.next=4,i(o(n.prototype),"getCurrentFrameToUint8Array",this).call(this,t,a);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,iT(t);case 9:e.t0=e.sent;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"destroy",value:function(){if(i(o(n.prototype),"destroy",this).call(this),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(E){}this.container=void 0}}},{key:"createElements",value:function(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",lg("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}},{key:"mountedVideoElement",value:function(){var e;!this.container||null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)||this.container.appendChild(this.videoElement),i(o(n.prototype),"initVideoElement",this).call(this),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}},{key:"unmountedVideoElement",value:function(){var e;if(null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)){i(o(n.prototype),"resetVideoElement",this).call(this);try{this.container&&this.container.removeChild(this.videoElement)}catch(e){}this.videoElement=document.createElement("video")}}},{key:"resetVideoElement",value:function(){var e;null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)&&(i(o(n.prototype),"resetVideoElement",this).call(this),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}},{key:"getContainerElement",value:function(){return this.container}}]),n}(lT);function fT(e){var t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});var n=ig(e.encoderConfig);return t.width=n.width,t.height=n.height,!Tf()&&n.frameRate&&(t.frameRate=n.frameRate),of().name===Jh.EDGE&&"object"==typeof t.frameRate&&(t.frameRate.max=60),ff()&&(t.frameRate={ideal:30,max:30}),t}function pT(e){var t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&df()&&(t.extensionId=e.extensionId);var n=e.displaySurface,r=e.selfBrowserSurface,i=e.surfaceSwitching,o=e.systemAudio;(vf(107)||gf(107)||mf(93))&&(n&&(mm(n,"displaySurface",["browser","window","monitor"]),t.displaySurface=n),r?(mm(r,"selfBrowserSurface",["exclude","include"]),t.selfBrowserSurface=r):t.selfBrowserSurface="include",i&&(mm(i,"surfaceSwitching",["exclude","include"]),t.surfaceSwitching=i)),(vf(105)||gf(105)||mf(91))&&o&&(mm(o,"systemAudio",["exclude","include"]),t.systemAudio=o),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);var a=e.encoderConfig?og(e.encoderConfig):null;return t.mandatory={chromeMediaSource:"desktop",maxWidth:a?a.width:void 0,maxHeight:a?a.height:void 0},a&&(a.frameRate&&("number"==typeof a.frameRate?(t.mandatory.maxFrameRate=a.frameRate,t.mandatory.minFrameRate=a.frameRate):(t.mandatory.maxFrameRate=a.frameRate.max||a.frameRate.ideal||a.frameRate.exact||void 0,t.mandatory.minFrameRate=a.frameRate.min||a.frameRate.ideal||a.frameRate.exact||void 0),t.frameRate=a.frameRate),a.width&&(t.width=a.width),a.height&&(t.height=a.height)),t}function vT(e){var t={};if(Tf()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,df()&&e.ANS&&(t.googHighpassFilter=e.ANS))),e.encoderConfig){var n=cg(e.encoderConfig);t.channelCount=n.stereo?2:1,t.sampleRate=n.sampleRate,t.sampleSize=n.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),Rf()&&(t.sampleRate=void 0),t}!function(e){e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE"}(cT||(cT={})),function(e){e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT"}(uT||(uT={}));var gT,mT,yT,bT,_T,ET,ST,wT,xT,TT,IT,RT,kT,OT,CT,AT,NT,jT,DT,PT,LT,MT,UT,VT,FT,BT,GT,qT,WT,HT,zT,KT,YT,ZT,JT=new(function(){function e(){var t=this;p(this,e),Lf(this,"_clientSize",null),Lf(this,"getClientWidth",(function(){return document.documentElement?document.documentElement.clientWidth:document.body.clientWidth})),Lf(this,"getClientHeight",(function(){return document.documentElement?document.documentElement.clientHeight:document.body.clientHeight})),Lf(this,"getStyle",(function(e){return window.getComputedStyle(e,null)})),Lf(this,"checkCssVisibleProperty",(function(e){var n=!0,r=t.getStyle(e),i=r.display,o=r.visibility,s=r.opacity,c=r.filter;return("none"===i||["hidden","collapse"].includes(o)||Number(s)<.1)&&(n=!1),!!n&&(c&&c.split(" ").filter((function(e){var t=e.split("(")[0];return["brightness","blur","opacity"].includes(t)})).map((function(e){var t=e.split(/\(|\)/),n=a(t,2),r=n[0],i=n[1];return[r,Number(i.match(/^[0-9\.]+/))]})).forEach((function(e){var t=a(e,2),r=t[0],i=t[1];switch(r){case"brightness":(i<.1||i>3)&&(n=!1);break;case"blur":i>3&&(n=!1);break;case"opacity":i<.1&&(n=!1)}})),n)})),Lf(this,"checkPropertyUpToAllParentNodes",(function(e,t){for(var n=!0,r=!0,i=function(e){return t(e)},o=e;o&&r;)i(o)||(n=!1,r=!1),(o=o.parentElement)||(r=!1);return n})),Lf(this,"checkActualCssVisibleIncludeInherit",(function(e){return t.checkPropertyUpToAllParentNodes(e,t.checkCssVisibleProperty)})),Lf(this,"getSizeAboutClient",(function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height,o=n.left,a=n.right,s=n.top,c=n.bottom,u=t.getClientWidth(),l=t.getClientHeight();return{width:r,height:i,left:o,right:a,top:s,bottom:c,clientWidth:u,clientHeight:l,clientMin:Math.min(u,l)}})),Lf(this,"checkActualSize",(function(){var e=t._clientSize,n=e.width,r=e.height,i=e.clientMin;return t.checkSizeIsVisible(n,r,i)})),Lf(this,"elementFromPoint",(function(e,t){return document.elementFromPoint?document.elementFromPoint(e,t):null})),Lf(this,"checkCoverForAPoint",(function(e,n,r){var i=t.elementFromPoint(e,n);return null!==i&&i!==r})),Lf(this,"getPointPositionList",(function(){for(var e=t._clientSize,n=e.width,r=e.height,i=e.left,o=e.top,a=n/6,s=r/6,c=[],u=Math.pow(10,6),l=0;l<5;l++)for(var d=0;d<5;d++){var h=(i*u+(0===l?.1:4===l?(a*l*u-1e5)/u:a*l)*u)/u,f=(o*u+(0===d?.1:4===d?(s*d*u-1e5)/u:s*d)*u)/u;c.push({x:h,y:f})}return[].concat(c)})),Lf(this,"checkElementCover",(function(e){return t.getPointPositionList().map((function(n){return t.checkCoverForAPoint(n.x,n.y,e)})).filter((function(e){return!!e})).length>6})),Lf(this,"checkSizeIsVisible",(function(e,t,n){return(e>50||n/e<=10)&&(t>50||n/t<=10)})),Lf(this,"checkSizeOfPartInClient",(function(){var e,n,r=t._clientSize,i=r.left,o=r.right,a=r.top,s=r.bottom,c=r.clientHeight,u=r.clientWidth,l=r.clientMin;if(i<0)e=0;else{if(!(i<u))return!1;e=i}if(o<0)return!1;if(a<0)n=0;else{if(!(a<c))return!1;n=a}if(s<0)return!1;var d=(o<u?o:u)-e,h=(s<c?s:c)-n;return t.checkSizeIsVisible(d,h,l)})),Lf(this,"returnHiddenResult",(function(e){return t._clientSize=null,{visible:!1,reason:e}})),Lf(this,"checkOneElementVisible",(function(e){if(e instanceof HTMLElement){if(t.checkElementIsMountedOnDom(e)){if(t.checkActualCssVisibleIncludeInherit(e)){if(t._clientSize=t.getSizeAboutClient(e),t.checkElementCover(e))return t.returnHiddenResult(cT.COVERED);var n=t.checkActualSize(),r=t.checkSizeOfPartInClient();return n&&!r?t.returnHiddenResult(cT.POSITION):n?(t._clientSize=null,{visible:!0}):t.returnHiddenResult(cT.SIZE)}return t.returnHiddenResult(cT.STYLE)}return t.returnHiddenResult(uT.UNMOUNTED)}return t.returnHiddenResult(uT.INVALID_HTML_ELEMENT)})),Lf(this,"checkElementIsMountedOnDom",(function(e){return t.checkPropertyUpToAllParentNodes(e,(function(e){return"HTML"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement}))}))}return v(e)}());function XT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XT(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $T=(gT=K_({argsMap:function(e,t,n){return[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}}),mT=PE(),yT=K_({argsMap:function(e){return[e.getTrackId()]}}),bT=$_("LocalVideoTrack","_enabledMutex"),_T=K_({argsMap:function(e,t){return[e.getTrackId(),t]}}),ET=PE(),ST=$_("LocalVideoTrack","_enabledMutex"),wT=K_({argsMap:function(e,t){return[e.getTrackId(),t]}}),xT=PE(),TT=K_({argsMap:function(e,t){return[e.getTrackId(),t]}}),IT=PE(),RT=PE(),kT=K_({argsMap:function(e,t,n){return[e.getTrackId(),t,n]}}),OT=PE(),CT=PE(),AT=PE(),NT=PE(),jT=PE(),DT=PE(),PT=PE(),LT=K_({argsMap:function(e,t){return[e.getTrackId(),t.name]}}),MT=K_({argsMap:function(e){return[e.getTrackId()]}}),UT=K_({argsMap:function(e){return[e.getTrackId()]}}),VT=K_({argsMap:function(e,t,n){return[e.getTrackId(),t.label,n]}}),x_((FT=function(e){h(n,e);var t=f(n);function n(e,i,o,a,s,c){var u;if(p(this,n),u=t.call(this,e,s),Lf(l(u),"trackMediaType","video"),Lf(l(u),"_player",void 0),Lf(l(u),"_videoVisibleTimer",null),Lf(l(u),"_previousVideoVisibleStatus",void 0),Lf(l(u),"_clearPreviousVideoVisibleStatus",(function(){return u._previousVideoVisibleStatus=void 0})),Lf(l(u),"_encoderConfig",void 0),Lf(l(u),"_scalabiltyMode",{numSpatialLayers:1,numTemporalLayers:1}),Lf(l(u),"_optimizationMode",void 0),Lf(l(u),"_videoHeight",void 0),Lf(l(u),"_videoWidth",void 0),Lf(l(u),"_forceBitrateLimit",void 0),Lf(l(u),"_enabled",!0),Lf(l(u),"processorDestination",void 0),Lf(l(u),"_processorContext",void 0),hf()){var d=e.getSettings(),h=d.width,f=d.height;u._videoWidth=h,u._videoHeight=f}else u.updateMediaStreamTrackResolution();return u._encoderConfig=i,u._scalabiltyMode=o,u._optimizationMode=a,u._hints=c||[],-1===u._hints.indexOf(Cy.SCREEN_TRACK)&&u.updateBitrateFromProfile(),i&&-1!==u._hints.indexOf(Cy.CUSTOM_TRACK)&&u.setEncoderConfiguration(i),u.processorContext=new LS(u.getTrackId(),"local"),u.processorDestination=new PS(u.processorContext),u.bindProcessorDestinationEvents(),r(u)}return v(n,[{key:"isPlaying",get:function(){return!(!this._player||this._player.videoElementStatus!==lm.PLAYING)}},{key:"processorContext",get:function(){return this._processorContext},set:function(e){this._processorContext=e}},{key:"__className__",get:function(){return"LocalVideoTrack"}},{key:"play",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){var r=document.getElementById(e);r?e=r:(Zv.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}Zv.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(n));var i=QT(QT(QT({},this._getDefaultPlayerConfig()),n),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(e instanceof HTMLVideoElement?this._player=new lT(i):this._player=new hT(i),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((function(){try{var e=t.getVideoElementVisibleStatus();t.emit(Py.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(n){}}),lg("CHECK_VIDEO_VISIBLE_INTERVAL"))}},{key:"stop",value:function(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,Zv.debug("[".concat(this.getTrackId(),"] stop video playback")))}},{key:"setEnabled",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}if(t!==this._enabled){e.next=3;break}return e.abrupt("return");case 3:this.stateCheck("enabled",t);case 4:if(Zv.info("[".concat(this.getTrackId(),"] start setEnabled"),t),t){e.next=15;break}return this._originMediaStreamTrack.enabled=!1,e.prev=6,e.next=9,Iw(this,Oy.NEED_DISABLE_TRACK,this);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(6),Zv.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.t0.toString()),e.t0;case 14:return e.abrupt("return",(n||(this._enabled=!1),void Zv.info("[".concat(this.getTrackId(),"] setEnabled to false success"))));case 15:return this._originMediaStreamTrack.enabled=!0,e.prev=16,e.next=19,Iw(this,Oy.NEED_ENABLE_TRACK,this);case 19:e.next=24;break;case 21:throw e.prev=21,e.t1=e.catch(16),Zv.error("[".concat(this.getTrackId(),"] setEnabled to true error"),e.t1.toString()),e.t1;case 24:Zv.info("[".concat(this.getTrackId(),"] setEnabled to true success")),n||(this._enabled=!0);case 25:case"end":return e.stop()}}),e,this,[[6,11],[16,21]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setMuted",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t!==this._muted,!e.t0){e.next=13;break}if(this.stateCheck("muted",t),this._muted=t,this._originMediaStreamTrack.enabled=!t,Zv.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(t)),!t){e.next=11;break}return e.next=9,Iw(this,Oy.NEED_MUTE_TRACK,this);case 9:e.next=13;break;case 11:return e.next=13,Iw(this,Oy.NEED_UNMUTE_TRACK,this);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setEncoderConfiguration",value:function(){var e=u(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._enabled){e.next=2;break}throw new Fv(Pv.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");case 2:if(t=ig(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),!(t.width||t.height||t.frameRate)){e.next=15;break}return r=fT({encoderConfig:t}),(hf()||pf()||wf())&&(r.deviceId=void 0),Zv.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(r)),e.prev=5,e.next=8,this._originMediaStreamTrack.applyConstraints(r);case 8:this.updateMediaStreamTrackResolution(),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),i=new Fv(Pv.UNEXPECTED_ERROR,e.t0.toString()),Zv.error("[".concat(this.getTrackId(),"] applyConstraints error"),i.toString()),i;case 15:return this._encoderConfig=t,-1===this._hints.indexOf(Cy.SCREEN_TRACK)&&this.updateBitrateFromProfile(),e.prev=16,e.next=19,Iw(this,Oy.NEED_UPDATE_VIDEO_ENCODER,this);case 19:e.next=24;break;case 21:return e.prev=21,e.t1=e.catch(16),e.abrupt("return",e.t1.throw());case 24:case"end":return e.stop()}}),e,this,[[5,11],[16,21]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getStats",value:function(){return Dw((function(){Zv.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")}),"localVideoTrackGetStatsWarning"),Rw(this,Oy.GET_STATS)||QT({},ly)}},{key:"setBeautyEffect",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Zv.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect");case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCurrentFrameData",value:function(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}},{key:"getCurrentFrameImage",value:function(){var e=u(c().mark((function e(t){var n,r=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:1,!this._player){e.next=5;break}e.t0=this._player.getCurrentFrameToUint8Array(t,n),e.next=8;break;case 5:return e.next=7,iT(t);case 7:e.t0=e.sent;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clone",value:function(e,t,r,i){return new n(this._mediaStreamTrack.clone(),e,t,r,i)}},{key:"setBitrateLimit",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zv.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(t))),!t){e.next=10;break}return this._forceBitrateLimit=t,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<t.max_bitrate?this._encoderConfig.bitrateMax:t.max_bitrate:this._encoderConfig.bitrateMax=t.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=t.min_bitrate),e.prev=2,e.next=5,Iw(this,Oy.NEED_UPDATE_VIDEO_ENCODER,this);case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",e.t0.throw());case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setOptimizationMode",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("motion"===t||"detail"===t||"balanced"===t){e.next=2;break}return e.abrupt("return",void Zv.error(Pv.INVALID_PARAMS,"optimization mode must be motion, detail or balanced"));case 2:return n=this._optimizationMode,e.prev=3,this._optimizationMode=t,e.next=7,Iw(this,Oy.SET_OPTIMIZATION_MODE,this);case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(3),this._optimizationMode=n,Zv.error("[".concat(this.getTrackId(),"] set optimization mode failed"),e.t0.toString()),e.t0;case 12:Zv.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(t,")"));case 13:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setScalabiltyMode",value:function(e){if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return Zv.error(Pv.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabiltyMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabiltyMode=e,Zv.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(e,")"))}},{key:"updateMediaStreamTrackResolution",value:function(){var e=this;ww(this._originMediaStreamTrack).then((function(t){var n=a(t,2),r=n[0],i=n[1];e._videoHeight=i,e._videoWidth=r})).catch(Sw)}},{key:"_updatePlayerSource",value:function(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}},{key:"_getDefaultPlayerConfig",value:function(){return{fit:"contain"}}},{key:"updateBitrateFromProfile",value:function(){if(this._encoderConfig){var e=this.getMediaStreamTrackSettings(),t=e.width,n=e.height,r=e.frameRate;if(t&&n&&r){var i=function(e,t,n){var r,i=lg("BITRATE_ADAPTER_TYPE"),o=200*Math.pow(n/15,.6)*Math.pow(e*t/640/360,.75),a=o;if("STANDARD_BITRATE"===i)r=4*o;else{if("COMPATIABLE_BITRATE"!==i)return;r=2*o}return[Math.floor(r),Math.floor(a)]}(t,n,r)||[void 0,void 0],o=a(i,2),s=o[0],c=o[1];this._encoderConfig.bitrateMin||this._encoderConfig.bitrateMax||(this._encoderConfig.bitrateMin=c,this._encoderConfig.bitrateMax=s,Zv.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(t,", h: ").concat(n,", fps: ").concat(r,"] => [brMax: ").concat(s,", brMin: ").concat(c,"]")))}}}},{key:"getVideoElementVisibleStatus",value:function(){try{var e,t,n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},i=r.element,o=r.slot;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){var a=JT.checkOneElementVisible(i),s=Object.assign({},a);if(s.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=s.visible;var c=Y_.reportApiInvoke(null,{tag:Pm.TRACER,name:Dm.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});s.visible?c.onSuccess("Video is visible"):c.onSuccess("Invisible because of ".concat(s.reason))}return s}return}catch(u){throw new Fv(Pv.GET_VIDEO_ELEMENT_VISIBLE_ERROR,u.message)}}},{key:"renewMediaStreamTrack",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"pipe",value:function(e){if(this.processor===e)return e;if(e._source)throw new Fv(Pv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}},{key:"unpipe",value:function(){if(this.processor){var e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}}},{key:"close",value:function(){i(o(n.prototype),"close",this).call(this),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}},{key:"replaceTrack",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof MediaStreamTrack){e.next=2;break}throw new Fv(Pv.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");case 2:if("video"===t.kind){e.next=4;break}throw new Fv(Pv.INVALID_PARAMS,"track should be a video MediaStreamTrack");case 4:return e.next=6,this._updateOriginMediaStreamTrack(t,n,!0);case 6:this.updateMediaStreamTrackResolution();case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"bindProcessorDestinationEvents",value:function(){var e=this;this.processorDestination.on(eb.ON_TRACK,function(){var t=u(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=9;break}if(t.t0=n!==e._mediaStreamTrack,!t.t0){t.next=7;break}return e._mediaStreamTrack=n,e._updatePlayerSource(),t.next=7,Iw(e,Oy.NEED_REPLACE_TRACK,e);case 7:t.next=15;break;case 9:if(t.t1=e._mediaStreamTrack!==e._originMediaStreamTrack,!t.t1){t.next=15;break}return e._mediaStreamTrack=e._originMediaStreamTrack,e._updatePlayerSource(),t.next=15,Iw(e,Oy.NEED_REPLACE_TRACK,e);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"unbindProcessorDestinationEvents",value:function(){this.processorDestination.removeAllListeners(eb.ON_TRACK)}},{key:"unbindProcessorContextEvents",value:function(){this.processorContext.removeAllListeners(tb.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(tb.REQUEST_CONSTRAINTS)}}]),n}(eE)).prototype,"play",[gT,mT],Object.getOwnPropertyDescriptor(FT.prototype,"play"),FT.prototype),x_(FT.prototype,"stop",[yT],Object.getOwnPropertyDescriptor(FT.prototype,"stop"),FT.prototype),x_(FT.prototype,"setEnabled",[bT,_T,ET],Object.getOwnPropertyDescriptor(FT.prototype,"setEnabled"),FT.prototype),x_(FT.prototype,"setMuted",[ST,wT,xT],Object.getOwnPropertyDescriptor(FT.prototype,"setMuted"),FT.prototype),x_(FT.prototype,"setEncoderConfiguration",[TT,IT],Object.getOwnPropertyDescriptor(FT.prototype,"setEncoderConfiguration"),FT.prototype),x_(FT.prototype,"getStats",[RT],Object.getOwnPropertyDescriptor(FT.prototype,"getStats"),FT.prototype),x_(FT.prototype,"setBeautyEffect",[kT,OT],Object.getOwnPropertyDescriptor(FT.prototype,"setBeautyEffect"),FT.prototype),x_(FT.prototype,"getCurrentFrameData",[CT],Object.getOwnPropertyDescriptor(FT.prototype,"getCurrentFrameData"),FT.prototype),x_(FT.prototype,"getCurrentFrameImage",[AT],Object.getOwnPropertyDescriptor(FT.prototype,"getCurrentFrameImage"),FT.prototype),x_(FT.prototype,"setBitrateLimit",[NT],Object.getOwnPropertyDescriptor(FT.prototype,"setBitrateLimit"),FT.prototype),x_(FT.prototype,"setOptimizationMode",[jT],Object.getOwnPropertyDescriptor(FT.prototype,"setOptimizationMode"),FT.prototype),x_(FT.prototype,"setScalabiltyMode",[DT],Object.getOwnPropertyDescriptor(FT.prototype,"setScalabiltyMode"),FT.prototype),x_(FT.prototype,"updateMediaStreamTrackResolution",[PT],Object.getOwnPropertyDescriptor(FT.prototype,"updateMediaStreamTrackResolution"),FT.prototype),x_(FT.prototype,"pipe",[LT],Object.getOwnPropertyDescriptor(FT.prototype,"pipe"),FT.prototype),x_(FT.prototype,"unpipe",[MT],Object.getOwnPropertyDescriptor(FT.prototype,"unpipe"),FT.prototype),x_(FT.prototype,"close",[UT],Object.getOwnPropertyDescriptor(FT.prototype,"close"),FT.prototype),x_(FT.prototype,"replaceTrack",[VT],Object.getOwnPropertyDescriptor(FT.prototype,"replaceTrack"),FT.prototype),FT),eI=(BT=K_({argsMap:function(e,t){return[e.getTrackId(),t]}}),GT=PE(),qT=$_("CameraVideoTrack","_enabledMutex"),WT=K_({argsMap:function(e,t){return[e.getTrackId(),t]}}),HT=PE(),zT=K_({argsMap:function(e,t){return[e.getTrackId(),t]}}),KT=PE(),YT=K_({argsMap:function(e){return[e.getTrackId()]}}),x_((ZT=function(e){h(n,e);var t=f(n);function n(e,r,i,o,a,s){var d;return p(this,n),d=t.call(this,e,ig(r.encoderConfig),o,a,s),Lf(l(d),"_config",void 0),Lf(l(d),"_originalConstraints",void 0),Lf(l(d),"_constraints",void 0),Lf(l(d),"_enabled",!0),Lf(l(d),"_deviceName","default"),Lf(l(d),"tryResumeVideoForIOS15_16WeChat",u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=(_f()||Ef())&&!function(){var e=of();if(e.os!==Zh.IOS||!e.osVersion)return!1;var t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=2}()&&xf()&&d._enabled&&!d._isClosed,!e.t0){e.next=5;break}return Zv.debug("[".concat(d.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),e.next=5,d.renewMediaStreamTrack();case 5:case"end":return e.stop()}}),e)})))),d._config=r,d._originalConstraints=i,d._constraints=i,d._deviceName=e.label,d._encoderConfig=ig(d._config.encoderConfig),iE.on(Z_.IOS_15_16_INTERRUPTION_END,d.tryResumeVideoForIOS15_16WeChat),iE.on(Z_.IOS_INTERRUPTION_END,d.tryResumeVideoForIOS15_16WeChat),d.bindProcessorContextEvents(),d}return v(n,[{key:"__className__",get:function(){return"CameraVideoTrack"}},{key:"setDevice",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zv.info("[".concat(this.getTrackId(),"] set device to ").concat(t)),!this._enabled){e.next=36;break}return e.prev=1,e.next=4,NE.getDeviceById(t);case 4:return n=e.sent,(r={}).video=QT({},this._constraints),r.video.deviceId={exact:t},r.video.facingMode=void 0,this._originMediaStreamTrack.stop(),i=null,e.prev=8,e.next=11,IE(r,this.getTrackId());case 11:i=e.sent,e.next=23;break;case 14:return e.prev=14,e.t0=e.catch(8),Zv.error("[".concat(this.getTrackId(),"] setDevice failed"),e.t0.toString()),e.next=19,IE({video:this._constraints},this.getTrackId());case 19:return i=e.sent,e.next=22,this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1);case 22:throw e.t0;case 23:return e.next=25,this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!1);case 25:this.updateMediaStreamTrackResolution(),this._deviceName=n.label,this._config.cameraId=t,this._constraints.deviceId={exact:t},e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(1),Zv.error("[".concat(this.getTrackId(),"] setDevice error"),e.t1.toString()),e.t1;case 34:e.next=46;break;case 36:return e.prev=36,e.next=39,NE.getDeviceById(t);case 39:o=e.sent,this._deviceName=o.label,this._config.cameraId=t,this._constraints.deviceId={exact:t},e.next=46;break;case 43:throw e.prev=43,e.t2=e.catch(36),Zv.error("[".concat(this.getTrackId(),"] setDevice error"),e.t2.toString()),e.t2;case 46:Zv.info("[".concat(this.getTrackId(),"] setDevice success"));case 47:case"end":return e.stop()}}),e,this,[[1,31],[8,14],[36,43]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setEnabled",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=4;break}if(t!==this._enabled){e.next=3;break}return e.abrupt("return");case 3:this.stateCheck("enabled",t);case 4:if(Zv.info("[".concat(this.getTrackId(),"] start setEnabled"),t),!t){e.next=25;break}if(e.prev=5,!this.isExternalTrack){e.next=10;break}this._originMediaStreamTrack.enabled=!0,e.next=15;break;case 10:return e.next=12,IE({video:this._constraints},this.getTrackId());case 12:return r=e.sent,e.next=15,this._updateOriginMediaStreamTrack(r.getVideoTracks()[0],!1);case 15:return e.next=17,Iw(this,Oy.NEED_ENABLE_TRACK,this);case 17:e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(5),Zv.error("[".concat(this.getTrackId(),"] setEnabled true error"),e.t0.toString()),e.t0;case 22:this.updateMediaStreamTrackResolution(),Zv.info("[".concat(this.getTrackId(),"] setEnabled to true success")),n||(this._enabled=!0),e.next=35;break;case 25:return this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),n||(this._enabled=!1),e.prev=26,e.next=29,Iw(this,Oy.NEED_DISABLE_TRACK,this);case 29:e.next=34;break;case 31:throw e.prev=31,e.t1=e.catch(26),Zv.error("[".concat(this.getTrackId(),"] setEnabled to false error"),e.t1.toString()),e.t1;case 34:Zv.info("[".concat(this.getTrackId(),"] setEnabled to false success"));case 35:case"end":return e.stop()}}),e,this,[[5,19],[26,31]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setEncoderConfiguration",value:function(){var e=u(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._enabled){e.next=2;break}throw new Fv(Pv.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");case 2:return t=ig(t),this._forceBitrateLimit&&(t.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:t.bitrateMax,t.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:t.bitrateMin),(r=Nw(this._config)).encoderConfig=t,i=fT(r),(hf()||pf()||wf())&&(i.deviceId=void 0),Zv.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(t),JSON.stringify(i)),e.prev=7,e.next=10,this._originMediaStreamTrack.applyConstraints(i);case 10:this.updateMediaStreamTrackResolution(),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(7),o=new Fv(Pv.UNEXPECTED_ERROR,e.t0.toString()),Zv.error("[".concat(this.getTrackId(),"] applyConstraints error"),o.toString()),o;case 17:return this._config=r,this._constraints=i,this._originalConstraints=i,this._encoderConfig=t,-1===this._hints.indexOf(Cy.SCREEN_TRACK)&&this.updateBitrateFromProfile(),e.prev=18,e.next=21,Iw(this,Oy.NEED_UPDATE_VIDEO_ENCODER,this);case 21:e.next=26;break;case 23:return e.prev=23,e.t1=e.catch(18),e.abrupt("return",e.t1.throw());case 26:case"end":return e.stop()}}),e,this,[[7,13],[18,23]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_getDefaultPlayerConfig",value:function(){return{mirror:!0,fit:"cover"}}},{key:"onTrackEnded",value:function(){var e=this;if((pf()||wf())&&this._enabled&&!this._isClosed&&iE.duringInterruption){var t=function(){var n=u(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(iE.off(Z_.IOS_INTERRUPTION_END,t),n.t0=e._enabled&&!e._isClosed,!n.t0){n.next=8;break}return Zv.debug("[".concat(e.getTrackId(),"] try capture camera media device for interrupted iOS device.")),n.next=6,e.setEnabled(!1);case 6:return n.next=8,e.setEnabled(!0);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();iE.on(Z_.IOS_INTERRUPTION_END,t)}else Zv.debug("[".concat(this.getTrackId(),"] track ended")),this.emit(Py.TRACK_ENDED)}},{key:"renewMediaStreamTrack",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t||this._constraints,(r=NE.searchDeviceIdByName(this._deviceName))&&!n.deviceId&&(n.deviceId={exact:r}),!this._enabled){e.next=9;break}return e.next=4,IE({video:n},this.getTrackId());case 4:return i=e.sent,this._constraints=n,e.next=8,this._updateOriginMediaStreamTrack(i.getVideoTracks()[0],!0);case 8:this.updateMediaStreamTrackResolution();case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){i(o(n.prototype),"close",this).call(this),iE.off(Z_.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),iE.off(Z_.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}},{key:"bindProcessorContextEvents",value:function(){var e=this;this.processorContext.on(tb.REQUEST_UPDATE_CONSTRAINTS,function(){var t=u(c().mark((function t(n,r,i){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=Object.assign.apply(Object,[{},e._originalConstraints].concat(g(n))),t.next=4,e.renewMediaStreamTrack(o);case 4:r(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this.processorContext.on(tb.REQUEST_CONSTRAINTS,function(){var t=u(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(e._originMediaStreamTrack.getSettings());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}]),n}($T)).prototype,"setDevice",[BT,GT],Object.getOwnPropertyDescriptor(ZT.prototype,"setDevice"),ZT.prototype),x_(ZT.prototype,"setEnabled",[qT,WT,HT],Object.getOwnPropertyDescriptor(ZT.prototype,"setEnabled"),ZT.prototype),x_(ZT.prototype,"setEncoderConfiguration",[zT,KT],Object.getOwnPropertyDescriptor(ZT.prototype,"setEncoderConfiguration"),ZT.prototype),x_(ZT.prototype,"close",[YT],Object.getOwnPropertyDescriptor(ZT.prototype,"close"),ZT.prototype),ZT),tI=function(){function e(t,n){p(this,e),Lf(this,"uid",void 0),Lf(this,"_uintid",void 0),Lf(this,"_trust_in_room_",!0),Lf(this,"_trust_audio_enabled_state_",!0),Lf(this,"_trust_video_enabled_state_",!0),Lf(this,"_trust_audio_mute_state_",!0),Lf(this,"_trust_video_mute_state_",!0),Lf(this,"_audio_muted_",!1),Lf(this,"_video_muted_",!1),Lf(this,"_audio_enabled_",!0),Lf(this,"_video_enabled_",!0),Lf(this,"_audio_added_",!1),Lf(this,"_video_added_",!1),Lf(this,"_trust_video_stream_added_state_",!0),Lf(this,"_trust_audio_stream_added_state_",!0),Lf(this,"_audioTrack",void 0),Lf(this,"_videoTrack",void 0),Lf(this,"_audioSSRC",void 0),Lf(this,"_videoSSRC",void 0),Lf(this,"_audioOrtc",void 0),Lf(this,"_videoOrtc",void 0),Lf(this,"_cname",void 0),Lf(this,"_rtxSsrcId",void 0),this.uid=t,this._uintid=n}return v(e,[{key:"hasVideo",get:function(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}},{key:"hasAudio",get:function(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}},{key:"audioTrack",get:function(){if(this.hasAudio)return this._audioTrack}},{key:"videoTrack",get:function(){if(this.hasVideo)return this._videoTrack}}]),e}(),nI=Ud,rI=Du,iI=Gu;Wn({target:"Promise",stat:!0},{try:function(e){var t=rI.f(this),n=iI(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var oI=nI,aI=Wn,sI=j,cI=w,uI=pb,lI=pe,dI=at,hI=Xn,fI=xg,pI=Sb,vI=r_,gI=ke,mI=Tt("isConcatSpreadable"),yI=9007199254740991,bI="Maximum allowed index exceeded",_I=sI.TypeError,EI=gI>=51||!cI((function(){var e=[];return e[mI]=!1,e.concat()[0]!==e})),SI=vI("concat"),wI=function(e){if(!lI(e))return!1;var t=e[mI];return void 0!==t?!!t:uI(e)};aI({target:"Array",proto:!0,forced:!EI||!SI},{concat:function(e){var t,n,r,i,o,a=dI(this),s=pI(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(wI(o=-1===t?a:arguments[t])){if(c+(i=hI(o))>yI)throw _I(bI);for(n=0;n<i;n++,c++)n in o&&fI(s,c,o[n])}else{if(c>=yI)throw _I(bI);fI(s,c++,o)}return s.length=c,s}});var xI={},TI=te,II=he,RI=$r.f,kI=Cg,OI="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];xI.f=function(e){return OI&&"Window"==TI(e)?function(e){try{return RI(e)}catch(e){return kI(OI)}}(e):RI(II(e))};var CI={},AI=Tt;CI.f=AI;var NI=ve,jI=ut,DI=CI,PI=hn.f,LI=function(e){var t=NI.Symbol||(NI.Symbol={});jI(t,e)||PI(t,e,{value:DI.f(e)})},MI=Wn,UI=j,VI=_e,FI=U,BI=W,GI=C,qI=B,WI=Ae,HI=w,zI=ut,KI=pb,YI=V,ZI=pe,JI=A,XI=Ue,QI=yn,$I=at,eR=he,tR=Lt,nR=Xo,rR=X,iR=$i,oR=ji,aR=$r,sR=xI,cR=bi,uR=F,lR=hn,dR=Ci,hR=H,fR=Dc,pR=is,vR=Xe.exports,gR=ui,mR=pt,yR=Tt,bR=CI,_R=LI,ER=Ss,SR=Ja,wR=Cb.forEach,xR=Dr("hidden"),TR="Symbol",IR=yR("toPrimitive"),RR=SR.set,kR=SR.getterFor(TR),OR=Object.prototype,CR=UI.Symbol,AR=CR&&CR.prototype,NR=UI.TypeError,jR=UI.QObject,DR=VI("JSON","stringify"),PR=uR.f,LR=lR.f,MR=sR.f,UR=hR.f,VR=GI([].push),FR=vR("symbols"),BR=vR("op-symbols"),GR=vR("string-to-symbol-registry"),qR=vR("symbol-to-string-registry"),WR=vR("wks"),HR=!jR||!jR.prototype||!jR.prototype.findChild,zR=qI&&HI((function(){return 7!=iR(LR({},"a",{get:function(){return LR(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=PR(OR,t);r&&delete OR[t],LR(e,t,n),r&&e!==OR&&LR(OR,t,r)}:LR,KR=function(e,t){var n=FR[e]=iR(AR);return RR(n,{type:TR,tag:e,description:t}),qI||(n.description=t),n},YR=function e(t,n,r){t===OR&&e(BR,n,r),QI(t);var i=tR(n);return QI(r),zI(FR,i)?(r.enumerable?(zI(t,xR)&&t[xR][i]&&(t[xR][i]=!1),r=iR(r,{enumerable:rR(0,!1)})):(zI(t,xR)||LR(t,xR,rR(1,{})),t[xR][i]=!0),zR(t,i,r)):LR(t,i,r)},ZR=function(e,t){QI(e);var n=eR(t),r=oR(n).concat($R(n));return wR(r,(function(t){qI&&!BI(JR,n,t)||YR(e,t,n[t])})),e},JR=function(e){var t=tR(e),n=BI(UR,this,t);return!(this===OR&&zI(FR,t)&&!zI(BR,t))&&(!(n||!zI(this,t)||!zI(FR,t)||zI(this,xR)&&this[xR][t])||n)},XR=function(e,t){var n=eR(e),r=tR(t);if(n!==OR||!zI(FR,r)||zI(BR,r)){var i=PR(n,r);return!i||!zI(FR,r)||zI(n,xR)&&n[xR][r]||(i.enumerable=!0),i}},QR=function(e){var t=MR(eR(e)),n=[];return wR(t,(function(e){zI(FR,e)||zI(gR,e)||VR(n,e)})),n},$R=function(e){var t=e===OR,n=MR(t?BR:eR(e)),r=[];return wR(n,(function(e){!zI(FR,e)||t&&!zI(OR,e)||VR(r,FR[e])})),r};if(WI||(pR(AR=(CR=function(){if(JI(AR,this))throw NR("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?nR(arguments[0]):void 0,t=mR(e),n=function e(n){this===OR&&BI(e,BR,n),zI(this,xR)&&zI(this[xR],t)&&(this[xR][t]=!1),zR(this,t,rR(1,n))};return qI&&HR&&zR(OR,t,{configurable:!0,set:n}),KR(t,e)}).prototype,"toString",(function(){return kR(this).tag})),pR(CR,"withoutSetter",(function(e){return KR(mR(e),e)})),hR.f=JR,lR.f=YR,dR.f=ZR,uR.f=XR,aR.f=sR.f=QR,cR.f=$R,bR.f=function(e){return KR(yR(e),e)},qI&&LR(AR,"description",{configurable:!0,get:function(){return kR(this).description}})),MI({global:!0,wrap:!0,forced:!WI,sham:!WI},{Symbol:CR}),wR(oR(WR),(function(e){_R(e)})),MI({target:TR,stat:!0,forced:!WI},{for:function(e){var t=nR(e);if(zI(GR,t))return GR[t];var n=CR(t);return GR[t]=n,qR[n]=t,n},keyFor:function(e){if(!XI(e))throw NR(e+" is not a symbol");if(zI(qR,e))return qR[e]},useSetter:function(){HR=!0},useSimple:function(){HR=!1}}),MI({target:"Object",stat:!0,forced:!WI,sham:!qI},{create:function(e,t){return void 0===t?iR(e):ZR(iR(e),t)},defineProperty:YR,defineProperties:ZR,getOwnPropertyDescriptor:XR}),MI({target:"Object",stat:!0,forced:!WI},{getOwnPropertyNames:QR,getOwnPropertySymbols:$R}),MI({target:"Object",stat:!0,forced:HI((function(){cR.f(1)}))},{getOwnPropertySymbols:function(e){return cR.f($I(e))}}),DR&&MI({target:"JSON",stat:!0,forced:!WI||HI((function(){var e=CR();return"[null]"!=DR([e])||"{}"!=DR({a:e})||"{}"!=DR(Object(e))}))},{stringify:function(e,t,n){var r=fR(arguments),i=t;if((ZI(t)||void 0!==e)&&!XI(e))return KI(t)||(t=function(e,t){if(YI(i)&&(t=BI(i,this,e,t)),!XI(t))return t}),r[1]=t,FI(DR,null,r)}}),!AR[IR]){var ek=AR.valueOf;pR(AR,IR,(function(e){return BI(ek,this)}))}ER(CR,TR),gR[xR]=!0,LI("asyncIterator"),LI("hasInstance"),LI("isConcatSpreadable"),LI("iterator"),LI("match"),LI("matchAll"),LI("replace"),LI("search"),LI("species"),LI("split"),LI("toPrimitive"),LI("toStringTag"),LI("unscopables"),Ss(j.JSON,"JSON",!0);var tk=ve.Symbol;LI("asyncDispose"),LI("dispose"),LI("matcher"),LI("metadata"),LI("observable"),LI("patternMatch"),LI("replaceAll");var nk=tk,rk=CI.f("asyncIterator"),ik=rk;function ok(e){this.wrapped=e}function ak(e){var t,n;function r(t,n){try{var o=e[t](n),a=o.value,s=a instanceof ok;oI.resolve(s?a.wrapped:a).then((function(e){s?r("return"===t?"return":"next",e):i(o.done?"return":"normal",e)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new oI((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function sk(e){return function(){return new ak(e.apply(this,arguments))}}function ck(e){return new ok(e)}ak.prototype["function"==typeof nk&&ik||"@@asyncIterator"]=function(){return this},ak.prototype.next=function(e){return this._invoke("next",e)},ak.prototype.throw=function(e){return this._invoke("throw",e)},ak.prototype.return=function(e){return this._invoke("return",e)};var uk=CI.f("iterator");function lk(e,t){var n={},r=!1;function i(n,i){return r=!0,i=new oI((function(t){t(e[n](i))})),{done:!1,value:t(i)}}return n[void 0!==nk&&uk||"@@iterator"]=function(){return this},n.next=function(e){return r?(r=!1,e):i("next",e)},"function"==typeof e.throw&&(n.throw=function(e){if(r)throw r=!1,e;return i("throw",e)}),"function"==typeof e.return&&(n.return=function(e){return r?(r=!1,e):i("return",e)}),n}var dk=rk,hk={exports:{}};function fk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fk(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vk(e,t,n,r,i,o,a){var s=[],c=[],u=[],l=[],d=!1,h=!1;if(hk.exports.parse(e).mediaDescriptions.forEach((function(e){a&&a!==e.attributes.direction||("video"!==e.media.mediaType||d||(c=e.attributes.payloads,l=e.attributes.extmaps,d=!0),"audio"!==e.media.mediaType||h||(s=e.attributes.payloads,u=e.attributes.extmaps,h=!0))})),!l||0===c.length)throw new Error("Cannot get video capabilities from SDP.");if(!u||0===s.length)throw new Error("Cannot get audio capabilities from SDP.");return c.forEach((function(e){var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate))})),s.forEach((function(e){var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate))})),t&&(s=s.filter((function(e){var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),c=c.filter((function(e){var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}))),n&&(c=c.filter((function(e){var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),r&&(s=s.filter((function(e){var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),i&&(null==i?void 0:i.length)>0&&(s=s.filter((function(e){var t;return i.includes((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}))),o&&(null==o?void 0:o.length)>0&&(c=c.filter((function(e){var t;return o.includes((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}))),{audioCodecs:s,videoCodecs:c,audioExtensions:u,videoExtensions:l}}function gk(e){var t,n,r,i=hk.exports.parse(e),o=s(i.mediaDescriptions);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(!t){var c=a.attributes.iceUfrag,u=a.attributes.icePwd;if(!c||!u)throw new Error("Cannot get iceUfrag or icePwd from SDP.");t={iceUfrag:c,icePwd:u}}if(!n){var l=a.attributes.fingerprints;l.length>0&&(n={fingerprints:l})}}}catch(d){o.e(d)}finally{o.f()}if(!n&&i.attributes.fingerprints.length>0&&(n={fingerprints:i.attributes.fingerprints}),!n||!t)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:t,dtlsParameters:n}}function mk(e,t){var n=[],r=e.attributes.ssrcGroups.filter((function(e){return"FID"===e.semantic})),i=e.attributes.ssrcGroups.find((function(e){return"SIM"===e.semantic})),o=e.attributes.ssrcs;if(i)i.ssrcIds.forEach((function(e){var i,o=null===(i=r.find((function(t){return t.ssrcIds[0]===e})))||void 0===i?void 0:i.ssrcIds[1];n.push({ssrcId:e,rtx:t?o:void 0})}));else if(r.length>0){var a=r[0].ssrcIds[0],s=r[0].ssrcIds[1];n.push({ssrcId:a,rtx:t?s:void 0})}else{if(0===o.length)throw new Error("No ssrcs found on local media description.");n.push({ssrcId:o[0].ssrcId})}return n}function yk(e,t){var n,r=e.cname;t&&t.ip&&"number"==typeof t.port?(n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],Zv.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(n.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),Zv.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):n=e.iceParameters.candidates.map((function(e){return{foundation:e.foundation,componentId:"1",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}}}));var i,o={fingerprints:e.dtlsParameters.fingerprints.map((function(e){return{hashFunction:e.algorithm,fingerprint:e.fingerprint}}))},a={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};switch(e.dtlsParameters.role){case"server":i="passive";break;case"client":i="active";break;case"auto":i="actpass"}return{dtlsParameters:o,iceParameters:a,candidates:n,rtpCapabilities:Ok(e.rtpCapabilities),setup:i,cname:r}}function bk(e,t,n){var r=[],i=[];return e.forEach((function(e){var o=e.ssrcId,a=e.rtx,s=_w(8,"track-"),c={ssrcId:o,attributes:pk({label:s,mslabel:n=n||_w(10,""),msid:"".concat(n," ").concat(s)},t&&{cname:t})};if(r.push(c),void 0!==a){var u={ssrcId:a,attributes:pk({label:s,mslabel:n,msid:"".concat(n," ").concat(s)},t&&{cname:t})};r.push(u),i.push({semantic:"FID",ssrcIds:[o,a]})}})),e.length>1&&i.push({semantic:"SIM",ssrcIds:e.map((function(e){return e.ssrcId}))}),{ssrcs:r,ssrcGroups:i}}function _k(e,t){t instanceof zS&&e.attributes.payloads.forEach((function(e){var n,r=null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase();if(r&&-1!==["opus","pcmu","pcma","g722"].indexOf(r)){e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.minptime="10",e.fmtp.parameters.useinbandfec="1";var i=t._encoderConfig;i&&"pcmu"!==r&&"pcma"!==r&&"g722"!==r&&(i.bitrate&&!ff()&&(e.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*i.bitrate))),i.sampleRate&&(e.fmtp.parameters.maxplaybackrate="".concat(i.sampleRate),e.fmtp.parameters["sprop-maxcapturerate"]="".concat(i.sampleRate)),i.stereo&&(e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"))}}))}function Ek(e){var t=e.attributes.unrecognized.findIndex((function(e){return"x-google-flag"===e.attField&&"conference"===e.attValue}));-1!==t&&e.attributes.unrecognized.splice(t,1)}function Sk(e,t){if(t instanceof $T&&t._encoderConfig&&-1===t._hints.indexOf(Cy.SCREEN_TRACK)){var n=t._encoderConfig;hb().supportMinBitrate&&n.bitrateMin&&e.attributes.payloads.forEach((function(e){var t;["h264","h265","vp8","vp9","av1"].includes((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-min-bitrate"]="".concat(n.bitrateMin))})),hb().supportMinBitrate&&!t._hints.includes(Cy.LOW_STREAM)&&n.bitrateMax&&e.attributes.payloads.forEach((function(e){var t;["h264","h265","vp8","vp9","av1"].includes((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-start-bitrate"]="".concat(lg("X_GOOGLE_START_BITRATE")||Math.floor(n.bitrateMax)))}))}}function wk(e){if("video"===e.media.mediaType){var t=of();if(t.name===Jh.SAFARI||t.os===Zh.IOS){var n=e.attributes.extmaps.findIndex((function(e){return/video-orientation/g.test(e.extensionName)}));-1!==n&&e.attributes.extmaps.splice(n,1)}}}function xk(e,t,n){if(t){var r,i;if("video"===e.media.mediaType?(r=n.videoExtensions,i=n.videoCodecs):(r=n.audioExtensions,i=n.audioCodecs),!0===t.twcc){var o=r.find((function(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName}));o&&(e.attributes.extmaps.find((function(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName}))||e.attributes.extmaps.push({entry:o.entry,extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"}),function(e,t){return t.filter((function(t){return!!e.find((function(e){return e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((function(e){return"transport-cc"===e.type}))}))}))}(i,e.attributes.payloads).forEach((function(e){e.rtcpFeedbacks.find((function(e){return"transport-cc"===e.type}))||e.rtcpFeedbacks.push({type:"transport-cc"})})))}else if(!1===t.twcc){var a=e.attributes.extmaps.findIndex((function(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName}));-1!==a&&e.attributes.extmaps.splice(a,1),e.attributes.payloads.forEach((function(e){var t=e.rtcpFeedbacks.findIndex((function(e){return"transport-cc"===e.type}));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}if(!0===t.remb){var s=r.find((function(e){return"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName}));s&&(e.attributes.extmaps.find((function(e){return"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName}))||e.attributes.extmaps.push({entry:s.entry,extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}),function(e,t){return t.filter((function(t){return!!e.find((function(e){return e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((function(e){return"goog-remb"===e.type}))}))}))}(i,e.attributes.payloads).forEach((function(e){e.rtcpFeedbacks.find((function(e){return"goog-remb"===e.type}))||e.rtcpFeedbacks.push({type:"goog-remb"})})))}else if(!1===t.remb){var c=e.attributes.extmaps.findIndex((function(e){return"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.extensionName}));-1!==c&&e.attributes.extmaps.splice(c,1),e.attributes.payloads.forEach((function(e){var t=e.rtcpFeedbacks.findIndex((function(e){return"goog-remb"===e.type}));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}}}function Tk(e,t,n){if(!ff()&&"video"===e.media.mediaType&&t instanceof $T&&("vp9"===n||"vp8"===n)&&("vp8"!==n||lg("SIMULCAST"))&&!(void 0===t._scalabiltyMode||t._scalabiltyMode.numSpatialLayers<=1)){for(var r="vp8"===n?2:t._scalabiltyMode.numSpatialLayers,i=e.attributes.ssrcs[0],o=e.attributes.ssrcGroups.find((function(e){return"FID"===e.semantic&&e.ssrcIds[0]===i.ssrcId})),a={semantic:"SIM",ssrcIds:[i.ssrcId]},s=1;s<r;s++)e.attributes.ssrcs.push({ssrcId:i.ssrcId+s,attributes:Nw(i.attributes)}),a.ssrcIds.push(i.ssrcId+s),o&&(e.attributes.ssrcs.push({ssrcId:o.ssrcIds[1]+s,attributes:Nw(i.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[i.ssrcId+s,o.ssrcIds[1]+s]}));e.attributes.ssrcGroups.unshift(a)}}function Ik(e,t,n,r,i){return Rk.apply(this,arguments)}function Rk(){return Rk=u(c().mark((function e(t,n,r,i,o){var a,s,u,l,d,h,f,p,v,g;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new RTCPeerConnection).addTransceiver("video",{direction:"sendonly"}),a.addTransceiver("audio",{direction:"sendonly"}),a.addTransceiver("video",{direction:"recvonly"}),a.addTransceiver("audio",{direction:"recvonly"}),e.next=4,a.createOffer();case 4:s=e.sent.sdp,u=vk(s,t,n,r,i,o,"sendonly"),l=vk(s,t,n,r,i,o,"recvonly"),kk(u,l,"videoExtensions",d={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},h={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},f={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]}),kk(u,l,"videoCodecs",d,h,f),kk(u,l,"audioExtensions",d,h,f),kk(u,l,"audioCodecs",d,h,f),lg("RAISE_H264_BASELINE_PRIORITY")&&(p=f.videoCodecs.findIndex((function(e){var t,n;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"===(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])})),-1!==p&&(v=f.videoCodecs.findIndex((function(e){var t;return"h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())})),v<p&&(Zv.debug("raising H264 baseline profile priority"),g=f.videoCodecs[p],f.videoCodecs.splice(p,1),f.videoCodecs.splice(v,0,g)),-1!==v&&(h.videoCodecs=h.videoCodecs.filter((function(e){var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))}))),-1!==v&&lg("FILTER_SEND_H264_BASELINE")&&(d.videoCodecs=d.videoCodecs.filter((function(e){var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&"42001f"!==(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"]))})))));try{a.close()}catch(t){}return e.abrupt("return",{send:d,recv:h,sendrecv:f});case 13:case"end":return e.stop()}}),e)}))),Rk.apply(this,arguments)}function kk(e,t,n,r,i,o){if("videoExtensions"===n||"audioExtensions"===n){var a=[];return e[n].forEach((function(e){t[n].some((function(t,n){if(e.entry===t.entry&&e.extensionName===t.extensionName)return a.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach((function(e,t){-1===a.indexOf(t)&&i[n].push(e)}))}if("videoCodecs"===n||"audioCodecs"===n){var s=[];return e[n].forEach((function(e){t[n].some((function(t,n){if(e.payloadType===t.payloadType&&JSON.stringify(e)===JSON.stringify(t))return s.push(n),!0}))?o[n].push(e):r[n].push(e)})),void t[n].forEach((function(e,t){-1===s.indexOf(t)&&i[n].push(e)}))}}function Ok(e){var t,n,r=e.send,i=e.recv,o=e.sendrecv;if(!o){if(!r||!i)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:r,recv:i}}return r?((t={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]}).audioCodecs=[].concat(g(r.audioCodecs),g(o.audioCodecs)),t.videoCodecs=[].concat(g(r.videoCodecs),g(o.videoCodecs)),t.audioExtensions=[].concat(g(r.audioExtensions),g(o.audioExtensions)),t.videoExtensions=[].concat(g(r.videoExtensions),g(o.videoExtensions))):t=o,i?((n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]}).audioCodecs=[].concat(g(i.audioCodecs),g(o.audioCodecs)),n.videoCodecs=[].concat(g(i.videoCodecs),g(o.videoCodecs)),n.audioExtensions=[].concat(g(i.audioExtensions),g(o.audioExtensions)),n.videoExtensions=[].concat(g(i.videoExtensions),g(o.videoExtensions))):n=o,{send:t,recv:n}}function Ck(e){"audio"===e.media.mediaType&&e.attributes.payloads.filter((function(e){var t;return"opus"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})).forEach((function(e){e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"}))}function Ak(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ak(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ak(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e,t){e.exports=function(){var e={8:function(e,t,n){n.r(t),n.d(t,{Parser:function(){return C},Printer:function(){return P},parse:function(){return V},print:function(){return F}});var r,i="\n",o="".concat("\r").concat(i),c=" ";function u(e){return e>="0"&&e<="9"}function d(e){return e>="!"&&e<="~"}function g(e){return d(e)||e>="\x80"&&e<="\xff"}function y(e){return"!"===e||e>="#"&&e<="'"||e>="*"&&e<="+"||e>="-"&&e<="."||e>="0"&&e<="9"||e>="A"&&e<="Z"||e>="^"&&e<="~"}function b(e){return e>="1"&&e<="9"}function _(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"}function E(e){return"d"===e||"h"===e||"m"===e||"s"===e}function S(e){return e>"\x01"&&e<"\t"||e>"\v"&&e<"\f"||e>"\x0e"&&e<"\xff"}function w(e){return _(e)||u(e)||"+"===e||"/"===e}function x(e){return u(e)||_(e)||"+"===e||"/"===e||"-"===e||"_"===e}function T(e){return _(e)||u(e)||"+"===e||"/"===e}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.VERSION="v",e.ORIGIN="o",e.SESSION_NAME="s",e.INFORMATION="i",e.URI="u",e.EMAIL="e",e.PHONE="p",e.CONNECTION="c",e.BANDWIDTH="b",e.TIME="t",e.REPEAT="r",e.ZONE_ADJUSTMENTS="z",e.KEY="k",e.ATTRIBUTE="a",e.MEDIA="m"}(r||(r={}));var O=function(){function e(){p(this,e)}return v(e,[{key:"consumeText",value:function(e,t){for(var n=t;n<e.length;){var r=e[n];if("\0"===r||"\r"===r||r===i)break;n+=1}if(n-t==0)throw new Error("Invalid text, at ".concat(e));return n}},{key:"consumeUnicastAddress",value:function(e,t,n){return this.consumeTill(e,t,c)}},{key:"consumeOneOrMore",value:function(e,t,n){for(var r=t;n(e[r]);)r++;if(r-t==0)throw new Error("Invalid rule at ".concat(t,"."));return r}},{key:"consumeSpace",value:function(e,t){if(e[t]===c)return t+1;throw new Error("Invalid space at ".concat(t,"."))}},{key:"consumeIP4Address",value:function(e,t){for(var n=t,r=0;r<4;r++)if(n=this.consumeDecimalUChar(e,n),3!==r){if("."!==e[n])throw new Error("Invalid IP4 address.");n++}return n}},{key:"consumeDecimalUChar",value:function(e,t){for(var n=t,r=0;r<3&&u(e[n]);r++,n++);if(n-t==0)throw new Error("Invalid decimal uchar.");var i=parseInt(e.slice(t,n));if(i>=0&&i<=255)return n;throw new Error("Invalid decimal uchar")}},{key:"consumeIP6Address",value:function(e,t){var n=this.consumeHexpart(e,t);return":"===e[n]?(n+=1,n=this.consumeIP4Address(e,n)):n}},{key:"consumeHexpart",value:function(e,t){var n=t;if(":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}if(":"===e[n=this.consumeHexseq(e,n)]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(e){}return n}return n}},{key:"consumeHexseq",value:function(e,t){for(var n=t;":"===e[n=this.consumeHex4(e,n)]&&":"!==e[n+1];)n+=1;return n}},{key:"consumeHex4",value:function(e,t){for(var n,r=0;r<4;r++)if(!((n=e[t+r])>="0"&&n<="9"||n>="a"&&n<="f"||n>="A"&&n<="F")){if(0===r)throw new Error("Invalid hex 4");break}return t+r}},{key:"consumeFQDN",value:function(e,t){for(var n=t;u(e[n])||_(e[n])||"-"===e[n]||"."===e[n];)n+=1;if(n-t<4)throw new Error("Invalid FQDN");return n}},{key:"consumeExtnAddr",value:function(e,t){return this.consumeOneOrMore(e,t,g)}},{key:"consumeMulticastAddress",value:function(e,t,n){switch(n){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(e,t);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(n){return this.consumeExtnAddr(e,t)}}}},{key:"consumeIP6MulticastAddress",value:function(e,t){var n=this.consumeHexpart(e,t);return"/"===e[n]?this.consumeInteger(e,n+1):n}},{key:"consumeIP4MulticastAddress",value:function(e,t){var n=t+3,r=e.slice(t,n),i=parseInt(r);if(i<224||i>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(var o=0;o<3;o++){if("."!==e[n])throw new Error("Invalid IP4 multicast address.");n+=1,n=this.consumeDecimalUChar(e,n)}return"/"===e[n]&&(n+=1),"/"===e[n=this.consumeTTL(e,n)]&&(n=this.consumeInteger(e,n)),n}},{key:"consumeInteger",value:function(e,t){if(!b(e[t]))throw new Error("Invalid integer.");for(t+=1;u(e[t]);)t+=1;return t}},{key:"consumeTTL",value:function(e,t){if("0"===e[t])return t+1;if(!b(e[t]))throw new Error("Invalid TTL.");t+=1;for(var n=0;n<2&&u(e[t]);n++)t+=1;return t}},{key:"consumeToken",value:function(e,t){return this.consumeOneOrMore(e,t,y)}},{key:"consumeTime",value:function(e,t){var n=t;if("0"===e[n])return n+1;for(b(e[n])&&(n+=1);u(e[n]);)n++;if(n-t<10)throw new Error("Invalid time");return n}},{key:"consumeAddress",value:function(e,t){return this.consumeTill(e,t,c)}},{key:"consumeTypedTime",value:function(e,t){var n=t;return E(e[n=this.consumeOneOrMore(e,n,u)])?n+1:n}},{key:"consumeRepeatInterval",value:function(e,t){if(!b(e[t]))throw new Error("Invalid repeat interval");for(t+=1;u(e[t]);)t+=1;return E(e[t])&&(t+=1),t}},{key:"consumePort",value:function(e,t){return this.consumeOneOrMore(e,t,u)}},{key:"consume",value:function(e,t,n){for(var r=0;r<n.length;r++){if(t+r>=e.length)throw new Error("consume exceeding value length");if(e[t+r]!==n[r])throw new Error("consume ".concat(n," failed at ").concat(r))}return t+n.length}},{key:"consumeTill",value:function(e,t,n){for(var r=t;r<e.length&&("string"!=typeof n||e[r]!==n)&&("function"!=typeof n||!n(e[r]));)r++;return r}}]),e}(),C=function(e){h(n,e);var t=f(n);function n(){var e;return p(this,n),e=t.call(this),k(l(e),"records",[]),k(l(e),"currentLine",0),e}return v(n,[{key:"parse",value:function(e){var t=this.probeEOL(e);this.records=e.split(t).filter((function(e){return!!e.trim()})).map(this.parseLine),this.currentLine=0;var n=this.parseVersion(),r=this.parseOrigin(),i=this.parseSessionName(),o=this.parseInformation(),a=this.parseUri(),s=this.parseEmail(),c=this.parsePhone(),u=this.parseConnection(),l=this.parseBandWidth(),d=this.parseTimeFields(),h=this.parseKey(),f=this.parseSessionAttribute(),p=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:n,origin:r,sessionName:i,information:o,uri:a,emails:s,phones:c,connection:u,bandwidths:l,timeFields:d,key:h,attributes:f,mediaDescriptions:p}}},{key:"getCurrentRecord",value:function(){var e=this.records[this.currentLine];if(!e)throw new Error("Record doesn't exit.");return e}},{key:"probeEOL",value:function(e){for(var t=0;t<e.length;t++)if(e[t]===i)return"\r"===e[t-1]?o:i;throw new Error("Invalid newline character.")}},{key:"parseLine",value:function(e,t){if(e.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");var n=e[0];if("="!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:n,value:e.slice(2),line:t,cur:0}}},{key:"parseSessionAttribute",value:function(){for(var e=new N;this.currentLine<this.records.length;){var t=this.getCurrentRecord();if(t.type!==r.ATTRIBUTE)break;var n={attField:this.extractOneOrMore(t,(function(e){return y(e)&&":"!==e})),_cur:0};":"===t.value[t.cur]&&(t.cur+=1,n.attValue=this.extractOneOrMore(t,S)),e.parse(n),this.currentLine++}return e.digest()}},{key:"parseMediaAttributes",value:function(e){for(var t=new j(e);this.currentLine<this.records.length;){var n=this.getCurrentRecord();if(n.type!==r.ATTRIBUTE)break;var i={attField:this.extractOneOrMore(n,(function(e){return y(e)&&":"!==e})),_cur:0};":"===n.value[n.cur]&&(n.cur+=1,i.attValue=this.extractOneOrMore(n,S)),t.parse(i),this.currentLine++}return t.digest()}},{key:"parseKey",value:function(){var e=this.getCurrentRecord();if(e.type===r.KEY){if("prompt"===e.value||"clear:"===e.value||"base64:"===e.value||"uri:"===e.value)return e.value;throw this.currentLine++,new Error("Invalid key.")}}},{key:"parseZone",value:function(){var e=this.getCurrentRecord();if(e.type===r.ZONE_ADJUSTMENTS){for(var t=[];;)try{var n=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);var i=!1;"-"===e.value[e.cur]&&(i=!0,e.cur+=1);var o=this.extract(e,this.consumeTypedTime);t.push({time:n,typedTime:o,back:i})}catch(e){break}if(0===t.length)throw new Error("Invalid zone adjustments");return this.currentLine++,t}return[]}},{key:"parseRepeat",value:function(){for(var e=[];;){var t=this.getCurrentRecord();if(t.type!==r.REPEAT)break;var n=this.extract(t,this.consumeRepeatInterval),i=this.parseTypedTime(t);e.push({repeatInterval:n,typedTimes:i}),this.currentLine++}return e}},{key:"parseTypedTime",value:function(e){for(var t=[];;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(e){break}if(0===t.length)throw new Error("Invalid typed time.");return t}},{key:"parseTime",value:function(){var e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);var n=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:n}}},{key:"parseBandWidth",value:function(){for(var e=[];this.currentLine<this.records.length;){var t=this.getCurrentRecord();if(t.type!==r.BANDWIDTH)break;var n=this.extractOneOrMore(t,y);if(":"!==t.value[t.cur])throw new Error("Invalid bandwidth field.");t.cur++;var i=this.extractOneOrMore(t,u);e.push({bwtype:n,bandwidth:i}),this.currentLine++}return e}},{key:"parseVersion",value:function(){var e=this.getCurrentRecord();if(e.type!==r.VERSION)throw new Error("first sdp record must be version");var t=e.value.slice(0,this.consumeOneOrMore(e.value,0,u));if(t.length!==e.value.length)throw new Error('invalid proto version, "v='.concat(e.value,'"'));return this.currentLine++,t}},{key:"parseOrigin",value:function(){var e=this.getCurrentRecord();if(e.type!==r.ORIGIN)throw new Error("second line of sdp must be origin");var t=this.extractOneOrMore(e,g);this.consumeSpaceForRecord(e);var n=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);var i=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);var o=this.extractOneOrMore(e,y);this.consumeSpaceForRecord(e);var a=this.extractOneOrMore(e,y);this.consumeSpaceForRecord(e);var s=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:n,sessVersion:i,nettype:o,addrtype:a,unicastAddress:s}}},{key:"parseSessionName",value:function(){var e=this.getCurrentRecord();if(e.type===r.SESSION_NAME){var t=this.extract(e,this.consumeText);return this.currentLine++,t}}},{key:"parseInformation",value:function(){var e=this.getCurrentRecord();if(e.type===r.INFORMATION){var t=this.extract(e,this.consumeText);return this.currentLine++,t}}},{key:"parseUri",value:function(){var e=this.getCurrentRecord();if(e.type===r.URI)return this.currentLine++,e.value}},{key:"parseEmail",value:function(){for(var e=[];;){var t=this.getCurrentRecord();if(t.type!==r.EMAIL)break;e.push(t.value),this.currentLine++}return e}},{key:"parsePhone",value:function(){for(var e=[];;){var t=this.getCurrentRecord();if(t.type!==r.PHONE)break;e.push(t.value),this.currentLine++}return e}},{key:"parseConnection",value:function(){var e=this.getCurrentRecord();if(e.type===r.CONNECTION){var t=this.extractOneOrMore(e,y);this.consumeSpaceForRecord(e);var n=this.extractOneOrMore(e,y);this.consumeSpaceForRecord(e);var i=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:n,address:i}}}},{key:"parseMedia",value:function(){var e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);var n=this.extract(e,this.consumePort);"/"===e.value[e.cur]&&(e.cur+=1,n+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);var r=[];for(r.push(this.extract(e,this.consumeToken));"/"===e.value[e.cur];)e.cur+=1,r.push(this.extract(e,this.consumeToken));if(0===r.length)throw new Error("Invalid proto");var i=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:n,protos:r,fmts:i}}},{key:"parseTimeFields",value:function(){for(var e=[];this.getCurrentRecord().type===r.TIME;){var t=this.parseTime(),n=this.parseRepeat(),i=this.parseZone();e.push({time:t,repeats:n,zones:i})}return e}},{key:"parseMediaDescription",value:function(){for(var e=[];this.currentLine<this.records.length&&this.getCurrentRecord().type===r.MEDIA;){var t=this.parseMedia(),n=this.parseInformation(),i=this.parseConnections(),o=this.parseBandWidth(),a=this.parseKey(),s=this.parseMediaAttributes(t);e.push({media:t,information:n,connections:i,bandwidths:o,key:a,attributes:s})}return e}},{key:"parseConnections",value:function(){for(var e=[];this.currentLine<this.records.length&&this.getCurrentRecord().type===r.CONNECTION;)e.push(this.parseConnection());return e}},{key:"parseFmt",value:function(e){for(var t=[];;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(e){break}if(0===t.length)throw new Error("Invalid fmts");return t}},{key:"extract",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=t.call.apply(t,[this,e.value,e.cur].concat(r)),a=e.value.slice(e.cur,o);return e.cur=o,a}},{key:"extractOneOrMore",value:function(e,t){var n=this.consumeOneOrMore(e.value,e.cur,t),r=e.value.slice(e.cur,n);return e.cur=n,r}},{key:"consumeSpaceForRecord",value:function(e){if(e.value[e.cur]!==c)throw new Error("Invalid space at ".concat(e.cur,"."));e.cur+=1}}]),n}(O),A=function(e){h(n,e);var t=f(n);function n(){var e;p(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),k(l(e),"attributes",void 0),k(l(e),"digested",!1),e}return v(n,[{key:"extractOneOrMore",value:function(e,t,n){var r=this.consumeOneOrMore(e.attValue,e._cur,t),i=e.attValue.slice(e._cur,r),o=a(n||[],2),s=o[0],c=o[1];if("number"==typeof s&&i.length<s)throw new Error("error in length, should be more or equal than ".concat(s," characters."));if("number"==typeof c&&i.length>c)throw new Error("error in length, should be less or equal than ".concat(c," characters."));return e._cur=r,i}},{key:"consumeAttributeSpace",value:function(e){if(e.attValue[e._cur]!==c)throw new Error("Invalid space at ".concat(e._cur,"."));e._cur+=1}},{key:"extract",value:function(e,t){if(!e.attValue)throw new Error("Nothing to extract from attValue.");for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=t.call.apply(t,[this,e.attValue,e._cur].concat(r)),a=e.attValue.slice(e._cur,o);return e._cur=o,a}},{key:"atEnd",value:function(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length}},{key:"peekChar",value:function(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]}},{key:"peek",value:function(e,t){if(!e.attValue)throw new Error;for(var n=0;n<t.length;n++)if(t[n]!==e.attValue[e._cur+n])return!1;return!0}},{key:"parseIceUfrag",value:function(e){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(e,w,[4,256])}},{key:"parseIcePwd",value:function(e){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(e,w,[22,256])}},{key:"parseIceOptions",value:function(e){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");for(var t=[];!this.atEnd(e);){t.push(this.extractOneOrMore(e,w));try{this.consumeAttributeSpace(e)}catch(t){if(this.atEnd(e))break;throw t}}this.attributes.iceOptions=t}},{key:"parseFingerprint",value:function(e){var t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);var n=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:n})}},{key:"parseExtmap",value:function(e){var t,n=this.extractOneOrMore(e,u);"/"===this.peekChar(e)&&(this.extract(e,this.consume,"/"),t=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);var r=this.extract(e,this.consumeTill,c),i=R(R({entry:parseInt(n,10)},t&&{direction:t}),{},{extensionName:r});this.peekChar(e)===c&&(this.consumeAttributeSpace(e),i.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(i)}},{key:"parseSetup",value:function(e){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");var t=this.extract(e,this.consumeTill);if("active"!==t&&"passive"!==t&&"actpass"!==t&&"holdconn"!==t)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=t}}]),n}(O),N=function(e){h(r,e);var n=f(r);function r(){var e;p(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=n.call.apply(n,[this].concat(i)),k(l(e),"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]}),e}return v(r,[{key:"parse",value:function(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"group":this.parseGroup(e);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"fingerprint":this.parseFingerprint(e);break;case"setup":this.parseSetup(e);break;case"tls-id":this.parseTlsId(e);break;case"identity":this.parseIdentity(e);break;case"extmap":this.parseExtmap(e);break;case"msid-semantic":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing session attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}},{key:"digest",value:function(){return this.digested=!0,this.attributes}},{key:"parseGroup",value:function(e){for(var t=this.extract(e,this.consumeToken),n=[];!this.atEnd(e)&&this.peekChar(e)===c;)this.consumeAttributeSpace(e),n.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:n})}},{key:"parseIceLite",value:function(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}},{key:"parseTlsId",value:function(e){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(e,x)}},{key:"parseIdentity",value:function(e){for(var t=this.extractOneOrMore(e,T),n=[];!this.atEnd(e)&&this.peekChar(e)===c;){this.consumeAttributeSpace(e);var r=this.extract(e,this.consumeToken);this.extract(e,this.consume,"=");var i=this.extractOneOrMore(e,(function(e){return e!==c&&S(e)}));n.push({name:r,value:i})}this.attributes.identities.push({assertionValue:t,extensions:n})}},{key:"parseMsidSemantic",value:function(e){this.peekChar(e)===c&&this.consumeAttributeSpace(e);for(var t={semantic:this.extract(e,this.consumeToken),identifierList:[]};;){try{this.consumeAttributeSpace(e)}catch(e){break}if("*"===this.peekChar(e)){this.extract(e,this.consume,"*"),t.applyForAll=!0;break}var n=this.extract(e,this.consumeTill,c);t.identifierList.push(n)}this.attributes.msidSemantic=t}}]),r}(A),j=function(e){h(r,e);var n=f(r);function r(e){var t;return p(this,r),t=n.call(this),k(l(t),"attributes",void 0),-1!==e.protos.indexOf("RTP")||e.protos.indexOf("rtp"),t.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]},t}return v(r,[{key:"parse",value:function(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"extmap":this.parseExtmap(e);break;case"setup":this.parseSetup(e);break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"candidate":this.parseCandidate(e);break;case"remote-candidate":this.parseRemoteCandidate(e);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(e);break;case"rtpmap":this.parseRtpmap(e);break;case"ptime":this.parsePtime(e);break;case"maxptime":this.parseMaxPtime(e);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(e);break;case"ssrc":this.parseSSRC(e);break;case"fmtp":this.parseFmtp(e);break;case"rtcp-fb":this.parseRtcpFb(e);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(e);break;case"mid":this.parseMid(e);break;case"msid":this.parseMsid(e);break;case"imageattr":this.parseImageAttr(e);break;case"rid":this.parseRid(e);break;case"simulcast":this.parseSimulcast(e);break;case"sctp-port":this.parseSctpPort(e);break;case"max-message-size":this.parseMaxMessageSize(e);break;case"ssrc-group":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing media attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}},{key:"parseCandidate",value:function(e){var t=this.extractOneOrMore(e,w,[1,32]);this.consumeAttributeSpace(e);var n=this.extractOneOrMore(e,u,[1,5]);this.consumeAttributeSpace(e);var r=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);var i=this.extractOneOrMore(e,u,[1,10]);this.consumeAttributeSpace(e);var o=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);var a=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,"typ"),this.consumeAttributeSpace(e);var s={foundation:t,componentId:n,transport:r,priority:i,connectionAddress:o,port:a,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e," raddr")&&(this.extract(e,this.consume," raddr"),this.consumeAttributeSpace(e),s.relAddr=this.extract(e,this.consumeAddress)),this.peek(e," rport")&&(this.extract(e,this.consume," rport"),this.consumeAttributeSpace(e),s.relPort=this.extract(e,this.consumePort));this.peekChar(e)===c;){this.consumeAttributeSpace(e);var l=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),s.extension[l]=this.extractOneOrMore(e,d)}this.attributes.candidates.push(s)}},{key:"parseRemoteCandidate",value:function(e){for(var t=[];;){var n=this.extractOneOrMore(e,u,[1,5]);this.consumeAttributeSpace(e);var r=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);var i=this.extract(e,this.consumePort);t.push({componentId:n,connectionAddress:r,port:i});try{this.consumeAttributeSpace(e)}catch(e){break}}this.attributes.remoteCandidatesList.push(t)}},{key:"parseEndOfCandidates",value:function(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}},{key:"parseRtpmap",value:function(e){var t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);var n=this.extract(e,this.consumeTill,"/");this.extract(e,this.consume,"/");var r={encodingName:n,clockRate:this.extractOneOrMore(e,u)};this.atEnd(e)||"/"!==this.peekChar(e)||(this.extract(e,this.consume,"/"),r.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));var i=this.attributes.payloads.find((function(e){return e.payloadType===parseInt(t,10)}));i?i.rtpMap=r:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:r,rtcpFeedbacks:[]})}},{key:"parsePtime",value:function(e){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(e,this.consumeTill)}},{key:"parseMaxPtime",value:function(e){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(e,this.consumeTill)}},{key:"parseDirection",value:function(e){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=e.attField}},{key:"parseSSRC",value:function(e){var t=this.extractOneOrMore(e,u);this.consumeAttributeSpace(e);var n,r=this.extract(e,this.consumeTill,":");":"===this.peekChar(e)&&(this.extract(e,this.consume,":"),n=this.extract(e,this.consumeTill));var i=this.attributes.ssrcs.find((function(e){return e.ssrcId===parseInt(t,10)}));i?i.attributes[r]=n:this.attributes.ssrcs.push({ssrcId:parseInt(t,10),attributes:m({},r,n)})}},{key:"parseFmtp",value:function(e){var t=this.extract(e,this.consumeTill,c);this.consumeAttributeSpace(e);var n=this.extract(e,this.consumeTill),r={};n.split(";").forEach((function(e){var t=e.split("="),n=a(t,2),i=n[0],o=n[1];i=i.trim();var s="string"==typeof o?o.trim():null;"string"==typeof i&&i.length>0&&(r[i]=s)}));var i=this.attributes.payloads.find((function(e){return e.payloadType===parseInt(t,10)}));i?i.fmtp={parameters:r}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:r}})}},{key:"parseFmtParameters",value:function(e){var t={},n=this.extract(e,this.consumeTill,"=");e._cur++;var r=this.extract(e,this.consumeTill,";");for(t[n]=r;";"===e.attValue[e._cur];){var i=this.extract(e,this.consumeTill,"=");e._cur++;var o=this.extract(e,this.consumeTill,";");t[i]=o}return t}},{key:"parseRtcpFb",value:function(e){var t="";t="*"===this.peekChar(e)?this.extract(e,this.consume,"*"):this.extract(e,this.consumeTill,c),this.consumeAttributeSpace(e);var n,r=this.extract(e,this.consumeTill,c);if("trr-int"===r)n={type:r,interval:this.extract(e,this.consumeTill)};else{var i={type:r};this.peekChar(e)===c&&(this.consumeAttributeSpace(e),i.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===c&&(i.additional=this.extract(e,this.consumeTill))),n=i}if("*"===t)this.attributes.rtcpFeedbackWildcards.push(n);else{var o=this.attributes.payloads.find((function(e){return e.payloadType===parseInt(t,10)}));o?o.rtcpFeedbacks.push(n):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[n]})}}},{key:"parseRTCPMux",value:function(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}},{key:"parseRTCPMuxOnly",value:function(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}},{key:"parseRTCPRsize",value:function(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}},{key:"parseRTCP",value:function(e){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");var t={port:this.extract(e,this.consumePort)};this.peekChar(e)===c&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,y),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,y),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t}},{key:"parseMsid",value:function(e){var t={id:this.extractOneOrMore(e,y,[1,64])};this.peekChar(e)===c&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,y,[1,64])),this.attributes.msids.push(t)}},{key:"parseImageAttr",value:function(e){this.attributes.imageattr.push(e.attValue)}},{key:"parseRid",value:function(e){var t=this.extractOneOrMore(e,(function(e){return _(e)||u(e)||"_"===e||"-"===e}));this.consumeAttributeSpace(e);var n={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===c){if(this.consumeAttributeSpace(e),this.peek(e,"pt=")){this.extract(e,this.consume,"pt=");for(var r=[];;){var i=this.extract(e,this.consumeToken);r.push(i);try{this.extract(e,this.consume,",")}catch(e){break}}n.payloads=r,this.peekChar(e)===c&&this.extract(e,this.consume,c)}for(;;){var o=this.extract(e,this.consumeToken);if("depend"===o){var a={type:o,rids:this.extract(e,this.consume,"=").split(",")};n.params.push(a)}else{var s={type:o};"="===this.peekChar(e)&&(this.extract(e,this.consume,"="),s.val=this.extract(e,this.consumeTill,";")),n.params.push(s)}try{this.extract(e,this.consume,";")}catch(e){break}}}this.attributes.rids.push(n)}},{key:"parseSimulcast",value:function(e){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)}},{key:"parseSctpPort",value:function(e){this.attributes.sctpPort=this.extractOneOrMore(e,u,[1,5])}},{key:"parseMaxMessageSize",value:function(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,u,[1,void 0])}},{key:"digest",value:function(){return this.digested=!0,this.attributes}},{key:"parseMid",value:function(e){this.attributes.mid=this.extract(e,this.consumeToken)}},{key:"parseSSRCGroup",value:function(e){for(var t=this.extract(e,this.consumeToken),n=[];;)try{this.consumeAttributeSpace(e);var r=this.extract(e,this.consumeInteger);n.push(parseInt(r,10))}catch(e){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:n})}}]),r}(A);function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(){function e(){p(this,e),D(this,"eol",o)}return v(e,[{key:"print",value:function(e,t){var n="";return t&&(this.eol=t),n+=this.printVersion(e.version),n+=this.printOrigin(e.origin),n+=this.printSessionName(e.sessionName),n+=this.printInformation(e.information),n+=this.printUri(e.uri),n+=this.printEmail(e.emails),n+=this.printPhone(e.phones),n+=this.printConnection(e.connection),n+=this.printBandwidth(e.bandwidths),n+=this.printTimeFields(e.timeFields),n+=this.printKey(e.key),n+=this.printSessionAttributes(e.attributes),n+=this.printMediaDescription(e.mediaDescriptions)}},{key:"printVersion",value:function(e){return"v=".concat(e).concat(this.eol)}},{key:"printOrigin",value:function(e){return"o=".concat(e.username," ").concat(e.sessId," ").concat(e.sessVersion," ").concat(e.nettype," ").concat(e.addrtype," ").concat(e.unicastAddress).concat(this.eol)}},{key:"printSessionName",value:function(e){return e?"s=".concat(e).concat(this.eol):""}},{key:"printInformation",value:function(e){return e?"i=".concat(e).concat(this.eol):""}},{key:"printUri",value:function(e){return e?"u=".concat(e).concat(this.eol):""}},{key:"printEmail",value:function(e){var t,n="",r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+="e=".concat(i).concat(this.eol)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"printPhone",value:function(e){var t,n="",r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+="e=".concat(i).concat(this.eol)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"printConnection",value:function(e){return e?"c=".concat(e.nettype," ").concat(e.addrtype," ").concat(e.address).concat(this.eol):""}},{key:"printBandwidth",value:function(e){var t,n="",r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+="b=".concat(i.bwtype,":").concat(i.bandwidth).concat(this.eol)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"printTimeFields",value:function(e){var t,n="",r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+="t=".concat(i.time.startTime," ").concat(i.time.startTime).concat(this.eol);var o,a=s(i.repeats);try{for(a.s();!(o=a.n()).done;){var c=o.value;n+="r=".concat(c.repeatInterval," ").concat(c.typedTimes.join(" ")).concat(this.eol)}}catch(u){a.e(u)}finally{a.f()}i.zoneAdjustments&&(n+="z=",n+="z=".concat(i.zoneAdjustments.map((function(e){return"".concat(e.time," ").concat(e.back?"-":""," ").concat(e.typedTime)})).join(" ")).concat(this.eol),n+=this.eol)}}catch(u){r.e(u)}finally{r.f()}return n}},{key:"printKey",value:function(e){return e?"k=".concat(e).concat(this.eol):""}},{key:"printAttributes",value:function(e){var t,n="",r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+="a=".concat(i.attField).concat(i.attValue?":".concat(i.attValue):"").concat(this.eol)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"printMediaDescription",value:function(e){var t,n="",r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=this.printMedia(i.media),n+=this.printInformation(i.information),n+=this.printConnections(i.connections),n+=this.printBandwidth(i.bandwidths),n+=this.printKey(i.key),n+=this.printMediaAttributes(i)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"printConnections",value:function(e){var t,n="",r=s(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=this.printConnection(i)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"printMedia",value:function(e){return"m=".concat(e.mediaType," ").concat(e.port," ").concat(e.protos.join("/")," ").concat(e.fmts.join(" ")).concat(this.eol)}},{key:"printSessionAttributes",value:function(e){return new M(this.eol).print(e)}},{key:"printMediaAttributes",value:function(e){return new U(this.eol).print(e)}}]),e}(),L=function(){function e(t){p(this,e),D(this,"eol",void 0),this.eol=t}return v(e,[{key:"printIceUfrag",value:function(e){return void 0===e?"":"a=ice-ufrag:".concat(e).concat(this.eol)}},{key:"printIcePwd",value:function(e){return void 0===e?"":"a=ice-pwd:".concat(e).concat(this.eol)}},{key:"printIceOptions",value:function(e){return void 0===e?"":"a=ice-options:".concat(e.join(c)).concat(this.eol)}},{key:"printFingerprints",value:function(e){return e.length>0?e.map((function(e){return"a=fingerprint:".concat(e.hashFunction).concat(c).concat(e.fingerprint)})).join(this.eol)+this.eol:""}},{key:"printExtmap",value:function(e){var t=this;return e.map((function(e){return"a=extmap:".concat(e.entry).concat(e.direction?"/".concat(e.direction):"").concat(c).concat(e.extensionName).concat(e.extensionAttributes?"".concat(c).concat(e.extensionAttributes):"").concat(t.eol)})).join("")}},{key:"printSetup",value:function(e){return void 0===e?"":"a=setup:".concat(e).concat(this.eol)}},{key:"printUnrecognized",value:function(e){var t=this;return e.map((function(e){return"a=".concat(e.attField).concat(e.attValue?":".concat(e.attValue):"").concat(t.eol)})).join("")}}]),e}(),M=function(e){h(n,e);var t=f(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"print",value:function(e){var t="";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized)}},{key:"printGroups",value:function(e){var t=this,n="";return e.length>0&&(n+=e.map((function(e){return"a=group:".concat(e.semantic).concat(e.identificationTag.map((function(e){return"".concat(c).concat(e)})).join("")).concat(t.eol)})).join("")),n}},{key:"printIceLite",value:function(e){return void 0===e?"":"a=ice-lite"+this.eol}},{key:"printTlsId",value:function(e){return e?"a=tls-id:".concat(e).concat(this.eol):""}},{key:"printIdentity",value:function(e){return 0===e.length?"":e.map((function(e){return"a=identity:".concat(e.assertionValue).concat(e.extensions.map((function(e){return"".concat(c).concat(e.name).concat(e.value?"=".concat(e.value):"")})))})).join(this.eol)+this.eol}},{key:"printMsidSemantic",value:function(e){if(!e)return"";var t="a=msid-semantic:".concat(e.semantic);return e.applyForAll?t+="".concat(c,"*"):e.identifierList.length>0&&(t+=e.identifierList.map((function(e){return"".concat(c).concat(e)}))),t+this.eol}}]),n}(L),U=function(e){h(n,e);var t=f(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"print",value:function(e){var t=e.attributes,n="";return n+=this.printRTCP(t.rtcp),n+=this.printIceUfrag(t.iceUfrag),n+=this.printIcePwd(t.icePwd),n+=this.printIceOptions(t.iceOptions),n+=this.printCandidates(t.candidates),n+=this.printRemoteCandidatesList(t.remoteCandidatesList),n+=this.printEndOfCandidates(t.endOfCandidates),n+=this.printFingerprints(t.fingerprints),n+=this.printSetup(t.setup),n+=this.printMid(t.mid),n+=this.printExtmap(t.extmaps),n+=this.printRTPRelated(t),n+=this.printPtime(t.ptime),n+=this.printMaxPtime(t.maxPtime),n+=this.printDirection(t.direction),n+=this.printSSRCGroups(t.ssrcGroups),n+=this.printSSRC(t.ssrcs),n+=this.printRTCPMux(t.rtcpMux),n+=this.printRTCPMuxOnly(t.rtcpMuxOnly),n+=this.printRTCPRsize(t.rtcpRsize),n+=this.printMSId(t.msids),n+=this.printImageattr(t.imageattr),n+=this.printRid(t.rids),n+=this.printSimulcast(t.simulcast),n+=this.printSCTPPort(t.sctpPort),n+=this.printMaxMessageSize(t.maxMessageSize),n+=this.printUnrecognized(t.unrecognized)}},{key:"printCandidates",value:function(e){var t=this;return e.map((function(e){return"a=candidate:".concat(e.foundation).concat(c).concat(e.componentId).concat(c).concat(e.transport).concat(c).concat(e.priority).concat(c).concat(e.connectionAddress).concat(c).concat(e.port).concat(c,"typ").concat(c).concat(e.type).concat(e.relAddr?"".concat(c,"raddr").concat(c).concat(e.relAddr):"").concat(e.relPort?"".concat(c,"rport").concat(c).concat(e.relPort):"").concat(Object.keys(e.extension).map((function(t){return"".concat(c).concat(t).concat(c).concat(e.extension[t])})).join("")).concat(t.eol)})).join("")}},{key:"printRemoteCandidatesList",value:function(e){var t=this;return e.map((function(e){return"a=remote-candidates:".concat(e.join(c)).concat(t.eol)})).join("")}},{key:"printEndOfCandidates",value:function(e){return void 0===e?"":"a=end-of-candidates"+this.eol}},{key:"printRTPRelated",value:function(e){var t=this;if(!e.payloads)return"";var n=e.payloads,r="";r+=e.rtcpFeedbackWildcards.map((function(e){return t.printRTCPFeedback("*",e)})).join("");var i,o=s(n);try{var a=function(){var e=i.value;r+=t.printRtpMap(e.payloadType,e.rtpMap),r+=t.printFmtp(e.payloadType,e.fmtp),r+=e.rtcpFeedbacks.map((function(n){return t.printRTCPFeedback(e.payloadType,n)})).join("")};for(o.s();!(i=o.n()).done;)a()}catch(c){o.e(c)}finally{o.f()}return r}},{key:"printFmtp",value:function(e,t){if(!t)return"";var n=Object.keys(t.parameters);return 1===n.length&&null===t.parameters[n[0]]?"a=fmtp:".concat(e).concat(c).concat(n[0]).concat(this.eol):"a=fmtp:".concat(e).concat(c).concat(Object.keys(t.parameters).map((function(e){return"".concat(e,"=").concat(t.parameters[e])})).join(";")).concat(this.eol)}},{key:"printRtpMap",value:function(e,t){return t?"a=rtpmap:".concat(e).concat(c).concat(t.encodingName,"/").concat(t.clockRate).concat(t.encodingParameters?"/".concat(t.encodingParameters):"").concat(this.eol):""}},{key:"printRTCPFeedback",value:function(e,t){var n="a=rtcp-fb:".concat(e).concat(c),r=t;return"trr-int"===r.type?n+="ttr-int".concat(c).concat(r.interval):(n+="".concat(r.type),r.parameter&&(n+="".concat(c).concat(r.parameter),r.additional&&(n+="".concat(c).concat(r.additional)))),n+this.eol}},{key:"printPtime",value:function(e){return void 0===e?"":"a=ptime:".concat(e).concat(this.eol)}},{key:"printMaxPtime",value:function(e){return void 0===e?"":"a=maxptime:".concat(e).concat(this.eol)}},{key:"printDirection",value:function(e){return void 0===e?"":"a=".concat(e).concat(this.eol)}},{key:"printSSRC",value:function(e){var t=this;return e.map((function(e){return Object.keys(e.attributes).map((function(n){return"a=ssrc:".concat(e.ssrcId.toString(10)).concat(c).concat(n).concat(e.attributes[n]?":".concat(e.attributes[n]):"").concat(t.eol)})).join("")})).join("")}},{key:"printRTCPMux",value:function(e){return void 0===e?"":"a=rtcp-mux".concat(this.eol)}},{key:"printRTCPMuxOnly",value:function(e){return void 0===e?"":"a=rtcp-mux-only".concat(this.eol)}},{key:"printRTCPRsize",value:function(e){return void 0===e?"":"a=rtcp-rsize".concat(this.eol)}},{key:"printRTCP",value:function(e){if(void 0===e)return"";var t="a=rtcp:".concat(e.port);return e.netType&&(t+="".concat(c).concat(e.netType)),e.addressType&&(t+="".concat(c).concat(e.addressType)),e.address&&(t+="".concat(c).concat(e.address)),t+this.eol}},{key:"printMSId",value:function(e){var t=this;return e.map((function(e){return"a=msid:".concat(e.id).concat(e.appdata?"".concat(c).concat(e.appdata):"").concat(t.eol)})).join("")}},{key:"printImageattr",value:function(e){var t=this;return e.map((function(e){return"a=imageattr:".concat(e).concat(t.eol)})).join("")}},{key:"printRid",value:function(e){var t=this;return e.map((function(e){var n="a=rid:".concat(e.id).concat(c).concat(e.direction);return e.payloads&&(n+="".concat(c,"pt=").concat(e.payloads.join(","))),e.params.length>0&&(n+="".concat(c).concat(e.params.map((function(e){return"depend"===e.type?"depend=".concat(e.rids.join(",")):"".concat(e.type,"=").concat(e.val)})).join(";"))),n+t.eol})).join("")}},{key:"printSimulcast",value:function(e){return void 0===e?"":"a=simulcast:".concat(e).concat(this.eol)}},{key:"printSCTPPort",value:function(e){return void 0===e?"":"a=sctp-port:".concat(e).concat(this.eol)}},{key:"printMaxMessageSize",value:function(e){return void 0===e?"":"a=max-message-size:".concat(e).concat(this.eol)}},{key:"printMid",value:function(e){return void 0===e?"":"a=mid:".concat(e).concat(this.eol)}},{key:"printSSRCGroups",value:function(e){var t=this;return e.map((function(e){return"a=ssrc-group:".concat(e.semantic).concat(e.ssrcIds.map((function(e){return"".concat(c).concat(e.toString(10))})).join("")).concat(t.eol)})).join("")}}]),n}(L);function V(e){return(new C).parse(e)}function F(e,t){return(new P).print(e,t)}}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(8)}()}(hk);var jk=function(){function e(t){p(this,e),Lf(this,"sessionDesc",void 0),Lf(this,"localCapabilities",void 0),Lf(this,"rtpCapabilities",void 0),Lf(this,"candidates",void 0),Lf(this,"iceParameters",void 0),Lf(this,"dtlsParameters",void 0),Lf(this,"setup",void 0),Lf(this,"currentMidIndex",void 0),Lf(this,"cname",void 0);var n=t=Nw(t),r=n.remoteIceParameters,i=n.remoteDtlsParameters,o=n.candidates,a=n.remoteRTPCapabilities,s=n.remoteSetup,c=n.localCapabilities,u=(n.sdkCodec,n.cname),l=hk.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=a,this.candidates=o,this.iceParameters=r,this.dtlsParameters=i,this.setup=s,this.localCapabilities=c,this.cname=u;for(var d=0;d<l.mediaDescriptions.length;d++){var h=l.mediaDescriptions[d];h.attributes.iceUfrag=r.iceUfrag,h.attributes.icePwd=r.icePwd,h.attributes.fingerprints=i.fingerprints,h.attributes.candidates=o,h.attributes.setup=s,"video"===h.media.mediaType&&(h.media.fmts=a.videoCodecs.map((function(e){return e.payloadType.toString(10)})),h.attributes.payloads=a.videoCodecs,h.attributes.extmaps=a.videoExtensions),"audio"===h.media.mediaType&&(h.media.fmts=a.audioCodecs.map((function(e){return e.payloadType.toString(10)})),h.attributes.payloads=a.audioCodecs,h.attributes.extmaps=a.audioExtensions),l.mediaDescriptions[d]=this.mungMediaDesc(h)}this.sessionDesc=l,this.currentMidIndex=l.mediaDescriptions.length-1}return v(e,[{key:"toString",value:function(){return hk.exports.print(this.sessionDesc)}},{key:"send",value:function(e,t,n){var r=bk(t,this.cname),i=r.ssrcs,o=r.ssrcGroups,a=this.sessionDesc.mediaDescriptions.find((function(t){return e===zy.VIDEO?"video"===t.media.mediaType:"audio"===t.media.mediaType})),s=i[0].attributes.label,c=i[0].attributes.mslabel;return a.attributes.ssrcs=a.attributes.ssrcs.concat(i),a.attributes.ssrcGroups=a.attributes.ssrcGroups.concat(o),{id:s,mslabel:c}}},{key:"batchSend",value:function(e){var t=this;return e.map((function(e){var n=e.kind,r=e.ssrcMsg;return t.send(n,r,void 0)}))}},{key:"stopSending",value:function(e){this.sessionDesc.mediaDescriptions.forEach((function(t){var n=[],r=[],i=[];t.attributes.ssrcs.forEach((function(t){e.includes(t.attributes.label||"")?i.push(t):n.push(t)})),t.attributes.ssrcGroups.forEach((function(e){i.map((function(e){return e.ssrcId})).includes(e.ssrcIds[0])||r.push(e)})),t.attributes.ssrcs=n,t.attributes.ssrcGroups=r}))}},{key:"mute",value:function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}},{key:"unmute",value:function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}},{key:"receive",value:function(e,t,n){var r=this;e.forEach((function(e,t){var n=e._mediaStreamTrack,i=r.sessionDesc.mediaDescriptions.findIndex((function(e){return e.attributes.mid===n.kind})),o=r.mungRecvMediaDsec(r.sessionDesc.mediaDescriptions[i],e);r.sessionDesc.mediaDescriptions[i]=o}))}},{key:"stopReceiving",value:function(e){}},{key:"updateCandidates",value:function(e){var t=this;e===Ky.TCP?this.candidates.forEach((function(e){-1===t.candidates.findIndex((function(t){return"tcp"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port}))&&t.candidates.push(Nk(Nk({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})):this.candidates=this.candidates.filter((function(e){return"tcp"!==e.transport}));var n,r=s(this.sessionDesc.mediaDescriptions);try{for(r.s();!(n=r.n()).done;)n.value.attributes.candidates=this.candidates}catch(i){r.e(i)}finally{r.f()}}},{key:"restartICE",value:function(e){e=Nw(e),this.iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((function(t){t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}},{key:"predictReceivingMids",value:function(e){for(var t=[],n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}},{key:"mungRecvMediaDsec",value:function(e,t){var n=Nw(e);return _k(n,t),Sk(n,t),n}},{key:"updateRecvMedia",value:function(e,t){var n=this.sessionDesc.mediaDescriptions.findIndex((function(t){return t.attributes.mid===e}));if(-1!==n){var r=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=r}}},{key:"bumpMid",value:function(e){this.currentMidIndex+=e}},{key:"updateTrackLabel",value:function(e,t,n){var r=this.sessionDesc.mediaDescriptions.find((function(t){return e===zy.VIDEO?"video"===t.attributes.mid:"audio"===t.attributes.mid}));if(r){var i,o=r.attributes.ssrcs.find((function(e){return e.attributes.label===t}));o&&(o.attributes.label=n,null===(i=o.attributes.msid)||void 0===i||i.replace(t,n))}}},{key:"mungMediaDesc",value:function(e){var t=Nw(e);return Ek(t),function(e){var t=e.attributes.extmaps.find((function(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.extensionName}));t&&e.attributes.extmaps.splice(e.attributes.extmaps.indexOf(t),1),e.attributes.payloads.forEach((function(e){var t=e.rtcpFeedbacks.findIndex((function(e){return"transport-cc"===e.type}));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}(t),t}},{key:"getSSRC",value:function(e){var t,n=s(this.sessionDesc.mediaDescriptions);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,o=s(i.attributes.ssrcs);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.attributes.label===e)return[a]}}catch(c){o.e(c)}finally{o.f()}}}catch(c){n.e(c)}finally{n.f()}}}]),e}();function Dk(e){if(Array.isArray(e))return e.map((function(e){return e}));if(!Pk(e))return e;var t={};for(var n in e)Pk(e[n])||Array.isArray(e[n])?t[n]=Dk(e[n]):t[n]=e[n];return t}function Pk(e){return!("object"!=typeof e||Array.isArray(e)||!e)}function Lk(){var e=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return e&&e[0]?Number(e[0].split("/")[1]):null}function Mk(e){return!!window.RTCStatsReport&&e.getStats()instanceof Vd}var Uk=function(){function e(t){p(this,e),Lf(this,"input",[]),Lf(this,"size",void 0),this.size=t}return v(e,[{key:"add",value:function(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}},{key:"diffMean",value:function(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}]),e}(),Vk={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},Fk={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:Vk,remoteCandidate:Vk}},Bk={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0},Gk={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,qpSumPerFrame:0},qk={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0},Wk={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function Hk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hk(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kk=function(){function e(t,n){var r=this;p(this,e),Lf(this,"onFirstVideoReceived",void 0),Lf(this,"onFirstVideoDecoded",void 0),Lf(this,"onFirstAudioReceived",void 0),Lf(this,"onFirstVideoDecodedTimeout",void 0),Lf(this,"onFirstAudioDecoded",void 0),Lf(this,"onSelectedLocalCandidateChanged",void 0),Lf(this,"onSelectedRemoteCandidateChanged",void 0),Lf(this,"videoIsReady",!1),Lf(this,"videoIsReady2",{}),Lf(this,"pc",void 0),Lf(this,"options",void 0),Lf(this,"intervalTimer",void 0),Lf(this,"stats",Dk(Fk)),Lf(this,"isFirstVideoReceived",{}),Lf(this,"isFirstVideoDecoded",{}),Lf(this,"isFirstAudioReceived",{}),Lf(this,"isFirstAudioDecoded",{}),Lf(this,"isFirstVideoDecodedTimeout",{}),Lf(this,"lossRateWindowStats",[]),this.pc=t,this.options=n,this.intervalTimer=window.setInterval(u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.updateStats();case 1:case"end":return e.stop()}}),e)}))),this.options.updateInterval)}return v(e,[{key:"getStats",value:function(){return this.stats}},{key:"getSelectedCandidatePair",value:function(){return new Vd((function(e){e({local:zk({},Vk),remote:zk({},Vk)})}))}},{key:"setVideoIsReady",value:function(e){this.videoIsReady=e}},{key:"setVideoIsReady2",value:function(e,t){this.videoIsReady2[e]=t}},{key:"getVideoIsReady",value:function(e){return this.videoIsReady2[e]||!1}},{key:"setIsFirstAudioDecoded",value:function(e){}},{key:"destroy",value:function(){window.clearInterval(this.intervalTimer),this.pc=void 0}},{key:"calcLossRate",value:function(e){var t=this;this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);for(var n=this.lossRateWindowStats.length,r=0,i=0,o=0,a=0,s=function(){var s=u[c];e[s].forEach((function(e,c){if(t.lossRateWindowStats[n-1][s][c]&&t.lossRateWindowStats[0][s][c]){var u=t.lossRateWindowStats[n-1][s][c].packets-t.lossRateWindowStats[0][s][c].packets,l=t.lossRateWindowStats[n-1][s][c].packetsLost-t.lossRateWindowStats[0][s][c].packetsLost;"videoSend"===s||"audioSend"===s?(r+=u,o+=l):(i+=u,a+=l),Number.isNaN(u)||Number.isNaN(u)?e.packetLostRate=0:e.packetLostRate=u<=0||l<=0?0:l/(u+l)}}))},c=0,u=["videoSend","audioSend","videoRecv","audioRecv"];c<u.length;c++)s();e.sendPacketLossRate=r<=0||o<=0?0:o/(r+o),e.recvPacketLossRate=i<=0||a<=0?0:a/(i+a)}}]),e}();function Yk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yk(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jk=function(e){h(n,e);var t=f(n);function n(){var e;return p(this,n),e=t.apply(this,arguments),Lf(l(e),"_stats",Fk),Lf(l(e),"lastDecodeVideoReceiverStats",new Map),e}return v(n,[{key:"updateStats",value:function(){var e=u(c().mark((function e(){var t,n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getStats();case 2:t=e.sent,n=this.statsResponsesToObjects(t),this._stats=Dk(Fk),r=n.filter((function(e){return"ssrc"===e.type})),this.processSSRCStats(r),i=n.find((function(e){return"VideoBwe"===e.type})),i&&this.processBandwidthStats(i),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"processBandwidthStats",value:function(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}},{key:"processSSRCStats",value:function(e){var t=this;e.forEach((function(e){var n=e.id.includes("send");switch("".concat(e.mediaType,"_").concat(n?"send":"recv")){case"video_send":var r=Dk(Gk);r.codec=e.googCodecName,r.adaptionChangeReason="none",e.googCpuLimitedResolution&&(r.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(r.adaptionChangeReason="bandwidth"),r.avgEncodeMs=Number(e.googAvgEncodeMs),r.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},r.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},r.firsCount=Number(e.googFirReceived),r.nacksCount=Number(e.googNacksReceived),r.plisCount=Number(e.googPlisReceived),r.frameCount=Number(e.framesEncoded),r.bytes=Number(e.bytesSent),r.packets=Number(e.packetsSent),r.packetsLost=Number(e.packetsLost),r.ssrc=Number(e.ssrc),r.rttMs=Number(e.googRtt||0),t._stats.videoSend.push(r),t._stats.rtt=r.rttMs;break;case"video_recv":var i=Dk(Bk),o=t.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(i.codec=e.googCodecName,i.targetDelayMs=Number(e.googTargetDelayMs),i.renderDelayMs=Number(e.googRenderDelayMs),i.currentDelayMs=Number(e.googCurrentDelayMs),i.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),i.decodeMs=Number(e.googDecodeMs),i.maxDecodeMs=Number(e.googMaxDecodeMs),i.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},i.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},i.decodeFrameRate=Number(e.googFrameRateDecoded),i.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},i.jitterBufferMs=Number(e.googJitterBufferMs),i.firsCount=Number(e.googFirsSent),i.nacksCount=Number(e.googNacksSent),i.plisCount=Number(e.googPlisSent),i.framesDecodeCount=Number(e.framesDecoded),i.bytes=Number(e.bytesReceived),i.packets=Number(e.packetsReceived),i.packetsLost=Number(e.packetsLost),i.ssrc=Number(e.ssrc),i.packets>0&&!t.isFirstVideoReceived[i.ssrc]&&(t.onFirstVideoReceived&&t.onFirstVideoReceived(i.ssrc),t.isFirstVideoReceived[i.ssrc]=!0),i.framesDecodeCount>0&&!t.isFirstVideoDecoded[i.ssrc]&&(t.onFirstVideoDecoded&&t.onFirstVideoDecoded(i.ssrc,i.decodedFrame.width,i.decodedFrame.height),t.isFirstVideoDecoded[i.ssrc]=!0),o){var a=o.stats,s=Date.now()-o.lts;i.framesDecodeFreezeTime=a.framesDecodeFreezeTime,i.framesDecodeInterval=a.framesDecodeInterval,i.framesDecodeCount>a.framesDecodeCount&&t.isFirstVideoDecoded[i.ssrc]?(o.lts=Date.now(),i.framesDecodeInterval=s,i.framesDecodeInterval>=t.options.freezeRateLimit&&(t.getVideoIsReady(parseInt(e.ssrc,10))?i.framesDecodeFreezeTime+=i.framesDecodeInterval:t.setVideoIsReady2(parseInt(e.ssrc,10),!0))):i.framesDecodeCount<o.stats.framesDecodeCount&&(i.framesDecodeInterval=0)}t.lastDecodeVideoReceiverStats.set(i.ssrc,{stats:Zk({},i),lts:Date.now()}),t._stats.videoRecv.push(i);break;case"audio_recv":var c=Dk(Wk);c.codec=e.googCodecName,c.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,c.decodingCNG=Number(e.googDecodingCNG),c.decodingCTN=Number(e.googDecodingCTN),c.decodingCTSG=Number(e.googDecodingCTSG),c.decodingNormal=Number(e.googDecodingNormal),c.decodingPLC=Number(e.googDecodingPLC),c.decodingPLCCNG=Number(e.googDecodingPLCCNG),c.expandRate=Number(e.googExpandRate),c.accelerateRate=Number(e.googAccelerateRate),c.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),c.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),c.speechExpandRate=Number(e.googSpeechExpandRate),c.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),c.jitterBufferMs=Number(e.googJitterBufferMs),c.jitterMs=Number(e.googJitterReceived),c.bytes=Number(e.bytesReceived),c.packets=Number(e.packetsReceived),c.packetsLost=Number(e.packetsLost),c.ssrc=Number(e.ssrc),c.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),c.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),c.receivedFrames>0&&!t.isFirstAudioReceived[c.ssrc]&&(t.onFirstAudioReceived&&t.onFirstAudioReceived(c.ssrc),t.isFirstAudioReceived[c.ssrc]=!0),c.decodingNormal>0&&!t.isFirstAudioDecoded[c.ssrc]&&(t.onFirstAudioDecoded&&t.onFirstAudioDecoded(c.ssrc),t.isFirstAudioDecoded[c.ssrc]=!0),t._stats.audioRecv.push(c);break;case"audio_send":var u=Dk(qk);u.codec=e.googCodecName,u.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,u.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),u.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),u.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),u.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),u.bytes=Number(e.bytesSent),u.packets=Number(e.packetsSent),u.packetsLost=Number(e.packetsLost),u.ssrc=Number(e.ssrc),u.rttMs=Number(e.googRtt||0),t._stats.rtt=u.rttMs,t._stats.audioSend.push(u)}}))}},{key:"_getStats",value:function(){var e=this;return new Vd((function(t,n){e.pc.getStats(t,n)}))}},{key:"statsResponsesToObjects",value:function(e){var t=[];return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t.push(n)})),t}}]),n}(Kk);function Xk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xk(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $k,eO=function(e){h(n,e);var t=f(n);function n(){var e;return p(this,n),e=t.apply(this,arguments),Lf(l(e),"_stats",Fk),Lf(l(e),"report",void 0),Lf(l(e),"lastDecodeVideoReceiverStats",new Map),Lf(l(e),"lastVideoFramesRecv",new Map),Lf(l(e),"lastVideoFramesSent",new Map),Lf(l(e),"lastVideoFramesDecode",new Map),Lf(l(e),"lastVideoJBDelay",new Map),Lf(l(e),"lastAudioJBDelay",new Map),Lf(l(e),"mediaBytesSent",new Map),Lf(l(e),"mediaBytesRetransmit",new Map),Lf(l(e),"mediaBytesTargetEncode",new Map),Lf(l(e),"lastEncoderMs",new Map),e}return v(n,[{key:"updateStats",value:function(){var e=u(c().mark((function e(){var t=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pc.getStats();case 2:this.report=e.sent,this._stats=Dk(Fk),this.report.forEach((function(e){switch(e.type){case ef.OUTBOUND:"audio"===e.mediaType?t.processAudioOutboundStats(e):"video"===e.mediaType&&t.processVideoOutboundStats(e);break;case ef.INBOUND:"audio"===e.mediaType?t.processAudioInboundStats(e):"video"===e.mediaType&&t.processVideoInboundStats(e);break;case ef.TRANSPORT:var n=t.report.get(e.selectedCandidatePairId);n&&t.processCandidatePairStats(n);break;case ef.CANDIDATE_PAIR:e.selected&&t.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSelectedCandidatePair",value:function(){var e=u(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pc.getStats();case 2:return t=e.sent,n={local:Qk({},Vk),remote:Qk({},Vk)},e.abrupt("return",(t.forEach((function(e){var r;if(e.type===ef.TRANSPORT&&(r=t.get(e.selectedCandidatePairId)),e.type===ef.CANDIDATE_PAIR&&e.selected&&(r=e),r){var i=function(e,t){e.type=t.type,e.id=t.id,t.address&&(e.address=t.address),t.candidateType&&(e.candidateType=t.candidateType),t.port&&(e.port=t.port),t.priority&&(e.priority=t.priority),t.protocol&&(e.protocol=t.protocol),t.relayProtocol&&(e.relayProtocol=t.relayProtocol)};if(r.localCandidateId){var o=t.get(r.localCandidateId);o&&i(n.local,o)}if(r.remoteCandidateId){var a=t.get(r.remoteCandidateId);a&&i(n.remote,a)}}})),n));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"processCandidatePairStats",value:function(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((function(t){e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((function(t){e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){var t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){var n=this.report.get(e.remoteCandidateId);n&&this.processCandidateStats(n)}}},{key:"processCandidateStats",value:function(e){var t;e.type===ef.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===ef.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===ef.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(Qk({},t),Qk({},this.stats.selectedCandidatePair.localCandidate)),e.type===ef.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(Qk({},t),Qk({},this.stats.selectedCandidatePair.remoteCandidate)))}},{key:"processAudioInboundStats",value:function(e){var t=this._stats.audioRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=Dk(Wk),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),"number"==typeof e.concealedSamples&&(t.concealedSamples=e.concealedSamples)}},{key:"processVideoInboundStats",value:function(e){var t=this._stats.videoRecv.find((function(t){return t.ssrc===e.ssrc}));t||(t=Dk(Bk),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay;var n=this.lastDecodeVideoReceiverStats.get(t.ssrc),r=this.lastVideoFramesDecode.get(t.ssrc),i=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){var o=t.decodedFrame?t.decodedFrame.width:0,a=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,o,a),this.isFirstVideoDecoded[t.ssrc]=!0}if(n){var s=n.stats,c=i-n.lts;t.framesDecodeFreezeTime=s.framesDecodeFreezeTime,t.framesDecodeInterval=s.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&c>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>s.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=c,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<s.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(n.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-n.qpSum)/(e.framesDecoded-n.stats.framesDecodeCount))}r&&i-r.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-r.count)/((i-r.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:t.decodeFrameRate})):r?t.decodeFrameRate=r.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:0}),e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:Qk({},t),lts:n?n.lts:Date.now(),qpSum:e.qpSum})}},{key:"processVideoOutboundStats",value:function(e){var t=this._stats.videoSend.find((function(t){return t.ssrc===e.ssrc}));t||(t=Dk(Gk),this._stats.videoSend.push(t));var n=this.mediaBytesSent.get(e.ssrc);if(n)n.add(e.bytesSent);else{var r=new Uk(10);r.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,r)}if(void 0!==e.retransmittedBytesSent){var i=this.mediaBytesRetransmit.get(e.ssrc);if(i)i.add(e.retransmittedBytesSent);else{var o=new Uk(10);o.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,o)}}if(e.totalEncodedBytesTarget){var a=this.mediaBytesTargetEncode.get(e.ssrc);if(a)a.add(e.totalEncodedBytesTarget);else{var s=new Uk(10);s.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,s)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,e.totalEncodeTime&&e.framesEncoded){var c=this.lastEncoderMs.get(e.ssrc);if(!c||c.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{var u=e.framesEncoded-c.lastFrameCount,l=e.totalEncodeTime-c.lastEncoderTime;t.avgEncodeMs=1e3*l/u}}if(e.framesEncoded&&e.qpSum){var d=this.lastEncoderMs.get(e.ssrc);!d||d.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-d.lastQpSum)/(e.framesEncoded-d.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{var h=this.findRemoteStatsId(e.ssrc,ef.REMOTE_INBOUND);h&&this.processRemoteInboundStats(h,t)}}},{key:"processAudioOutboundStats",value:function(e){var t=this._stats.audioSend.find((function(t){return t.ssrc===e.ssrc}));if(t||(t=Dk(qk),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{var n=this.findRemoteStatsId(e.ssrc,ef.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}},{key:"findRemoteStatsId",value:function(e,t){var n,r=Array.from(qE(n=this.report).call(n)).find((function(n){return n.type===t&&n.ssrc===e}));return r?r.id:null}},{key:"processVideoMediaSource",value:function(e,t){var n=this.report.get(e);n&&n.width&&n.height&&n.framesPerSecond&&(t.inputFrame={width:n.width,height:n.height,frameRate:n.framesPerSecond})}},{key:"processAudioMediaSource",value:function(e,t){var n=this.report.get(e);n&&(t.inputLevel=n.audioLevel)}},{key:"processVideoTrackSenderStats",value:function(e,t,n){var r,i,o,a=t?this.report.get(t):void 0,s=null!==(r=null==a?void 0:a.framesSent)&&void 0!==r?r:e.framesSent,c=null!==(i=null==a?void 0:a.frameWidth)&&void 0!==i?i:e.frameWidth,u=null!==(o=null==a?void 0:a.frameHeight)&&void 0!==o?o:e.frameHeight;if("number"==typeof s){"number"==typeof c&&"number"==typeof u||(c=0,u=0);var l=0,d=Date.now(),h=this.lastVideoFramesSent.get(n.ssrc);h&&d-h.lts>=800?(l=Math.round((s-h.count)/((d-h.lts)/1e3)),this.lastVideoFramesSent.set(n.ssrc,{count:s,lts:d,rate:l})):h?l=h.rate:this.lastVideoFramesSent.set(n.ssrc,{count:s,lts:d,rate:0}),n.sentFrame={width:c,height:u,frameRate:Math.max(0,l)}}}},{key:"processVideoTrackReceiverStats",value:function(e,t,n){var r,i,o,a,s,c=t?this.report.get(t):void 0,u=null!==(r=null==c?void 0:c.framesReceived)&&void 0!==r?r:e.framesReceived,l=null!==(i=null==c?void 0:c.frameWidth)&&void 0!==i?i:e.frameWidth,d=null!==(o=null==c?void 0:c.frameHeight)&&void 0!==o?o:e.frameHeight,h=null!==(a=null==c?void 0:c.jitterBufferDelay)&&void 0!==a?a:e.jitterBufferDelay,f=null!==(s=null==c?void 0:c.jitterBufferEmittedCount)&&void 0!==s?s:e.jitterBufferEmittedCount;if("number"==typeof u){var p=this.lastVideoFramesRecv.get(n.ssrc),v=Date.now();n.framesReceivedCount=u;var g=0;p&&v-p.lts>=800?(g=Math.round((u-p.count)/((v-p.lts)/1e3)),this.lastVideoFramesRecv.set(n.ssrc,{count:u,lts:v,rate:g})):p?g=p.rate:this.lastVideoFramesRecv.set(n.ssrc,{count:u,lts:v,rate:0}),n.receivedFrame={width:l||0,height:d||0,frameRate:g||0},n.decodedFrame={width:l||0,height:d||0,frameRate:n.decodeFrameRate||0},n.outputFrame={width:l||0,height:d||0,frameRate:n.decodeFrameRate||0}}if(h&&f){var m=this.lastVideoJBDelay.get(n.ssrc);this.lastVideoJBDelay.set(n.ssrc,{jitterBufferDelay:h,jitterBufferEmittedCount:f}),m||(m={jitterBufferDelay:0,jitterBufferEmittedCount:0});var y=1e3*(h-m.jitterBufferDelay)/(f-m.jitterBufferEmittedCount);n.jitterBufferMs=y,n.currentDelayMs=Math.round(y)}}},{key:"processAudioTrackSenderStats",value:function(e,t,n){var r,i,o,a,s=t?this.report.get(t):void 0,c=null!==(r=null!==(i=null==s?void 0:s.echoReturnLoss)&&void 0!==i?i:e.echoReturnLoss)&&void 0!==r?r:0,u=null!==(o=null!==(a=null==s?void 0:s.echoReturnLossEnhancement)&&void 0!==a?a:e.echoReturnLossEnhancement)&&void 0!==o?o:0;n.aecReturnLoss=c,n.aecReturnLossEnhancement=u}},{key:"processAudioTrackReceiverStats",value:function(e,t,n){var r,i,o,a,s,c,u,l=t?this.report.get(t):void 0,d=null!==(r=null==l?void 0:l.removedSamplesForAcceleration)&&void 0!==r?r:e.removedSamplesForAcceleration,h=null!==(i=null==l?void 0:l.totalSamplesReceived)&&void 0!==i?i:e.totalSamplesReceived,f=null!==(o=null==l?void 0:l.jitterBufferDelay)&&void 0!==o?o:e.jitterBufferDelay,p=null!==(a=null==l?void 0:l.jitterBufferEmittedCount)&&void 0!==a?a:e.jitterBufferEmittedCount,v=null!==(s=null==l?void 0:l.audioLevel)&&void 0!==s?s:null==e?void 0:e.audioLevel,g=null!==(c=null==l?void 0:l.totalSamplesDuration)&&void 0!==c?c:null==e?void 0:e.totalSamplesDuration,m=null!==(u=null==l?void 0:l.concealedSamples)&&void 0!==u?u:e.concealedSamples;if(d&&h&&(n.accelerateRate=d/h),f&&p){var y=this.lastAudioJBDelay.get(n.ssrc);this.lastAudioJBDelay.set(n.ssrc,{jitterBufferDelay:f,jitterBufferEmittedCount:p}),y||(y={jitterBufferDelay:0,jitterBufferEmittedCount:0});var b=1e3*(f-y.jitterBufferDelay)/(p-y.jitterBufferEmittedCount);n.jitterBufferMs=Math.round(b)}n.outputLevel=v;var _=1920;g&&h&&(_=h/g/50,n.receivedFrames=Math.round(h/_)),m&&(n.droppedFrames=Math.round(m/_))}},{key:"processRemoteInboundStats",value:function(e,t){var n=this.report.get(e);n&&(t.packetsLost=n.packetsLost,n.roundTripTime&&(t.rttMs=1e3*n.roundTripTime))}},{key:"getCodecFromCodecStats",value:function(e){var t=this.report.get(e);if(!t)return"";var n=t.mimeType.match(/\/(.*)$/);return n&&n[1]?n[1]:""}},{key:"updateSendBitrate",value:function(){var e=0,t=null,n=null;this.mediaBytesSent.forEach((function(t){e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((function(e){t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((function(e){n=null===n?e.diffMean():n+e.diffMean()}));var r=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*r/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==n&&(this._stats.bitrate.targetEncoded=8*n/(this.options.updateInterval/1e3))}}]),n}(Kk),tO=function(e){h(n,e);var t=f(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"updateStats",value:function(){return Vd.resolve()}}]),n}(Kk);function nO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4,o=Lk();return o?o<76?new Jk(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new eO(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):Mk(e)?new eO(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i}):new tO(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:i})}function rO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rO(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oO=(x_(($k=function(e){h(n,e);var t=f(n);function n(e,r){var i;return p(this,n),i=t.call(this,e,r),Lf(l(i),"store",void 0),Lf(l(i),"peerConnection",void 0),Lf(l(i),"remoteSDP",void 0),Lf(l(i),"initialOffer",void 0),Lf(l(i),"statsFilter",void 0),Lf(l(i),"useRTX",!1),Lf(l(i),"localCapabilities",void 0),Lf(l(i),"localCandidateCount",0),Lf(l(i),"allCandidatesReceived",!1),Lf(l(i),"establishPromise",void 0),Lf(l(i),"mutex",new Q_("P2PConnection-mutex")),i.store=r,i.peerConnection=new RTCPeerConnection(n.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),i.statsFilter=nO(i.peerConnection,void 0,void 0,ff()?1200:void 0),i.bindPCEvents(),i.bindStatsEvents(),i.store.p2pId=i.store.p2pId+1,i.establishPromise=i.establish(),i}return v(n,[{key:"peerConnectionState",get:function(){return this.peerConnection.connectionState}},{key:"iceConnectionState",get:function(){return this.peerConnection.iceConnectionState}},{key:"currentLocalDescription",get:function(){return this.peerConnection.currentLocalDescription}},{key:"currentRemoteDescription",get:function(){return this.peerConnection.currentRemoteDescription}},{key:"establish",value:function(){var e=u(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});case 3:if((t=e.sent).sdp){e.next=6;break}throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");case 6:return n=gk(t.sdp),r=vk(t.sdp,!this.useRTX,lg("FILTER_VIDEO_FEC"),lg("FILTER_AUDIO_FEC"),["opus"]),e.abrupt("return",(this.localCapabilities=r,this.initialOffer=t,iO(iO({},n),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:r},offerSDP:t.sdp})));case 10:throw e.prev=10,e.t0=e.catch(0),new Fv(Pv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.t0.toString());case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=u(c().mark((function e(t,n,r,i,o,a){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.initialOffer){e.next=3;break}throw new Error("Cannot establish P2PConnection without initial offer.");case 3:return this.remoteSDP=new jk({remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i.send,remoteSetup:o,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec,cname:a}),s=this.remoteSDP.toString(),e.next=7,this.peerConnection.setLocalDescription(this.initialOffer);case 7:return e.next=9,this.peerConnection.setRemoteDescription({type:"answer",sdp:s});case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.t0.toString()));case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()},{key:"send",value:function(e,t){var n=this;return sk(c().mark((function r(){var i,o,a,s,u,l,d,h;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ck(n.mutex.lock());case 2:if(i=r.sent,r.prev=3,n.remoteSDP){r.next=6;break}throw new Error("Cannot call P2PConnection.send before remote SDP created");case 6:return o=e.map((function(e){return n.peerConnection.addTrack(e._mediaStreamTrack)})),r.next=9,ck(n.peerConnection.createOffer());case 9:return a=r.sent,s=hk.exports.parse(a.sdp),u=e.map((function(e){var t=e._mediaStreamTrack,r=s.mediaDescriptions.find((function(e){return e.attributes.mid===t.kind}));if(!r)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t,n){var r=e.attributes.ssrcs.filter((function(e){return e.attributes.label===t})),i=e.attributes.ssrcGroups;if(0===r.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(i&&r.length>1){var o=i.find((function(e){return-1!==e.ssrcIds.indexOf(r[0].ssrcId)}));return o?[{ssrcId:o.ssrcIds[0],rtx:n?o.ssrcIds[1]:void 0}]:[{ssrcId:r[0].ssrcId}]}return[{ssrcId:r[0].ssrcId}]}(r,t.id,n.useRTX)})),r.prev=12,r.next=15,u;case 15:l=r.sent,r.next=21;break;case 18:throw r.prev=18,r.t0=r.catch(12),o.forEach((function(e){hf()&&e.replaceTrack(null),n.peerConnection.removeTrack(e)})),r.t0;case 21:return d=n.mungSendOfferSDP(a.sdp,e),n.remoteSDP.receive(e,t,l),h=n.remoteSDP.toString(),r.next=26,ck(n.peerConnection.setLocalDescription({type:"offer",sdp:d}));case 26:return r.next=28,ck(n.applySendEncodings(o,e));case 28:return r.next=30,ck(n.peerConnection.setRemoteDescription({type:"answer",sdp:h}));case 30:return r.abrupt("return",e.map((function(e,t){var n=e._mediaStreamTrack.id;return{localSSRC:u[t],id:n}})));case 33:throw r.prev=33,r.t1=r.catch(3),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(r.t1.toString()));case 36:return r.prev=36,i(),r.finish(36);case 39:case"end":return r.stop()}}),r,null,[[3,33,36,39],[12,18]])})))()}},{key:"stopSending",value:function(){var e=u(c().mark((function e(t){var n,r,i,o=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");case 3:if(n=this.peerConnection.getSenders().filter((function(e){var n;return-1!==t.indexOf((null===(n=e.track)||void 0===n?void 0:n.id)||"")})),n.length===t.length){e.next=6;break}throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");case 6:return n.map((function(e){hf()&&e.replaceTrack(null),o.peerConnection.removeTrack(e)})),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,e.next=12,this.peerConnection.setLocalDescription(r);case 12:return this.remoteSDP.stopReceiving(t),i=this.remoteSDP.toString(),e.next=16,this.peerConnection.setRemoteDescription({type:"answer",sdp:i});case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.t0.toString()));case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"receive",value:function(){var e=u(c().mark((function e(t,n,r,i){var o,a,s,u,l,d,h=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));case 3:return o=this.remoteSDP.send(t,n,i),a=o.id,s=o.mslabel,u=new Vd((function(e,n){var r=setTimeout((function(){n(new Error("Cannot receive track, id: ".concat(a)))}),1e4),i=function n(i){var o=of();if(("Safari"===o.name&&11===Number(o.version)||pf())&&i.track.id!==a&&i.streams[0].id===s){var c,u=i.streams[0].getTracks()[0];return null===(c=h.remoteSDP)||void 0===c||c.updateTrackLabel(t,a,i.track.id),h.peerConnection.removeEventListener("track",n),clearTimeout(r),void e(u)}if(i.track.id===a)return h.peerConnection.removeEventListener("track",n),clearTimeout(r),void e(i.track)};h.peerConnection.addEventListener("track",i)})),l=this.remoteSDP.toString(),e.next=6,this.peerConnection.setRemoteDescription({type:"offer",sdp:l});case 6:return e.next=8,this.peerConnection.createAnswer();case 8:return d=e.sent,e.next=11,this.peerConnection.setLocalDescription(d);case 11:return e.next=13,u;case 13:return e.t0=e.sent,e.t1=a,e.abrupt("return",{track:e.t0,id:e.t1});case 18:throw e.prev=18,e.t2=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.t2.toString()));case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"stopReceiving",value:function(){var e=u(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");case 3:return this.remoteSDP.stopSending(t),n=this.remoteSDP.toString(),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return r=e.sent,e.next=12,this.peerConnection.setLocalDescription(r);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.t0.toString()));case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteRemote",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteRemote",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteLocal",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");case 3:if(n=this.peerConnection.getSenders().filter((function(e){var n;return-1!==t.indexOf((null===(n=e.track)||void 0===n?void 0:n.id)||"")})),n.length===t.length){e.next=6;break}throw new Error("sender' length doesn't match mids' length.");case 6:n.map((function(e){if(hf()&&e.track)e.track.enabled=!1;else{var t=e.getParameters();t.encodings.forEach((function(e){return e.active=!1})),e.setParameters(t)}})),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.t0.toString()));case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteLocal",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");case 3:if(n=this.peerConnection.getSenders().filter((function(e){var n;return-1!==t.indexOf((null===(n=e.track)||void 0===n?void 0:n.id)||"")})),n.length===t.length){e.next=6;break}throw new Error("Senders' length doesn't match mids' length.");case 6:return n.map(function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!hf()||!t.track){e.next=4;break}t.track.enabled=!0,e.next=8;break;case 4:return(n=t.getParameters()).encodings.forEach((function(e){return e.active=!0})),e.next=8,t.setParameters(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,e.next=12,this.peerConnection.setLocalDescription(r);case 12:return i=this.remoteSDP.toString(),e.next=15,this.peerConnection.setRemoteDescription({type:"answer",sdp:i});case 15:e.next=20;break;case 17:throw e.prev=17,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.t0.toString()));case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"restartICE",value:function(e){var t=this;return sk(c().mark((function n(){var r,i,o,a,s,u,l,d;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ck(t.mutex.lock("From P2PConnection.restartICE"));case 2:if(r=n.sent,n.prev=3,t.remoteSDP){n.next=6;break}throw new Error("Cannot restartICE before remoteSDP created.");case 6:if(!hb().supportPCSetConfiguration){n.next=11;break}i=t.peerConnection.getConfiguration(),o=e===Ky.RELAY?"relay":"all",i.iceTransportPolicy!==o&&(Zv.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(i.iceTransportPolicy,"] to [").concat(o,"]")),i.iceTransportPolicy=o,t.peerConnection.setConfiguration(i)),n.next=13;break;case 11:if(e!==Ky.RELAY){n.next=13;break}return n.abrupt("return");case 13:return e!==Ky.RELAY&&t.remoteSDP.updateCandidates(e),n.next=16,ck(t.peerConnection.createOffer({iceRestart:!0}));case 16:if((a=n.sent).sdp){n.next=19;break}throw new Error("Cannot restartICE because restart offer SDP does not exist.");case 19:return s=gk(a.sdp),n.next=22,s.iceParameters;case 22:return u=n.sent,l=u.remoteIceParameters,t.remoteSDP.restartICE(l),d=t.remoteSDP.toString(),n.next=28,ck(t.peerConnection.setLocalDescription(a));case 28:return n.next=30,ck(t.peerConnection.setRemoteDescription({type:"answer",sdp:d}));case 30:n.next=35;break;case 32:n.prev=32,n.t0=n.catch(3),Zv.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),n.t0);case 35:return n.prev=35,r(),n.finish(35);case 38:case"end":return n.stop()}}),n,null,[[3,32,35,38]])})))()}},{key:"close",value:function(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}},{key:"getStats",value:function(){return this.statsFilter.getStats()}},{key:"getRemoteVideoIsReady",value:function(e){return this.statsFilter.getVideoIsReady(e)}},{key:"updateEncoderConfig",value:function(){var e=u(c().mark((function e(t,n){var r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");case 3:return e.next=5,this.peerConnection.createOffer();case 5:return r=e.sent,i=this.mungSendOfferSDP(r.sdp,[n]),this.remoteSDP.updateRecvMedia(n._mediaStreamTrack.kind,n),o=this.remoteSDP.toString(),e.next=11,this.peerConnection.setLocalDescription({type:"offer",sdp:i});case 11:return e.next=13,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,e.t0.toString());case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateSendParameters",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getSenders().filter((function(e){var n;return(null===(n=e.track)||void 0===n?void 0:n.id)===t})),e.t0=1===r.length,!e.t0){e.next=5;break}return e.next=5,this.applySendEncodings(r,[n]);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setStatsRemoteVideoIsReady",value:function(e,t){this.statsFilter.setVideoIsReady2(e,t)}},{key:"replaceTrack",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getSenders().find((function(e){var t;return(null===(t=e.track)||void 0===t?void 0:t.id)===n})),e.t0=r,!e.t0){e.next=5;break}return e.next=5,r.replaceTrack(t._mediaStreamTrack);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"bindPCEvents",value:function(){var e=this;this.peerConnection.oniceconnectionstatechange=function(){var t;null===(t=e.onICEConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=function(){var t;null===(t=e.onConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.connectionState)},this.peerConnection.onicecandidate=function(t){t.candidate?e.localCandidateCount+=1:(e.peerConnection.onicecandidate=null,e.allCandidatesReceived=!0,Zv.debug("[".concat(e.store.clientId,"] [pc-").concat(e.store.p2pId,"] local candidate count"),e.localCandidateCount))},setTimeout((function(){e.allCandidatesReceived||(e.allCandidatesReceived=!0,Zv.debug("[".concat(e.store.clientId,"] [pc-").concat(e.store.p2pId,"] onicecandidate timeout, local candidate count"),e.localCandidateCount))}),lg("CANDIDATE_TIMEOUT"))}},{key:"unbindPCEvents",value:function(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}},{key:"applySendEncodings",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u,l,d,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,hb().supportSetRtpSenderParameters){e.next=3;break}return e.abrupt("return");case 3:if(t.length===n.length){e.next=5;break}return e.abrupt("return");case 5:r=0;case 6:if(!(r<t.length)){e.next=29;break}if(o=t[r],a=n[r]){e.next=10;break}return e.abrupt("continue",26);case 10:if(s={},u={},!(a instanceof $T)){e.next=20;break}e.t0=a._optimizationMode,e.next="motion"===e.t0?15:"detail"===e.t0?17:19;break;case 15:return s.degradationPreference="maintain-framerate",e.abrupt("break",20);case 17:return s.degradationPreference="maintain-resolution",e.abrupt("break",20);case 19:s.degradationPreference="balanced";case 20:return lg("DSCP_TYPE")&&If()&&(l=lg("DSCP_TYPE"),["very-low","low","medium","high"].includes(l)&&(u.networkPriority=l)),d=o.getParameters(),(h=null===(i=d.encodings)||void 0===i?void 0:i[0])&&Object.assign(h,u),Object.assign(d,s),e.next=26,o.setParameters(d);case 26:r++,e.next=6;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(0),Zv.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."));case 34:case"end":return e.stop()}}),e,this,[[0,31]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"mungSendOfferSDP",value:function(e,t){var n=hk.exports.parse(e);return t.forEach((function(e,t){var r=e._mediaStreamTrack,i=n.mediaDescriptions.find((function(e){return e.attributes.mid===r.kind}));i&&_k(i,e)})),hk.exports.print(n)}},{key:"bindStatsEvents",value:function(){var e=this;this.statsFilter.onFirstAudioReceived=function(t){var n;null===(n=e.onFirstAudioReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoReceived=function(t){var n;null===(n=e.onFirstVideoReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstAudioDecoded=function(t){var n;null===(n=e.onFirstAudioDecoded)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoDecoded=function(t,n,r){var i;null===(i=e.onFirstVideoDecoded)||void 0===i||i.call(e,t,n,r)},this.statsFilter.onSelectedLocalCandidateChanged=function(t,n){var r;null===(r=e.onSelectedLocalCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onSelectedRemoteCandidateChanged=function(t,n){var r;null===(r=e.onSelectedRemoteCandidateChanged)||void 0===r||r.call(e,t,n)}}},{key:"unbindStatsEvents",value:function(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}},{key:"batchReceive",value:function(){var e=u(c().mark((function e(t){var n,r,i,o=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");case 3:return n=this.remoteSDP.batchSend(t).map((function(e,n){var r=e.id,i=e.mslabel,a=t[n].kind;return new Vd((function(e,t){var n=setTimeout((function(){t(new Error("Cannot receive track, id: ".concat(r)))}),1e4),s=function t(s){var c=of();if("Safari"===c.name&&11===Number(c.version)&&s.track.id!==r&&s.streams[0].id===i){var u,l=s.streams[0].getTracks()[0];return null===(u=o.remoteSDP)||void 0===u||u.updateTrackLabel(a,r,s.track.id),o.peerConnection.removeEventListener("track",t),clearTimeout(n),void e({track:l,id:r})}if(s.track.id===r)return o.peerConnection.removeEventListener("track",t),clearTimeout(n),void e({track:s.track,id:r})};o.peerConnection.addEventListener("track",s)}))})),r=this.remoteSDP.toString(),e.next=6,this.peerConnection.setRemoteDescription({type:"offer",sdp:r});case 6:return e.next=8,this.peerConnection.createAnswer();case 8:return i=e.sent,e.next=11,this.peerConnection.setLocalDescription(i);case 11:return e.next=13,Vd.all(n);case 13:return e.abrupt("return",e.sent);case 16:throw e.prev=16,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.t0.toString()));case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRemoteSSRC",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.remoteSDP){e.next=2;break}return e.abrupt("return");case 2:return n=this.remoteSDP.getSSRC(t),e.abrupt("return",null==n?void 0:n[0].ssrcId);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setConfiguration",value:function(e){if(hb().supportPCSetConfiguration){var t=n.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}],[{key:"resolvePCConfiguration",value:function(e){var t,r,i={iceServers:[],sdpSemantics:"plan-b"};return e.iceServers?i.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(ry(e.turnServer.servers)?i.iceServers=e.turnServer.servers:(i.iceServers&&(t=i.iceServers).push.apply(t,g(n.turnServerConfigToIceServers(e.turnServer.servers))),lg("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&e.turnServer.serversFromGateway&&(r=i.iceServers).push.apply(r,g(n.turnServerConfigToIceServers(e.turnServer.serversFromGateway))),e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((function(e){e.forceturn&&(i.iceTransportPolicy="relay")})))),i}},{key:"turnServerConfigToIceServers",value:function(e){var t=[];return e.forEach((function(e){e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}}]),n}(ub)).prototype,"connect",[aO],Object.getOwnPropertyDescriptor($k.prototype,"connect"),$k.prototype),x_($k.prototype,"stopSending",[aO],Object.getOwnPropertyDescriptor($k.prototype,"stopSending"),$k.prototype),x_($k.prototype,"receive",[aO],Object.getOwnPropertyDescriptor($k.prototype,"receive"),$k.prototype),x_($k.prototype,"stopReceiving",[aO],Object.getOwnPropertyDescriptor($k.prototype,"stopReceiving"),$k.prototype),x_($k.prototype,"muteRemote",[aO],Object.getOwnPropertyDescriptor($k.prototype,"muteRemote"),$k.prototype),x_($k.prototype,"unmuteRemote",[aO],Object.getOwnPropertyDescriptor($k.prototype,"unmuteRemote"),$k.prototype),x_($k.prototype,"muteLocal",[aO],Object.getOwnPropertyDescriptor($k.prototype,"muteLocal"),$k.prototype),x_($k.prototype,"unmuteLocal",[aO],Object.getOwnPropertyDescriptor($k.prototype,"unmuteLocal"),$k.prototype),x_($k.prototype,"close",[aO],Object.getOwnPropertyDescriptor($k.prototype,"close"),$k.prototype),x_($k.prototype,"updateEncoderConfig",[aO],Object.getOwnPropertyDescriptor($k.prototype,"updateEncoderConfig"),$k.prototype),x_($k.prototype,"updateSendParameters",[aO],Object.getOwnPropertyDescriptor($k.prototype,"updateSendParameters"),$k.prototype),x_($k.prototype,"replaceTrack",[aO],Object.getOwnPropertyDescriptor($k.prototype,"replaceTrack"),$k.prototype),x_($k.prototype,"getRemoteSSRC",[aO],Object.getOwnPropertyDescriptor($k.prototype,"getRemoteSSRC"),$k.prototype),$k);function aO(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=u(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("Locking from P2PConnection.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}function sO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sO(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var uO,lO="9",dO=4e4,hO=function(){function e(t){p(this,e),Lf(this,"sessionDesc",void 0),Lf(this,"_localCapabilities",void 0),Lf(this,"_rtpCapabilities",void 0),Lf(this,"_candidates",void 0),Lf(this,"_iceParameters",void 0),Lf(this,"_dtlsParameters",void 0),Lf(this,"setup",void 0),Lf(this,"currentMidIndex",void 0),Lf(this,"cname",void 0),Lf(this,"firefoxSsrcMidMap",new Map);var n=t=Nw(t),r=n.remoteIceParameters,i=n.remoteDtlsParameters,o=n.candidates,a=n.remoteRTPCapabilities,c=n.remoteSetup,u=n.localCapabilities,l=n.cname,d=hk.exports.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=a,this._candidates=o,this._iceParameters=r,this._dtlsParameters=i,this._localCapabilities=u,this.setup=c,this.cname=l;var h,f=this.rtpCapabilities.send,v=s(d.mediaDescriptions);try{for(v.s();!(h=v.n()).done;){var g=h.value;if(g.attributes.iceUfrag=r.iceUfrag,g.attributes.icePwd=r.icePwd,g.attributes.fingerprints=i.fingerprints,g.attributes.candidates=o,g.attributes.setup=c,"video"===g.media.mediaType&&(g.media.fmts=f.videoCodecs.map((function(e){return e.payloadType.toString(10)})),g.attributes.payloads=f.videoCodecs,g.attributes.extmaps=f.videoExtensions,lg("PRELOAD_MEDIA_COUNT")>0)){var m=bk([{ssrcId:dO,rtx:lg("USE_SUB_RTX")?40001:void 0}],this.cname),y=m.ssrcs,b=m.ssrcGroups;g.attributes.ssrcs=y,g.attributes.ssrcGroups=b}if("audio"===g.media.mediaType&&(g.media.fmts=f.audioCodecs.map((function(e){return e.payloadType.toString(10)})),g.attributes.payloads=f.audioCodecs,g.attributes.extmaps=f.audioExtensions,Ck(g),lg("PRELOAD_MEDIA_COUNT")>0)){var _=bk([{ssrcId:2e4}],this.cname),E=_.ssrcs,S=_.ssrcGroups;g.attributes.ssrcs=E,g.attributes.ssrcGroups=S}}}catch(w){v.e(w)}finally{v.f()}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}return v(e,[{key:"localCapabilities",get:function(){return Nw(this._localCapabilities)}},{key:"rtpCapabilities",get:function(){return Nw(this._rtpCapabilities)}},{key:"candidates",get:function(){return Nw(this._candidates)}},{key:"iceParameters",get:function(){return Nw(this._iceParameters)}},{key:"dtlsParameters",get:function(){return Nw(this._dtlsParameters)}},{key:"preloadRemoteMedia",value:function(){var e=lg("PRELOAD_MEDIA_COUNT");this.rtpCapabilities;for(var t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send,o=1;o<e;o++){var a=2*o+dO,s=bk([{ssrcId:2*o+2e4}],this.cname),c=s.ssrcs,u=s.ssrcGroups,l=bk([{ssrcId:a,rtx:lg("USE_SUB_RTX")?a+1:void 0}],this.cname),d=l.ssrcs,h=l.ssrcGroups;this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:lO,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:d,ssrcGroups:h,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:lO,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:c,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o+1)}}),this.currentMidIndex+=2}this.updateBundleMids()}},{key:"toString",value:function(){return hk.exports.print(this.sessionDesc)}},{key:"send",value:function(e,t,n,r){var i=bk(t,this.cname,lg("SYNC_GROUP")?n:void 0),o=i.ssrcs,a=i.ssrcGroups,s=this.findPreloadMediaDesc(o);if(s){if(ff()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,s.attributes.mid),r&&(r.twcc||r.remb)){var c=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[c]=this.mungSendMediaDesc(s,r),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}var u,l=this.findAvailableMediaIndex(e,o);return-1===l||1===l&&(hf()||yf())||0===l&&lg("USE_SUB_RTX")||bf()?(u=this.createOrRecycleSendMedia(e,o,a,"sendonly",r),this.updateBundleMids()):((u=Nw(this.sessionDesc.mediaDescriptions[l])).attributes.direction="sendonly",u.attributes.ssrcs=o,u.attributes.ssrcGroups=a,this.sessionDesc.mediaDescriptions[l]=this.mungSendMediaDesc(u,r)),ff()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,u.attributes.mid),{mid:u.attributes.mid,needExchangeSDP:!0}}},{key:"batchSend",value:function(e){var t=this,n=e.map((function(e){var n=e.kind,r=e.ssrcMsg,i=e.mslabel;return t.send(n,r,i)})),r=[],i=!1;return n.forEach((function(e){var t=e.mid;e.needExchangeSDP&&(i=!0),r.push(t)})),{mids:r,needExchangeSDP:i}}},{key:"stopSending",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((function(e){"0"===e.attributes.mid||ff()||bf()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}},{key:"mute",value:function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}},{key:"unmute",value:function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}},{key:"muteRemote",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return e.includes(t.attributes.mid||"")}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((function(e){e.attributes.direction="inactive"}))}},{key:"unmuteRemote",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return e.includes(t.attributes.mid||"")}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((function(e){e.attributes.direction="recvonly"}))}},{key:"receive",value:function(e,t,n,r){var i=this;e.forEach((function(e,o){i.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[o])})),this.updateBundleMids()}},{key:"stopReceiving",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return-1!==e.indexOf(t.attributes.mid)}));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((function(e){e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}},{key:"updateCandidates",value:function(e){var t=this;e===Ky.TCP?this._candidates.forEach((function(e){-1===t._candidates.findIndex((function(t){return"tcp"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port}))&&t._candidates.push(cO(cO({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})):this._candidates=this._candidates.filter((function(e){return"tcp"!==e.transport}));var n,r=s(this.sessionDesc.mediaDescriptions);try{for(r.s();!(n=r.n()).done;)n.value.attributes.candidates=this.candidates}catch(i){r.e(i)}finally{r.f()}}},{key:"restartICE",value:function(e){e=Nw(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((function(t){t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}},{key:"predictReceivingMids",value:function(e){for(var t=[],n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}},{key:"findAvailableMediaIndex",value:function(e,t){var n=this;return this.sessionDesc.mediaDescriptions.findIndex((function(r){var i=r.media.mediaType===e&&"0"!==r.media.port&&("sendonly"===r.attributes.direction||"sendrecv"===r.attributes.direction)&&0===r.attributes.ssrcs.length;if(ff()){if(i){var o=n.firefoxSsrcMidMap.get(t[0].ssrcId);return!(o||"0"!==r.attributes.mid&&"1"!==r.attributes.mid)||!(!o||o!==r.attributes.mid)}return!1}return i}))}},{key:"createOrRecycleRecvMedia",value:function(e,t,n,r,i,o){var a=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,c=this.localCapabilities.send,u=[];if(a===zy.VIDEO){var l,d;if(lg("H264_PROFILE_LEVEL_ID")&&"h264"===r&&(u=s.videoCodecs.filter((function(e){var t,n;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(r)&&(null==e||null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])===lg("H264_PROFILE_LEVEL_ID")}))),!u||0===(null===(l=u)||void 0===l?void 0:l.length)){var h=c.videoCodecs.filter((function(e){var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(r)}));0!==h.length&&(u=s.videoCodecs.filter((function(e){return h.some((function(t){return t.payloadType===e.payloadType}))})))}if(lg("USE_PUB_RTX")){var f=u.map((function(e){return e.payloadType.toString()})),p=s.videoCodecs.filter((function(e){var t,n;return"rtx"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)&&f.includes((null===(n=e.fmtp)||void 0===n?void 0:n.parameters.apt)||"")}));u=[].concat(g(u),g(p))}0===u.length&&(Zv.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(null===(d=s.videoCodecs[0].rtpMap)||void 0===d?void 0:d.encodingName)),u=s.videoCodecs)}else u=s.audioCodecs.filter((function(e){var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(i)})),0===u.length&&(Zv.warning("codec ".concat(i," not included in rtpCapabilities, fallback to opus")),u=s.audioCodecs.filter((function(e){var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes("opus")})));var v=a===zy.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;var m="".concat(this.currentMidIndex),y={media:{mediaType:a,port:lO,protos:["UDP","TLS","RTP","SAVPF"],fmts:u.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:v,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:u,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(m)}};y=this.mungRecvMediaDsec(y,e,o);var b=this.findFirstClosedMedia(a);if(b){var _=this.sessionDesc.mediaDescriptions.indexOf(b);this.sessionDesc.mediaDescriptions[_]=y}else this.sessionDesc.mediaDescriptions.push(y);return y}},{key:"createOrRecycleSendMedia",value:function(e,t,n,r,i){var o=this.rtpCapabilities.send,a=e===zy.VIDEO?o.videoCodecs:o.audioCodecs,s=e===zy.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;var c="".concat(this.currentMidIndex),u={media:{mediaType:e,port:lO,protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:s,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};u=this.mungSendMediaDesc(u,i);var l=this.findFirstClosedMedia(e);if(l){var d=this.sessionDesc.mediaDescriptions.indexOf(l);this.sessionDesc.mediaDescriptions[d]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}},{key:"updateBundleMids",value:function(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((function(e){return"0"!==e.media.port})).map((function(e){return e.attributes.mid}))}},{key:"mungRecvMediaDsec",value:function(e,t,n){var r=Nw(e);return Ek(r),_k(r,t),Sk(r,t),wk(r),xk(r,n,this.localCapabilities.send),r}},{key:"mungSendMediaDesc",value:function(e,t){var n=Nw(e);return xk(n,t,this.localCapabilities.recv),Ck(n),n}},{key:"updateRecvMedia",value:function(e,t){var n=this.sessionDesc.mediaDescriptions.findIndex((function(t){return t.attributes.mid===e}));if(-1!==n){var r=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=r}}},{key:"bumpMid",value:function(e){this.currentMidIndex+=e}},{key:"findFirstClosedMedia",value:function(e){return this.sessionDesc.mediaDescriptions.find((function(t){return ff()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port}))}},{key:"findPreloadMediaDesc",value:function(e){return this.sessionDesc.mediaDescriptions.find((function(t){var n,r;return(null===(n=t.attributes)||void 0===n||null===(r=n.ssrcs[0])||void 0===r?void 0:r.ssrcId)===e[0].ssrcId}))}},{key:"getSSRC",value:function(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e})))||void 0===t?void 0:t.attributes.ssrcs}}]),e}();function fO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fO(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vO,gO,mO,yO,bO,_O,EO,SO,wO,xO,TO,IO,RO=(x_((uO=function(e){h(n,e);var t=f(n);function n(e,r){var i;return p(this,n),i=t.call(this,e,r),Lf(l(i),"store",void 0),Lf(l(i),"peerConnection",void 0),Lf(l(i),"remoteSDP",void 0),Lf(l(i),"initialOffer",void 0),Lf(l(i),"transportEventReceiver",void 0),Lf(l(i),"statsFilter",void 0),Lf(l(i),"localCapabilities",void 0),Lf(l(i),"localCandidateCount",0),Lf(l(i),"allCandidatesReceived",!1),Lf(l(i),"selectedCandidatePairTimer",void 0),Lf(l(i),"establishPromise",void 0),Lf(l(i),"mutex",new Q_("P2PConnection-mutex")),i.store=r,i.peerConnection=new RTCPeerConnection(n.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),i.statsFilter=nO(i.peerConnection,void 0,void 0,ff()?1200:void 0),i.bindPCEvents(),i.bindStatsEvents(),i.store.p2pId=i.store.p2pId+1,i.establishPromise=i.establish(),i}return v(n,[{key:"currentLocalDescription",get:function(){return this.peerConnection.currentLocalDescription}},{key:"currentRemoteDescription",get:function(){return this.peerConnection.currentRemoteDescription}},{key:"peerConnectionState",get:function(){return this.peerConnection.connectionState}},{key:"iceConnectionState",get:function(){return this.peerConnection.iceConnectionState}},{key:"dtlsTransportState",get:function(){var e,t,n;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(n=t.transport)||void 0===n?void 0:n.state)&&void 0!==e?e:null}},{key:"establish",value:function(){var e=u(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"}),e.next=4,this.peerConnection.createOffer();case 4:if((t=e.sent).sdp){e.next=7;break}throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");case 7:return n=gk(t.sdp),e.next=10,Ik(!lg("USE_PUB_RTX")&&!lg("USE_SUB_RTX"),lg("FILTER_VIDEO_FEC"),lg("FILTER_AUDIO_FEC"));case 10:return r=e.sent,e.abrupt("return",(this.localCapabilities=Ok(r),this.initialOffer=t,pO(pO({},n),{},{rtpCapabilities:r,offerSDP:t.sdp})));case 14:throw e.prev=14,e.t0=e.catch(0),new Fv(Pv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.t0.toString());case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=u(c().mark((function e(t,n,r,i,o,a){var s,u,l,d,h,f,p,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.initialOffer){e.next=3;break}throw new Error("Cannot establish P2PConnection without initial offer.");case 3:return this.remoteSDP=new hO({remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:o,localCapabilities:this.localCapabilities,cname:a}),s=this.remoteSDP.toString(),u=hk.exports.parse(this.initialOffer.sdp),(l=u.mediaDescriptions.find((function(e){return"audio"===e.media.mediaType})))&&Ck(l),d=hk.exports.print(u),h=this.logSDPExchange(d||"","offer","local","connect"),this.store.descriptionStart(),e.next=10,this.peerConnection.setLocalDescription({type:"offer",sdp:d});case 10:return null==h||h(s),e.next=13,this.peerConnection.setRemoteDescription({type:"answer",sdp:s});case 13:if(null!=(f=this.peerConnection.getTransceivers()[0])&&f.receiver&&this.tryBindTransportEvents(f.receiver),!(lg("PRELOAD_MEDIA_COUNT")>0)){e.next=24;break}return this.remoteSDP.preloadRemoteMedia(),p=this.remoteSDP.toString(),e.next=19,this.peerConnection.setRemoteDescription({type:"offer",sdp:p});case 19:return e.next=21,this.peerConnection.createAnswer();case 21:return v=e.sent,e.next=24,this.peerConnection.setLocalDescription(v);case 24:e.next=29;break;case 26:throw e.prev=26,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(e.t0.toString()));case 29:case"end":return e.stop()}}),e,this,[[0,26]])})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()},{key:"send",value:function(e,t,n){var r=this;return sk(c().mark((function i(){var o,a,s,u,l,d,h,f,p,v,g;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,ck(r.mutex.lock("From P2PConnection.send"));case 2:if(o=i.sent,i.prev=3,r.remoteSDP){i.next=6;break}throw new Error("Cannot call P2PConnection.send before remote SDP created");case 6:if(a=[],e.forEach((function(e){var t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});a.push(t),e._updateRtpTransceiver(t)})),i.t0=ff()&&!0===lg("SIMULCAST"),!i.t0){i.next=12;break}return i.next=12,ck(r.applySimulcastForFirefox(a,e));case 12:return i.next=14,ck(r.peerConnection.createOffer());case 14:return s=i.sent,u=r.remoteSDP.predictReceivingMids(e.length),l=r.mungSendOfferSDP(s.sdp,e,u),d=hk.exports.parse(l),h=u.map((function(e){var t=d.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return mk(t,lg("USE_PUB_RTX"))})),i.prev=19,i.next=22,h;case 22:f=i.sent,i.next=36;break;case 25:return i.prev=25,i.t1=i.catch(19),f=[],r.remoteSDP.receive(e,t,n,f),p=r.remoteSDP.toString(),i.next=31,ck(r.peerConnection.setLocalDescription({type:"offer",sdp:l}));case 31:return i.next=33,ck(r.peerConnection.setRemoteDescription({type:"answer",sdp:p}));case 33:return i.next=35,ck(r.stopSending(u,!0));case 35:throw i.t1;case 36:return r.remoteSDP.receive(e,t,n,f),v=r.remoteSDP.toString(),g=r.logSDPExchange(l,"offer","local","send"),i.next=40,ck(r.peerConnection.setLocalDescription({type:"offer",sdp:l}));case 40:return i.next=42,ck(r.applySimulcastEncodings(a,e));case 42:return i.next=44,ck(r.applySendEncodings(a,e));case 44:return null==g||g(v),i.next=47,ck(r.peerConnection.setRemoteDescription({type:"answer",sdp:v}));case 47:return i.abrupt("return",a.map((function(e,t){var n=u[t];return{localSSRC:h[t],id:n,transceiver:e}})));case 50:throw i.prev=50,i.t2=i.catch(3),i.t2 instanceof Fv?i.t2:new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(i.t2.toString()));case 53:return i.prev=53,o(),i.finish(53);case 56:case"end":return i.stop()}}),i,null,[[3,50,53,56],[19,25]])})))()}},{key:"stopSending",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}e.t0=void 0,e.next=7;break;case 4:return e.next=6,this.mutex.lock("From P2PConnection.stopSending");case 6:e.t0=e.sent;case 7:if(r=e.t0,e.prev=8,this.remoteSDP){e.next=11;break}throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");case 11:if(i=this.peerConnection.getTransceivers().filter((function(e){return-1!==t.indexOf(e.mid)})),i.length===t.length){e.next=14;break}throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");case 14:return i.map((function(e){var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)})),e.next=17,this.peerConnection.createOffer();case 17:return o=e.sent,a=this.logSDPExchange(o.sdp||"","offer","local","stopSending"),e.next=21,this.peerConnection.setLocalDescription(o);case 21:return this.remoteSDP.stopReceiving(t),s=this.remoteSDP.toString(),null==a||a(s),e.next=26,this.peerConnection.setRemoteDescription({type:"answer",sdp:s});case 26:e.next=31;break;case 28:throw e.prev=28,e.t1=e.catch(8),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(e.t1.toString()));case 31:return e.prev=31,r&&r(),e.finish(31);case 34:case"end":return e.stop()}}),e,this,[[8,28,31,34]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"receive",value:function(){var e=u(c().mark((function e(t,n,r,i){var o,a,s,u,l,d,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.receive ".concat(t," before remoteSDP created."));case 3:if(o=this.remoteSDP.send(t,n,r,i),a=o.mid,!o.needExchangeSDP){e.next=18;break}return s=this.remoteSDP.toString(),u=this.logSDPExchange(s,"offer","remote","receive"),e.next=8,this.peerConnection.setRemoteDescription({type:"offer",sdp:s});case 8:return e.next=10,this.peerConnection.createAnswer();case 10:return l=e.sent,d=this.mungReceiveAnswerSDP(l.sdp,a,t),null==u||u(d||""),e.next=15,this.peerConnection.setLocalDescription({type:"answer",sdp:d});case 15:Zv.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," by exchanging SDP.")),e.next=19;break;case 18:Zv.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(t," no need to exchange SDP."));case 19:if(h=this.peerConnection.getTransceivers().find((function(e){return e.mid===a}))){e.next=22;break}throw new Error("Cannot get transceiver after setLocalDescription.");case 22:return e.abrupt("return",{track:h.receiver.track,id:a,transceiver:h});case 25:throw e.prev=25,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.t0.toString()));case 28:case"end":return e.stop()}}),e,this,[[0,25]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"batchReceive",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");case 3:if(n=this.remoteSDP.batchSend(t),r=n.mids,!n.needExchangeSDP){e.next=17;break}return i=this.remoteSDP.toString(),o=this.logSDPExchange(i,"offer","remote","receive"),e.next=8,this.peerConnection.setRemoteDescription({type:"offer",sdp:i});case 8:return e.next=10,this.peerConnection.createAnswer();case 10:return a=e.sent,null==o||o(a.sdp||""),e.next=14,this.peerConnection.setLocalDescription(a);case 14:Zv.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP.")),e.next=18;break;case 17:Zv.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive no need to exchange SDP."));case 18:return e.abrupt("return",r.map((function(e){var t=s.peerConnection.getTransceivers().find((function(t){return t.mid===e}));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e,transceiver:t}})));case 21:throw e.prev=21,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(e.t0.toString()));case 24:case"end":return e.stop()}}),e,this,[[0,21]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stopReceiving",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");case 3:return this.remoteSDP.stopSending(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","stopReceiving"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteRemote",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(t," before remote SDP created."));case 3:return this.remoteSDP.mute(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","muteRemote"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteRemote",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(t," before remote SDP created."));case 3:return this.remoteSDP.unmute(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","unmuteRemote"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteLocal",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");case 3:if((n=this.peerConnection.getTransceivers().filter((function(e){return e.mid&&-1!==t.indexOf(e.mid)}))).length===t.length){e.next=6;break}throw new Error("Transceivers' length doesn't match mids' length.");case 6:return n.map((function(e){e.direction="inactive"})),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,i=this.logSDPExchange(r.sdp||"","offer","local","muteLocal"),e.next=13,this.peerConnection.setLocalDescription(r);case 13:return this.remoteSDP.muteRemote(t),o=this.remoteSDP.toString(),null==i||i(o),e.next=18,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(e.t0.toString()));case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteLocal",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");case 3:if((n=this.peerConnection.getTransceivers().filter((function(e){return e.mid&&-1!==t.indexOf(e.mid)}))).length===t.length){e.next=6;break}throw new Error("Transceivers' length doesn't match mids' length.");case 6:return n.map(function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.direction="sendonly";case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,i=this.logSDPExchange(r.sdp||"","offer","local","unmuteLocal"),e.next=13,this.peerConnection.setLocalDescription(r);case 13:return this.remoteSDP.unmuteRemote(t),o=this.remoteSDP.toString(),null==i||i(o),e.next=18,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(e.t0.toString()));case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"restartICE",value:function(e){var t=this;return sk(c().mark((function n(){var r,i,o,a,s,u,l,d,h;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ck(t.mutex.lock("From P2PConnection.restartICE"));case 2:if(r=n.sent,n.prev=3,t.remoteSDP){n.next=6;break}throw new Error("Cannot restartICE before remoteSDP created.");case 6:if(!hb().supportPCSetConfiguration){n.next=11;break}i=t.peerConnection.getConfiguration(),o=e===Ky.RELAY?"relay":"all",i.iceTransportPolicy!==o&&(Zv.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(i.iceTransportPolicy,"] to [").concat(o,"]")),i.iceTransportPolicy=o,t.peerConnection.setConfiguration(i)),n.next=13;break;case 11:if(e!==Ky.RELAY){n.next=13;break}return n.abrupt("return");case 13:return e!==Ky.RELAY&&t.remoteSDP.updateCandidates(e),n.next=16,ck(t.peerConnection.createOffer({iceRestart:!0}));case 16:if((a=n.sent).sdp){n.next=19;break}throw new Error("Cannot restartICE because restart offer SDP does not exist.");case 19:return s=gk(a.sdp),n.next=22,s.iceParameters;case 22:return u=n.sent,l=u.remoteIceParameters,t.remoteSDP.restartICE(l),d=t.remoteSDP.toString(),h=t.logSDPExchange(a.sdp||"","offer","local","restartICE"),t.store.descriptionStart(),n.next=29,ck(t.peerConnection.setLocalDescription(a));case 29:return null==h||h(d),n.next=32,ck(t.peerConnection.setRemoteDescription({type:"answer",sdp:d}));case 32:n.next=37;break;case 34:n.prev=34,n.t0=n.catch(3),Zv.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),n.t0);case 37:return n.prev=37,r(),n.finish(37);case 40:case"end":return n.stop()}}),n,null,[[3,34,37,40]])})))()}},{key:"close",value:function(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}},{key:"getStats",value:function(){return this.statsFilter.getStats()}},{key:"getRemoteVideoIsReady",value:function(e){return this.statsFilter.getVideoIsReady(e)}},{key:"updateEncoderConfig",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");case 3:return e.next=5,this.peerConnection.createOffer();case 5:return r=e.sent,i=this.mungSendOfferSDP(r.sdp,[n],[t]),this.remoteSDP.updateRecvMedia(t,n),o=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","local","updateEncoderConfig"),e.next=11,this.peerConnection.setLocalDescription({type:"offer",sdp:i});case 11:return null==a||a(o),e.next=14,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,e.t0.toString());case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateSendParameters",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getTransceivers().filter((function(e){return e.mid===t})),e.t0=1===r.length,!e.t0){e.next=12;break}if(!this.isVP8Simulcast(n)){e.next=10;break}if(e.t1=ff(),e.t1){e.next=8;break}return e.next=8,this.applySimulcastEncodings(r,[n]);case 8:e.next=12;break;case 10:return e.next=12,this.applySendEncodings(r,[n]);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setStatsRemoteVideoIsReady",value:function(e,t){this.statsFilter.setVideoIsReady2(e,t)}},{key:"replaceTrack",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getTransceivers().find((function(e){return e.mid===n})),e.t0=r,!e.t0){e.next=5;break}return e.next=5,r.sender.replaceTrack(t._mediaStreamTrack);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getSelectedCandidatePair",value:function(){var e=u(c().mark((function e(){var t,n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.peerConnection.getReceivers()).length>0&&t[0].transport&&t[0].transport.iceTransport&&t[0].transport.iceTransport.getSelectedCandidatePair&&t[0].transport.iceTransport.getSelectedCandidatePair())){e.next=4;break}return n=t[0].transport.iceTransport,r=n.getSelectedCandidatePair(),i=r.local,o=r.remote,e.abrupt("return",{local:pO(pO({},Vk),{},{candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port}),remote:pO(pO({},Vk),{},{candidateType:o.type,protocol:o.protocol,address:o.address,port:o.port})});case 4:return e.abrupt("return",this.statsFilter.getSelectedCandidatePair());case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"bindPCEvents",value:function(){var e=this;this.peerConnection.oniceconnectionstatechange=function(){var t;null===(t=e.onICEConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=function(){var t;null===(t=e.onConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.connectionState)},this.peerConnection.onicecandidate=function(t){t.candidate?e.localCandidateCount+=1:(e.peerConnection.onicecandidate=null,e.allCandidatesReceived=!0,Zv.debug("[".concat(e.store.clientId,"] [pc-").concat(e.store.p2pId,"] local candidate count"),e.localCandidateCount))},setTimeout((function(){e.allCandidatesReceived||(e.allCandidatesReceived=!0,Zv.debug("[".concat(e.store.clientId,"] [pc-").concat(e.store.p2pId,"] onicecandidate timeout, local candidate count"),e.localCandidateCount))}),lg("CANDIDATE_TIMEOUT"))}},{key:"unbindPCEvents",value:function(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}},{key:"tryBindTransportEvents",value:function(e){var t=this,n=e.transport;if(n){this.transportEventReceiver=e,n.onstatechange=function(){var e;null!=n&&n.state&&(null===(e=t.onDTLSTransportStateChange)||void 0===e||e.call(t,n.state))},n.onerror=function(e){var n;null===(n=t.onDTLSTransportError)||void 0===n||n.call(t,"error"in e?e.error:e)};var r=n.iceTransport;r&&(r.onstatechange=function(){var e,r=null==n?void 0:n.iceTransport.state;r&&(null===(e=t.onICETransportStateChange)||void 0===e||e.call(t,r))},r.getSelectedCandidatePair&&(r.onselectedcandidatepairchange=function(){if(r.getSelectedCandidatePair()){var e=r.getSelectedCandidatePair(),n=e.local,i=e.remote;Zv.info("[".concat(t.store.clientId,"] [pc-").concat(t.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:n.type,protocol:n.protocol}),", remote ").concat(JSON.stringify({candidateType:i.type,protocol:i.protocol,address:i.address,port:i.port})," )"))}}))}}},{key:"tryUnbindTransportEvents",value:function(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}},{key:"applySendEncodings",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u,l,d,h,f,p,v,g,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,hb().supportSetRtpSenderParameters){e.next=3;break}return e.abrupt("return");case 3:if(t.length===n.length){e.next=5;break}return e.abrupt("return");case 5:r=0;case 6:if(!(r<t.length)){e.next=32;break}if(i=t[r],!((o=n[r])&&o instanceof $T)){e.next=29;break}if(!this.isVP8Simulcast(o)){e.next=11;break}return e.abrupt("continue",29);case 11:u={},l={},e.t0=o._optimizationMode,e.next="motion"===e.t0?15:"detail"===e.t0?17:19;break;case 15:return u.degradationPreference="maintain-framerate",e.abrupt("break",20);case 17:return u.degradationPreference="maintain-resolution",e.abrupt("break",20);case 19:u.degradationPreference="balanced";case 20:return null!==(a=o._encoderConfig)&&void 0!==a&&a.bitrateMax&&(l.maxBitrate=1e3*(null===(d=o._encoderConfig)||void 0===d?void 0:d.bitrateMax)),o._hints.includes(Cy.LOW_STREAM)&&(null!==(h=o._encoderConfig)&&void 0!==h&&h.frameRate&&(l.maxFramerate=sw(o._encoderConfig.frameRate)),null!==(f=o._encoderConfig)&&void 0!==f&&f.scaleResolutionDownBy&&(null===(p=o._encoderConfig)||void 0===p?void 0:p.scaleResolutionDownBy)>1&&(l.scaleResolutionDownBy=o._encoderConfig.scaleResolutionDownBy)),lg("DSCP_TYPE")&&If()&&(v=lg("DSCP_TYPE"),["very-low","low","medium","high"].includes(v)&&(l.networkPriority=v)),g=i.sender.getParameters(),m=null===(s=g.encodings)||void 0===s?void 0:s[0],ff()&&!m&&(u.encodings=[l]),m&&Object.assign(m,l),Object.assign(g,u),e.next=29,i.sender.setParameters(g);case 29:r++,e.next=6;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(0),Zv.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."));case 37:case"end":return e.stop()}}),e,this,[[0,34]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"mungSendOfferSDP",value:function(e,t,n){var r=this,i=hk.exports.parse(e);return t.forEach((function(e,t){var o=n[t],a=i.mediaDescriptions.find((function(e){return e.attributes.mid===o}));a&&(_k(a,e),Tk(a,e,r.store.codec))})),hk.exports.print(i)}},{key:"mungReceiveAnswerSDP",value:function(e,t,n){var r=hk.exports.parse(e),i=r.mediaDescriptions.find((function(e){return e.attributes.mid===t}));return i&&n===zy.AUDIO&&"audio"===i.media.mediaType&&Ck(i),hk.exports.print(r)}},{key:"bindStatsEvents",value:function(){var e=this;this.statsFilter.onFirstAudioReceived=function(t){var n;null===(n=e.onFirstAudioReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoReceived=function(t){var n;null===(n=e.onFirstVideoReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstAudioDecoded=function(t){var n;null===(n=e.onFirstAudioDecoded)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoDecoded=function(t,n,r){var i;null===(i=e.onFirstVideoDecoded)||void 0===i||i.call(e,t,n,r)},this.statsFilter.onSelectedLocalCandidateChanged=function(t,n){var r;null===(r=e.onSelectedLocalCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onSelectedRemoteCandidateChanged=function(t,n){var r;null===(r=e.onSelectedRemoteCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onFirstVideoDecodedTimeout=function(t){var n;null===(n=e.onFirstVideoDecodedTimeout)||void 0===n||n.call(e,t)}}},{key:"unbindStatsEvents",value:function(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}},{key:"applySimulcastForFirefox",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u,l,d,h,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length!==n.length){e.next=13;break}r=0;case 2:if(!(r<t.length)){e.next=13;break}if(u=t[r],!((l=n[r])instanceof $T&&!l._hints.includes(Cy.LOW_STREAM)&&null!==(i=l._encoderConfig)&&void 0!==i&&i.bitrateMax&&(null===(o=l._encoderConfig)||void 0===o?void 0:o.bitrateMax)>200&&null!==(a=l._scalabiltyMode)&&void 0!==a&&a.numSpatialLayers&&(null===(s=l._scalabiltyMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec)){e.next=10;break}return d={},h={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4},d.encodings=[{rid:"m",active:!0,maxBitrate:h.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:h.high}],f=u.sender.getParameters(),e.next=10,u.sender.setParameters(Object.assign(f,d));case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"applySimulcastEncodings",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ff()||t.length!==n.length){e.next=13;break}r=0;case 2:if(!(r<t.length)){e.next=13;break}if(!((i=n[r])instanceof $T&&this.isVP8Simulcast(i))){e.next=10;break}return o=t[r],a={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4},a.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}],u=o.sender.getParameters(),e.next=10,o.sender.setParameters(Object.assign(u,a));case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"isVP8Simulcast",value:function(e){var t,n,r,i;return!!(e instanceof $T&&lg("SIMULCAST")&&"vp8"===this.store.codec&&!e._hints.includes(Cy.LOW_STREAM)&&null!==(t=e._encoderConfig)&&void 0!==t&&t.bitrateMax&&(null===(n=e._encoderConfig)||void 0===n?void 0:n.bitrateMax)>200&&null!==(r=e._scalabiltyMode)&&void 0!==r&&r.numSpatialLayers&&(null===(i=e._scalabiltyMode)||void 0===i?void 0:i.numSpatialLayers)>1)}},{key:"logSDPExchange",value:function(e,t,n,r){var i=this;if(lg("SDP_LOGGING"))return Zv.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?function(e){i.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}},{key:"getRemoteSSRC",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.remoteSDP){e.next=2;break}return e.abrupt("return");case 2:return n=this.remoteSDP.getSSRC(t),e.abrupt("return",null==n?void 0:n[0].ssrcId);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setConfiguration",value:function(e){if(hb().supportPCSetConfiguration){var t=n.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}],[{key:"resolvePCConfiguration",value:function(e){var t,r,i={iceServers:[]};return e.iceServers?i.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(ry(e.turnServer.servers)?i.iceServers=e.turnServer.servers:(i.iceServers&&(t=i.iceServers).push.apply(t,g(n.turnServerConfigToIceServers(e.turnServer.servers))),lg("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&e.turnServer.serversFromGateway&&(r=i.iceServers).push.apply(r,g(n.turnServerConfigToIceServers(e.turnServer.serversFromGateway))),lg("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((function(e){e.forceturn&&(i.iceTransportPolicy="relay")})))),lg("ENABLE_ENCODED_TRANSFORM")&&hb().supportWebRTCEncodedTransform&&(i.encodedInsertableStreams=!0),i}},{key:"turnServerConfigToIceServers",value:function(e){var t=[];return e.forEach((function(e){e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(ow(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!lg("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}}]),n}(ub)).prototype,"connect",[kO],Object.getOwnPropertyDescriptor(uO.prototype,"connect"),uO.prototype),x_(uO.prototype,"receive",[kO],Object.getOwnPropertyDescriptor(uO.prototype,"receive"),uO.prototype),x_(uO.prototype,"batchReceive",[kO],Object.getOwnPropertyDescriptor(uO.prototype,"batchReceive"),uO.prototype),x_(uO.prototype,"stopReceiving",[kO],Object.getOwnPropertyDescriptor(uO.prototype,"stopReceiving"),uO.prototype),x_(uO.prototype,"muteRemote",[kO],Object.getOwnPropertyDescriptor(uO.prototype,"muteRemote"),uO.prototype),x_(uO.prototype,"unmuteRemote",[kO],Object.getOwnPropertyDescriptor(uO.prototype,"unmuteRemote"),uO.prototype),x_(uO.prototype,"muteLocal",[kO],Object.getOwnPropertyDescriptor(uO.prototype,"muteLocal"),uO.prototype),x_(uO.prototype,"unmuteLocal",[kO],Object.getOwnPropertyDescriptor(uO.prototype,"unmuteLocal"),uO.prototype),x_(uO.prototype,"close",[kO],Object.getOwnPropertyDescriptor(uO.prototype,"close"),uO.prototype),x_(uO.prototype,"updateEncoderConfig",[kO],Object.getOwnPropertyDescriptor(uO.prototype,"updateEncoderConfig"),uO.prototype),x_(uO.prototype,"updateSendParameters",[kO],Object.getOwnPropertyDescriptor(uO.prototype,"updateSendParameters"),uO.prototype),x_(uO.prototype,"replaceTrack",[kO],Object.getOwnPropertyDescriptor(uO.prototype,"replaceTrack"),uO.prototype),x_(uO.prototype,"getRemoteSSRC",[kO],Object.getOwnPropertyDescriptor(uO.prototype,"getRemoteSSRC"),uO.prototype),uO);function kO(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=u(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("From P2PConnection.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}function OO(e,t){var n=document.createElement("video"),r=document.createElement("canvas");n.setAttribute("style","display:none"),r.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),r.width=sw(t.width),r.height=sw(t.height);var i=sw(t.framerate||15);document.body.append(n),document.body.append(r);var o=e._mediaStreamTrack;n.srcObject=new MediaStream([o]),n.play();var a=r.getContext("2d");if(!a)throw new Fv(Pv.UNEXPECTED_ERROR,"can not get canvas context");var s=hb(),c=r.captureStream(s.supportRequestFrame?0:i).getVideoTracks()[0],u=lE((function(){return function(){if(n.paused&&n.play(),n.videoHeight>2&&n.videoWidth>2){var t=n.videoWidth,i=n.videoHeight/t,s=r.width*i;Math.abs(s-r.height)>=2&&(Zv.debug("adjust low stream resolution","".concat(r.width,"x").concat(r.height," -> ").concat(r.width,"x").concat(s)),r.height=s)}a.drawImage(n,0,0,r.width,r.height),c.requestFrame&&c.requestFrame(),o!==e._mediaStreamTrack&&(o=e._mediaStreamTrack,n.srcObject=new MediaStream([o]))}()}),i),l=c.stop;return c.stop=function(){l.call(c),u(),n&&(n.remove(),n=null),r&&(r.width=0,r.remove(),r=null),Zv.debug("clean low stream renderer")},c}function CO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CO(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var NO=function(e){h(n,e);var t=f(n);function n(e,r,i,o){var a;return p(this,n),a=t.call(this,e,"track-".concat(e.kind,"-").concat(r,"-").concat(o.clientId,"_").concat(_w(5,""))),Lf(l(a),"_userId",void 0),Lf(l(a),"_uintId",void 0),Lf(l(a),"_isDestroyed",!1),Lf(l(a),"store",void 0),Lf(l(a),"processor",void 0),Lf(l(a),"processorContext",void 0),a._userId=r,a._uintId=i,a.store=o,a}return v(n,[{key:"getUserId",value:function(){return this._userId}},{key:"_updateOriginMediaStreamTrack",value:function(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}},{key:"_destroy",value:function(){this._isDestroyed=!0,Zv.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),i(o(n.prototype),"close",this).call(this)}},{key:"getProcessorStats",value:function(){return this.processorContext.gatherStats()}},{key:"getProcessorUsage",value:function(){return this.processorContext.gatherUsage()}}]),n}(J_),jO=(vO=K_({argsMap:function(e,t,n){return[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}}),gO=K_({argsMap:function(e){return[e.getTrackId()]}}),mO=K_({argsMap:function(e,t){return[e.getTrackId(),t.name]}}),yO=K_({argsMap:function(e){return[e.getTrackId()]}}),x_((bO=function(e){h(n,e);var t=f(n);function n(e,r,i,o){var a;return p(this,n),a=t.call(this,e,r,i,o),Lf(l(a),"_videoVisibleTimer",null),Lf(l(a),"_previousVideoVisibleStatus",void 0),Lf(l(a),"_clearPreviousVideoVisibleStatus",(function(){return a._previousVideoVisibleStatus=void 0})),Lf(l(a),"trackMediaType","video"),Lf(l(a),"_videoWidth",void 0),Lf(l(a),"_videoHeight",void 0),Lf(l(a),"_player",void 0),Lf(l(a),"processorDestination",void 0),Lf(l(a),"processorContext",void 0),a.updateMediaStreamTrackResolution(),a.processorContext=new LS(a.getTrackId(),"remote"),a.processorDestination=new PS(a.processorContext),a.bindProcessorDestinationEvents(),a}return v(n,[{key:"isPlaying",get:function(){return!(!this._player||this._player.videoElementStatus!==lm.PLAYING)}},{key:"__className__",get:function(){return"RemoteVideoTrack"}},{key:"getStats",value:function(){return Dw((function(){Zv.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")}),"remoteVideoTrackGetStatsWarning"),Rw(this,Oy.GET_STATS)||AO({},fy)}},{key:"play",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){var r=document.getElementById(e);r?e=r:(Zv.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}Zv.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(n));var i=AO(AO({fit:"cover"},n),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(i):(e instanceof HTMLVideoElement?this._player=new lT(i):this._player=new hT(i),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=function(){t.store.subscribe(t.getUserId(),"video",void 0,void 0,Date.now()),t.emit(Ly.FIRST_FRAME_DECODED)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((function(){try{var n=t.getVideoElementVisibleStatus();t.emit(Ly.VIDEO_ELEMENT_VISIBLE_STATUS,n)}catch(e){}}),lg("CHECK_VIDEO_VISIBLE_INTERVAL"))}},{key:"stop",value:function(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,Zv.debug("[".concat(this.getTrackId(),"] stop video playback")))}},{key:"getCurrentFrameData",value:function(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}},{key:"updateMediaStreamTrackResolution",value:function(){var e=this;ww(this._originMediaStreamTrack).then((function(t){var n=a(t,2),r=n[0],i=n[1];e._videoHeight=i,e._videoWidth=r})).catch(Sw)}},{key:"_updatePlayerSource",value:function(){Zv.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}},{key:"getVideoElementVisibleStatus",value:function(){try{var e,t,n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},i=r.element,o=r.slot;if(this.isPlaying&&i instanceof HTMLVideoElement&&o instanceof HTMLElement){var a=JT.checkOneElementVisible(i),s=Object.assign({},a);if(s.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=s.visible;var c=Y_.reportApiInvoke(null,{tag:Pm.TRACER,name:Dm.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});s.visible?c.onSuccess("Video is visible"):c.onSuccess("Invisible because of ".concat(s.reason))}return s}return}catch(e){throw new Fv(Pv.GET_VIDEO_ELEMENT_VISIBLE_ERROR,e.message)}}},{key:"pipe",value:function(e){if(this.processor===e)return e;if(e._source)throw new Fv(Pv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}},{key:"unpipe",value:function(){if(this.processor){var e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}}},{key:"bindProcessorDestinationEvents",value:function(){var e=this;this.processorDestination.on(eb.ON_TRACK,function(){var t=u(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n?n!==e._mediaStreamTrack&&(e._mediaStreamTrack=n,e._updatePlayerSource()):e._mediaStreamTrack!==e._originMediaStreamTrack&&(e._mediaStreamTrack=e._originMediaStreamTrack,e._updatePlayerSource());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"unbindProcessorDestinationEvents",value:function(){this.processorDestination.removeAllListeners(eb.ON_TRACK)}},{key:"_destroy",value:function(){i(o(n.prototype),"_destroy",this).call(this),this.unbindProcessorDestinationEvents()}}]),n}(NO)).prototype,"play",[vO],Object.getOwnPropertyDescriptor(bO.prototype,"play"),bO.prototype),x_(bO.prototype,"stop",[gO],Object.getOwnPropertyDescriptor(bO.prototype,"stop"),bO.prototype),x_(bO.prototype,"pipe",[mO],Object.getOwnPropertyDescriptor(bO.prototype,"pipe"),bO.prototype),x_(bO.prototype,"unpipe",[yO],Object.getOwnPropertyDescriptor(bO.prototype,"unpipe"),bO.prototype),bO),DO=(_O=K_({argsMap:function(e,t){return[e.getTrackId(),t]},throttleTime:300}),EO=K_({argsMap:function(e,t){return[e.getTrackId(),t]}}),SO=K_({argsMap:function(e){return[e.getTrackId()]}}),wO=K_({argsMap:function(e){return[e.getTrackId()]}}),xO=K_({argsMap:function(e,t){return[e.getTrackId(),t.name]}}),TO=K_({argsMap:function(e){return[e.getTrackId()]}}),x_((IO=function(e){h(n,e);var t=f(n);function n(e,r,i,o){var a;return p(this,n),a=t.call(this,e,r,i,o),Lf(l(a),"trackMediaType","audio"),Lf(l(a),"_source",void 0),Lf(l(a),"_useAudioElement",!0),Lf(l(a),"_volume",100),Lf(l(a),"processorContext",void 0),Lf(l(a),"processorDestination",void 0),Lf(l(a),"_played",!1),Lf(l(a),"_bypassWebAudio",!1),lg("DISABLE_WEBAUDIO")?(a._source=new VS,a._bypassWebAudio=!0,a._useAudioElement=!0):(a._source=new fE(e,!0),lg("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(a._useAudioElement=!1)),a._source.once($m.RECEIVE_TRACK_BUFFER,(function(){a.emit(Ly.FIRST_FRAME_DECODED)})),a.processorContext=new US(a._source.context,a.getTrackId(),"remote"),a.processorDestination=new MS(a.processorContext),a.bindProcessorDestinationEvents(),a._source.on($m.UPDATE_SOURCE,(function(){a.processor&&a.processor.updateInput({node:a._source.processSourceNode,context:a.processorContext})})),a}return v(n,[{key:"isPlaying",get:function(){return this._useAudioElement?DE.isPlaying(this.getTrackId()):this._source.isPlayed}},{key:"__className__",get:function(){return"RemoteAudioTrack"}},{key:"setAudioFrameCallback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners($m.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners($m.ON_AUDIO_BUFFER),this._source.on($m.ON_AUDIO_BUFFER,(function(t){return e(t)}))}},{key:"setVolume",value:function(e){this._volume=e,this._useAudioElement?DE.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}},{key:"setPlaybackDevice",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._useAudioElement){e.next=2;break}throw new Fv(Pv.NOT_SUPPORTED,"your browser does not support setting the audio output device");case 2:return e.next=4,DE.setSinkID(this.getTrackId(),t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getVolumeLevel",value:function(){return this._source.getAccurateVolumeLevel()}},{key:"getStats",value:function(){return Dw((function(){Zv.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")}),"remoteAudioTrackGetStatsWarning"),Rw(this,Oy.GET_STATS)||AO({},dy)}},{key:"play",value:function(){Zv.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(Zv.debug("[".concat(this.getTrackId(),"] use audio element to play")),DE.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}},{key:"stop",value:function(){Zv.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?DE.stop(this.getTrackId()):this._source.stop()}},{key:"_destroy",value:function(){i(o(n.prototype),"_destroy",this).call(this),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}},{key:"_isFreeze",value:function(){return this._source.isFreeze}},{key:"_updatePlayerSource",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Zv.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&DE.updateTrack(this.getTrackId(),this._mediaStreamTrack)}},{key:"pipe",value:function(e){if(this._bypassWebAudio)throw new Fv(Pv.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new Fv(Pv.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}},{key:"unpipe",value:function(){var e;if(this._bypassWebAudio)throw new Fv(Pv.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(this.processor){var t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}}},{key:"bindProcessorDestinationEvents",value:function(){var e=this;this.processorDestination.on(eb.ON_TRACK,function(){var t=u(c().mark((function t(n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n?n!==e._mediaStreamTrack&&(e._mediaStreamTrack=n,e._updatePlayerSource(!1),e._source.processedNode=e._source.createMediaStreamSourceNode(n)):e._mediaStreamTrack!==e._originMediaStreamTrack&&(e._mediaStreamTrack=e._originMediaStreamTrack,e._updatePlayerSource());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.processorDestination.on(eb.ON_NODE,(function(t){e._source.processedNode=t;var n=!t;e._useAudioElement!==n&&(e._played?(e.stop(),e._useAudioElement=n,e.play()):e._useAudioElement=n)}))}},{key:"unbindProcessorDestinationEvents",value:function(){this.processorDestination.removeAllListeners(eb.ON_TRACK),this.processorDestination.removeAllListeners(eb.ON_NODE)}}]),n}(NO)).prototype,"setVolume",[_O],Object.getOwnPropertyDescriptor(IO.prototype,"setVolume"),IO.prototype),x_(IO.prototype,"setPlaybackDevice",[EO],Object.getOwnPropertyDescriptor(IO.prototype,"setPlaybackDevice"),IO.prototype),x_(IO.prototype,"play",[SO],Object.getOwnPropertyDescriptor(IO.prototype,"play"),IO.prototype),x_(IO.prototype,"stop",[wO],Object.getOwnPropertyDescriptor(IO.prototype,"stop"),IO.prototype),x_(IO.prototype,"pipe",[xO],Object.getOwnPropertyDescriptor(IO.prototype,"pipe"),IO.prototype),x_(IO.prototype,"unpipe",[TO],Object.getOwnPropertyDescriptor(IO.prototype,"unpipe"),IO.prototype),IO);function PO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PO(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var MO=function(e){h(n,e);var t=f(n);function n(){var e;return p(this,n),e=t.call(this),Lf(l(e),"uplinkStatsUploadInterval",void 0),Lf(l(e),"uplinkRelatedStatsUploadInterval",void 0),Lf(l(e),"uplinkDenoiserStatsUploadInterval",void 0),Lf(l(e),"transportStatsUploadInterval",void 0),Lf(l(e),"uplinkExtensionStatsUploadInterval",void 0),Lf(l(e),"downlinkExtensionStatsUploadInterval",void 0),Lf(l(e),"extensionUsageStatsUploadInterval",void 0),Lf(l(e),"downlinkStatsUploadInterval",void 0),Lf(l(e),"downlinkRelatedStatsUploadInterval",void 0),Lf(l(e),"lastStats",void 0),Lf(l(e),"uploadUnplinkStarted",!1),Lf(l(e),"uploadDownlinkStarted",!1),Lf(l(e),"uploadTransportStarted",!1),Lf(l(e),"uploadExtensionUsageStarted",!1),Lf(l(e),"requestStats",void 0),Lf(l(e),"requestLocalMedia",void 0),Lf(l(e),"requestRemoteMedia",void 0),Lf(l(e),"requestAllTracks",void 0),Lf(l(e),"requestVideoIsReady",void 0),Lf(l(e),"requestUpload",void 0),e}return v(n,[{key:"startUploadTransportStats",value:function(){var e=this;this.uploadTransportStarted||(this.uploadTransportStarted=!0,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestStats)||void 0===t?void 0:t.call(e);n&&e.uploadTransportStats(n)}),1e3))}},{key:"startUploadExtensionUsageStats",value:function(){var e=this;if(!this.uploadExtensionUsageStarted){this.uploadExtensionUsageStarted=!0,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval);var t=new Map;this.extensionUsageStatsUploadInterval=window.setInterval(u(c().mark((function n(){var r,i,o,u,l,d,h,f,p,v,g,m,y,b,_,E,S,w;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u=Date.now(),l={connectionInterval:lg("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:u},d=[],h=(null===(r=e.requestAllTracks)||void 0===r?void 0:r.call(e))||[],f=s(h),n.prev=4,f.s();case 6:if((p=f.n()).done){n.next=17;break}if(v=p.value,n.t0=!v.muted&&v.enabled,!n.t0){n.next=15;break}return n.t1=d,n.next=13,v.getProcessorUsage();case 13:n.t2=n.sent,d=n.t1.concat.call(n.t1,n.t2);case 15:n.next=6;break;case 17:n.next=22;break;case 19:n.prev=19,n.t3=n.catch(4),f.e(n.t3);case 22:return n.prev=22,f.f(),n.finish(22);case 25:g=(null===(i=e.requestRemoteMedia)||void 0===i?void 0:i.call(e))||[],m=s(g),n.prev=27,m.s();case 29:if((y=m.n()).done){n.next=47;break}if(b=a(y.value,2),_=b[0],E=b[1],n.t4=E.has(zy.VIDEO)&&_.videoTrack,!n.t4){n.next=38;break}return n.t5=d,n.next=36,_.videoTrack.getProcessorUsage();case 36:n.t6=n.sent,d=n.t5.concat.call(n.t5,n.t6);case 38:if(n.t7=E.has(zy.AUDIO)&&_.audioTrack,!n.t7){n.next=45;break}return n.t8=d,n.next=43,_.audioTrack.getProcessorUsage();case 43:n.t9=n.sent,d=n.t8.concat.call(n.t8,n.t9);case 45:n.next=29;break;case 47:n.next=52;break;case 49:n.prev=49,n.t10=n.catch(27),m.e(n.t10);case 52:return n.prev=52,m.f(),n.finish(52);case 55:if(0!==d.length){n.next=57;break}return n.abrupt("return");case 57:l.details=function(e,t){var n,r={},i=s(e);try{for(i.s();!(n=i.n()).done;){var o,a,c,u=n.value,l=u.id,d=u.value,h=u.level,f=u.direction,p=null!==(o=t.get(l))&&void 0!==o?o:0,v=2===d?p+lg("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:p;t.set(l,v),r[l]?(2===d&&(r[l].value=d),h>r[l].level&&(r[l].level=h),"remote"===f&&(r[l].remoteUidCount+=1),r[l].totalTs=null!==(a=t.get(l))&&void 0!==a?a:0):r[l]={value:d,level:h,remoteUidCount:"local"===f?0:1,totalTs:null!==(c=t.get(l))&&void 0!==c?c:0}}}catch(g){i.e(g)}finally{i.f()}return Object.keys(r).map((function(e){var t=r[e];return{id:e,level:t.level,value:t.value,totalTs:t.totalTs}}))}(d,t),S=Date.now(),w=S>u?S:u+1,null===(o=e.requestUpload)||void 0===o||o.call(e,Jm.EXTENSION_USAGE_STATS,{usageStats:l,sendTs:w});case 60:case"end":return n.stop()}}),n,null,[[4,19,22,25],[27,49,52,55]])}))),lg("EXTENSION_USAGE_UPLOAD_INTERVAL"))}}},{key:"startUploadUplinkStats",value:function(){var e=this;this.uploadUnplinkStarted||(this.uploadUnplinkStarted=!0,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestStats)||void 0===t?void 0:t.call(e);n&&(e.uploadUplinkStats(n),e.lastStats=n)}),3e3),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkRelatedStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestStats)||void 0===t?void 0:t.call(e);n&&e.uploadRelatedUplinkStats(n,e.lastStats),e.lastStats=n}),1e3),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestAllTracks)||void 0===t?void 0:t.call(e);n&&e.uploadDenoiserStats(n)}),2e3),this.uplinkExtensionStatsUploadInterval&&window.clearInterval(this.uplinkExtensionStatsUploadInterval),this.uplinkExtensionStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestAllTracks)||void 0===t?void 0:t.call(e);n&&e.uploadExtensionStats(n)}),2e3))}},{key:"uploadTransportStats",value:function(e){var t=this;Aw((function(){var n;null===(n=t.requestUpload)||void 0===n||n.call(t,Jm.TRANSPORT_STATS,function(e){var t={connectionType:100,googRtt:e.rtt};if("relay"===e.selectedCandidatePair.localCandidate.candidateType){var n=e.selectedCandidatePair.localCandidate.relayProtocol;"udp"===n&&(t.connectionType=101),"tcp"===n&&(t.connectionType=103),"tls"===n&&(t.connectionType=104)}return t}(e))}))}},{key:"uploadUplinkStats",value:function(e){var t,n=this;((null===(t=this.requestLocalMedia)||void 0===t?void 0:t.call(this))||[]).forEach((function(t){var r=a(t,2),i=r[0],o=r[1],s=o.track,c=o.ssrcs;switch(i){case Zy.LocalVideoLowTrack:case Zy.LocalVideoTrack:var u=function(e,t,n){var r,i=t.videoSend.find((function(t){return t.ssrc===e}));if(!i)return null;var o={id:_w(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:i.ssrc.toString()};switch(o.A_vstd=n._originMediaStreamTrack&&!n._originMediaStreamTrack.enabled||n._mediaStreamTrack&&!n._mediaStreamTrack.enabled?"1":"0",i.sentFrame&&(o.A_fhs=i.sentFrame.height.toString(),o.A_frs=i.sentFrame.frameRate.toString(),o.A_fws=i.sentFrame.width.toString()),i.adaptionChangeReason){case"none":o.A_ac="0";break;case"cpu":o.A_ac="1";break;case"bandwidth":o.A_ac="2";break;case"other":o.A_ac="3"}return o.A_lvps=km[n._player?n._player.videoElementStatus:"uninit"].toString(),o.A_nr=null===(r=i.nacksCount)||void 0===r?void 0:r.toString(),i.avgEncodeMs&&(o.A_aem=i.avgEncodeMs.toFixed(0).toString()),o}(c[0].ssrcId,e,s),l=i===Zy.LocalVideoTrack?function(e,t,n){var r,i,o,a,s,c,u,l,d=t.videoSend.find((function(t){return t.ssrc===e}));if(!d)return null;var h={id:_w(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:d.ssrc.toString()},f=null!==(r=null!==(i=null===(o=d.inputFrame)||void 0===o?void 0:o.height)&&void 0!==i?i:null==n?void 0:n._videoHeight)&&void 0!==r?r:0,p=null!==(a=null!==(s=null===(c=d.inputFrame)||void 0===c?void 0:c.width)&&void 0!==s?s:null==n?void 0:n._videoWidth)&&void 0!==a?a:0,v=null!==(u=null===(l=d.inputFrame)||void 0===l?void 0:l.frameRate)&&void 0!==u?u:0;return f&&(h.A_fhi=f+""),p&&(h.A_fwi=p+""),v&&(h.A_fri=v+""),h}(c[0].ssrcId,e,s):null;u&&Aw((function(){var e;return null===(e=n.requestUpload)||void 0===e?void 0:e.call(n,Jm.PUBLISH_STATS,{stream_type:i===Zy.LocalVideoLowTrack?"low":"high",stats:LO(LO({},u),l)})}));var d=function(e){var t={id:"bweforvideo",timestamp:new Date(e.timestamp).toISOString(),type:"VideoBwe"};return e.bitrate.retransmit&&(t.A_rb=e.bitrate.retransmit.toString()),e.bitrate.targetEncoded&&(t.A_teb=e.bitrate.targetEncoded.toString()),t.A_aeb=e.bitrate.actualEncoded.toString(),t.A_tb=e.bitrate.transmit.toString(),void 0!==e.sendBandwidth&&(t.A_asb=e.sendBandwidth.toString()),t}(e);d&&setTimeout((function(){var e;return null===(e=n.requestUpload)||void 0===e?void 0:e.call(n,Jm.PUBLISH_STATS,{stream_type:i===Zy.LocalVideoLowTrack?"low":"high",stats:d})}),1e3);break;case Zy.LocalAudioTrack:var h=function(e,t,n){var r=t.audioSend.find((function(t){return t.ssrc===e}));if(!r)return null;var i={id:_w(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:r.ssrc.toString()};return i.A_astd=n._originMediaStreamTrack&&!n._originMediaStreamTrack.enabled||n._mediaStreamTrack&&!n._mediaStreamTrack.enabled?"1":"0",r.inputLevel?i.A_ail=Math.round(100*r.inputLevel).toString():i.A_ail=Math.round(100*n._source.getAccurateVolumeLevel()).toString(),i.A_apil=Math.round(100*n._source.getAccurateVolumeLevel()).toString(),r.aecReturnLoss&&(i.A_ecrl=Math.round(r.aecReturnLoss).toString()),r.aecReturnLossEnhancement&&(i.A_ecrle=Math.round(r.aecReturnLossEnhancement).toString()),i}(c[0].ssrcId,e,s);h&&Aw((function(){var e;return null===(e=n.requestUpload)||void 0===e?void 0:e.call(n,Jm.PUBLISH_STATS,{stream_type:"high",stats:h})}))}}))}},{key:"uploadRelatedUplinkStats",value:function(e,t){var n,r=this;((null===(n=this.requestLocalMedia)||void 0===n?void 0:n.call(this))||[]).filter((function(e){var t=a(e,1)[0];return t===Zy.LocalVideoLowTrack||t===Zy.LocalVideoTrack})).forEach((function(t){var n=a(t,2),i=n[0],o=function(e,t){var n=t.videoSend.find((function(t){return t.ssrc===e}));return n?{mediaType:"video",isVideoMute:!1,frameRateInput:n.inputFrame&&n.inputFrame.frameRate.toString(),frameRateSent:n.sentFrame&&n.sentFrame.frameRate.toString(),googRtt:n.rttMs.toString(),qpSumPerFrame:Math.floor(n.qpSumPerFrame).toString()}:null}(n[1].ssrcs[0].ssrcId,e);o&&Aw((function(){var e;null===(e=r.requestUpload)||void 0===e||e.call(r,Jm.PUBLISH_RELATED_STATS,{stream_type:i===Zy.LocalVideoLowTrack?"low":"high",stats:o})}))}))}},{key:"uploadDenoiserStats",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n instanceof KS){var r,i,o,a=null===(r=(i=n._external).getDenoiserStats)||void 0===r?void 0:r.call(i);return void(a&&(null===(o=this.requestUpload)||void 0===o||o.call(this,Jm.DENOISER_STATS,a)))}}}},{key:"uploadExtensionStats",value:function(e){for(var t=this,n=0;n<e.length;n++)e[n].getProcessorStats().forEach((function(e){var n;null===(n=t.requestUpload)||void 0===n||n.call(t,e.type,e.stats)}))}},{key:"stopUploadUplinkStats",value:function(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStatsUploadInterval&&window.clearInterval(this.uplinkStatsUploadInterval),this.uplinkRelatedStatsUploadInterval&&window.clearInterval(this.uplinkRelatedStatsUploadInterval),this.uplinkDenoiserStatsUploadInterval&&window.clearInterval(this.uplinkDenoiserStatsUploadInterval),this.uplinkStatsUploadInterval=void 0,this.uplinkRelatedStatsUploadInterval=void 0,this.uplinkDenoiserStatsUploadInterval=void 0)}},{key:"startUploadDownlinkStats",value:function(){var e=this;if(!this.uploadDownlinkStarted){var t;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);var n=!1;this.downlinkStatsUploadInterval=window.setInterval((function(){var r,i=null===(r=e.requestStats)||void 0===r?void 0:r.call(e);i&&(e.uploadDownlinkStats(i,n,t),t=i),n=!n}),3e3),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkRelatedStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestStats)||void 0===t?void 0:t.call(e);n&&(e.uploadRelatedDownlinkStats(n,e.lastStats),e.lastStats=n)}),1e3),this.downlinkExtensionStatsUploadInterval&&window.clearInterval(this.downlinkExtensionStatsUploadInterval),this.downlinkExtensionStatsUploadInterval=window.setInterval((function(){var t,n=null===(t=e.requestRemoteMedia)||void 0===t?void 0:t.call(e);n&&e.uploadDownlinkExtensionStats(n)}),2e3)}}},{key:"uploadDownlinkStats",value:function(e,t,n){var r,i=this;((null===(r=this.requestRemoteMedia)||void 0===r?void 0:r.call(this))||[]).forEach((function(r){var o=a(r,2),s=o[0],c=o[1];if(c.has(zy.VIDEO)&&s.videoTrack){var u=s.videoTrack?function(e,t,n,r,i){var o=t.videoRecv.find((function(t){return t.ssrc===e}));if(!o)return null;var a,s,c={id:_w(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"video",type:"ssrc",ssrc:o.ssrc.toString()};if(c.bytesReceived=o.bytes.toString(),c.packetsLost=o.packetsLost.toString(),c.packetsReceived=o.packets.toString(),o.framesRateFirefox&&(c.A_frr=o.framesRateFirefox.toString()),o.receivedFrame?(c.A_frr=o.receivedFrame.frameRate.toString(),c.A_fhr=o.receivedFrame.height.toString(),c.A_fwr=o.receivedFrame.width.toString()):(c.A_fhr=null===(a=r._videoHeight)||void 0===a?void 0:a.toString(),c.A_fwr=null===(s=r._videoWidth)||void 0===s?void 0:s.toString()),c.A_frd=o.decodeFrameRate.toString(),o.outputFrame&&(c.A_fro=o.outputFrame.frameRate.toString()),void 0!==o.jitterBufferMs&&(c.A_jbm=Math.floor(o.jitterBufferMs).toString()),void 0!==o.currentDelayMs&&(c.A_cdm=Math.floor(o.currentDelayMs).toString()),c.A_fs=o.firsCount.toString(),c.A_ns=o.nacksCount.toString(),c.A_ps=o.plisCount.toString(),r&&(c.A_vrtd=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?"0":"1"),r._player&&r._player.freezeTimeCounterList.length>0&&(c.A_vrft=Math.round(r._player.freezeTimeCounterList.splice(0,1)[0]).toString()),i&&r._player&&"visible"===nw.visibility){var u=Math.min(6e3,r._player.renderFreezeAccTime);c.A_vrrft=Math.round(u).toString(),r._player.renderFreezeAccTime=Math.max(0,r._player.renderFreezeAccTime-u)}if(c.A_rvps=km[r._player?r._player.videoElementStatus:"uninit"].toString(),n){var l=n.videoRecv.find((function(t){return t.ssrc===e}));if(l&&void 0!==o.totalInterFrameDelay&&void 0!==o.totalSquaredInterFrameDelay&&void 0!==l.totalInterFrameDelay&&void 0!==l.totalSquaredInterFrameDelay){var d=o.totalInterFrameDelay-l.totalInterFrameDelay,h=o.totalSquaredInterFrameDelay-l.totalSquaredInterFrameDelay,f=o.framesDecodeCount-l.framesDecodeCount,p=d/f*1e3,v=Math.round(1e3*Math.sqrt((h-Math.pow(d,2)/f)/f));!isNaN(v)&&p+v>Math.max(3*p,p+150)&&(c.A_ifdsd=v.toString())}}return c}(s._videoSSRC,e,n,s.videoTrack,t):void 0;u&&Aw((function(){var e;return null===(e=i.requestUpload)||void 0===e?void 0:e.call(i,Jm.SUBSCRIBE_STATS,{stream_id:s.uid,stats:u})}))}if(c.has(zy.AUDIO)&&s.audioTrack){var l=s.audioTrack?function(e,t,n,r){var i=t.audioRecv.find((function(t){return t.ssrc===e}));if(!i)return null;var o={id:_w(10,""),timestamp:new Date(t.timestamp).toISOString(),mediaType:"audio",type:"ssrc",ssrc:i.ssrc.toString()};if(o.bytesReceived=i.bytes.toString(),o.packetsLost=i.packetsLost.toString(),o.packetsReceived=i.packets.toString(),i.outputLevel?o.A_aol=Math.round(100*i.outputLevel).toString():o.A_aol=Math.round(100*r._source.getAccurateVolumeLevel()).toString(),o.A_apol=Math.round(100*r._source.getAccurateVolumeLevel()).toString(),r&&(o.A_artd=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?"0":"1"),o.A_jr=i.jitterMs.toString(),o.A_jbm=Math.floor(i.jitterBufferMs).toString(),o.A_cdm=Math.floor(i.jitterBufferMs).toString(),o.A_raps=km[DE.getPlayerState(r.getTrackId())].toString(),n){var a=n.audioRecv.find((function(t){return t.ssrc===e}));if(a){var s=i.concealedSamples-a.concealedSamples;s>0&&(o.A_cs=Math.round(s).toString())}}return o}(s._audioSSRC,e,n,s.audioTrack):void 0;l&&Aw((function(){var e;return null===(e=i.requestUpload)||void 0===e?void 0:e.call(i,Jm.SUBSCRIBE_STATS,{stream_id:s.uid,stats:l})}))}}))}},{key:"uploadRelatedDownlinkStats",value:function(e,t){var n,r=this;((null===(n=this.requestRemoteMedia)||void 0===n?void 0:n.call(this))||[]).forEach((function(n){var i=a(n,2),o=i[0],s=i[1];if(s.has(zy.VIDEO)&&o.videoTrack){var c,u=!0===(o._videoSSRC&&(null===(c=r.requestVideoIsReady)||void 0===c?void 0:c.call(r,o._videoSSRC))||!1),l=function(e,t,n,r,i,o){var a=n.videoRecv.find((function(t){return t.ssrc===e})),s=i?i.videoRecv.find((function(t){return t.ssrc===e})):void 0;if(!a)return null;var c=tw.isRemoteVideoFreeze(o,a,s)&&t,u={mediaType:"video",isVideoMute:!1,peerId:r,frameRateReceived:a.receivedFrame&&a.receivedFrame.frameRate.toString(),frameRateDecoded:a.decodedFrame&&a.decodedFrame.frameRate.toString(),isFreeze:c,bytesReceived:a.bytes.toString(),packetsReceived:a.packets.toString(),packetsLost:a.packetsLost.toString(),qpSumPerFrame:Math.floor(a.qpSumPerFrame).toString()};return a.framesRateFirefox&&(u.frameRateDecoded=a.framesRateFirefox.toString(),u.frameRateReceived=a.framesRateFirefox.toString()),u}(o._videoSSRC,u,e,o.uid,t,o.videoTrack);l&&Aw((function(){var e;null===(e=r.requestUpload)||void 0===e||e.call(r,Jm.SUBSCRIBE_RELATED_STATS,{stream_id:o.uid,stats:l})}))}if(s.has(zy.AUDIO)&&o.audioTrack){var d=function(e,t,n,r){var i=t.audioRecv.find((function(t){return t.ssrc===e}));if(!i)return null;var o=tw.isRemoteAudioFreeze(r);return{mediaType:"audio",isAudioMute:!1,peerId:n,googJitterReceived:i.jitterMs.toString(),isFreeze:o,bytesReceived:i.bytes.toString(),packetsReceived:i.packets.toString(),packetsLost:i.packetsLost.toString(),frameReceived:i.receivedFrames.toString(),frameDropped:i.droppedFrames.toString()}}(o._audioSSRC,e,o.uid,o.audioTrack);d&&Aw((function(){var e;null===(e=r.requestUpload)||void 0===e||e.call(r,Jm.SUBSCRIBE_RELATED_STATS,{stream_id:o.uid,stats:d})}))}}))}},{key:"stopUploadDownlinkStats",value:function(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval),this.downlinkRelatedStatsUploadInterval&&window.clearInterval(this.downlinkRelatedStatsUploadInterval),this.downlinkStatsUploadInterval=void 0,this.downlinkRelatedStatsUploadInterval=void 0)}},{key:"stopUploadTransportStats",value:function(){this.uploadTransportStarted&&(this.uploadTransportStarted=!1,this.transportStatsUploadInterval&&window.clearInterval(this.transportStatsUploadInterval),this.transportStatsUploadInterval=void 0)}},{key:"stopUploadExtensionUsageStats",value:function(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.extensionUsageStatsUploadInterval&&window.clearInterval(this.extensionUsageStatsUploadInterval),this.extensionUsageStatsUploadInterval=void 0)}},{key:"uploadDownlinkExtensionStats",value:function(e){var t=this;e.forEach((function(e){var n=a(e,2),r=n[0],i=n[1];i.has(zy.VIDEO)&&r.videoTrack&&r.videoTrack.getProcessorStats().forEach((function(e){var n;null===(n=t.requestUpload)||void 0===n||n.call(t,e.type,e.stats)})),i.has(zy.AUDIO)&&r.audioTrack&&r.audioTrack.getProcessorStats().forEach((function(e){var n;null===(n=t.requestUpload)||void 0===n||n.call(t,e.type,e.stats)}))}))}}]),n}(Uv);function UO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UO(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var FO,BO="v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0\na=msid-semantic: WMS\na=ice-lite\nm=application 9 UDP/DTLS/SCTP webrtc-datachannel\nc=IN IP4 127.0.0.1\na=mid:0\n",GO="9",qO=2e4,WO=4e4,HO=function(){function e(t){p(this,e),Lf(this,"sessionDesc",void 0),Lf(this,"_localCapabilities",void 0),Lf(this,"_rtpCapabilities",void 0),Lf(this,"_candidates",void 0),Lf(this,"_iceParameters",void 0),Lf(this,"_dtlsParameters",void 0),Lf(this,"setup",void 0),Lf(this,"currentMidIndex",void 0),Lf(this,"cname",void 0),Lf(this,"firefoxSsrcMidMap",new Map);var n=t=Nw(t),r=n.remoteIceParameters,i=n.remoteDtlsParameters,o=n.candidates,a=n.remoteRTPCapabilities,c=n.remoteSetup,u=n.localCapabilities,l=n.cname,d=hk.exports.parse(BO);this._rtpCapabilities=a,this._candidates=o,this._iceParameters=r,this._dtlsParameters=i,this._localCapabilities=u,this.setup=c,this.cname=l;var h,f=this.rtpCapabilities.send,v=s(d.mediaDescriptions);try{for(v.s();!(h=v.n()).done;){var g=h.value;if(g.attributes.iceUfrag=r.iceUfrag,g.attributes.icePwd=r.icePwd,g.attributes.fingerprints=i.fingerprints,g.attributes.candidates=o,g.attributes.setup=c,"application"===g.media.mediaType&&(g.attributes.sctpPort="5000"),"video"===g.media.mediaType&&(g.media.fmts=f.videoCodecs.map((function(e){return e.payloadType.toString(10)})),g.attributes.payloads=f.videoCodecs,g.attributes.extmaps=f.videoExtensions,lg("PRELOAD_MEDIA_COUNT")>0)){var m=bk([{ssrcId:WO,rtx:lg("USE_SUB_RTX")?40001:void 0}],this.cname),y=m.ssrcs,b=m.ssrcGroups;g.attributes.ssrcs=y,g.attributes.ssrcGroups=b}if("audio"===g.media.mediaType&&(g.media.fmts=f.audioCodecs.map((function(e){return e.payloadType.toString(10)})),g.attributes.payloads=f.audioCodecs,g.attributes.extmaps=f.audioExtensions,Ck(g),lg("PRELOAD_MEDIA_COUNT")>0)){var _=bk([{ssrcId:qO}],this.cname),E=_.ssrcs,S=_.ssrcGroups;g.attributes.ssrcs=E,g.attributes.ssrcGroups=S}}}catch(w){v.e(w)}finally{v.f()}this.sessionDesc=d,this.currentMidIndex=d.mediaDescriptions.length-1}return v(e,[{key:"localCapabilities",get:function(){return Nw(this._localCapabilities)}},{key:"rtpCapabilities",get:function(){return Nw(this._rtpCapabilities)}},{key:"candidates",get:function(){return Nw(this._candidates)}},{key:"iceParameters",get:function(){return Nw(this._iceParameters)}},{key:"dtlsParameters",get:function(){return Nw(this._dtlsParameters)}},{key:"updateRemoteRTPCapabilities",value:function(e){var t=hk.exports.parse(BO);this._rtpCapabilities=e;var n,r=this.rtpCapabilities.send,i=s(t.mediaDescriptions);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.attributes.iceUfrag=this._iceParameters.iceUfrag,o.attributes.icePwd=this._iceParameters.icePwd,o.attributes.fingerprints=this._dtlsParameters.fingerprints,o.attributes.candidates=this._candidates,o.attributes.setup=this.setup,"application"===o.media.mediaType&&(o.attributes.sctpPort="5000"),"video"===o.media.mediaType&&(o.media.fmts=r.videoCodecs.map((function(e){return e.payloadType.toString(10)})),o.attributes.payloads=r.videoCodecs,o.attributes.extmaps=r.videoExtensions,lg("PRELOAD_MEDIA_COUNT")>0)){var a=bk([{ssrcId:WO,rtx:lg("USE_SUB_RTX")?40001:void 0}],this.cname),c=a.ssrcs,u=a.ssrcGroups;o.attributes.ssrcs=c,o.attributes.ssrcGroups=u}if("audio"===o.media.mediaType&&(o.media.fmts=r.audioCodecs.map((function(e){return e.payloadType.toString(10)})),o.attributes.payloads=r.audioCodecs,o.attributes.extmaps=r.audioExtensions,lg("PRELOAD_MEDIA_COUNT")>0)){var l=bk([{ssrcId:qO}],this.cname),d=l.ssrcs,h=l.ssrcGroups;o.attributes.ssrcs=d,o.attributes.ssrcGroups=h}}}catch(f){i.e(f)}finally{i.f()}this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1}},{key:"preloadRemoteMedia",value:function(e){this.rtpCapabilities;for(var t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,i=this.rtpCapabilities.send,o=1;o<e;o++){var a=2*o+WO,s=bk([{ssrcId:2*o+qO}],this.cname),c=s.ssrcs,u=s.ssrcGroups,l=bk([{ssrcId:a,rtx:lg("USE_SUB_RTX")?a+1:void 0}],this.cname),d=l.ssrcs,h=l.ssrcGroups;this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:GO,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.videoCodecs.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:d,ssrcGroups:h,rtcpFeedbackWildcards:[],payloads:i.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o-1)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:GO,protos:["UDP","TLS","RTP","SAVPF"],fmts:i.audioCodecs.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:i.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:c,ssrcGroups:u,rtcpFeedbackWildcards:[],payloads:i.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(2*o)}}),this.currentMidIndex+=2}this.updateBundleMids()}},{key:"toString",value:function(){return hk.exports.print(this.sessionDesc)}},{key:"send",value:function(e,t,n,r){var i=bk(t,this.cname,lg("SYNC_GROUP")?n:void 0),o=i.ssrcs,a=i.ssrcGroups,s=this.findPreloadMediaDesc(o);if(s){if(ff()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,s.attributes.mid),r&&(r.twcc||r.remb)){var c=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[c]=this.mungSendMediaDesc(s,r),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}var u,l=this.findAvailableMediaIndex(e,o);return-1===l||hf()||pf()||yf()||0===l&&lg("USE_SUB_RTX")?(u=this.createOrRecycleSendMedia(e,o,a,"sendonly",r),this.updateBundleMids()):((u=Nw(this.sessionDesc.mediaDescriptions[l])).attributes.direction="sendonly",u.attributes.ssrcs=o,u.attributes.ssrcGroups=a,this.sessionDesc.mediaDescriptions[l]=this.mungSendMediaDesc(u,r)),ff()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,u.attributes.mid),{mid:u.attributes.mid,needExchangeSDP:!0}}},{key:"batchSend",value:function(e){var t=this,n=e.map((function(e){var n=e.kind,r=e.ssrcMsg,i=e.mslabel;return t.send(n,r,i)})),r=[],i=!1;return n.forEach((function(e){var t=e.mid;e.needExchangeSDP&&(i=!0),r.push(t)})),{mids:r,needExchangeSDP:i}}},{key:"stopSending",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((function(e){"0"===e.attributes.mid||ff()||hf()||pf()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}},{key:"mute",value:function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}},{key:"unmute",value:function(e){var t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}},{key:"muteRemote",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return e.includes(t.attributes.mid||"")}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((function(e){e.attributes.direction="inactive"}))}},{key:"unmuteRemote",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return e.includes(t.attributes.mid||"")}));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((function(e){e.attributes.direction="recvonly"}))}},{key:"receive",value:function(e,t,n,r){var i=this;e.forEach((function(e,o){i.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[o])})),this.updateBundleMids()}},{key:"stopReceiving",value:function(e){var t=this.sessionDesc.mediaDescriptions.filter((function(t){return-1!==e.indexOf(t.attributes.mid)}));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((function(e){e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}},{key:"updateCandidates",value:function(e){var t=this;e===Ky.TCP?this._candidates.forEach((function(e){-1===t._candidates.findIndex((function(t){return"tcp"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port}))&&t._candidates.push(VO(VO({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})):this._candidates=this._candidates.filter((function(e){return"tcp"!==e.transport}));var n,r=s(this.sessionDesc.mediaDescriptions);try{for(r.s();!(n=r.n()).done;)n.value.attributes.candidates=this.candidates}catch(i){r.e(i)}finally{r.f()}}},{key:"restartICE",value:function(e){e=Nw(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((function(t){t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}},{key:"predictReceivingMids",value:function(e){for(var t=[],n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}},{key:"findAvailableMediaIndex",value:function(e,t){var n=this;return this.sessionDesc.mediaDescriptions.findIndex((function(r){var i=r.media.mediaType===e&&"0"!==r.media.port&&("sendonly"===r.attributes.direction||"sendrecv"===r.attributes.direction)&&0===r.attributes.ssrcs.length;if(ff()){if(i){var o=n.firefoxSsrcMidMap.get(t[0].ssrcId);return!(o||"0"!==r.attributes.mid&&"1"!==r.attributes.mid)||!(!o||o!==r.attributes.mid)}return!1}return i}))}},{key:"createOrRecycleRecvMedia",value:function(e,t,n,r,i,o){var a=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,c=this.localCapabilities.send,u=[];if(a===zy.VIDEO){var l,d;if(lg("H264_PROFILE_LEVEL_ID")&&"h264"===r&&(u=s.videoCodecs.filter((function(e){var t,n;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(r)&&(null==e||null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])===lg("H264_PROFILE_LEVEL_ID")}))),!u||0===(null===(l=u)||void 0===l?void 0:l.length)){var h=c.videoCodecs.filter((function(e){var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(r)}));0!==h.length&&(u=s.videoCodecs.filter((function(e){return h.some((function(t){return t.payloadType===e.payloadType}))})))}if(lg("USE_PUB_RTX")){var f=u.map((function(e){return e.payloadType.toString()})),p=s.videoCodecs.filter((function(e){var t,n;return"rtx"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)&&f.includes((null===(n=e.fmtp)||void 0===n?void 0:n.parameters.apt)||"")}));u=[].concat(g(u),g(p))}0===u.length&&(Zv.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(null===(d=s.videoCodecs[0].rtpMap)||void 0===d?void 0:d.encodingName)),u=s.videoCodecs)}else u=s.audioCodecs.filter((function(e){var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes(i)})),0===u.length&&(Zv.warning("codec ".concat(i," not included in rtpCapabilities, fallback to opus")),u=s.audioCodecs.filter((function(e){var t;return((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"").includes("opus")})));var v=a===zy.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;var m="".concat(this.currentMidIndex),y={media:{mediaType:a,port:GO,protos:["UDP","TLS","RTP","SAVPF"],fmts:u.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:v,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:u,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(m)}};y=this.mungRecvMediaDsec(y,e,o);var b=this.findFirstClosedMedia(a);if(b){var _=this.sessionDesc.mediaDescriptions.indexOf(b);this.sessionDesc.mediaDescriptions[_]=y}else this.sessionDesc.mediaDescriptions.push(y);return y}},{key:"createOrRecycleSendMedia",value:function(e,t,n,r,i){var o=this.rtpCapabilities.send,a=e===zy.VIDEO?o.videoCodecs:o.audioCodecs,s=e===zy.VIDEO?o.videoExtensions:o.audioExtensions;this.currentMidIndex+=1;var c="".concat(this.currentMidIndex),u={media:{mediaType:e,port:GO,protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((function(e){return e.payloadType.toString(10)}))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:s,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};u=this.mungSendMediaDesc(u,i);var l=this.findFirstClosedMedia(e);if(l){var d=this.sessionDesc.mediaDescriptions.indexOf(l);this.sessionDesc.mediaDescriptions[d]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}},{key:"updateBundleMids",value:function(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((function(e){return"0"!==e.media.port})).map((function(e){return e.attributes.mid}))}},{key:"mungRecvMediaDsec",value:function(e,t,n){var r=Nw(e);return Ek(r),_k(r,t),Sk(r,t),wk(r),xk(r,n,this.localCapabilities.send),r}},{key:"mungSendMediaDesc",value:function(e,t){var n=Nw(e);return xk(n,t,this.localCapabilities.recv),Ck(n),n}},{key:"updateRecvMedia",value:function(e,t){var n=this.sessionDesc.mediaDescriptions.findIndex((function(t){return t.attributes.mid===e}));if(-1!==n){var r=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=r}}},{key:"bumpMid",value:function(e){this.currentMidIndex+=e}},{key:"findFirstClosedMedia",value:function(e){return this.sessionDesc.mediaDescriptions.find((function(t){return ff()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port}))}},{key:"findPreloadMediaDesc",value:function(e){return this.sessionDesc.mediaDescriptions.find((function(t){var n,r;return(null===(n=t.attributes)||void 0===n||null===(r=n.ssrcs[0])||void 0===r?void 0:r.ssrcId)===e[0].ssrcId}))}},{key:"getSSRC",value:function(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((function(t){return t.attributes.mid===e})))||void 0===t?void 0:t.attributes.ssrcs}}]),e}();function zO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zO(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var YO,ZO=(x_((FO=function(e){h(n,e);var t=f(n);function n(e,r,i){var o;return p(this,n),o=t.call(this,e,r),Lf(l(o),"store",void 0),Lf(l(o),"peerConnection",void 0),Lf(l(o),"remoteSDP",void 0),Lf(l(o),"initialOffer",void 0),Lf(l(o),"transportEventReceiver",void 0),Lf(l(o),"statsFilter",void 0),Lf(l(o),"localCapabilities",void 0),Lf(l(o),"localCandidateCount",0),Lf(l(o),"allCandidatesReceived",!1),Lf(l(o),"establishPromise",void 0),Lf(l(o),"mutex",new Q_("NVExtentionsConnection-mutex")),Lf(l(o),"rtcMedia",void 0),o.store=r,o.peerConnection=i,o.statsFilter=nO(o.peerConnection,void 0,void 0,ff()?1200:void 0),o.bindPCEvents(),o.bindStatsEvents(),o.store.p2pId=o.store.p2pId+1,o.establishPromise=o.establish(),o}return v(n,[{key:"currentLocalDescription",get:function(){return this.peerConnection.currentLocalDescription}},{key:"currentRemoteDescription",get:function(){return this.peerConnection.currentRemoteDescription}},{key:"peerConnectionState",get:function(){return this.peerConnection.connectionState}},{key:"iceConnectionState",get:function(){return this.peerConnection.iceConnectionState}},{key:"establish",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.peerConnection.createOffer();case 3:if((n=e.sent).sdp){e.next=6;break}throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");case 6:return r=gk(n.sdp),e.next=9,Ik(!lg("USE_PUB_RTX")&&!lg("USE_SUB_RTX"),lg("FILTER_VIDEO_FEC"),lg("FILTER_AUDIO_FEC"));case 9:return i=e.sent,e.abrupt("return",(this.localCapabilities=i,this.initialOffer=n,KO(KO({},r),{},{rtpCapabilities:i,offerSDP:n.sdp})));case 13:throw e.prev=13,e.t0=e.catch(0),new Fv(Pv.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.t0.toString());case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=u(c().mark((function e(t,n,r,i,o,a){var s,u,l,d,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.initialOffer){e.next=3;break}throw new Error("Cannot establish NVConnection without initial offer.");case 3:return this.remoteSDP=new HO({remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:i,remoteSetup:o,localCapabilities:Ok(this.localCapabilities),cname:a}),s=this.remoteSDP.toString(),u=hk.exports.parse(this.initialOffer.sdp),(l=u.mediaDescriptions.find((function(e){return"audio"===e.media.mediaType})))&&Ck(l),d=hk.exports.print(u),h=this.logSDPExchange(d||"","offer","local","connect"),e.next=9,this.peerConnection.setLocalDescription({type:"offer",sdp:d});case 9:return null==h||h(s),e.next=12,this.peerConnection.setRemoteDescription({type:"answer",sdp:s});case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"NV.connect failed; ".concat(e.t0.toString()));case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()},{key:"updateRemoteConnect",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(n=this.remoteSDP)||void 0===n||n.updateRemoteRTPCapabilities(t),null===(r=this.remoteSDP)||void 0===r||r.preloadRemoteMedia(2),o=null===(i=this.remoteSDP)||void 0===i?void 0:i.toString(),e.next=4,this.peerConnection.setRemoteDescription({type:"offer",sdp:o});case 4:return e.next=6,this.peerConnection.createAnswer();case 6:return a=e.sent,e.next=9,this.peerConnection.setLocalDescription(a);case 9:Zv.debug("[NVExtentionsConnection] updateRemoteRTPCapabilities by exchanging SDP.");case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"send",value:function(e,t,n){var r=this;return sk(c().mark((function i(){var o,a,s,u,l,d,h,f,p,v,g;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,ck(r.mutex.lock("From NVExtentionsConnection.send"));case 2:if(o=i.sent,i.prev=3,r.remoteSDP){i.next=6;break}throw new Error("Cannot call NVExtentionsConnection.send before remote SDP created");case 6:if(a=[],e.forEach((function(e){var t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});a.push(t)})),i.t0=ff()&&!0===lg("SIMULCAST"),!i.t0){i.next=12;break}return i.next=12,ck(r.applySimulcastForFirefox(a,e));case 12:return i.next=14,ck(r.peerConnection.createOffer());case 14:return s=i.sent,u=r.remoteSDP.predictReceivingMids(e.length),l=r.mungSendOfferSDP(s.sdp,e,u),d=hk.exports.parse(l),h=u.map((function(e){var t=d.mediaDescriptions.find((function(t){return t.attributes.mid===e}));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return mk(t,lg("USE_PUB_RTX"))})),i.prev=19,i.next=22,h;case 22:f=i.sent,i.next=36;break;case 25:return i.prev=25,i.t1=i.catch(19),f=[],r.remoteSDP.receive(e,t,n,f),p=r.remoteSDP.toString(),i.next=31,ck(r.peerConnection.setLocalDescription({type:"offer",sdp:l}));case 31:return i.next=33,ck(r.peerConnection.setRemoteDescription({type:"answer",sdp:p}));case 33:return i.next=35,ck(r.stopSending(u,!0));case 35:throw i.t1;case 36:return r.remoteSDP.receive(e,t,n,f),v=r.remoteSDP.toString(),g=r.logSDPExchange(l,"offer","local","send"),i.next=40,ck(r.peerConnection.setLocalDescription({type:"offer",sdp:l}));case 40:return i.next=42,ck(r.applySimulcastEncodings(a,e));case 42:return i.next=44,ck(r.applySendEncodings(a,e));case 44:return null==g||g(v),i.next=47,ck(r.peerConnection.setRemoteDescription({type:"answer",sdp:v}));case 47:return i.abrupt("return",a.map((function(e,t){var n=u[t];return{localSSRC:h[t],id:n,transceiver:e}})));case 50:throw i.prev=50,i.t2=i.catch(3),i.t2 instanceof Fv?i.t2:new Fv(Pv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.send failed; ".concat(i.t2.toString()));case 53:return i.prev=53,o(),i.finish(53);case 56:case"end":return i.stop()}}),i,null,[[3,50,53,56],[19,25]])})))()}},{key:"stopSending",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}e.t0=void 0,e.next=7;break;case 4:return e.next=6,this.mutex.lock("From NVExtentionsConnection.stopSending");case 6:e.t0=e.sent;case 7:if(r=e.t0,e.prev=8,this.remoteSDP){e.next=11;break}throw new Error("Cannot call NVExtentionsConnection.stopSending before remote SDP created");case 11:if(i=this.peerConnection.getTransceivers().filter((function(e){return-1!==t.indexOf(e.mid)})),i.length===t.length){e.next=14;break}throw new Error("Transceivers' length doesn't match mids' length when trying to call NVExtentionsConnection.stopSending.");case 14:return i.map((function(e){var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)})),e.next=17,this.peerConnection.createOffer();case 17:return o=e.sent,a=this.logSDPExchange(o.sdp||"","offer","local","stopSending"),e.next=21,this.peerConnection.setLocalDescription(o);case 21:return this.remoteSDP.stopReceiving(t),s=this.remoteSDP.toString(),null==a||a(s),e.next=26,this.peerConnection.setRemoteDescription({type:"answer",sdp:s});case 26:e.next=31;break;case 28:throw e.prev=28,e.t1=e.catch(8),new Fv(Pv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.stopSending failed; ".concat(e.t1.toString()));case 31:return e.prev=31,r&&r(),e.finish(31);case 34:case"end":return e.stop()}}),e,this,[[8,28,31,34]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"receive",value:function(){var e=u(c().mark((function e(t,n,r,i){var o,a,s,u,l,d,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.receive ".concat(t," before remoteSDP created."));case 3:if(o=this.remoteSDP.send(t,n,r,i),a=o.mid,!o.needExchangeSDP){e.next=18;break}return s=this.remoteSDP.toString(),u=this.logSDPExchange(s,"offer","remote","receive"),e.next=8,this.peerConnection.setRemoteDescription({type:"offer",sdp:s});case 8:return e.next=10,this.peerConnection.createAnswer();case 10:return l=e.sent,d=this.mungReceiveAnswerSDP(l.sdp,a,t),null==u||u(d||""),e.next=15,this.peerConnection.setLocalDescription({type:"answer",sdp:d});case 15:Zv.debug("[NVExtentionsConnection] receive ".concat(t," by exchanging SDP.")),e.next=19;break;case 18:Zv.debug("[NVExtentionsConnection] receive ".concat(t," no need to exchange SDP."));case 19:if(h=this.peerConnection.getTransceivers().find((function(e){return e.mid===a}))){e.next=22;break}throw new Error("Cannot get transceiver after setLocalDescription.");case 22:return e.abrupt("return",{track:h.receiver.track,id:a});case 25:throw e.prev=25,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.t0.toString()));case 28:case"end":return e.stop()}}),e,this,[[0,25]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"batchReceive",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.batchReceive before remoteSDP created.");case 3:if(n=this.remoteSDP.batchSend(t),r=n.mids,!n.needExchangeSDP){e.next=17;break}return i=this.remoteSDP.toString(),o=this.logSDPExchange(i,"offer","remote","receive"),e.next=8,this.peerConnection.setRemoteDescription({type:"offer",sdp:i});case 8:return e.next=10,this.peerConnection.createAnswer();case 10:return a=e.sent,null==o||o(a.sdp||""),e.next=14,this.peerConnection.setLocalDescription(a);case 14:Zv.debug("[NVExtentionsConnection] batchReceive by exchanging SDP."),e.next=18;break;case 17:Zv.debug("[NVExtentionsConnection] batchReceive no need to exchange SDP.");case 18:return e.abrupt("return",r.map((function(e){var t=s.peerConnection.getTransceivers().find((function(t){return t.mid===e}));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e}})));case 21:throw e.prev=21,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.receive failed; ".concat(e.t0.toString()));case 24:case"end":return e.stop()}}),e,this,[[0,21]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stopReceiving",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.stopReceiving before remote SDP created.");case 3:return this.remoteSDP.stopSending(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","stopReceiving"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection stopReceiving failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteRemote",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.muteRemote mid=".concat(t," before remote SDP created."));case 3:return this.remoteSDP.mute(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","muteRemote"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteRemote failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteRemote",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.unmuteRemote mid=".concat(t," before remote SDP created."));case 3:return this.remoteSDP.unmute(t),n=this.remoteSDP.toString(),r=this.logSDPExchange(n,"offer","remote","unmuteRemote"),e.next=7,this.peerConnection.setRemoteDescription({type:"offer",sdp:n});case 7:return e.next=9,this.peerConnection.createAnswer();case 9:return i=e.sent,null==r||r(i.sdp||""),e.next=13,this.peerConnection.setLocalDescription(i);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteRemote failed; ".concat(e.t0.toString()));case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteLocal",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.muteLocal before remote SDP created.");case 3:if((n=this.peerConnection.getTransceivers().filter((function(e){return e.mid&&-1!==t.indexOf(e.mid)}))).length===t.length){e.next=6;break}throw new Error("Transceivers' length doesn't match mids' length.");case 6:return n.map((function(e){e.direction="inactive"})),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,i=this.logSDPExchange(r.sdp||"","offer","local","muteLocal"),e.next=13,this.peerConnection.setLocalDescription(r);case 13:return this.remoteSDP.muteRemote(t),o=this.remoteSDP.toString(),null==i||i(o),e.next=18,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.muteLocal failed; ".concat(e.t0.toString()));case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteLocal",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.unmuteLocal before remote SDP created.");case 3:if((n=this.peerConnection.getTransceivers().filter((function(e){return e.mid&&-1!==t.indexOf(e.mid)}))).length===t.length){e.next=6;break}throw new Error("Transceivers' length doesn't match mids' length.");case 6:return n.map(function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.direction="sendonly";case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=9,this.peerConnection.createOffer();case 9:return r=e.sent,i=this.logSDPExchange(r.sdp||"","offer","local","unmuteLocal"),e.next=13,this.peerConnection.setLocalDescription(r);case 13:return this.remoteSDP.unmuteRemote(t),o=this.remoteSDP.toString(),null==i||i(o),e.next=18,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,"NVExtentionsConnection.unmuteLocal failed; ".concat(e.t0.toString()));case 23:case"end":return e.stop()}}),e,this,[[0,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"restartICE",value:function(e){var t=this;return sk(c().mark((function n(){var r,i,o,a,s,u,l,d,h;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ck(t.mutex.lock("From NVExtentionsConnection.restartICE"));case 2:if(r=n.sent,n.prev=3,t.remoteSDP){n.next=6;break}throw new Error("Cannot restartICE before remoteSDP created.");case 6:if(!hb().supportPCSetConfiguration){n.next=11;break}i=t.peerConnection.getConfiguration(),o=e===Ky.RELAY?"relay":"all",i.iceTransportPolicy!==o&&(Zv.debug("restartICE change iceTransportPolicy from [".concat(i.iceTransportPolicy,"] to [").concat(o,"]")),i.iceTransportPolicy=o,t.peerConnection.setConfiguration(i)),n.next=13;break;case 11:if(e!==Ky.RELAY){n.next=13;break}return n.abrupt("return");case 13:return e!==Ky.RELAY&&t.remoteSDP.updateCandidates(e),n.next=16,ck(t.peerConnection.createOffer({iceRestart:!0}));case 16:if((a=n.sent).sdp){n.next=19;break}throw new Error("Cannot restartICE because restart offer SDP does not exist.");case 19:return s=gk(a.sdp),n.next=22,s.iceParameters;case 22:return u=n.sent,l=u.remoteIceParameters,t.remoteSDP.restartICE(l),d=t.remoteSDP.toString(),h=t.logSDPExchange(a.sdp||"","offer","local","restartICE"),n.next=28,ck(t.peerConnection.setLocalDescription(a));case 28:return null==h||h(d),n.next=31,ck(t.peerConnection.setRemoteDescription({type:"answer",sdp:d}));case 31:n.next=36;break;case 33:n.prev=33,n.t0=n.catch(3),Zv.warning("restart ICE failed, abort operation",n.t0);case 36:return n.prev=36,r(),n.finish(36);case 39:case"end":return n.stop()}}),n,null,[[3,33,36,39]])})))()}},{key:"close",value:function(){var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy()}},{key:"getStats",value:function(){return this.statsFilter.getStats()}},{key:"getRemoteVideoIsReady",value:function(e){return this.statsFilter.getVideoIsReady(e)}},{key:"updateEncoderConfig",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.remoteSDP){e.next=3;break}throw new Error("Cannot call NVExtentionsConnection.updateEncoderConfig before remote SDP created.");case 3:return e.next=5,this.peerConnection.createOffer();case 5:return r=e.sent,i=this.mungSendOfferSDP(r.sdp,[n],[t]),this.remoteSDP.updateRecvMedia(t,n),o=this.remoteSDP.toString(),a=this.logSDPExchange(i,"offer","local","updateEncoderConfig"),e.next=11,this.peerConnection.setLocalDescription({type:"offer",sdp:i});case 11:return null==a||a(o),e.next=14,this.peerConnection.setRemoteDescription({type:"answer",sdp:o});case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),new Fv(Pv.EXCHANGE_SDP_FAILED,e.t0.toString());case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateSendParameters",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getTransceivers().filter((function(e){return e.mid===t})),e.t0=1===r.length,!e.t0){e.next=12;break}if(!this.isVP8Simulcast(n)){e.next=10;break}if(e.t1=ff(),e.t1){e.next=8;break}return e.next=8,this.applySimulcastEncodings(r,[n]);case 8:e.next=12;break;case 10:return e.next=12,this.applySendEncodings(r,[n]);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setStatsRemoteVideoIsReady",value:function(e,t){this.statsFilter.setVideoIsReady2(e,t)}},{key:"replaceTrack",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.peerConnection.getTransceivers().find((function(e){return e.mid===n})),e.t0=r,!e.t0){e.next=5;break}return e.next=5,r.sender.replaceTrack(t._mediaStreamTrack);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getP2PConnectionParams",value:function(){var e;if(null===(e=this.peerConnection.currentLocalDescription)||void 0===e||!e.sdp||!this.localCapabilities)throw new Error;return KO(KO({},gk(this.peerConnection.currentLocalDescription.sdp)),{},{rtpCapabilities:this.localCapabilities})}},{key:"bindPCEvents",value:function(){var e=this;this.peerConnection.oniceconnectionstatechange=function(){var t;null===(t=e.onICEConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=function(){var t;null===(t=e.onConnectionStateChange)||void 0===t||t.call(e,e.peerConnection.connectionState)},this.peerConnection.onicecandidate=function(t){t.candidate?e.localCandidateCount+=1:(e.peerConnection.onicecandidate=null,e.allCandidatesReceived=!0,Zv.debug("[pc-".concat(e.store.p2pId,"] local candidate count"),e.localCandidateCount))},setTimeout((function(){e.allCandidatesReceived||(e.allCandidatesReceived=!0,Zv.debug("[pc-".concat(e.store.p2pId,"] onicecandidate timeout, local candidate count"),e.localCandidateCount))}),lg("CANDIDATE_TIMEOUT"))}},{key:"unbindPCEvents",value:function(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}},{key:"applySendEncodings",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u,l,d,h,f,p,v,g,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,hb().supportSetRtpSenderParameters){e.next=3;break}return e.abrupt("return");case 3:if(t.length===n.length){e.next=5;break}return e.abrupt("return");case 5:r=0;case 6:if(!(r<t.length)){e.next=32;break}if(i=t[r],!((o=n[r])&&o instanceof $T)){e.next=29;break}if(!this.isVP8Simulcast(o)){e.next=11;break}return e.abrupt("continue",29);case 11:u={},l={},e.t0=o._optimizationMode,e.next="motion"===e.t0?15:"detail"===e.t0?17:19;break;case 15:return u.degradationPreference="maintain-framerate",e.abrupt("break",20);case 17:return u.degradationPreference="maintain-resolution",e.abrupt("break",20);case 19:u.degradationPreference="balanced";case 20:return null!==(a=o._encoderConfig)&&void 0!==a&&a.bitrateMax&&(l.maxBitrate=1e3*(null===(d=o._encoderConfig)||void 0===d?void 0:d.bitrateMax)),o._hints.includes(Cy.LOW_STREAM)&&(null!==(h=o._encoderConfig)&&void 0!==h&&h.frameRate&&(l.maxFramerate=sw(o._encoderConfig.frameRate)),null!==(f=o._encoderConfig)&&void 0!==f&&f.scaleResolutionDownBy&&(null===(p=o._encoderConfig)||void 0===p?void 0:p.scaleResolutionDownBy)>1&&(l.scaleResolutionDownBy=o._encoderConfig.scaleResolutionDownBy)),lg("DSCP_TYPE")&&If()&&(v=lg("DSCP_TYPE"),["very-low","low","medium","high"].includes(v)&&(l.networkPriority=v)),g=i.sender.getParameters(),m=null===(s=g.encodings)||void 0===s?void 0:s[0],ff()&&!m&&(u.encodings=[l]),m&&Object.assign(m,l),Object.assign(g,u),e.next=29,i.sender.setParameters(g);case 29:r++,e.next=6;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(0),Zv.debug("Apply RTPSendEncodings failed.");case 37:case"end":return e.stop()}}),e,this,[[0,34]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"mungSendOfferSDP",value:function(e,t,n){var r=this,i=hk.exports.parse(e);return t.forEach((function(e,t){var o=n[t],a=i.mediaDescriptions.find((function(e){return e.attributes.mid===o}));a&&(_k(a,e),Tk(a,e,r.store.codec))})),hk.exports.print(i)}},{key:"mungReceiveAnswerSDP",value:function(e,t,n){var r=hk.exports.parse(e),i=r.mediaDescriptions.find((function(e){return e.attributes.mid===t}));return i&&n===zy.AUDIO&&"audio"===i.media.mediaType&&Ck(i),hk.exports.print(r)}},{key:"bindStatsEvents",value:function(){var e=this;this.statsFilter.onFirstAudioReceived=function(t){var n;null===(n=e.onFirstAudioReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoReceived=function(t){var n;null===(n=e.onFirstVideoReceived)||void 0===n||n.call(e,t)},this.statsFilter.onFirstAudioDecoded=function(t){var n;null===(n=e.onFirstAudioDecoded)||void 0===n||n.call(e,t)},this.statsFilter.onFirstVideoDecoded=function(t,n,r){var i;null===(i=e.onFirstVideoDecoded)||void 0===i||i.call(e,t,n,r)},this.statsFilter.onSelectedLocalCandidateChanged=function(t,n){var r;null===(r=e.onSelectedLocalCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onSelectedRemoteCandidateChanged=function(t,n){var r;null===(r=e.onSelectedRemoteCandidateChanged)||void 0===r||r.call(e,t,n)},this.statsFilter.onFirstVideoDecodedTimeout=function(t){var n;null===(n=e.onFirstVideoDecodedTimeout)||void 0===n||n.call(e,t)}}},{key:"unbindStatsEvents",value:function(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}},{key:"applySimulcastForFirefox",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u,l,d,h,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length!==n.length){e.next=13;break}r=0;case 2:if(!(r<t.length)){e.next=13;break}if(u=t[r],!((l=n[r])instanceof $T&&!l._hints.includes(Cy.LOW_STREAM)&&null!==(i=l._encoderConfig)&&void 0!==i&&i.bitrateMax&&(null===(o=l._encoderConfig)||void 0===o?void 0:o.bitrateMax)>200&&null!==(a=l._scalabiltyMode)&&void 0!==a&&a.numSpatialLayers&&(null===(s=l._scalabiltyMode)||void 0===s?void 0:s.numSpatialLayers)>1&&"vp8"===this.store.codec)){e.next=10;break}return d={},h={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4},d.encodings=[{rid:"m",active:!0,maxBitrate:h.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:h.high}],f=u.sender.getParameters(),e.next=10,u.sender.setParameters(Object.assign(f,d));case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"applySimulcastEncodings",value:function(){var e=u(c().mark((function e(t,n){var r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ff()||t.length!==n.length){e.next=13;break}r=0;case 2:if(!(r<t.length)){e.next=13;break}if(!((i=n[r])instanceof $T&&this.isVP8Simulcast(i))){e.next=10;break}return o=t[r],a={},s={high:1e3*(i._encoderConfig.bitrateMax-50),medium:5e4},a.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:s.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:s.medium,scaleResolutionDownBy:4}],u=o.sender.getParameters(),e.next=10,o.sender.setParameters(Object.assign(u,a));case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"isVP8Simulcast",value:function(e){var t,n,r,i;return!!(e instanceof $T&&lg("SIMULCAST")&&"vp8"===this.store.codec&&!e._hints.includes(Cy.LOW_STREAM)&&null!==(t=e._encoderConfig)&&void 0!==t&&t.bitrateMax&&(null===(n=e._encoderConfig)||void 0===n?void 0:n.bitrateMax)>200&&null!==(r=e._scalabiltyMode)&&void 0!==r&&r.numSpatialLayers&&(null===(i=e._scalabiltyMode)||void 0===i?void 0:i.numSpatialLayers)>1)}},{key:"logSDPExchange",value:function(e,t,n,r){var i=this;if(lg("SDP_LOGGING"))return Zv.upload("exchanging ".concat(n," ").concat(t," SDP during NVExtentionsConnection.").concat(r,"\n"),e),"offer"===t?function(e){i.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}},{key:"getRemoteSSRC",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.remoteSDP){e.next=2;break}return e.abrupt("return");case 2:return n=this.remoteSDP.getSSRC(t),e.abrupt("return",null==n?void 0:n[0].ssrcId);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setConfiguration",value:function(e){if(hb().supportPCSetConfiguration){var t=n.resolvePCConfiguration(e);this.peerConnection.setConfiguration(t)}}}],[{key:"resolvePCConfiguration",value:function(e){var t,r,i={iceServers:[]};return e.iceServers?i.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(ry(e.turnServer.servers)?i.iceServers=e.turnServer.servers:(i.iceServers&&(t=i.iceServers).push.apply(t,g(n.turnServerConfigToIceServers(e.turnServer.servers))),lg("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&e.turnServer.serversFromGateway&&(r=i.iceServers).push.apply(r,g(n.turnServerConfigToIceServers(e.turnServer.serversFromGateway))),lg("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((function(e){e.forceturn&&(i.iceTransportPolicy="relay")})))),i}},{key:"turnServerConfigToIceServers",value:function(e){var t=[];return e.forEach((function(e){e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(ow(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!lg("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}}]),n}(ub)).prototype,"connect",[JO],Object.getOwnPropertyDescriptor(FO.prototype,"connect"),FO.prototype),x_(FO.prototype,"updateRemoteConnect",[JO],Object.getOwnPropertyDescriptor(FO.prototype,"updateRemoteConnect"),FO.prototype),x_(FO.prototype,"receive",[JO],Object.getOwnPropertyDescriptor(FO.prototype,"receive"),FO.prototype),x_(FO.prototype,"batchReceive",[JO],Object.getOwnPropertyDescriptor(FO.prototype,"batchReceive"),FO.prototype),x_(FO.prototype,"stopReceiving",[JO],Object.getOwnPropertyDescriptor(FO.prototype,"stopReceiving"),FO.prototype),x_(FO.prototype,"muteRemote",[JO],Object.getOwnPropertyDescriptor(FO.prototype,"muteRemote"),FO.prototype),x_(FO.prototype,"unmuteRemote",[JO],Object.getOwnPropertyDescriptor(FO.prototype,"unmuteRemote"),FO.prototype),x_(FO.prototype,"muteLocal",[JO],Object.getOwnPropertyDescriptor(FO.prototype,"muteLocal"),FO.prototype),x_(FO.prototype,"unmuteLocal",[JO],Object.getOwnPropertyDescriptor(FO.prototype,"unmuteLocal"),FO.prototype),x_(FO.prototype,"close",[JO],Object.getOwnPropertyDescriptor(FO.prototype,"close"),FO.prototype),x_(FO.prototype,"updateEncoderConfig",[JO],Object.getOwnPropertyDescriptor(FO.prototype,"updateEncoderConfig"),FO.prototype),x_(FO.prototype,"updateSendParameters",[JO],Object.getOwnPropertyDescriptor(FO.prototype,"updateSendParameters"),FO.prototype),x_(FO.prototype,"replaceTrack",[JO],Object.getOwnPropertyDescriptor(FO.prototype,"replaceTrack"),FO.prototype),x_(FO.prototype,"getRemoteSSRC",[JO],Object.getOwnPropertyDescriptor(FO.prototype,"getRemoteSSRC"),FO.prototype),FO);function JO(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=u(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("From NVExtentionsConnection.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}function XO(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=dk,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new QO(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function QO(e){function t(e){if(Object(e)!==e)return Vd.reject(new TypeError(e+" is not an object."));var t=e.done;return Vd.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(QO=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Vd.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Vd.reject(e):t(n.apply(this.s,arguments))}},new QO(e)}var $O,eC=(x_((YO=function(e){h(n,e);var t=f(n);function n(e,r){var i;return p(this,n),i=t.call(this,e,r),Lf(l(i),"store",void 0),Lf(l(i),"peerConnection",void 0),Lf(l(i),"cname",void 0),Lf(l(i),"mutex",new Q_("DataChannelConnection-mutex")),Lf(l(i),"dataChannel",void 0),Lf(l(i),"_p2pConnection",void 0),Lf(l(i),"establishPromise",void 0),Lf(l(i),"_nvMedia",void 0),i.store=r,i.store.dcId=i.store.dcId+1,i.peerConnection=new RTCPeerConnection(n.resolvePCConfiguration(e),{optional:[{googDscp:!0}]}),i.dataChannel=i.peerConnection.createDataChannel("agora-signal",{ordered:!1,maxPacketLifeTime:50}),i.dataChannel.binaryType="arraybuffer",i._p2pConnection=new ZO(e,r,i.peerConnection),i.bindPCEvents(),i.establishPromise=i._p2pConnection.establishPromise,i}return v(n,[{key:"currentLocalDescription",get:function(){return this.peerConnection.currentLocalDescription}},{key:"currentRemoteDescription",get:function(){return this.peerConnection.currentRemoteDescription}},{key:"peerConnectionState",get:function(){return this.peerConnection.connectionState}},{key:"iceConnectionState",get:function(){return this.peerConnection.iceConnectionState}},{key:"establish",value:function(){var e=u(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=this._nvMedia)||void 0===t?void 0:t.getLocalRtpCapabilities(),e.next=3,this._p2pConnection.establish(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getP2PConnectionParams",value:function(){return this._p2pConnection.getP2PConnectionParams()}},{key:"connect",value:function(){var e=u(c().mark((function e(t,n,r,i,o,a){var s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cname=a,e.next=3,this._p2pConnection.connect(t,n,r,i,o,a);case 3:return e.next=5,new Vd((function(e,t){var n=setTimeout((function(){s.closeSignal(),t(new Fv(Pv.DATACHANNEL_CONNECTION_TIMEOUT,"Datachannel connection timed out, candidates: ".concat(JSON.stringify(r))))}),2e3);s.dataChannel.onopen=function(){if("open"===s.dataChannel.readyState)return clearTimeout(n),void e()},s.dataChannel.onerror=function(e){s.closeSignal(),t(e)}}));case 5:return e.abrupt("return",{transmitter:this.dataChannel,close:this.closeSignal.bind(this)});case 6:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()},{key:"send",value:function(e,t,n){var r=this;return sk(c().mark((function i(){var o;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,ck(r.mutex.lock("From DataChannelConnection.send"));case 2:return o=i.sent,i.prev=3,i.delegateYield(lk(XO(r._p2pConnection.send(e,t,n)),ck),"t0",5);case 5:return i.abrupt("return",i.t0);case 6:return i.prev=6,o(),i.finish(6);case 9:case"end":return i.stop()}}),i,null,[[3,,6,9]])})))()}},{key:"stopSending",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._p2pConnection.stopSending(t,n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"receive",value:function(){var e=u(c().mark((function e(t,n,r,i){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._nvMedia){e.next=7;break}return Zv.debug("[DataChannelConnection] receive ".concat(t," by DataChannel.")),e.next=4,this._nvMedia.reveiveByRTCMedia(t,n,this.cname);case 4:e.t0=e.sent,e.next=11;break;case 7:return Zv.debug("[DataChannelConnection] receive ".concat(t," by WebRTC.")),e.next=10,this._p2pConnection.receive(t,n,r,i);case 10:e.t0=e.sent;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"batchReceive",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=g,e.next=3,this._p2pConnection.batchReceive(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stopReceiving",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.stopReceiving(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteRemote",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.muteRemote(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteRemote",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.unmuteRemote(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteLocal",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.muteLocal(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unmuteLocal",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.unmuteLocal(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"restartICE",value:function(e){var t=this;return sk(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(lk(XO(t._p2pConnection.restartICE(e)),ck),"t0",1);case 1:return n.abrupt("return",n.t0);case 2:case"end":return n.stop()}}),n)})))()}},{key:"close",value:function(){var e;null===(e=this._nvMedia)||void 0===e||e.close(),this._p2pConnection.close(),this.unbindConnectionEvents(this._p2pConnection)}},{key:"getStats",value:function(){return this._p2pConnection.getStats()}},{key:"getRemoteVideoIsReady",value:function(e){return this._p2pConnection.getRemoteVideoIsReady(e)}},{key:"updateRemoteConnect",value:function(e){var t;null===(t=this._nvMedia)||void 0===t||t.setRemoteRtpCapabilities(e),this._p2pConnection.updateRemoteConnect(e)}},{key:"updateEncoderConfig",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.updateEncoderConfig(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateSendParameters",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.updateSendParameters(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setStatsRemoteVideoIsReady",value:function(e,t){this._p2pConnection.setStatsRemoteVideoIsReady(e,t)}},{key:"replaceTrack",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._p2pConnection.replaceTrack(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRemoteSSRC",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._p2pConnection.getRemoteSSRC(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"logSDPExchange",value:function(e,t,n,r){var i=this;if(lg("SDP_LOGGING"))return Zv.upload("exchanging ".concat(n," ").concat(t," SDP during DataChannelConnection.").concat(r,"\n"),e),"offer"===t?function(e){i.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}},{key:"bindPCEvents",value:function(){var e=this;this._p2pConnection.onICEConnectionStateChange=function(t){var n;return null===(n=e.onICEConnectionStateChange)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onConnectionStateChange=function(t){var n;return null===(n=e.onConnectionStateChange)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onDTLSTransportStateChange=function(t){var n;return null===(n=e.onDTLSTransportStateChange)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onDTLSTransportError=function(t){var n;return null===(n=e.onDTLSTransportError)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onICETransportStateChange=function(t){var n;return null===(n=e.onICETransportStateChange)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onFirstAudioReceived=function(t){var n;return null===(n=e.onFirstAudioReceived)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onFirstVideoReceived=function(t){var n;return null===(n=e.onFirstVideoReceived)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onFirstAudioDecoded=function(t){var n;return null===(n=e.onFirstAudioDecoded)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onFirstVideoDecoded=function(t,n,r){var i;return null===(i=e.onFirstVideoDecoded)||void 0===i?void 0:i.call(e,t,n,r)},this._p2pConnection.onFirstVideoDecodedTimeout=function(t){var n;return null===(n=e.onFirstVideoDecodedTimeout)||void 0===n?void 0:n.call(e,t)},this._p2pConnection.onSelectedLocalCandidateChanged=function(t,n){var r;return null===(r=e.onSelectedLocalCandidateChanged)||void 0===r?void 0:r.call(e,t,n)},this._p2pConnection.onSelectedRemoteCandidateChanged=function(t,n){var r;return null===(r=e.onSelectedRemoteCandidateChanged)||void 0===r?void 0:r.call(e,t,n)}}},{key:"closeSignal",value:function(){this.dataChannel.close(),this.peerConnection.close()}},{key:"unbindConnectionEvents",value:function(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0}},{key:"setConfiguration",value:function(e){this._p2pConnection.setConfiguration(e)}}],[{key:"resolvePCConfiguration",value:function(e){var t,r,i={iceServers:[]};return e.iceServers?i.iceServers=e.iceServers:e.turnServer&&"off"!==e.turnServer.mode&&(ry(e.turnServer.servers)?i.iceServers=e.turnServer.servers:(i.iceServers&&(t=i.iceServers).push.apply(t,g(n.turnServerConfigToIceServers(e.turnServer.servers))),lg("USE_TURN_SERVER_OF_GATEWAY")&&i.iceServers&&e.turnServer.serversFromGateway&&(r=i.iceServers).push.apply(r,g(n.turnServerConfigToIceServers(e.turnServer.serversFromGateway))),lg("FORCE_TURN_TCP")?i.iceTransportPolicy="relay":e.turnServer.servers.concat(e.turnServer.serversFromGateway||[]).forEach((function(e){e.forceturn&&(i.iceTransportPolicy="relay")})))),i}},{key:"turnServerConfigToIceServers",value:function(e){var t=[];return e.forEach((function(e){e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(ow(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!lg("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}}]),n}(ub)).prototype,"connect",[tC],Object.getOwnPropertyDescriptor(YO.prototype,"connect"),YO.prototype),x_(YO.prototype,"receive",[tC],Object.getOwnPropertyDescriptor(YO.prototype,"receive"),YO.prototype),x_(YO.prototype,"stopReceiving",[tC],Object.getOwnPropertyDescriptor(YO.prototype,"stopReceiving"),YO.prototype),x_(YO.prototype,"muteRemote",[tC],Object.getOwnPropertyDescriptor(YO.prototype,"muteRemote"),YO.prototype),x_(YO.prototype,"unmuteRemote",[tC],Object.getOwnPropertyDescriptor(YO.prototype,"unmuteRemote"),YO.prototype),x_(YO.prototype,"muteLocal",[tC],Object.getOwnPropertyDescriptor(YO.prototype,"muteLocal"),YO.prototype),x_(YO.prototype,"unmuteLocal",[tC],Object.getOwnPropertyDescriptor(YO.prototype,"unmuteLocal"),YO.prototype),x_(YO.prototype,"close",[tC],Object.getOwnPropertyDescriptor(YO.prototype,"close"),YO.prototype),x_(YO.prototype,"updateEncoderConfig",[tC],Object.getOwnPropertyDescriptor(YO.prototype,"updateEncoderConfig"),YO.prototype),x_(YO.prototype,"updateSendParameters",[tC],Object.getOwnPropertyDescriptor(YO.prototype,"updateSendParameters"),YO.prototype),x_(YO.prototype,"replaceTrack",[tC],Object.getOwnPropertyDescriptor(YO.prototype,"replaceTrack"),YO.prototype),x_(YO.prototype,"getRemoteSSRC",[tC],Object.getOwnPropertyDescriptor(YO.prototype,"getRemoteSSRC"),YO.prototype),YO);function tC(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=u(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("From DataChannelConnection.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}function nC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nC(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iC(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=dk,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new oC(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function oC(e){function t(e){if(Object(e)!==e)return Vd.reject(new TypeError(e+" is not an object."));var t=e.done;return Vd.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(oC=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Vd.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Vd.reject(e):t(n.apply(this.s,arguments))}},new oC(e)}var aC,sC=(x_(($O=function(e){h(n,e);var t=f(n);function n(e,r){var i;return p(this,n),i=t.call(this),Lf(l(i),"store",void 0),Lf(l(i),"statsUploader",void 0),Lf(l(i),"connection",void 0),Lf(l(i),"localTrackMap",new Map),Lf(l(i),"remoteUserMap",new Map),Lf(l(i),"pendingLocalTracks",[]),Lf(l(i),"pendingRemoteTracks",[]),Lf(l(i),"statsCollector",void 0),Lf(l(i),"isPlanB",!1),Lf(l(i),"shouldForwardP2PCreation",void 0),Lf(l(i),"iceFailedCount",0),Lf(l(i),"dtlsFailedCount",0),Lf(l(i),"mutex",new Q_("P2PChannel-mutex")),Lf(l(i),"_state",Jy.Disconnected),Lf(l(i),"_pcStatsUploadType",lg("NEW_ICE_RESTART")?Yy.FIRST_CONNECTION:Yy.OLD_FIRST_CONNECTION),Lf(l(i),"_isInRestartIce",!1),Lf(l(i),"_isStartRestartIce",!1),Lf(l(i),"_restartStates",["disconnected","failed"]),Lf(l(i),"_restartTimer",void 0),Lf(l(i),"_isFirstConnected",!0),Lf(l(i),"handleMuteLocalTrack",function(){var e=u(c().mark((function e(t,n,r){var o,s,u,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");case 2:if(o=e.sent,e.prev=3,i.connection&&i.state===Jy.Connected){e.next=6;break}return e.abrupt("return",void r(new Fv(Pv.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established.")));case 6:if(0!==(s=i.filterTobeMutedTracks(t)).length){e.next=9;break}return e.abrupt("return",void n());case 9:return u=s.find((function(e){return"videoLowTrack"===e[0]})),u&&u[1].track._originMediaStreamTrack.stop(),e.next=13,i.connection.muteLocal(s.map((function(e){return a(e,2)[1].id})));case 13:return d=i.createMuteMessage(s),e.next=16,Iw(l(i),Xy.RequestMuteLocal,d);case 16:n(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),r(e.t0);case 22:return e.prev=22,o(),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[3,19,22,25]])})));return function(t,n,r){return e.apply(this,arguments)}}()),Lf(l(i),"handleUnmuteLocalTrack",function(){var e=u(c().mark((function e(t,n,r){var o,s,u,d,h,f,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");case 2:if(o=e.sent,e.prev=3,i.connection&&i.state===Jy.Connected){e.next=6;break}return e.abrupt("return",void r(new Fv(Pv.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established.")));case 6:if(0!==(s=i.filterTobeUnmutedTracks(t)).length){e.next=9;break}return e.abrupt("return",void n());case 9:if(u=s.find((function(e){return"videoLowTrack"===e[0]})),!u){e.next=15;break}return(d=u[1]).track._originMediaStreamTrack.stop(),hb().supportDualStreamEncoding?(h=t._mediaStreamTrack.clone(),d.track._mediaStreamTrack=h,d.track._originMediaStreamTrack=h):(f=OO(t,kw(l(i),Xy.RequestLowStreamParameter)),d.track._mediaStreamTrack=f,d.track._originMediaStreamTrack=f),e.next=15,new Vd((function(e,t){i.handleReplaceTrack(d.track,e,t,!0)}));case 15:return e.next=17,i.connection.unmuteLocal(s.map((function(e){return a(e,2)[1].id})));case 17:return p=i.createUnmuteMessage(s),e.next=20,Iw(l(i),Xy.RequestUnmuteLocal,p);case 20:n(),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),r(e.t0);case 26:return e.prev=26,o(),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[3,23,26,29]])})));return function(t,n,r){return e.apply(this,arguments)}}()),Lf(l(i),"handleUpdateVideoEncoder",function(){var e=u(c().mark((function e(t,n,r){var o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");case 2:if(o=e.sent,e.prev=3,a=i.localTrackMap.get(Zy.LocalVideoTrack),i.connection&&a&&a.track===t&&i.state===Jy.Connected){e.next=7;break}return e.abrupt("return",void n());case 7:return s=a.id,u=a.track,e.next=10,i.connection.updateSendParameters(s,u);case 10:return e.next=12,i.connection.updateEncoderConfig(s,u);case 12:i.emit(Xy.UpdateVideoEncoder,u),n(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),r(e.t0);case 19:return e.prev=19,o(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[3,16,19,22]])})));return function(t,n,r){return e.apply(this,arguments)}}()),Lf(l(i),"handleSetOptimizationMode",function(){var e=u(c().mark((function e(t,n,r){var o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.mutex.lock("Locking from P2PChannel.handleSetOptimizationMode");case 2:if(o=e.sent,e.prev=3,a=i.localTrackMap.get(Zy.LocalVideoTrack),i.connection&&a&&a.track===t&&i.state===Jy.Connected){e.next=7;break}return e.abrupt("return");case 7:return s=a.id,u=a.track,e.next=10,i.connection.updateSendParameters(s,u);case 10:n(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),r(e.t0);case 16:return e.prev=16,o(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[3,13,16,19]])})));return function(t,n,r){return e.apply(this,arguments)}}()),Lf(l(i),"handleReplaceTrack",function(){var e=u(c().mark((function e(t,n,r,o){var s,u,l,d,h,f,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zv.debug("[".concat(i.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(t.getTrackId(),"]")),e.t0="boolean"==typeof o&&o,e.t0){e.next=6;break}return e.next=5,i.mutex.lock("From P2PChannel.handleReplaceTrack");case 5:s=e.sent;case 6:if(e.prev=6,l=Array.from(i.localTrackMap.entries()).find((function(e){var n=a(e,2)[1].track;return t===n})),i.connection&&l&&i.state===Jy.Connected){e.next=10;break}return e.abrupt("return",void n());case 10:return e.next=12,null===(u=i.connection)||void 0===u?void 0:u.replaceTrack(t,l[1].id);case 12:if(!i.isPlanB){e.next=15;break}(d=l[1]).id=t._mediaStreamTrack.id,i.localTrackMap.set(l[0],d);case 15:if(l[0]!==Zy.LocalVideoTrack||!hb().supportDualStreamEncoding){e.next=24;break}if(!(h=i.localTrackMap.get(Zy.LocalVideoLowTrack))){e.next=24;break}return f=t._mediaStreamTrack.clone(),h.track._originMediaStreamTrack.stop(),h.track._mediaStreamTrack=f,h.track._originMediaStreamTrack=f,e.next=24,new Vd((function(e,t){i.handleReplaceTrack(h.track,e,t,!0)}));case 24:n(),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(6),r(e.t1);case 30:return e.prev=30,null===(p=s)||void 0===p||p(),e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[6,27,30,33]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()),Lf(l(i),"handleGetLocalVideoStats",(function(e){e(i.statsCollector.getLocalVideoTrackStats())})),Lf(l(i),"handleGetLocalAudioStats",(function(e){e(i.statsCollector.getLocalAudioTrackStats())})),Lf(l(i),"handleGetRemoteVideoStats",(function(e){return i.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid]})),Lf(l(i),"handleGetRemoteAudioStats",(function(e){return i.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid]})),i.store=e,i.statsCollector=r,i.statsCollector.addP2PChannel(l(i)),i.statsUploader=new MO,i.bindStatsUploaderEvents(),i.isPlanB=!hb().supportUnifiedPlan||lg("CHROME_FORCE_PLAN_B")&&If(),i.shouldForwardP2PCreation=lg("FORWARD_P2P_CREATION")&&hb().supportPCSetConfiguration,i.shouldForwardP2PCreation&&(i.connection=i.store.useDataChannel?new eC({},i.store):i.isPlanB?new oO({},i.store):new RO({},i.store),i.bindConnectionEvents(i.connection)),i}return v(n,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;this._state=e,this.emit(Xy.StateChange,t,this._state)}},{key:"startP2PConnection",value:function(){var e=u(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state=Jy.New,i=this.shouldForwardP2PCreation&&"closed"===(null===(r=this.connection)||void 0===r?void 0:r.peerConnectionState),this.shouldForwardP2PCreation&&!i||(i&&this.connection&&(Zv.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.store.useDataChannel?new eC(t,this.store):this.isPlanB?new oO(t,this.store):new RO(t,this.store),this.bindConnectionEvents(this.connection)),this.connection){e.next=4;break}throw new Fv(Pv.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");case 4:return e.abrupt("return",(this._pcStatsUploadType=lg("NEW_ICE_RESTART")?Yy.FIRST_CONNECTION:Yy.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(t),this.connection.establishPromise));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=u(c().mark((function e(t,n,r,i,o,a){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=2;break}throw new Fv(Pv.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");case 2:if(!(this.connection instanceof eC)){e.next=6;break}this.connection.updateRemoteConnect(i),e.next=12;break;case 6:return this.store.peerConnectionStart(),e.next=9,this.connection.connect(t,n,r,i,o,a);case 9:this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Jy.Connected;case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()},{key:"preConnect",value:function(){var e=u(c().mark((function e(t,n,r,i,o,a){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=2;break}throw new Fv(Pv.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");case 2:return this.store.peerConnectionStart(),e.next=5,this.connection.connect(t,n,r,i,o,a);case 5:return s=e.sent,e.abrupt("return",(this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=Jy.Connected,s));case 7:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()},{key:"getEstablishParams",value:function(){if(this.connection instanceof eC)return this.connection.getP2PConnectionParams();throw new Error("Only DataChannelConnection needs to obtain establishParams")}},{key:"publish",value:function(e,t,n){var r=this;return sk(c().mark((function i(){var o,a,s;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,ck(r.mutex.lock("From P2PChannel.publish"));case 2:if(o=i.sent,i.prev=3,r.connection&&r.state===Jy.Connected){i.next=10;break}if(r.state!==Jy.Disconnected){i.next=7;break}throw new Fv(Pv.UNEXPECTED_ERROR,"PeerConnection already disconnected.");case 7:return r.throwIfTrackTypeNotMatch(e),a=e.filter((function(e){return-1===r.pendingLocalTracks.indexOf(e)})),i.abrupt("return",void(r.pendingLocalTracks=r.pendingLocalTracks.concat(a)));case 10:if(r.store.pubId=r.store.pubId+1,QS.markPublishStart(r.store.clientId,r.store.pubId),0!==(s=r.filterTobePublishedTracks(e,t,n)).length){i.next=16;break}return i.next=15,ck(r.tryToUnmuteAudio(e));case 15:return i.abrupt("return",void i.sent);case 16:return i.delegateYield(lk(iC(r.doPublish(r.connection,s)),ck),"t0",17);case 17:return i.prev=17,o(),i.finish(17);case 20:case"end":return i.stop()}}),i,null,[[3,,17,20]])})))()}},{key:"doPublish",value:function(e,t){var n=this;return sk(c().mark((function r(){var i,o,a,s,u,l;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.forEach((function(e){var t=e.track,r=e.type,i=Date.now();n.store.publish(t.getTrackId(),r===Zy.LocalAudioTrack?"audio":"video",i)})),n.bindLocalTrackEvents(t),r.next=3,ck(e.send(t.map((function(e){return e.track})),n.store.codec,n.store.audioCodec));case 3:return i=r.sent,r.next=6,ck(i.next());case 6:return o=r.sent.value,a=n.createGatewayPublishMessage(t,o),r.prev=8,r.next=11,a;case 11:s=r.sent,r.next=17;break;case 14:throw r.prev=14,r.t0=r.catch(8),i.throw(r.t0),(null==r.t0?void 0:r.t0.code)===Pv.WS_ABORT&&t.forEach((function(e){var t=e.track;-1===n.pendingLocalTracks.indexOf(t)&&n.pendingLocalTracks.push(t)})),n.unbindLocalTrackEvents(t),r.t0;case 17:return u=n.mapPubResToRemoteConfig(a,s),r.next=20,ck(i.next(u));case 20:l=r.sent.value,t.forEach((function(e){var t=e.type;n.statsCollector.addLocalStats(t)})),n.assignLocalTracks(t,l),n.statsUploader.startUploadUplinkStats(),t.forEach((function(e){var t=e.track,r=e.type,i=Date.now();n.store.publish(t.getTrackId(),r===Zy.LocalAudioTrack?"audio":"video",void 0,i)}));case 22:case"end":return r.stop()}}),r,null,[[8,14]])})))()}},{key:"publishLowStream",value:function(e){var t=this;return sk(c().mark((function n(){var r,i,o,a,s;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.connection&&t.state===Jy.Connected){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,ck(t.mutex.lock("Locking from P2PChannel.publishLowStream"));case 4:if(r=n.sent,n.prev=5,i=t.localTrackMap.get(Zy.LocalVideoTrack)){n.next=9;break}throw new Fv(Pv.UNEXPECTED_ERROR,"Could not find high stream");case 9:if(!t.localTrackMap.has(Zy.LocalVideoLowTrack)){n.next=11;break}throw new Fv(Pv.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));case 11:return o=[{track:t.getLowVideoTrack(i.track,e),type:Zy.LocalVideoLowTrack}],n.delegateYield(lk(iC(t.doPublish(t.connection,o)),ck),"t0",13);case 13:if(!i.track.muted&&i.track.enabled){n.next=19;break}if(s=null===(a=t.localTrackMap.get(Zy.LocalVideoLowTrack))||void 0===a?void 0:a.id,n.t1=void 0!==s,!n.t1){n.next=19;break}return n.next=19,ck(t.connection.muteLocal([s]));case 19:return n.prev=19,r(),n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[5,,19,22]])})))()}},{key:"republish",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.pendingLocalTracks.length>0,!e.t0){e.next=7;break}return Zv.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),e.next=5,Tw(this,Xy.RequestRePublish,this.pendingLocalTracks);case 5:this.emit(Xy.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[];case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reSubscribe",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,u,l,d,h,f=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=this.pendingRemoteTracks.length-1;n>=0;n--)r=this.pendingRemoteTracks[n],i=r.user,((o=r.kind)!==zy.AUDIO||i._audio_added_&&i._audioSSRC)&&(o!==zy.VIDEO||i._video_added_&&i._videoSSRC)||this.pendingRemoteTracks.splice(n,1);if(!t){e.next=6;break}return e.next=4,Tw(this,Xy.RequestReSubscribe,this.pendingRemoteTracks);case 4:e.next=23;break;case 6:a=s(this.pendingRemoteTracks),e.prev=7,a.s();case 9:if((u=a.n()).done){e.next=15;break}return l=u.value,d=l.user,h=l.kind,e.next=13,this.subscribe(d,h,h===zy.VIDEO?d._videoSSRC:d._audioSSRC);case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:this.pendingRemoteTracks.forEach((function(e){var t=e.user;f.emit(Xy.MediaReconnectEnd,t.uid)})),this.pendingRemoteTracks=[];case 24:case"end":return e.stop()}}),e,this,[[7,17,20,23]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unpublish",value:function(){var e=u(c().mark((function e(t){var n,r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection&&this.state===Jy.Connected){e.next=2;break}return e.abrupt("return",void t.forEach((function(e){var t=i.pendingLocalTracks.indexOf(e);-1!==t&&i.pendingLocalTracks.splice(t,1)})));case 2:if(0!==(n=this.filterTobeUnpublishedTracks(t)).length){e.next=5;break}return e.abrupt("return");case 5:return r=n.find((function(e){return"videoLowTrack"===e[0]})),r&&r[1].track.close(),e.abrupt("return",this.doUnpublish(this.connection,n));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unpublishLowStream",value:function(){var e=u(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection&&this.state===Jy.Connected){e.next=2;break}return e.abrupt("return");case 2:if(t=this.localTrackMap.get(Zy.LocalVideoLowTrack)){e.next=5;break}return e.abrupt("return");case 5:return t.track.close(),n=[[Zy.LocalVideoLowTrack,t]],e.abrupt("return",this.doUnpublish(this.connection,n));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"doUnpublish",value:function(){var e=u(c().mark((function e(t,n){var r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createGatewayUnpublishMessage(n),e.next=3,t.stopSending(n.map((function(e){return a(e,2)[1].id})));case 3:return this.withdrawLocalTracks(n),this.unbindLocalTrackEvents(n.map((function(e){var t=a(e,2);return{type:t[0],track:t[1].track}}))),n.forEach((function(e){var t=a(e,1)[0];i.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&this.statsUploader.stopUploadUplinkStats(),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"subscribe",value:function(){var e=u(c().mark((function e(t,n,r,i,o){var a,s,u,l,d,h,f,p,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection&&this.state===Jy.Connected){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");case 2:if(null===(a=this.remoteUserMap.get(t))||void 0===a||!a.has(n)){e.next=4;break}return e.abrupt("return");case 4:if(l=void 0,!o){e.next=15;break}if(d=o.find((function(e){return e.stream_type===n})),d){e.next=9;break}throw new Fv(Pv.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(n," for user: ").concat(t.uid," because subscribe answer from gateway does not contain stream_type: ").concat(n,"."));case 9:return e.next=11,this.connection.receive(n,d.ssrcs,String(t._uintid),d.attributes);case 11:h=e.sent,this.connection instanceof RO&&(l=h.transceiver),s=h.track,u=h.id,e.next=19;break;case 15:return e.next=17,this.connection.receive(n,[{ssrcId:r,rtx:i}],String(t._uintid),void 0);case 17:f=e.sent,this.connection instanceof RO&&(l=f.transceiver),s=f.track,u=f.id;case 19:n===zy.AUDIO?(t._audioTrack?t._audioTrack._updateOriginMediaStreamTrack(s):(t._audioTrack=new DO(s,t.uid,t._uintid,this.store),Zv.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(t._audioTrack.getTrackId()))),l&&t._audioTrack._updateRtpTransceiver(l),this.bindRemoteTrackEvents(t,t._audioTrack)):(t._videoTrack?t._videoTrack._updateOriginMediaStreamTrack(s):(t._videoTrack=new jO(s,t.uid,t._uintid,this.store),Zv.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(t._videoTrack.getTrackId()))),l&&t._videoTrack._updateRtpTransceiver(l),this.bindRemoteTrackEvents(t,t._videoTrack)),(p=this.remoteUserMap.get(t))?p.set(n,u):this.remoteUserMap.set(t,new Map([[n,u]])),this.statsCollector.addRemoteStats(t.uid),this.statsUploader.startUploadDownlinkStats(),v=this.pendingRemoteTracks.findIndex((function(e){var r=e.user,i=e.kind;return r.uid===t.uid&&n===i})),-1!==v&&(this.pendingRemoteTracks.splice(v,1),this.emit(Xy.MediaReconnectEnd,t.uid));case 24:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"massSubscribe",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.massSubscribeNoLock(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"massSubscribeNoLock",value:function(){var e=u(c().mark((function e(t){var n,r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection&&this.state===Jy.Connected){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");case 2:return t=t.filter((function(e){var t,n=e.user,i=e.mediaType;return!(null!==(t=r.remoteUserMap.get(n))&&void 0!==t&&t.has(i))})),e.next=5,this.connection.batchReceive(t.map((function(e){var t=e.user;return{kind:e.mediaType,ssrcMsg:[{ssrcId:e.ssrcId,rtx:e.rtxSsrcId}],mslabel:String(t._uintid)}})));case 5:n=e.sent,t.forEach((function(e,t){var i=e.user,o=e.mediaType,a=n[t],s=a.track,c=a.id,u=a.transceiver;o===zy.AUDIO?(i._audioTrack?i._audioTrack._updateOriginMediaStreamTrack(s):(i._audioTrack=new DO(s,i.uid,i._uintid,r.store),Zv.info("[".concat(r.store.clientId,"] [").concat(r.store.p2pId,"] create remote audio track: ").concat(i._audioTrack.getTrackId()))),u&&i._audioTrack._updateRtpTransceiver(u),r.bindRemoteTrackEvents(i,i._audioTrack)):(i._videoTrack?i._videoTrack._updateOriginMediaStreamTrack(s):(i._videoTrack=new jO(s,i.uid,i._uintid,r.store),Zv.info("[".concat(r.store.clientId,"] [").concat(r.store.p2pId,"] create remote video track: ").concat(i._videoTrack.getTrackId()))),u&&i._videoTrack._updateRtpTransceiver(u),r.bindRemoteTrackEvents(i,i._videoTrack));var l=r.remoteUserMap.get(i);l?l.set(o,c):r.remoteUserMap.set(i,new Map([[o,c]])),r.statsCollector.addRemoteStats(i.uid),r.statsUploader.startUploadDownlinkStats();var d=r.pendingRemoteTracks.findIndex((function(e){var t=e.user,n=e.kind;return t.uid===i.uid&&o===n}));-1!==d&&(r.pendingRemoteTracks.splice(d,1),r.emit(Xy.MediaReconnectEnd,i.uid))}));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unsubscribe",value:function(){var e=u(c().mark((function e(t,n,r){var i,o,s,u=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.pendingRemoteTracks.filter((function(e){var r=e.user,i=e.kind;return void 0!==n?r.uid===t.uid&&n===i:r.uid===t.uid})),i.forEach((function(e){var t=u.pendingRemoteTracks.indexOf(e);u.pendingRemoteTracks.splice(t,1)})),this.connection&&this.state===Jy.Connected||r||i.forEach((function(e){var n,r=e.kind;if(r===zy.AUDIO)null===(n=t._audioTrack)||void 0===n||n._destroy(),t._audioTrack=void 0;else if(r===zy.VIDEO){var i;null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0}})),this.connection&&this.state===Jy.Connected){e.next=3;break}return e.abrupt("return");case 3:if(0!==(o=this.filterTobeUnSubscribedTracks(t,n)).length){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.connection.stopReceiving(o.map((function(e){return a(e,2)[1].id})));case 8:return s=this.createUnsubscribeMessage(o),e.abrupt("return",(this.withdrawRemoteTracks(o),0===this.remoteUserMap.size&&this.statsUploader.stopUploadDownlinkStats(),o.forEach((function(e){var t,n,i=a(e,2),o=i[0],s=i[1].kind;if(s===zy.VIDEO&&o._videoSSRC&&(null===(t=u.connection)||void 0===t||t.setStatsRemoteVideoIsReady(o._videoSSRC,!1)),s===zy.VIDEO)u.unbindRemoteTrackEvents(o._videoTrack),r||(null===(n=o._videoTrack)||void 0===n||n._destroy(),o._videoTrack=void 0);else if(s===zy.AUDIO){var c;u.unbindRemoteTrackEvents(o._audioTrack),r||(null===(c=o._audioTrack)||void 0===c||c._destroy(),o._audioTrack=void 0)}})),s));case 10:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"massUnsubscribe",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.massUnsubscribeNoLock(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"massUnsubscribeNoLock",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,u,l,d=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=s(t),e.prev=2,o=c().mark((function e(){var t,r,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.value,r=t.user,o=t.mediaType,a=d.pendingRemoteTracks.filter((function(e){var t=e.user,n=e.kind;return void 0!==o?t.uid===r.uid&&o===n:t.uid===r.uid})),a.forEach((function(e){var t=d.pendingRemoteTracks.indexOf(e);d.pendingRemoteTracks.splice(t,1)})),n=n.concat(a);case 3:case"end":return e.stop()}}),e)})),r.s();case 5:if((i=r.n()).done){e.next=9;break}return e.delegateYield(o(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),r.e(e.t1);case 14:return e.prev=14,r.f(),e.finish(14);case 17:if(this.connection&&this.state===Jy.Connected){e.next=19;break}return e.abrupt("return",void n.forEach((function(e){var t,n=e.user,r=e.kind;if(r===zy.AUDIO)null===(t=n._audioTrack)||void 0===t||t._destroy(),n._audioTrack=void 0;else if(r===zy.VIDEO){var i;null===(i=n._videoTrack)||void 0===i||i._destroy(),n._videoTrack=void 0}})));case 19:if(u=yr(t).call(t,(function(e,t){var n=t.user,r=t.mediaType,i=d.filterTobeUnSubscribedTracks(n,r);return e.concat(i)}),[]),0!==u.length){e.next=22;break}return e.abrupt("return");case 22:return e.next=24,this.connection.stopReceiving(u.map((function(e){return a(e,2)[1].id})));case 24:return l=this.createUnsubscribeAllMessage(u),e.abrupt("return",(this.withdrawRemoteTracks(u),0===this.remoteUserMap.size&&this.statsUploader.stopUploadDownlinkStats(),u.forEach((function(e){var t,n,r=a(e,2),i=r[0],o=r[1].kind;if(o===zy.VIDEO&&i._videoSSRC&&(null===(t=d.connection)||void 0===t||t.setStatsRemoteVideoIsReady(i._videoSSRC,!1)),o===zy.VIDEO)d.unbindRemoteTrackEvents(i._videoTrack),null===(n=i._videoTrack)||void 0===n||n._destroy(),i._videoTrack=void 0;else if(o===zy.AUDIO){var s;d.unbindRemoteTrackEvents(i._audioTrack),null===(s=i._audioTrack)||void 0===s||s._destroy(),i._audioTrack=void 0}})),l));case 26:case"end":return e.stop()}}),e,this,[[2,11,14,17]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"muteRemote",value:function(){var e=u(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=2;break}return e.abrupt("return");case 2:if(r=this.remoteUserMap.get(t)){e.next=5;break}return e.abrupt("return",void Zv.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(t.uid,".")));case 5:if(r.get(n)){e.next=7;break}return e.abrupt("return",void Zv.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(t.uid," media type ").concat(n,".")));case 7:void 0!==(i=n===zy.VIDEO?t._videoSSRC:t._audioSSRC)&&this.connection.setStatsRemoteVideoIsReady(i,!1);case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"unmuteRemote",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.unmuteRemoteNoLock(t,n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"unmuteRemoteNoLock",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=2;break}return e.abrupt("return");case 2:if(r=this.remoteUserMap.get(t)){e.next=5;break}return e.abrupt("return",void Zv.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(t.uid,".")));case 5:r.get(n)||Zv.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(t.uid," media type ").concat(n,"."));case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getAllTracks",value:function(e){var t=this.localTrackMap.get(Zy.LocalAudioTrack);if((null==t?void 0:t.track)instanceof ZS){var n=t.track;return Array.from(this.localTrackMap.entries()).filter((function(e){return a(e,1)[0]!==Zy.LocalAudioTrack})).filter((function(t){var n=a(t,1)[0];return!(e&&n===Zy.LocalVideoLowTrack)})).map((function(e){return a(e,2)[1].track})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((function(t){var n=a(t,1)[0];return!(e&&n===Zy.LocalVideoLowTrack)})).map((function(e){return a(e,2)[1].track}))}},{key:"reportPublishEvent",value:function(e,t,n,r,i){if(e){var o=this.localTrackMap.get(Zy.LocalAudioTrack),a=r?this.localTrackMap.get(Zy.LocalVideoLowTrack):this.localTrackMap.get(Zy.LocalVideoTrack);Y_.publish(this.store.sessionId,{eventElapse:QS.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==o?void 0:o.track.getTrackLabel(),videoName:null==a?void 0:a.track.getTrackLabel(),screenshare:-1!==(null==a?void 0:a.track._hints.indexOf(Cy.SCREEN_TRACK)),audio:!!o,video:!!a,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}else{var s;n||(n=[]);var c=n.find((function(e){return e instanceof zS})),u=r?null===(s=this.localTrackMap.get(Zy.LocalVideoTrack))||void 0===s?void 0:s.track:n.find((function(e){return e instanceof $T}));Y_.publish(this.store.sessionId,{eventElapse:QS.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==c?void 0:c.getTrackLabel(),videoName:null==u?void 0:u.getTrackLabel(),screenshare:-1!==(null==u?void 0:u._hints.indexOf(Cy.SCREEN_TRACK)),audio:!!c,video:!!u,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:i})}}},{key:"reportSubscribeEvent",value:function(e,t,n,r){var i=r===zy.VIDEO?n._videoSSRC:n._audioSSRC;i&&Y_.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===zy.VIDEO,audio:r===zy.AUDIO,peerid:n.uid,subscribeRequestid:r===zy.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:QS.measureFromSubscribeStart(this.store.clientId,i)})}},{key:"reset",value:function(){Zv.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new Q_("P2PChannel-mutex"),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new eC({},this.store):this.isPlanB?new oO({},this.store):new RO({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();var e=this.localTrackMap.get(Zy.LocalAudioTrack);if((null==e?void 0:e.track)instanceof ZS){if(e.track.trackList.length>0){var t=e.track;e.track.trackList.forEach((function(e){t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.state=Jy.Disconnected}},{key:"getStats",value:function(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}},{key:"getRemoteVideoIsReady",value:function(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}},{key:"getLocalAudioVolume",value:function(){var e=this.localTrackMap.get(Zy.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}},{key:"getLocalVideoSize",value:function(){var e=this.localTrackMap.get(Zy.LocalVideoTrack);if(e)return{width:e.track._videoWidth||0,height:e.track._videoHeight||0}}},{key:"getEncoderConfig",value:function(e){var t=this.localTrackMap.get(e);return t&&t.track instanceof $T||t&&t.track instanceof zS?t.track._encoderConfig:void 0}},{key:"getLocalMedia",value:function(e){return this.localTrackMap.get(e)}},{key:"hasLocalMedia",value:function(){return this.localTrackMap.size>0}},{key:"hasRemoteMedia",value:function(e,t){if(!e)return this.remoteUserMap.size>0;var n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}},{key:"hasRemoteMediaWithLock",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",this.remoteUserMap.size>0);case 2:return r=this.remoteUserMap.get(t),e.abrupt("return",!!r&&(!n||r.has(n)));case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRemoteMedia",value:function(e){var t,n=Array.from(N_(t=this.remoteUserMap).call(t)).find((function(t){return t.uid===e}));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}},{key:"getAudioLevels",value:function(){var e=Array.from(this.remoteUserMap.entries()).map((function(e){var t=a(e,1)[0];return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}})),t=this.localTrackMap.get(Zy.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=vm(e).call(e,(function(e,t){return e.level-t.level})),e}},{key:"disconnectForReconnect",value:function(){var e=u(c().mark((function e(){var t=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connection&&(Zv.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=Jy.Reconnecting,lg("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((function(e){var t,n=a(e,1)[0];n._videoTrack&&n._videoTrack._player&&(null===(t=n._videoTrack._player.getVideoElement())||void 0===t||t.pause(),n._videoTrack._player.isKeepLastFrame=!0,n._videoTrack._originMediaStreamTrack.stop())})),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.store.useDataChannel?new eC({},this.store):this.isPlanB?new oO({},this.store):new RO({},this.store),this.bindConnectionEvents(this.connection)),0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((function(e){var n=a(e,2),r=n[0],i=n[1].track;switch(r){case Zy.LocalVideoTrack:i._hints.includes(Cy.LOW_STREAM)?i.close():t.pendingLocalTracks.push(i);break;case Zy.LocalAudioTrack:i instanceof ZS?t.pendingLocalTracks=t.pendingLocalTracks.concat(i.trackList):t.pendingLocalTracks.push(i);case Zy.LocalVideoLowTrack:}})),this.emit(Xy.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((function(e){var n=a(e,2),r=n[0],i=n[1];Array.from(N_(i).call(i)).forEach((function(e){t.setPendingRemoteMedia(r,e)})),t.emit(Xy.MediaReconnectStart,r.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.statsUploader.stopUploadUplinkStats(),this.statsUploader.stopUploadDownlinkStats(),this.statsUploader.stopUploadTransportStats(),Zv.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasPendingRemoteMedia",value:function(e,t){var n,r=s(this.pendingRemoteTracks);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.user,a=i.kind;if((e instanceof tI?e.uid:e)===o.uid&&t===a)return!0}}catch(c){r.e(c)}finally{r.f()}return!1}},{key:"setPendingRemoteMedia",value:function(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}},{key:"restartICE",value:function(e){var t=this;return sk(c().mark((function n(){var r,i,o,a,s,u;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.connection&&t.state===Jy.Connected&&!(t.connection instanceof eC)){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,ck(t.mutex.lock("From P2PChannel.restartICE"));case 4:return r=n.sent,n.prev=5,n.next=8,ck(t.connection.restartICE(e));case 8:return i=n.sent,n.next=11,ck(i.next());case 11:if(!(o=n.sent).done){n.next=14;break}return n.abrupt("return");case 14:return a=o.value,n.next=17,a;case 17:s=n.sent,n.t0=(t.reportPCDisconnectedOrFailed(e),e),n.next=n.t0===Ky.TCP?21:n.t0===Ky.RELAY?23:25;break;case 21:return t._pcStatsUploadType=Yy.TCP_RESTART,n.abrupt("break",26);case 23:return t._pcStatsUploadType=Yy.RELAY_RESTART,n.abrupt("break",26);case 25:t._pcStatsUploadType=Yy.OLD_RESTART;case 26:t._isInRestartIce=!0,i.next(s),n.next=32;break;case 29:n.prev=29,n.t1=n.catch(5),null===(u=i)||void 0===u||u.throw(n.t1);case 32:return n.prev=32,r(),n.finish(32);case 35:case"end":return n.stop()}}),n,null,[[5,29,32,35]])})))()}},{key:"getUplinkNetworkQuality",value:function(){if(!this.connection)return 0;var e=this.connection.getStats(),t=this.localTrackMap.get(Zy.LocalVideoTrack),n=this.localTrackMap.get(Zy.LocalAudioTrack),r=e.videoSend.find((function(e){return e.ssrc===(null==t?void 0:t.ssrcs[0].ssrcId)})),i=e.audioSend.find((function(e){return e.ssrc===(null==n?void 0:n.ssrcs[0].ssrcId)}));if(!r||!i)return 1;var o=Rw(this,Xy.NeedSignalRTT),a=r?r.rttMs:void 0,s=i?i.rttMs:void 0,c=a&&s?(a+s)/2:a||s,u=(c&&o?(c+o)/2:c||o)||0,l=100*e.sendPacketLossRate*.7/50+.3*u/1500,d=l<.17?1:l<.36?2:l<.59?3:l<.1?4:5,h=null==t?void 0:t.track;if(h&&h._encoderConfig&&-1===h._hints.indexOf(Cy.SCREEN_TRACK)){var f=h._encoderConfig.bitrateMax,p=e.bitrate.actualEncoded;if(f&&p){var v=(1e3*f-p)/(1e3*f);return mg[v<.15?0:v<.3?1:v<.45?2:v<.6?3:4][d]}}return d}},{key:"getDownlinkNetworkQuality",value:function(){var e=this;if(!this.connection)return 0;var t=this.connection.getStats(),n=0;return Array.from(this.remoteUserMap.entries()).forEach((function(r){var i=a(r,1)[0],o=i._audioSSRC,s=i._videoSSRC,c=t.audioRecv.find((function(e){return e.ssrc===o})),u=t.videoRecv.find((function(e){return e.ssrc===s}));if(c||u){var l=Rw(e,Xy.NeedSignalRTT),d=t.rtt,h=(d&&l?(d+l)/2:d||l)||0,f=c?c.jitterMs:void 0,p=t.recvPacketLossRate,v=.7*p*100/50+.3*h/1500;f&&(v=.6*p*100/50+.2*h/1500+.2*f/400),n+=v<.1?1:v<.17?2:v<.36?3:v<.59?4:5}else n+=1})),this.remoteUserMap.size>0?Math.round(n/this.remoteUserMap.size):n}},{key:"muteLocalTrack",value:function(){var e=u(c().mark((function e(t){var n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Vd((function(e,r){n.handleMuteLocalTrack(t,e,r)})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"filterTobePublishedTracks",value:function(e,t,n){var r=[],i=hb(),o=this.getAllTracks();e=Cw(e=e.filter((function(e){return-1===o.indexOf(e)})));var a,c=!1,u=!1,l=s(e);try{for(l.s();!(a=l.n()).done;){var d=a.value;if(d instanceof $T&&(this.localTrackMap.has(Zy.LocalVideoTrack)||c?new Fv(Pv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:d,type:Zy.LocalVideoTrack}),c=!0),t)){var h=this.getLowVideoTrack(d,n);r.push({track:h,type:Zy.LocalVideoLowTrack})}if(d instanceof zS){var f=this.localTrackMap.get(Zy.LocalAudioTrack);if(f){if(!(f.track instanceof ZS))throw new Fv(Pv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(d._bypassWebAudio)throw new Fv(Pv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");f.track.addAudioTrack(d),this.bindLocalAudioTrackEvents(d,!0)}else if(u){var p=r.find((function(e){return e.type===Zy.LocalAudioTrack}));if(!(p.track instanceof ZS))throw new Fv(Pv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(d._bypassWebAudio)throw new Fv(Pv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");p.track.addAudioTrack(d)}else{if(!i.webAudioMediaStreamDest||d instanceof ZS||d._bypassWebAudio)r.push({track:d,type:Zy.LocalAudioTrack});else{var v=new ZS;v.addAudioTrack(d),r.push({track:v,type:Zy.LocalAudioTrack})}u=!0}}}}catch(g){l.e(g)}finally{l.f()}return r}},{key:"filterTobeUnpublishedTracks",value:function(e){var t=[],n=this.getAllTracks();e=Cw(e=e.filter((function(e){return-1!==n.indexOf(e)})));var r,i=s(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o instanceof zS){var a=this.localTrackMap.get(Zy.LocalAudioTrack);if(!a)continue;a.track instanceof ZS?(a.track.removeAudioTrack(o),this.unbindLocalAudioTrackEvents(o),0===a.track.trackList.length&&(t.push([Zy.LocalAudioTrack,a]),a.track.close())):t.push([Zy.LocalAudioTrack,a])}if(o instanceof $T){var c=this.localTrackMap.get(Zy.LocalVideoTrack);if(!c)continue;t.push([Zy.LocalVideoTrack,c]);var u=this.localTrackMap.get(Zy.LocalVideoLowTrack);u&&t.push([Zy.LocalVideoLowTrack,u])}}}catch(l){i.e(l)}finally{i.f()}return t}},{key:"bindLocalTrackEvents",value:function(e){var t=this;e.forEach((function(e){var n=e.track;switch(e.type){case Zy.LocalVideoTrack:n.addListener(Oy.GET_STATS,t.handleGetLocalVideoStats),n.addListener(Oy.NEED_DISABLE_TRACK,t.handleMuteLocalTrack),n.addListener(Oy.NEED_ENABLE_TRACK,t.handleUnmuteLocalTrack),n.addListener(Oy.NEED_UPDATE_VIDEO_ENCODER,t.handleUpdateVideoEncoder),n.addListener(Oy.SET_OPTIMIZATION_MODE,t.handleSetOptimizationMode),n.addListener(Oy.NEED_REPLACE_TRACK,t.handleReplaceTrack),n.addListener(Oy.NEED_MUTE_TRACK,t.handleMuteLocalTrack),n.addListener(Oy.NEED_UNMUTE_TRACK,t.handleUnmuteLocalTrack);break;case Zy.LocalAudioTrack:t.bindLocalAudioTrackEvents(n);case Zy.LocalVideoLowTrack:}}))}},{key:"bindLocalAudioTrackEvents",value:function(e,t){var n=this;e instanceof ZS?e.trackList.forEach((function(e){e.addListener(Oy.NEED_DISABLE_TRACK,n.handleMuteLocalTrack),e.addListener(Oy.NEED_ENABLE_TRACK,n.handleUnmuteLocalTrack),e.addListener(Oy.GET_STATS,n.handleGetLocalAudioStats),e.addListener(Oy.NEED_MUTE_TRACK,n.handleMuteLocalTrack),e.addListener(Oy.NEED_UNMUTE_TRACK,n.handleUnmuteLocalTrack)})):(e.addListener(Oy.GET_STATS,this.handleGetLocalAudioStats),e.addListener(Oy.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(Oy.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(Oy.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(Oy.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(Oy.NEED_REPLACE_TRACK,this.handleReplaceTrack))}},{key:"unbindLocalTrackEvents",value:function(e){var t=this;e||(e=Array.from(this.localTrackMap.entries()).map((function(e){var t=a(e,2),n=t[0];return{track:t[1].track,type:n}}))),e.forEach((function(e){var n=e.track;switch(e.type){case Zy.LocalVideoTrack:n.off(Oy.GET_STATS,t.handleGetLocalVideoStats),n.off(Oy.NEED_DISABLE_TRACK,t.handleMuteLocalTrack),n.off(Oy.NEED_ENABLE_TRACK,t.handleUnmuteLocalTrack),n.off(Oy.NEED_UPDATE_VIDEO_ENCODER,t.handleUpdateVideoEncoder),n.off(Oy.SET_OPTIMIZATION_MODE,t.handleSetOptimizationMode),n.off(Oy.NEED_REPLACE_TRACK,t.handleReplaceTrack),n.off(Oy.NEED_MUTE_TRACK,t.handleMuteLocalTrack),n.off(Oy.NEED_UNMUTE_TRACK,t.handleUnmuteLocalTrack);break;case Zy.LocalAudioTrack:t.unbindLocalAudioTrackEvents(n);case Zy.LocalVideoLowTrack:}}))}},{key:"unbindLocalAudioTrackEvents",value:function(e){var t=this;e instanceof ZS?e.trackList.forEach((function(e){e.off(Oy.NEED_DISABLE_TRACK,t.handleMuteLocalTrack),e.off(Oy.NEED_ENABLE_TRACK,t.handleUnmuteLocalTrack),e.off(Oy.GET_STATS,t.handleGetLocalAudioStats),e.off(Oy.NEED_MUTE_TRACK,t.handleMuteLocalTrack),e.off(Oy.NEED_UNMUTE_TRACK,t.handleUnmuteLocalTrack)})):(e.off(Oy.GET_STATS,this.handleGetLocalAudioStats),e.off(Oy.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(Oy.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(Oy.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(Oy.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(Oy.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}},{key:"bindRemoteTrackEvents",value:function(e,t){var n=this;t instanceof jO&&t.addListener(Oy.GET_STATS,(function(t){t(n.handleGetRemoteVideoStats(e))})),t instanceof DO&&t.addListener(Oy.GET_STATS,(function(t){t(n.handleGetRemoteAudioStats(e))}))}},{key:"unbindRemoteTrackEvents",value:function(e){e&&e.removeAllListeners(Oy.GET_STATS)}},{key:"unbindAllRemoteTrackEvents",value:function(){var e=this;Array.from(this.remoteUserMap.entries()).forEach((function(t){var n=a(t,2),r=n[0],i=n[1];i.has(zy.AUDIO)&&e.unbindRemoteTrackEvents(r._audioTrack),i.has(zy.VIDEO)&&e.unbindRemoteTrackEvents(r._videoTrack)}))}},{key:"createGatewayPublishMessage",value:function(e,t){var n=this;return e.map((function(e,r){var i,o,a=e.track;switch(e.type){case Zy.LocalAudioTrack:i=Ty.Audio,o={dtx:a instanceof KS&&a._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case Zy.LocalVideoTrack:i=a._hints.includes(Cy.SCREEN_TRACK)?Ty.Screen:Ty.High,o=rC(rC({},cw(a)),{},{codec:n.store.codec});break;case Zy.LocalVideoLowTrack:i=Ty.Low,o=rC(rC({},cw(a)),{},{codec:n.store.codec})}return{stream_type:i,attributes:o,ssrcs:t[r]}}))}},{key:"createGatewayUnpublishMessage",value:function(e){return e.map((function(e){var t,n=a(e,2),r=n[0],i=n[1],o=i.track,s=i.ssrcs,c=i.id;switch(r){case Zy.LocalVideoTrack:t=o._hints.includes(Cy.SCREEN_TRACK)?Ty.Screen:Ty.High;break;case Zy.LocalAudioTrack:t=Ty.Audio;break;case Zy.LocalVideoLowTrack:t=Ty.Low}return{stream_type:t,ssrcs:s,mid:c}}))}},{key:"assignLocalTracks",value:function(e,t){var n=this;e.forEach((function(e,r){var i=e.track,o=e.type;n.localTrackMap.set(o,{track:i,id:t[r].id,ssrcs:t[r].localSSRC})}))}},{key:"withdrawLocalTracks",value:function(e){var t=this;e.forEach((function(e){var n=a(e,1)[0];t.localTrackMap.delete(n)}))}},{key:"bindConnectionEvents",value:function(e){var t=this;e.onConnectionStateChange=function(){var n=u(c().mark((function n(r){var i,o,a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Zv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(r,")")),t.emit(Xy.PeerConnectionStateChange,r),"connected"!==r||t.store.keyMetrics.peerConnectionEnd||t.store.peerConnectionEnd(),"connected"===r&&(t._restartTimer&&(clearTimeout(t._restartTimer),t._restartTimer=void 0),(t._isFirstConnected||t._isInRestartIce)&&t.reportPCStats(Date.now(),!0,t._pcStatsUploadType),t._isInRestartIce=!1,t._isFirstConnected=!1,t._isStartRestartIce=!1),!lg("NEW_ICE_RESTART")){n.next=9;break}if(!t._restartStates.includes(r)){n.next=7;break}if(!t._isStartRestartIce){n.next=4;break}return n.abrupt("return");case 4:return t._isStartRestartIce=!0,i=function(n){"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(Zv.debug("[".concat(t.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(n)),"CONNECTED"===Rw(t,Xy.QueryClientConnectionState)&&t.emit(Xy.RequestRestartICE,n))},o=function(){"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(t.reportPCStats(Date.now(),!1,t._pcStatsUploadType),Zv.debug("[".concat(t.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout((function(){return t.emit(Xy.P2PLost)}),0),t.iceFailedCount+=1,t.requestReconnect())},a=lg("ICE_RESTART_INTERVAL"),n.abrupt("return",void(t._restartTimer=window.setTimeout((function(){if(lg("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&hb().supportPCSetConfiguration)i(Ky.RELAY),t._restartTimer=window.setTimeout(o,a);else if(ff())i(Ky.UDP),t._restartTimer=window.setTimeout(o,4e3);else{if(i(Ky.TCP),hb().supportPCSetConfiguration)return void(t._restartTimer=window.setTimeout((function(){i(Ky.RELAY),t._restartTimer=window.setTimeout(o,a)}),a));t._restartTimer=window.setTimeout(o,a)}}),800)));case 7:n.next=19;break;case 9:if("disconnected"!==r||"disconnected"!==e.iceConnectionState){n.next=11;break}return n.abrupt("return",(setTimeout((function(){"disconnected"===e.iceConnectionState&&lg("ICE_RESTART")&&"CONNECTED"===Rw(t,Xy.QueryClientConnectionState)&&t.emit(Xy.RequestRestartICE)}),800),void setTimeout((function(){"disconnected"===e.peerConnectionState&&(Zv.debug("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),t.reportPCStats(Date.now(),!1,t._pcStatsUploadType),t._isInRestartIce=!1,setTimeout((function(){return t.emit(Xy.P2PLost)}),0),t.iceFailedCount+=1,t.requestReconnect())}),4e3)));case 11:if(n.t0="failed"===r,!n.t0){n.next=19;break}return Zv.debug("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection state failed, force reconnect")),t.reportPCDisconnectedOrFailed(),setTimeout((function(){return t.emit(Xy.P2PLost)}),0),t.iceFailedCount+=1,n.next=19,t.requestReconnect();case 19:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e.onICEConnectionStateChange=function(e){"connected"!==e||t.store.keyMetrics.iceConnectionEnd||t.store.iceConnectionEnd(),Zv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),Y_.reportApiInvoke(t.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:Pm.TRACER}).onSuccess(),t.emit(Xy.IceConnectionStateChange,e)},e.onICETransportStateChange=function(e){Zv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=function(e){Zv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=function(e){Zv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=function(e){var n,r,i=Array.from(N_(n=t.remoteUserMap).call(n)).find((function(t){return t._audioSSRC===e}));i&&(t.store.subscribe(i.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=i.audioTrack)||void 0===r||r.emit(Ly.FIRST_FRAME_DECODED),Y_.firstRemoteFrame(t.store.sessionId,Cm.FIRST_AUDIO_DECODE,Am.FIRST_AUDIO_DECODE,{peer:i._uintid,subscribeElapse:QS.measureFromSubscribeStart(t.store.clientId,e),subscribeRequestid:e,p2pid:t.store.p2pId}))},e.onFirstAudioReceived=function(e){var n,r=Array.from(N_(n=t.remoteUserMap).call(n)).find((function(t){return t._audioSSRC===e}));r&&Y_.firstRemoteFrame(t.store.sessionId,Cm.FIRST_AUDIO_RECEIVED,Am.FIRST_AUDIO_RECEIVED,{peer:r._uintid,subscribeElapse:QS.measureFromSubscribeStart(t.store.clientId,e),subscribeRequestid:e,p2pid:t.store.p2pId})},e.onFirstVideoDecoded=function(e,n,r){t.reportVideoFirstFrameDecoded(e,n,r)},e.onFirstVideoReceived=function(e){var n,r=Array.from(N_(n=t.remoteUserMap).call(n)).find((function(t){return t._videoSSRC===e}));r&&Y_.firstRemoteFrame(t.store.sessionId,Cm.FIRST_VIDEO_RECEIVED,Am.FIRST_VIDEO_RECEIVED,{peer:r._uintid,subscribeElapse:QS.measureFromSubscribeStart(t.store.clientId,e),subscribeRequestid:e,p2pid:t.store.p2pId})},e.onSelectedLocalCandidateChanged=function(e,n){var r="relay"===e.candidateType,i="relay"===n.candidateType;"unknown"!==n.candidateType&&r===i||t.emit(Xy.ConnectionTypeChange,r),Zv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(pw(n))," -> ").concat(JSON.stringify(pw(e)),")"))},e.onSelectedRemoteCandidateChanged=function(e,n){Zv.info("[".concat(t.store.clientId,"] [p2pId: ").concat(t.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(pw(n))," -> ").concat(JSON.stringify(pw(e)),")"))},e.onFirstVideoDecodedTimeout=function(e){t.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)}}},{key:"unbindConnectionEvents",value:function(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0}},{key:"filterTobeMutedTracks",value:function(e){var t=[];if(-1===this.getAllTracks().indexOf(e))return t;var n=this.localTrackMap.get(Zy.LocalAudioTrack);if(e instanceof zS&&(null==n?void 0:n.track)instanceof ZS)return n.track.isActive||t.push([Zy.LocalAudioTrack,n]),t;var r=Array.from(this.localTrackMap.entries()).find((function(t){var n=a(t,2)[1].track;return e===n}));if(r&&(t.push(r),r[0]===Zy.LocalVideoTrack)){var i=this.localTrackMap.get(Zy.LocalVideoLowTrack);i&&t.push([Zy.LocalVideoLowTrack,i])}return t}},{key:"filterTobeUnmutedTracks",value:function(e){var t=[],n=this.localTrackMap.get(Zy.LocalAudioTrack);if(e instanceof zS&&(null==n?void 0:n.track)instanceof ZS)return n.track.isActive&&t.push([Zy.LocalAudioTrack,n]),t;var r=Array.from(this.localTrackMap.entries()).find((function(t){var n=a(t,2)[1].track;return e===n}));if(r)if(r[0]===Zy.LocalVideoTrack){t.push(r);var i=this.localTrackMap.get(Zy.LocalVideoLowTrack);i&&t.push([Zy.LocalVideoLowTrack,i])}else t.push(r);return t}},{key:"createMuteMessage",value:function(e){return e.map((function(e){var t,n=a(e,2),r=n[0],i=n[1],o=i.track,s=i.ssrcs,c=i.id;switch(r){case Zy.LocalAudioTrack:t=Ty.Audio;break;case Zy.LocalVideoTrack:t=o._hints.includes(Cy.SCREEN_TRACK)?Ty.Screen:Ty.High;break;case Zy.LocalVideoLowTrack:t=Ty.Low}return{stream_type:t,ssrcs:s,mid:c}}))}},{key:"createUnmuteMessage",value:function(e){return e.map((function(e){var t,n=a(e,2),r=n[0],i=n[1],o=i.track,s=i.ssrcs,c=i.id;switch(r){case Zy.LocalAudioTrack:t=Ty.Audio;break;case Zy.LocalVideoTrack:t=o._hints.includes(Cy.SCREEN_TRACK)?Ty.Screen:Ty.High;break;case Zy.LocalVideoLowTrack:t=Ty.Low}return{stream_type:t,ssrcs:s,mid:c}}))}},{key:"filterTobeUnSubscribedTracks",value:function(e,t){var n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){var i=r.get(t);if(!i)return n;n.push([e,{kind:t,id:i}])}else Array.from(r.entries()).forEach((function(t){var r=a(t,2),i=r[0],o=r[1];n.push([e,{kind:i,id:o}])}));return n}},{key:"createUnsubscribeMessage",value:function(e){var t=[];return e.forEach((function(e){var n=a(e,2),r=n[0],i=n[1],o=i.kind;switch(i.id,o){case zy.VIDEO:return void(r._videoSSRC&&t.push({stream_type:zy.VIDEO,ssrcId:r._videoSSRC}));case zy.AUDIO:return void(r._audioSSRC&&t.push({stream_type:zy.AUDIO,ssrcId:r._audioSSRC}))}})),t}},{key:"createUnsubscribeAllMessage",value:function(e){var t=new Map;return e.forEach((function(e){var n=a(e,2),r=n[0],i=n[1].kind;if(t.has(r)){var o=t.get(r);i===zy.VIDEO?o|=Ry.Video:o|=Ry.Audio,t.set(r,o)}else i===zy.VIDEO?t.set(r,Ry.Video):t.set(r,Ry.Audio)})),{users:Array.from(t.entries()).map((function(e){var t=a(e,2),n=t[0],r=t[1];return{stream_id:n.uid,stream_type:r}}))}}},{key:"withdrawRemoteTracks",value:function(e){var t=this;e.forEach((function(e){var n=a(e,2),r=n[0],i=n[1].kind,o=t.remoteUserMap.get(r);o&&(o.delete(i),0===Array.from(o.entries()).length&&t.remoteUserMap.delete(r))}))}},{key:"updateBitrateLimit",value:function(){var e=u(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.localTrackMap.get(Zy.LocalVideoTrack),r=this.localTrackMap.get(Zy.LocalVideoLowTrack),e.t0=n,!e.t0){e.next=5;break}return e.next=5,n.track.setBitrateLimit(t.uplink);case 5:if(e.t1=r&&t.low_stream_uplink,!e.t1){e.next=9;break}return e.next=9,r.track.setBitrateLimit({max_bitrate:t.low_stream_uplink.bitrate,min_bitrate:t.low_stream_uplink.bitrate||0});case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isP2PDisconnected",value:function(){return!this.connection||"connected"!==this.connection.peerConnectionState}},{key:"mapPubResToRemoteConfig",value:function(e,t){return e.map((function(e,n){var r,i=e.stream_type;return null===(r=t.find((function(e){var t=e.stream_type;return i===t})))||void 0===r?void 0:r.attributes}))}},{key:"tryToUnmuteAudio",value:function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.length)){e.next=15;break}if(!(t[n]instanceof zS)){e.next=12;break}if(0!==(i=this.filterTobeUnmutedTracks(t[n])).length){e.next=6;break}return e.abrupt("continue",12);case 6:return e.next=8,null===(r=this.connection)||void 0===r?void 0:r.unmuteLocal(i.map((function(e){return a(e,2)[1].id})));case 8:return o=this.createUnmuteMessage(i),e.next=11,Iw(this,Xy.RequestUnmuteLocal,o);case 11:return e.abrupt("return",void e.sent);case 12:n++,e.next=1;break;case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"bindStatsUploaderEvents",value:function(){var e=this;this.statsUploader.requestStats=function(){return e.getStats()},this.statsUploader.requestLocalMedia=function(){return Array.from(e.localTrackMap.entries())},this.statsUploader.requestRemoteMedia=function(){return Array.from(e.remoteUserMap.entries())},this.statsUploader.requestVideoIsReady=function(t){var n;return!(null===(n=e.connection)||void 0===n||!n.getRemoteVideoIsReady(t))},this.statsUploader.requestUpload=function(t,n){return e.emit(Xy.RequestUploadStats,t,n)},this.statsUploader.requestAllTracks=function(){return e.getAllTracks()}}},{key:"unbindStatsUploaderEvents",value:function(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}},{key:"requestReconnect",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dtlsFailedCount+=1,e.next=3,yw(Gv(this.dtlsFailedCount,Bv));case 3:this.emit(Xy.RequestReconnect);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reconnectP2P",value:function(){var e=u(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Array.from(this.localTrackMap.entries()),n=this.createGatewayUnpublishMessage(t),Array.from(this.remoteUserMap.entries()),e.t0=n.length>0,!e.t0){e.next=6;break}return e.next=6,Tw(this,Xy.RequestUnpublishForReconnectPC,n);case 6:this.disconnectForReconnect(),this.emit(Xy.RequestReconnectPC);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"canPublishLowStream",value:function(){return this.localTrackMap.has(Zy.LocalVideoTrack)||this.pendingLocalTracks.some((function(e){return e instanceof $T}))}},{key:"throwIfTrackTypeNotMatch",value:function(e){if(e.filter((function(e){return e instanceof $T})).length>1)throw new Fv(Pv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((function(e){return e instanceof zS})).length>1&&(e.some((function(e){return e instanceof zS&&e._bypassWebAudio}))||!hb().webAudioMediaStreamDest))throw new Fv(Pv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r instanceof $T&&this.pendingLocalTracks.some((function(e){return e instanceof $T})))throw new Fv(Pv.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(r instanceof zS&&this.pendingLocalTracks.some((function(e){return e instanceof zS}))&&(!hb().webAudioMediaStreamDest||r._bypassWebAudio||this.pendingLocalTracks.some((function(e){return e instanceof zS&&e._bypassWebAudio}))))throw new Fv(Pv.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}catch(i){n.e(i)}finally{n.f()}}},{key:"getLowVideoTrack",value:function(e,t){var n,r=hb().supportDualStreamEncoding,i=rC(rC({},{width:160,height:120,framerate:15,bitrate:50}),t);n=r?e._mediaStreamTrack.clone():OO(e,i);var o=_w(8,"track-low-"),a=new $T(n,rC(rC({},r&&{scaleResolutionDownBy:fw(i,e)}),{},{frameRate:i.framerate,bitrateMax:i.bitrate,bitrateMin:i.bitrate}),void 0,void 0,o);return a.on(Dy.TRANSCEIVER_UPDATED,(function(t){e._updateRtpTransceiver(t,Ay.LOW_STREAM)})),a._hints.push(Cy.LOW_STREAM),e.addListener(Oy.NEED_CLOSE,(function(){a.close()})),a}},{key:"globalLock",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.mutex.lock("From P2PChannel.globalLock"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"reportPCStats",value:function(){var e=u(c().mark((function e(t,n,r){var i,o,a,s,u,l,d,h,f,p,v,g,m,y=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=y.length>3&&void 0!==y[3]?y[3]:null,!(this.connection&&this.connection instanceof RO)){e.next=13;break}return l=this.store.keyMetrics.descriptionStart||0,d=this.connection,h=d.iceConnectionState,f=d.dtlsTransportState,p=d.peerConnectionState,e.next=9,this.connection.getSelectedCandidatePair();case 9:v=e.sent,g=v.local,m=v.remote,Y_.pcStats(this.store.sessionId,{startTime:l,eventElapse:t-l||0,iceconnectionsate:h,dtlsstate:f,connectionstate:p,intSucc:n?1:2,error:i,selectedLocalCandidateProtocol:null!==(o=null==g?void 0:g.protocol)&&void 0!==o?o:"",selectedLocalCandidateType:null!==(a=g.candidateType)&&void 0!==a?a:"",selectedLocalCandidateAddress:"".concat(g.address,":").concat(g.port),selectedRemoteCandidateProtocol:null!==(s=m.protocol)&&void 0!==s?s:"",selectedRemoteCandidateType:null!==(u=m.candidateType)&&void 0!==u?u:"",selectedRemoteCandidateAddress:"".concat(m.address,":").concat(m.port),restartCnt:r});case 13:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"reportVideoFirstFrameDecoded",value:function(e,t,n,r){var i,o=Array.from(N_(i=this.remoteUserMap).call(i)).find((function(t){return t._videoSSRC===e}));if(o){r||this.store.subscribe(o.uid,"video",void 0,void 0,void 0,void 0,Date.now());var a=this.store.keyMetrics,s=a.subscribe.find((function(e){return e.userId===o.uid&&"video"===e.type}));Y_.firstRemoteVideoDecode(this.store.sessionId,Cm.FIRST_VIDEO_DECODE,Am.FIRST_VIDEO_DECODE,{peer:o._uintid,videowidth:t,videoheight:n,subscribeElapse:QS.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:a.requestAPEnd||0,apStart:a.requestAPStart||0,joinGwEnd:a.joinGatewayEnd||0,joinGwStart:a.joinGatewayStart||0,pcEnd:a.peerConnectionEnd||0,pcStart:a.peerConnectionStart||0,subscriberEnd:(null==s?void 0:s.subscribeEnd)||0,subscriberStart:(null==s?void 0:s.subscribeStart)||0,videoAddNotify:(null==s?void 0:s.streamAdded)||0,state:r?1:0})}}},{key:"remoteMediaSsrcChanged",value:function(){var e=u(c().mark((function e(t,n,r){var i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connection){e.next=2;break}return e.abrupt("return",!1);case 2:if(i=this.remoteUserMap.get(t)){e.next=5;break}return e.abrupt("return",!1);case 5:if(o=i.get(n)){e.next=8;break}return e.abrupt("return",!1);case 8:return e.next=10,this.connection.getRemoteSSRC(o);case 10:return a=e.sent,e.abrupt("return",void 0!==a&&a!==r);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"resetConnection",value:function(e){Zv.debug("[".concat(this.store.clientId,"] [P2PChannel] reset connection to ").concat(e)),this.state===Jy.Connected?(Zv.debug("[".concat(this.store.clientId,"] [P2PChannel] fallback to websocket but P2PChannel state still connected, disconnect first")),this.disconnectForReconnect()):(this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=e===ky.datachannel?new eC({},this.store):this.isPlanB?new oO({},this.store):new RO({},this.store),this.bindConnectionEvents(this.connection)))}},{key:"unbindRtpTransceiver",value:function(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((function(e){var t=a(e,2),n=t[0],r=t[1].track;n===Zy.LocalVideoLowTrack?r._updateRtpTransceiver(void 0,Ay.LOW_STREAM):r._updateRtpTransceiver(void 0)}))}},{key:"reportPCDisconnectedOrFailed",value:function(e){this.connection&&this.connection instanceof RO&&("disconnected"!==this.connection.iceConnectionState&&"checking"!==this.connection.iceConnectionState&&"failed"!==this.connection.iceConnectionState||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===Yy.TCP_RESTART&&e===Ky.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,Yy.DISCONNECTED_OR_FAILED)))}}]),n}(Uv)).prototype,"startP2PConnection",[cC],Object.getOwnPropertyDescriptor($O.prototype,"startP2PConnection"),$O.prototype),x_($O.prototype,"connect",[cC],Object.getOwnPropertyDescriptor($O.prototype,"connect"),$O.prototype),x_($O.prototype,"preConnect",[cC],Object.getOwnPropertyDescriptor($O.prototype,"preConnect"),$O.prototype),x_($O.prototype,"unpublish",[cC],Object.getOwnPropertyDescriptor($O.prototype,"unpublish"),$O.prototype),x_($O.prototype,"unpublishLowStream",[cC],Object.getOwnPropertyDescriptor($O.prototype,"unpublishLowStream"),$O.prototype),x_($O.prototype,"subscribe",[cC],Object.getOwnPropertyDescriptor($O.prototype,"subscribe"),$O.prototype),x_($O.prototype,"massSubscribe",[cC],Object.getOwnPropertyDescriptor($O.prototype,"massSubscribe"),$O.prototype),x_($O.prototype,"unsubscribe",[cC],Object.getOwnPropertyDescriptor($O.prototype,"unsubscribe"),$O.prototype),x_($O.prototype,"massUnsubscribe",[cC],Object.getOwnPropertyDescriptor($O.prototype,"massUnsubscribe"),$O.prototype),x_($O.prototype,"muteRemote",[cC],Object.getOwnPropertyDescriptor($O.prototype,"muteRemote"),$O.prototype),x_($O.prototype,"unmuteRemote",[cC],Object.getOwnPropertyDescriptor($O.prototype,"unmuteRemote"),$O.prototype),x_($O.prototype,"hasRemoteMediaWithLock",[cC],Object.getOwnPropertyDescriptor($O.prototype,"hasRemoteMediaWithLock"),$O.prototype),x_($O.prototype,"disconnectForReconnect",[cC],Object.getOwnPropertyDescriptor($O.prototype,"disconnectForReconnect"),$O.prototype),x_($O.prototype,"updateBitrateLimit",[cC],Object.getOwnPropertyDescriptor($O.prototype,"updateBitrateLimit"),$O.prototype),x_($O.prototype,"remoteMediaSsrcChanged",[cC],Object.getOwnPropertyDescriptor($O.prototype,"remoteMediaSsrcChanged"),$O.prototype),$O);function cC(e,t,n){var r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=u(c().mark((function e(){var n,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mutex,e.next=3,n.lock("From P2PChannel.".concat(t));case 3:for(i=e.sent,e.prev=4,o=u.length,a=new Array(o),s=0;s<o;s++)a[s]=u[s];return e.next=8,r.apply(this,a);case 8:return e.abrupt("return",e.sent);case 9:return e.prev=9,i(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[4,,9,12]])}))),n}function uC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uC(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_DATACHANNEL="SET_USE_DATACHANNEL"}(aC||(aC={}));var dC,hC=function(){function e(t,n,r,i){p(this,e),Lf(this,"state",void 0),this.state={codec:t,audioCodec:n,mode:r,clientId:i,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useDataChannel:!1}}return v(e,[{key:"dispatch",value:function(e){this.state=function(e,t){switch(t.type){case aC.SET_SESSION_ID:return lC(lC({},e),{},{sessionId:t.sessionId});case aC.SET_P2P_ID:return lC(lC({},e),{},{p2pId:t.p2pId});case aC.SET_UID:return lC(lC({},e),{},{uid:t.uid});case aC.SET_PUB_ID:return lC(lC({},e),{},{pubId:t.pubId});case aC.KEY_METRIC_CLIENT_CREATED:return lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{clientCreated:t.metric})});case aC.KEY_METRIC_JOIN_START:return lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{joinStart:t.metric})});case aC.AVOID_JOIN_START:return lC(lC({},e),{},{avoidJoinStart:t.avoidJoinStart});case aC.KEY_METRIC_JOIN_END:return lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{joinEnd:t.metric})});case aC.KEY_METRIC_REQUEST_AP_START:return lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{requestAPStart:t.metric})});case aC.KEY_METRIC_REQUEST_AP_END:return lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{requestAPEnd:t.metric})});case aC.KEY_METRIC_JOIN_GATEWAY_START:return lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{joinGatewayStart:t.metric})});case aC.KEY_METRIC_JOIN_GATEWAY_END:return lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{joinGatewayEnd:t.metric})});case aC.KEY_METRIC_PEER_CONNECTION_START:return lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{peerConnectionStart:t.metric})});case aC.KEY_METRIC_PEER_CONNECTION_END:return lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{peerConnectionEnd:t.metric})});case aC.KEY_METRIC_DESCRIPTION_START:return lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{descriptionStart:t.metric})});case aC.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{signalChannelOpen:t.metric})});case aC.KEY_METRIC_ICE_CONNECTION_END:return lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{iceConnectionEnd:t.metric})});case aC.KEY_METRIC_PUBLISH:var n=e.keyMetrics.publish,r=n.findIndex((function(e){return e.trackId===t.metric.trackId}));return-1!==r?(n[r]=lC(lC({},n[r]),t.metric),lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{publish:g(n)})})):lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{publish:[].concat(g(e.keyMetrics.publish),[t.metric])})});case aC.KEY_METRIC_SUBSCRIBE:var i=e.keyMetrics.subscribe,o=i.findIndex((function(e){return e.userId===t.metric.userId&&e.type===t.metric.type}));return-1!==o?(i[o]=lC(lC({},i[o]),t.metric),lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{subscribe:g(i)})})):lC(lC({},e),{},{keyMetrics:lC(lC({},e.keyMetrics),{},{subscribe:[].concat(g(e.keyMetrics.subscribe),[t.metric])})});case aC.SET_CLOUD_PROXY_SERVER_MODE:return e.cloudProxyServerMode=t.mode,e;case aC.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof t.index?e.joinChannelServiceRecords=[].concat(g(e.joinChannelServiceRecords),[t.record]):(e.joinChannelServiceRecords[t.index]=lC(lC({},e.joinChannelServiceRecords[t.index]),t.record),e.joinChannelServiceRecords=g(e.joinChannelServiceRecords)),e;case aC.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return e.joinChannelServiceRecords=[],e;case aC.RESET_KEY_METRICS:return e.keyMetrics={publish:[],subscribe:[]},e;case aC.SET_USE_DATACHANNEL:return lC(lC({},e),{},{useDataChannel:t.val});default:return e}}(this.state,e)}},{key:"sessionId",get:function(){return this.state.sessionId},set:function(e){this.dispatch({type:aC.SET_SESSION_ID,sessionId:e})}},{key:"codec",get:function(){return this.state.codec}},{key:"audioCodec",get:function(){return this.state.audioCodec}},{key:"clientId",get:function(){return this.state.clientId}},{key:"p2pId",get:function(){return this.state.p2pId},set:function(e){this.dispatch({type:aC.SET_P2P_ID,p2pId:e})}},{key:"dcId",get:function(){return this.state.dcId},set:function(e){this.dispatch({type:aC.SET_DC_ID,dcId:e})}},{key:"uid",get:function(){return this.state.uid},set:function(e){this.dispatch({type:aC.SET_UID,uid:e})}},{key:"pubId",get:function(){return this.state.pubId},set:function(e){this.dispatch({type:aC.SET_PUB_ID,pubId:e})}},{key:"cloudProxyServerMode",get:function(){return this.state.cloudProxyServerMode},set:function(e){this.dispatch({type:aC.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}},{key:"useDataChannel",get:function(){return this.state.useDataChannel},set:function(e){this.dispatch({type:aC.SET_USE_DATACHANNEL,val:e})}},{key:"clientCreated",value:function(){this.dispatch({type:aC.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}},{key:"joinStart",value:function(){this.dispatch({type:aC.KEY_METRIC_JOIN_START,metric:Date.now()})}},{key:"joinEnd",value:function(){this.dispatch({type:aC.KEY_METRIC_JOIN_END,metric:Date.now()})}},{key:"requestAPStart",value:function(){this.dispatch({type:aC.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}},{key:"requestAPEnd",value:function(){this.dispatch({type:aC.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}},{key:"joinGatewayStart",value:function(){this.dispatch({type:aC.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}},{key:"joinGatewayEnd",value:function(){this.dispatch({type:aC.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}},{key:"peerConnectionStart",value:function(){this.dispatch({type:aC.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}},{key:"peerConnectionEnd",value:function(){this.dispatch({type:aC.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}},{key:"descriptionStart",value:function(){this.dispatch({type:aC.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}},{key:"signalChannelOpen",value:function(){this.dispatch({type:aC.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}},{key:"iceConnectionEnd",value:function(){this.dispatch({type:aC.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}},{key:"publish",value:function(e,t,n,r){this.dispatch({type:aC.KEY_METRIC_PUBLISH,metric:lC(lC({trackId:e,type:t},n&&{publishStart:n}),r&&{publishEnd:r})})}},{key:"subscribe",value:function(e,t,n,r,i,o,a){this.dispatch({type:aC.KEY_METRIC_SUBSCRIBE,metric:lC(lC(lC(lC(lC({userId:e,type:t},n&&{subscribeStart:n}),r&&{subscribeEnd:r}),i&&{firstFrame:i}),o&&{streamAdded:o}),a&&{firstDecoded:a})})}},{key:"massSubscribe",value:function(e,t,n,r){var i=this;e.forEach((function(e){i.dispatch({type:aC.KEY_METRIC_SUBSCRIBE,metric:lC(lC(lC({userId:e.userId,type:e.type},t&&{subscribeStart:t}),n&&{subscribeEnd:n}),r&&{firstFrame:r})})}))}},{key:"keyMetrics",get:function(){return this.state.keyMetrics}},{key:"recordJoinChannelService",value:function(e,t){"gateway"===e.service&&Array.isArray(e.urls)&&(e.urls=e.urls.map((function(e){return e.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2")})));try{return"number"!=typeof t?(this.dispatch({type:aC.RECORD_JOIN_CHANNEL_SERVICE,record:lC(lC({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:aC.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch(e){return 0}}},{key:"resetJoinChannelServiceRecords",value:function(){this.dispatch({type:aC.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}},{key:"resetKeyMetrics",value:function(){this.dispatch({type:aC.RESET_KEY_METRICS})}},{key:"joinChannelServiceRecords",get:function(){try{return this.state.joinChannelServiceRecords}catch(E){return[]}}},{key:"avoidJoinStart",get:function(){return this.state.avoidJoinStart},set:function(e){this.dispatch({type:aC.AVOID_JOIN_START,avoidJoinStart:e})}}]),e}(),fC=function(){return"HTTPS"===(dC||dC||(dC=(window.location.protocol.split(":")[0]||"").toUpperCase()))},pC=function(){return void 0!==window.isSecureContext};function vC(e){var t=IC();return function(e,t){var n=e.appId;void 0!==n&&(FC(t,10),jC(t,n));var r=e.cid;void 0!==r&&(FC(t,16),FC(t,r));var i=e.cname;void 0!==i&&(FC(t,26),jC(t,i));var o=e.deviceId;void 0!==o&&(FC(t,34),jC(t,o));var a=e.elapse;void 0!==a&&(FC(t,40),BC(t,a));var c=e.fileSize;void 0!==c&&(FC(t,48),BC(t,xC(c)));var u=e.height;void 0!==u&&(FC(t,56),BC(t,xC(u)));var l=e.jpg;void 0!==l&&(FC(t,66),FC(t,l.length),function(e,t){var n=CC(e,t.length);e.bytes.set(t,n)}(t,l));var d=e.networkType;void 0!==d&&(FC(t,72),BC(t,xC(d)));var h=e.osType;void 0!==h&&(FC(t,80),BC(t,xC(h)));var f=e.requestId;void 0!==f&&(FC(t,90),jC(t,f));var p=e.sdkVersion;void 0!==p&&(FC(t,98),jC(t,p));var v=e.sequence;void 0!==v&&(FC(t,104),BC(t,xC(v)));var g=e.sid;void 0!==g&&(FC(t,114),jC(t,g));var m=e.timestamp;void 0!==m&&(FC(t,120),BC(t,m));var y=e.uid;void 0!==y&&(FC(t,128),FC(t,y));var b=e.vid;void 0!==b&&(FC(t,136),FC(t,b));var _=e.width;void 0!==_&&(FC(t,144),BC(t,xC(_)));var E=e.service;void 0!==E&&(FC(t,152),FC(t,E));var S=e.callbackData;void 0!==S&&(FC(t,162),jC(t,S));var w=e.jpgEncryption;void 0!==w&&(FC(t,168),FC(t,w));var x=e.requestType;void 0!==x&&(FC(t,176),FC(t,x));var T=e.scorePorn;void 0!==T&&(FC(t,185),UC(t,T));var I=e.scoreSexy;void 0!==I&&(FC(t,193),UC(t,I));var R=e.scoreNeutral;void 0!==R&&(FC(t,201),UC(t,R));var k=e.scene;void 0!==k&&(FC(t,208),FC(t,k));var O=e.ossFilePrefix;void 0!==O&&(FC(t,218),jC(t,O));var C=e.serviceVendor;if(void 0!==C){var A,N=s(C);try{for(N.s();!(A=N.n()).done;){var j=A.value;FC(t,226);var D=IC();yC(j,D),FC(t,D.limit),DC(t,D),RC(D)}}catch(P){N.e(P)}finally{N.f()}}}(e,t),function(e){var t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function gC(e){return function(e){var t={};e:for(;!OC(e);){var n=VC(e);switch(n>>>3){case 0:break e;case 1:t.code=VC(e);break;case 2:t.msg=NC(e,VC(e));break;case 3:var r=bC(e);t.data=mC(e),e.limit=r;break;default:_C(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function mC(e){var t={};e:for(;!OC(e);){var n=VC(e);switch(n>>>3){case 0:break e;case 1:t.requestId=NC(e,VC(e));break;case 2:t.requestType=VC(e)>>>0;break;case 3:t.scorePorn=MC(e);break;case 4:t.scoreSexy=MC(e);break;case 5:t.scoreNeutral=MC(e);break;case 6:t.requestScene=VC(e)>>>0;break;case 7:t.scene=VC(e)>>>0;break;default:_C(e,7&n)}}return t}function yC(e,t){var n=e.service;void 0!==n&&(FC(t,8),FC(t,n));var r=e.vendor;void 0!==r&&(FC(t,16),FC(t,r));var i=e.token;void 0!==i&&(FC(t,26),jC(t,i));var o=e.callbackUrl;void 0!==o&&(FC(t,34),jC(t,o))}function bC(e){var t=VC(e),n=e.limit;return e.limit=e.offset+t,n}function _C(e,t){switch(t){case 0:for(;128&PC(e););break;case 2:kC(e,VC(e));break;case 5:kC(e,4);break;case 1:kC(e,8);break;default:throw new Error("Unimplemented type: "+t)}}var EC=new Float32Array(1);new Uint8Array(EC.buffer);var SC=new Float64Array(1),wC=new Uint8Array(SC.buffer);function xC(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}var TC=[];function IC(){var e=TC.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function RC(e){TC.push(e)}function kC(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function OC(e){return e.offset>=e.limit}function CC(e,t){var n=e.bytes,r=e.offset,i=e.limit,o=r+t;if(o>n.length){var a=new Uint8Array(2*o);a.set(n),e.bytes=a}return e.offset=o,o>i&&(e.limit=o),r}function AC(e,t){var n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function NC(e,t){for(var n=AC(e,t),r=String.fromCharCode,i=e.bytes,o="\ufffd",a="",s=0;s<t;s++){var c=void 0,u=void 0,l=void 0,d=void 0,h=i[s+n];0==(128&h)?a+=r(h):192==(224&h)?s+1>=t||128!=(192&(c=i[s+n+1]))||(d=(31&h)<<6|63&c)<128?a+=o:(a+=r(d),s++):224==(240&h)?s+2>=t||32896!=(49344&((c=i[s+n+1])|(u=i[s+n+2])<<8))||(d=(15&h)<<12|(63&c)<<6|63&u)<2048||d>=55296&&d<=57343?a+=o:(a+=r(d),s+=2):240==(248&h)?s+3>=t||8421504!=(12632256&((c=i[s+n+1])|(u=i[s+n+2])<<8|(l=i[s+n+3])<<16))||(d=(7&h)<<18|(63&c)<<12|(63&u)<<6|63&l)<65536||d>1114111?a+=o:(a+=r(55296+((d-=65536)>>10),56320+(1023&d)),s+=3):a+=o}return a}function jC(e,t){for(var n=t.length,r=0,i=0;i<n;i++){var o=t.charCodeAt(i);o>=55296&&o<=56319&&i+1<n&&(o=(o<<10)+t.charCodeAt(++i)-56613888),r+=o<128?1:o<2048?2:o<65536?3:4}FC(e,r);for(var a=CC(e,r),s=e.bytes,c=0;c<n;c++){var u=t.charCodeAt(c);u>=55296&&u<=56319&&c+1<n&&(u=(u<<10)+t.charCodeAt(++c)-56613888),u<128?s[a++]=u:(u<2048?s[a++]=u>>6&31|192:(u<65536?s[a++]=u>>12&15|224:(s[a++]=u>>18&7|240,s[a++]=u>>12&63|128),s[a++]=u>>6&63|128),s[a++]=63&u|128)}}function DC(e,t){for(var n=CC(e,t.limit),r=e.bytes,i=t.bytes,o=0,a=t.limit;o<a;o++)r[o+n]=i[o]}function PC(e){return e.bytes[AC(e,1)]}function LC(e,t){var n=CC(e,1);e.bytes[n]=t}function MC(e){var t=AC(e,8),n=e.bytes;return wC[0]=n[t++],wC[1]=n[t++],wC[2]=n[t++],wC[3]=n[t++],wC[4]=n[t++],wC[5]=n[t++],wC[6]=n[t++],wC[7]=n[t++],SC[0]}function UC(e,t){var n=CC(e,8),r=e.bytes;SC[0]=t,r[n++]=wC[0],r[n++]=wC[1],r[n++]=wC[2],r[n++]=wC[3],r[n++]=wC[4],r[n++]=wC[5],r[n++]=wC[6],r[n++]=wC[7]}function VC(e){var t,n=0,r=0;do{t=PC(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function FC(e,t){for(t>>>=0;t>=128;)LC(e,127&t|128),t>>>=7;LC(e,t)}function BC(e,t){var n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,i=t.high>>>24,o=0===i?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10,a=CC(e,o),s=e.bytes;switch(o){case 10:s[a+9]=i>>>7&1;case 9:s[a+8]=9!==o?128|i:127&i;case 8:s[a+7]=8!==o?r>>>21|128:r>>>21&127;case 7:s[a+6]=7!==o?r>>>14|128:r>>>14&127;case 6:s[a+5]=6!==o?r>>>7|128:r>>>7&127;case 5:s[a+4]=5!==o?128|r:127&r;case 4:s[a+3]=4!==o?n>>>21|128:n>>>21&127;case 3:s[a+2]=3!==o?n>>>14|128:n>>>14&127;case 2:s[a+1]=2!==o?n>>>7|128:n>>>7&127;case 1:s[a]=1!==o?128|n:127&n}}var GC=function(){var e=u(c().mark((function e(t,n,r){var i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.slice(n,n+2),16));return Uint8Array.from(t)}(function(e){var t="0123456789abcdef";function n(e){var n,r="";for(n=0;n<=3;n++)r+=t.charAt(e>>8*n+4&15)+t.charAt(e>>8*n&15);return r}function r(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,i,o,a){return r(function(e,t){return e<<t|e>>>32-t}(r(r(t,e),r(i,a)),o),n)}function o(e,t,n,r,o,a,s){return i(t&n|~t&r,e,t,o,a,s)}function a(e,t,n,r,o,a,s){return i(t&r|n&~r,e,t,o,a,s)}function s(e,t,n,r,o,a,s){return i(t^n^r,e,t,o,a,s)}function c(e,t,n,r,o,a,s){return i(n^(t|~r),e,t,o,a,s)}var u,l,d,h,f,p=function(e){var t,n=1+(e.length+8>>6),r=new Array(16*n);for(t=0;t<16*n;t++)r[t]=0;for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<t%4*8;return r[t>>2]|=128<<t%4*8,r[16*n-2]=8*e.length,r}(e),v=1732584193,g=-271733879,m=-1732584194,y=271733878;for(u=0;u<p.length;u+=16)l=v,d=g,h=m,f=y,v=o(v,g,m,y,p[u+0],7,-680876936),y=o(y,v,g,m,p[u+1],12,-389564586),m=o(m,y,v,g,p[u+2],17,606105819),g=o(g,m,y,v,p[u+3],22,-1044525330),v=o(v,g,m,y,p[u+4],7,-176418897),y=o(y,v,g,m,p[u+5],12,1200080426),m=o(m,y,v,g,p[u+6],17,-1473231341),g=o(g,m,y,v,p[u+7],22,-45705983),v=o(v,g,m,y,p[u+8],7,1770035416),y=o(y,v,g,m,p[u+9],12,-1958414417),m=o(m,y,v,g,p[u+10],17,-42063),g=o(g,m,y,v,p[u+11],22,-1990404162),v=o(v,g,m,y,p[u+12],7,1804603682),y=o(y,v,g,m,p[u+13],12,-40341101),m=o(m,y,v,g,p[u+14],17,-1502002290),v=a(v,g=o(g,m,y,v,p[u+15],22,1236535329),m,y,p[u+1],5,-165796510),y=a(y,v,g,m,p[u+6],9,-1069501632),m=a(m,y,v,g,p[u+11],14,643717713),g=a(g,m,y,v,p[u+0],20,-373897302),v=a(v,g,m,y,p[u+5],5,-701558691),y=a(y,v,g,m,p[u+10],9,38016083),m=a(m,y,v,g,p[u+15],14,-660478335),g=a(g,m,y,v,p[u+4],20,-405537848),v=a(v,g,m,y,p[u+9],5,568446438),y=a(y,v,g,m,p[u+14],9,-1019803690),m=a(m,y,v,g,p[u+3],14,-187363961),g=a(g,m,y,v,p[u+8],20,1163531501),v=a(v,g,m,y,p[u+13],5,-1444681467),y=a(y,v,g,m,p[u+2],9,-51403784),m=a(m,y,v,g,p[u+7],14,1735328473),v=s(v,g=a(g,m,y,v,p[u+12],20,-1926607734),m,y,p[u+5],4,-378558),y=s(y,v,g,m,p[u+8],11,-2022574463),m=s(m,y,v,g,p[u+11],16,1839030562),g=s(g,m,y,v,p[u+14],23,-35309556),v=s(v,g,m,y,p[u+1],4,-1530992060),y=s(y,v,g,m,p[u+4],11,1272893353),m=s(m,y,v,g,p[u+7],16,-155497632),g=s(g,m,y,v,p[u+10],23,-1094730640),v=s(v,g,m,y,p[u+13],4,681279174),y=s(y,v,g,m,p[u+0],11,-358537222),m=s(m,y,v,g,p[u+3],16,-722521979),g=s(g,m,y,v,p[u+6],23,76029189),v=s(v,g,m,y,p[u+9],4,-640364487),y=s(y,v,g,m,p[u+12],11,-421815835),m=s(m,y,v,g,p[u+15],16,530742520),v=c(v,g=s(g,m,y,v,p[u+2],23,-995338651),m,y,p[u+0],6,-198630844),y=c(y,v,g,m,p[u+7],10,1126891415),m=c(m,y,v,g,p[u+14],15,-1416354905),g=c(g,m,y,v,p[u+5],21,-57434055),v=c(v,g,m,y,p[u+12],6,1700485571),y=c(y,v,g,m,p[u+3],10,-1894986606),m=c(m,y,v,g,p[u+10],15,-1051523),g=c(g,m,y,v,p[u+1],21,-2054922799),v=c(v,g,m,y,p[u+8],6,1873313359),y=c(y,v,g,m,p[u+15],10,-30611744),m=c(m,y,v,g,p[u+6],15,-1560198380),g=c(g,m,y,v,p[u+13],21,1309151649),v=c(v,g,m,y,p[u+4],6,-145523070),y=c(y,v,g,m,p[u+11],10,-1120210379),m=c(m,y,v,g,p[u+2],15,718787259),g=c(g,m,y,v,p[u+9],21,-343485551),v=r(v,l),g=r(g,d),m=r(m,h),y=r(y,f);return n(v)+n(g)+n(m)+n(y)}(""+n+r)).slice(0,16),o=i.slice(0,12),e.next=4,window.crypto.subtle.importKey("raw",i,"AES-GCM",!0,["encrypt"]);case 4:return a=e.sent,e.t0=Uint8Array,e.next=8,window.crypto.subtle.encrypt({name:"AES-GCM",iv:o},a,t);case 8:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function qC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var WC,HC,zC,KC,YC,ZC,JC,XC,QC,$C,eA,tA,nA,rA,iA,oA,aA,sA,cA,uA,lA,dA,hA,fA,pA,vA,gA,mA,yA,bA,_A,EA,SA,wA,xA,TA,IA,RA,kA,OA=new Map([["moderation",1],["supervise",2]]),CA=function(e){h(n,e);var t=f(n);function n(e){var r;return p(this,n),r=t.call(this),Lf(l(r),"name","AgoraRTCVideoContentInspect"),Lf(l(r),"_connectionState",nb.CONNECTING),Lf(l(r),"_innerConnectionState",void 0),Lf(l(r),"sequence",0),Lf(l(r),"inspectStartTime",void 0),Lf(l(r),"workerManagerConnection",void 0),Lf(l(r),"workerConnection",void 0),Lf(l(r),"workerMessageLengthLimit",void 0),Lf(l(r),"inspectIntervalMinimum",void 0),Lf(l(r),"qualityRatio",void 0),Lf(l(r),"_connectInfo",void 0),Lf(l(r),"_cancelTokenSource",Lv.CancelToken.source()),Lf(l(r),"_retryConfig",void 0),Lf(l(r),"wmSequence",0),Lf(l(r),"inspectInterval",void 0),Lf(l(r),"inspectTimer",null),Lf(l(r),"ossFilePrefix",void 0),Lf(l(r),"extraInfo",void 0),Lf(l(r),"_inspectType",void 0),Lf(l(r),"_inspectMode",void 0),Lf(l(r),"_quality",1),Lf(l(r),"qualityTimer",null),Lf(l(r),"_inspectId",void 0),Lf(l(r),"_needWorkUrlOnly",!1),Lf(l(r),"inspectImage",(function(){if(r.connectionState!==nb.CONNECTED)throw new Fv(Pv.OPERATION_ABORTED,"content inspect service connection status is ".concat(r.connectionState));r.inspectTimer&&(window.clearInterval(r.inspectTimer),r.inspectTimer=null),r.inspectTimer=window.setInterval((function(){r.connectionState===nb.CONNECTED?r.requestToInspectImage():Zv.debug("[".concat(r._inspectId,"] Inspect State is not connected , "),r.connectionState)}),r.inspectInterval<r.inspectIntervalMinimum?r.inspectIntervalMinimum:r.inspectInterval),r.requestToInspectImage()})),r._inspectId=_w(5,"inspect-"),r.workerMessageLengthLimit=lg("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),r.inspectIntervalMinimum=lg("VIDEO_INSPECT_INTERVAL_MINIMUM"),r.qualityRatio=lg("VIDEO_INSPECT_QUALITY_RATIO"),r.inspectInterval=e.interval,r.ossFilePrefix=e.ossFilePrefix,r.extraInfo=e.extraInfo,r.inspectType=e.inspectType,r.inspectStartTime=Number(Date.now()),r.workerManagerConnection=new zw("worker-manager-"+r._inspectId,Bv),r.on(ib.STATE_CHANGE,(function(e,t){r._innerConnectionState=e,Zv.debug("[".concat(r._inspectId,"] Inspect operation :").concat(rb[e]," ").concat(t||""))})),r.handleWorkerManagerEvents(),r.workerConnection=new zw("worker-"+r._inspectId,Bv),r.handleWorkerEvents(),r}return v(n,[{key:"connectionState",get:function(){return this._connectionState},set:function(e){if(this._connectionState!==e){var t=this._connectionState;this._connectionState=e,this.emit(ib.CONNECTION_STATE_CHANGE,t,e)}}},{key:"inspectType",get:function(){return this._inspectType},set:function(e){var t;this._inspectMode=yr(t=e.map((function(e){return OA.get(e)||0}))).call(t,(function(e,t){return e+t})),this._inspectType=e}},{key:"quality",get:function(){return this._quality},set:function(e){var t=this;this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout((function(){t.quality=t._quality/t.qualityRatio}),6e4))}},{key:"init",value:function(){var e=u(c().mark((function e(t,n){var r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.emit(ib.STATE_CHANGE,rb.CONNECT_AP),this._connectInfo=t,r=this._cancelTokenSource.token,e.abrupt("return",(this._retryConfig=n,new Vd((function(e,o){i.on(ib.CONNECTION_STATE_CHANGE,(function(t,n){n===nb.CONNECTED&&e()})),i.requestAP(t,r,n).then((function(e){i.connectWorkerManager(e)})).catch((function(e){o(e)}))}))));case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"requestAP",value:function(){var e=u(c().mark((function e(t,n,r){var i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lg("WEBCS_DOMAIN").map((function(e){return"https://".concat(e,"/api/v1")})),e.next=3,function(e,t,n,r){var i=t.appId,o=t.areaCode,a=t.cname,s=t.sid,l=t.token,d=t.uid;kx++;var h,f,p="image_moderation_api",v={service_name:p,json_body:JSON.stringify({appId:i,areaCode:o,cname:a,command:"allocateEdge",requestId:kx,seq:kx,sid:s,token:l,ts:Date.now(),uid:d+""})},g=e[0];return qv(u(c().mark((function e(){var t,r,i,o,a,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=Date.now(),e.next=3,P_(g,{data:v,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});case 3:if(t=e.sent,f=Date.now()-h,0===t.code){e.next=7;break}throw r=new Fv(Pv.UNEXPECTED_RESPONSE,"image inspect ap error, code"+t.code,{retry:!0,responseTime:f}),Zv.error(r.toString()),r;case 7:if(200===(i=JSON.parse(t.json_body)).code){e.next=11;break}throw o=new Fv(Pv.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(i.code,", reason: ").concat(i.reason),{code:i.code,responseTime:f}),Zv.error(o.toString()),o;case 11:if(i.servers&&Array.isArray(i.servers)&&0!==i.servers.length){e.next=14;break}throw a=new Fv(Pv.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:i.code,responseTime:f}),Zv.error(a.toString()),a;case 14:return s=lg("VIDEO_INSPECT_WORKER_MANAGER_HOST"),u=lg("VIDEO_INSPECT_WORKER_MANAGER_PORT"),e.abrupt("return",{addressList:i.servers.map((function(e){var t=e.address,n=e.wss;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(s,":").concat(u||n)})).filter((function(e){return!!e})),workerToken:i.workerToken,vid:i.vid,responseTime:f});case 16:case"end":return e.stop()}}),e)}))),(function(t,n){return Y_.apworkerEvent(s,{success:!0,sc:200,serviceName:p,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:f,serverIp:e[n%e.length]}),!1}),(function(t,n){return Y_.apworkerEvent(s,{success:!1,sc:t.data&&t.data.code||200,serviceName:p,responseTime:f,serverIp:e[n%e.length]}),!!(t.code!==Pv.OPERATION_ABORTED&&t.code!==Pv.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(g=e[(n+1)%e.length],!0)}),r)}(i,t,n,r);case 3:return o=e.sent,this.emit(ib.STATE_CHANGE,rb.AP_CONNECTED),a=o.addressList,e.abrupt("return",(this.wmSequence++,a));case 7:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"connectWorkerManager",value:function(){var e=u(c().mark((function e(t){var n,r=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],this._needWorkUrlOnly=n,this.emit(ib.STATE_CHANGE,rb.CONNECT_WORKER_MANAGER),e.next=5,this.workerManagerConnection.init(t,1e4);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"connectWorker",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.workerConnection.init([t]);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleWorkerManagerEvents",value:function(){var e=this;this.workerManagerConnection.on(ay.CONNECTED,u(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.emit(ib.STATE_CHANGE,rb.WORKER_MANAGER_CONNECTED,e.workerManagerConnection.url),e.workerManagerConnection.sendMessage({appId:e._connectInfo.appId,cname:e._connectInfo.cname,uid:e._connectInfo.uid+"",sdkVersion:"4.18.0",sid:e._connectInfo.sid,seq:e.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0);case 1:case"end":return t.stop()}}),t)})))),this.workerManagerConnection.on(ay.CLOSED,(function(){e._innerConnectionState<rb.GET_WORKER_MANAGER_RESPONSE&&Zv.debug("[".concat(e._inspectId,"] Inspect worker manager is closed before connecting worker"))})),this.workerManagerConnection.on(ay.FAILED,(function(){e._innerConnectionState<rb.GET_WORKER_MANAGER_RESPONSE&&Zv.debug("[".concat(e._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))})),this.workerManagerConnection.on(ay.RECONNECTING,(function(){e._innerConnectionState<rb.GET_WORKER_MANAGER_RESPONSE&&Zv.debug("[".concat(e._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))})),this.workerManagerConnection.on(ay.ON_MESSAGE,function(){var t=u(c().mark((function t(n){var r,i,o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.emit(ib.STATE_CHANGE,rb.GET_WORKER_MANAGER_RESPONSE),r=e.workerManagerConnection.url,e.workerManagerConnection.close(),200===(i=JSON.parse(n.data)).code){t.next=6;break}throw Zv.error("[".concat(e._inspectId,"] Unexpected code ").concat(i.code," from worker manager")),new Fv(Pv.UNEXPECTED_RESPONSE,"response code of worker is unexpected",i);case 6:if(i.serverResponse&&i.serverResponse.portWss&&r){t.next=8;break}throw Zv.error("[".concat(e._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(i))),new Fv(Pv.UNEXPECTED_RESPONSE,"response content of worker is unexpected",i);case 8:if(o=lg("VIDEO_INSPECT_WORKER_PORT")||i.serverResponse.portWss,a=r.replace(/:\d+\/?$/,":".concat(o)),e.emit(ib.STATE_CHANGE,rb.CONNECT_WORKER,a),!e._needWorkUrlOnly){t.next=14;break}e.emit(ib.REQUEST_NEW_WORKER_URL,a),t.next=16;break;case 14:return t.next=16,e.connectWorker(a);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.workerManagerConnection.on(ay.WILL_RECONNECT,(function(e,t){t(e)})),this.workerManagerConnection.on(ay.REQUEST_NEW_URLS,(function(t,n){e.requestAP(e._connectInfo,e._cancelTokenSource.token,e._retryConfig).then(t).catch(n)}))}},{key:"handleWorkerEvents",value:function(){var e=this;this.workerConnection.on(ay.CONNECTED,u(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.emit(ib.STATE_CHANGE,rb.WORKER_CONNECTED,e.workerConnection.url),e.connectionState=nb.CONNECTED;case 1:case"end":return t.stop()}}),t)})))),this.workerConnection.on(ay.ON_MESSAGE,function(){var t=u(c().mark((function t(n){var r,i,o,a,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.data instanceof ArrayBuffer)){t.next=11;break}if(r=gC(new Uint8Array(n.data)),lg("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&Zv.debug("[".concat(e._inspectId,"] Response message for worker of inspect content "),JSON.stringify(r)),200!==r.code){t.next=8;break}if(!Array.isArray(e.inspectType)||1!==e.inspectType.length||"supervise"!==e.inspectType[0]){t.next=5;break}return t.abrupt("return",void e.emit(ib.INSPECT_RESULT,void 0,void 0));case 5:r.data&&r.data.scorePorn&&r.data.scoreSexy&&r.data.scoreNeutral?(o={porn:r.data.scorePorn,sexy:r.data.scoreSexy,neutral:r.data.scoreNeutral},a=yr(i=Object.keys(o)).call(i,(function(e,t){return o[e]>o[t]?e:t}),"porn"),s=Object.keys(o).find((function(e){return e===a})),e.emit(ib.INSPECT_RESULT,s)):e.emit(ib.INSPECT_RESULT,void 0,new Fv(Pv.UNEXPECTED_RESPONSE,r.code+"","There is an unexpected data on message")),t.next=9;break;case 8:e.emit(ib.INSPECT_RESULT,void 0,new Fv(Pv.UNEXPECTED_RESPONSE,r.code+"",r.msg));case 9:t.next=12;break;case 11:Zv.error("[".concat(e._inspectId,"] Unexpected message type from worker")),e.emit(ib.INSPECT_RESULT,void 0,new Fv(Pv.UNEXPECTED_RESPONSE,"invalid worker message type"));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.workerConnection.on(ay.CLOSED,(function(){e.connectionState=nb.CLOSED})),this.workerConnection.on(ay.FAILED,(function(){e.connectionState=nb.CLOSED})),this.workerConnection.on(ay.RECONNECTING,(function(){e.connectionState=e.connectionState===nb.CONNECTED?nb.RECONNECTING:nb.CONNECTING})),this.workerConnection.on(ay.WILL_RECONNECT,(function(e,t){"recover"===e&&t(e),t("tryNext")})),this.workerConnection.on(ay.REQUEST_NEW_URLS,(function(t,n){e.workerManagerConnection.close(),e.once(ib.REQUEST_NEW_WORKER_URL,(function(e){t([e])})),e.requestAP(e._connectInfo,e._cancelTokenSource.token,e._retryConfig).then((function(t){e.connectWorkerManager(t,!0)})).catch((function(e){n(e)}))}))}},{key:"requestToInspectImage",value:function(){var e=u(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sequence++,t=Rw(this,ib.CLIENT_LOCAL_VIDEO_TRACK),n={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid},!t){e.next=11;break}if(t.isPlaying){e.next=5;break}return e.abrupt("return",void this.emit(ib.INSPECT_RESULT,void 0,new Fv(Pv.INVALID_OPERATION,"Only the track being played can be inspected")));case 5:return e.next=7,this.generateRequestData(t,n);case 7:r=e.sent,this.workerConnection.sendMessage(r,!0,!0),e.next=12;break;case 11:this.emit(ib.INSPECT_RESULT,void 0,new Fv(Pv.INVALID_OPERATION,"Only the track being published can be inspected"));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"generateRequestData",value:function(){var e=u(c().mark((function e(t,r){var i,o,a,s,l,d,h,f,p,v,g,m,y,b;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.appId,o=r.cname,a=r.cid,s=r.vid,l=r.sid,d=r.uid,h=Date.now(),e.next=4,t.getCurrentFrameImage("image/jpeg",this.quality);case 4:return f=e.sent,e.next=7,function(){var e=u(c().mark((function e(t,n,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GC(t.buffer,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(f,i,o);case 7:if(p=e.sent,v=this.sequence+"-"+a+"-"+d+"-"+h+"-"+_w(12,""),g={appId:i,cid:a,cname:o,deviceId:"",elapse:n.intToLong(Number(h-this.inspectStartTime)),fileSize:p.byteLength,jpgEncryption:2,height:f.height,width:f.width,jpg:p,networkType:6,osType:7,requestId:v,sdkVersion:"4.18.0",sequence:this.sequence,sid:l,timestamp:n.intToLong(h),uid:d,vid:s,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix},void 0===this.extraInfo&&delete g.callbackData,void 0===this.ossFilePrefix&&delete g.ossFilePrefix,!((m=vC(g)).byteLength<this.workerMessageLengthLimit)){e.next=15;break}return lg("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&(y=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qC(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},g),delete y.jpg,Zv.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(y))),e.abrupt("return",m);case 15:return b=this.quality*this.qualityRatio,this.quality=b,e.next=19,this.generateRequestData(t,{appId:i,cname:o,cid:a,vid:s,sid:l,uid:d});case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){this._cancelTokenSource.cancel(),this._cancelTokenSource=Lv.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=nb.CLOSED,this.emit(ib.STATE_CHANGE,rb.CLOSED)}}],[{key:"intToLong",value:function(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}}]),n}(Uv);function AA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AA(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jA=(WC=K_(),HC=K_({argsMap:function(e,t){return Array.isArray(t)||(t=[t]),t.map((function(e){return e?Object(e).toString():"null"}))}}),zC=K_({argsMap:function(e,t){return t||(t=[]),Array.isArray(t)||(t=[t]),t.map((function(e){return e.getTrackId()}))}}),KC=K_({argsMap:function(e,t,n){return[t.uid,n]}}),YC=K_({argsMap:function(e,t){return t.map((function(e){var t=e.user,n=e.mediaType;return[null==t?void 0:t.uid,n]}))}}),ZC=K_({argsMap:function(e,t,n){return[t.uid,n]}}),JC=K_({argsMap:function(e,t){return t.map((function(e){var t=e.user,n=e.mediaType;return{uid:null==t?void 0:t.uid,mediaType:n}}))}}),XC=K_(),QC=K_(),$C=K_(),eA=K_(),tA=K_(),nA=K_(),rA=K_(),iA=K_(),oA=K_(),aA=K_(),sA=K_(),cA=K_(),uA=K_(),lA=K_(),dA=K_({argsMap:function(e,t){return[t]}}),hA=K_(),fA=K_(),pA=K_(),vA=K_(),gA=K_(),mA=K_(),yA=K_(),bA=K_(),_A=K_(),EA=K_(),SA=K_({argsMap:function(e,t){return Array.isArray(t)||(t=[t]),[JSON.stringify(t)]}}),wA=K_(),xA=K_(),TA=K_(),IA=K_({reportResult:!0}),RA=K_(),x_((kA=function(e){h(n,e);var t=f(n);function n(e){var i,o;if(p(this,n),i=t.call(this),Lf(l(i),"store",void 0),Lf(l(i),"_uid",void 0),Lf(l(i),"_channelName",void 0),Lf(l(i),"_uintUid",void 0),Lf(l(i),"_users",[]),Lf(l(i),"_codec",void 0),Lf(l(i),"_mode",void 0),Lf(l(i),"_config",void 0),Lf(l(i),"_clientId",void 0),Lf(l(i),"_appId",void 0),Lf(l(i),"_sessionId",null),Lf(l(i),"_key",void 0),Lf(l(i),"_joinInfo",void 0),Lf(l(i),"_gateway",void 0),Lf(l(i),"_statsCollector",void 0),Lf(l(i),"_configDistribute",void 0),Lf(l(i),"_leaveMutex",new Q_("client-leave")),Lf(l(i),"_publishMutex",new Q_("client-publish")),Lf(l(i),"_renewTokenMutex",new Q_("client-renewtoken")),Lf(l(i),"_subscribeMutex",new Q_("client-subscribe")),Lf(l(i),"_encryptionMode","none"),Lf(l(i),"_encryptionSecret",null),Lf(l(i),"_encryptionSalt",null),Lf(l(i),"_proxyServer",void 0),Lf(l(i),"_turnServer",{servers:[],mode:"auto"}),Lf(l(i),"_cloudProxyServerMode","disabled"),Lf(l(i),"_isDualStreamEnabled",!1),Lf(l(i),"_defaultStreamFallbackType",void 0),Lf(l(i),"_lowStreamParameter",void 0),Lf(l(i),"_streamFallbackTypeCacheMap",new Map),Lf(l(i),"_remoteStreamTypeCacheMap",new Map),Lf(l(i),"_axiosCancelSource",Lv.CancelToken.source()),Lf(l(i),"_audioVolumeIndicationInterval",void 0),Lf(l(i),"_networkQualityInterval",void 0),Lf(l(i),"_userOfflineTimeout",void 0),Lf(l(i),"_streamRemovedTimeout",void 0),Lf(l(i),"_injectStreamingClient",void 0),Lf(l(i),"_liveTranscodeStreamingClient",void 0),Lf(l(i),"_liveRawStreamingClient",void 0),Lf(l(i),"_channelMediaRelayClient",void 0),Lf(l(i),"_networkQualitySensitivity","normal"),Lf(l(i),"_p2pChannel",void 0),Lf(l(i),"_useLocalAccessPoint",!1),Lf(l(i),"_setLocalAPVersion",void 0),Lf(l(i),"_joinAndNotLeaveYet",!1),Lf(l(i),"_numberOfJoinCount",0),Lf(l(i),"_remoteDefaultVideoStreamType",void 0),Lf(l(i),"_inspect",void 0),Lf(l(i),"_license",void 0),Lf(l(i),"_handleLocalTrackEnable",(function(e,t,n){i.publish(e,!1).then(t).catch(n)})),Lf(l(i),"_handleLocalTrackDisable",(function(e,t,n){i.unpublish(e).then(t).catch(n)})),Lf(l(i),"_handleUserOnline",(function(e){if(lg("BLOCK_LOCAL_CLIENT")&&_g(e.uid,i.channelName))Zv.debug("[".concat(e.uid,"] will be ignored in local"));else{i.isStringUID&&"string"!=typeof e.uid&&Zv.error("[".concat(i._clientId,"] StringUID is Mixed with UintUID"));var t=i._users.find((function(t){return t.uid===e.uid}));if(t)t._trust_in_room_=!0;else{var n=new tI(e.uid,e.uint_id||e.uid);i._users.push(n),Zv.debug("[".concat(i._clientId,"] user online"),e.uid),i.emit(Hm.USER_JOINED,n)}}})),Lf(l(i),"_handleUserOffline",(function(e){if(!lg("BLOCK_LOCAL_CLIENT")||!_g(e.uid,i.channelName)){var t=i._users.find((function(t){return t.uid===e.uid}));t&&(i._handleRemoveStream(e),Ow(i._users,t),i._remoteStreamTypeCacheMap.delete(t.uid),i._streamFallbackTypeCacheMap.delete(t.uid),Zv.debug("[".concat(i._clientId,"] user offline"),e.uid,"reason:",e.reason),i.emit(Hm.USER_LEAVED,t,e.reason))}})),Lf(l(i),"_handleAddAudioOrVideoStream",(function(e,t,n,r,o,a,s){if(!lg("BLOCK_LOCAL_CLIENT")||!_g(t,i.channelName)){var c=i._users.find((function(e){return e.uid===t}));if(c){Zv.debug("[".concat(i._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),i.store.subscribe(c.uid,e,void 0,void 0,void 0,Date.now());var u="audio"===e?c.hasAudio:c.hasVideo;c._uintid||(c._uintid=o||t),"audio"===e?c._trust_audio_stream_added_state_=!0:c._trust_video_stream_added_state_=!0,"audio"===e?(c._audio_added_=!0,void 0!==n&&(c._audioSSRC=n),void 0!==r&&(c._cname=r),a&&(c._audioOrtc=a)):(c._video_added_=!0,void 0!==n&&(c._videoSSRC=n),void 0!==r&&(c._cname=r),void 0!==s&&(c._rtxSsrcId=s),a&&(c._videoOrtc=a)),("audio"===e?c.hasAudio:c.hasVideo)&&!u&&(Zv.info("[".concat(i._clientId,"] remote user ").concat(c.uid," published ").concat(e)),i.emit(Hm.USER_PUBLISHED,c,e)),"video"===e?Y_.onGatewayStream(i._sessionId,Cm.ON_ADD_VIDEO_STREAM,Am.ON_ADD_VIDEO_STREAM,{peer:o||t}):Y_.onGatewayStream(i._sessionId,Cm.ON_ADD_AUDIO_STREAM,Am.ON_ADD_AUDIO_STREAM,{peer:o||t}),i._p2pChannel.remoteMediaSsrcChanged(c,e,n).then((function(t){if(t)return Zv.debug("[".concat(i._clientId,"] resubscribe ").concat(e," for user ").concat(c.uid," after rejoin because SSRC id changed.")),i._p2pChannel.unsubscribe(c,e,!0).then((function(){return i._subscribe(c,e,!0).catch((function(e){Zv.error("[".concat(i._clientId,"] resubscribe error"),e.toString())}))}))})),i._p2pChannel.hasPendingRemoteMedia(c,e)&&(Zv.debug("[".concat(i._clientId,"] resubscribe ").concat(e," for user ").concat(c.uid," after reconnect.")),i._subscribe(c,e,!0).catch((function(e){Zv.error("[".concat(i._clientId,"] resubscribe error"),e.toString())})))}else Zv.error("[".concat(i._clientId,"] can not find target user!(on_add_stream)"))}})),Lf(l(i),"_handleRemoveStream",(function(e){if(!lg("BLOCK_LOCAL_CLIENT")||!_g(e.uid,i.channelName)){var t=i._users.find((function(t){return t.uid===e.uid}));if(t){Zv.debug("[".concat(i._clientId,"] stream removed with uid ").concat(e.uid));var n=function(){};t.hasAudio&&t.hasVideo?n=function(){Zv.info("[".concat(i._clientId,"] remote user ").concat(t.uid," unpublished audio track")),i.emit(Hm.USER_UNPUBLISHED,t,"audio"),Zv.info("[".concat(i._clientId,"] remote user ").concat(t.uid," unpublished video track")),i.emit(Hm.USER_UNPUBLISHED,t,"video")}:t.hasVideo?n=function(){Zv.info("[".concat(i._clientId,"] remote user ").concat(t.uid," unpublished video track")),i.emit(Hm.USER_UNPUBLISHED,t,"video")}:t.hasAudio&&(n=function(){Zv.info("[".concat(i._clientId,"] remote user ").concat(t.uid," unpublished audio track")),i.emit(Hm.USER_UNPUBLISHED,t,"audio")}),t._trust_audio_stream_added_state_=!0,t._trust_video_stream_added_state_=!0,t._audio_added_=!1,t._video_added_=!1,i._p2pChannel.unsubscribe(t).then((function(e){if(e)return i._gateway.unsubscribe(e,t.uid)})),t._audioSSRC=void 0,t._videoSSRC=void 0,t._audioOrtc=void 0,t._videoOrtc=void 0,t._rtxSsrcId=void 0,Y_.onGatewayStream(i._sessionId,Cm.ON_REMOVE_STREAM,Am.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),n()}else Zv.warning("[".concat(i._clientId,"] can not find target user!(on_remove_stream)"))}})),Lf(l(i),"_handleSetStreamLocalEnable",(function(e,t,n){if(!lg("BLOCK_LOCAL_CLIENT")||!_g(t,i.channelName)){var r=i._users.find((function(e){return e.uid===t}));if(r){Zv.debug("[".concat(i._clientId,"] local ").concat(e," ").concat(n?"enabled":"disabled"," with uid ").concat(t));var o="audio"===e?r.hasAudio:r.hasVideo;if("audio"===e){r._trust_audio_enabled_state_=!0;var a=r._audio_enabled_;if(r._audio_enabled_=n,r._audio_enabled_===a)return;var s=r._audio_enabled_?"enable-local-audio":"disable-local-audio";Zv.debug("[".concat(i._clientId,"] user-info-updated, uid: ").concat(t,", msg: ").concat(s)),i.emit(Hm.USER_INFO_UPDATED,t,s)}else{r._trust_video_enabled_state_=!0;var c=r._video_enabled_;if(r._video_enabled_=n,r._video_enabled_===c)return;var u=r._video_enabled_?"enable-local-video":"disable-local-video";Zv.debug("[".concat(i._clientId,"] user-info-update, uid: ").concat(t,", msg: ").concat(u)),i.emit(Hm.USER_INFO_UPDATED,t,u)}var l="audio"===e?r.hasAudio:r.hasVideo;return o!==l?!o&&l?(Zv.info("[".concat(i._clientId,"] remote user ").concat(t," published ").concat(e)),void i.emit(Hm.USER_PUBLISHED,r,e)):("video"===e&&r._videoTrack&&r._videoTrack._destroy(),"audio"===e&&r._audioTrack,i._p2pChannel.muteRemote(r,e),Zv.info("[".concat(i._clientId,"] remote user ").concat(t," unpublished ").concat(e)),void i.emit(Hm.USER_UNPUBLISHED,r,e)):void 0}Zv.error("[".concat(i._clientId,"] can not find target user!(disable_local)"))}})),Lf(l(i),"_handleMuteStream",(function(e,t,n){if(!lg("BLOCK_LOCAL_CLIENT")||!_g(e,i.channelName)){Zv.debug("[".concat(i._clientId,"] receive mute message"),e,t,n);var r=i._users.find((function(t){return t.uid===e}));if(r){var o="audio"===t?r.hasAudio:r.hasVideo;if("audio"===t){r._trust_audio_mute_state_=!0;var a=r._audio_muted_;if(r._audio_muted_=n,r._audio_muted_===a)return;var s=r._audio_muted_?"mute-audio":"unmute-audio";Zv.debug("[".concat(i._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(s)),i.emit(Hm.USER_INFO_UPDATED,e,s)}else{r._trust_video_mute_state_=!0;var c=r._video_muted_;if(r._video_muted_=n,r._video_muted_===c)return;var u=r._video_muted_?"mute-video":"unmute-video";Zv.debug("[".concat(i._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(u)),i.emit(Hm.USER_INFO_UPDATED,e,u)}var l="audio"===t?r.hasAudio:r.hasVideo;if(o!==l){if(!o&&l)return("audio"===t?r._audioSSRC:r._videoSSRC)?(Zv.info("[".concat(i._clientId,"] remote user ").concat(e," published ").concat(t)),void i.emit(Hm.USER_PUBLISHED,r,t)):void Zv.warning("[".concat(i._clientId,"] remote user ").concat(e," receive ").concat(t," unmute message  before add stream message, ").concat(t," SSRC doesn't exist yet."));"video"===t&&r._videoTrack&&r._videoTrack._destroy(),"audio"===t&&r._audioTrack,i._p2pChannel.muteRemote(r,t),Zv.info("[".concat(i._clientId,"] remote user ").concat(e," unpublished ").concat(t)),i.emit(Hm.USER_UNPUBLISHED,r,t)}}else Zv.warning("[".concat(i._clientId,"] can not find remote user, ignore mute event, uid: ").concat(e))}})),Lf(l(i),"_handleP2PLost",function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zv.debug("[".concat(i._clientId,"] receive p2p lost"),t),parseInt(t.p2pid,10)!==i.store.p2pId){e.next=6;break}return e.next=4,i._p2pChannel.requestReconnect();case 4:e.next=7;break;case 6:Zv.warning("[".concat(i._clientId,"] P2PLost stream not found"),t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Lf(l(i),"_handleTokenWillExpire",(function(){Zv.debug("[".concat(i._clientId,"] received message onTokenPrivilegeWillExpire")),i.emit(Hm.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)})),Lf(l(i),"_handleBeforeUnload",(function(e){"beforeunload"===e.type&&void 0!==e.returnValue&&""!==e.returnValue||(i.leave(),Zv.info("[".concat(i._clientId,"] auto leave onbeforeunload or pagehide")))})),Lf(l(i),"_handleUpdateNetworkQuality",(function(){if("normal"!==i._networkQualitySensitivity)if(!navigator||void 0===navigator.onLine||navigator.onLine){var e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=i._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=i._p2pChannel.getDownlinkNetworkQuality(),i.emit(Hm.NETWORK_QUALITY,e)}else i.emit(Hm.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6})})),i._codec=e.codec,i._mode=e.mode,i._clientId=_w(5,"client-"),i.store=new hC(e.codec,e.audioCodec,e.mode,i._clientId),i.store.clientCreated(),e.proxyServer&&i.setProxyServer(e.proxyServer,!0),e.turnServer&&i.setTurnServer(e.turnServer,!0),Zv.info("[".concat(i._clientId,"] Initializing AgoraRTC client v").concat(Xv," build: ").concat(Jv,", mode: ").concat(i._mode,", codec: ").concat(i._codec)),e.clientRoleOptions)try{oy(e.clientRoleOptions),o=Object.assign({},e.clientRoleOptions)}catch(e){Zv.warning("[".concat(i._clientId,"] ").concat(e.toString()))}return i._statsCollector=new tw(i.store),i._statsCollector.onStatsException=function(e,t,n){Zv.debug("[".concat(i._clientId,"] receive exception msg, code: ").concat(e,", msg: ").concat(t,", uid: ").concat(n)),i.emit(Hm.EXCEPTION,{code:e,msg:t,uid:n})},i._statsCollector.onUploadPublishDuration=function(e,t,n,r){var o=i._users.find((function(t){return t.uid===e}));o&&Y_.peerPublishStatus(i._sessionId,{subscribeElapse:r,audioPublishDuration:t,videoPublishDuration:n,peer:o._uintid})},i.store.useDataChannel=hb().supportDataChannel&&lg("SIGNAL_CHANNEL"),i._gateway=new ax(i.store,{clientId:i._clientId,mode:i._mode,codec:i._codec,websocketRetryConfig:e.websocketRetryConfig||Bv,httpRetryConfig:e.httpRetryConfig||Bv,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:i._statsCollector,role:e.role,clientRoleOptions:o}),i._config=e,i._configDistribute=new Kx,i._p2pChannel=new sC(i.store,i._statsCollector),i._handleP2PChannelEvents(),i._handleGatewayEvents(),i._handleGatewaySignalEvents(),r(i)}return v(n,[{key:"connectionState",get:function(){return this._gateway.state}},{key:"remoteUsers",get:function(){return this._users}},{key:"localTracks",get:function(){return this._p2pChannel.getAllTracks(!0)}},{key:"uid",get:function(){return this._uid}},{key:"channelName",get:function(){return this._channelName}},{key:"isStringUID",get:function(){return!!this._joinInfo&&!!this._joinInfo.stringUid}},{key:"__className__",get:function(){return"Client"}},{key:"join",value:function(){var e=u(c().mark((function e(t,n,r,i,o){var a,s,l,d,h,f,p,v,g,m,y,b,_,E,S,w,x,T,I=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=++this._numberOfJoinCount,this.store.joinStart(),i&&(this.store.uid=i),s=fC(),l=pC()?window.isSecureContext:"Browser Not Support",(pC()||s)&&window.isSecureContext||(d="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser",Zv.warning(d)),h=Ew(),"DISCONNECTED"===this.connectionState&&(this.store.avoidJoinStart=Math.round(Date.now()),Zv.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart))),f=Y_.reportApiInvoke(h,{name:Dm.JOIN,options:[t,n,r,i],states:{isHttps:s,isSecureContext:l},tag:Pm.TRACER}),Y_.setAppId(t),e.prev=8,r||null===r){e.next=11;break}throw new Fv(Pv.INVALID_PARAMS,"Invalid token: ".concat(r,". If you don not use token, set it to null"));case 11:r&&_m(r,"token",1,2047),_m(t,"appid",1,2047),Sm(n),i&&wm(i),o&&_m(o,"optionalInfo",1,2047),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(8),f.onError(e.t0),e.t0;case 17:if(Zv.info("[".concat(this._clientId,"] start join channel ").concat(n,", join number: ").concat(a)),!this._leaveMutex.isLocked){e.next=24;break}return Zv.debug("[".concat(this._clientId,"] join: waiting leave operation")),e.next=21,this._leaveMutex.lock();case 21:e.t1=e.sent,(0,e.t1)(),Zv.debug("[".concat(this._clientId,"] join: continue"));case 24:if(this._joinAndNotLeaveYet=!0,"DISCONNECTED"===this.connectionState){e.next=27;break}throw p=new Fv(Pv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state")),f.onError(p),p;case 27:if(this._sessionId||(this._sessionId=h,this.store.sessionId=this._sessionId),this._gateway.state="CONNECTING",v=NA({clientId:this._clientId,appId:t,sid:this._sessionId,cname:n,uid:"string"!=typeof i?i:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:r||t,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:o,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint},void 0!==this._remoteDefaultVideoStreamType&&{defaultVideoStream:this._remoteDefaultVideoStreamType}),this._useLocalAccessPoint&&(v.setLocalAPVersion=this._setLocalAPVersion),"string"==typeof i&&(v.stringUid=i,this._uintUid?(v.uid=this._uintUid,this._uintUid=void 0):v.uid=0),"none"===this._encryptionMode||!this._encryptionSecret){e.next=37;break}return v.aesmode=this._encryptionMode,e.next=33,function(){var e=u(c().mark((function e(t){var n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pw("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),e.next=3,window.crypto.subtle.importKey("spki",n,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]);case 3:return r=e.sent,i=G_(t),e.next=7,window.crypto.subtle.encrypt({name:"RSA-OAEP"},r,i);case 7:return o=e.sent,e.abrupt("return",Lw(new Uint8Array(o)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this._encryptionSecret);case 33:if(v.aespassword=e.sent,this._joinAndNotLeaveYet){e.next=36;break}throw new Fv(Pv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));case 36:this._encryptionSalt&&(v.aessalt=this._encryptionSalt);case 37:if(this._startSession(this._sessionId,{channel:n,appId:t}),g=this._sessionId,setTimeout((function(){"CONNECTING"===I.connectionState&&g===I._sessionId&&Y_.joinChannelTimeout(I._sessionId,5)}),5e3),e.prev=40,y=v.cloudProxyServer,["proxy3","proxy4","proxy5"].includes(y)&&(b=lg("PROXY_SERVER_TYPE3"),Array.isArray(b)?v.proxyServer=b[0]:v.proxyServer=b),Y_.setProxyServer(v.proxyServer),Zv.setProxyServer(v.proxyServer),this.store.requestAPStart(),!v.stringUid||v.uid){e.next=54;break}return e.next=46,jx(v.stringUid,v,this._axiosCancelSource.token,this._config.httpRetryConfig||Bv,this.store);case 46:return _=e.sent,Zv.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(v.stringUid," => ").concat(_)),v.uid=_,e.next=51,Ax(v,this._axiosCancelSource.token,this._config.httpRetryConfig||Bv,!0,this.store);case 51:m=e.sent,e.next=57;break;case 54:return e.next=56,Ax(v,this._axiosCancelSource.token,this._config.httpRetryConfig||Bv,!0,this.store);case 56:m=e.sent;case 57:if(this._joinAndNotLeaveYet){e.next=59;break}throw new Fv(Pv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));case 59:return this.store.requestAPEnd(),setTimeout((function(){I._configDistribute.startGetConfigDistribute(v,I._axiosCancelSource.token),I._configDistribute.on(Wy.UPDATE_BITRATE_LIMIT,(function(e){I._p2pChannel.updateBitrateLimit(e)}))}),0),this._key=r||t,E=m.gatewayInfo,this._joinInfo=NA(NA({},v),{},{cid:E.cid,uid:v.uid?v.uid:E.uid,vid:E.vid,apResponse:E.res,uni_lbs_ip:E.uni_lbs_ip,gatewayAddrs:E.gatewayAddrs}),e.next=64,this._joinGateway();case 64:if(S=e.sent,this._joinAndNotLeaveYet){e.next=67;break}throw new Fv(Pv.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));case 67:return f.onSuccess(S),this._appId=t,this._channelName=v.cname,this._uid=S,this.store.uid=S,setTimeout((function(){I._networkQualityInterval&&window.clearInterval(I._networkQualityInterval),I._networkQualityInterval=window.setInterval(I._handleUpdateNetworkQuality,2e3),window.addEventListener(hf()?"beforeunload":"pagehide",I._handleBeforeUnload)}),0),w=v.stringUid?"string uid: ".concat(v.stringUid,",uid: ").concat(v.uid):"uid: ".concat(this._uid),e.abrupt("return",(Zv.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(n,",").concat(w)),setTimeout((function(){Zv.startUpload()}),5e3),this.store.joinEnd(),T=this,yg.includes(T)||yg.push(T),S));case 72:throw e.prev=72,e.t2=e.catch(40),x=Array.isArray(e.t2)?e.t2[0]:e.t2,Zv.error("[".concat(this._clientId,"] join number: ").concat(a,", Joining channel failed, rollback"),x),x.code!==Pv.OPERATION_ABORTED&&this._numberOfJoinCount===a&&(this._gateway.state="DISCONNECTED",this._reset()),f.onError(x),x;case 76:case"end":return e.stop()}}),e,this,[[8,14],[40,72]])})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"_joinGateway",value:function(){var e=this;if(!this._joinInfo||!this._key)throw new Fv(Pv.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||this._joinInfo.proxyServer||!lg("JOIN_WITH_FALLBACK_SIGNAL_PROXY"))).then((function(e){return e})).catch((function(t){if(t.code===Pv.INIT_WEBSOCKET_TIMEOUT)return e._gateway.leave(!0,Wm.FALLBACK),t;if(t.code===Pv.INIT_DATACHANNEL_TIMEOUT)return e._gateway.leave(!0,Wm.FALLBACK),t;throw t})).then((function(t){if(t instanceof Fv){if(t.code===Pv.INIT_WEBSOCKET_TIMEOUT){if(Zv.info("[".concat(e._clientId,"] join timeout, fallback to proxy")),!e._joinInfo||!e._key)throw new Fv(Pv.INVALID_OPERATION);e._joinInfo.cloudProxyServer="fallback",e._cloudProxyServerMode="fallback",e.store.cloudProxyServerMode="fallback";var n=lg("PROXY_SERVER_TYPE3");if(Array.isArray(n))if(e._joinInfo.apUrl){var r=/^https?:\/\/(.+?)(\/.*)?$/.exec(e._joinInfo.apUrl)[1].split("."),i=r.slice(r.length-2).join(".");n.forEach((function(t){e._joinInfo&&t.includes(i)&&(e._joinInfo.proxyServer=t)})),e._joinInfo.proxyServer||(e._joinInfo.proxyServer=n[0])}else e._joinInfo.proxyServer=n[0];else e._joinInfo.proxyServer=n;var o=lg("LOG_UPLOAD_SERVER").match(/.+:(\d{1,5})$/);return o&&o[1]&&"443"!==o[1]&&Zv.setProxyServer(e._joinInfo.proxyServer),"443"!==lg("STATS_COLLECTOR_PORT").toString()&&Y_.setProxyServer(e._joinInfo.proxyServer),Y_.reportApiInvoke(e._sessionId,{name:Dm.JOIN_FALLBACK_TO_PROXY,options:[e._joinInfo.proxyServer],tag:Pm.TRACER}).onSuccess(),e.emit(Hm.JOIN_FALLBACK_TO_PROXY,e._joinInfo.proxyServer),lg("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&e._joinInfo.turnServer.servers.forEach((function(e){"forceturn"in e&&(e.forceturn=!0)})),e._gateway.join(e._joinInfo,e._key)}if(Zv.info("[".concat(e._clientId,"] join by datachannel timeout, fallback to websocket")),!e._joinInfo||!e._key)throw new Fv(Pv.INVALID_OPERATION);return Y_.reportApiInvoke(e._sessionId,{name:Dm.DATACHANNEL_FAILBACK,options:[e.store.clientId],tag:Pm.TRACER}).onSuccess(),e._joinGateway()}return t})).then((function(e){return e}))}},{key:"leave",value:function(){var e=u(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zv.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(hf()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(e){var t=yg.indexOf(e);-1!==t&&yg.splice(t,1)}(this),e.next=3,this._leaveMutex.lock();case 3:if(t=e.sent,"DISCONNECTED"!==this.connectionState){e.next=6;break}return e.abrupt("return",(Zv.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void t()));case 6:return e.next=8,this._gateway.leave("CONNECTED"!==this.connectionState);case 8:Zv.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),t();case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"publish",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,u=this,l=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(l.length>1&&void 0!==l[1])||l[1],Array.isArray(t)||(t=[t]),0!==t.length){e.next=3;break}throw new Fv(Pv.INVALID_PARAMS,"track list is empty");case 3:if("audience"!==this._gateway.role){e.next=5;break}throw new Fv(Pv.INVALID_OPERATION,"audience can not publish stream");case 5:r=s(t),e.prev=6,r.s();case 8:if((i=r.n()).done){e.next=16;break}if((o=i.value)instanceof eE){e.next=12;break}throw new Fv(Pv.INVALID_PARAMS,"parameter is not local track");case 12:if(o._enabled||!n){e.next=14;break}throw new Fv(Pv.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(o.getTrackId()));case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:return Zv.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(t.map((function(e){return"".concat(e.getTrackId()," ")})))),e.next=27,this._configDistribute.awaitConfigDistributeComplete();case 27:return n&&t.forEach((function(e){var t=u._configDistribute.getBitrateLimit();e instanceof $T&&t&&e.setBitrateLimit(t.uplink)})),e.next=30,this._publishMutex.lock();case 30:return a=e.sent,e.prev=31,e.next=34,this._publishHighStream(t);case 34:Zv.info("[".concat(this._clientId,"] Publish success, id ").concat(t.map((function(e){return"".concat(e.getTrackId()," ")})))),e.next=40;break;case 37:throw e.prev=37,e.t1=e.catch(31),Zv.error("[".concat(this._clientId,"] publish error"),e.t1.toString()),e.t1;case 40:return e.prev=40,a(),e.finish(40);case 43:case"end":return e.stop()}}),e,this,[[6,18,21,24],[31,37,40,43]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unpublish",value:function(){var e=u(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._joinInfo&&void 0!==this._uid){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");case 2:return t?Array.isArray(t)||(t=[t]):t=this._p2pChannel.getAllTracks(!0),Zv.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map((function(e){return"".concat(e.getTrackId()," ")}))," ")),e.next=5,this._publishMutex.lock();case 5:return n=e.sent,e.prev=6,e.next=9,this._p2pChannel.unpublish(t);case 9:if(r=e.sent,e.t0=r,!e.t0){e.next=14;break}return e.next=14,this._gateway.unpublish(r,this._uid);case 14:Zv.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map((function(e){return"".concat(e.getTrackId())})))),e.next=20;break;case 17:throw e.prev=17,e.t1=e.catch(6),Zv.error("[".concat(this._clientId,"] unpublish error"),e.t1.toString()),e.t1;case 20:return e.prev=20,n&&n(),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[6,17,20,23]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"subscribe",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._subscribe(t,n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_subscribe",value:function(){var e=u(c().mark((function e(t,n,r){var i,o,a,s,u,l,d,h,f,p=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mm(n,"mediaType",["audio","video"]),this._joinInfo){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"Can't subscribe stream, not joined");case 2:if("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState){e.next=4;break}throw new Fv(Pv.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));case 4:if(this._users.find((function(e){return e===t}))){e.next=7;break}throw i=new Fv(Pv.INVALID_REMOTE_USER,"user is not in the channel"),Zv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", this user is not in the channel")),i;case 7:if(t.hasAudio||t.hasVideo){e.next=10;break}throw o=new Fv(Pv.INVALID_REMOTE_USER,"user is not published"),Zv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid,", user is not published")),o;case 10:if(r||("audio"!==n||t.hasAudio&&void 0!==t._audioSSRC)&&("video"!==n||t.hasVideo&&void 0!==t._videoSSRC)){e.next=13;break}throw a=new Fv(Pv.REMOTE_USER_IS_NOT_PUBLISHED),Zv.error("[".concat(this._clientId,"] can not subscribe ").concat(t.uid," with mediaType ").concat(n,", remote track is not published")),a;case 13:return s="audio"===n?t._audioSSRC:t._videoSSRC,u="audio"===n?t._audioOrtc:t._videoOrtc,l="video"===n?t._rtxSsrcId:void 0,d={stream_type:"audio"===n?zy.AUDIO:zy.VIDEO,ssrcId:s},e.next=19,this._subscribeMutex.lock();case 19:return h=e.sent,Zv.info("[".concat(this._clientId,"] subscribe user ").concat(t.uid,", mediaType: ").concat(n)),e.prev=21,e.next=24,this._p2pChannel.hasRemoteMediaWithLock(t,n);case 24:if(!e.sent){e.next=29;break}return e.next=27,this._p2pChannel.unmuteRemote(t,n);case 27:e.next=54;break;case 29:return e.prev=29,QS.markSubscribeStart(this.store.clientId,s),this.store.subscribe(t.uid,n,Date.now()),e.next=34,this._p2pChannel.subscribe(t,n,s,l,u);case 34:return e.prev=34,e.next=37,this._gateway.subscribe(t.uid,d,!0);case 37:e.next=48;break;case 39:if(e.prev=39,e.t0=e.catch(34),(null==e.t0?void 0:e.t0.code)===Pv.WS_ABORT){e.next=45;break}return e.next=44,this._p2pChannel.unsubscribe(t,n);case 44:throw e.t0;case 45:return e.next=47,this._p2pChannel.unsubscribe(t,n,!0);case 47:this._p2pChannel.setPendingRemoteMedia(t,n);case 48:this.store.subscribe(t.uid,n,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,t,n),e.next=54;break;case 51:throw e.prev=51,e.t1=e.catch(29),this._p2pChannel.reportSubscribeEvent(!1,null==e.t1?void 0:e.t1.code,t,n),e.t1;case 54:if(Zv.info("[".concat(this._clientId,"] subscribe success user ").concat(t.uid,", mediaType: ").concat(n)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(t.uid,this._defaultStreamFallbackType).catch((function(e){Zv.warning("[".concat(p._clientId,"] auto set fallback failed"),e)})),f="audio"===n?t._audioTrack:t._videoTrack){e.next=58;break}throw new Fv(Pv.UNEXPECTED_ERROR,"can not find remote track in user object");case 58:return e.abrupt("return",f);case 61:throw e.prev=61,e.t2=e.catch(21),Zv.error("[".concat(this._clientId,"] subscribe user ").concat(t.uid," error"),e.t2),e.t2;case 64:return e.prev=64,h(),e.finish(64);case 67:case"end":return e.stop()}}),e,this,[[21,61,64,67],[29,51],[34,39]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"massSubscribe",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,u,l,d,h,f,p,v,m,y,b,_,E,S,w,x,T,I,R,k,O,C=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Em(t,"subscribeList"),this._joinInfo){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"Can't subscribe stream, not joined");case 2:if("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState){e.next=4;break}throw new Fv(Pv.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));case 4:return n=Date.now(),r=new Map,e.next=8,this._subscribeMutex.lock();case 8:return i=e.sent,Zv.info("[".concat(this._clientId,"]start massSubscribe user ").concat(t.map((function(e){var t=e.user,n=e.mediaType;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; "))),o=(t=g(t)).map((function(e){return{user:e.user,mediaType:e.mediaType}})),e.next=13,this._p2pChannel.globalLock();case 13:u=e.sent,e.prev=14,d=c().mark((function e(){var n,i,a,s,u,l,d,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t[h],i=n.user,mm(a=n.mediaType,"mediaType",["audio","video"]),i){e.next=4;break}throw s=new Fv(Pv.INVALID_PARAMS,"user property does not exist in subscribeList item"),Zv.error("[".concat(C._clientId,"] user property does not exist in subscribeList item")),s;case 4:if(C._users.find((function(e){return e===i}))){e.next=8;break}return u=new Fv(Pv.INVALID_REMOTE_USER,"user is not in the channel"),Zv.error("[".concat(C._clientId,"] can not massSubscribe ").concat(i.uid,", this user is not in the channel")),o[h].error=u,t.splice(h,1),e.abrupt("return","continue");case 8:if(("audio"!==a||i.hasAudio&&void 0!==i._audioSSRC)&&("video"!==a||i.hasVideo&&void 0!==i._videoSSRC)){e.next=12;break}return l=new Fv(Pv.REMOTE_USER_IS_NOT_PUBLISHED),Zv.error("[".concat(C._clientId,"] can not subscribe ").concat(i.uid," with mediaType ").concat(a,", remote user is not published")),o[h].error=l,t.splice(h,1),e.abrupt("return","continue");case 12:if(d=Ry.Video|Ry.LwoVideo,!(f=r.get(i))){e.next=20;break}if(!("video"===a?f&d:f&Ry.Audio)){e.next=17;break}return t.splice(h,1),Zv.warning("[".concat(C._clientId,"] repeat massSubscribe user:").concat(i.uid,", mediaType:").concat(a," twice")),e.abrupt("return","continue");case 17:r.set(i,f|("video"===a?d:Ry.Audio)),e.next=21;break;case 20:r.set(i,"video"===a?d:Ry.Audio);case 21:case"end":return e.stop()}}),e)})),h=t.length-1;case 17:if(!(h>=0)){e.next=25;break}return e.delegateYield(d(),"t0",19);case 19:if("continue"!==e.t0){e.next=22;break}return e.abrupt("continue",22);case 22:h--,e.next=17;break;case 25:f=t.length-1;case 26:if(!(f>=0)){e.next=36;break}if(p=t[f],v=p.user,m=p.mediaType,y=Ry.Video|Ry.LwoVideo,!this._p2pChannel.hasRemoteMedia(v,m)){e.next=33;break}return e.next=31,this._p2pChannel.unmuteRemoteNoLock(v,m);case 31:b=r.get(v),r.set(v,"video"===m?b^y:b^Ry.Audio),t.splice(f,1);case 33:f--,e.next=26;break;case 36:if(this.store.massSubscribe(t.map((function(e){return{userId:e.user.uid,type:e.mediaType}})),n),_=yr(l=Array.from(r.entries())).call(l,(function(e,t){var n=a(t,2),r=n[0],i=n[1];if(0===i)return e;var o={stream_id:r.uid,stream_type:i};return i&Ry.Audio&&(o.audio_ssrc=r._audioSSRC),i&Ry.Video&&(o.video_ssrc=r._videoSSRC),e.push(o),e}),[]),e.prev=38,e.t1=t.length>0,!e.t1){e.next=43;break}return e.next=43,this._p2pChannel.massSubscribeNoLock(t.map((function(e){var t=e.user,n=e.mediaType;return{user:t,mediaType:n,ssrcId:n===zy.VIDEO?t._videoSSRC:t._audioSSRC,rtxSsrcId:n===zy.VIDEO?t._rtxSsrcId:void 0}})));case 43:if(E=new Map,!(_.length>0)){e.next=49;break}return e.next=47,this._gateway.subscribeAll(_,!0);case 47:((null==(S=e.sent)?void 0:S.users)||[]).forEach((function(e){var t=e.stream_id,n=e.video_error_code,r=e.audio_error_code,i=e.error_code;(n||r||i)&&E.set(t,{video_error_code:n,audio_error_code:r,error_code:i})}));case 49:if(!(Array.from(E.entries()).length>0)){e.next=53;break}return w=Array.from(E.entries()).map((function(e){var t,n=a(e,2),r=n[0],i=n[1];return i.error_code||i.video_error_code&&i.audio_error_code?t=void 0:i.video_error_code?t=zy.VIDEO:i.audio_error_code&&(t=zy.AUDIO),{user:C.remoteUsers.find((function(e){return e.uid===r})),mediaType:t}})),e.next=53,this._p2pChannel.massUnsubscribeNoLock(w);case 53:x=s(o);try{for(x.s();!(T=x.n()).done;)I=T.value,(R=E.get(I.user.uid))&&(k=R.error_code||"audio"===I.mediaType&&R.audio_error_code||"video"===I.mediaType&&R.video_error_code)&&(O=Ww(k),Zv.error("user:".concat(I.user.uid," mediaType:").concat(I.mediaType," has massSubscribe error ").concat(O.desc)),I.error=new Fv(Pv.SUBSCRIBE_FAILED,"code ".concat(k,": ").concat(O.desc))),I.error||("video"===I.mediaType?I.track=I.user.videoTrack:I.track=I.user.audioTrack)}catch(A){x.e(A)}finally{x.f()}return e.abrupt("return",(this.store.massSubscribe(o.filter((function(e){return!e.error})).map((function(e){return{userId:e.user.uid,type:e.mediaType}})),void 0,Date.now()),o.forEach((function(e){var t;Y_.subscribe(C.store.sessionId,{succ:!!e.error,ec:(null===(t=e.error)||void 0===t?void 0:t.code)||null,video:e.mediaType===zy.VIDEO,audio:e.mediaType===zy.AUDIO,peerid:e.user.uid,subscribeRequestid:e.mediaType===zy.VIDEO?e.user._videoSSRC:e.user._audioSSRC,p2pid:C.store.p2pId,eventElapse:Math.floor(performance.now()-n)},!0)})),Zv.info("[".concat(this._clientId,"] massSubscribe success ").concat(t.map((function(e){var t=e.user,n=e.mediaType;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; "))),o));case 58:return e.prev=58,e.t2=e.catch(38),e.next=62,this._p2pChannel.massUnsubscribeNoLock(t);case 62:throw e.t2;case 63:return e.prev=63,u(),i(),e.finish(63);case 66:case"end":return e.stop()}}),e,this,[[14,,63,66],[38,58]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unsubscribe",value:function(){var e=u(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&mm(n,"mediaType",["audio","video"]),this._joinInfo){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");case 2:if(this._users.find((function(e){return e===t}))){e.next=5;break}throw r=new Fv(Pv.INVALID_REMOTE_USER,"user is not in the channel"),Zv.error("[".concat(this._clientId,"] can not unsubscribe ").concat(t.uid,", user is not in the channel")),r;case 5:return Zv.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(t.uid,", mediaType: ").concat(n)),e.prev=6,e.next=9,this._p2pChannel.unsubscribe(t,n);case 9:if(i=e.sent,e.t0=i,!e.t0){e.next=14;break}return e.next=14,this._gateway.unsubscribe(i,t.uid);case 14:Zv.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(t.uid,", mediaType: ").concat(n)),e.next=22;break;case 17:if(e.prev=17,e.t1=e.catch(6),e.t1.code!==Pv.DISCONNECT_P2P){e.next=21;break}return e.abrupt("return",void Zv.warning("disconnecting p2p, abort unsubscribe request."));case 21:throw Zv.error("[".concat(this._clientId,"] unsubscribe user ").concat(t.uid," error"),e.t1.toString()),e.t1;case 22:case"end":return e.stop()}}),e,this,[[6,17]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"massUnsubscribe",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Em(t,"unsubscribeList"),this._joinInfo){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");case 2:Zv.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(t.map((function(e){var t=e.user,n=e.mediaType;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join())),t=g(t),n=new Map,r=c().mark((function e(){var r,o,s,u,l,d,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t[i],o=r.user,s=r.mediaType,o){e.next=4;break}throw u=new Fv(Pv.INVALID_PARAMS,"user property does not exist in unsubscribeList item"),Zv.error("[".concat(a._clientId,"] user property does not exist in unsubscribeList item")),u;case 4:if(mm(s,"mediaType",["video","audio",void 0]),a._users.find((function(e){return e===o}))){e.next=8;break}return Zv.warning("[".concat(a._clientId,"] can not unsubscribe ").concat(o.uid,", user is not in the channel")),t.splice(i,1),e.abrupt("return","continue");case 8:if(l=Ry.Video|Ry.LwoVideo,!n.has(o)){e.next=25;break}d=n.get(o),e.t0=s,e.next="video"===e.t0?14:"audio"===e.t0?16:18;break;case 14:return h=d&l,e.abrupt("break",19);case 16:return h=d&Ry.Audio,e.abrupt("break",19);case 18:h=d&(Ry.Audio|l);case 19:if(!h){e.next=22;break}return Zv.warning("[".concat(a._clientId,"] repeat massUnsubscribe user:").concat(o.uid,",mediaType:").concat(s," twice.")),t.splice(i,1),e.abrupt("return","continue");case 22:s?"audio"===s?n.set(o,d|Ry.Audio):"video"===s&&n.set(o,d|l):n.set(o,d|Ry.Audio|l),e.next=26;break;case 25:s?"audio"===s?n.set(o,Ry.Audio):"video"===s&&n.set(o,l):n.set(o,Ry.Audio|l);case 26:case"end":return e.stop()}}),e)})),i=t.length-1;case 6:if(!(i>=0)){e.next=14;break}return e.delegateYield(r(),"t0",8);case 8:if("continue"!==e.t0){e.next=11;break}return e.abrupt("continue",11);case 11:i--,e.next=6;break;case 14:return e.prev=14,e.next=17,this._p2pChannel.massUnsubscribe(t);case 17:if(o=e.sent,e.t1=o,!e.t1){e.next=22;break}return e.next=22,this._gateway.massUnsubscribe(o);case 22:Zv.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(t.map((function(e){var t=e.user,n=e.mediaType;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join())),e.next=30;break;case 25:if(e.prev=25,e.t2=e.catch(14),e.t2.code!==Pv.DISCONNECT_P2P){e.next=29;break}return e.abrupt("return",void Zv.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request.")));case 29:throw Zv.error("[".concat(this._clientId,"] massUnsubscribe error"),e.t2.toString()),e.t2;case 30:case"end":return e.stop()}}),e,this,[[14,25]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setLowStreamParameter",value:function(e){!function(e){if(!e)throw new Fv(Pv.INVALID_PARAMS);xm(e.width)||bm(e.width,"streamParameter.width"),xm(e.height)||bm(e.height,"streamParameter.height"),xm(e.framerate)||bm(e.framerate,"streamParameter.framerate"),xm(e.bitrate)||ym(e.bitrate,"streamParameter.bitrate")}(e),(!e.width&&e.height||e.width&&!e.height)&&Zv.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),Zv.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));var t=this._configDistribute.getLowStreamConfigDistribute();t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e}},{key:"enableDualStream",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hb().supportDualStream){e.next=2;break}throw Y_.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new Fv(Pv.NOT_SUPPORTED,"Your browser is not support dual stream");case 2:if(!this._isDualStreamEnabled){e.next=4;break}throw new Fv(Pv.INVALID_OPERATION,"Dual stream is already enabled");case 4:if(!this._p2pChannel.canPublishLowStream()){e.next=13;break}return e.prev=5,e.next=8,this._publishLowStream();case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(5),Y_.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),e.t0;case 13:this._isDualStreamEnabled=!0,Y_.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),Zv.info("[".concat(this._clientId,"] enable dual stream"));case 14:case"end":return e.stop()}}),e,this,[[5,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"disableDualStream",value:function(){var e=u(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isDualStreamEnabled){e.next=18;break}if(this._joinInfo){e.next=3;break}throw new Fv(Pv.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");case 3:if(!this._p2pChannel.getLocalMedia(Zy.LocalVideoLowTrack)){e.next=17;break}return e.prev=4,e.next=7,this._p2pChannel.unpublishLowStream();case 7:if(t=e.sent,e.t0=t,!e.t0){e.next=12;break}return e.next=12,this._gateway.unpublish(t,this._joinInfo.stringUid||this._joinInfo.uid);case 12:e.next=17;break;case 14:throw e.prev=14,e.t1=e.catch(4),Y_.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),e.t1;case 17:this._isDualStreamEnabled=!1,Y_.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),Zv.info("[".concat(this._clientId,"] disable dual stream"));case 18:case"end":return e.stop()}}),e,this,[[4,14]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"setClientRole",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(function(e){mm(e,"role",["audience","host"])}(t),n&&oy(n),"rtc"!==this._mode){e.next=2;break}throw Zv.warning("[".concat(this._clientId,"]rtc mode can not use setClientRole")),new Fv(Pv.INVALID_OPERATION,"rtc mode can not use setClientRole");case 2:if(!n||!n.level||"host"!==t){e.next=4;break}throw new Fv(Pv.INVALID_OPERATION,"host mode can not set audience latency level");case 4:if("audience"!==t||!this._p2pChannel.hasLocalMedia()){e.next=6;break}throw new Fv(Pv.INVALID_OPERATION,"can not set client role to audience when publishing stream");case 6:return e.next=8,this._gateway.setClientRole(t,n);case 8:Zv.info("[".concat(this._clientId,"] set client role to ").concat(t,", level: ").concat(n&&n.level));case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setProxyServer",value:function(e,t){if(_m(e,"proxyServer"),!t){if("DISCONNECTED"!==this.connectionState)throw new Fv(Pv.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Fv(Pv.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,Y_.setProxyServer(this._proxyServer),Zv.setProxyServer(this._proxyServer),Zv.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}},{key:"setTurnServer",value:function(e,t){if(Array.isArray(e)||(e=[e]),!t){if("DISCONNECTED"!==this.connectionState)throw new Fv(Pv.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new Fv(Pv.INVALID_OPERATION,"You have already set the proxy")}if(ry(e))return this._turnServer={servers:e,mode:"original-manual"},void Zv.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map((function(e){return e.urls})).join(","),"."));e.forEach((function(e){return iy(e)})),this._turnServer={servers:e,mode:"manual"},Zv.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}},{key:"setLicense",value:function(e){if("DISCONNECTED"!==this.connectionState)throw new Fv(Pv.INVALID_OPERATION,"you should set license before join channel");if(_m(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new Fv(Pv.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,Zv.info("[".concat(this._clientId,"] set license success"),e)}},{key:"startProxyServer",value:function(e){if("DISCONNECTED"!==this.connectionState)throw new Fv(Pv.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint)throw new Fv(Pv.INVALID_OPERATION,"You have already set the proxy");var t,n=[3,4,5];switch(void 0===e&&(e=3),e){case 1:case 2:throw new Fv(Pv.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:t="proxy3";break;case 4:t="proxy4";break;case 5:t="proxy5";break;default:throw new Fv(Pv.INVALID_PARAMS,"proxy server mode must be ".concat(n.join("|")))}this._cloudProxyServerMode=t,this.store.cloudProxyServerMode=t,Zv.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}},{key:"stopProxyServer",value:function(){if("DISCONNECTED"!==this.connectionState)throw new Fv(Pv.INVALID_OPERATION,"Stop proxy server after leave channel");Y_.setProxyServer(),Zv.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",Zv.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}},{key:"setLocalAccessPointsV2",value:function(e){if(!e.accessPoints)throw new Fv(Pv.INVALID_PARAMS,"accessPoints is required.");Em(e.accessPoints.serverList,"accessPoints.serverList"),_m(e.accessPoints.domain,"accessPoints.domain");var t=function(e,t){ym(e,t,0,65535,!0)},n=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),n=e.accessPoints.port),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new Fv(Pv.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");lg("CLOSE_AFB_FOR_LOCAL_AP")&&(ug("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),ug("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));var r=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,i=e.accessPoints.domain,o=e.accessPoints.serverList.map((function(e){return r.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(i):e})),a=o.map((function(e){return"".concat(e,":").concat(n)}));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,ug("WEBCS_DOMAIN",a),ug("WEBCS_DOMAIN_BACKUP_LIST",a),ug("GATEWAY_DOMAINS",[i]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(Em(e.report.hostname,"report.hostname"),ug("EVENT_REPORT_DOMAIN",e.report.hostname[0]),ug("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(ug("EVENT_REPORT_DOMAIN",o[0]),ug("EVENT_REPORT_BACKUP_DOMAIN",o[1]||o[0]));var s=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),s=e.report.port),ug("STATS_COLLECTOR_PORT",s),e.report?ug("ENABLE_EVENT_REPORT",!0):ug("ENABLE_EVENT_REPORT",!1);var c="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(Em(e.log.hostname,"log.hostname"),c=e.log.hostname[0]):c=o[0];var u=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),u=e.log.port),ug("LOG_UPLOAD_SERVER","".concat(c,":").concat(u));var l=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(Em(e.cds.hostname,"cds.hostname"),l=e.cds.hostname):l=o;var d=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),d=e.cds.port),ug("CDS_AP",l.map((function(e){return"".concat(e,":").concat(d)}))),e.cds?ug("ENABLE_CONFIG_DISTRIBUTE",!0):ug("ENABLE_CONFIG_DISTRIBUTE",!1),Zv.info("set local access point v2 success")}},{key:"setLocalAccessPoints",value:function(e,t){if(Em(e,"serverList"),_m(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new Fv(Pv.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");var n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map((function(e){return n.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(t):e})),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,ug("WEBCS_DOMAIN",e),ug("WEBCS_DOMAIN_BACKUP_LIST",e),ug("GATEWAY_DOMAINS",[t]),ug("EVENT_REPORT_DOMAIN",e[0]),ug("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),ug("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),Zv.info("[".concat(this._clientId,"] set local access point success"))}},{key:"setRemoteDefaultVideoStreamType",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mm(t,"streamType",[0,1]),this._remoteDefaultVideoStreamType=t,!this._joinInfo){e.next=12;break}return e.prev=1,e.next=4,this._gateway.setDefaultRemoteVideoStreamType(t);case 4:this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),Zv.error("[".concat(this._clientId,"] set default remote video stream type error"),e.t0.toString()),e.t0;case 10:e.next=13;break;case 12:Zv.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(t));case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setRemoteVideoStreamType",value:function(){var e=u(c().mark((function e(t,n){var r=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mm(n,"streamType",[0,1]),e.prev=1,e.next=4,this._gateway.setRemoteVideoStreamType(t,n);case 4:setTimeout((function(){var e=r._users.find((function(e){return e.uid===t}));e&&e.videoTrack&&e.videoTrack.updateMediaStreamTrackResolution()}),2e3),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),Zv.error("[".concat(this._clientId,"] set remote video stream type error"),e.t0.toString()),e.t0;case 10:Zv.info("[".concat(this._clientId,"] set remote ").concat(t," video stream type to ").concat(n)),this._remoteStreamTypeCacheMap.set(t,n);case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setStreamFallbackOption",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mm(n,"fallbackType",[0,1,2]),e.prev=1,e.next=4,this._gateway.setStreamFallbackOption(t,n);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),Zv.error("[".concat(this._clientId,"] set stream fallback option"),e.t0.toString()),e.t0;case 9:Zv.info("[".concat(this._clientId,"] set remote ").concat(t," stream fallback type to ").concat(n)),this._streamFallbackTypeCacheMap.set(t,n);case 10:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setEncryptionConfig",value:function(e,t,n){if(function(e){mm(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"])}(e),_m(t,"secret"),["aes-128-gcm2","aes-256-gcm2"].includes(e)){if(!n||!(n instanceof Uint8Array&&32===n.length))throw new Fv(Pv.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new Fv(Pv.INVALID_PARAMS,"current encrypt mode does not need salt");new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||Zv.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=Lw(n))}},{key:"renewToken",value:function(){var e=u(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_m(t,"token",1,2047),this._key&&this._joinInfo){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"renewToken should not be called before user join");case 2:return n=this._key,this._key=t,this._joinInfo&&(this._joinInfo.token=t),e.next=6,this._renewTokenMutex.lock();case 6:if(r=e.sent,e.prev=7,!lg("USE_NEW_TOKEN")){e.next=18;break}return Zv.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs")),e.next=12,qx(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||Bv);case 12:return i=e.sent,Zv.debug("[".concat(this._clientId,"] get ticket from unilbs success")),e.next=16,this._gateway.renewToken({token:t,ticket:i});case 16:e.next=21;break;case 18:return Zv.debug("[".concat(this._clientId,"] start renew token without ticket")),e.next=21,this._gateway.renewToken({token:t});case 21:Zv.debug("[".concat(this._clientId,"] renewToken success")),e.next=27;break;case 24:throw e.prev=24,e.t0=e.catch(7),this._key=n,this._joinInfo.token=n,Zv.error("[".concat(this._clientId,"] renewToken failed"),e.t0.toString()),e.t0;case 27:return e.prev=27,r(),e.finish(27);case 30:case"end":return e.stop()}}),e,this,[[7,24,27,30]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"enableAudioVolumeIndicator",value:function(){var e=this;this._audioVolumeIndicationInterval?Zv.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval((function(){var t=e._p2pChannel.getAudioLevels();e.emit(Hm.VOLUME_INDICATOR,t)}),lg("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}},{key:"getRTCStats",value:function(){var e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}},{key:"startLiveStreaming",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if("h264"===this._codec){e.next=3;break}throw new Fv(Pv.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");case 3:if(this._p2pChannel.hasLocalMedia()){e.next=5;break}throw new Fv(Pv.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming");case 5:if(!(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(t)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(t))){e.next=7;break}throw new Fv(Pv.LIVE_STREAMING_TASK_CONFLICT);case 7:return r=n?sy.TRANSCODE:sy.RAW,e.abrupt("return",this._createLiveStreamingClient(r).startLiveStreamingTask(t,r));case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setLiveTranscoding",value:function(e){return this._createLiveStreamingClient(sy.TRANSCODE).setTranscodingConfig(e)}},{key:"stopLiveStreaming",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter((function(e){return e&&e.hasUrl(t)}))).length){e.next=3;break}throw new Fv(Pv.INVALID_PARAMS,"can not find live streaming url to stop");case 3:return e.next=5,Vd.all(n.map((function(e){return e&&e.stopLiveStreamingTask(t)})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addInjectStreamUrl",value:function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._joinInfo){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"can not addInjectStreamUrl, no joininfo");case 2:return(r=this._createLiveStreamingClient(sy.INJECT)).setInjectStreamConfig(n,0),e.next=6,r.startLiveStreamingTask(t,sy.INJECT);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"removeInjectStreamUrl",value:function(){var e=u(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._createLiveStreamingClient(sy.INJECT),r=Array.from(qE(t=n.streamingTasks).call(t)).find((function(e){return e.mode===sy.INJECT})),this._joinInfo&&r){e.next=3;break}throw new Fv(Pv.INVALID_OPERATION,"can remove addInjectStreamUrl, no joininfo or inject task");case 3:return e.next=5,n.stopLiveStreamingTask(r.url);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"startChannelMediaRelay",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tT(t),n=this._createChannelMediaRelayClient(),e.next=4,n.startChannelMediaRelay(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateChannelMediaRelay",value:function(){var e=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tT(t),n=this._createChannelMediaRelayClient(),e.next=4,n.updateChannelMediaRelay(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stopChannelMediaRelay",value:function(){var e=u(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._createChannelMediaRelayClient(),e.next=3,t.stopChannelMediaRelay();case 3:this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"sendStreamMessage",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new Fv(Pv.INVALID_OPERATION,"can not send data stream, not joined");if("string"==typeof e&&(e=(new TextEncoder).encode(e)),new Blob([e]).size>1024)throw new Fv(Pv.INVALID_PARAMS,"stream message out of range.");return this._gateway.signal.request(Zm.DATA_STREAM,{payload:Lw(e)},!t)}},{key:"sendMetadata",value:function(e){if(!this._joinInfo)throw new Fv(Pv.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new Fv(Pv.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(Zm.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Lw(e)})}},{key:"sendCustomReportMessage",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)||(t=[t]),t.forEach(Om),this._joinInfo){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"can not send custom report, not joined");case 2:return e.next=4,Y_.sendCustomReportMessage(this._joinInfo.sid,t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getLocalAudioStats",value:function(){return this._statsCollector.getLocalAudioTrackStats()}},{key:"getRemoteAudioStats",value:function(){return this._statsCollector.getRemoteAudioTrackStats()}},{key:"getLocalVideoStats",value:function(){return this._statsCollector.getLocalVideoTrackStats()}},{key:"getRemoteVideoStats",value:function(){return this._statsCollector.getRemoteVideoTrackStats()}},{key:"getRemoteNetworkQuality",value:function(){return this._statsCollector.getRemoteNetworkQualityStats()}},{key:"pickSVCLayer",value:function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mm(n.spatialLayer,"spatialLayer",[0,1,2,3]),mm(n.temporalLayer,"temporalLayer",[0,1,2,3]),e.prev=1,e.next=4,this._gateway.pickSVCLayer(t,n);case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),Zv.error("[".concat(this._clientId,"] pick SVC layer failed"),e.t0.toString()),e.t0;case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_reset",value:function(){if(Zv.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=Lv.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._users.forEach((function(e){e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy()})),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new Q_("client-publish"),this._subscribeMutex=new Q_("client-subscribe"),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._injectStreamingClient&&(this._injectStreamingClient.terminate(),this._injectStreamingClient.removeAllListeners(),this._injectStreamingClient=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch(E){}}},{key:"_startSession",value:function(e,t){var n=e||Ew();e?Zv.debug("[".concat(this._clientId,"] new Session ").concat(n)):Zv.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(n)),this._sessionId=n,this.store.sessionId=n,t?Y_.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:t.channel,appid:t.appId,mode:this._mode}):this._joinInfo?Y_.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._joinInfo.cname,appid:this._joinInfo.appId,mode:this._mode}):this._gateway.joinInfo&&Y_.sessionInit(this._sessionId,{lts:(new Date).getTime(),cname:this._gateway.joinInfo.cname,appid:this._gateway.joinInfo.appId,mode:this._mode}),this._joinInfo&&(this._joinInfo.sid=n),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=n)}},{key:"_publishHighStream",value:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._joinInfo&&void 0!==this._uid){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");case 2:if("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState){e.next=4;break}throw new Fv(Pv.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));case 4:if("auto"!==this._turnServer.mode||!lg("FORCE_TURN")||lg("TURN_ENABLE_TCP")||lg("TURN_ENABLE_UDP")){e.next=6;break}throw new Fv(Pv.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");case 6:return Zv.debug("[".concat(this._clientId,"] publish high stream")),e.prev=7,e.next=10,this._p2pChannel.publish(t,this._isDualStreamEnabled,this._lowStreamParameter);case 10:return n=e.sent,e.next=13,n.next();case 13:if(!(r=e.sent.value)){e.next=27;break}return e.prev=15,e.next=18,this._gateway.publish(this._uid,r,!0);case 18:o=e.sent,e.next=25;break;case 21:if(e.prev=21,e.t0=e.catch(15),e.t0.code===Pv.DISCONNECT_P2P){e.next=25;break}throw n.throw(e.t0),e.t0;case 25:return e.next=27,n.next((null===(i=o)||void 0===i?void 0:i.ortc)||[]);case 27:this._p2pChannel.reportPublishEvent(!0,null),a=s(t),e.prev=29,a.s();case 31:if((u=a.n()).done){e.next=40;break}if((l=u.value)instanceof $T&&l._encoderConfig&&this._gateway.setVideoProfile(l._encoderConfig),e.t1=!l.muted&&l.enabled,e.t1){e.next=38;break}return e.next=38,this._p2pChannel.muteLocalTrack(l);case 38:e.next=31;break;case 40:e.next=45;break;case 42:e.prev=42,e.t2=e.catch(29),a.e(e.t2);case 45:return e.prev=45,a.f(),e.finish(45);case 48:e.next=55;break;case 50:if(e.prev=50,e.t3=e.catch(7),this._p2pChannel.reportPublishEvent(!1,null==e.t3?void 0:e.t3.code,t),(null==e.t3?void 0:e.t3.code)!==Pv.WS_ABORT){e.next=54;break}return e.abrupt("return");case 54:throw e.t3;case 55:case"end":return e.stop()}}),e,this,[[7,50],[15,21],[29,42,45,48]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_publishLowStream",value:function(){var e=u(c().mark((function e(){var t,n,r,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._joinInfo&&void 0!==this._uid){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");case 2:if("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState){e.next=4;break}throw new Fv(Pv.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));case 4:return Zv.debug("[".concat(this._clientId,"] publish low stream")),(t=this._configDistribute.getLowStreamConfigDistribute())&&t.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&t.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=t.bitrate)),e.prev=7,e.next=10,this._p2pChannel.publishLowStream(this._lowStreamParameter);case 10:return n=e.sent,e.next=13,n.next();case 13:if(!(r=e.sent.value)){e.next=26;break}return e.prev=15,e.next=18,this._gateway.publish(this._uid,r,!0);case 18:o=e.sent,e.next=25;break;case 21:if(e.prev=21,e.t0=e.catch(15),e.t0.code===Pv.DISCONNECT_P2P){e.next=25;break}throw n.throw(e.t0),e.t0;case 25:n.next((null===(i=o)||void 0===i?void 0:i.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0);case 26:e.next=33;break;case 28:if(e.prev=28,e.t1=e.catch(7),this._p2pChannel.reportPublishEvent(!1,null==e.t1?void 0:e.t1.code,void 0,!0),(null==e.t1?void 0:e.t1.code)!==Pv.WS_ABORT){e.next=32;break}return e.abrupt("return");case 32:throw e.t1;case 33:case"end":return e.stop()}}),e,this,[[7,28],[15,21]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"_createLiveStreamingClient",value:function(e){var t=this;if(!this._joinInfo||!this._appId)return new Fv(Pv.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();var n=function(){return new $x(t._joinInfo,t._config.websocketRetryConfig||Bv,t._config.httpRetryConfig||Bv)},r=function(e){e.onLiveStreamError=function(e,n){Y_.reportApiInvoke(t._sessionId,{name:Dm.ON_LIVE_STREAM_ERROR,options:[e,n],tag:Pm.TRACER}).onSuccess(),t.emit(Hm.LIVE_STREAMING_ERROR,e,n)},e.onLiveStreamWarning=function(e,n){Y_.reportApiInvoke(t._sessionId,{name:Dm.ON_LIVE_STREAM_WARNING,options:[e,n],tag:Pm.TRACER}).onSuccess(),t.emit(Hm.LIVE_STREAMING_WARNING,e,n)},e.on(yy.REQUEST_WORKER_MANAGER_LIST,(function(e,n,r){if(!t._joinInfo)return r(new Fv(Pv.INVALID_OPERATION,"can not find join info to get worker manager"));Vx(e,t._joinInfo,t._axiosCancelSource.token,Bv).then(n).catch(r)}))};switch(e){case sy.RAW:return this._liveRawStreamingClient||(this._liveRawStreamingClient=n(),r(this._liveRawStreamingClient)),this._liveRawStreamingClient;case sy.TRANSCODE:return this._liveTranscodeStreamingClient||(this._liveTranscodeStreamingClient=n(),r(this._liveTranscodeStreamingClient)),this._liveTranscodeStreamingClient;case sy.INJECT:return this._injectStreamingClient||(this._injectStreamingClient=n(),this._injectStreamingClient.on(yy.REQUEST_WORKER_MANAGER_LIST,(function(e,n,r){if(!t._joinInfo)return r(new Fv(Pv.INVALID_OPERATION,"can not find join info to get worker manager"));Vx(e,t._joinInfo,t._axiosCancelSource.token,Bv).then(n).catch(r)})),this._injectStreamingClient.onInjectStatusChange=function(e,n,r){t.emit(Hm.INJECT_STREAM_STATUS,e,n,r)}),this._injectStreamingClient}}},{key:"_createChannelMediaRelayClient",value:function(){var e=this;if(!this._joinInfo)return new Fv(Pv.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){var t=this.getLocalVideoStats(),n={width:t.sendResolutionWidth,height:t.sendResolutionHeight};this._channelMediaRelayClient=new rT(this._joinInfo,this._clientId,this._config.websocketRetryConfig||Bv,this._config.httpRetryConfig||Bv,n),this._channelMediaRelayClient.on("state",(function(t){t===wy.RELAY_STATE_FAILURE&&e._channelMediaRelayClient&&e._channelMediaRelayClient.dispose(),e.emit(Hm.CHANNEL_MEDIA_RELAY_STATE,t)})),this._channelMediaRelayClient.on("event",(function(t){e.emit(Hm.CHANNEL_MEDIA_RELAY_EVENT,t)})),this._statsCollector.onStatsChanged=function(t,n){var r;"resolution"===t&&(null===(r=e._channelMediaRelayClient)||void 0===r||r.setVideoProfile(n))}}return this._channelMediaRelayClient}},{key:"_handleGatewayEvents",value:function(){var e=this;this._gateway.on(Iy.DISCONNECT_P2P,u(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._p2pChannel.disconnectForReconnect();case 2:case"end":return t.stop()}}),t)})))),this._gateway.on(Iy.CONNECTION_STATE_CHANGE,(function(t,n,r){var i;if(r!==Wm.FALLBACK){var o=function(){e.emit(Hm.CONNECTION_STATE_CHANGE,t,n,r)};if(Y_.reportApiInvoke(e._sessionId||(null===(i=e._gateway.joinInfo)||void 0===i?void 0:i.sid)||null,{name:Dm.CONNECTION_STATE_CHANGE,options:[t,n,r],tag:Pm.TRACER}).onSuccess(JSON.stringify({cur:t,prev:n,reason:r})),Zv.info("[".concat(e._clientId,"] connection state change: ").concat(n," -> ").concat(t)),"DISCONNECTED"===t)return e._reset(),void o();if("RECONNECTING"===t)e._users.forEach((function(e){e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_audio_stream_added_state_=!1,e._trust_video_stream_added_state_=!1,e._audioSSRC=void 0,e._videoSSRC=void 0,e._videoOrtc=void 0,e._audioOrtc=void 0,e._cname=void 0,e._rtxSsrcId=void 0})),e._userOfflineTimeout&&window.clearTimeout(e._userOfflineTimeout),e._streamRemovedTimeout&&window.clearTimeout(e._streamRemovedTimeout),e._userOfflineTimeout=void 0,e._streamRemovedTimeout=void 0;else if("CONNECTED"===t){var a;e._streamFallbackTypeCacheMap.forEach((function(t,n){e._gateway.setStreamFallbackOption(n,t).catch((function(t){Zv.warning("[".concat(e._clientId,"] auto set stream fallback option failed"),t)}))})),e._remoteStreamTypeCacheMap.forEach((function(t,n){e._gateway.setRemoteVideoStreamType(n,t).catch((function(t){Zv.warning("[".concat(e._clientId,"] auto set remote stream type failed"),t)}))})),void 0!==e._remoteDefaultVideoStreamType&&void 0===(null===(a=e._joinInfo)||void 0===a?void 0:a.defaultVideoStream)&&e.setRemoteDefaultVideoStreamType(e._remoteDefaultVideoStreamType).then((function(){Zv.debug("[".concat(e._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))})).catch((function(t){Zv.error("[".concat(e._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(t))})),e._p2pChannel.republish(),e._userOfflineTimeout=window.setTimeout((function(){"CONNECTED"===e.connectionState&&(e._userOfflineTimeout=void 0,e._users.filter((function(e){return!e._trust_in_room_})).forEach((function(t){Zv.debug("[".concat(e._clientId,"] user offline timeout, emit user offline ").concat(t.uid)),e._handleUserOffline({uid:t.uid})})))}),3e3),e._streamRemovedTimeout=window.setTimeout((function(){"CONNECTED"===e.connectionState&&(e._streamRemovedTimeout=void 0,e._users.forEach((function(t){t._trust_audio_mute_state_||(Zv.debug("[".concat(e._clientId,"] auto dispatch audio unmute event ").concat(t.uid)),e._handleMuteStream(t.uid,"audio",!1)),t._trust_video_mute_state_||(Zv.debug("[".concat(e._clientId,"] auto dispatch video unmute event ").concat(t.uid)),e._handleMuteStream(t.uid,"video",!1)),t._trust_audio_enabled_state_||(Zv.debug("[".concat(e._clientId,"] auto dispatch enable local audio ").concat(t.uid)),e._handleSetStreamLocalEnable("audio",t.uid,!0)),t._trust_video_enabled_state_||(Zv.debug("[".concat(e._clientId,"] auto dispatch enable local video ").concat(t.uid)),e._handleSetStreamLocalEnable("video",t.uid,!0)),t._trust_video_stream_added_state_||(Zv.debug("[".concat(e._clientId,"] auto dispatch reset video stream added ").concat(t.uid)),e._handleResetAddStream(t,"video")),t._trust_audio_stream_added_state_||(Zv.debug("[".concat(e._clientId,"] auto dispatch reset audio stream added ").concat(t.uid)),e._handleResetAddStream(t,"audio")),t._video_added_||t._audio_added_||(Zv.debug("[".concat(e._clientId,"] auto dispatch stream remove ").concat(t.uid)),e._handleRemoveStream({uid:t.uid,uint_id:t._uintid}))})))}),1e3)}o()}})),this._gateway.on(Iy.REQUEST_NEW_GATEWAY_LIST,(function(t,n){if(!e._joinInfo)return n(new Fv(Pv.UNEXPECTED_ERROR,"can not recover, no join info"));Ox(e._joinInfo,e._axiosCancelSource.token,e._config.httpRetryConfig||Bv,e.store).then((function(n){e._joinInfo&&(e._joinInfo.apResponse=n.gatewayInfo.res,e._joinInfo.gatewayAddrs=n.gatewayInfo.gatewayAddrs,e._joinInfo.uni_lbs_ip=n.gatewayInfo.uni_lbs_ip),t(n.gatewayInfo.gatewayAddrs.map((function(t){if(e._joinInfo&&e._joinInfo.proxyServer){var n=t.address.split(":");return"wss://".concat(e._joinInfo.proxyServer,"/ws/?h=").concat(n[0],"&p=").concat(n[1])}return"wss://".concat(t.address)})))})).catch(n)})),this._gateway.on(Iy.NETWORK_QUALITY,(function(t){"normal"===e._networkQualitySensitivity&&e.emit(Hm.NETWORK_QUALITY,t)})),this._gateway.on(Iy.STREAM_TYPE_CHANGE,(function(t,n){e.emit(Hm.STREAM_TYPE_CHANGED,t,n),Y_.reportApiInvoke(e._sessionId,{name:Dm.STREAM_TYPE_CHANGE,options:[t,n],tag:Pm.TRACER}).onSuccess(JSON.stringify({uid:t,streamType:n}))})),this._gateway.on(Iy.IS_P2P_DISCONNECTED,(function(t){e._p2pChannel.isP2PDisconnected()?t(!0):e._p2pChannel.hasLocalMedia()||e._p2pChannel.hasRemoteMedia()?t(!1):t(!0)})),this._gateway.on(Iy.NEED_RENEW_SESSION,(function(){e._startSession()})),this._gateway.on(Iy.REQUEST_P2P_CONNECTION_PARAMS,function(){var t=u(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=r,t.next=4,e._p2pChannel.startP2PConnection(n);case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=11;break;case 8:t.prev=8,t.t2=t.catch(0),i(t.t2);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._gateway.on(Iy.JOIN_RESPONSE,(function(t,n){var r=yk(t.ortc,n),i=r.dtlsParameters,o=r.iceParameters,a=r.candidates,s=r.rtpCapabilities,c=r.setup,u=r.cname;e._p2pChannel.connect(o,i,a,s,c,u)})),this._gateway.on(Iy.REQUEST_DC_CONNECTION_PARAMS,(function(t){t(e._p2pChannel.getEstablishParams())})),this._gateway.on(Iy.RESET_SIGNAL,(function(t){e._p2pChannel.resetConnection(t),e._handleGatewaySignalEvents()})),this._gateway.on(Iy.DATACHANNEL_FAILBACK,(function(){e._joinGateway()})),this._gateway.on(Iy.DATACHANNEL_PRECONNECT,function(){var t=u(c().mark((function t(n,r,i,o){var a,s,u,l,d,h,f;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._p2pChannel.startP2PConnection({turnServer:null===(a=e._joinInfo)||void 0===a?void 0:a.turnServer},!0);case 2:return f=function(e,t){var n;return t&&t.ip&&"number"==typeof t.port?(n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip,port:t.port.toString(),type:"host",extension:{}}],Zv.debug("Using remote candidate from AP ".concat(t.ip,":").concat(t.port)),t.ip6&&(n.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:t.ip6,port:t.port.toString(),type:"host",extension:{}}),Zv.debug("Using IPV6 remote candidate from AP ".concat(t.ip6,":").concat(t.port)))):n=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],n}(n,r),t.abrupt("return",e._p2pChannel.preConnect({iceUfrag:"".concat(null===(s=e._joinInfo)||void 0===s?void 0:s.apResponse.cid,"_").concat(null===(u=e._joinInfo)||void 0===u?void 0:u.apResponse.cert),icePwd:"".concat(null===(l=e._joinInfo)||void 0===l?void 0:l.apResponse.cid,"_").concat(null===(d=e._joinInfo)||void 0===d?void 0:d.apResponse.cert)},{fingerprints:[{hashFunction:"sha-256",fingerprint:null!==(h=lg("FINGERPRINT"))&&void 0!==h?h:n.fingerprint}]},f,{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},"active","o/i14u9pJrxRKAsu").then(i).catch(o));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}())}},{key:"_handleGatewaySignalEvents",value:function(){var e=this;this._gateway.signal.on(Xm.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(Xm.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(Xm.ON_ADD_AUDIO_STREAM,(function(t){return e._handleAddAudioOrVideoStream("audio",t.uid,t.ssrcId,t.cname,t.uint_id,t.ortc)})),this._gateway.signal.on(Xm.ON_ADD_VIDEO_STREAM,(function(t){return e._handleAddAudioOrVideoStream("video",t.uid,t.ssrcId,t.cname,t.uint_id,t.ortc,t.rtxSsrcId)})),this._gateway.signal.on(Xm.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(Xm.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(Xm.MUTE_AUDIO,(function(t){return e._handleMuteStream(t.uid,"audio",!0)})),this._gateway.signal.on(Xm.UNMUTE_AUDIO,(function(t){return e._handleMuteStream(t.uid,"audio",!1)})),this._gateway.signal.on(Xm.MUTE_VIDEO,(function(t){return e._handleMuteStream(t.uid,"video",!0)})),this._gateway.signal.on(Xm.UNMUTE_VIDEO,(function(t){return e._handleMuteStream(t.uid,"video",!1)})),this._gateway.signal.on(Xm.RECEIVE_METADATA,(function(t){var n=Pw(t.metadata);e.emit(Hm.RECEIVE_METADATA,t.uid,n)})),this._gateway.signal.on(Xm.ON_DATA_STREAM,(function(t){t.seq&&delete t.seq,t.payload=Pw(t.payload),e.emit(Hm.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)})),this._gateway.signal.on(Xm.ON_CRYPT_ERROR,(function(){Dw((function(){Zv.warning("[".concat(e._clientId,"] on crypt error")),e.emit(Hm.CRYPT_ERROR)}),e._sessionId)})),this._gateway.signal.on(Xm.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(Xm.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(function(){Zv.warning("[".concat(e._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),e._gateway.leave(!0),e.emit(Hm.ON_TOKEN_PRIVILEGE_DID_EXPIRE),e._reset()})),this._gateway.signal.on(Xm.ON_STREAM_FALLBACK_UPDATE,(function(t){Zv.debug("[".concat(e._clientId,"] stream fallback peerId: ").concat(t.stream_id,", attr: ").concat(t.stream_type)),e.emit(Hm.STREAM_FALLBACK,t.stream_id,1===t.stream_type?"fallback":"recover")})),this._gateway.signal.on(Xm.ON_PUBLISH_STREAM,(function(t){e.uid===e._uid&&(e._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:t.proxy})),Zv.info("[".concat(e._clientId,"] on publish stream, ").concat(JSON.stringify(t))))})),this._gateway.signal.on(Xm.ENABLE_LOCAL_VIDEO,(function(t){e._handleSetStreamLocalEnable("video",t.uid,!0)})),this._gateway.signal.on(Xm.DISABLE_LOCAL_VIDEO,(function(t){e._handleSetStreamLocalEnable("video",t.uid,!1)})),this._gateway.signal.on(Ym.REQUEST_TIMEOUT,(function(t,n){if(e._joinInfo)switch(t){case Zm.PUBLISH:if(!n)return;var r=n.ortc;if(r){var i,o,a,s,c=r.some((function(e){return e.stream_type===Ty.Audio})),u=r.some((function(e){return e.stream_type!==Ty.Audio})),l=r.some((function(e){var t=e.stream_type;return t===Ty.Screen||t===Ty.ScreenLow}));"offer"===n.state&&Y_.publish(e._joinInfo.sid,{eventElapse:QS.measureFromPublishStart(e.store.clientId,e.store.pubId),succ:!1,ec:Pv.TIMEOUT,audio:c,video:u,p2pid:n.p2p_id,publishRequestid:e.store.pubId,screenshare:l,audioName:c?null===(i=r.find((function(e){return e.stream_type===Ty.Audio})))||void 0===i||null===(o=i.ssrcs[0])||void 0===o?void 0:o.ssrcId.toString():void 0,videoName:u?null===(a=r.find((function(e){return e.stream_type!==Ty.Audio})))||void 0===a||null===(s=a.ssrcs[0])||void 0===s?void 0:s.ssrcId.toString():void 0})}break;case Zm.SUBSCRIBE:n&&Y_.subscribe(e._joinInfo.sid,{succ:!1,ec:Pv.TIMEOUT,audio:n.stream_type===zy.AUDIO,video:n.stream_type===zy.VIDEO,peerid:n.stream_id,subscribeRequestid:n.ssrcId,p2pid:e.store.p2pId,eventElapse:QS.measureFromSubscribeStart(e.store.clientId,n.ssrcId)})}})),this._gateway.signal.on(Xm.ON_P2P_OK,(function(t){e.uid,e._uid})),this._gateway.signal.on(Xm.ON_PUBLISHED_USER_LIST,(function(t){if(null!=t&&t.users){lg("BLOCK_LOCAL_CLIENT")&&(t.users=t.users.filter((function(t){return!_g(t.audio_ssrc,e.channelName)})));var n,r=[],i=[],o=s(t.users);try{var a=function(){var t=n.value,o=e._users.find((function(e){return e.uid===t.stream_id}));o?o._trust_in_room_=!0:(o=new tI(t.stream_id,t.stream_id),e._users.push(o),0===e.getListeners(Hm.PUBLISHED_USER_LIST).length&&(Zv.debug("[".concat(e._clientId,"] user online"),t.stream_id),e.emit(Hm.USER_JOINED,o)));var a=Ry.Audio&t.stream_type,s=(Ry.Video|Ry.LwoVideo)&t.stream_type,c=a&&o.hasAudio,u=s&&o.hasVideo;s&&(o._trust_video_stream_added_state_=!0,o._video_added_=!0,o._videoSSRC=t.video_ssrc,o._rtxSsrcId=t.video_rtx),a&&(o._trust_audio_stream_added_state_=!0,o._audio_added_=!0,o._audioSSRC=t.audio_ssrc),a&&!c&&0===e.getListeners(Hm.PUBLISHED_USER_LIST).length&&(Zv.info("[".concat(e._clientId,"] remote user ").concat(o.uid," published audio")),e.emit(Hm.USER_PUBLISHED,o,"audio")),s&&!u&&0===e.getListeners(Hm.PUBLISHED_USER_LIST).length&&(Zv.info("[".concat(e._clientId,"] remote user ").concat(o.uid," published video")),e.emit(Hm.USER_PUBLISHED,o,"video")),(a&&!c||s&&!u)&&r.push(o),s&&e._p2pChannel.hasPendingRemoteMedia(o,"video")&&i.push({user:o,mediaType:"video"}),a&&e._p2pChannel.hasPendingRemoteMedia(o,"audio")&&i.push({user:o,mediaType:"audio"})};for(o.s();!(n=o.n()).done;)a()}catch(c){o.e(c)}finally{o.f()}i.length>0&&(Zv.debug("[".concat(e._clientId,"] RE massSubscribe after reconnect ").concat(i.map((function(e){return"user: ".concat(e.user.uid,", mediaType: ").concat(e.mediaType)})).join("; ")," ")),e.massSubscribe(i).catch((function(t){Zv.error("[".concat(e._clientId,"] mass resubscribe error"),t.toString())}))),e.getListeners(Hm.PUBLISHED_USER_LIST).length>0?(Zv.info("[".concat(e._clientId,"] client emit user-list event, users: ").concat(r.map((function(e){return e.uid})).join(", "))),e.emit(Hm.PUBLISHED_USER_LIST,r)):Zv.info("[".concat(e._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(r.map((function(e){return e.uid})).join(", ")))}}))}},{key:"_handleP2PChannelEvents",value:function(){var e=this;this._p2pChannel.on(Xy.RequestMuteLocal,function(){var t=u(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._joinInfo){t.next=12;break}return t.prev=1,t.next=4,e._gateway.muteLocal(n,e._joinInfo.stringUid||e._joinInfo.uid);case 4:r(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),t.t0.code===Pv.DISCONNECT_P2P?r():i(t.t0);case 10:t.next=13;break;case 12:r();case 13:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Xy.RequestUnmuteLocal,function(){var t=u(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._joinInfo){t.next=12;break}return t.prev=1,t.next=4,e._gateway.unmuteLocal(n,e._joinInfo.stringUid||e._joinInfo.uid);case 4:r(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),t.t0.code===Pv.DISCONNECT_P2P?r():i(t.t0);case 10:t.next=13;break;case 12:r();case 13:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Xy.RequestRePublish,(function(t,n,r){e.publish(t,!1).then(n).catch(r)})),this._p2pChannel.on(Xy.RequestReSubscribe,function(){var t=u(c().mark((function t(n,r,i){var o,a,u,l;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,o=s(n),t.prev=2,o.s();case 4:if((a=o.n()).done){t.next=15;break}if(u=a.value,l=u.user,u.kind!==zy.VIDEO){t.next=11;break}return t.next=9,e.subscribe(l,"video");case 9:t.next=13;break;case 11:return t.next=13,e.subscribe(l,"audio");case 13:t.next=4;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),o.e(t.t0);case 20:return t.prev=20,o.f(),t.finish(20);case 23:r(),t.next=29;break;case 26:t.prev=26,t.t1=t.catch(0),i(t.t1);case 29:case"end":return t.stop()}}),t,null,[[0,26],[2,17,20,23]])})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Xy.RequestUploadStats,(function(t,n){e._gateway.uploadStats(t,n)})),this._p2pChannel.on(Xy.MediaReconnectStart,(function(t){e.emit(Hm.MEDIA_RECONNECT_START,t)})),this._p2pChannel.on(Xy.MediaReconnectEnd,(function(t){e.emit(Hm.MEDIA_RECONNECT_END,t)})),this._p2pChannel.on(Xy.NeedSignalRTT,(function(t){t(e._gateway.getSignalRTT())})),this._p2pChannel.on(Xy.RequestRestartICE,function(){var t=u(c().mark((function t(n){var r,i,o,a,s,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._p2pChannel.restartICE(n);case 2:return r=t.sent,t.next=5,r.next();case 5:if(!(i=t.sent).done){t.next=8;break}return t.abrupt("return");case 8:return o=i.value,t.prev=9,t.next=12,e._gateway.restartICE({iceParameters:o});case 12:a=t.sent,t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(9),t.abrupt("return",void r.throw(t.t0));case 18:return s=function(e){var t=e.iceParameters;return{iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd}}}(a),u=s.iceParameters,t.next=21,r.next({remoteIceParameters:u});case 21:case"end":return t.stop()}}),t,null,[[9,15]])})));return function(e){return t.apply(this,arguments)}}()),this._p2pChannel.on(Xy.RequestReconnect,u(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._gateway.reconnect();case 1:case"end":return t.stop()}}),t)})))),this._p2pChannel.on(Xy.RequestReconnectPC,u(c().mark((function t(){var n,r,i,o,a,s,u,l,d,h,f,p,v,g,m;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._p2pChannel.startP2PConnection({turnServer:null===(n=e._joinInfo)||void 0===n?void 0:n.turnServer});case 2:return r=t.sent,i=r.iceParameters,o=r.dtlsParameters,a=r.rtpCapabilities,t.next=8,e._gateway.reconnectPC({iceParameters:i,dtlsParameters:o,rtpCapabilities:a});case 8:return s=t.sent,u=s.gatewayEstablishParams,l=s.gatewayAddress,d=yk(u,l),h=d.dtlsParameters,f=d.iceParameters,p=d.candidates,v=d.rtpCapabilities,g=d.setup,m=d.cname,t.next=20,e._p2pChannel.connect(f,h,p,v,g,m);case 20:return t.next=22,e._p2pChannel.republish();case 22:return t.next=24,e._p2pChannel.reSubscribe();case 24:case"end":return t.stop()}}),t)})))),this._p2pChannel.on(Xy.RequestUnpublishForReconnectPC,function(){var t=u(c().mark((function t(n,r,i){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._joinInfo||void 0===e._uid){t.next=6;break}return t.next=3,e._gateway.unpublish(n,e._uid);case 3:r(),t.next=7;break;case 6:i();case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),this._p2pChannel.on(Xy.P2PLost,(function(){e.emit(Hm.P2P_LOST,e.store.uid)})),this._p2pChannel.on(Xy.UpdateVideoEncoder,(function(t){t._encoderConfig&&e._gateway.setVideoProfile(t._encoderConfig)})),this._p2pChannel.on(Xy.ConnectionTypeChange,(function(t){e.emit(Hm.IS_USING_CLOUD_PROXY,t)})),this._p2pChannel.on(Xy.RequestLowStreamParameter,(function(t){t(e._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})),this._p2pChannel.on(Xy.QueryClientConnectionState,(function(t){t(e.connectionState)}))}},{key:"getKeyMetrics",value:function(){return this.store.keyMetrics}},{key:"enableContentInspect",value:function(){var e=u(c().mark((function e(t){var n,r,i=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("CONNECTED"===this.connectionState&&this._joinInfo){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"[".concat(this._clientId,"] Client did not join channel"));case 2:if(!this._inspect){e.next=4;break}throw new Fv(Pv.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));case 4:if(t){e.next=6;break}throw new Fv(Pv.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig is necessary"));case 6:if(t.inspectType&&Array.isArray(t.inspectType)){e.next=8;break}throw new Fv(Pv.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.inspectType is necessary and is an instance of Array."));case 8:if((n=g(new Set(t.inspectType))).forEach((function(e){if(!["supervise","moderation"].includes(e))throw new Fv(Pv.INVALID_PARAMS,"[".concat(i._clientId,"] ").concat(e," is not a valid inspect type."))})),t.inspectType=n,!(t&&t.extraInfo&&t.extraInfo.length>1024)){e.next=12;break}throw new Fv(Pv.INVALID_PARAMS,"[".concat(this._clientId,"] inspectConfig.extraInfo length cannot exceed 1024 bytes"));case 12:return e.prev=12,r=new CA(t),this._inspect=r,this.handleVideoInspectEvents(this._inspect),e.next=18,r.init({appId:this._joinInfo.appId,areaCode:"",cname:this._joinInfo.cname,sid:this._joinInfo.sid,token:this._joinInfo.token,uid:this._joinInfo.uid,cid:this._joinInfo.cid,vid:this._joinInfo.vid?Number(this._joinInfo.vid):0},Bv);case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(12),Array.isArray(e.t0)?e.t0[0]:e.t0;case 23:case"end":return e.stop()}}),e,this,[[12,20]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"disableContentInspect",value:function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._inspect){e.next=2;break}throw new Fv(Pv.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));case 2:e.prev=2,this._inspect.close(),this._inspect=void 0,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),Array.isArray(e.t0)?e.t0[0]:e.t0;case 9:case"end":return e.stop()}}),e,this,[[2,6]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleVideoInspectEvents",value:function(e){var t=this;e.on(ib.CONNECTION_STATE_CHANGE,(function(n,r){if(t.emit(Hm.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,n,r),r===nb.CONNECTED){if("CONNECTED"!==t.connectionState)return void t.emit(Hm.CONTENT_INSPECT_ERROR,new Fv(Pv.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}})),e.on(ib.INSPECT_RESULT,(function(e,n){var r;if((null==n?void 0:n.code)===Pv.INVALID_OPERATION&&"DISCONNECTED"===t.connectionState)return Zv.debug("Stop inspect content because that has left channel"),null==t||null===(r=t._inspect)||void 0===r||r.close(),void(t._inspect=void 0);t.emit(Hm.CONTENT_INSPECT_RESULT,e,n)})),e.on(ib.CLIENT_LOCAL_VIDEO_TRACK,(function(e){e(t.localTracks.filter((function(e){return"video"===e.trackMediaType}))[0])}))}},{key:"getJoinChannelServiceRecords",value:function(){return Zv.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}},{key:"setPublishAudioFilterEnabled",value:function(){var e=u(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gm(t,"enabled"),ug("ENABLE_PUBLISH_AUDIO_FILTER",t),e.t0=this._joinInfo,!e.t0){e.next=6;break}return e.next=6,this._gateway.setPublishAudioFilterEnabled(t);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_handleResetAddStream",value:function(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}}]),n}(Uv)).prototype,"leave",[WC],Object.getOwnPropertyDescriptor(kA.prototype,"leave"),kA.prototype),x_(kA.prototype,"publish",[HC],Object.getOwnPropertyDescriptor(kA.prototype,"publish"),kA.prototype),x_(kA.prototype,"unpublish",[zC],Object.getOwnPropertyDescriptor(kA.prototype,"unpublish"),kA.prototype),x_(kA.prototype,"subscribe",[KC],Object.getOwnPropertyDescriptor(kA.prototype,"subscribe"),kA.prototype),x_(kA.prototype,"massSubscribe",[YC],Object.getOwnPropertyDescriptor(kA.prototype,"massSubscribe"),kA.prototype),x_(kA.prototype,"unsubscribe",[ZC],Object.getOwnPropertyDescriptor(kA.prototype,"unsubscribe"),kA.prototype),x_(kA.prototype,"massUnsubscribe",[JC],Object.getOwnPropertyDescriptor(kA.prototype,"massUnsubscribe"),kA.prototype),x_(kA.prototype,"setLowStreamParameter",[XC],Object.getOwnPropertyDescriptor(kA.prototype,"setLowStreamParameter"),kA.prototype),x_(kA.prototype,"enableDualStream",[QC],Object.getOwnPropertyDescriptor(kA.prototype,"enableDualStream"),kA.prototype),x_(kA.prototype,"disableDualStream",[$C],Object.getOwnPropertyDescriptor(kA.prototype,"disableDualStream"),kA.prototype),x_(kA.prototype,"setClientRole",[eA],Object.getOwnPropertyDescriptor(kA.prototype,"setClientRole"),kA.prototype),x_(kA.prototype,"setProxyServer",[tA],Object.getOwnPropertyDescriptor(kA.prototype,"setProxyServer"),kA.prototype),x_(kA.prototype,"setTurnServer",[nA],Object.getOwnPropertyDescriptor(kA.prototype,"setTurnServer"),kA.prototype),x_(kA.prototype,"setLicense",[rA],Object.getOwnPropertyDescriptor(kA.prototype,"setLicense"),kA.prototype),x_(kA.prototype,"startProxyServer",[iA],Object.getOwnPropertyDescriptor(kA.prototype,"startProxyServer"),kA.prototype),x_(kA.prototype,"stopProxyServer",[oA],Object.getOwnPropertyDescriptor(kA.prototype,"stopProxyServer"),kA.prototype),x_(kA.prototype,"setLocalAccessPointsV2",[aA],Object.getOwnPropertyDescriptor(kA.prototype,"setLocalAccessPointsV2"),kA.prototype),x_(kA.prototype,"setLocalAccessPoints",[sA],Object.getOwnPropertyDescriptor(kA.prototype,"setLocalAccessPoints"),kA.prototype),x_(kA.prototype,"setRemoteDefaultVideoStreamType",[cA],Object.getOwnPropertyDescriptor(kA.prototype,"setRemoteDefaultVideoStreamType"),kA.prototype),x_(kA.prototype,"setRemoteVideoStreamType",[uA],Object.getOwnPropertyDescriptor(kA.prototype,"setRemoteVideoStreamType"),kA.prototype),x_(kA.prototype,"setStreamFallbackOption",[lA],Object.getOwnPropertyDescriptor(kA.prototype,"setStreamFallbackOption"),kA.prototype),x_(kA.prototype,"setEncryptionConfig",[dA],Object.getOwnPropertyDescriptor(kA.prototype,"setEncryptionConfig"),kA.prototype),x_(kA.prototype,"renewToken",[hA],Object.getOwnPropertyDescriptor(kA.prototype,"renewToken"),kA.prototype),x_(kA.prototype,"enableAudioVolumeIndicator",[fA],Object.getOwnPropertyDescriptor(kA.prototype,"enableAudioVolumeIndicator"),kA.prototype),x_(kA.prototype,"startLiveStreaming",[pA],Object.getOwnPropertyDescriptor(kA.prototype,"startLiveStreaming"),kA.prototype),x_(kA.prototype,"setLiveTranscoding",[vA],Object.getOwnPropertyDescriptor(kA.prototype,"setLiveTranscoding"),kA.prototype),x_(kA.prototype,"stopLiveStreaming",[gA],Object.getOwnPropertyDescriptor(kA.prototype,"stopLiveStreaming"),kA.prototype),x_(kA.prototype,"addInjectStreamUrl",[mA],Object.getOwnPropertyDescriptor(kA.prototype,"addInjectStreamUrl"),kA.prototype),x_(kA.prototype,"removeInjectStreamUrl",[yA],Object.getOwnPropertyDescriptor(kA.prototype,"removeInjectStreamUrl"),kA.prototype),x_(kA.prototype,"startChannelMediaRelay",[bA],Object.getOwnPropertyDescriptor(kA.prototype,"startChannelMediaRelay"),kA.prototype),x_(kA.prototype,"updateChannelMediaRelay",[_A],Object.getOwnPropertyDescriptor(kA.prototype,"updateChannelMediaRelay"),kA.prototype),x_(kA.prototype,"stopChannelMediaRelay",[EA],Object.getOwnPropertyDescriptor(kA.prototype,"stopChannelMediaRelay"),kA.prototype),x_(kA.prototype,"sendCustomReportMessage",[SA],Object.getOwnPropertyDescriptor(kA.prototype,"sendCustomReportMessage"),kA.prototype),x_(kA.prototype,"pickSVCLayer",[wA],Object.getOwnPropertyDescriptor(kA.prototype,"pickSVCLayer"),kA.prototype),x_(kA.prototype,"enableContentInspect",[xA],Object.getOwnPropertyDescriptor(kA.prototype,"enableContentInspect"),kA.prototype),x_(kA.prototype,"disableContentInspect",[TA],Object.getOwnPropertyDescriptor(kA.prototype,"disableContentInspect"),kA.prototype),x_(kA.prototype,"getJoinChannelServiceRecords",[IA],Object.getOwnPropertyDescriptor(kA.prototype,"getJoinChannelServiceRecords"),kA.prototype),x_(kA.prototype,"setPublishAudioFilterEnabled",[RA],Object.getOwnPropertyDescriptor(kA.prototype,"setPublishAudioFilterEnabled"),kA.prototype),kA),DA=function(e){h(n,e);var t=f(n);function n(e){var r;p(this,n);var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=t.call(this),Lf(l(r),"audioBuffer",void 0),Lf(l(r),"sourceNode",void 0),Lf(l(r),"startPlayTime",0),Lf(l(r),"startPlayOffset",0),Lf(l(r),"pausePlayTime",0),Lf(l(r),"options",void 0),Lf(l(r),"currentLoopCount",0),Lf(l(r),"currentPlaybackSpeed",100),Lf(l(r),"_currentState","stopped"),r.audioBuffer=e,r.options=i,r.startPlayOffset=r.options.startPlayTime||0,r}return v(n,[{key:"currentState",get:function(){return this._currentState},set:function(e){e!==this._currentState&&(this._currentState=e,this.emit($m.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}},{key:"createWebAudioDiagram",value:function(){return this.context.createGain()}},{key:"duration",get:function(){return this.audioBuffer.duration}},{key:"playbackSpeed",get:function(){return this.currentPlaybackSpeed}},{key:"currentTime",get:function(){return"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration}},{key:"updateOptions",value:function(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):Zv.warning("can not set audio source options")}},{key:"startProcessAudioBuffer",value:function(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}},{key:"pauseProcessAudioBuffer",value:function(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}},{key:"seekAudioBuffer",value:function(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}},{key:"resumeProcessAudioBuffer",value:function(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}},{key:"stopProcessAudioBuffer",value:function(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(E){}this.reset()}}},{key:"setAudioBufferPlaybackSpeed",value:function(e){this.sourceNode&&("playing"===this.currentState&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e}},{key:"startSourceNode",value:function(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}},{key:"createSourceNode",value:function(){var e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e}},{key:"handleSourceNodeEnded",value:function(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}},{key:"reset",value:function(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}]),n}(hE),PA=new Map;function LA(e,t){return MA.apply(this,arguments)}function MA(){return MA=u(c().mark((function e(t,n){var r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,"string"!=typeof t){e.next=16;break}if(!(i=PA.get(t))){e.next=5;break}return e.abrupt("return",(Zv.debug("use cached audio resource: ",t),i));case 5:return e.prev=5,e.next=8,qv((function(){return Lv.get(t,{responseType:"arraybuffer"})}),void 0,void 0,{maxRetryCount:3});case 8:r=e.sent.data,e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(5),new Fv(Pv.FETCH_AUDIO_FILE_FAILED,e.t0.toString());case 14:e.next=20;break;case 16:return o=new Vd((function(e,n){var r=new FileReader;r.onload=function(t){t.target?e(t.target.result):n(new Fv(Pv.READ_LOCAL_AUDIO_FILE_ERROR))},r.onerror=function(){n(new Fv(Pv.READ_LOCAL_AUDIO_FILE_ERROR))},r.readAsArrayBuffer(t)})),e.next=19,o;case 19:r=e.sent;case 20:return e.next=22,function(e){var t=aE();return new Vd((function(n,r){t.decodeAudioData(e,(function(e){n(e)}),(function(e){r(new Fv(Pv.DECODE_AUDIO_FILE_FAILED,e.toString()))}))}))}(r);case 22:return a=e.sent,e.abrupt("return",("string"==typeof t&&n&&PA.set(t,a),a));case 24:case"end":return e.stop()}}),e,null,[[5,11]])}))),MA.apply(this,arguments)}function UA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UA(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function FA(e,t,n,r){n.optimizationMode&&(r&&r.width&&r.height?(n.encoderConfig=VA(VA({},r),{},{bitrateMin:r.bitrateMin,bitrateMax:r.bitrateMax}),"motion"!==n.optimizationMode&&"detail"!==n.optimizationMode||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?Zv.debug("[".concat(e,"] set content hint to"),n.optimizationMode):Zv.debug("[".concat(e,"] set content hint failed")))):Zv.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var BA=of().name;function GA(e,t,n,r){var i,o=0,a=null;return new Vd((function(s,c){setTimeout((function(){i&&(i(),s(o))}),t),i=lE((function(){!function(){o>r&&i&&(i(),s(o));var t=n.getContext("2d");if(!t){var u=new Fv(Pv.UNEXPECTED_ERROR,"can not get canvas 2d context.");return Zv.error(u.toString()),void c(u)}t.drawImage(e,0,0,160,120);var l=t.getImageData(0,0,n.width,n.height),d=Math.floor(l.data.length/3);if(a){for(var h=0;h<d;h+=3)if(l.data[h]!==a[h])return o+=1,void(a=l.data);a=l.data}else a=l.data}()}),30)}))}var qA,WA,HA=function(){function e(t,n){p(this,e),Lf(this,"id",0),Lf(this,"element",void 0),Lf(this,"peerPair",void 0),Lf(this,"context",void 0),Lf(this,"audioPlayerElement",void 0),Lf(this,"audioTrack",void 0),e.count+=1,this.id=e.count,this.element=t,this.context=n}return v(e,[{key:"initPeers",value:function(){var e=this;this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=function(t){var n=document.createElement("audio");n.srcObject=new MediaStream([t.track]),n.play(),e.audioPlayerElement=n}}},{key:"switchSdp",value:function(){var e=u(c().mark((function e(){var t,n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.peerPair){e.next=2;break}return e.abrupt("return");case 2:return t=function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("offer"!==n){e.next=6;break}return e.next=3,t.createOffer();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,t.createAnswer();case 8:e.t0=e.sent;case 9:return r=e.t0,e.next=12,t.setLocalDescription(r);case 12:return e.abrupt("return","complete"===t.iceGatheringState?t.localDescription:new Vd((function(e){t.onicegatheringstatechange=function(){"complete"===t.iceGatheringState&&e(t.localDescription)}})));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n=function(){var e=u(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setRemoteDescription(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=3,e.next=6,t(this.peerPair[0],"offer");case 6:return r=e.sent,e.next=9,n(this.peerPair[1],r);case 9:return e.next=11,t(this.peerPair[1],"answer");case 11:return i=e.sent,e.next=14,n(this.peerPair[0],i);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(3),new Fv(Pv.LOCAL_AEC_ERROR,e.t0.toString()).print();case 19:case"end":return e.stop()}}),e,this,[[3,16]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getTracksFromMediaElement",value:function(){var e=u(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.audioTrack){e.next=2;break}return e.abrupt("return",this.audioTrack);case 2:e.prev=2,t instanceof HTMLVideoElement&&(t.captureStream?t.captureStream():t.mozCaptureStream()),n=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(t).connect(n),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),new Fv(Pv.LOCAL_AEC_ERROR,e.t0.toString()).print();case 10:if(n){e.next=12;break}throw new Fv(Pv.LOCAL_AEC_ERROR,"no dest node when local aec").print();case 12:return r=n.stream.getAudioTracks()[0],e.abrupt("return",(this.audioTrack=r,r));case 14:case"end":return e.stop()}}),e,this,[[2,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getElement",value:function(){return this.element}},{key:"startEchoCancellation",value:function(){var e=u(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.context.resume(),this.peerPair&&this.close(),this.initPeers(),t=this.element,e.next=4,this.getTracksFromMediaElement(t);case 4:return n=e.sent,this.peerPair&&this.peerPair[0].addTrack(n),e.next=8,this.switchSdp();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){Zv.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach((function(e){e.close()})),this.peerPair=void 0,this.audioPlayerElement=void 0}}]),e}();Lf(HA,"count",0);var zA=window.AudioContext||window.webkitAudioContext,KA=new(qA=K_({report:Y_}),x_((WA=function(){function e(){p(this,e),Lf(this,"units",[]),Lf(this,"context",void 0)}return v(e,[{key:"processExternalMediaAEC",value:function(e){if(!this._doesEnvironmentNeedAEC())return Zv.debug("the system does not need to process local aec"),-1;this.context||(this.context=new zA);var t=this.units.find((function(t){return t&&t.getElement()===e}));return t||(t=new HA(e,this.context),this.units.push(t)),t.startEchoCancellation(),Zv.debug("start processing local audio echo cancellation, id is",t.id),t.id}},{key:"_doesEnvironmentNeedAEC",value:function(){return of().name!==Jh.SAFARI}}]),e}()).prototype,"processExternalMediaAEC",[qA],Object.getOwnPropertyDescriptor(WA.prototype,"processExternalMediaAEC"),WA.prototype),WA);function YA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YA(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var JA=window||document;function XA(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(JA){var n=QA._cspEventHandlerPointer;if(n&&t)console.error(n,t);else{var r=function(e){if(e&&e.blockedURI&&(QA.onSecurityPolicyViolation||QA.getListeners(sb.SECURITY_POLICY_VIOLATION).length>0)){var t=e.blockedURI;lg("CSP_DETECTED_HOSTNAME_LIST").some((function(e){return t.includes(e)}))&&(QA.onSecurityPolicyViolation&&"function"==typeof QA.onSecurityPolicyViolation&&QA.onSecurityPolicyViolation(e),QA.getListeners(sb.SECURITY_POLICY_VIOLATION).length>0&&QA.emit(sb.SECURITY_POLICY_VIOLATION,e))}};n&&JA.removeEventListener("securitypolicyviolation",n),(t||e&&"function"==typeof e||QA.getListeners(sb.SECURITY_POLICY_VIOLATION).length>0)&&JA.addEventListener("securitypolicyviolation",r),QA._cspEventHandlerPointer=r}}}ug("PROCESS_ID","process-".concat(_w(8,""),"-").concat(_w(4,""),"-").concat(_w(4,""),"-").concat(_w(4,""),"-").concat(_w(12,""))),function(){var e=of();db.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),db.getStreamFromExtension=e.name===Jh.CHROME&&Number(e.version)>34,db.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var e=new RTCPeerConnection,t=!1;try{e.addTransceiver("audio"),t=!0}catch(e){}return e.close(),t}(),db.supportMinBitrate=e.name===Jh.CHROME||e.name===Jh.EDGE,db.supportSetRtpSenderParameters=function(){var e=of();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!If()||!(!hf()&&!cf())||e.name===Jh.FIREFOX&&Number(e.version)>=64)}(),e.name===Jh.SAFARI&&(Number(e.version)>=14?db.supportDualStream=!0:db.supportDualStream=!1),db.webAudioMediaStreamDest=function(){var e=of();return!(e.name===Jh.SAFARI&&Number(e.version)<12)}(),db.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,db.supportWebGL="undefined"!=typeof WebGLRenderingContext,db.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,If()||(db.webAudioWithAEC=!0),db.supportShareAudio=function(){var e=of();return(e.os===Zh.WIN_10||e.os===Zh.WIN_81||e.os===Zh.WIN_7||e.os===Zh.LINUX||e.os===Zh.MAC_OS)&&e.name===Jh.CHROME&&Number(e.version)>=74}(),db.supportDualStreamEncoding=function(){var e=of();return!!lg("DISABLE_WEBAUDIO")||"Safari"===e.name&&Number(e.version)>=14||!!("Chrome"===e.name&&/Windows/i.test(e.os||"")&&Number(e.version)>=100&&lg("CHROME_DUAL_STREAM_USE_ENCODING"))}(),db.supportDataChannel=!!(vf(76)||function(e){var t=of();return!(t.name!==Jh.FIREFOX||!t.osVersion)&&Number(t.version)>=e}(68)||function(e){var t=of();return!(t.name!==Jh.SAFARI||!t.osVersion)&&Number(t.version)>=e}(14)),db.supportPCSetConfiguration=function(){var e=window.RTCPeerConnection;return!ff()&&!!e&&e.prototype.setConfiguration instanceof Function}(),db.supportWebRTCEncodedTransform=function(){var e=of();return"Chrome"===e.name&&Number(e.version)>=86}(),Zv.info("browser compatibility",JSON.stringify(db),JSON.stringify(e))}(),function(){var e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(e){return void Zv.error("Error loading sdk config",e.message)}if(e)try{var t=JSON.parse(window.atob(e)),n=Date.now();Zv.debug("Loading global parameters from cache",t),Object.keys(t).forEach((function(e){if(Object.prototype.hasOwnProperty.call(dg,e)){var r=t[e],i=r.value,o=r.expires;if(o&&o<=n)return;hg[e]=i,dg[e]=i}}))}catch(t){Zv.error("Error loading mutableParamsCache: ".concat(e),t.message)}}(),Array.isArray(hg.AREAS)&&hg.AREAS.length>0&&vx(hg.AREAS,!0);var QA=function(e){var t=new Uv,n=e,r={getListeners:t.getListeners.bind(t),on:function(e,n){return function(e,t){e===sb.SECURITY_POLICY_VIOLATION&&XA(t,!0)}(e,n),t.on.bind(t)(e,n)},addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t)};return ZA(ZA({},n),r)}({__CLIENT_LIST__:yg,__TRACK_LIST__:bg,VERSION:Xv,BUILD:Jv,setParameter:function(e,t,n){Zv.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),ug(e,t,n)},getParameter:lg,getSupportedCodec:function(){var e=u(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={audio:[],video:[]},e.prev=1,(n=new RTCPeerConnection).addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"}),e.next=6,n.createOffer();case 6:if(r=e.sent.sdp){e.next=9;break}return e.abrupt("return",t);case 9:n.close(),n=null,t=function(e){var t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ H265/i)&&t.video.push("H265"),e.match(/ opus/i)&&t.audio.push("OPUS"),e.match(/ PCMU/i)&&t.audio.push("PCMU"),e.match(/ PCMA/i)&&t.audio.push("PCMA"),e.match(/ G722/i)&&t.audio.push("G722"),t}(r),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(1),new Fv(Pv.CREATE_OFFER_FAILED,e.t0.toString&&e.t0.toString()).print();case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));function t(){return e.apply(this,arguments)}return t}(),checkSystemRequirements:function(){var e=Y_.reportApiInvoke(null,{name:Dm.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Pm.TRACER}),t=!1;try{var n=window.RTCPeerConnection,r=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,i=window.WebSocket;t=!!(n&&r&&i)}catch(e){return Zv.error("check system requirement failed: ",e),!1}var o=!1,a=of();a.name===Jh.CHROME&&Number(a.version)>=58&&(!lf()||uf())&&(o=!0),a.name===Jh.FIREFOX&&Number(a.version)>=56&&(o=!0),a.name===Jh.OPERA&&Number(a.version)>=45&&(o=!0),a.name===Jh.SAFARI&&Number(a.version)>=11&&(o=!0),(xf()||of().name===Jh.QQ)&&(o=!0),Zv.debug("checkSystemRequirements, api:",t,"browser",o);var s=t&&o;return e.onSuccess(s),s},getDevices:function(e){return NE.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return NE.getRecordingDevices(e)},getCameras:function(e){return NE.getCamerasDevices(e)},getElectronScreenSources:yE,getPlaybackDevices:function(e){return NE.getSpeakers(e)},createClient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"},t=Y_.reportApiInvoke(null,{name:Dm.CREATE_CLIENT,options:[e],tag:Pm.TRACER});try{ny(e)}catch(e){throw t.onError(e),e}return void 0===e.audioCodec&&(e.audioCodec="opus"),t.onSuccess(),new jA(NA(NA({forceWaitGatewayResponse:!0},e),{},{role:"rtc"===e.mode?"host":e.role}))},createCameraVideoTrack:function(){var e=u(c().mark((function e(){var t,n,r,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=Y_.reportApiInvoke(null,{tag:Pm.TRACER,name:Dm.CREATE_CAM_VIDEO_TRACK,options:[VA({},t)]}),r=fT(t),i=_w(8,"track-cam-"),o=null,Zv.info("start create camera video track with config",JSON.stringify(t),"trackId",i),e.prev=4,e.next=7,IE({video:r},i);case 7:if(e.t0=e.sent.getVideoTracks()[0],e.t0){e.next=10;break}e.t0=null;case 10:o=e.t0,e.next=16;break;case 13:throw e.prev=13,e.t1=e.catch(4),n.onError(e.t1),e.t1;case 16:if(o){e.next=19;break}return a=new Fv(Pv.UNEXPECTED_ERROR,"can not find track in media stream"),e.abrupt("return",(n.onError(a),a.throw()));case 19:return t.optimizationMode&&FA(i,o,t,ig(t.encoderConfig)),s=new eI(o,t,r,t.scalabiltyMode?ag(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,i),e.abrupt("return",(n.onSuccess(s.getTrackId()),Zv.info("create camera video success, trackId:",i),s));case 22:case"end":return e.stop()}}),e,null,[[4,13]])})));function t(){return e.apply(this,arguments)}return t}(),createCustomVideoTrack:function(e){var t=Y_.reportApiInvoke(null,{tag:Pm.TRACER,name:Dm.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),n=new $T(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?ag(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,_w(8,"track-cus-"),[Cy.CUSTOM_TRACK]);return t.onSuccess(n.getTrackId()),Zv.info("create custom video track success with config",e,"trackId",n.getTrackId()),n},createScreenVideoTrack:function(){var e=u(c().mark((function e(){var t,n,r,i,o,a,s,u,l,d,h,f,p,v,g=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.length>0&&void 0!==g[0]?g[0]:{},n=g.length>1&&void 0!==g[1]?g[1]:"disable",r=Y_.reportApiInvoke(null,{tag:Pm.TRACER,name:Dm.CREATE_SCREEN_VIDEO_TRACK,options:[VA({},t),n]}),t.encoderConfig?"string"==typeof t.encoderConfig||t.encoderConfig.width&&t.encoderConfig.height||(t.encoderConfig.width={max:1920},t.encoderConfig.height={max:1080}):t.encoderConfig="1080p_2",i=pT(t),o=_w(8,"track-scr-v-"),a=null,s=null,(u=hb()).supportShareAudio||"enable"!==n){e.next=9;break}return l=new Fv(Pv.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio"),e.abrupt("return",(r.onError(l),l.throw()));case 9:return Zv.info("start create screen video track with config",t,"withAudio",n,"trackId",o),e.prev=10,e.next=13,IE({screen:i,screenAudio:"auto"===n?u.supportShareAudio:"enable"===n},o);case 13:d=e.sent,a=d.getVideoTracks()[0]||null,s=d.getAudioTracks()[0]||null,e.next=20;break;case 17:throw e.prev=17,e.t0=e.catch(10),r.onError(e.t0),e.t0;case 20:if(a){e.next=23;break}return h=new Fv(Pv.UNEXPECTED_ERROR,"can not find track in media stream"),e.abrupt("return",(r.onError(h),h.throw()));case 23:if(s||"enable"!==n){e.next=27;break}return a&&a.stop(),f=new Fv(Pv.SHARE_AUDIO_NOT_ALLOWED),e.abrupt("return",(r.onError(f),f.throw()));case 27:if(t.optimizationMode||(t.optimizationMode="detail"),t.optimizationMode&&(FA(o,a,t,t.encoderConfig&&og(t.encoderConfig)),t.encoderConfig&&"string"!=typeof t.encoderConfig&&(t.encoderConfig.bitrateMin=t.encoderConfig.bitrateMax)),p=new $T(a,t.encoderConfig?og(t.encoderConfig):{},t.scalabiltyMode?ag(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,o,[Cy.SCREEN_TRACK]),s){e.next=31;break}return e.abrupt("return",(r.onSuccess(p.getTrackId()),Zv.info("create screen video track success","video:",p.getTrackId()),p));case 31:return v=new zS(s,void 0,_w(8,"track-scr-a-"),!1,!0),e.abrupt("return",(r.onSuccess([p.getTrackId(),v.getTrackId()]),Zv.info("create screen video track success","video:",p.getTrackId(),"audio:",v.getTrackId()),[p,v]));case 33:case"end":return e.stop()}}),e,null,[[10,17]])})));function t(){return e.apply(this,arguments)}return t}(),createMicrophoneAndCameraTracks:function(){var e=u(c().mark((function e(){var t,n,r,i,o,a,s,u,l,d,h,f,p,v=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},n=v.length>1&&void 0!==v[1]?v[1]:{},r=Y_.reportApiInvoke(null,{tag:Pm.TRACER,name:Dm.CREATE_MIC_AND_CAM_TRACKS,options:[t,n]}),i=fT(n),o=vT(t),a=_w(8,"track-mic-"),s=_w(8,"track-cam-"),u=null,l=null,Zv.info("start create camera video track(".concat(s,") and microphone audio track(").concat(a,") with config, audio: ").concat(JSON.stringify(t),", video: ").concat(JSON.stringify(n))),e.prev=4,e.next=7,IE({audio:o,video:i},"".concat(a,"-").concat(s));case 7:d=e.sent,u=d.getAudioTracks()[0],l=d.getVideoTracks()[0],e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(4),r.onError(e.t0),e.t0;case 14:if(u&&l){e.next=17;break}return h=new Fv(Pv.UNEXPECTED_ERROR,"can not find tracks in media stream"),e.abrupt("return",(r.onError(h),h.throw()));case 17:return n.optimizationMode&&FA(s,l,n,ig(n.encoderConfig)),f=new KS(u,t,o,a),p=new eI(l,n,i,n.scalabiltyMode?ag(n.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},n.optimizationMode,s),e.abrupt("return",(r.onSuccess([f.getTrackId(),p.getTrackId()]),Zv.info("create camera video track(".concat(s,") and microphone audio track(").concat(a,") success")),[f,p]));case 20:case"end":return e.stop()}}),e,null,[[4,11]])})));function t(){return e.apply(this,arguments)}return t}(),createMicrophoneAudioTrack:function(){var e=u(c().mark((function e(){var t,n,r,i,o,a,s,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},n=Y_.reportApiInvoke(null,{tag:Pm.TRACER,name:Dm.CREATE_MIC_AUDIO_TRACK,options:[t]}),r=vT(t),i=_w(8,"track-mic-"),o=null,Zv.info("start create microphone audio track with config",JSON.stringify(t),"trackId",i),e.prev=4,e.next=7,IE({audio:r},i);case 7:if(e.t0=e.sent.getAudioTracks()[0],e.t0){e.next=10;break}e.t0=null;case 10:o=e.t0,e.next=16;break;case 13:throw e.prev=13,e.t1=e.catch(4),n.onError(e.t1),e.t1;case 16:if(o){e.next=19;break}return a=new Fv(Pv.UNEXPECTED_ERROR,"can not find track in media stream"),e.abrupt("return",(n.onError(a),a.throw()));case 19:return s=new KS(o,t,r,i),e.abrupt("return",(n.onSuccess(s.getTrackId()),Zv.info("create microphone audio track success, trackId:",i),s));case 21:case"end":return e.stop()}}),e,null,[[4,13]])})));function t(){return e.apply(this,arguments)}return t}(),createCustomAudioTrack:function(e){var t=Y_.reportApiInvoke(null,{tag:Pm.TRACER,name:Dm.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),n=new zS(e.mediaStreamTrack,e.encoderConfig?cg(e.encoderConfig):{},_w(8,"track-cus-"),!1,!0);return Zv.info("create custom audio track success with config",e,"trackId",n.getTrackId()),t.onSuccess(n.getTrackId()),n},createBufferSourceAudioTrack:function(){var e=u(c().mark((function e(t){var n,r,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Y_.reportApiInvoke(null,{tag:Pm.TRACER,name:Dm.CREATE_BUFFER_AUDIO_TRACK,options:[t]}),!lg("DISABLE_WEBAUDIO")){e.next=3;break}throw new Fv(Pv.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");case 3:if(r=_w(8,"track-buf-"),Zv.info("start create buffer source audio track with config",JSON.stringify(t),"trackId",r),i=t.source,t.source instanceof AudioBuffer){e.next=16;break}return e.prev=7,e.next=10,LA(t.source,t.cacheOnlineFile);case 10:t.source=e.sent,e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(7),e.abrupt("return",(n.onError(e.t0),e.t0.throw()));case 16:return o=new DA(t.source),a=new YS(i,o,t.encoderConfig?cg(t.encoderConfig):{},r),e.abrupt("return",(Zv.info("create buffer source audio track success, trackId:",r),n.onSuccess(a.getTrackId()),a));case 18:case"end":return e.stop()}}),e,null,[[7,13]])})));function t(t){return e.apply(this,arguments)}return t}(),setAppType:function(e){if(Zv.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw Zv.debug("Invalid appType"),new Fv(Pv.INVALID_PARAMS,"invalid app type",e);ug("APP_TYPE",Math.floor(e))},setLogLevel:function(e){Zv.setLogLevel(e)},enableLogUpload:function(){lg("USE_NEW_LOG")?ug("UPLOAD_LOG",!0):Zv.enableLogUpload()},disableLogUpload:function(){lg("USE_NEW_LOG")?ug("UPLOAD_LOG",!1):Zv.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new eT},checkAudioTrackIsActive:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s,u,l,d=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:5e3,r=Y_.reportApiInvoke(null,{tag:Pm.TRACER,name:Dm.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[n]}),t instanceof zS||t instanceof DO){e.next=5;break}return i=new Fv(Pv.INVALID_TRACK,"the parameter is not a audio track"),e.abrupt("return",(r.onError(i),i.throw()));case 5:return n&&n<1e3&&(n=1e3),o=t instanceof zS?t.getTrackLabel():"remote_track",a=t.getVolumeLevel(),s=a,u=a,l=Date.now(),e.abrupt("return",new Vd((function(e){var i=setInterval((function(){var a=t.getVolumeLevel(),c=(s=a>s?a:s)-(u=a<u?a:u)>1e-4,d=Date.now()-l;if(c||d>n){clearInterval(i);var h=c,f={duration:d,deviceLabel:o,maxVolumeLevel:s,result:h};Zv.info("[track-".concat(t.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(f))),r.onSuccess(f),e(h)}}),200)})));case 10:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),checkVideoTrackIsActive:function(){var e=u(c().mark((function e(t){var n,r,i,o,a,s,u,l,d,h,f,p,v,g=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=g.length>1&&void 0!==g[1]?g[1]:5e3,r=Y_.reportApiInvoke(null,{tag:Pm.TRACER,name:Dm.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[n]}),t instanceof $T||t instanceof jO){e.next=5;break}return i=new Fv(Pv.INVALID_TRACK,"the parameter is not a video track"),e.abrupt("return",(r.onError(i),i.throw()));case 5:return o=4,n&&n<1e3&&(n=1e3),a=t instanceof $T?t.getTrackLabel():"remote_track",s=t.getMediaStreamTrack(!0),(u=document.createElement("video")).style.width="1px",u.style.height="1px",u.setAttribute("muted",""),u.muted=!0,u.setAttribute("playsinline",""),u.controls=!1,(hf()||cf())&&(u.style.opacity="0.01",u.style.position="fixed",u.style.left="0",u.style.top="0",document.body.appendChild(u)),u.srcObject=new MediaStream([s]),u.play(),(l=document.createElement("canvas")).width=160,l.height=120,d=0,h=0,e.prev=12,f=Date.now(),e.next=16,GA(u,n,l,o);case 16:d=e.sent,h=Date.now()-f,e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(12),r.onError(e.t0),e.t0;case 23:return BA===Jh.SAFARI&&(u.pause(),u.remove()),u.srcObject=null,v={duration:h,changedPicNum:d,deviceLabel:a,result:p=d>o},e.abrupt("return",(Zv.info("[track-".concat(t.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(v))),r.onSuccess(v),p));case 26:case"end":return e.stop()}}),e,null,[[12,20]])})));function t(t){return e.apply(this,arguments)}return t}(),setArea:vx,audioElementPlayCenter:DE,processExternalMediaAEC:function(e){KA.processExternalMediaAEC(e)},registerExtensions:function(e){e.forEach((function(e){var t=e;t.__registered__=!0,t.logger.hookLog=Zv.extLog,t.reporter.hookApiInvoke=Y_.extApiInvoke,t.parameters&&Object.keys(t.parameters).forEach((function(e){t.parameters[e]=lg(e)}))}))},ChannelMediaRelayError:xy,ChannelMediaRelayEvent:Sy,ChannelMediaRelayState:wy,RemoteStreamFallbackType:jy,RemoteStreamType:Ny,ConnectionDisconnectedReason:Wm,AudienceLatencyLevelType:qm,AREAS:My});return Object.defineProperties(QA,{onAudioAutoplayFailed:{get:function(){return F_.onAudioAutoplayFailed},set:function(e){F_.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:function(){return F_.onAutoplayFailed},set:function(e){F_.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:function(){return QA._onSecurityPolicyViolation},set:function(e){QA._onSecurityPolicyViolation=e,XA(e)}}}),NE.on(Mm.CAMERA_DEVICE_CHANGED,(function(e){Zv.info("camera device changed",JSON.stringify(e)),QA.onCameraChanged&&QA.onCameraChanged(e),QA.emit(sb.CAMERA_CHANGED,e)})),NE.on(Mm.RECORDING_DEVICE_CHANGED,(function(e){Zv.info("microphone device changed",JSON.stringify(e)),QA.onMicrophoneChanged&&QA.onMicrophoneChanged(e),QA.emit(sb.MICROPHONE_CHANGED,e)})),NE.on(Mm.PLAYOUT_DEVICE_CHANGED,(function(e){Zv.debug("playout device changed",JSON.stringify(e)),QA.onPlaybackDeviceChanged&&QA.onPlaybackDeviceChanged(e),QA.emit(sb.PLAYBACK_DEVICE_CHANGED,e)})),DE.onAutoplayFailed=function(){Zv.info("detect audio element autoplay failed"),F_.onAudioAutoplayFailed&&F_.onAudioAutoplayFailed()},iE.on("autoplay-failed",(function(){Zv.info("detect webaudio autoplay failed"),F_.onAudioAutoplayFailed&&F_.onAudioAutoplayFailed(),QA.emit(sb.AUTOPLAY_FAILED)})),window&&(window.__ARTC__=QA),QA}()},4334:function(module){var t;window,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=96)}([function(e,t,n){"use strict";n.r(t);var r,i=n(11),o=n.n(i),a=n(14),s=n(2),c=n(1),u=n(48),l=n.n(u),d=n(49),h=n.n(d),f=new Array(32).fill(void 0);function p(e){return f[e]}f.push(void 0,null,!0,!1);var v=f.length;function g(e){var t=p(e);return function(e){e<36||(f[e]=v,v=e)}(e),t}var m=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});m.decode();var y=null;function b(){return null!==y&&y.buffer===r.memory.buffer||(y=new Uint8Array(r.memory.buffer)),y}function _(e,t){return m.decode(b().subarray(e,e+t))}function E(e){v===f.length&&f.push(f.length+1);var t=v;return v=f[t],f[t]=e,t}var S=0,w=new TextEncoder("utf-8"),x="function"==typeof w.encodeInto?function(e,t){return w.encodeInto(e,t)}:function(e,t){var n=w.encode(e);return t.set(n),{read:e.length,written:n.length}},T=null;function I(){return null!==T&&T.buffer===r.memory.buffer||(T=new Int32Array(r.memory.buffer)),T}var R,k=function(){function e(){l()(this,e)}return h()(e,[{key:"free",value:function(){var e=this.ptr;this.ptr=0,r.__wbg_signmanager_free(e)}},{key:"get_digest",value:function(e){return g(r.signmanager_get_digest(this.ptr,E(e)))}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}},{key:"new",value:function(){var t=r.signmanager_new();return e.__wrap(t)}}]),e}(),O=!1,C=null,A=0,N="free",j=[],D=[],P=0;(C?Promise.resolve(C):new Promise((function(e){O||r||function e(){var t={wbg:{}};t.wbg.__wbindgen_object_drop_ref=function(e){g(e)},t.wbg.__wbindgen_string_new=function(e,t){return E(_(e,t))},t.wbg.__wbindgen_string_get=function(e,t){var n=p(t),i="string"==typeof n?n:void 0,o=null==i?0:function(e,t,n){if(void 0===n){var r=w.encode(e),i=t(r.length);return b().subarray(i,i+r.length).set(r),S=r.length,i}for(var o=e.length,a=(i=t(o),b()),s=0;s<o;s++){var c=e.charCodeAt(s);if(c>127)break;a[i+s]=c}if(s!==o){0!==s&&(e=e.slice(s)),i=n(i,o,o=s+3*e.length);var u=b().subarray(i+s,i+o);s+=x(e,u).written}return S=s,i}(i,r.__wbindgen_malloc,r.__wbindgen_realloc),a=S;I()[e/4+1]=a,I()[e/4+0]=o},t.wbg.__wbindgen_throw=function(e,t){throw new Error(_(e,t))};for(var n=Uint8Array.from(atob("55ZBgM/2Bzm2JGhNn//ljJsSorhWUYE66a1Hf8O7pfQGR2zfol8qRP6CDhsi3iG7nFZu9stSyPq/qu2Rr2w8QkTGP6Gm2cg3J5qsQgq5bcHA9mDpGv/b24uEwsixZVl1eGkdV4SB/6ayw2v48hLmNA+w5UlnTCiWwerzESQPidpSUMbamXL3pU815EQm12GhhZ9aWzo568gdZvXevBc/WHfFKQSuTgWva4e4eSmW7UxpH8sY4HlDsCTMu0WwEB8B95XsZwOp3GLgfOQmJBw036DgIKU+XGn4KpIEq77WE/h6R7sZKsFUp+u+2cDnW7IPNe7xfd9areFo0EUh0/9K9CqxUkLqMB5hlgS1fwQHRzKPhQ7gALyc6HwMCPooS0M1NrzjdfH3vUn0PeQ1GBlnrnXgiu8TunfHg5TcbBfPEbxbyiiow1Np+VEBlHNh00PiAWyu024NHaPbDGfMtzu4WF02fgkh8Pxb7bCSpCZndjTytQgAzfZxk2bbe6NoHHFnsviqYzHVpxoPEk7icHRWcZC28d2muthq673KCMQay1fJcPqSTuYhWUZS5eylIguT33lP+TBbOWQI8KtCzBN5FzqILfKzRkzrJ3L192BUF8SILdwmriv10HU9ZlQAyQA1VdegnzOl/dYk2GGsB3724y7w/7aJLHJzEfwrfIzFd5CoAft7ct+zQW2G4Wm2kpoz6uJfgrNyykQgwCO6pkPy1ADrBUuJon9ySjhgcFru6AKa99wTlIhzBw3FKFt9Aa1/1KWWy7W1wAIGzRTs/7rLXRkKFjNqGVXBdoVNTpHFtfEFsuX0X98ISr0Bennlx0h2Yl/CGNb5Kc7i3bio1XJHX24avcMsEAwfdfskCki4/dkStn7QC97YJC3z+7gD84IiEEeGcnn7gHJyeALr0ssbqDUcKqxEyheyFs9FToJziLB+eYw6nMQLmYTrQyrg3b+3YBdgx7pzNEDSyz3tmaPaikwcLSyB/Igo6U/oP/fS2TZLtmN03m4iS76YrDJAgI+2W1GboabuixVcLdxm6SQ4CzUnHSPl1knhcGhW/+OcKa53tB5j5C4wEpiENv6T9PUu4K0YwtEAqFbd/eN2wVAYCKn/nlVA8uiESxCfgs0411mRFk4i1pixJLPP5AFPG9QFZnj6X19TqmhmIhl8D6Q1rOvPCqPZV/z04HjayX4qPzPzP/5NVilN/sHhQe7ulriGmU/3rj5QEuiOymsL7EdCQMc/4mXDPdVrDBfbt6dnv11oLYGmqOP1oSBj02FtsmYrMn9pRg7HJoCh86jAnzuOYn4tGnQ4gw/89sb64NAXcoIbTIjyiHBAQCCK2Yn4I/fNF10rkQlvSvkpqLG2eYpJmpWrcouNDEUtJFR607oNraLdmUKyLc1g7SNpS+ofp1FL6rua/HFSrb5kTF2Vcy2gl+6MACbFRChKoP/un7IbYJuOima/JWFZcs/MXokIx+ijuqjMtVKaYRTzNI5ncPa2y/EXTNdUUFpMhbE7sa39Uoh6Hci/viXy2KFTNbiw+BkWOPnyOr04LjIYKlJ8ud/KvjuvNUGQOHJvj6tpZJxj97tr0OrgZCAxSHGU5JQfqEd/U0QfzGM8Wh3zdsnd9LhoIIRJAtyA2PmjwJk4zTxeYlgwPqAVTU3+9bA1QD+jLZZ3Ffk3MRq+Ar2RT8YN6ASR4bItt3omBj0LJe0zeGY3OzfhljL6LA1m4+IUp+CzeWo0aEjnvRk3iCJeajgdC+NUGB5qh8PWKtBeC58woavnRjvRNphXS4b9M7Aymcfq26B2YY2lS+wLf763OnGJlVdV/srgyAUJJZjarxom4zrYy23kLFB8zFzWuwSMue5Xm1YWape91JGDuRLIctrJWU47/XfLm6Zgei4xOwq1RcjikGuaZtDwcFg9aKtO+JOGJsCjy9AiPnmt+rmdX83GsT3KtTETnLv6ZQcnGtmt4H8AjFgGYePdQc40cj8VAOV8NCLspyW5w63b3g37GXJrzjm9Fym3fh27psjo5RuTs7XCSrNENxKm9jCcXPqWxyuXJSn6dhdWnw5SAnUjixXviWS4HsnYjw4Xt4cSwkqCB9naLstVXt5D2HgG4fzHFNHvnETft0mrhU81IBDTSyNFdDvFEX8cifoc6FcNq7pzXlotl2ZS1FIzNXddZrdXpBNYZPV52gtCok6ePpUR/Y8jyJpE9P3q8dmFVivVGgmKTcBKMDDbzeOfl4MpOGBtBX/Lab/kzqG42sTyOyGUyOoFXYGMUWJ33GPI2KNa/mW8zVl+imshfbj7PiK1qRUn74KjAkH4wjKnu50AONYUaiveSdwnEc1zCjZSJ3dmBKSxhWAcO2PdHBg5m9+JCiPGCVfK9dzoM8Bm7xx9noJiqt4hNiVa5di1Fd1JRN4rnd1DbKglKpAVSoqvJPxmuyH56TFE4BQjhfKbDMZezQJqx+KXDiW1JWGeDYaPVBWPYeZX6STIzC/DjS7UFlqoKgGGAGP17x8wmMRE6O/axG5jDzloCGxCmrymT0ZGCh4g54O1iDYUtmJr7Bo1d+H9RQj2Y10BxcMkLFTIZVjm9e3vtIbeRx0OdXE1Ou37J/WeJZyPXn1fszvp/KonCqVnt862LrxfoB/0sF5gk4Y/f6LVneU5hun9/V1OVre9XrnDBhcVaQa9Ye6gs8sHW9HCNchaFbkUpxSiyxVEFZIlbejbjSPFlkYOLhtQHduwZWRHWA9akqykJNG3PKvOZAaJG5nWQq8+e4K0JF/AXTKIIr4J7zDt8ZR4xb9T2gxjl1nfqzidMRIY5B4rkw0oetta+j8rqkFpTEGA+hU/tw7bDtpkPYvCguwncnCjwULNFT9I9jXx3H4Ws3WWMCit29F7kGq2Ka+rU/MjnuP0lsXkoB1rr8LawHH5gaf8rajq/BhKrGTIfjDiZG5qz+L7SZBZsMSZZ9pM1QhKju+GTD9iC+9HlhfXMtj94gz8U4h7eGXziEO7lo7LwLL6/DVMrGbkv68JYUYhGz2yBm/8cbQEh5vhakbhmpv1K6XYM9rzdsd9bwYcYt3cfKE3m+/NrUa42+RpJBdFg7cAmxsZ7/0TMyVw6Aqu2gzldb2ag4iLrPNEyW1ywaJ2DXMgPi/sjnDzhuo+vIUrc86j4ZLhT4GAN6uqwbnXq5UDzX7TfuB48oMvvE1sK5q6owkdWfklgnC6pSBpK7wl+e3kuvaYnGRGJJMBQuVgWL1awHrVtfOTsSE1vc0ZdG+a/Jbza6pHbyfi5L7FXJAGdQTk0EP3VT54+F7RZ/MJ9fj56aMxzhJRwQJ6df3cM26qSc5bW/zP3PFXypTOBwzCvVtwGQzkGvDW7XGwgLbTNHDpQXOd2BQ5Zd9bjQqGg+S+kIqWZVZCqVLfyFPF9bEOHfPepL6nRDJUD2l5uRnXqeTvidaSIoqS1Fbc6mLPtYnbp6uuts6Qo8TbMzFuI7NuaPuKnQIyVu7vUGJ8jg1uVOjlMNKdVtLPr9/ZEKVZVj7lsFA+nm3zRjjr1DRKhr/wY1CI1iXKVTeQZ0i2PSnN99j4iVTSwNAYQLWWD+KyZ/xRLVxmZQPuSkLeKBRAkavxjWnIFQb1dn72wMSUdcB9cNCNJNdyTkrl44MRR+pUuiVrTAnTlzL33X32eEYwT+vn564yxFJLUDyIMNjJ0nx+GreKSOglI2et0kAwRHKYFclH9GVTiVlB0TWeUJGD+7JYogF7BizjTGyPOUEWQCguIEmtC4fHD5461T80Z3Mp7rhNTI+Cswuknr9hrIZmpRyFSrSrP8R4S1Cf34Tu4RNrDxpofVK9nGTklZPsYM6eiP29Lx264fsX9oLdYhq7vCwcrRMJ1a5d0QHXUYRV5IqTFBoUSpxkQ6IHHL8ckM4NCzwk8K0CA3pj5Jp2a9wZjfKq7R/eukzQFuhMxV2qgHf2E3t7/SA8N7sMvsmF0p3J96QRE3rA85ekH1q8nrBVujlIqahmL0Qto3+JxdqAfnKMCblQGSKVWZgWLMm82MG/9pjhdkMzG7C2GRLGMty2y8NhX1pZWHNbLOmvaC424LNz/Nl5tkPv7fVbCT2ItB+/dx3ZhVhmgSLd1zL+2PsNFmj7VGBruTttezlo1mDKErjY27nTswjf2fY/Uq8lPcVAgRpJM+m7jS/8dk8cdl7fkY7Tuj4TfiSe0tiNSoJgZwom4+9haoBQ65AifaB7pUiTc0MAXCvG+nDydkRIbKx5fL6gAlyMAnBbQf+Qh1naLfzzwLVTP0EEyoenW2W1zKqfMql5rwGlyCB9mSa2s25yHf4SDSBlgEVMJtplpRgegZvDakpWDKgx3UR4W7yKW+RD7bd7rEa/GQmA/q0RYAOIaXfO/2CgEUPtNhPS2uqy29lBYFPPv5SHQ0t/jRxQLBpe09ateAWKypt9TWS7Z5gynOePS5M2NC16AhF0Xz6s7DUjtI0xNho9Y6GK16J5V8HqHypV/OAz7+VBzTaiR57XGH4r62GoAiJqfWOM7okzKCeeSBnOIKPHtwgM0SQbvCvv7rmS6ZAacu4BbXZ5R9gOhdR9H3bi7lWLBNnqqLPIy0k6m4XBhtl40B6z/5AcJxjtKfwvIExl7VsQRqbW8gpPMsmJZfSp3uC35g1AkP+BJlju3RVoFZNo3JR18A5uc60NGD4zvzIdGTAOth4ZAZx0ZGQItHuNcLz/0CiavJdkjD65h4avf1vf7LFZ1uogJz6vLK3uDisXIBIGkXOlIpxTdjjjTQt6Khy50bYbXsG9JBrSUGhsBWpeRUnq2cZWOifhfueY95gFIDAu37oKR3FQ1YxGMg3UMq+L2VN2rtqodelSHof8SyYZVQWs7L0bjtgolId1tAAjHI7J1/+JIRXeUBjjaGGQAU+az9XFfiqn+VRAGG8JDdP/WmEqjhYpcy00LIBIBzCF9I9mbXCv8IX9fhPlI5NqWGO/v0ikpfn+hb5U16FcPYsx+xLb4la6nSbvrTDP5MthPyeLIIY7ZE/rNU4ajgPmI0/3RvD7WtEbo8UGPjnev55N2ELuFpEPzkNu9MzXqq8K0cWxk4lT2DQPi3rDO8x8i5jX7wWQi8e0neCMb0SUO67zRfaekZONGfaFl47LByciUuy5dhqxMPokhTE2WbzxqCyt/s2TqG66R0ocYHmzv9f7tJ+TES8NFyzL3fhNoZoW5IxWNE+stYWutd3LPwa7HKhhRAbl5uCEbEGjrUzTXwbzG0qvpmNtpnYnmKjzTaSAFNCxfw9edcjaxCiRKKIDd6GS/eDsGBgTvJexDfwGmVWm9jadZhee9jRFiZFtL6m7sY1oQa8F9ycxSuPANXCqWkApcaEfQLkt1yyfeRs5yC5O/6XGJ4TEtJmCTPJFRr95au20STIPgkoEF1mzZ+5ZRtWKUYuWJVZDwcA/lTy6oYp0/d0LGPRUXnXRm0qtIXQVdnoVhKZPeWACt9rujRL57MEDi2kHtfV/ucu+k03bN0fQlbalUJ0faY99GC6L8MO8MXTSmqDAxNSpqpIFPhgHgAg0YK/GZhlQjbQXE4tMDEDO9obNfp4W6m8fdznMesSSRINBG5FDf//DkT9pSRQsIdSg4VK7W7j2d2jsQUIyjJmbd/2zCTaqh0Yq0cH6mS/5g/cq3eGOiJbaCNo6oVwGURzXVAeVaGIfJFhd2A59sVp+rVfe1f8B6bVbCLIKgGUgpUokO0vTg6ouAxXGQKtveMhhBT83ukPIRZ02+qF1kvM+nNCVy8uzrB0+W9QIKbMio2m/7zW78xd5Tf9itocpLbRuNC5cuS/GyRGXw6fzFzjM1UITlQ5dlvoyYxuvb7ol4S1MyhkfMNZbif6/xic0wB3uSScez3oFTRbCHBd0cbJL3cLwfQjCBpGBrRVC7174qW4XWnw0eYGSSzTVSEDOlMaTUIGJO+s7/z8JxaZprcEsoB4+vt9/+uwtM/iyqLVPidu8ZTh+F1rsEWKwZhDAg/giVc6VzRq+DJCrhn81b/LYlLJOdgoAjID2VnwgU+mQhCL6KhgIqqiVraD25UIYEqxMcZ1aRcZvHa8x5gh5onPtsVcl53Xek9BOYqkyj64acX921zwqoY0lmNA81NE7BzVts3cwWDZ4Dk6uuzwtfJuJc7vVS+fdVDEg3ATwC9oG5/Vb1swTyzTsl2V4m+93bSQo5STFG5AruTDWTym6Lxtt4OrAeIVgdoyTJL+keHiHTNiL0/nO5oYwftSQK1aYBuA0e12t/FVN+LsCk0L/hfCCcke89LuP4d46qnFo3NLpHb+NFrvekXVT4GiZgMW2H0orIY0TpS15wlxVUaGCUo7YSN0yWDRU5+p41dCOs5/vXq1do7K+Byjj35/mPlQ+VEDqqF7OIBQrXfHgCXYPy8ye3Ih3io+tYA6nK0/2clIERrpA0AMHKLTGEO7q/IzIcOCwYN9W/ISH4v4uk9MhzNu7Fg2IPCq5CQF1GLuzQu+wNv2h94NIA2UJydawv5X2bHkZjv+kB/WQCYjxUNEU8ssUdxDZstpv2qNAHmI6BMD84olxMiwFdK5J80zc9x7de/cz3ZNIkkGIpMCZJqKKkaLVo1MLnR/h/hQeUvfqJmvkPeIre3EjnliNkKJKL0KNaupHzY7Eoztaj0cNOhJ5dxIRB2is3kLcSK1FZswRJR0B5OXX+Q4UlFIrhR10lIge3Fg5DnaGoZoOyFaaHztrdF251JubDsCZRDSWA0y6ysykO+h4jhXtuWF7D5Wp7B4Hx3EQvKsmPPZYcLevowjlWghHbRBEhwPI3bzjhNWXlqtym5ObYAeYxuHyvyYue2X4651f7Om3+m8KT7Y/JqLWXwgayCdzxHuJidti1ITuf/oXzeCfTRbG5ytXlDk/epX061W6BO074jI7nV518OkYtRJDnPqdDFAf0uWcATfk0h17+gP7GHjy0Rc0Ive9XmvA6gCkoMjNjMEA7GQ3xy7e12DzfNpIfND7GKKojMifTrvkDXrfa3o4wNYktY6/VlBdHtrcH9F7uMWICej/BjZXVX83WFGcVHx3nOXxSL59kE9bSmHc3Xp8iDbPuSG5GIRp3fTFHnmTzzGedl6al2gUbGFKtkC0jFNtKTk2rr8LEObiGgfCoSpTWknvAYDQBoj93s0KiRNPOqgY++Xka2cQiDwqUsLl8/i57YC/V6sy5/NvhViRRZgCzcyjNHGzZsYA5YMtUntyfC1gNFP7cL3AwVA+326NJI7MQJoxTqcHL/YhntsnYTR5R6GVVvFYIlW8Nv9qn3daoGXMz0MoAsXpCzbiHZ0XWkfw2qlJkmZjgQtMAEhHXNgokGRPfOprmtlvNZaNlGB1EjQTVX1Y4tCyJFZhdhID4CowB23uQF16NifyxH+DGnQrnxeklnG7UQV2BRVdr6ZEKZYv7Gj+PbpojzAskvbdtaFsataqPrLDoejjc6ZfPA5zA0iYcCvcNjzuy9SuT0uG8NWMTLv2OsImL++PQV1sifUENAwi4O3yBvzTy4J77B7mMBpjCYGXAyjFGFZL4eAazSmvZ8thJ0FFW+keLHL+ft1dQBKmXY6JatelGebcIC/PyLBHdfX9bRcauGg4xEO7mMl8AjlcPMczkPniNQpiQFqcDJYrFGoxMV2hskxMn0bRQT8Ajc6w6sQYkGl0CQUImPrGfie9dsk4mrCLMIFOqcm0WT8O8AiREEGmooBTO7WI0qk506NsV7ffvc0rVJERJKcyRyCmFZdTSn/SrBfjV7SXT3pQlgluoY4FBUCDDkzwBgjkrE1oFUA3ls+xVP10w5jjBIMwKBSQqRVAEDXw+Dyj+jH3ila8czULWsCKhWd4qGsMFN7++OGBAz9eXHjAO9m++mTXF6qiyG35Q+61yjYQKsBrjR4NNexrwVGqBwAZA6cr5mp8AhoyzPomJ6TLfWEJjEeRI3QsX5oQkNuyF7u650QFka+VjFeNRY6ALklleTW9I0v4ABKDCXTGkjv80vqVNk+FTL0bJK7ndSjjMJD7OBFIEywBPJFrxTdyzocmxEgG0zu1VDgsQuXITYCx1RRty89A/F+CdSAlbMlIkptCC0GrF/jFS8PAU+6TNV1eBqJrCr9BgH1mth8FtdfE7druR+xyZKn5idfUKzGW6ACGF4M61IRoSs9o6xmaj3dnAVQvFWUsMcR6MI3xTKJNyMxkhXhhvT0IxialnG7i/BBzXfMXYh5jl4BXzCSNlxU4+aboEgIDr48/+pfj8J3WcNccFfzV6eiX05qkNktmafoBcxrEsrM8WQV0VVSRybQyXPOqJ1yndwBI6BOGO9oGxGDAd+HcKaZlptCMJsR1Cp3m7F9HpBFSu/NYVj+WSDY7jWSFBlTBSCFyyPEUn8S9NmBVa+mwGVsz0Q+fxe23w1w6wVO7sVnZqRpmXJeXg72QFkl7Qda1lBzn/FW+rRwLvFxCsuad67Wmzab1RJdzPGsuq8AzW6tL+JiwW/VPUSBbBmV1+EjqQ28x1u9W5Eoy7zhsU8NT87CtNbZ0lPEpsoWMewxC80kPanfWPrQXmixWDXXz7uf1kBTr1J/iYuls7fUsyAChXjKcKOaCF4ySqkhMTGmjNqYiG5joBUi/SZpWvgxk28pyIPhf28YULINiqmbWPBKuTCLFruV7JfRgGM87XfNEFc7tgnYx503k/0UXJfpmjx6wKbKcvV5fqrctx+OrIn++TxRxSKlTScEIwd2vG5mg/p5wsQDpiD+X91XbkReKLB25Jvp/IJaJh715RXqBzwCwlY3URonyy+oZoTD8Ym8XMMv/dMllh0LCFZkZFn2gYcLG9iO+I5S/GyxwjajQLQtwH7o+n50vimC+ES8ePOpPDwlu4oG8KhS7NL/OTdIWPIHbSa6/9DfjOq9W66EpaK57R78PpEzVNLkTP2L6lllqDT6SDhIDIvQS3SQbxG96khXgvW/rME+tiXFXi+BC0udi9keyGlc3sLBN3CP3QXzswhBGTxvz2LmRMkU3rLuSkYR1Gzr7vj1VxTN1y1iciA0DswsPZ38eB6X10Uzk6HZqjzBK+EJ5osJJJ/s3b0MFRIWYlM15TPm1uzeOk1zQ96quClQLEZbpxmV/eAduIotXUYQZjWAkTulBJt7kw9uEnLo7OpZrf8k+0ZQP0agcOTLbfrekHji86Mxr7rTwve82mePKoAkkEthE45VI+f1VqpyWNW1kbBbVVfuatKt6MEKqyTUyxSFGHk81kY7CxkgMNexiikN0+IeiUNsfuktjfOAiMfDhbTe4rtxSEPvO4CCUGaktA58TGnSO8rHdCicmGkNrwWsnXgUWjhp8bllNcnQN10TbwxYPAwQKW/JJiYQadr4THXO+vWudiq3I47vqmEM/Ab3Dlq11Q7RmRWntYOEyESbTI8PZYwbtsmjcSwBtTAIHQ5h3I633h3FpOkT2c0PlMjzj0Q/OuqaTVt639fowVppqvSlNcK5KupBnrxfKHQK+SoKSuaO8PNMkYkbcEAc9F0I4uzPfRVP/q5QkvJVsVoJ8BEWW/q1+kivHEMQfb+J2NfJjSTG+WhjHjL8eqi7FgfVewxwmqG9IOnTkwDjAHUaJMIyhVkadW/+GQjLyNP4zyHcLAdWcB5zQ2kc/blAx2RKfG+ON3RfC+iQ5Th7V2i5abkoy0pjfyOwTjIvaq9slSCtoNGBZggBDOiWwau0CX4NAIThFyqu9VWCLr8TsqhQZvQP+xrywovGs6A079U7YBjhEXyQw4Q3rbQY1EQnxTPXNlHfn9vQnuhsJnzx6PZrCqry8fidPz2U1scmAMVPHxa/injIf+hDziEU02xWm9ou67OgebktON9V6wwVotoNOzVNJhiDBlHbktBwOjX1BlJHybLox5y/7NhR7uc8f85O6xdxueabhwtJjYcBzac56v6RbuI9IRvPzOnNbltj8Hh0ftwwhWyHAyiEat0oDSEVZ925jmxJKAqTo4/uHnkozgMDsnkzXPXBDJ1sDTawXy23mXuTJOYV6ZVWrervMaGGGQpgQjAnfP7KPZro+OKt/MpnoM0NeGQgIFAiH7dU7Nl1QbcMiwO6/5nIosJtrFB8w1kpqb6OjI9BgZHG1nzTMGA++HNrl4WQNcq3SajD4C9utQYAu/fETPFMMJeCDwHRCnPuRAlqJ5t0E5h3Wlh1Nw57LQ36kDjC3lS9w0a89eI8ym6BzEA25Cdz3LQAyz94Fvjqp7MyHrpm3PzmsV/tbSLF9NJBjFmzWPQ8Tfgvj3fi8dg78tXvEatqtUhLxsNp2VCU6IzSqafxWw93+Wk47skJv5qxM+tv7CrpYKvWLEylJNEXlh7GHm9UenNf2/szZOl+54P4ZWksh1r6+rphL68QYhmqW7DqKVrc2rjzPYcvFDmKtCGL/F62i3riMV9z+LoLnuVaMn4dtpNNFmQEQ4uEhDfLYU4x8G2OHCz7gnxLCa4zE4CFo9m/+ECmdzziVumHM/P00/BESH2rxUYMBL8/9NRG5fiskFJr4AO0qNUKUCgTRgEiFsTbGXtP4DTTzc8ZAmfNJuJQE5Kp7W7U7QZnBXKepfSHkYTEqgOhqo95Jw9i56kYGt4BWwX50mC27CCW92SVMl4tbUEhBDSB36zgztz5Zts0563Kjc34B+6ZUnMIk+BiQNvqSkZHnk3rHNSaYthO72IWLIxij0hcv7n228yc82FsQLK9jmptjY6estDfH3OSMaAj+poCLKwRFXvXWb6jwM9mG4nu1yug0Cc4L89w4EYek6dnV17VBfIxB2dmFFQdp0kqx3BM9gdMAr0KS7WLOSf3cn5eDItDLP2UW7MWaIR+GJ0EGcEL3ejBdu0to6vDh04JcRMNU55usmSn3jp74myzWE3azMIT96wr39F62c3G/ldGskbqTIMTk3gMg61vNBQ0cJSIxVdcgNb3xFDowwVyIqYz54F8Rqg0uQE4FIiUGZxJhND/AWhkukqIqLLZEpxj07kPBN6Zb2pWht/X5JrC8yJzPlvFhfJndQ4jcgjFyhvymr/a17uxTKHpKNWDEoL4nNa9/Prf7TYRw6Gyo6vcwYcUHk17SMb9aEdVnx24msNCDEKbj0OVzRaA3gFJeXZPObqJKvWqFlavGpxXnP+4ZYTl0Dmcri6vMdwX687ApG+ygiGHZDwNzU68F4JMPQ9JB45vLkCsE2w50QNP1kJZlI56dVGzfK1MyRqP4J6VshesfOT4hzR6MYq373IoONlLvENdYXN6pTxo5eRzQkwk2tZ1zmZqczCytqTEhpweKcBCCZ/FhizgLm8/x5ScBlO0wEXHZm90mpmL1gR/J2CUnz3wDU99YFFKqm01AZ8q2S5Fnh81CbD687c7K2OjWlZgdvEJA9M0JT3eKdIRd9GCx6g1TO5PWTE8OOphUDKdazyYnmMqFhFxfJ//cWJTsgYbol2a7Ob/Q69Fy3kb9K7aZLzH+Kl/uCzWnqTOrQonVL7LTFPr7wbTaepfAl5zSgMInjrGXY+Gspw+fCNgEU1zyC0Suum6VFyHBjdKWft7strrOXqOSQwxsYXp4F013mN9gZyu4Hc84A4dzIHN5UNXmxNn+vPjS82JM6klySWB9pLCzLBUgXiMDllaG6fT2PSBv/b+yaruyWBVcpsOKuEaQ37W3A3t9YFRcgB5rFMDjwOn3c0lfsg+5V+dBX2EmWLTSelNZkeq67CFnxaKtnlsAJRPBqYvoWVZcJKn0zSelrO2TwnailO7zgAHaMRmQYbXo9beBs16JWf7V8LjYGS/DYUKTTE1zKECC/pK1EKf6mxIgmV+mJ+Mc8h04qep+okIIEXaN351J3N0VUk7cEEaOLE1rFF3W4vqRcodPfbLqINF6QtTsfny1+O46J5ahlamZEyxglZtpjEkKd9yKDsgwnzqoAPN5o76IsI+FRaBc8u1qLBWxpKU615chTVegNFR5V4o1T2JGwVkueD6CjAhOplPnRyv8sauMnMy2wEMARR6AmCQ8S5ebL0nCEqjSztMoUyAEjQ6FDYqkGweu48DkBR5HjwlBloKVawYcDezxKBH8WWnMpJKZj1Ol+OHMmg5iq9xDswLx0iTNkujgatOkeRU0c/GmSSH+7GTTMLQJdj51l3EkojjEwWOjw8XBOm88GqC4bWPEE+U/5XYtZNJG/X4FYjgIvVd69RYVbMEMfPSKJ825e3XQ6RBesp/G+lkMk4VIxRakyUBPLO1u0UYnNG9ExAnPdOO0OfFvcPOL9rBJO8bR+q9Lp9/i+fH32KkaNR2WgoxQY3FY+rS2NUvtCOgZAaF9vny16WG/3zeUtRP9V28PcGivAHAwwCcRk0D0iohjAfgL/EKXJkr8gIFqbNq7lXUFRKqMbpBa182ol77SqJq1M5setGUJuSBKqYBYKdDZv3XdT/u6J5aKKkLvA5ez6PuWX0RT7kELSKDKfg9w9nwSmMmJHjbnr0blM2WvpiirR/nLid6SRN9+5KoLUb+pLw3QzD8JlS3X2q0m4BNRxfltr5KWqryOuuGDt6IOHSE8/zqGXMiTqgrUOfDH58NoWe0te4mFc1GxswvhZXWJZmaWaMJo2SBnuXa7+jIfFbnhNH74Z6jygwcqXsldYfI/Zh8BZbqTh2I7Hu44dilfbX8Uh18NVB3phRnTwpUonKquUs/iZXRnDFjtEmKg2YRQm2CP1FWRb/B92HqJlHT7Hs/Tpl3RrlxvkoskpNlW53/6Ujse0fkHLNeUm97TlDsaRXpfZkR1uWMTwhPv4oYM2Bv941R+c7nQ0yBdFNVQpZRkpejmIfjFrdQUA7DPwR69aq6Pzmk3IXarIMKG6R4MBdkB3j3HWxohnZLWpaNy/BMxS+84e4vPPfO/7+nLWVZsdpUY/nGDkQts0NGnRpZK/lW60tmncMoTepY5fMbow1GyKhqSXLbOZkz59l8DG9v9ZHPwA1roKz3MW/j2tN/U+lPQVYXTa6h1ePQkSWR2bp9OHmCCvT6s8v9PVG2ufK7dkbpY500gNx7fdArzH3yCjY33Fa5TbOuybLNdW8juJyJtikDn+5jMnMzIWP/+v12XkaXj195xk6eOKuvA5zeKk1i1PrSnmWA46Ca2ldgNqJ0rvLqM9X2EPn/QuMjLnLg0iVJ4H4r5S2PgpGdSdfVoiX/rBAq6yVDc30v8DOUae4oquSM0YDCIafLQ+hvEmB5b/f+QsTFtAR0zIVWeLyYbmrx3g9gHhVRfelCz9/exh19AGsyXcwuSaBiCzQIoctYvyhhkdCsC/cdZDce/1Fav35JQt+RJFAjiMRQhCdE4eS3SmfsREHe9LZa0ElOLhxxvs5uS/SnMYssyK9FxiucRjjOqfaIp2N8CmuNJqg3WvtMk+MlbAYeji9K94rx6U7nj9L1TGhVcAyz+Gb4sib21AW94HRzWbTrRKEkx5+KLE69Vc+8Cj1Vu2GkZ1AA2E4kaJ2aTjsEL2C0srAINXRAjnxwI3p5ED0NRYn9sT1iY9GPBJwhhd6WXEJ/Z44D0rufaDOA8dUj1SIqywRs2b7SjYcCYS8eefkwdWlpN0DvnecdwHVc3TqyCcUy7K2PMS2l2KZHzZfLCTCPaPq/NVc/Nlc5hVJoFvnNUpKWZcTsxVeHfH1mnELREECq9YES9v6FcvONCxXLQmf0k3S2dyNmsxbvlXM0u7lSqkx81md0rad3E33PPuPpDGM9UiBhSeJn3Sejmx+LdLCiZYcVxow59nCqrUmXGAbsR4O7wVQzyHdL6DX5s8k5BjHXlONz0PaIqS89xMhkYetMw6w7JZ5c/oJBH2jdZPbS6KbR0RpEe16BATLzU4QiHybxArrjBM8MKKP8Zz6MVbg/d8yb76U8nQzCK4Eqa5ombBm7/6xo2dR9O/ByfcU6qDu+efdLFAP4LiCr6C3aihDPjigUYuy0voLuX3Flevl7xXRtRZ4Vc48j2tgA7tK0wqv4OjLwCzZJn9lYIQuScQBEFMBjA6Vj8FTp4h3OphB6g0uA13nTnVLmKQ+zfELl+6znWX5nCWvbwak0t3q4qwWK3MAPKE2vqDEeCsFKvmJ2Ws+VOqnrA+ekCk9jaszBsZd71InADWijT4SHnyVmc55dv5ivXl1fED4vwNrxbiZHWeGinS3ImcoDAT1vGiLpP/D3NaiIPq9A2h5DT5SgaCVCh0JKu7DKsHjW9ZAACRxHgTSo5jrVWUJfGKweg2auQuittVidB+JaCdwYd0x9oJ4jyI5UygrB9Nzi2gbLVcCnpu+1ytsiWCbJb1Xxas8FhG/EX86taG6flZZauhaGnpRyfBB5ojGdsdPBVHEtb8R951oaNTvKXK7CddSeWaeOi2FIDPEhWhAk19RzuR9wSKEwvvi8nQFz649+fUlBMuDL7VmUBSsC1ExWwqY+uSdNKowEkpsBb+/KpWl6oGxymyR/e4uKjipBJrVPXg0nE2j6HL2JbCHNh01lV+/+6FUglhV8GTypzdvdfhYc7t0ZYtkyH/17wDakU7r1GAdUIXXmtxamhK2FdelBa4BPryblCC9gJG9htJue9LMrNS7mM6gbRA1xSFnWNsziDuGZeS3Dcu4bjsWaIebrgNnxpl/pLGxV5EtkFwDeh8fPyfPU8CZAM/Ljk3+Vi7jUtNZmZM8+f7d4wlUIkTHiAULRUKu0ODFIeyk20BiqLB7vvAT342SIDP+z5FPaa6Tjyqh/AsX2jFhbeIXKxDMb8fid0jHAWk6JKhswbtvtP6bDz+lYjvXIPwV1Y+nyft2uM8c1aUxmDHAUmZnJBvZXT43mxjXDHP05R1/dKfoExcgcYzv3wO5mazi7ugS01z6oUmByKtfQ6fA2+MQynPCoDHcp1eDtag/E3HQpHMWAgGkNh9wWR5Y48YG0W4CgvOrngI111j/x+MIuH5xFlVkxqptSjW+hnVbt9qxtXndEH5RtnxWfd9eP+kli/x3LU1WGsZVAkVElXD274LBGK0bMveEUbj/6EpnocEnvRSlglpE4GiAO5S4JdYb4uYd6oeK8vuZvTQaWMS3dEIJ2ssCxWz8DqYmc/b38ynz0DWCCeF1gCyipaLG2Kq9wqfHz3S6m7CS+H42nmDYAz2dYcx77M8purGOS5tQ4aykJXIDQBwHjIGSU+52M+1OV53rp4B3JbIXecQWEjfk9gkVoz8T6HJbIhFgm3quNMk+cIyRHlj/BdURXY8o7H7dBQfsdpLJhAsxS/1JtMkY8JoP4YdyOxzJY5x/+A9scOTXvPVoQAMqgmP899s6GvRtzNFGXLX7VHSnUj7VPO8K1qxaS/a/6v/YhRlUtNgnqnth3Jo/DKbdhdPn6HgB9YjU5GuN1uPyUXZJDZYfFwMfdqNPVoI8d1csoHMK5tquGoK060mIwBHMk3pFGqBosajr9g/5kBPrrtuIIEPFZnaAKSCQqLdeQq2B6Bs8WxD8+DfzGJ2nu0Xeb58spPoiHZAVV+I5lRUseUE0IA4E844UzFYADNYcLBW3zsP7aWzLnUZoQPuIDR3FX3bkM5mCunvXaPSi4PRkKnItEv8/OYiq8RSKQcaTwxX9YgdNbgPuXLwb5ARofv0Zj3WpHhNnlTq2Qu/lwvM3PUaqv8L7kpFqQR9aRaXfFanbLgbyxJ2kAx9oA1kRMyH3JXI06oQhRiZQ1LtWz+QKKxme0zAgI2q6/dmYApsA7WGeBae5+Y3eqkqDjXyS7Q+LzYgrM3EiqGHsibaKZKgFecxpGiMLXY5+kkuDKBdMkj2Bd8uTKI+aTWpu97gNp78fm891zYuT68sIEzE5JggpWjlWFSpzYayxvnOxJ3JYK/q8WbCy14KhtCFhdLOxCEAvyqXN3K+oP52ZzdxHiCAac5LX2TO5CTmkxp6zCT5JZDIBgnnmQU8GBowEvogfPni17fE1sljd55P2C4mWCNDr8l3hMH+4zpyZqp3iFbJx20nGtU+9LJozl0OxNrk/c0C9chEe+k4vUECnUaXbS8JqdnymqbZ1SCI+4+1BYMW4nzYKDLaqL3Nm08C/Ug7zNg2BuwhWepXrkqaRX58LCWLPDQyUzn369E1drtekeuNcI4SgdmyQZ/7xhXZ6sOKg9G/HEiJQsriRQThvHz4BhaFaXic4nlrz4LhUthGBLbnnB6tufJizYx4c6b2rY1E63pLDA8QdZsTOD7euNMku1a0T2nNQ9rOPBYPDyksaP+EmKTvqcgRycKMtzhHh37mAqVERuzIIMs/zXE9jGBpJBBWb8KCPZne6Sxw0+UFlY6/VeXJUHunHXY1csfc40Tw95XrkpLzxqX/LrsaYM7Y0UQ/Qe6PTjMQUXDseSMhYwHTXCohySQ+1fIjz/yjZWRFI1/a4d9eQzWLoGjz8O8ldPhzhpWFwwlaR0T1gpMP3VeHvDOx4RJocHJOSRQ+H4/nHJsiuXWDKowYZZW8Jk9vUiw2jExedn7glAsC/bgN1NrgIp1y+y3tmLd2V9x7yKVC+QK6MOFq19dlQflj350qUavBULMCTn0BvCRQY4q6VjniU6XHISUsaApCVoQeevAOuCUFcnwWfK+44XDo1qSpPF1wcnbH7N9aO+AzD212PgFlGkXlaQ3Gbfz9XIUMjulgGUREelr6IX+tR2K9H/yep959z5WLXlZ81Z8HCIV8CyU0JKYzkIeFqf6o2ywb2O73oRi7i8F6Vcn2zU1VWZpLfSXgTNkRtqM7r5s13UimLWtAVZs97rLcMRlwXzYp98ZnKvQLj/dpKn8nfNnU9V2Bp90frlQedeKt6zd4mPR53FKQ1J4r95n1G8ph0XG37DC9b185sWbnoyC4Q1iUvyy5IOxBrIqbqn/JSUWzdrlOiZGDJrU5IGuzUl5TaupUTIgFeLfT6uh0gIEJ5nZQ/8XjB0mmEZxTvocrU/BFoOaUvV/N48W3W/aQu5nR3KwsSByfSDAEq6qBqTVTkZtkaAd/1Rie2jkdRlZvxFMu0MGnLc0SHPII8eOz/bjfIhSQhAb38dSRcFmfRb+fpDrDHeazED6EHNayy0kESoRG+XFbJa6xWB6OlbwHVDwdO9Ka7bIOqLRHpZjwXmv/2DR9nu+2xwxE39cBHq/7Vv99HcvH8ZJeGmgHr8mBKQmOCTkvLkxf5k4FrqZuNpaRNhCB3puFuF5d2nnQbhgAaANLMCYAiGsJhX2bFM/r3BGhR/dkGPXeBQUJ4tTARQnVqA07mW/42Dv2k7Wa7hWU/wv7FTIWLwWyHX0Vqdg4BHrlJ7zh+b+T6fH+W3d53LS5rkXK5GIctMIttK+osfGYIvOD0BkkXBJR0EYUmteToIxpoaMVKZmCRC2BbmBLdUTIZiI1kVYKYnq9Q5xMGODu+6vCT2ofvYE0pmGbQ9Ln6wnBDYZUD/BL9rmiPn3n28Zs33OsHUQcLp2vjUEV5sOBLO2ScyescGu0N58y1q1NSNJuXCzI4fu4RWJtSIn3P3+9eAsMo/2NupFeaf70/usLGd2Z0F27EjLoIj+nmJ4/Q5edPFhVNpPURQrUzPALNNzEvx3e82rDtPpbZjugv7Abm2q2vMGwz5W+hGH0hkCzXdZhPFbLk0sR5vVhScLgAPdZIVZIjTuzwIKVuWmvpMr7Gwxgiglpy8ecfOAZcCpXRzG6lNuRB64D4G9AWD9vQi/crWV4Xq5VjJnRjQc3g4bJe+MmksjEctghn27n5i5PHZvW/gM0BsXzo8Pou6yOLnp49dGXpK/oLAbOdOel9h+kDqEtZunvsXa9EFomdl0QbDvk+H58SjszCVqVOXSgDpOdZjXWfZpFL6S/fd1Lq8FQS3LklgiNhdvE5GzgSO8uq3gtj8I2o+JzucnrUSrtoxa6IejmVQLGzF3rSCy3fdhBPhZnDdgctC89dRJ+PTfW4ga5WWAyaWspzFg5251FoByB8LUbD3AxhvV6M1ARNXRJ4NhPe2j9WOlu5I2KmCMGvGP5CbHAyZk3YhiuIdtDgOvre9Cz0yOWvHH5FpZQzqzyHE5XkTTFMU2JhG1nvne9SCi9zNvPnGj9h/bQXgpue78rpogXJl8oDSfMwz9fp4ocyOxEV1JCEslSsRvodEzPbUsMUYWDERNzR6f45Ku6EmW3qdD48dcFQtc9rr2wF3o85edZ/2SY0BSkOdQX1ahwPVBP554Q1Z4lbd0d/vrRCO5k3QBWOb3iML0vI4MRkiKwqt735Q2fkq0Xl1pI3nk4ll51cSEHOrFTctkxwLOiQl6HJh2q3iqHFmtOCSo0A4YLl+mllolm7FLpe/79gMoe7A5cbFPCbX9Z3GhI43FgBbWoq8pwaIoDlklRimVauOx355pv7v26P0MLrgiqWTOxJaIGO/UhHf7GSOm0r1O5m1sPYYn1bathmEkYfrQLiEWQ2/3IjunsIxgAmi6t4JsxalYxE4YyvD59EpzvswOjZUvSgkHwPZonVtaiMTLXnV3p0dKpCSSz38Kv8QbNFzqLbwbBBRUHw/nHSxNipNm5vtjfkuf06jWRwkctgu8wZqKwS/7IcGnFtmwnbJFPhpGcyV9GVFzCCG+TOeNgAWxOUPgmtLdD8JawVVDV+e3iR8kHuaZXIknncI/3uFnblTd2P/OdWvxl+9CXbqJb1CS8osg2fg/qaA9KvM3FQoZQ79JRZC/Upm90ABPCGzksTWJ7Xy9VHpnPZCgGzAVbJhmurq8tm24BjBvnm1GOKfotvCqXyIXFE1bYTRS1WtzgZrGWgR/oOUDnNgDPXqUfTmyFPfNCD9MX22hvuBans/Kl1DustiTunl9Kravj0NG1Ds5nkTqlQSYOfhgvRIowimmWAYWma55eqvaQL9GvHmuH/hIVB/tiN6s7yOW2iahReL8dNddIbMJ6BLVguJ4n1dnquV3ZNqi6V0H/Vn00j0cE80ERsZTgsHPJ0eUjxYik+eDtaEHnyAsYeR2AjRcGw=="),(function(e){return e.charCodeAt(0)})),i=new Uint8Array([177,156,215,89,13,111,230,1]),o=new Uint8Array(n.length),a=new Uint8Array(256),s=0;s<256;s++)a[s]=s;var c,u=0;for(s=0;s<256;s++){var l=[a[u=(u+a[s]+i[s%i.length])%256],a[s]];a[s]=l[0],a[u]=l[1]}s=0,u=0;for(var d=0;d<0+n.length;d++){var h=[a[u=(u+a[s=(s+1)%256])%256],a[s]];a[s]=h[0],a[u]=h[1],c=a[(a[s]+a[u])%256],d>=0&&(o[d-0]=n[d-0]^c)}return O=!0,new Promise((function(n){(function(e,t){return WebAssembly.instantiate(e,t)})(o.buffer,t).then((function(t){O=!1,r=t.instance.exports,e.__wbindgen_wasm_module=t.module,n()}))}))}().then((function(){C=k.new(),e(C)}))}))).then((function(e){R=e}));var L=!0;setInterval((function(){Object(s.getParameter)("UPLOAD_LOG")&&M.info("console log upload")}),9e5);var M=function(){var e,t,n,r,i,u,l=null,d=["DEBUG","INFO","WARNING","ERROR","NONE"],h=0,f=function(e,t){if(Object(s.getParameter)("UPLOAD_LOG"))try{t=Array.prototype.slice.call(t);var n="";if(t.forEach((function(e){"object"===o()(e)&&(e=JSON.stringify(e)),n=n+e+" "})),j.push({payload:n,log_level:e}),L)return;"free"===N&&function e(t){N="uploading",setTimeout((function(){!function(e,t,n){var r={};Array.isArray(e)||(e=[e]),e=e.map((function(e){return{log_item_id:A++,log_level:e.log_level,payload_str:e.payload}})),r={timestamp:Date.now(),sdk_version:s.VERSION,process_id:Object(c.getProcessId)(),payload:JSON.stringify(e)},R?r.hash=R.get_digest("".concat(r.payload).concat(r.process_id).concat(r.timestamp)):n&&n();try{var i=l,o=l||"https://".concat(Object(s.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2");Object(a.post)(o,r,(function(e){"OK"===e?t&&t(e):n&&n(e)}),(function(e){n&&n(e)}),i?{withCredentials:!0}:{withCredentials:!0,"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})}catch(e){n&&n(e)}}(t,(function(){P=0,0!==j.length?(D=j.length<10?j.splice(0,j.length):j.splice(0,10),e(D)):N="free"}),(function(){setTimeout((function(){e(D)}),P++<2?200:1e4)}))}),3e3)}(D=j.length<10?j.splice(0,j.length):j.splice(0,10))}catch(e){}};t=function(){for(var t=[0],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},n=function(){for(var t=[1],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},r=function(){for(var t=[2],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},i=function(){for(var t=[3],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)};var p={};return u=function(e){p[e]||(r.apply(void 0,arguments),p[e]=!0)},{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4,stopWaitJoin:function(){L=!1},enableLogUpload:function(){Object(s.setParameter)("UPLOAD_LOG",!0)},disableLogUpload:function(){Object(s.setParameter)("UPLOAD_LOG",!1)},setProxyServer:function(e){l=e?"https://".concat(e,"/ls/?h=").concat(Object(s.getParameter)("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v2"):"https://".concat(Object(s.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v2")},setLogLevel:function(e){e>4?e=4:e<0&&(e=0),h=e},log:e=function(){var e=arguments[0],t=arguments;if(t[0]=function(){var e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}()+" Agora-SDK ["+(d[e]||"DEFAULT")+"]:",f(e,t),!(e<h))switch(e){case 0:case 1:case 3:console.log.apply(console,t);break;case 2:console.warn.apply(console,t);break;default:return void console.log.apply(console,t)}},debug:t,info:n,warning:r,deprecate:u,error:i}}();t.default=M},function(e,t,n){"use strict";n.r(t),n.d(t,"report",(function(){return I})),n.d(t,"SESSION_INIT",(function(){return m})),n.d(t,"JOIN_CHOOSE_SERVER",(function(){return y})),n.d(t,"JOIN_GATEWAY",(function(){return b})),n.d(t,"PUBLISH",(function(){return _})),n.d(t,"SUBSCRIBE",(function(){return E})),n.d(t,"getProcessId",(function(){return T}));var r=n(46),i=n.n(r),o=n(7),a=n.n(o),s=n(2),c=n(0),u=n(14),l=n(28),d=n.n(l),h=n(47);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v,g,m="session_init",y="join_choose_server",b="join_gateway",_="publish",E="subscribe",S=new(n.n(h).a),w={eventType:null,sid:null,lts:null,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},x=null,T=function(){return x||(x="process-"+d()(),c.default.info("processId: "+x)),x},I=(g=0,(v={list:{},setProxyServer:function(e){S.setProxy(e),v.proxyServerURL=e},getUrl:function(){return v.proxyServerURL?"https://".concat(v.proxyServerURL,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message")},getBackUrl:function(){return v.proxyServerURL?"https://".concat(v.proxyServerURL,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=events/message"):"https://".concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message")},getSessionStartTime:function(e){return v.list[e]?v.list[e].startTime:(c.default.DEBUG("[getSessionStartTime]: session ".concat(e," no exit")),0)},sessionInit:function(e,t){var n=a()({},w);n.startTime=+new Date,n.sid=e,n.cname=t.cname,v.list[e]=n;var r=a()({},{willUploadConsoleLog:Object(s.getParameter)("UPLOAD_LOG"),areaVersion:"global"},t.extend),i=a()({},n);i.eventType=m,i.appid=t.appid,i.browser=navigator.userAgent,i.build=s.BUILD,i.lts=+new Date,i.elapse=i.lts-i.startTime,i.extend=JSON.stringify(r),i.mode=t.mode,i.process=T(),i.success=t.succ,i.version=s.VERSION,delete i.startTime,v.send({type:"Session",data:i}),v._flushInvokeReport(e)},joinChooseServer2:function(e,t,n){if(v.list[e]){v.list[e].uid||(t.uid&&(v.list[e].uid=parseInt(t.uid)),t.cid&&(v.list[e].cid=parseInt(t.cid)),t.vid&&(v.list[e].vid=parseInt(t.vid)));var r=a()({},v.list[e]);r.eventType=y;var i=t.lts;r.lts=Date.now(),r.eventElapse=r.lts-i,r.chooseServerAddr=t.csAddr,r.errorCode=t.ec,r.elapse=r.lts-r.startTime,r.success=t.succ,r.chooseServerIp=t.chooseServerIp||"",r.chooseServerAddrList=JSON.stringify(t.serverList),delete r.startTime,v.send({type:"JoinChooseServer",data:r})}},joinChooseServer:function(e,t,n){if(v.list[e]){n&&(t.uid&&(v.list[e].uid=parseInt(t.uid)),t.cid&&(v.list[e].cid=parseInt(t.cid)),t.vid&&(v.list[e].vid=parseInt(t.vid)));var r=a()({},v.list[e]);r.eventType=y;var i=t.lts;r.lts=Date.now(),r.eventElapse=r.lts-i,r.chooseServerAddr=t.csAddr,r.errorCode=t.ec,r.elapse=r.lts-r.startTime,r.success=t.succ,r.chooseServerIp=t.chooseServerIp||"",r.chooseServerAddrList=JSON.stringify(t.serverList),delete r.startTime,v.send({type:"JoinChooseServer",data:r})}},reqUserAccount:function(e,t){t.vid&&(v.list[e].vid=parseInt(t.vid));var n=a()({},v.list[e]),r=t.lts;n.eventType="req_user_account",n.lts=Date.now(),n.success=t.success,n.serverAddress=t.serverAddress,n.stringUid=t.stringUid,n.uid=t.uid,n.errorCode=t.errorCode,n.elapse=n.lts-n.startTime,n.eventElapse=n.lts-r,n.extend="string"==typeof t.extend?t.extend:JSON.stringify(t.extend),delete n.startTime,v.send({type:"ReqUserAccount",data:n})},joinGateway:function(e,t){t.vid&&(v.list[e].vid=parseInt(t.vid)),t.uid&&(v.list[e].uid=parseInt(t.uid));var n=a()({},v.list[e]),r=t.lts;n.eventType=b,n.firstSuccess=t.firstSuccess,n.lts=Date.now(),n.gatewayAddr=t.addr,n.success=t.succ,n.errorCode=t.ec,n.elapse=n.lts-n.startTime,n.eventElapse=n.lts-r,delete n.startTime,v.send({type:"JoinGateway",data:n})},publish:function(e,t){var n=a()({},v.list[e]);n.eventType=_;var r=t.lts;n.lts=Date.now(),n.eventElapse=n.lts-r,n.elapse=n.lts-n.startTime,n.success=t.succ,n.errorCode=t.ec,n.audio=t.audio,n.video=t.video,n.screenshare=t.screenshare,n.publishRequestid=t.publishRequestid,n.p2pid=t.p2pid,t.videoName&&(n.videoName=t.videoName),t.audioName&&(n.audioName=t.audioName),t.screenName&&(n.screenName=t.screenName),delete n.startTime,v.send({type:"Publish",data:n}),v._flushInvokeReport(e)},subscribe:function(e,t){var n=a()({},v.list[e]);n.eventType=E;var r=t.lts;n.lts=Date.now(),n.eventElapse=n.lts-r,n.elapse=n.lts-n.startTime,n.errorCode=t.ec,n.success=t.succ,n.subscribeRequestid=t.subscribeRequestid,n.p2pid=t.p2pid,isFinite(t.peerid)?n.peer=t.peerid:n.peerSuid=""+t.peerid,"boolean"==typeof t.video&&(n.video=t.video),"boolean"==typeof t.audio&&(n.audio=t.audio),delete n.startTime,v.send({type:"Subscribe",data:n}),v._flushInvokeReport(e)},firstRemoteFrame:function(e,t){var n=a()({},v.list[e]);n.eventType="first_remote_frame";var r=t.lts;n.lts=Date.now(),n.eventElapse=n.lts-r,n.elapse=n.lts-n.startTime,n.width=t.width,n.height=t.height,n.success=t.succ,n.errorCode=t.ec,isFinite(t.peerid)?n.peer=t.peerid:n.peerSuid=""+t.peerid,delete n.startTime,v.send({type:"FirstFrame",data:n})},firstVideoReceived:function(e,t){var n=a()({},v.list[e]);n.eventType="first_video_received",n.lts=Date.now(),n.peer=t.peerid,n.uid=t.uid,n.elapse=t.elapse,n.subscribeElapse=t.subscribeElapse,n.subscribeRequestid=t.subscribeRequestid,n.p2pid=t.p2pid,v.send({type:"FirstVideoReceived",data:n})},firstAudioReceived:function(e,t){var n=a()({},v.list[e]);n.eventType="first_audio_received",n.lts=Date.now(),n.peer=t.peerid,n.uid=t.uid,n.elapse=t.elapse,n.subscribeElapse=t.subscribeElapse,n.subscribeRequestid=t.subscribeRequestid,n.p2pid=t.p2pid,v.send({type:"FirstAudioReceived",data:n})},firstVideoDecode:function(e,t){var n=a()({},v.list[e]);n.eventType="first_video_decode",n.lts=Date.now(),n.peer=t.peerid,n.uid=t.uid,n.elapse=t.elapse,n.videowidth=t.width,n.videoheight=t.height,n.subscribeElapse=t.subscribeElapse,n.subscribeRequestid=t.subscribeRequestid,n.p2pid=t.p2pid,v.send({type:"FirstVideoDecode",data:n})},firstAudioDecode:function(e,t){var n=a()({},v.list[e]);n.eventType="first_audio_decode",n.lts=Date.now(),n.uid=t.uid,n.peer=t.peerid,n.elapse=t.elapse,n.subscribeElapse=t.subscribeElapse,n.subscribeRequestid=t.subscribeRequestid,n.p2pid=t.p2pid,v.send({type:"FirstAudioDecode",data:n})},onAddAudioStream:function(e,t){var n=a()({},v.list[e]);n.eventType="on_add_audio_stream",n.lts=Date.now(),n.uid=t.uid,n.peer=t.peerid,v.send({type:"OnAddAudioStream",data:n})},onAddVideoStream:function(e,t){var n=a()({},v.list[e]);n.eventType="on_add_video_stream",n.lts=Date.now(),n.uid=t.uid,n.peer=t.peerid,v.send({type:"OnAddVideoStream",data:n})},onUpdateStream:function(e,t){var n=a()({},v.list[e]);n.eventType="on_update_stream",n.lts=Date.now(),n.uid=t.uid,n.peer=t.peerid,n.audio=t.audio,n.video=t.video,v.send({type:"OnUpdateStream",data:n})},onRemoveStream:function(e,t){var n=a()({},v.list[e]);n.eventType="on_remove_stream",n.lts=Date.now(),n.uid=t.uid,n.peer=t.peerid,v.send({type:"OnRemoveStream",data:n})},streamSwitch:function(e,t){var n=a()({},v.list[e]);n.eventType="stream_switch",n.lts=Date.now(),n.isDual=t.isdual,n.elapse=n.lts-n.startTime,n.success=n.succ,delete n.startTime,v.send({type:"StreamSwitch",data:n})},audioSendingStopped:function(e,t){var n=a()({},v.list[e]);n.eventType="audio_sending_stopped",n.lts=Date.now(),n.elapse=n.lts-n.startTime,n.reason=t.reason,n.success=t.succ,delete n.startTime,v.send({type:"AudioSendingStopped",data:n})},videoSendingStopped:function(e,t){var n=a()({},v.list[e]);n.eventType="video_sending_stopped",n.lts=Date.now(),n.elapse=n.lts-n.startTime,n.reson=t.reason,n.success=t.succ,delete n.startTime,v.send({type:"VideoSendingStopped",data:n})},requestProxyAppCenter:function(e,t){var n=a()({},v.list[e]),r=t.lts;n.eventType="request_proxy_appcenter",n.lts=Date.now(),n.eventElapse=n.lts-r,n.elapse=n.lts-n.startTime,n.extend=t.extend+"",n.APAddr=t.APAddr,n.workerManagerList=t.workerManagerList,n.response=t.response,n.errorCode=t.ec,n.success=t.succ,delete n.startTime,v.send({type:"RequestProxyAppCenter",data:n})},requestProxyWorkerManager:function(e,t){var n=a()({},v.list[e]),r=t.lts;n.eventType="request_proxy_worker_manager",n.lts=Date.now(),n.eventElapse=n.lts-r,n.elapse=n.lts-n.startTime,n.extend=t.extend,n.workerManagerAddr=t.workerManagerAddr,n.response=t.response,n.errorCode=t.ec,n.success=t.succ,delete n.startTime,v.send({type:"RequestProxyWorkerManager",data:n})},requestWorkerEvent:function(e,t){var n=a()({},v.list[e]),r=n.startTime,i=Date.now();delete(n=p({},n,{},t,{elapse:i-r,lts:i,productType:"WebRTC"})).startTime,v.send({type:"WorkerEvent",data:n})},requestApWorkerEvent:function(e,t){var n=a()({},v.list[e]),r=n.startTime,i=Date.now();n=p({},n,{},t,{elapse:i-r,lts:i}),v.send({type:"APWorkerEvent",data:n})},sendCustomReportMessage:function(e,t,n){var r={type:"UserAnalytics",data:p({sid:e},t)},i=v.getUrl(),o=!!v.proxyServerURL;Object(u.post)(i,r,(function(e){n&&n()}),(function(e){var t=v.getBackUrl();Object(u.post)(t,r,(function(e){n&&n()}),(function(e){n&&n("Failed")}),o?{timeout:Object(s.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(s.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})}),o?{timeout:Object(s.getParameter)("CUSTOMER_REPORT_TIMEOUT")}:{timeout:Object(s.getParameter)("CUSTOMER_REPORT_TIMEOUT"),"Cache-Control":"no-cache, no-store",Pragma:"no-cache",Expires:"0"})},joinChannelTimeOut:function(e){v.send({type:"JoinChannelTimeout",data:p({},e)})},peerPublishStatus:function(e){v.send({type:"PeerPublishStatus",data:p({},e)})},joinWebProxyAP:function(e){v.send({type:"JoinWebProxyAP",data:p({},e)})},webSocketQuit:function(e){v.send({type:"WebSocketQuit",data:p({},e)})}}).reportApiInvoke=function(e,t){var n=t.tag,r=t.name,i=t.getStates,o=t.options,a=t.timeout,u=void 0===a?6e4:a,l=t.callback,d=t.reportResult,h=void 0===d||d,f=Date.now(),v=0,m=g++,y=function(){return p({tag:n,invokeId:m,sid:e,name:r,apiInvokeTime:f,options:o},i&&{states:(t=i(),Object.keys(t).reduce((function(e,n){var r=e;return null!=t[n]&&(r[n]=t[n]),r}),{}))});var t},b=!!Object(s.getParameter)("SHOW_REPORT_INVOKER_LOG");b&&c.default.info("".concat(r," start"));var _=setTimeout((function(){I._sendApiInvoke(p({},y(),{error:"API_INVOKE_TIMEOUT",success:!1}))}),u);return function(e,t){if(clearTimeout(_),++v>1&&(e="EXECUTOR_INVOKE_".concat(v)),e)return I._sendApiInvoke(p({},y(),{success:!1,error:e},i&&{states:i()})),b&&c.default.info("".concat(r," onFailure"),e),l&&l(e);I._sendApiInvoke(p({},y(),{success:!0},h&&{result:t},{},i&&{states:i()})),b&&c.default.info("".concat(r," onSuccess")),l&&l(null,t)}},v._cachedItems=[],v._cacheInvokeReport=function(e){e.lts||(e.lts=Date.now()),v._cachedItems.push(e),v._cachedItems.length>50&&v._cachedItems.shift()},v._flushInvokeReport=function(e){if(v._cachedItems.length){var t=v._cachedItems;v._cachedItems=[],c.default.debug("Flush cached event reporting:",t.length),t.forEach((function(t,n){t.sid=e,setTimeout((function(){v._sendApiInvoke(t)}),5e3+500*n)}))}},v._sendApiInvoke=function(e){var t=e.tag,n=e.invokeId,r=e.sid,i=e.name,o=e.result,a=e.states,c=e.options,u=e.error,l=e.success,d=e.apiInvokeTime,h=e.lts,f=Object(s.getParameter)("NOT_REPORT_EVENT");if(!(t&&f instanceof Array&&-1!==f.indexOf(t)))if(v.list[r]){var g=v.list[r],m=g.startTime,y=g.cname,b=g.uid,_=g.cid,E=(h=h||Date.now())-m,S=h-d,w="";if(c)try{w=JSON.stringify(c)}catch(e){w=c.toString()}var x=p({invokeId:n,sid:r,cname:y,cid:_,lts:h,uid:b,success:l,elapse:E,apiName:i,execElapse:S},void 0!==c&&{options:w},{},void 0!==a&&{execStates:JSON.stringify(a)},{},void 0!==u&&{errorCode:JSON.stringify(u)},{},void 0!==o&&{execResult:JSON.stringify(o)});v.send({type:"ApiInvoke",data:x})}else v._cacheInvokeReport(arguments[0])},v.sendCache=[],v.sendTimer=null,v.send=function(e){if(e.data){var t=e.data;v._lastLts&&v._lastLts>=t.lts&&(t.lts=v._lastLts+1),v._lastLts=t.lts}if(v.sendCache.push(e),null===v.sendTimer)return function e(){v.sendTimer=setTimeout((function(){if(0!==v.sendCache.length){var t=v.sendCache.length<10?v.sendCache.splice(0,v.sendCache.length):v.sendCache.splice(0,10),n=v.list[t[0].data.sid].vid;return S.sendReportList(t,n),e()}v.sendTimer=null}),Object(s.getParameter)("EVENT_REPORT_SEND_INTERVAL"))}()},v)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BUILD="v3.6.11-0-gbdacc5f-dirty",t.VERSION="3.6.11";var r=0*Date.now()+11499+86604+5615+6547+846;t.SUPPORT_RESOLUTION_LIST={"90p_1":[160,90,null,null,null,null],"120p_1":[160,120,15,15,30,65],"120p_3":[120,120,15,15,30,50],"120p_4":[212,120,null,null,null,null],"180p_1":[320,180,15,15,30,140],"180p_3":[180,180,15,15,30,100],"180p_4":[240,180,15,15,30,120],"240p_1":[320,240,15,15,40,200],"240p_3":[240,240,15,15,40,140],"240p_4":[424,240,15,15,40,220],"360p_1":[640,360,15,15,80,400],"360p_3":[360,360,15,15,80,260],"360p_4":[640,360,30,30,80,600],"360p_6":[360,360,30,30,80,400],"360p_7":[480,360,15,15,80,320],"360p_8":[480,360,30,30,80,490],"360p_9":[640,360,15,15,80,800],"360p_10":[640,360,24,24,80,800],"360p_11":[640,360,24,24,80,1e3],"480p_1":[640,480,15,15,100,500,1,5],"480p_2":[640,480,30,30,100,1e3,25,30],"480p_3":[480,480,15,15,100,400],"480p_4":[640,480,30,30,100,750],"480p_6":[480,480,30,30,100,600],"480p_8":[848,480,15,15,100,610],"480p_9":[848,480,30,30,100,930],"480p_10":[640,480,10,10,100,400],"720p_1":[1280,720,15,15,120,1130,1,5],"720p_2":[1280,720,30,30,120,2e3,25,30],"720p_3":[1280,720,30,30,120,1710],"720p_5":[960,720,15,15,120,910],"720p_6":[960,720,30,30,120,1380],"1080p_1":[1920,1080,15,15,120,2080,1,5],"1080p_2":[1920,1080,30,30,120,3e3,25,30],"1080p_3":[1920,1080,30,30,120,3150],"1080p_5":[1920,1080,60,60,120,4780],"1440p_1":[2560,1440,30,30,120,4850],"1440p_2":[2560,1440,60,60,120,7350],"4k_1":[3840,2160,30,30,120,8910],"4k_3":[3840,2160,60,60,120,13500]},t.AUDIO_PROFILE_SETTINGS={speech_low_quality:[!1,!1,!0,!0],speech_standard:[!1,!1,!0,!1],music_standard:[!1,!1,!1,!1],standard_stereo:[!1,!0,!1,!1],high_quality:[!0,!1,!1,!1],high_quality_stereo:[!0,!0,!1,!1],default:[!1,!1,!1,!1]};var i={AREA_SETTING:["NORTH_AMERICA","OVERSEA"],WEBCS_DOMAIN:["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],LOG_UPLOAD_SERVER:"logservice-oversea.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1-oversea.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"statscollector-2-oversea.agora.io",ENABLE_LIVE_SERVER_LIST:!1,LIVE_SERVER_LIST:[],ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,GATEWAY_DOMAINS:["edge.agora.io"],WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,LIVESTREAMING_ALIGN:!0,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e7,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,REPORT_STATS_TIMEOUT:3e3,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!1,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:1e3,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:2e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,TICKET_RENEW_TIMEOUT:828e5,LIVE_STREAMING_TIMEOUT:12e4,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,FORCE_CHANGED_GATEWAY_FLAG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",CHROME_NEW_STATS:!1,AP_BACKOFF_MAX_TIME:8,SET_DEFAULT_TURNSERVER:!0,TURN_SERVER_PASSWORD:r.toString(),PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",NGINX:"webrtc-cloud-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CR:!0,CRL:10,CRI:6,CUSTOMER_REPORT_TIMEOUT:5e3,LIVE_STREAMING_ADDRESS:"",CHOOSE_SERVER_FRAGEMENT_LENGTH:4,PLAN:"plan-b"};i.AREA_SETTING=["CHINA","GLOBAL"],i.WEBCS_DOMAIN=["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],i.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],i.PROXY_CS=["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],i.CDS_AP=["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],i.ACCOUNT_REGISTER=["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],i.UAP_AP=["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],i.LOG_UPLOAD_SERVER="logservice.agora.io",i.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",i.EVENT_REPORT_BACKUP_DOMAIN="web-3.statscollector.sd-rtn.com",i.GATEWAY_DOMAINS=["edge.agora.io","edge.sd-rtn.com"],i.NGINX="webrtc-cloud-proxy.sd-rtn.com",i.PROXY_SERVER_TYPE3=["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],t.setParameter=function(e,t){return void 0!==i[e]&&(i[e]=t,!0)},t.getParameter=function(e){return void 0!==i[e]?i[e]:null}},function(e,t,n){"use strict";n.r(t),n.d(t,"checkValidObject",(function(){return c})),n.d(t,"checkValidString",(function(){return u})),n.d(t,"checkValidNumber",(function(){return l})),n.d(t,"checkValidArray",(function(){return d})),n.d(t,"checkValidFloatNumber",(function(){return h})),n.d(t,"checkValidBoolean",(function(){return f})),n.d(t,"checkValidEnum",(function(){return s})),n.d(t,"checkValidUID",(function(){return p})),n.d(t,"isValidString",(function(){return v})),n.d(t,"isValidNumber",(function(){return g})),n.d(t,"isValidBoolean",(function(){return y})),n.d(t,"isASCII",(function(){return E})),n.d(t,"isInteger",(function(){return S})),n.d(t,"isNumber",(function(){return w})),n.d(t,"isString",(function(){return x})),n.d(t,"isArray",(function(){return T})),n.d(t,"isEmpty",(function(){return I})),n.d(t,"isValidToken",(function(){return b})),n.d(t,"isValidChannelName",(function(){return _}));var r=n(11),i=n.n(r),o=n(10),a=n(0),s=function(e,t,n){for(var r=0;r<n.length;r++)if(e===n[r])return!0;throw new Error("".concat(t," can only be set as ").concat(JSON.stringify(n)))},c=function(e,t){if(!e)throw new Error("Invalid param: ".concat(t||"param"," cannot be empty"));if("object"!==i()(e))throw new Error("".concat(t||"This paramter"," is of the object type"));return!0},u=function(e,t,n,r,i){if(I(n)&&(n=1),r=r||255,I(i)&&(i=!0),I(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!v(e,n,r,i))throw new Error("Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(i?" ASCII characters only.":""))},l=function(e,t,n,r){if(I(n)&&(n=1),r=r||1e4,I(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!g(e,n,r))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(n,",").concat(r,"]. integer only"))},d=function(e,t){if(!Array.isArray(e))throw new Error("".concat(t," should be an array"))},h=function(e,t,n,r){if(null==e)throw new Error("".concat(t||"param"," cannot be null"));if(I(n)&&(n=0),r=r||1e4,I(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!m(e,n,r))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(n,",").concat(r,"]."))},f=function(e,t){if(I(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!y(e))throw new Error("Invalid ".concat(t||"boolean param",": The value is of the boolean type."))},p=function(e){if(!Object(o.is32Uint)(e)&&!v(e,1,255))throw a.default.error("Invalid UID ".concat(e," ").concat(i()(e))),new Error("[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]")},v=function(e,t,n,r){return t||(t=0),n||(n=Number.MAX_SAFE_INTEGER),I(r)&&(r=!0),x(e)&&(!r||E(e))&&e.length>=t&&e.length<=n},g=function(e,t,n){return S(e)&&e>=t&&e<=n},m=function(e,t,n){return w(e)&&e>=t&&e<=n},y=function(e){return"boolean"==typeof e},b=function(e){return v(e,1,2047)},_=function(e){return x(e)&&/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e)},E=function(e){if("string"==typeof e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}},S=function(e){return"number"==typeof e&&e%1==0},w=function(e){return"number"==typeof e},x=function(e){return"string"==typeof e},T=function(e){return e instanceof Array},I=function(e){return null==e}},function(e,t,n){"use strict";n.r(t),n.d(t,"getBrowserInfo",(function(){return y})),n.d(t,"getBrowserVersion",(function(){return h})),n.d(t,"getBrowserOS",(function(){return f})),n.d(t,"isChrome",(function(){return r})),n.d(t,"isSafari",(function(){return i})),n.d(t,"isFireFox",(function(){return a})),n.d(t,"isOpera",(function(){return s})),n.d(t,"isEdge",(function(){return o})),n.d(t,"isQQBrowser",(function(){return c})),n.d(t,"isWeChatBrowser",(function(){return u})),n.d(t,"isLegacyChrome",(function(){return v})),n.d(t,"isSupportedPC",(function(){return l})),n.d(t,"isSupportedMobile",(function(){return d})),n.d(t,"getChromeKernelVersion",(function(){return m})),n.d(t,"isChromeKernel",(function(){return p}));var r=function(){var e=y();return e.name&&"Chrome"===e.name},i=function(){var e=y();return e.name&&"Safari"===e.name},o=function(){var e=y();return e.name&&"Edge"===e.name},a=function(){var e=y();return e.name&&"Firefox"===e.name},s=function(){var e=y();return e.name&&"OPR"===e.name},c=function(){var e=y();return e.name&&"QQBrowser"===e.name},u=function(){var e=y();return e.name&&"MicroMessenger"===e.name},l=function(){var e=f();return"Linux"===e||"Mac OS X"===e||"Mac OS"===e||-1!==e.indexOf("Windows")},d=function(){var e=f();return"Android"===e||"iOS"===e},h=function(){return y().version},f=function(){return y().os},p=function(){return!!navigator.userAgent.match(/chrome\/[\d]+/i)};function v(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}var g,m=function(){var e=navigator.userAgent.match(/chrome\/[\d]+/i);return e&&e[0]&&e[0].split("/")[1]},y=(g=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];"Chrome"===n[1]&&null!=(e=t.match(/(OPR(?=\/))\/?(\d+)/i))&&(n=e),"Safari"===n[1]&&null!=(e=t.match(/version\/(\d+)/i))&&(n[2]=e[1]),~t.toLowerCase().indexOf("qqbrowser")&&null!=(e=t.match(/(qqbrowser(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("micromessenger")&&null!=(e=t.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("edge")&&null!=(e=t.match(/(edge(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("trident")&&null!=(e=/\brv[ :]+(\d+)/g.exec(t)||[])&&(n=[null,"IE",e[1]]);var r=void 0,i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var o in i){var a=i[o];if(a.r.test(navigator.userAgent)){r=a.s;break}}return{name:n[1],version:n[2],os:r}}(),function(){return g})},function(e,t,n){"use strict";n.r(t),n.d(t,"APErrorCode",(function(){return r})),n.d(t,"GatewayErrorCode",(function(){return i})),n.d(t,"StringUidErrorCode",(function(){return o})),n.d(t,"JOIN_GS_TRYNEXT_LIST",(function(){return a})),n.d(t,"JOIN_CS_RETRY_LIST",(function(){return s})),n.d(t,"JOIN_PROXY_RETRY_LIST",(function(){return c})),n.d(t,"INJECT_STREAM_STATUS",(function(){return u})),n.d(t,"WEBSOCKET_CLOSE_REASON",(function(){return l}));var r={1010100:"NO_FLAG_SET",1010101:"FLAG_SET_BUT_EMPTY",1010102:"INVALID_FALG_SET",2010005:"INVALID_VENDOR_KEY",2010007:"INVALID_CHANNEL_NAME",2010008:"INTERNAL_ERROR",2010009:"NO_AUTHORIZED",2010010:"DYNAMIC_KEY_TIMEOUT",2010011:"NO_ACTIVE_STATUS",2010013:"DYNAMIC_KEY_EXPIRED",2010014:"STATIC_USE_DYANMIC_KEY",2010015:"DYNAMIC_USE_STATIC_KEY",2010016:"USER_OVERLOAD",2010018:"FORBIDDEN_REGION",2010019:"CANNOT_MEET_AREA_DEMAND"},i={2e3:"ERR_NO_VOCS_AVAILABLE",2001:"ERR_NO_VOS_AVAILABLE",2002:"ERR_JOIN_CHANNEL_TIMEOUT",2003:"WARN_REPEAT_JOIN",2004:"ERR_JOIN_BY_MULTI_IP",2011:"ERR_NOT_JOINED",2012:"WARN_REPEAT_JOIN",2013:"ERR_INVALID_VENDOR_KEY",2014:"ERR_INVALID_CHANNEL_NAME",2015:"ERR_INVALID_STRINGUID",2016:"ERR_TOO_MANY_USERS",2017:"ERR_SET_CLIENT_ROLE_TIMEOUT",2018:"ERR_SET_CLIENT_ROLE_NO_PERMISSION",2019:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",2020:"ERR_PUBLISH_REQUEST_INVALID",2021:"ERR_SUBSCRIBE_REQUEST_INVALID",2022:"ERR_NOT_SUPPORTED_MESSAGE",2023:"ERR_ILLEAGAL_PLUGIN",2028:"ILLEGAL_AES_PASSWORD",101:"ERR_INVALID_VENDOR_KEY",102:"ERR_INVALID_CHANNEL_NAME",103:"WARN_NO_AVAILABLE_CHANNEL",104:"WARN_LOOKUP_CHANNEL_TIMEOUT",105:"WARN_LOOKUP_CHANNEL_REJECTED",106:"WARN_OPEN_CHANNEL_TIMEOUT",107:"WARN_OPEN_CHANNEL_REJECTED",108:"WARN_REQUEST_DEFERRED",109:"ERR_DYNAMIC_KEY_TIMEOUT",110:"ERR_NO_AUTHORIZED",111:"ERR_VOM_SERVICE_UNAVAILABLE",112:"ERR_NO_CHANNEL_AVAILABLE_CODE",113:"ERR_TOO_MANY_USERS",114:"ERR_MASTER_VOCS_UNAVAILABLE",115:"ERR_INTERNAL_ERROR",116:"ERR_NO_ACTIVE_STATUS",117:"ERR_INVALID_UID",118:"ERR_DYNAMIC_KEY_EXPIRED",119:"ERR_STATIC_USE_DYANMIC_KE",120:"ERR_DYNAMIC_USE_STATIC_KE",2:"K_TIMESTAMP_EXPIRED",3:"K_CHANNEL_PERMISSION_INVALID",4:"K_CERTIFICATE_INVALID",5:"K_CHANNEL_NAME_EMPTY",6:"K_CHANNEL_NOT_FOUND",7:"K_TICKET_INVALID",8:"K_CHANNEL_CONFLICTED",9:"K_SERVICE_NOT_READY",10:"K_SERVICE_TOO_HEAVY",14:"K_UID_BANNED",15:"K_IP_BANNED",16:"K_CHANNEL_BANNED"},o={1:"ERROR_ILLEAGAL_APPID",2:"ERROR_ILLEAGAL_UID",3:"INTERNAL_SERVER_ERROR"},a=["ERR_NO_VOCS_AVAILABLE","ERR_NO_VOS_AVAILABLE","ERR_JOIN_CHANNEL_TIMEOUT","WARN_LOOKUP_CHANNEL_TIMEOUT","WARN_OPEN_CHANNEL_TIMEOUT","ERR_VOM_SERVICE_UNAVAILABLE","ERR_TOO_MANY_USERS","ERR_MASTER_VOCS_UNAVAILABLE","ERR_INTERNAL_ERROR"],s=["NO_SERVICE_AVAILABLE"],c=["NO_SERVICE_AVAILABLE","REQUEST_PROXY_SERVER_FAILED","REQUEST_PROXY_SERVER_TIME_OUT"],u={INJECT_STREAM_STATUS_START_SUCCESS:0,INJECT_STREAM_STATUS_START_ALREADY_EXISTS:1,INJECT_STREAM_STATUS_START_UNAUTHORIZED:2,INJECT_STREAM_STATUS_START_TIMEDOUT:3,INJECT_STREAM_STATUS_START_FAILED:4,INJECT_STREAM_STATUS_STOP_SUCCESS:5,INJECT_STREAM_STATUS_STOP_NOT_FOUND:6,INJECT_STREAM_STATUS_STOP_UNAUTHORIZED:7,INJECT_STREAM_STATUS_STOP_TIMEDOUT:8,INJECT_STREAM_STATUS_STOP_FAILED:9,INJECT_STREAM_STATUS_BROKEN:10},l={WS_DISCONNECT:"WS_DISCONNECT"};t.default={FAILED:"FAILED",INVALID_KEY:"INVALID_KEY",INVALID_CLIENT_MODE:"INVALID_CLIENT_MODE",INVALID_CLIENT_CODEC:"INVALID_CLIENT_CODEC",CLIENT_MODE_CODEC_MISMATCH:"CLIENT_MODE_CODEC_MISMATCH",WEB_API_NOT_SUPPORTED:"WEB_API_NOT_SUPPORTED",INVALID_PARAMETER:"INVALID_PARAMETER",NO_TRACK_IN_STREAM:"NO_TRACK_IN_STREAM",INVALID_OPERATION:"INVALID_OPERATION",INVALID_LOCAL_STREAM:"INVALID_LOCAL_STREAM",INVALID_REMOTE_STREAM:"INVALID_REMOTE_STREAM",INVALID_DYNAMIC_KEY:"INVALID_DYNAMIC_KEY",DYNAMIC_KEY_TIMEOUT:"DYNAMIC_KEY_TIMEOUT",NO_VOCS_AVAILABLE:"NO_VOCS_AVAILABLE",NO_VOS_AVAILABLE:"ERR_NO_VOS_AVAILABLE",JOIN_CHANNEL_TIMEOUT:"ERR_JOIN_CHANNEL_TIMEOUT",NO_AVAILABLE_CHANNEL:"NO_AVAILABLE_CHANNEL",LOOKUP_CHANNEL_TIMEOUT:"LOOKUP_CHANNEL_TIMEOUT",LOOKUP_CHANNEL_REJECTED:"LOOKUP_CHANNEL_REJECTED",OPEN_CHANNEL_TIMEOUT:"OPEN_CHANNEL_TIMEOUT",OPEN_CHANNEL_REJECTED:"OPEN_CHANNEL_REJECTED",REQUEST_DEFERRED:"REQUEST_DEFERRED",STREAM_ALREADY_PUBLISHED:"STREAM_ALREADY_PUBLISHED",STREAM_NOT_YET_PUBLISHED:"STREAM_NOT_YET_PUBLISHED",JOIN_TOO_FREQUENT:"JOIN_TOO_FREQUENT",SOCKET_ERROR:"SOCKET_ERROR",SOCKET_DISCONNECTED:"SOCKET_DISCONNECTED",PEERCONNECTION_FAILED:"PEERCONNECTION_FAILED",CONNECT_GATEWAY_ERROR:"CONNECT_GATEWAY_ERROR",SERVICE_NOT_AVAILABLE:"SERVICE_NOT_AVAILABLE",JOIN_CHANNEL_FAILED:"JOIN_CHANNEL_FAILED",PUBLISH_STREAM_FAILED:"PUBLISH_STREAM_FAILED",UNPUBLISH_STREAM_FAILED:"UNPUBLISH_STREAM_FAILED",SUBSCRIBE_STREAM_FAILED:"SUBSCRIBE_STREAM_FAILED",UNSUBSCRIBE_STREAM_FAILED:"UNSUBSCRIBE_STREAM_FAILED",NO_SUCH_REMOTE_STREAM:"NO_SUCH_REMOTE_STREAM",ERR_FAILED:"1",ERR_INVALID_VENDOR_KEY:"101",ERR_INVALID_CHANNEL_NAME:"102",WARN_NO_AVAILABLE_CHANNEL:"103",WARN_LOOKUP_CHANNEL_TIMEOUT:"104",WARN_LOOKUP_CHANNEL_REJECTED:"105",WARN_OPEN_CHANNEL_TIMEOUT:"106",WARN_OPEN_CHANNEL_REJECTED:"107",WARN_REQUEST_DEFERRED:"108",ERR_DYNAMIC_KEY_TIMEOUT:"109",ERR_INVALID_DYNAMIC_KEY:"110",ERR_NO_VOCS_AVAILABLE:"2000",ERR_NO_VOS_AVAILABLE:"2001",ERR_JOIN_CHANNEL_TIMEOUT:"2002",IOS_NOT_SUPPORT:"IOS_NOT_SUPPORT",WECHAT_NOT_SUPPORT:"WECHAT_NOT_SUPPORT",SHARING_SCREEN_NOT_SUPPORT:"SHARING_SCREEN_NOT_SUPPORT",STILL_ON_PUBLISHING:"STILL_ON_PUBLISHING",LOW_STREAM_ALREADY_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",LOW_STREAM_NOT_YET_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",HIGH_STREAM_NOT_VIDEO_TRACE:"HIGH_STREAM_NOT_VIDEO_TRACE",NOT_FIND_DEVICE_BY_LABEL:"NOT_FIND_DEVICE_BY_LABEL",ENABLE_DUALSTREAM_FAILED:"ENABLE_DUALSTREAM_FAILED",DISABLE_DUALSTREAM_FAILED:"DISABLE_DUALSTREAM_FAILED",PLAYER_NOT_FOUND:"PLAYER_NOT_FOUND",ELECTRON_NOT_SUPPORT_SHARING_SCREEN:"ELECTRON_NOT_SUPPORT_SHARING_SCREEN",BAD_ENVIRONMENT:"BAD_ENVIRONMENT",LOAD_AUDIO_FAILED:"LOAD_AUDIO_FAILED"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n(0);var r=function(e,t,n){if(["End2EndDelay","TransportDelay","PacketLossRate","RecvLevel","RecvBitrate","CodecType","MuteState","TotalFreezeTime","TotalPlayDuration","RecordingLevel","SendLevel","SamplingRate","SendBitrate","CodecType","MuteState","End2EndDelay","TransportDelay","PacketLossRate","RecvBitrate","RecvResolutionWidth","RecvResolutionHeight","RenderResolutionHeight","RenderResolutionWidth","RenderFrameRate","TotalFreezeTime","TotalPlayDuration","TargetSendBitrate","SendFrameRate","SendFrameRate","SendBitrate","SendResolutionWidth","SendResolutionHeight","CaptureResolutionHeight","CaptureResolutionWidth","EncodeDelay","MuteState","TotalFreezeTime","TotalDuration","CaptureFrameRate","RTT","OutgoingAvailableBandwidth","Duration","UserCount","SendBytes","RecvBytes","SendBitrate","RecvBitrate","accessDelay","audioSendBytes","audioSendPackets","videoSendBytes","videoSendPackets","videoSendPacketsLost","videoSendFrameRate","audioSendPacketsLost","videoSendResolutionWidth","videoSendResolutionHeight","accessDelay","audioReceiveBytes","audioReceivePackets","audioReceivePacketsLost","videoReceiveBytes","videoReceivePackets","videoReceivePacketsLost","videoReceiveFrameRate","videoReceiveDecodeFrameRate","videoReceiveResolutionWidth","videoReceiveResolutionHeight","endToEndDelay","videoReceiveDelay","audioReceiveDelay","FirstFrameTime","VideoFreezeRate","AudioFreezeRate","RenderResolutionWidth","RenderResolutionHeight","VideoPublishDuration","AudioPublishDuration"].indexOf(t)>-1&&("string"==typeof n||isFinite(n)))return e[t]=""+n},i=function(e){var t={};return e.forEach((function(e){e.id&&e.type&&(-1===e.id.indexOf("send")&&-1===e.type.toLowerCase().indexOf("outbound")&&-1===e.id.indexOf("outbound_rtp")&&-1===e.id.indexOf("OutboundRTP")||("audio"===e.mediaType?(r(t,"audioSendBytes",e.bytesSent),r(t,"audioSendPackets",e.packetsSent),r(t,"audioSendPacketsLost",e.packetsLost)):(r(t,"videoSendBytes",e.bytesSent),r(t,"videoSendPackets",e.packetsSent),r(t,"videoSendPacketsLost",e.packetsLost),r(t,"videoSendFrameRate",e.googFrameRateSent),r(t,"videoSendResolutionWidth",e.googFrameWidthSent),r(t,"videoSendResolutionHeight",e.googFrameHeightSent))))})),t},o=function(e){var t={};return e.forEach((function(e){e.id&&e.type&&(-1===e.id.indexOf("recv")&&-1===e.type.toLowerCase().indexOf("inbound")&&-1===e.id.indexOf("inbound_rtp")&&-1===e.id.indexOf("inbound-rtp")&&-1===e.id.indexOf("InboundRTP")||("audio"===e.mediaType?(r(t,"audioReceiveBytes",e.bytesReceived),r(t,"audioReceivePackets",e.packetsReceived),r(t,"audioReceivePacketsLost",e.packetsLost)):(r(t,"videoReceiveBytes",e.bytesReceived),r(t,"videoReceivePacketsLost",e.packetsLost),r(t,"videoReceivePackets",e.packetsReceived),r(t,"videoReceiveFrameRate",e.googFrameRateReceived),r(t,"videoReceiveDecodeFrameRate",e.googFrameRateDecoded),r(t,"videoReceiveResolutionWidth",e.googFrameWidthReceived),r(t,"videoReceiveResolutionHeight",e.googFrameHeightReceived))))})),t}},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return u}));var r=n(0),i=function(){var e={dispatcher:{}};return e.dispatcher.eventListeners={},e.addEventListener=function(t,n){void 0===e.dispatcher.eventListeners[t]&&(e.dispatcher.eventListeners[t]=[]),e.dispatcher.eventListeners[t].push(n)},e.hasListeners=function(t){return!(!e.dispatcher.eventListeners[t]||!e.dispatcher.eventListeners[t].length)},e.on=e.addEventListener,e.removeEventListener=function(t,n){var r;e.dispatcher.eventListeners[t]&&-1!==(r=e.dispatcher.eventListeners[t].indexOf(n))&&e.dispatcher.eventListeners[t].splice(r,1)},e.dispatchEvent=function(t){var n;for(n in e.dispatcher.eventListeners[t.type])if(e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(n)&&"function"==typeof e.dispatcher.eventListeners[t.type][n])try{e.dispatcher.eventListeners[t.type][n](t)}catch(n){r.default.debug("[".concat(e.clientId,"] Error in ").concat(t.type," event"),n)}},e.dispatchSocketEvent=function(t){var n;for(n in e.dispatcher.eventListeners[t.type])e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(n)&&"function"==typeof e.dispatcher.eventListeners[t.type][n]&&e.dispatcher.eventListeners[t.type][n](t.msg)},e},o=function(e){var t={};return t.type=e.type,t},a=function(e){var t=o(e);return t.stream=e.stream,t.reason=e.reason,t.msg=e.msg,t},s=function(e){var t=o(e);return t.uid=e.uid,t.attr=e.attr,t.stream=e.stream,t},c=function(e){var t=o(e);return t.msg=e.msg,t},u=function(e){var t=o(e);return t.url=e.url,t.uid=e.uid,t.status=e.status,t.reason=e.reason,t}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=s(n(69)),u=n(2),l=s(n(0)),d=n(3),h=n(14),f=n(10),p=function(e){function t(t,n){var r=e.call(this)||this;return r._state=b.RELAY_STATE_IDLE,r._onStatus=function(e){l.default.debug("["+r.clientId+"] ChannelMediaStatus: "+JSON.stringify(e)),e&&e.command&&("onAudioPacketReceived"===e.command&&r.emit("event",y.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&r.emit("event",y.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(r._state=b.RELAY_STATE_FAILURE,r.emit("state",b.RELAY_STATE_FAILURE,_.SRC_TOKEN_EXPIRED)),"onDestTokenPrivilegeDidExpire"===e.command&&(r._state=b.RELAY_STATE_FAILURE,r.emit("state",b.RELAY_STATE_FAILURE,_.DEST_TOKEN_EXPIRED,e.channelName?{came:e.channelName}:null)))},r._onClose=function(){return o(r,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:if(l.default.debug("["+this.clientId+"] ChannelMediaSocket onClose"),this.emit("event",y.NETWORK_DISCONNECTED),this.state=b.RELAY_STATE_IDLE,!this._prevChannelMediaConfig)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startChannelMediaRelay(this._prevChannelMediaConfig)];case 2:return t.sent(),[3,4];case 3:return(e=t.sent())instanceof S&&(e.message===g.WS_ABORT||e.message===g.AP_REQUEST_ABORT)?[2]:(this.emit("state",b.RELAY_STATE_FAILURE,_.SERVER_CONNECTION_LOST),[3,4]);case 4:return[2]}}))}))},r.token=t.appId,r.appId=t.appId,r.cname=t.cname,r.uid=t.uid,r.sid=t.sid,r.clientId=n,r}return i(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){var t=this._state;this._state=e,t!==e&&this.emit("state",e)},enumerable:!0,configurable:!0}),t.prototype.startChannelMediaRelay=function(e){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:if(this.state!==b.RELAY_STATE_IDLE)throw new S(g.BAD_STATE);return this.state=b.RELAY_STATE_CONNECTING,[4,this._connect()];case 1:return t.sent(),l.default.debug("["+this.clientId+"] startChannelMediaRelay: connect success"),[4,this._sendStartRelayMessage(e)];case 2:return t.sent(),this._prevChannelMediaConfig=e,[2]}}))}))},t.prototype.updateChannelMediaRelay=function(e){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:if(this.state!==b.RELAY_STATE_RUNNING)throw new S(g.BAD_STATE);return[4,this._sendUpdateMessage(e)];case 1:return t.sent(),this._prevChannelMediaConfig=e,[2]}}))}))},t.prototype.stopChannelMediaRelay=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this._sendStopRelayMessage()];case 1:return e.sent(),l.default.debug("["+this.clientId+"] stopChannelMediaRelay: send stop message success"),this.state=b.RELAY_STATE_IDLE,this.dispose(),[2]}}))}))},t.prototype.dispose=function(){l.default.debug("["+this.clientId+"] disposeChannelMediaRelay"),this.state=b.RELAY_STATE_IDLE,this.emit("dispose"),this._signal&&this._signal.dispose(),this._prevChannelMediaConfig=null,this.removeEvent()},t.prototype._requestOneAP=function(e){var t=this;return new Promise((function(n,r){var i={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:"",ts:+new Date,version:u.VERSION,cname:t.cname,uid:t.uid+"",seq:1,requestId:1},o={service_name:"tele_channel",json_body:JSON.stringify(i)},a="https://"+e;h.post(a,o,(function(e){var t=null,i=null;try{t=JSON.parse(e)}catch(e){r(new S(g.AP_JSON_PARSE_ERROR,e))}0!==t.code&&r(new S(g.AP_REQUEST_ERROR,t));try{i=JSON.parse(t.json_body)}catch(e){r(new S(g.AP_JSON_PARSE_ERROR,e))}200!==i.code&&r(new S(g.AP_REQUEST_ERROR,i)),i.servers?n(i.servers):r(new S(g.AP_JSON_PARSE_ERROR,i))}),(function(e){return r(e)}),{"X-Packet-Service-Type":0,"X-Packet-URI":61})}))},t.prototype._requestAP=function(){var e=this,t=u.getParameter("UAP_AP");return new Promise((function(n,r){setTimeout((function(){r(new S(g.AP_REQUEST_TIMEOUT))}),5e3),e.on("dispose",(function(){r(new S(g.AP_REQUEST_ABORT))})),t.forEach((function(t){t+="/api/v1",e._requestOneAP(t).then((function(r){l.default.debug("["+e.clientId+"] startChannelMediaRelay request AP "+t+" success: "+JSON.stringify(r));var i=r[0],o="wss://"+i.address.replace(/\./g,"-")+".edge.agora.io:"+i.wss;n(o)})).catch((function(n){l.default.debug("["+e.clientId+"] startChannelMediaRelay request AP "+t+" failed: "+JSON.stringify(n))}))}))}))},t.prototype._connectWebsocket=function(e){return this._signal=new E(this.appId,this.cname,this.uid,this.sid),this._signal.connect(e)},t.prototype._connect=function(){return o(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return[4,this._requestAP()];case 1:return e=t.sent(),[4,this._connectWebsocket(e)];case 2:return t.sent(),this._signal.on("close",this._onClose.bind(this)),this._signal.on("status",this._onStatus.bind(this)),this.emit("event",y.NETWORK_CONNECTED),[2]}}))}))},t.prototype._sendStartRelayMessage=function(e){return o(this,void 0,void 0,(function(){var t,n,r,i,o,s;return a(this,(function(a){switch(a.label){case 0:return this._checkSignal(),t=this._genMessage(m.StopPacketTransfer),[4,this._signal.request(t)];case 1:return a.sent(),[4,this._signal.waitStatus("Normal Quit")];case 2:return a.sent(),l.default.debug("["+this.clientId+"] startChannelMediaRelay: StopPacketTransfer success"),n=this._genMessage(m.SetSdkProfile,e),[4,this._signal.request(n)];case 3:return a.sent(),l.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSdkProfile success"),r=this._genMessage(m.SetSourceChannel,e),[4,this._signal.request(r)];case 4:return a.sent(),[4,this._signal.waitStatus("SetSourceChannelStatus")];case 5:return a.sent(),this.emit("event",y.PACKET_JOINED_SRC_CHANNEL),l.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceChannel success"),i=this._genMessage(m.SetSourceUserId,e),[4,this._signal.request(i)];case 6:return a.sent(),l.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceUserId success"),o=this._genMessage(m.SetDestChannel,e),[4,this._signal.request(o)];case 7:return a.sent(),[4,this._signal.waitStatus("SetDestChannelStatus")];case 8:return a.sent(),this.emit("event",y.PACKET_JOINED_DEST_CHANNEL),l.default.debug("["+this.clientId+"] startChannelMediaRelay: SetDestChannel success"),s=this._genMessage(m.StartPacketTransfer,e),[4,this._signal.request(s)];case 9:return a.sent(),this.emit("event",y.PACKET_SENT_TO_DEST_CHANNEL),this.state=b.RELAY_STATE_RUNNING,l.default.debug("["+this.clientId+"] startChannelMediaRelay: StartPacketTransfer success"),[2]}}))}))},t.prototype._sendReconnectMessage=function(e){return o(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return this._checkSignal(),t=this._genMessage(m.Reconnect,e),[4,this._signal.request(t)];case 1:return n.sent(),[2]}}))}))},t.prototype._sendUpdateMessage=function(e){return o(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return this._checkSignal(),t=this._genMessage(m.UpdateDestChannel,e),[4,this._signal.request(t)];case 1:return n.sent(),this.emit("event",y.PACKET_UPDATE_DEST_CHANNEL),l.default.debug("["+this.clientId+"] sendUpdateMessage: UpdateDestChannel success"),[2]}}))}))},t.prototype._sendStopRelayMessage=function(){return o(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return this._checkSignal(),e=this._genMessage(m.StopPacketTransfer),[4,this._signal.request(e)];case 1:return t.sent(),l.default.debug("["+this.clientId+"] sendStopRelayMessage: StopPacketTransfer success"),[2]}}))}))},t.prototype._genMessage=function(e,t){var n=this,r=[],i=[],o=[],a={appId:this.appId,cname:this.cname,uid:this.uid+"",sdkVersion:u.VERSION,sid:this.sid,ts:+new Date,requestId:0,seq:0,allocate:!0,clientRequest:{}},s=null;switch(e){case m.SetSdkProfile:return a.clientRequest={command:"SetSdkProfile",type:"multi_channel"},a;case m.SetSourceChannel:return s=t.getSrcChannelMediaInfo(),a.clientRequest={command:"SetSourceChannel",uid:s.uid+"",channelName:s.channelName,token:s.token||this.appId},a;case m.SetSourceUserId:return s=t.getSrcChannelMediaInfo(),a.clientRequest={command:"SetSourceUserId",uid:this.uid+""},a;case m.SetDestChannel:return t.getDestChannelMediaInfos().forEach((function(e){r.push(e.channelName),i.push(e.uid+""),o.push(e.token||n.appId)})),a.clientRequest={command:"SetDestChannel",channelName:r,uid:i,token:o},a;case m.StartPacketTransfer:return a.clientRequest={command:"StartPacketTransfer"},a;case m.Reconnect:return a.clientRequest={command:"Reconnect"},a;case m.StopPacketTransfer:return a.clientRequest={command:"StopPacketTransfer"},a;case m.UpdateDestChannel:return t.getDestChannelMediaInfos().forEach((function(e){r.push(e.channelName),i.push(e.uid+""),o.push(e.token||n.appId)})),a.clientRequest={command:"UpdateDestChannel",channelName:r,uid:i,token:o},a}},t.prototype._checkSignal=function(){if(!this._signal||!this._signal.isConnect())throw new S(g.WS_DISCONNECTED)},t}(c.default);t.default=p;var v=function(){function e(){this.destChannelMediaInfos=new Map}return e.prototype.setSrcChannelInfo=function(e){d.checkValidObject(e,"srcInfo");var t=e.uid,n=e.channelName,r=e.token;if(r&&!d.isValidToken(r))throw new Error("Invalid token in SrcChannelInfo");if(!d.isValidChannelName(n))throw new Error("Invalid channelName in SrcChannelInfo");if(!f.is32Uint(t))throw new Error("Invalid uid in SrcChannelInfo");this.srcChannelMediaInfo=e},e.prototype.setDestChannelInfo=function(e,t){if(!d.isValidChannelName(e))throw new Error("Invalid channelName in DestChannelInfo");d.checkValidObject(t,"destInfo");var n=t.uid,r=t.token,i=t.channelName;if(r&&!d.isValidToken(r))throw new Error("Invalid token in DestChannelInfo");if(!d.isValidChannelName(i))throw new Error("Invalid channelName in DestChannelInfo");if(!f.is32Uint(n))throw new Error("Invalid uid in DestChannelInfo");this.destChannelMediaInfos.set(e,t)},e.prototype.removeDestChannelInfo=function(e){if(!d.isValidChannelName(e))throw new Error("Invalid channelName when invoke removeDestChannelInfo");this.destChannelMediaInfos.delete(e)},e.prototype.getSrcChannelMediaInfo=function(){return this.srcChannelMediaInfo},e.prototype.getDestChannelMediaInfos=function(){return this.destChannelMediaInfos},e}();t.ChannelMediaRelayConfiguration=v;var g,m,y,b,_,E=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o._onOpen=function(){o.emit("open")},o._onClose=function(e){o.emit("close"),o.dispose()},o._onMessage=function(e){var t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(o.emit("status",t.serverStatus),void o.emit(t.serverStatus.command,t.serverStatus)):void 0;o.emit("req_"+t.requestId,t)},o._requestId=1,o.appId=t,o.cname=n,o.uid=r,o.sid=i,o}return i(t,e),t.prototype.isConnect=function(){return this._ws&&this._ws.readyState===WebSocket.OPEN},t.prototype.sendMessage=function(e){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new S(g.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,e.seq=t,this._ws.send(JSON.stringify(e)),t},t.prototype.waitStatus=function(e){var t=this;return new Promise((function(n,r){var i=window.setTimeout((function(){r(new S(g.WAIT_STATUS_TIMEOUT,e))}),5e3);t.once(e,(function(t){clearTimeout(i),t.state&&0!==t.state?r(new S(g.WAIT_STATUS_ERROR,e)):n()})),t.once("dispose",(function(){clearTimeout(i),r(new S(g.WS_ABORT))}))}))},t.prototype.request=function(e){var t=this;return new Promise((function(n,r){var i=t.sendMessage(e),o=window.setTimeout((function(){t.removeAllListeners("req_"+i),r(new S(g.REQUEST_TIMEOUT))}),3e3);t.once("req_"+i,(function(e){clearTimeout(o),e&&200===e.code?n(e):r(new S(g.REQUEST_FAILED,e))})),t.once("dispose",(function(){clearTimeout(o),r(new S(g.WS_ABORT))}))}))},t.prototype.connect=function(e){var t=this;return new Promise((function(n,r){t._ws=new WebSocket(e),t._ws.onopen=function(){t._onOpen(),t._prvUrl=e,t._ws.onmessage=t._onMessage,t._ws.onclose=t._onClose,t._startHeartBeatCheck(),n()},t._ws.onclose=function(e){t._ws=null,r(new S(g.CONNECT_FAILED,"websocket error code: "+e.code))},setTimeout((function(){t._ws&&t._ws.readyState!==WebSocket.OPEN&&(t._ws.onopen=null,t._ws.onclose=null,t._ws.close(),t._ws=null,r(new S(g.CONNECT_TIMEOUT)))}),5e3),t.once("dispose",(function(){r(new S(g.WS_ABORT))}))}))},t.prototype.dispose=function(){this._clearHeartBeatCheck(),this.emit("dispose"),this.removeEvent(),this._ws&&(this._ws.onopen=null,this._ws.onclose=null,this._ws.onmessage=null,this._ws.close()),this._ws=null},t.prototype._sendPing=function(e){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new S(g.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,this._ws.send(JSON.stringify(e)),t},t.prototype._startHeartBeatCheck=function(){var e=this;this._heartBeatTimer=window.setInterval((function(){e._sendPing({command:"ping",appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid,ts:+new Date,requestId:0})}),3e3)},t.prototype._clearHeartBeatCheck=function(){window.clearInterval(this._heartBeatTimer)},t}(c.default),S=function(e,t,n){void 0===e&&(e=""),this.code=n,this.data=t,this.message=e};t.ChannelMediaError=S,function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(g=t.CHANNEL_MEDIA_ERROR||(t.CHANNEL_MEDIA_ERROR={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(m||(m={})),function(e){e[e.NETWORK_DISCONNECTED=0]="NETWORK_DISCONNECTED",e[e.NETWORK_CONNECTED=1]="NETWORK_CONNECTED",e[e.PACKET_JOINED_SRC_CHANNEL=2]="PACKET_JOINED_SRC_CHANNEL",e[e.PACKET_JOINED_DEST_CHANNEL=3]="PACKET_JOINED_DEST_CHANNEL",e[e.PACKET_SENT_TO_DEST_CHANNEL=4]="PACKET_SENT_TO_DEST_CHANNEL",e[e.PACKET_RECEIVED_VIDEO_FROM_SRC=5]="PACKET_RECEIVED_VIDEO_FROM_SRC",e[e.PACKET_RECEIVED_AUDIO_FROM_SRC=6]="PACKET_RECEIVED_AUDIO_FROM_SRC",e[e.PACKET_UPDATE_DEST_CHANNEL=7]="PACKET_UPDATE_DEST_CHANNEL",e[e.PACKET_UPDATE_DEST_CHANNEL_REFUSED=8]="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e[e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE=9]="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(y=t.CHANNEL_MEDIA_RELAY_EVENT||(t.CHANNEL_MEDIA_RELAY_EVENT={})),function(e){e[e.RELAY_STATE_IDLE=0]="RELAY_STATE_IDLE",e[e.RELAY_STATE_CONNECTING=1]="RELAY_STATE_CONNECTING",e[e.RELAY_STATE_RUNNING=2]="RELAY_STATE_RUNNING",e[e.RELAY_STATE_FAILURE=3]="RELAY_STATE_FAILURE"}(b=t.CHANNEL_MEDIA_RELAY_STATE||(t.CHANNEL_MEDIA_RELAY_STATE={})),function(e){e[e.RELAY_OK=0]="RELAY_OK",e[e.SERVER_ERROR_RESPONSE=1]="SERVER_ERROR_RESPONSE",e[e.SERVER_NO_RESPONSE=2]="SERVER_NO_RESPONSE",e[e.NO_RESOURCE_AVAILABLE=3]="NO_RESOURCE_AVAILABLE",e[e.FAILED_JOIN_SRC=4]="FAILED_JOIN_SRC",e[e.FAILED_JOIN_DEST=5]="FAILED_JOIN_DEST",e[e.FAILED_PACKET_RECEIVED_FROM_SRC=6]="FAILED_PACKET_RECEIVED_FROM_SRC",e[e.FAILED_PACKET_SENT_TO_DEST=7]="FAILED_PACKET_SENT_TO_DEST",e[e.SERVER_CONNECTION_LOST=8]="SERVER_CONNECTION_LOST",e[e.INTERNAL_ERROR=9]="INTERNAL_ERROR",e[e.SRC_TOKEN_EXPIRED=10]="SRC_TOKEN_EXPIRED",e[e.DEST_TOKEN_EXPIRED=11]="DEST_TOKEN_EXPIRED",e[e.RELAY_ALREADY_START=12]="RELAY_ALREADY_START",e[e.RELAY_NOT_START=13]="RELAY_NOT_START",e[e.OPERATION_ABORT=14]="OPERATION_ABORT"}(_=t.CHANNEL_MEDIA_RELAY_ERROR||(t.CHANNEL_MEDIA_RELAY_ERROR={}))},function(e,t,n){"use strict";n.r(t),n.d(t,"isLiveTranscodingValid",(function(){return _})),n.d(t,"generateSessionId",(function(){return m})),n.d(t,"audioLevelHelper",(function(){return p})),n.d(t,"vsResHack",(function(){return y})),n.d(t,"is32Uint",(function(){return b})),n.d(t,"safeCall",(function(){return d})),n.d(t,"random",(function(){return S})),n.d(t,"popBanTip",(function(){return T})),n.d(t,"lengthInUtf8Bytes",(function(){return w})),n.d(t,"audioTimerLoop",(function(){return x})),n.d(t,"generateId",(function(){return g})),n.d(t,"uint8ArrayToBase64",(function(){return h})),n.d(t,"base64ToUint8Array",(function(){return f}));var r=n(11),i=n.n(r),o=n(4),a=n(0),s=n(28),c=n.n(s),u=n(25),l=n(15),d=function(){var e=arguments[0];if("function"==typeof e){var t=Array.prototype.slice.call(arguments,1);e.apply(null,t)}},h=function(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)},f=function(e){for(var t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length)),r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n},p=function(e){return this.audioContext=Object(u.a)(),this.sourceNode=e.otWebkitAudioSource||this.audioContext.createMediaStreamSource(e),this.analyser=this.audioContext.createAnalyser(),this.timeDomainData=new Uint8Array(this.analyser.frequencyBinCount),this.sourceNode.connect(this.analyser),this.getAudioLevel=function(){if(this.analyser){this.analyser.getByteTimeDomainData(this.timeDomainData);for(var e=0,t=0;t<this.timeDomainData.length;t++)e=Math.max(e,Math.abs(this.timeDomainData[t]-128));return e/128}return a.default.warning("can't find analyser in audioLevelHelper"),0},this},v=1e4;function g(){return++v}function m(){return c()().replace(/-/g,"").toUpperCase()}var y=function(e,t,n){try{a.default.debug("start vsResHack",e);var r=document.createElement("video");r.setAttribute("autoplay",""),r.setAttribute("muted",""),r.muted=!0,r.setAttribute("playsinline",""),r.setAttribute("style","position: absolute; top: 0; left: 0; width:1px; high:1px;"),document.body.appendChild(r);var i=!1;r.addEventListener("playing",(function(n){o.isFireFox()?r.videoWidth&&(i=!0,a.default.debug("[vsResHack] get stream resolution: ","".concat(r.videoWidth," x ").concat(r.videoHeight),e),t(r.videoWidth,r.videoHeight),r.srcObject=null,r.remove()):(i=!0,a.default.debug("[vsResHack] get stream resolution: ","".concat(r.videoWidth," x ").concat(r.videoHeight),e),t(r.videoWidth,r.videoHeight),r.srcObject=null,r.remove())})),Object(l.setSrcObject)(r,e),r.play().catch((function(){})),setTimeout((function(){!i&&r&&(t(r.videoWidth,r.videoHeight),r.srcObject=null,r.remove())}),4e3)}catch(e){n(e)}},b=function(e){return"number"==typeof e&&0<=e&&e<=4294967295},_=function(e){var t=["lowLatency","userConfigExtraInfo","transcodingUsers"];for(var n in e)if("lowLatency"===n&&"boolean"!=typeof e[n]||"userConfigExtraInfo"===n&&"object"!==i()(e[n])||"transcodingUsers"===n&&!E(e[n])||!~t.indexOf(n)&&"number"!=typeof e[n])throw new Error("Param ["+n+"] is inValid");return!0},E=function(e){for(var t=0;t<e.length;t++)for(var n in e[t])if("number"!=typeof e[t][n])throw new Error("Param user["+t+"] - ["+n+"] is inValid");return!0},S=function(e){isNaN(e)&&(e=1e3);var t=+new Date,n=(t=(9301*t+49297)%233280)/233280;return Math.ceil(n*e)},w=function(e){var t=encodeURIComponent(e).match(/%[89ABab]/g);return e.length+(t?t.length:0)},x=function(e,t){var n=1/t,r=Object(u.a)(),i=r.createGain();i.gain.value=0,i.connect(r.destination);var o=!1;return function t(){var a=r.createOscillator();a.onended=t,a.connect(i),a.start(0),a.stop(r.currentTime+n),e(r.currentTime),o&&(a.onended=function(){})}(),function(){o=!0}},T=function(){if(!document.getElementById("agora-ban-tip")){var e=document.createElement("div");e.id="agora-ban-tip",e.style="position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: #fff;",document.querySelector("body").prepend(e);var t=document.createElement("div");t.style="background: #000; width: 346px; height: 116px; z-index: 100000; opacity: 0.6; border-radius: 10px; box-shadow: 0 2px 4px #000;",e.append(t);var n=document.createElement("div");n.style="height: 76px; display: flex; justify-content: center; align-items: center;";var r=document.createElement("span");r.style="height: 28px; width: 28px; color: #000; text-align: center; line-height: 30px; background: #fff; border-radius: 50%; font-weight: 600; font-size: 20px;margin-right: 5px;",r.innerText="!";var i=document.createElement("span");i.innerText="This browser does not support webRTC",n.append(r),n.append(i);var o=document.createElement("div");o.style="height: 38px; display: flex; border-top: #fff 1px solid; justify-content: center; align-items: center;",o.innerText="OK",t.append(n),t.append(o),o.onclick=function(){var e=document.getElementById("agora-ban-tip");e.parentNode.removeChild(e)}}}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){e.exports=n(64)},function(t,n,r){"use strict";var i=r(12),o=r.n(i),a=r(17),s=r.n(a),c=r(11),u=r.n(c),l=r(32),d=r.n(l),h=r(7),f=r.n(h),p=r(22),v=r(8),g=function(e){e&&e.apply(this,[].slice.call(arguments,1))},m=r(0),y=r(1),b=r(10),_=r(14),E=r(2),S=function(e){var t=Object(v.b)(e);t.needReconnect=!0,t.isTimeout=!1,t.isInit=!0,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),t.lastMsgTime=null,t.clientId=e.clientId,t.hostIndex=0,t.requestID=0,e.host instanceof Array?t.host=e.host:t.host=[e.host],t.getSendBytes=function(){return t.sendbytes},t.getRecvBytes=function(){return t.recvbytes},t.getDuration=function(){return Math.ceil((Date.now()-t.startTime)/1e3)},t.getURL=function(){return t.connection.url},t.reconnect=function(){t.isInit=!0,t.creatConnection()},t.connectNext=function(){t.isInit=!0,++t.hostIndex,m.default.debug("["+t.clientId+"] Gateway length:"+t.host.length+" current index:"+t.hostIndex),t.hostIndex>=t.host.length?t.dispatchEvent(Object(v.d)({type:"recover"})):t.creatConnection()},t.replaceHost=function(e){t.host=e||t.host,t.hostIndex=0,t.creatConnection()},t.creatConnection=function(){t.needReconnect=!0,t.lts=(new Date).getTime(),t.connection=new WebSocket("wss://"+t.host[t.hostIndex]),t.connection.binaryType="arraybuffer",t.turnConfig={};var n=e.proxyServerType;if(t.connection.url&&3!==n&&4!==n&&5!==n){var r=t.connection.url.match(/wss\:\/\/([^:]+):(\d+)/),i=t.host[t.hostIndex].split(":"),o=t.connection.url.match(/h=([^:]+)&p=(\d+)/);r?(t.turnConfig.url=r[1],Object(E.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(r[2])+30),Object(E.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(r[2])+30)):o?(t.turnConfig.url=o[1],Object(E.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(o[2])+30),Object(E.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(o[2])+30)):i&&(t.turnConfig.url=i[0],Object(E.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(i[1])+30),Object(E.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(i[1])+30))}t.connection.onopen=function(e){t.needReconnect=!0,t.isTimeout=!1,t.isInit=!1,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),Object(_.resetHTTPByetsCount)(),clearTimeout(t.timeoutCheck),t.dispatchEvent(Object(v.d)({type:"onopen",event:e,socket:t}))},t.connection.onmessage=function(e){if(e.data instanceof ArrayBuffer)t.dispatchEvent({type:"onBinaryData",data:e.data});else{t.recvbytes+=Object(b.lengthInUtf8Bytes)(e.data);var n=JSON.parse(e.data);t.lastMsgTime=Date.now(),n.hasOwnProperty("_id")?t.dispatchEvent(Object(v.d)({type:n._id,msg:n})):n.hasOwnProperty("_type")&&t.dispatchSocketEvent(Object(v.d)({type:n._type,msg:n._message}))}},t.connection.onclose=function(n){t.needReconnect?t.isTimeout||t.isInit?(m.default.debug("["+t.clientId+"] websockect connect timeout"),y.report.joinGateway(e.sid,{lts:t.lts,succ:!1,ec:"timeout",addr:t.connection.url}),t.connectNext()):(t.dispatchEvent(Object(v.d)({type:"disconnect",event:n})),t.requests&&t.requests instanceof Array&&(t.requests.map((function(e){e.callback("REQUEST_ABORT")})),t.requests=[])):(m.default.debug("["+t.clientId+"] websockect closeed"),g(e.onFailure,n),clearTimeout(t.timeoutCheck),t.dispatchEvent(Object(v.d)({type:"close",event:n})),t.connection.onopen=void 0,t.connection.onclose=void 0,t.connection.onerror=void 0,t.connection.onmessage=void 0,t.connection=void 0)},t.connection.onerror=function(e){},setTimeout((function(){t.connection&&t.connection.readyState!=WebSocket.OPEN&&(t.isTimeout=!0,t.connection.close())}),5e3)},t.creatConnection(),t.sendMessage=function(e,n){if(t.connection&&t.connection.readyState==WebSocket.OPEN){var r=JSON.stringify(e);t.sendbytes+=Object(b.lengthInUtf8Bytes)(r),t.connection.send(r)}else n({error:"Gateway not connected"})},t.disconnect=function(){t.needReconnect=!0,t.connection.close()},t.close=function(){t.needReconnect=!1,t.connection.onclose=void 0,t.connection.close(),clearInterval(t.requestTimer),t.requests&&t.requests instanceof Array&&(t.requests.map((function(e){e.callback("REQUEST_ABORT")})),t.requests=[])},t.sendSignalCommand=function(e,n){e._id="_request_"+t.requestID,t.requestID+=1,"publish_stats"!==e._type&&"subscribe_stats"!==e._type&&"publish_stats_low"!==e._type&&t.on(e._id,(function(r){r.msg&&n&&n(r.msg._result,r.msg.message),delete t.dispatcher.eventListeners[e._id]})),t.sendMessage(e,(function(e){e.reason="NOT_CONNECTED",n&&n(e.reason,e)}))},t.requests=[];var n=function(e){var n=t.requests.findIndex((function(t){return t.id===e.type}));if(n>=0)var r=t.requests.splice(n,1)[0];r&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.msg&&r.callback&&r.callback(e.msg._result,e.msg._message)):m.default.warning("Detached Response",e.type,e.msg)},r=function(e){var n=this,r=t.requests.findIndex((function(e){return e.id===n.id}));r>=0&&(n=t.requests.splice(r,1)[0]),n&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.reason="NOT_CONNECTED",n.callback&&n.callback(e.reason,e)):m.default.warning("handleSendError",n)};return t.sendRequest=function(e,i){e=f()({_id:"_request_"+t.requestID},e),t.requestID+=1;var o={id:e._id,timeoutCounter:0,stalledAt:Date.now(),message:e,callback:i};t.requests.push(o),t.addEventListener(e._id,n),t.sendMessage(e,r.bind(o))},t.checkRequestTimeout=function(){for(var e=Math.ceil(Object(E.getParameter)("SIGNAL_REQUEST_TIMEOUT")/Object(E.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),n=t.requests.length-1;n>=0;n--){var r=t.requests[n];r.timeoutCounter>=e?(t.requests.splice(n,1),m.default.error("Request Timeout",r.timeoutCounter,r.message),r.callback&&r.callback("TIMEOUT")):r.timeoutCounter++}},clearInterval(t.requestTimer),t.requestTimer=setInterval(t.checkRequestTimeout,Object(E.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),t.sendReport=function(e){t.sendMessage(e,(function(){}))},t},w=function(e,t){var n={connect:function(){t.host=e,n.signal=S(t),n.on=n.signal.on,n.dispatchEvent=n.signal.dispatchEvent,n.signal.on("onopen",(function(e){n.signal.onEvent=function(e){n.dispatchEvent(Object(v.d)({type:e.event,msg:e}))},n.dispatchEvent(Object(v.d)({type:"connect",msg:e}))})),n.signal.on("onError",(function(e){var t=e.msg;onError(t.code,"error")}))},getLastMsgTime:function(){return n.signal&&n.signal.lastMsgTime},getSendBytes:function(){return n.signal.getSendBytes()},getRecvBytes:function(){return n.signal.getRecvBytes()},getDuration:function(){return n.signal.getDuration()},disconnect:function(){n.signal.disconnect()},close:function(){n.signal.close()},getURL:function(){return n.signal.getURL()},reconnect:function(){n.signal.reconnect()},connectNext:function(){n.signal.connectNext()},replaceHost:function(e){n.signal.replaceHost(e)},emitSimpleMessage:function(e,t){n.signal.sendSignalCommand(e,t)},emitRequest:function(e,t){n.signal.sendRequest(e,t)},emitReport:function(e){n.signal.sendReport(e)}};return n.connect(),n},x=r(23),T=r(5),I=r(20),R=r(4),k={ERR_NO_VOCS_AVAILABLE:"tryNext",ERR_NO_VOS_AVAILABLE:"tryNext",ERR_JOIN_CHANNEL_TIMEOUT:"tryNext",WARN_REPEAT_JOIN:"quit",ERR_JOIN_BY_MULTI_IP:"recover",WARN_LOOKUP_CHANNEL_TIMEOUT:"tryNext",WARN_OPEN_CHANNEL_TIMEOUT:"tryNext",ERR_VOM_SERVICE_UNAVAILABLE:"tryNext",ERR_TOO_MANY_USERS:"tryNext",ERR_MASTER_VOCS_UNAVAILABLE:"tryNext",ERR_INTERNAL_ERROR:"tryNext",K_SERVICE_NOT_READY:"tryNext",K_SERVICE_TOO_HEAVY:"tryNext",notification_test_recover:"recover",notification_test_tryNext:"tryNext",notification_test_retry:"retry"},O={googActualEncBitrate:"A_aeb",googAvailableSendBandwidth:"A_asb",googRetransmitBitrate:"A_rb",googAvailableReceiveBandwidth:"A_arb",googTargetEncBitrate:"A_teb",googBucketDelay:"A_bd",googTransmitBitrate:"A_tb",googCodecName:"A_cn",bytesSent:"bytesSent",packetsLost:"packetsLost",packetsSent:"packetsSent",googAdaptationChanges:"A_ac",googAvgEncodeMs:"A_aem",googEncodeUsagePercent:"A_eup",googFirsReceived:"A_fr",googFrameHeightInput:"A_fhi",googFrameHeightSent:"A_fhs",googFrameRateInput:"A_fri",googFrameRateSent:"A_frs",googFrameWidthInput:"A_fwi",googFrameWidthSent:"A_fws",googNacksReceived:"A_nr",googPlisReceived:"A_pr",googRtt:"A_rtt",aecDivergentFilterFraction:"A_adff",audioInputLevel:"A_ail",googEchoCancellationReturnLoss:"A_ecrl",googEchoCancellationReturnLossEnhancement:"A_ecrle",googResidualEchoLikelihood:"A_rel",googResidualEchoLikelihoodRecentMax:"A_relrm",googTargetDelayMs:"A_tdm",bytesReceived:"bytesReceived",packetsReceived:"packetsReceived",googDecodeMs:"A_dm",googMaxDecodeMs:"A_mdm",googRenderDelayMs:"A_rdm",googFrameWidthReceived:"A_fwr",googFrameHeightReceived:"A_fhr",googFrameRateReceived:"A_frr",googFrameRateDecoded:"A_frd",googFrameRateOutput:"A_fro",googJitterBufferMs:"A_jbm",googCurrentDelayMs:"A_cdm",googMinPlayoutDelayMs:"A_mpdm",googNacksSent:"A_ns",googPlisSent:"A_ps",googFirsSent:"A_fs",audioOutputLevel:"A_aol",googAccelerateRate:"A_ar",googDecodingCNG:"A_dcng",googDecodingCTN:"A_dctn",googDecodingCTSG:"A_dctsg",googDecodingNormal:"A_dn",googDecodingPLC:"A_dplc",googDecodingPLCCNG:"A_dplccng",googExpandRate:"A_er",googJitterReceived:"A_jr",googPreemptiveExpandRate:"A_per",googPreferredJitterBufferMs:"A_pjbm",googSecondaryDecodedRate:"A_sdr",googSpeechExpandRate:"A_ser",uplink_fraction_lost:"B_ufl",uplink_cumulative_lost:"B_ucl",uplink_available_bandwidth:"B_uab",period_fir:"B_fir",access_delay:"B_acd",uplink_network_quality:"B_unq",downlink_network_quality:"B_dnq",pub_audio_lost_ratio_400ms:"B_palr4",pub_video_lost_ratio_400ms:"B_pvlr4",e2e_delay:"B_ed",audio_delay:"B_ad",video_delay:"B_vd",stream_type:"B_st",e2e_audio_lost_ratio_400ms:"B_ealr4",e2e_video_lost_ratio_400ms:"B_evlr4",downlink_estimate_bandwidth:"B_deb",peer_publish_audio_duration:"B_ppad",peer_publish_video_duration:"B_ppvd"},C={};for(var A in O){var N=O[A];C[N]&&m.default.error("Key Conflict: ".concat(N,": ").concat(O[N],"| ").concat(A)),C[N]=A}var j=function(e){return O[e]||e},D=function(e){return C[e]||e},P=r(9),L=r.n(P),M=r(54),U=function t(n){var r=!1,i=function(e){return{_type:"control",_message:e}},a=function(e,t){var n={};return Object.keys(t).forEach((function(e){Object(E.getParameter)("STATS_FILTER")[e]||(n[j(e)]=t[e])})),{_type:"subscribe_related_stats",_message:{stream_type:"high",stream_id:e,stats:n}}},c=function(e){return{_type:"publish",_message:e}},l=function(e,t){var n={};return Object.keys(t).forEach((function(e){Object(E.getParameter)("STATS_FILTER")[e]||(n[j(e)]=t[e])})),{_type:"subscribe_stats",_message:{stream_id:e,stats:n}}},h=t.DISCONNECTED,_=t.CONNECTING,S=t.CONNECTED,O=t.DISCONNECTING,C=h,A=Object(v.b)(n);Object.defineProperty(A,"state",{set:function(e){var n=C;C=e,Object(I._setClientConnectionStateRecord)(A.clientId,e),e!==t.CONNECTED&&e!==t.DISCONNECTING&&(A.hasJoined=!1),n!==e&&A.dispatchEvent({type:"connection-state-change",prevState:t.connetionStateMap[n],curState:t.connetionStateMap[e]})},get:function(){return C}}),A.socket=void 0,A.state=h,A.mode=n.mode,A.role=n.role,A.codec=n.codec,A.config={},A.timers={},A.timer_counter={},A.localStreams={},A.remoteStreams={},A.remoteMuteState={},A.attemps=1,A.p2p_attemps=1,A.audioLevel={},A.activeSpeaker=void 0,A.reconnectMode="tryNext",A.rejoinAttempt=0,A.hasChangeBGPAddress=!1,A.traffic_stats={},A.clientId=n.clientId,A.pingpongCounter=0,A.hasInvokeLeave=!1,A.p2ps=new Map,A.liveStreams=new Map,A.injectLiveStreams=new Map,A.remoteStreamsInChannel=new Set,A.subscribeRequestId=new Map,A.publishRequestId=0,A.hasJoined=!1,A.isFirstSuccess=!0,A.peerPublishDurationMap=new Map,function(e){var t=g;e.makeRequest=function(n,r,i){if(void 0===e.socket)return m.default.debug("[".concat(e.clientId,"] No socket available")),void t(i,T.default.INVALID_OPERATION);try{e.socket.emitRequest(n,(function(e,t){var n;"success"===e?"function"==typeof r&&r(t):"function"==typeof i&&(n=t&&t.error_code&&T.GatewayErrorCode[t.error_code]?T.GatewayErrorCode[t.error_code]:t&&t.error_str?t.error_str:t&&t.error_code?"UNKNOW_ERROR_".concat(t.error_code):e,i(n,t))}))}catch(r){m.default.debug("[".concat(e.clientId,"] Socket emit message failed ").concat(JSON.stringify(n))),m.default.debug("[".concat(e.clientId,"] "),r),t(i,T.default.SOCKET_ERROR)}},e.makeReport=function(t){void 0===e.socket&&m.default.debug("[".concat(e.clientId,"] No socket available"));try{e.socket.emitReport(t)}catch(n){m.default.debug("[".concat(e.clientId,"] Socket emit report failed ").concat(JSON.stringify(t)))}}}(A),A.inChannelInfo={joinAt:null,duration:0},A._sendMessage=function(e,t){switch(e){case"SubscribeStats":A.makeReport(l.apply(void 0,d()(t)));break;case"SubscribeRelatedStats":A.makeReport(a.apply(void 0,d()(t)))}};var N=g;A.p2pCounter=Object(b.random)(1e5),A.generateP2PId=function(){return++A.p2pCounter},A.audioVolumeIndication={enabled:!1,sortedAudioVolumes:[],smooth:3,interval:2e3},A.remoteVideoStreamTypes={REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2},A.streamFallbackTypes={STREAM_FALLBACK_OPTION_DISABLED:0,STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:1,STREAM_FALLBACK_OPTION_AUDIO_ONLY:2},A.configPublisher=function(e){A.config=e},A.getGatewayInfo=function(e,t){A.makeRequest({_type:"gateway_info"},e,t)},A.setClientRole=function(e,t){m.default.debug("[".concat(A.clientId,"] setClientRole to ").concat(e));var n=y.report.reportApiInvoke(A.joinInfo.sid,{name:"_setClientRole",callback:t});A.makeRequest({_type:"set_client_role",_message:{role:e}},(function(){A.role=e,A.dispatchEvent({type:"client-role-changed",role:e}),n&&n(null,{role:e})}),(function(t,r){if(r&&r.code&&(t=T.GatewayErrorCode[r.code]||"UNKNOW_ERROR_"+r.code),"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE"===t)return n&&n(null);m.default.error("set Client role error to "+e+": "+t),n&&n(t)}))},A.join=function(e,t,r,i){A.hasInvokeLeave=!1,e.useProxyServer&&(A.hasChangeBGPAddress=!0);var o=(new Date).getTime(),a=e.uid;if(A.inChannelInfo.joinAt&&(A.inChannelInfo.duration+=o-A.inChannelInfo.joinAt),A.inChannelInfo.joinAt=o,A.state!==_)return m.default.error("[".concat(A.clientId,"] GatewayClient.join Failed: state "),A.state),i&&i(T.default.INVALID_OPERATION),void y.report.joinGateway(e.sid,{lts:o,succ:!1,ec:T.default.INVALID_OPERATION,addr:null});if(null!=a&&parseInt(a)!==a)return m.default.error("[".concat(A.clientId,"] Input uid is invalid")),A.state=h,i&&i(T.default.INVALID_PARAMETER),void y.report.joinGateway(e.sid,{lts:o,succ:!1,ec:T.default.INVALID_PARAMETER,addr:null});var s=V.register(A,{uid:a,cname:e&&e.cname});if(s)return A.state=h,i&&i(s),void y.report.joinGateway(e.sid,{lts:o,succ:!1,ec:s,addr:null});A.joinInfo=f()({},e),A.uid=a,A.key=t,A.pingpongCounter=0,G(e,(function(t){if(e.useLocalAccessPoint)try{var s=A.socket.signal.connection.url.match(/wss\:\/\/([^:]+):(\d+)/)[1];Object(E.setParameter)("EVENT_REPORT_DOMAIN",s),Object(E.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",s),Object(E.setParameter)("LOG_UPLOAD_SERVER","".concat(s,":6444"))}catch(e){m.default.debug("[".concat(A.clientId,"] LocalAccessPoint error: ").concat(e))}if(A.state===O||A.state===h)return i&&i("LEAVE_BEFORE_JOIN_SUCCESS");A.state=S,m.default.debug("[".concat(A.clientId,"] Connected to gateway server")),clearInterval(A.pingTimer),A.pingTimer=setInterval((function(){var e=Object(E.getParameter)("PING_PONG_TIME_OUT");if(++A.pingpongCounter>=e){var t=Date.now();A.socket&&m.default.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-A.socket.getLastMsgTime(),"ms")),A.socket&&A.socket.getLastMsgTime()&&t-A.socket.getLastMsgTime()>Object(E.getParameter)("WEBSOCKET_TIMEOUT_MIN")&&(A.pingpongCounter=0,A.socket.close(),A.socket.dispatchEvent(Object(v.d)({type:"disconnect",event:{msg:"PING_PONG_TIME_OUT"}})))}var n=Date.now();A.makeRequest({_type:"ping"},(function(){A.pingpongCounter=0;var e=Date.now()-n;Object(E.getParameter)("REPORT_STATS")&&A.makeRequest({_type:"ping_back",_message:{pingpongElapse:e}})}),(function(e,t){"TIMEOUT"!==e&&(m.default.error("Ping Error ".concat(e," ").concat(JSON.stringify(t))),t&&t.error_code&&A.socket&&A.socket.signal&&A.socket.signal.connection&&A.socket.signal.connection.readyState===WebSocket.OPEN&&(m.default.info("Disconnecting websocket connection"),A.socket.signal.connection.close()))}))}),3e3),function(e,t){var r=e.role,i=f()({},A.joinInfo.apResponse),o={session_id:A.joinInfo.sid,app_id:n.appId,channel_key:A.key,channel_name:A.joinInfo.cname,sdk_version:E.VERSION,browser:navigator.userAgent,process_id:Object(y.getProcessId)(),mode:A.mode,codec:A.codec,role:r,has_changed_gateway:Object(E.getParameter)("FORCE_CHANGED_GATEWAY_FLAG")||A.hasChangeBGPAddress,ap_response:i,optionalInfo:A.joinInfo.optionalInfo,extend:Object(E.getParameter)("JOIN_EXTEND"),details:{}};if(A.joinInfo.hasOwnProperty("stringUid")&&(o.string_uid=A.joinInfo.stringUid),A.socket&&A.socket.signal&&A.socket.signal&&(i.addresses&&i.addresses[A.socket.signal.hostIndex]&&(o.ap_response.ticket=i.addresses[A.socket.signal.hostIndex].ticket,delete i.addresses),Object(E.getParameter)("SET_DEFAULT_TURNSERVER")&&A.socket.signal.turnConfig)){var a={username:A.joinInfo.uid.toString(),credential:A.joinInfo.token,forceturn:Object(E.getParameter)("FORCE_TURN")};a.url=A.socket.signal.turnConfig.url,A.socket.signal.turnConfig.tcpport&&(a.tcpport=""+A.socket.signal.turnConfig.tcpport),A.socket.signal.turnConfig.udpport&&(a.udpport=""+A.socket.signal.turnConfig.udpport),A.joinInfo.turnServers.find((function(e){if(e.url===a.url)return!0}))||A.joinInfo.turnServers.push(a)}3===A.joinInfo.proxyServerType&&(o.plugin="web_cloud_proxy",o.details.cservice_map="1"),A.joinInfo.aesmode&&A.joinInfo.aespassword?(o.aes_mode=A.joinInfo.aesmode,o.aes_encrypt=!0,A.joinInfo.aes_salt&&(o.aes_salt=A.joinInfo.aes_salt),Object(M.encryptRSA)(A.joinInfo.aespassword).then((function(e){o.aes_secret=e,A.dispatchEvent({type:"join-message-hook",joinMessage:o}),t(null,{_type:"join",_message:o})})).catch((function(e){m.default.error("[".concat(A.clientId,"] encrypt password failed "),e),t("ENCRYPT_PASSWORD_FAILED")}))):(A.dispatchEvent({type:"join-message-hook",joinMessage:o}),t(null,{_type:"join",_message:o}))}({role:A.role},(function(t,n){if(t)return i&&i(t);A.makeRequest(n,(function(t){if(y.report.joinGateway(e.sid,{lts:o,succ:!0,ec:null,vid:e.vid,uid:e.uid,addr:A.socket.getURL(),firstSuccess:A.isFirstSuccess}),A.joinSuccessLts=Date.now(),A.isFirstSuccess=!1,A.rejoinAttempt=0,A.hasJoined=!0,r&&r(t.uid),!0===t.return_vosip||!0===Object(E.getParameter)("ENABLE_LIVE_SERVER_LIST")){var n=null;try{n=A.socket.signal.connection.url}catch(e){m.default.debug("[".concat(A.clientId,"] Can not get gateway ip: ").concat(e))}n?Object(E.setParameter)("LIVE_SERVER_LIST",[n]):Object(E.setParameter)("LIVE_SERVER_LIST",[])}A.dispatchEvent({type:"join"}),clearInterval(A.timers.trafficStats),A.timers.trafficStats=setInterval((function(){A.makeRequest({_type:"traffic_stats"},(function(e){var t={};for(var n in e)t[D(n)]=e[n];if(t.peer_delay&&t.peer_delay.length){var r=[];t.peer_delay.forEach((function(e){var t={};for(var n in e)t[D(n)]=e[n];r.push(t)})),t.peer_delay=r}A.traffic_stats=t,A.traffic_stats.timestamp=Date.now();var i=A.joinInfo.stringUid,o=A.localStreams[a]||A.localStreams[i];o&&(o.traffic_stats={access_delay:t.access_delay}),t.peer_delay&&t.peer_delay.forEach((function(e){var n=A.remoteStreams[e.peer_uid];n&&(n.traffic_stats={access_delay:t.access_delay,e2e_delay:e.e2e_delay,audio_delay:e.audio_delay,video_delay:e.video_delay})})),A.dispatchEvent({type:"after-getTrafficStats",trafficStats:t})}))}),3e3)}),(function(t,n){if(m.default.error("[".concat(A.clientId,"] User join failed [").concat(t,"]")),"ERR_JOIN_BY_MULTI_IP"===t){try{y.report.joinGateway(e.sid,{lts:o,succ:!1,ec:"ERR_JOIN_BY_MULTI_IP",addr:A.socket.getURL()})}catch(e){}return A.dispatchEvent({type:"onMultiIP",option:n.option})}k[t]&&A.rejoinAttempt<4?A._doWithAction(k[t],r,i):i&&i(t),y.report.joinGateway(e.sid,{lts:o,succ:!1,ec:t,addr:A.socket&&A.socket.getURL()})}))}))}),(function(t){m.default.error("[".concat(A.clientId,"] User join failed [").concat(t,"]")),i&&i(t),y.report.joinGateway(e.sid,{lts:o,succ:!1,ec:t,addr:A.socket.getURL()})})),this.remoteMuteState={},A.resetAudioVolumeIndication()},A.leave=function(e,t){var n=V.unregister(A);switch(n&&m.default.debug("[".concat(A.clientId,"] "),n),A.p2ps.clear(),A.state){case h:return m.default.debug("[".concat(A.clientId,"] Client Already in DISCONNECTED status")),void N(e);case O:return m.default.debug("[".concat(A.clientId,"] Client Already in DISCONNECTING status")),void N(t,T.default.INVALID_OPERATION);case _:return A.socket&&A.socket.close(),A.socket=void 0,m.default.info("[".concat(A.clientId,"] Client connecting, Leave channel success")),A.state=h,e&&e()}for(var r in A.state=O,A.channelMediaConfig&&(A.channelMediaRelayController&&A.channelMediaRelayController.dispose(),A.channelMediaConfig,A.channelMediaRelayController=null),clearInterval(A.pingTimer),A.timers)A.timers.hasOwnProperty(r)&&clearInterval(A.timers[r]);for(var r in A.inChannelInfo.joinAt&&(A.inChannelInfo.duration+=Date.now()-A.inChannelInfo.joinAt,A.inChannelInfo.joinAt=null),A.hasJoined?A.makeRequest({_type:"leave"},(function(t){A.socket.close(),A.socket=void 0,m.default.info("[".concat(A.clientId,"] Leave channel success")),A.state=h,e&&e(t)}),(function(e){"TIMEOUT"!==e&&"REQUEST_ABORT"!==e&&(m.default.error("[".concat(A.clientId,"] Leave Channel Failed"),e),A.state=S,t&&t(e))})):(A.socket&&(A.socket.close(),A.socket=void 0),m.default.info("[".concat(A.clientId,"] Leave channel before joined")),A.state=h,e&&e()),A.localStreams)if(A.localStreams.hasOwnProperty(r)){var i=A.localStreams[r];delete A.localStreams[r],void 0!==i.pc&&(i.pc.close(),i.pc=void 0)}H()},A.publish=function(e,t,n,r){var o=(new Date).getTime(),a=!1;if(e.publishLTS=o,"object"!==u()(e)||null===e)return m.default.error("[".concat(A.clientId,"] Invalid local stream")),r&&r(T.default.INVALID_LOCAL_STREAM),void y.report.publish(A.joinInfo.sid,{lts:o,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:T.default.INVALID_LOCAL_STREAM});if(!e.stream&&void 0===e.url)return m.default.error("[".concat(A.clientId,"] Invalid local media stream")),r&&r(T.default.INVALID_LOCAL_STREAM),void y.report.publish(A.joinInfo.sid,{lts:o,succ:!1,audio:!1,video:!1,screenshare:!1,audioName:"",videoName:"",screenName:"",ec:T.default.INVALID_LOCAL_STREAM});if(A.state!==S)return m.default.error("[".concat(A.clientId,"] User is not in the session")),r&&r(T.default.INVALID_OPERATION),void y.report.publish(A.joinInfo.sid,{lts:o,succ:!1,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:T.default.INVALID_OPERATION});var s=e.getAttributes()||{};if(e.local&&void 0===A.localStreams[e.getId()]&&(e.hasAudio()||e.hasVideo()||e.hasScreen())){var l=A.generateP2PId();if(A.p2ps.set(l,e),e.p2pId=l,void 0!==e.url)q(c({state:"url",audio:e.hasAudio(),video:e.hasVideo(),attributes:e.getAttributes()},e.url),(function(t,n){"success"===t?(e.getUserId()!==n&&e.setUserId(n),A.localStreams[n]=e,e.onClose=function(){A.unpublish(e)}):m.default.error("[".concat(A.clientId,"] Publish local stream failed"),t)}));else{A.localStreams[e.getId()]=e,e.connectionSpec={callback:function(s){s||r&&r("CANNOT_GET_OFFER"),"motion"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-framerate"),"detail"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-resolution"),A.makeRequest(c({state:"offer",stream_type:1==t.streamType?"low":"high",p2p_id:l,sdp:s,audio:e.audio||e.screenAudio,video:e.screen||e.video,screen:e.screen,attributes:e.getAttributes(),dtx:e.DTX,hq:e.highQuality,lq:e.lowQuality,stereo:e.stereo,speech:e.speech,codec:A.codec,extend:Object(E.getParameter)("PUB_EXTEND")}),(function(t){e.getUserId()!==t.uid&&e.setUserId(t.uid),m.default.info("[".concat(A.clientId,"] Local stream published with uid"),t.uid),e.onClose=function(){A.unpublish(e)},e._onAudioUnmute=function(){A.makeReport(i({action:"unmute_local_audio",stream_id:e.getId()}))},e._onVideoUnmute=function(){A.makeReport(i({action:"unmute_local_video",stream_id:e.getId()}))},e._onAudioMute=function(){A.makeReport(i({action:"mute_local_audio",stream_id:e.getId()}))},e._onVideoMute=function(){A.makeReport(i({action:"mute_local_video",stream_id:e.getId()}))},e.getId()===e.getUserId()&&(e.isAudioOn()||e.hasAudio()&&(m.default.debug("[".concat(A.clientId,"] local stream audio mute")),e._onAudioMute()),e.isVideoOn()||(e.hasVideo()||e.hasScreen())&&(m.default.debug("[".concat(A.clientId,"] local stream video mute")),e._onVideoMute())),e.pc.oniceconnectionstatechange=function(t){if("failed"===t){if(null!=A.timers[e.getId()]&&(clearInterval(A.timers[e.getId()]),clearInterval(A.timers[e.getId()]+"_RelatedStats")),m.default.error("[".concat(A.clientId,"] Publisher connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(l)),A.p2ps.delete(l),m.default.debug("[".concat(A.clientId,"] publish p2p failed: "),A.p2ps),!a)return a=!0,y.report.publish(A.joinInfo.sid,{lts:o,succ:!1,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:T.default.PEERCONNECTION_FAILED,publishRequestid:A.publishRequestId||0,p2pid:l}),A.dispatchEvent(Object(v.a)({type:"pubP2PLost",stream:e})),r&&r(T.default.PEERCONNECTION_FAILED);A.dispatchEvent(Object(v.a)({type:"pubP2PLost",stream:e}))}else if("connected"===t&&(m.default.debug("[".concat(A.clientId,"] publish p2p connected: "),A.p2ps),e.getId()===e.getUserId()&&(e._isAudioMuted()?A.makeReport(i({action:"mute_local_audio",stream_id:e.getId()})):A.makeReport(i({action:"unmute_local_audio",stream_id:e.getId()})),e._isVideoMuted()?A.makeReport(i({action:"mute_local_video",stream_id:e.getId()})):A.makeReport(i({action:"unmute_local_video",stream_id:e.getId()}))),!a))return a=!0,y.report.publish(A.joinInfo.sid,{lts:o,succ:!0,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:null,publishRequestid:A.publishRequestId||0,p2pid:l}),n&&n()},e.pc.processSignalingMessage(t.sdp)}),(function(t,n){m.default.error("Publish Failed: ".concat(t)),y.report.publish(A.joinInfo.sid,{lts:o,succ:!1,audio:e.hasAudio(),video:e.hasVideo(),screenshare:e.hasScreen(),audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:t,publishRequestid:A.publishRequestId||0,p2pid:l}),"TIMEOUT"!=t&&(A.processPublishFailure(e),r&&r(t))}))},audio:e.hasAudio(),video:e.hasVideo(),screen:e.hasScreen(),optimizationMode:e.optimizationMode,isSubscriber:!1,stunServerUrl:A.stunServerUrl,turnServers:A.joinInfo.turnServers,maxAudioBW:s.maxAudioBW,minVideoBW:s.minVideoBW,maxVideoBW:s.maxVideoBW,mode:A.mode,codec:A.codec,isVideoMute:e.userMuteVideo||e.peerMuteVideo,isAudioMute:e.userMuteAudio||e.peerMuteAudio,maxFrameRate:e.attributes.maxFrameRate,agoraStream:e,clientId:A.clientId,isCloudProxy3:3===A.joinInfo.proxyServerType,onNoIceCandidate:function(){A.dispatchEvent({type:"no_ice_candidate",stream:e})}},e.pc=Object(x.a)(e.connectionSpec),e.pc.addStream(e.stream),m.default.debug("[".concat(A.clientId,"] PeerConnection add stream :"),e.stream),e.pc.onnegotiationneeded=function(n){"motion"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-framerate"),"detail"===e.optimizationMode&&e.pc.setRtpSenderParameters("maintain-resolution");var r={state:"negotiation",stream_type:1===t.streamType?"low":"high",p2p_id:l,sdp:n};A.makeRequest(c(r),(function(t){m.default.debug("Negotating Stream ".concat(e.getId())),e.pc.processSignalingMessage(t.sdp)}),(function(e,t){m.default.error("Negotiation failed ".concat(e),t,r)}))},clearInterval(A.timers[e.getId()]),A.timers[e.getId()]=setInterval((function(){if(Object(E.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate((function(n){n.forEach((function(n){if(n&&n.id&&!(/_recv$/.test(n.id)||/^time$/.test(n.id)||~n.type.toLowerCase().indexOf("inbound"))&&e.getUserId()){if(-1===n.id.indexOf("outbound_rtp")&&-1===n.id.indexOf("OutboundRTP")&&-1===n.type.toLowerCase().indexOf("outbound")||"video"!==n.mediaType||(n.googFrameWidthSent=e.videoWidth+"",n.googFrameHeightSent=e.videoHeight+""),"video"===n.mediaType)try{var r=e.stream.getVideoTracks()[0];n.A_vstd=r.enabled?"0":"1"}catch(e){}if("audio"===n.mediaType)try{var i=e.stream.getAudioTracks()[0];n.A_astd=i.enabled?"0":"1"}catch(e){}if(e.getId()==e.getUserId()){var o=200*t;t++,setTimeout((function(){var e=A.socket&&A.socket.getLastMsgTime()&&Date.now()-A.socket.getLastMsgTime();e>Object(E.getParameter)("REPORT_STATS_TIMEOUT")?m.default.debug("PublishStats report blocked by REPORT_STATS_TIMEOUT ".concat(e)):A.makeReport(function(e){var t={};return Object.keys(e).forEach((function(n){Object(E.getParameter)("STATS_FILTER")[n]||(t[j(n)]=e[n])})),{_type:"publish_stats",_message:{stream_type:"high",stats:t}}}(n))}),o)}else o=200*t,t++,setTimeout((function(){var e=A.socket&&A.socket.getLastMsgTime()&&Date.now()-A.socket.getLastMsgTime();e>Object(E.getParameter)("REPORT_STATS_TIMEOUT")?m.default.debug("PublishStatsLow report blocked by REPORT_STATS_TIMEOUT ".concat(e)):A.makeReport(function(e){var t={};return Object.keys(e).forEach((function(n){Object(E.getParameter)("STATS_FILTER")[n]||(t[j(n)]=e[n])})),{_type:"publish_stats",_message:{stream_type:"low",stats:t}}}(n))}),o)}}))}))}}),3e3);var d=function(){Object(E.getParameter)("REPORT_STATS")&&e&&e.pc&&e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats((function(t){var n,r,i=A.socket&&A.socket.getLastMsgTime()&&Date.now()-A.socket.getLastMsgTime();i>Object(E.getParameter)("REPORT_STATS_TIMEOUT")?m.default.debug("PublishRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(i)):e.getId()===e.getUserId()?A.makeReport((n=t,r={},Object.keys(n).forEach((function(e){Object(E.getParameter)("STATS_FILTER")[e]||(r[j(e)]=n[e])})),{_type:"publish_related_stats",_message:{stream_type:"high",stats:r}})):A.makeReport(function(e){var t={};return Object.keys(e).forEach((function(n){Object(E.getParameter)("STATS_FILTER")[n]||(t[j(n)]=e[n])})),{_type:"publish_related_stats",_message:{stream_type:"low",stats:t}}}(t))}))};d(),clearInterval(A.timers[e.getId()+"_RelatedStats"]),A.timers[e.getId()+"_RelatedStats"]=setInterval(d,1e3)}}},A.unpublish=function(e,t,n,r){if("object"!==u()(e)||null===e)return m.default.error("[".concat(A.clientId,"] Invalid local stream")),void N(r,T.default.INVALID_LOCAL_STREAM);if(A.state!==S)return m.default.error("[".concat(A.clientId,"] User not in the session")),void N(r,T.default.INVALID_OPERATION);if(null!=A.timers[e.getId()]&&(clearInterval(A.timers[e.getId()]),clearInterval(A.timers[e.getId()+"_RelatedStats"])),void 0!==A.socket)if(e.local&&void 0!==A.localStreams[e.getId()]){delete A.localStreams[e.getId()];var i={stream_id:e.getUserId(),stream_type:1===t.streamType?"low":"high"};A.makeRequest({_type:"unpublish",_message:i}),(e.hasAudio()||e.hasVideo()||e.hasScreen())&&void 0===e.url&&void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,A.p2ps.delete(e.p2pId),n&&n()}else m.default.error("[".concat(A.clientId,"] Invalid local stream")),N(r,T.default.INVALID_LOCAL_STREAM);else m.default.error("[".concat(A.clientId,"] User not in the session")),N(r,T.default.INVALID_OPERATION)},A.subscribe=function(e,t,n){var r=(new Date).getTime();e.subscribeLTS=r;var o=!1;if(m.default.info("[".concat(A.clientId,"] Gatewayclient ").concat(A.uid," Subscribe ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),"object"!==u()(e)||null===e)return m.default.error("[".concat(A.clientId,"] Invalid remote stream")),n&&n(T.default.INVALID_REMOTE_STREAM),void y.report.subscribe(A.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:T.default.INVALID_REMOTE_STREAM});if(A.state!==S&&(m.default.error("[".concat(A.clientId,"] User is not in the session")),!o))return o=!0,y.report.subscribe(A.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:T.default.INVALID_OPERATION}),n&&n(T.default.INVALID_OPERATION);if(!e.local&&A.remoteStreams.hasOwnProperty(e.getId()))if(e.hasAudio()||e.hasVideo()||e.hasScreen()){var s=A.generateP2PId();A.p2ps.set(s,e),e.p2pId=s,e.pc=Object(x.a)({callback:function(t){t||n&&n("CANNOT_GET_OFFER");var i={stream_id:e.getId(),audio:!e.subscribeOptions||e.subscribeOptions.audio,video:!e.subscribeOptions||e.subscribeOptions.video,codec:A.codec,p2p_id:s,sdp:t,tcc:Object(E.getParameter)("SUBSCRIBE_TCC"),extend:Object(E.getParameter)("SUB_EXTEND")};A.makeRequest({_type:"subscribe",_message:i},(function(t){e.pc.processSignalingMessage(t.sdp)}),(function(t,i){m.default.error("[".concat(A.clientId,"] Subscribe remote stream Failed: ").concat(t,", closing stream "),e.getId(),i),y.report.subscribe(A.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:t}),"TIMEOUT"!=t&&(A.processSubscribeFailure(e),n&&n(t))}))},nop2p:!0,audio:!0,video:!0,screen:e.hasScreen(),isSubscriber:!0,stunServerUrl:A.stunServerUrl,turnServers:A.joinInfo.turnServers,isVideoMute:e.userMuteVideo,isAudioMute:e.userMuteAudio,uid:e.getId(),agoraStream:e,clientId:A.clientId}),e.pc.onaddstream=function(t,n){if(e._onAudioUnmute=function(){A.makeReport(i({action:"unmute_remote_audio",stream_id:e.getId()}),(function(){}),(function(){}))},e._onAudioMute=function(){A.makeReport(i({action:"mute_remote_audio",stream_id:e.getId()}),(function(){}),(function(){}))},e._onVideoUnmute=function(){A.makeReport(i({action:"unmute_remote_video",stream_id:e.getId()}),(function(){}),(function(){}))},e._onVideoMute=function(){A.makeReport(i({action:"mute_remote_video",stream_id:e.getId()}),(function(){}),(function(){}))},"ontrack"===n&&"video"===t.track.kind||"onaddstream"===n){m.default.info("[".concat(A.clientId,"] Remote stream subscribed with uid "),e.getId());var r=A.remoteStreams[e.getId()];if(A.remoteStreams[e.getId()].stream="onaddstream"===n?t.stream:t.streams[0],A.remoteStreams[e.getId()].hasVideo()){if(Object(R.isFireFox)()||Object(R.isSafari)()){var o=A.remoteStreams[e.getId()].stream;Object(b.vsResHack)(o,(function(t,n){e.videoWidth=t,e.videoHeight=n}),(function(e){return m.default.warning("[".concat(A.clientId,"] vsResHack failed: ")+e)}))}}else{var a=A.remoteStreams[e.getId()];a.peerMuteVideo=!0,A._adjustPCMuteStatus(a)}r&&r.isPlaying()&&r.elementID&&(m.default.debug("[".concat(A.clientId,"] Reload Player ").concat(r.elementID," StreamId ").concat(r.getId())),e.audioOutput=r.audioOutput,r.stop(),e.play(r.elementID,r.playOptions)),delete e.audioLevelHelper;var s=Object(v.e)({type:"stream-subscribed",stream:A.remoteStreams[e.getId()]});A.dispatchEvent(s)}},clearInterval(A.timers[e.getId()]),A.timers[e.getId()]=setInterval((function(){if(Object(E.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate((function(n){n.forEach((function(n){if(n&&n.id){if(/_send$/.test(n.id)||/^time$/.test(n.id)||/^bweforvideo$/.test(n.id))return;-1===n.id.indexOf("inbound_rtp")&&-1===n.id.indexOf("inbound-rtp")&&-1===n.type.toLowerCase().indexOf("inbound")||"video"!==n.mediaType||(n.googFrameWidthReceived=e.videoWidth+"",n.googFrameHeightReceived=e.videoHeight+"");var r=200*t;t++;var i=e.getId();setTimeout((function(){var t=A.socket&&A.socket.getLastMsgTime()&&Date.now()-A.socket.getLastMsgTime();if(t>Object(E.getParameter)("REPORT_STATS_TIMEOUT"))m.default.debug("SubscribeStats report blocked by REPORT_STATS_TIMEOUT ".concat(t));else{if("video"===n.mediaType)try{var r=e.stream.getVideoTracks()[0];n.A_vrtd=r.enabled?"0":"1",e.player&&e.player.freezeTimeCounterList.length>0&&(n.A_vrft=e.player.freezeTimeCounterList.splice(0,1)[0].toString())}catch(e){}if("audio"===n.mediaType)try{var o=e.stream.getAudioTracks()[0];n.A_artd=o.enabled?"0":"1"}catch(e){}A.makeReport(l(i,n))}}),r)}}))}))}}),3e3),clearInterval(A.timers[e.getId()+"_RelatedStats"]),A.timers[e.getId()+"_RelatedStats"]=setInterval((function(){if(Object(E.getParameter)("REPORT_STATS")&&e&&e.pc){var t=A.socket&&A.socket.getLastMsgTime()&&Date.now()-A.socket.getLastMsgTime();if(t>Object(E.getParameter)("REPORT_STATS_TIMEOUT"))return void m.default.debug("SubscribeRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(t));e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats((function(t){e.player&&(e.hasVideo()&&!e.peerMuteVideo&&(t.isFreeze=e.player.freezeCount>e.player.lastFreezeCount),e.player.lastFreezeCount=e.player.freezeCount),A.makeReport(a(e.getId(),t))})),e.pc.getAudioRelatedStats&&e.pc.getAudioRelatedStats((function(t){A.makeReport(a(e.getId(),t))}))}}),1e3),A.audioLevel[e.getId()]=0,clearInterval(A.timers[e.getId()+"audio"]),A.timers[e.getId()+"audio"]=setInterval((function(){A.hasListeners("active-speaker")&&e&&e.pc&&"established"===e.pc.state&&e.pc.getStats&&e.pc.getStats((function(t){t.forEach((function(t){if("audio"===t.mediaType){if(t.audioOutputLevel>5e3)for(var n in A.audioLevel[e.getId()]<20&&(A.audioLevel[e.getId()]+=1),A.audioLevel)n!==""+e.getId()&&A.audioLevel[n]>0&&(A.audioLevel[n]-=1);var r=Object.keys(A.audioLevel).sort((function(e,t){return A.audioLevel[t]-A.audioLevel[e]}));if(A.activeSpeaker!==r[0]){var i=Object(v.a)({type:"active-speaker",uid:r[0]});A.dispatchEvent(i),A.activeSpeaker=r[0],m.default.debug("[".concat(A.clientId,"] Update active speaker: ").concat(A.activeSpeaker))}}}))}),50)}),50),e.pc.oniceconnectionstatechange=function(i){if("failed"===i)null!=A.timers[e.getId()]&&(clearInterval(A.timers[e.getId()]),clearInterval(A.timers[e.getId()]+"audio")),m.default.error("[".concat(A.clientId,"] Subscriber connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(s)),m.default.debug("[".concat(A.clientId,"] subscribe p2p failed: "),A.p2ps),o||(o=!0,n&&n(T.default.PEERCONNECTION_FAILED),y.report.subscribe(A.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:T.default.PEERCONNECTION_FAILED,subscribeRequestid:A.subscribeRequestId.get(e.getId())||0,p2pid:s})),A.remoteStreams[e.getId()]&&A.p2ps.has(s)&&(A.p2ps.delete(s),A.dispatchEvent(Object(v.a)({type:"subP2PLost",stream:e})));else if("connected"===i&&(m.default.debug("[".concat(A.clientId,"] subscribe p2p connected: "),A.p2ps),!o)){o=!0,y.report.subscribe(A.joinInfo.sid,{lts:r,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null,subscribeRequestid:A.subscribeRequestId.get(e.getId())||0,p2pid:s}),A._adjustPCMuteStatus(e);var a=!1,c=!1,u=!1,l=setInterval((function(){a&&c||(e.pc?e.pc.getStats((function(t){t.forEach((function(t){if((-1!==t.id.indexOf("recv")||t.type&&-1!==t.type.toLowerCase().indexOf("inbound")||-1!==t.id.indexOf("inbound_rtp")||-1!==t.id.indexOf("inbound-rtp")||-1!==t.id.indexOf("InboundRTP"))&&"audio"===t.mediaType){if((t.googDecodingNormal>0||t.audioOutputLevel>0)&&!a){a=!0,A.dispatchEvent({type:"first-audio-frame-decode",stream:e}),a&&c&&clearInterval(l);var n=Date.now(),r=y.report.getSessionStartTime(A.joinInfo.sid);y.report.firstAudioDecode(A.joinInfo.sid,{peerid:e.uintId,uid:A.uid,elapse:n-r,subscribeElapse:n-e.subscribeLTS,subscribeRequestid:A.subscribeRequestId.get(e.getId())||0,p2pid:s})}parseInt(t.packetsReceived)>0&&!c&&(c=!0,A.dispatchEvent({type:"first-audio-packet-received",stream:e}),a&&c&&clearInterval(l),n=Date.now(),r=y.report.getSessionStartTime(A.joinInfo.sid),y.report.firstAudioReceived(A.joinInfo.sid,{peerid:e.uintId,uid:A.uid,elapse:n-r,subscribeElapse:n-e.subscribeLTS,subscribeRequestid:A.subscribeRequestId.get(e.getId())||0,p2pid:s}))}}))}),100):clearInterval(l))}),100),d=!1,h=!1,f=setInterval((function(){d&&h||(e.pc?e.pc.getStats((function(t){t.forEach((function(t){if((-1!==t.id.indexOf("recv")||t.type&&-1!==t.type.toLowerCase().indexOf("inbound")||-1!==t.id.indexOf("inbound_rtp")||-1!==t.id.indexOf("inbound-rtp")||-1!==t.id.indexOf("InboundRTP"))&&"video"===t.mediaType){if((t.framesDecoded>0||t.googFramesDecoded>0)&&!d){d=!0,A.dispatchEvent({type:"first-video-frame-decode",stream:e}),d&&h&&clearInterval(f);var n=Date.now(),r=y.report.getSessionStartTime(A.joinInfo.sid);e.firstFrameTime=(new Date).getTime()-e.subscribeLTS,y.report.firstVideoDecode(A.joinInfo.sid,{peerid:e.uintId,width:parseInt(t.googFrameWidthReceived)||0,height:parseInt(t.googFrameHeightReceived)||0,uid:A.uid,elapse:n-r,subscribeElapse:n-e.subscribeLTS,subscribeRequestid:A.subscribeRequestId.get(e.getId())||0,p2pid:s})}t.packetsReceived>0&&!h&&(h=!0,A.dispatchEvent({type:"first-video-packet-received",stream:e}),d&&h&&clearInterval(f),n=Date.now(),r=y.report.getSessionStartTime(A.joinInfo.sid),y.report.firstVideoReceived(A.joinInfo.sid,{peerid:e.uintId,uid:A.uid,elapse:n-r,subscribeElapse:n-e.subscribeLTS,subscribeRequestid:A.subscribeRequestId.get(e.getId())||0,p2pid:s}))}}))}),100):clearInterval(f))}),100),p=setInterval((function(){if(!u){var t=e.getId(),n=A.traffic_stats;if(n&&n.peer_delay){var r=n.peer_delay.find((function(e){return e.peer_uid==t}));if(r){if(u=!0,A.peerPublishDurationMap.get(e.getId()))return void clearInterval(p);var i=r.peer_publish_audio_duration,o=r.peer_publish_video_duration;if(void 0===i||void 0===o)return;A.peerPublishDurationMap.set(e.getId(),!0);var a=y.report.getSessionStartTime(A.joinInfo.sid),s=(i||o)+(Date.now()-n.timestamp),c=Date.now();y.report.peerPublishStatus({audiotag:i?1:-1,videotag:o?1:-1,lts:c,sid:A.joinInfo.sid,cname:A.joinInfo.cname,cid:A.joinInfo.cid,uid:A.joinInfo.uid,elapse:c-a,peer:e.uintId,peerPublishDuration:s,joinChannelSuccessElapse:c-A.joinSuccessLts,subscribeElapse:c-e.subscribeLTS}),clearInterval(p)}}}}),1e3);return e.sid=A.joinInfo.sid,t&&t()}}}else m.default.error("[".concat(A.clientId,"] Invalid remote stream")),o||(o=!0,n&&n(T.default.INVALID_REMOTE_STREAM),y.report.subscribe(A.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:T.default.INVALID_REMOTE_STREAM}));else m.default.error("[".concat(A.clientId,"] No such remote stream")),o||(o=!0,n&&n(T.default.NO_SUCH_REMOTE_STREAM),y.report.subscribe(A.joinInfo.sid,{lts:r,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:T.default.NO_SUCH_REMOTE_STREAM}))},A.subscribeChange=function(e,t,n){var r=Date.now();m.default.info("[".concat(A.clientId,"] Gatewayclient ").concat(A.uid," SubscribeChange ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),A._adjustPCMuteStatus(e);var i={stream_id:e.getId(),audio:e.subscribeOptions.audio,video:e.subscribeOptions.video};A.makeRequest({_type:"subscribe_change",_message:i},(function(n){var i=Object(v.e)({type:"stream-subscribe-changed",stream:A.remoteStreams[e.getId()]});y.report.subscribe(A.joinInfo.sid,{lts:r,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null,subscribeRequestid:A.subscribeRequestId.get(e.getId())||0,p2pid:A.p2ps.get(e.getId())}),A.dispatchEvent(i),t&&t()}),(function(t,r){m.default.error("[".concat(A.clientId,"] Subscribe Change Failed ").concat(e.getId()),t,r),n&&n(t,r)}))},A.processPublishFailure=function(e){e.publishLTS=null,e.p2pId&&A.p2ps.get(e.p2pId)===e&&A.p2ps.delete(e.p2pId),A.localStreams[e.getUserId()]===e&&delete A.localStreams[e.getUserId()],A.localStreams[e.getId()]===e&&delete A.localStreams[e.getId()],e.pc&&(e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},A.processSubscribeFailure=function(e){e.p2pId&&A.p2ps.get(e.p2pId)===e&&A.p2ps.delete(e.p2pId),e.pc&&(e.pc.onaddstream=function(){},e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},A._adjustPCMuteStatus=function(e){m.default.debug("[".concat(A.clientId,"]: use _adjustPCMuteStatus: ").concat(e.getId())),m.default.debug("[".concat(A.clientId,"]: video: ").concat(e.video,", audio: ").concat(e.audio,", suboption: ").concat(JSON.stringify(e.subscribeOptions),",userMuteVideo: ").concat(e.userMuteVideo,", peerMuteVideo: ").concat(e.peerMuteVideo,", userMuteAudio: ").concat(e.userMuteAudio,", peerMuteAudio: ").concat(e.peerMuteAudio)),!e.local&&e.pc&&e.pc.peerConnection.getReceivers&&e.pc.peerConnection.getReceivers().forEach((function(t){if(t&&t.track&&"audio"===t.track.kind){var n=!e.userMuteAudio&&!e.peerMuteAudio;e.subscribeOptions&&!e.subscribeOptions.audio&&(n=!1),m.default.debug("[".concat(A.clientId,"]: set receiver audio track: ").concat(n)),t.track.enabled=!!n}else if(t&&t.track&&"video"===t.track.kind){var r=!e.userMuteVideo&&!e.peerMuteVideo;e.subscribeOptions&&!e.subscribeOptions.video&&(r=!1),m.default.debug("[".concat(A.clientId,"]: set receiver video track: ").concat(r)),t.track.enabled=!!r}}))},A.unsubscribe=function(e,t,n){if("object"!==u()(e)||null===e)return m.default.error("[".concat(A.clientId,"] Invalid remote stream")),void N(n,T.default.INVALID_REMOTE_STREAM);if(A.state!==S)return m.default.error("[".concat(A.clientId,"] User is not in the session")),void N(n,T.default.INVALID_OPERATION);if(null!=A.timers[e.getId()]&&(clearInterval(A.timers[e.getId()]),clearInterval(A.timers[e.getId()]+"audio")),null!=A.audioLevel[e.getId()]&&delete A.audioLevel[e.getId()],null!=A.timer_counter[e.getId()]&&delete A.timer_counter[e.getId()],A.remoteStreams.hasOwnProperty(e.getId())){if(!A.socket)return m.default.error("[".concat(A.clientId,"] User is not in the session")),void N(n,T.default.INVALID_OPERATION);if(e.local)return m.default.error("[".concat(A.clientId,"] Invalid remote stream")),void N(n,T.default.INVALID_REMOTE_STREAM);e.close(),e.stop();var r={stream_id:e.getId()};A.makeRequest({_type:"unsubscribe",_message:r}),void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,delete e.subscribeOptions,A.p2ps.delete(e.p2pId),m.default.info("[".concat(A.clientId,"] Unsubscribe stream success")),t&&t()}else N(n,T.default.NO_SUCH_REMOTE_STREAM)},A.setRemoteVideoStreamType=function(e,t){if(m.default.debug("[".concat(A.clientId,"] Switching remote video stream ").concat(e.getId()," to ").concat(t)),"object"===u()(e)&&null!==e)if(A.state===S){if(!e.local){switch(t){case A.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_HIGH:case A.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_LOW:case A.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_MEDIUM:break;default:return}var n={stream_id:e.getId(),stream_type:t};A.makeRequest({_type:"switch_video_stream",_message:n},(function(){m.default.debug("SwitchVideoStream Success ".concat(n.stream_id," ").concat(n.stream_type))}),(function(e,t){m.default.error("SwitchVideoStream Error ".concat(e," ").concat(n.stream_id," ").concat(n.stream_type),t)}))}}else m.default.error("[".concat(A.clientId,"] User is not in the session"));else m.default.error("[".concat(A.clientId,"] Invalid remote stream"))},A.renewToken=function(e,t,n){e?A.key?A.state!==S?(m.default.debug("[".concat(A.clientId,"] Client is not connected. Trying to rejoin")),A.key=e,A.rejoin(),t&&t()):(m.default.debug("[".concat(A.clientId,"] renewToken from ").concat(A.key," to ").concat(e)),A.key=e,A.makeRequest({_type:"renew_token",_message:{token:e}},t,n)):(m.default.error("[".concat(A.clientId,"] Client is previously joined without token")),n&&n(T.default.INVALID_PARAMETER)):(m.default.error("[".concat(A.clientId,"] Invalid Token ").concat(e)),n&&n(T.default.INVALID_PARAMETER))},A.setStreamFallbackOption=function(e,t){if(m.default.debug("[".concat(A.clientId,"] Set stream fallback option ").concat(e.getId()," to ").concat(t)),"object"===u()(e)&&null!==e)if(A.state===S){if(!e.local){switch(t){case A.streamFallbackTypes.STREAM_FALLBACK_OPTION_DISABLED:case A.streamFallbackTypes.STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:case A.streamFallbackTypes.STREAM_FALLBACK_OPTION_AUDIO_ONLY:break;default:return}var n={stream_id:e.getId(),fallback_type:t};A.makeRequest({_type:"set_fallback_option",_message:n},(function(){m.default.debug("SetStreamFallbackOption success ".concat(n.stream_id," ").concat(t))}),(function(e,r){m.default.error("Failed to SetStreamFallbackOption ".concat(n.stream_id," ").concat(t," ").concat(e),r)}))}}else m.default.error("[".concat(A.clientId,"] User is not in the session"));else m.default.error("[".concat(A.clientId,"] Invalid remote stream"))},A.enableAudioVolumeIndicator=function(e,t){A.audioVolumeIndication.enabled=!0,A.audioVolumeIndication.interval=e,A.audioVolumeIndication.smooth=t,A.resetAudioVolumeIndication()},A.resetAudioVolumeIndication=function(){if(clearInterval(A.timers.audioVolumeIndication),clearInterval(A.timers.audioVolumeSampling),A.audioVolumeIndication.enabled&&A.audioVolumeIndication.interval){var e=Math.floor(1e3*A.audioVolumeIndication.smooth/100);clearInterval(A.timers.audioVolumeSampling),A.timers.audioVolumeSampling=setInterval((function(){A.audioVolumeSampling||(A.audioVolumeSampling={});var t={};for(var n in A.remoteStreams){var r=A.remoteStreams[n];if(r.stream&&r.hasAudio()){var i=r.getAudioLevel();i>0&&i<1&&(i*=100);var o=A.audioVolumeSampling[n]||[];for(o.push(i);o.length>e;)o.shift();t[n]=o}}A.audioVolumeSampling=t}),100),clearInterval(A.timers.audioVolumeIndication),A.timers.audioVolumeIndication=setInterval((function(){if(A.socket&&A.socket.signal&&A.socket.signal.connection&&A.socket.signal.connection.readyState===WebSocket.OPEN){var e=[];for(var t in A.remoteStreams)if(A.audioVolumeSampling&&A.audioVolumeSampling[t]){var n=A.audioVolumeSampling[t],r=0;n.forEach((function(e){r+=e}));var i={uid:t,level:Math.floor(r/n.length)};i.level&&e.push(i)}var o=e.sort((function(e,t){return e.level-t.level}));m.default.debug("[".concat(A.clientId,"] volume-indicator "),JSON.stringify(o)),A.audioVolumeIndication.sortedAudioVolumes=o;var a=Object(v.a)({type:"volume-indicator",attr:o});A.dispatchEvent(a)}}),A.audioVolumeIndication.interval)}},A.closeGateway=function(){m.default.debug("[".concat(A.clientId,"] close gateway")),A.state=h,A.socket.close(),F()},A.startChannelMediaRelay=function(){var e=s()(o.a.mark((function e(t){var n,r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A.channelMediaRelayController){e.next=2;break}throw new P.ChannelMediaError("RELAY_ALREADY_START","",P.CHANNEL_MEDIA_RELAY_ERROR.RELAY_ALREADY_START);case 2:return n=function(e){A.dispatchEvent({type:"channel-media-relay-event",code:e})},r=function(e,t,n){e===P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE&&t===P.CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST&&(A.channelMediaRelayController.dispose(),A.channelMediaRelayController=null),A.dispatchEvent({type:"channel-media-relay-state",state:e,code:t,data:n})},A.channelMediaRelayController=new L.a(A.joinInfo,A.clientId),A.channelMediaRelayController.on("event",n),A.channelMediaRelayController.on("state",r),e.prev=7,e.next=10,A.channelMediaRelayController.startChannelMediaRelay(t);case 10:e.next=22;break;case 12:throw e.prev=12,e.t0=e.catch(7),m.default.debug("[".concat(A.clientId,"] startChannelMediaRelay exception: ").concat(JSON.stringify(e.t0))),i=P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,a=e.t0 instanceof P.ChannelMediaError?"SetSourceChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetSourceChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_SRC":"SetDestChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetDestChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_DEST":e.t0.data&&e.t0.data.serverResponse&&"StartPacketTransfer"===e.t0.data.serverResponse.command?"FAILED_PACKET_SENT_TO_DEST":e.t0.message===P.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.t0.message===P.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.t0.message===P.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.t0.message===P.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.t0.message===P.CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT?"NO_RESOURCE_AVAILABLE":e.t0.message===P.CHANNEL_MEDIA_ERROR.WS_ABORT||e.t0.message===P.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",A.dispatchEvent({type:"channel-media-relay-state",state:i,code:P.CHANNEL_MEDIA_RELAY_ERROR[a]}),A.channelMediaRelayController&&(A.channelMediaRelayController.dispose(),A.channelMediaConfig=null,A.channelMediaRelayController=null),A.dispatchEvent({type:"channel-media-relay-state",state:P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new P.ChannelMediaError(a,null,P.CHANNEL_MEDIA_RELAY_ERROR[a]);case 22:A.dispatchEvent({type:"channel-media-relay-state",state:P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING,code:P.CHANNEL_MEDIA_RELAY_ERROR.RELAY_OK}),A.channelMediaConfig=t;case 24:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t){return e.apply(this,arguments)}}(),A.updateChannelMediaRelay=function(){var t=s()(o.a.mark((function t(n){var r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(A.channelMediaRelayController){t.next=2;break}throw new P.ChannelMediaError("RELAY_NOT_START",null,P.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return t.prev=2,t.next=5,A.channelMediaRelayController.updateChannelMediaRelay(n);case 5:t.next=18;break;case 7:throw t.prev=7,t.t0=t.catch(2),m.default.debug("[".concat(A.clientId,"] updateChannelMediaRelay exception: ").concat(JSON.stringify(e))),r=P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,i=e instanceof P.ChannelMediaError?e.message===P.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===P.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===P.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===P.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.message===P.CHANNEL_MEDIA_ERROR.WS_ABORT||e.message===P.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",A.dispatchEvent({type:"channel-media-relay-event",code:P.CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL_REFUSED}),A.dispatchEvent({type:"channel-media-relay-state",state:r,code:P.CHANNEL_MEDIA_RELAY_ERROR[i]}),A.channelMediaRelayController&&(A.channelMediaRelayController.dispose(),A.channelMediaConfig=null,A.channelMediaRelayController=null),A.dispatchEvent({type:"channel-media-relay-state",state:P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new P.ChannelMediaError(i,null,P.CHANNEL_MEDIA_RELAY_ERROR[i]);case 18:A.channelMediaConfig=n;case 19:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),A.stopChannelMediaRelay=s()(o.a.mark((function t(){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(A.channelMediaRelayController){t.next=2;break}throw new P.ChannelMediaError("RELAY_NOT_START",null,P.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return t.prev=2,t.next=5,A.channelMediaRelayController.stopChannelMediaRelay();case 5:t.next=17;break;case 7:throw t.prev=7,t.t0=t.catch(2),m.default.debug("[".concat(A.clientId,"] stopChannelMediaRelay exception: ").concat(JSON.stringify(e))),n=P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,r=e instanceof P.ChannelMediaError?e.message===P.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===P.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===P.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===P.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":"INTERNAL_ERROR":"INTERNAL_ERROR",A.dispatchEvent({type:"channel-media-relay-state",state:n,code:P.CHANNEL_MEDIA_RELAY_ERROR[r]}),A.channelMediaRelayController&&(A.channelMediaRelayController.dispose(),A.channelMediaConfig=null,A.channelMediaRelayController=null),A.dispatchEvent({type:"channel-media-relay-state",state:P.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new P.ChannelMediaError(r,null,P.CHANNEL_MEDIA_RELAY_ERROR[r]);case 17:A.channelMediaConfig=null,A.channelMediaRelayController=null;case 19:case"end":return t.stop()}}),t,null,[[2,7]])}))),A.sendMetadata=function(e,t){A.makeRequest(function(e){return{_type:"send_metadata",_message:{session_id:A.joinInfo.sid,metadata:window.btoa(unescape(encodeURIComponent(e)))}}}(e),(function(){m.default.debug("[".concat(A.clientId,'] send metadata "').concat(e,'" success')),t&&t(null)}),(function(n){m.default.error("[".concat(A.clientId,'] send metadata "').concat(e,'" failed'),n),t&&t(n)}))},A._reportWebsocketCloseEvent=function(e,t){try{var n=y.report.getSessionStartTime(A.joinInfo.sid),r=Date.now();y.report.webSocketQuit({lts:r,sid:A.joinInfo.sid,cname:A.joinInfo.cname,cid:A.joinInfo.cid,uid:A.joinInfo.uid,elapse:r-n,succ:e,errorCode:t,ip:null})}catch(e){m.default.debug("[".concat(A.clientId,"]: _reportWebsocketCloseEvent exception, ").concat(e))}};var U=function(){m.default.debug("[".concat(A.clientId,"] Reconnect gateway")),A.state=h,A.socket.close(),F(),A.reconnectMode="recover",A.state=_,B()};A.recover=U;var F=function(){for(var e in A.dispatchEvent({type:"before-clear-connection"}),A.timers)A.timers.hasOwnProperty(e)&&clearInterval(A.timers[e]);for(var e in A.remoteStreams)if(A.remoteStreams.hasOwnProperty(e)){var t=A.remoteStreams[e],n=Object(v.a)({type:"stream-removed",uid:t.getId(),stream:t});A.dispatchEvent(n)}A.p2ps.clear(),H(),W(),clearInterval(A.pingTimer)};A.rejoin=function(){A.socket&&(clearInterval(A.pingTimer),A.socket.close(),A.socket=void 0),A.state=_,B()};var B=function(e,t){A.dispatchEvent(Object(v.a)({type:"rejoin-start"})),e=e||function(e){m.default.info("[".concat(A.clientId,"] User ").concat(e," is re-joined to ").concat(A.joinInfo.cname)),A.dispatchEvent(Object(v.a)({type:"rejoin"})),A.channelMediaConfig&&A.startChannelMediaRelay(A.channelMediaConfig).then((function(){m.default.debug("[".concat(A.clientId,"] restartChannelMediaRelay success"))})).catch((function(e){m.default.debug("[".concat(A.clientId,"] restartChannelMediaRelay failed: ").concat(JSON.stringify(e)))})),A.liveStreams&&A.liveStreams.size&&A.liveStreams.forEach((function(e,t){e&&A.setLiveTranscoding(A.transcoding),A.startLiveStreaming(t,e)})),A.injectLiveStreams&&A.injectLiveStreams.size&&A.injectLiveStreams.forEach((function(e,t){A.addInjectStreamUrl(t,e)}))},t=t||function(e){m.default.error("[".concat(A.clientId,"] Re-join to channel failed "),e),A.dispatchEvent(Object(v.e)({type:"error",reason:e}))},A.key?(++A.rejoinAttempt,A.join(A.joinInfo,A.key,e,t)):m.default.error("[".concat(A.clientId,"] Connection recover failed [Invalid channel key]"))},G=function(e,t,n){if(A.onConnect=t,A.socket){if(A.dispatchEvent({type:"reconnect"}),"retry"===A.reconnectMode)m.default.debug("[".concat(A.clientId,"] Retry current gateway")),A.socket.reconnect();else if("tryNext"===A.reconnectMode)m.default.debug("[".concat(A.clientId,"] Try next gateway")),A.socket.connectNext();else if("recover"===A.reconnectMode){m.default.debug("[".concat(A.clientId,"] Recover gateway")),m.default.debug("[".concat(A.clientId,"] Try to reconnect choose server and get gateway list again ")),A.reconnectingCS=!0;var i=A.joinInfo&&A.joinInfo.sid;Object(I.getGatewayList)(A.joinInfo,(function(e){m.default.debug("[".concat(A.clientId,"] session:  ").concat(i," get gateway list success")),A.joinInfo.apResponse=e.res,A.reconnectingCS?A.socket.replaceHost(e.gateway_addr):m.default.debug("[".concat(A.clientId,"] session:  ").concat(i," already leave"))}))}}else o=e.gatewayAddr,A.socket=w(o,{sid:A.joinInfo.sid,clientId:A.clientId,proxyServerType:A.joinInfo.proxyServerType}),A.socket.on("start-connection",(function(e){A.ticket=e&&e.msg&&e.msg.ticket})),A.socket.on("on_uplink_stats",(function(e){var t={};for(var n in e)t[D(n)]=e[n];if(A.OutgoingAvailableBandwidth=t.uplink_available_bandwidth,A.localStreams[A.uid]){var r=A.localStreams[A.uid].uplinkStats;r&&r.period_fir===t.period_fir||m.default.debug("[".concat(A.clientId,"]: Period fir change to: ").concat(t.period_fir)),A.localStreams[A.uid].uplinkStats=t}})),A.socket.on("connect",(function(){A.dispatchEvent({type:"connected"}),A.attemps=1,A.onConnect()})),A.socket.on("recover",(function(){A.state=_,m.default.debug("[".concat(A.clientId,"] Try to reconnect choose server and get gateway list again ")),A.reconnectingCS=!0;var e=A.joinInfo&&A.joinInfo.sid;Object(I.getGatewayList)(A.joinInfo,(function(t){m.default.debug("[".concat(A.clientId,"] session:  ").concat(e," get gateway list success")),A.reconnectingCS?A.socket.replaceHost(t.gateway_addr):m.default.debug("[".concat(A.clientId,"] session:  ").concat(e," already leave"))}))})),A.socket.on("disconnect",(function(e){if(m.default.debug("[".concat(A.clientId,"] Receive disconnect message")),A.state!==h){A.state=h,A._reportWebsocketCloseEvent(-1,T.WEBSOCKET_CLOSE_REASON.WS_DISCONNECT);var t=Object(v.e)({type:"error",reason:T.default.SOCKET_DISCONNECTED});if(A.dispatchEvent(t),0===A.p2ps.size?A.reconnectMode="tryNext":A.reconnectMode="retry",F(),A.channelMediaRelayController&&A.channelMediaRelayController.dispose(),A.channelMediaRelayController=null,1!=r){var n,i=(n=A.attemps,1e3*Math.min(30,Math.pow(2,n)-1));if(m.default.error("[".concat(A.clientId,"] Disconnect from server [").concat(JSON.stringify(e),"], attempt to recover [#").concat(A.attemps,"] after ").concat(i/1e3," seconds")),A.hasInvokeLeave)return m.default.debug("[".concat(A.clientId,"] No reconnection because Client.leave has been invoked")),void(A.hasInvokeLeave=!1);setTimeout((function(){A.attemps++,A.state=_,A.inChannelInfo&&Date.now()-A.inChannelInfo.joinAt>Object(E.getParameter)("TICKET_RENEW_TIMEOUT")?(m.default.debug("Recovering to renew ticket"),U()):B()}),i)}else{var o=V.unregister(A);o&&m.default.debug("[".concat(A.clientId,"] "),o)}}})),A.socket.on("on_add_audio_stream",(function(e){if(m.default.info("[".concat(A.clientId,"] Newly added audio stream with uid ").concat(e.uid)),A.joinInfo.stringUid&&"string"!=typeof e.uid&&m.default.error("StringUID is Mixed with UintUID"),A.remoteStreamsInChannel.has(e.uid)||A.remoteStreamsInChannel.add(e.uid),void 0===A.remoteStreams[e.uid]){var t=Object(p.a)({streamID:e.uid,local:!1,audio:e.audio,video:e.video,uintUID:e.uint_id||e.uid});t.peerMuteVideo=!0,A.remoteStreams[e.uid]=t;var n=Object(v.e)({type:"stream-added",stream:t});A.dispatchEvent(n);var r=A.remoteMuteState[e.uid];r&&r.audio&&(n=Object(v.a)({type:"mute-audio",uid:e.uid}),A.dispatchEvent(n)),r&&r.video&&(n=Object(v.a)({type:"mute-video",uid:e.uid}),A.dispatchEvent(n))}y.report.onAddAudioStream(A.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:A.uid})})),A.socket.on("on_update_stream",(function(e){m.default.info("[".concat(A.clientId,"] on_update_stream:"),e);var t=A.remoteStreams[e.uid];if(A.joinInfo.stringUid&&"string"!=typeof e.uid&&m.default.error("StringUID is Mixed with UintUID"),t){t.audio=e.audio,t.video=e.video,t.screen=e.screen,t.pc&&A._adjustPCMuteStatus(t);var n=Object(v.e)({type:"stream-updated",stream:t});A.dispatchEvent(n)}else m.default.debug("[".concat(A.clientId,"] Ignoring onUpdateStream event before onAddStream for uid ").concat(e.uid));y.report.onUpdateStream(A.joinInfo.sid,{peerid:e.uint_id||e.uid,audio:e.audio,video:e.video,uid:A.uid})})),A.socket.on("on_add_video_stream",(function(e){if(m.default.info("[".concat(A.clientId,"] Newly added remote stream with uid ").concat(e.uid,".")),A.joinInfo.stringUid&&"string"!=typeof e.uid&&m.default.error("StringUID is Mixed with UintUID"),A.remoteStreamsInChannel.has(e.uid)||A.remoteStreamsInChannel.add(e.uid),void 0===A.remoteStreams[e.uid]){var t=Object(p.a)({streamID:e.uid,local:!1,audio:e.audio,video:e.video,uintUID:e.uint_id||e.uid});A.remoteStreams[e.uid]=t;var n=Object(v.e)({type:"stream-added",stream:t});A.dispatchEvent(n);var r=A.remoteMuteState[e.uid];r&&r.audio&&(n=Object(v.a)({type:"mute-audio",uid:e.uid}),A.dispatchEvent(n)),r&&r.video&&(n=Object(v.a)({type:"mute-video",uid:e.uid}),A.dispatchEvent(n))}else{var i=A.remoteStreams[e.uid];if(i.video=!0,i.peerMuteVideo=!1,i.pc&&A._adjustPCMuteStatus(i),m.default.info("[".concat(A.clientId,"] Stream changed: enable video ").concat(e.uid)),void 0!==i.stream&&i.isPlaying()){var o=i.player.elementID;i.stop(),i.play(o,i.playOptions)}}y.report.onAddVideoStream(A.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:A.uid})})),A.socket.on("on_remove_stream",(function(e){m.default.info("[".concat(A.clientId,"] on_remove_stream:"),e),A.remoteStreamsInChannel.has(e.uid)&&A.remoteStreamsInChannel.delete(e.uid);var t=A.remoteStreams[e.uid];if(t){delete A.remoteStreams[e.uid],delete A.remoteMuteState[e.uid];var n=Object(v.e)({type:"stream-removed",stream:t});A.dispatchEvent(n),t.close(),void 0!==t.pc&&(t.pc.close(),t.pc=void 0,A.p2ps.delete(t.p2pId)),y.report.onRemoveStream(A.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:A.uid})}else m.default.error("ERROR stream ",e.uid," not found onRemoveStream ",e)})),A.socket.on("on_publish_stream",(function(e){m.default.info("[".concat(A.clientId,"] on_publish_stream:"),e);var t=A.localStreams[e.uid];A.dispatchEvent({type:"streamPublished",stream:t,proxy:e.proxy}),y.report.reportApiInvoke(A.joinInfo.sid,{name:"on_publish_stream",options:{proxy:e.proxy}})()})),A.socket.on("mute_audio",(function(e){m.default.info("[".concat(A.clientId,"] rcv peer mute audio: ").concat(e.uid)),A.remoteMuteState[e.uid]=A.remoteMuteState[e.uid]||{audio:!1,video:!1},A.remoteMuteState[e.uid].audio=!0;var t=Object(v.a)({type:"mute-audio",uid:e.uid}),n=A.remoteStreams[e.uid];n?(n.peerMuteAudio=!0,n.pc&&A._adjustPCMuteStatus(n),A.dispatchEvent(t)):m.default.debug("Ignoring event ".concat(e.type),e)})),A.socket.on("unmute_audio",(function(e){m.default.info("[".concat(A.clientId,"] rcv peer unmute audio: ").concat(e.uid)),A.remoteMuteState[e.uid]=A.remoteMuteState[e.uid]||{audio:!1,video:!1},A.remoteMuteState[e.uid].audio=!1;var t=Object(v.a)({type:"unmute-audio",uid:e.uid}),n=A.remoteStreams[e.uid];n?(n.peerMuteAudio=!1,n.pc&&A._adjustPCMuteStatus(n),A.dispatchEvent(t)):m.default.debug("Ignoring event ".concat(e.type),e)})),A.socket.on("mute_video",(function(e){m.default.info("[".concat(A.clientId,"] rcv peer mute video: ").concat(e.uid)),A.remoteMuteState[e.uid]=A.remoteMuteState[e.uid]||{audio:!1,video:!1},A.remoteMuteState[e.uid].video=!0;var t=Object(v.a)({type:"mute-video",uid:e.uid}),n=A.remoteStreams[e.uid];n?(n.peerMuteVideo=!0,n.player&&(n.player.peerVideoReady=!1),n.pc&&A._adjustPCMuteStatus(n),A.dispatchEvent(t)):m.default.debug("Ignoring event ".concat(e.type),e)})),A.socket.on("unmute_video",(function(e){m.default.info("[".concat(A.clientId,"] rcv peer unmute video: ").concat(e.uid)),A.remoteMuteState[e.uid]=A.remoteMuteState[e.uid]||{audio:!1,video:!1},A.remoteMuteState[e.uid].video=!1;var t=Object(v.a)({type:"unmute-video",uid:e.uid}),n=A.remoteStreams[e.uid];n?(n.peerMuteVideo=!1,n.pc&&A._adjustPCMuteStatus(n),A.dispatchEvent(t)):m.default.debug("Ignoring event ".concat(e.type),e)})),A.socket.on("on_crypt_error",(function(e){m.default.warning("[".concat(A.clientId,"] stream crypt error"));var t=Object(v.a)({type:"crypt-error",cryptType:e.crypt_type});A.dispatchEvent(t)})),A.socket.on("on_user_banned",(function(e){m.default.info("[".concat(A.clientId,"] user banned uid: ").concat(e.uid," error: ").concat(e.error_code));var t=Object(v.a)({type:"client-banned",uid:e.uid,attr:e.error_code});A.dispatchEvent(t),r=!0})),A.socket.on("on_stream_fallback_update",(function(e){m.default.info("[".concat(A.clientId,"] stream fallback peerId: ").concat(e.stream_id," type: ").concat(e.stream_type));var t=Object(v.a)({type:"stream-fallback",uid:e.stream_id,stream:e.stream_id,attr:e.stream_type});A.dispatchEvent(t)})),A.socket.on("stream_recover",(function(e){m.default.info("[".concat(A.clientId,"] stream recover uid: ").concat(e.id," peerId: ").concat(e.peerid," type: ").concat(e.type));var t=Object(v.a)({type:"stream-recover",uid:e.id,stream:e.peerid,attr:e.type});A.dispatchEvent(t)})),A.socket.on("on_p2p_lost",(function(e){m.default.debug("[".concat(A.clientId,"] p2plost: "),e,"p2ps:",A.p2ps);var t,n="DTLS failed";(t=A.localStreams[e.uid]||A.remoteStreams[e.uid])?(t.pc&&t.pc.offerCandidates&&0===t.pc.offerCandidates.length&&(n="NO_CANDIDATES_IN_OFFER"),"publish"===e.event&&y.report.publish(A.joinInfo.sid,{lts:t.publishLTS,succ:!1,audio:t.hasAudio(),video:t.hasVideo(),screenshare:t.hasScreen(),audioName:t.hasAudio()&&t.audioName,videoName:t.hasVideo()&&t.videoName,screenName:t.hasScreen()&&t.screenName,ec:n,publishRequestid:A.publishRequestId||0,p2pid:A.p2ps.get(t.getId())}),"subscribe"===e.event&&y.report.subscribe(A.joinInfo.sid,{lts:t.subscribeLTS,succ:!1,video:t.subscribeOptions&&t.subscribeOptions.video,audio:t.subscribeOptions&&t.subscribeOptions.audio,peerid:e.uid+"",ec:n,subscribeRequestid:A.subscribeRequestId.get(t.getId())||0,p2pid:A.p2ps.get(t.getId())})):m.default.warning("P2PLost Stream Not found",e),m.default.debug("[".concat(A.clientId,"] p2plost:"),e.p2pid),(t=A.p2ps.get(e.p2pid))&&(A.p2ps.delete(e.p2pid),t.local?A.dispatchEvent(Object(v.a)({type:"pubP2PLost",stream:t,attr:n})):A.remoteStreams[t.getId()]&&A.dispatchEvent(Object(v.a)({type:"subP2PLost",stream:t,attr:n})))})),A.socket.on("on_token_privilege_will_expire",(function(e){m.default.debug("[".concat(A.clientId,"] Received Message onTokenPrivilegeWillExpire")),A.dispatchEvent(Object(v.a)({type:"onTokenPrivilegeWillExpire"}))})),A.socket.on("on_token_privilege_did_expire",(function(){m.default.warning("[".concat(A.clientId,"] Received Message onTokenPrivilegeDidExpire, please get new token and join again")),A.closeGateway(),A.dispatchEvent(Object(v.a)({type:"onTokenPrivilegeDidExpire"}))})),A.socket.on("enable_local_video",(function(e){m.default.info("[".concat(A.clientId,"] enable_local_video:"),e),A.dispatchEvent(Object(v.a)({type:"enable-local-video",uid:e.uid}))})),A.socket.on("disable_local_video",(function(e){m.default.info("[".concat(A.clientId,"] disable_local_video:"),e),A.dispatchEvent(Object(v.a)({type:"disable-local-video",uid:e.uid}))})),A._doWithAction=function(e,t,n){"tryNext"===e?function(e,t){m.default.debug("[".concat(A.clientId,"] Connect next gateway")),A.state=h,A.socket.close(),F(),A.reconnectMode="tryNext",A.state=_,B(e,t)}(t,n):"retry"===e?function(e,t){m.default.debug("[".concat(A.clientId,"] Reconnect gateway")),A.state=h,A.socket.close(),F(),A.reconnectMode="retry",A.state=_,B(e,t)}(t,n):"quit"===e?(m.default.debug("[".concat(A.clientId,"] quit gateway")),A.state=h,A.socket.close(),F()):"recover"===e&&U()},A.socket.on("on_notification",(function(e){if(m.default.debug("[".concat(A.clientId,"] Receive notification: "),e),"ERR_JOIN_BY_MULTI_IP"===T.GatewayErrorCode[e.code])return A.dispatchEvent({type:"onMultiIP",option:e.option});e.detail?A._doWithAction(k[T.GatewayErrorCode[e.code]]):e.action&&A._doWithAction(e.action)})),A.socket.on("on_user_offline",(function(e){m.default.info("[".concat(A.clientId,"] on_user_offline:"),e);var t=Object(v.a)({type:"peer-leave",uid:e.uid});if(A.remoteStreamsInChannel.has(e.uid)&&A.remoteStreamsInChannel.delete(e.uid),A.remoteStreams.hasOwnProperty(e.uid)&&(t.stream=A.remoteStreams[e.uid]),t.reason=e.reason,A.dispatchEvent(t),m.default.info("[".concat(A.clientId,"] remove remoteMuteState "),e.uid),delete A.remoteMuteState[e.uid],A.remoteStreams.hasOwnProperty(e.uid)){m.default.info("[".concat(A.clientId,"] closing stream on peer leave"),e.uid);var n=A.remoteStreams[e.uid];n.close(),delete A.remoteStreams[e.uid],y.report.onRemoveStream(A.joinInfo.sid,{peerid:e.uint_id||e.uid,uid:A.uid}),void 0!==n.pc&&(n.pc.close(),n.pc=void 0,A.p2ps.delete(n.p2pId))}A.timers.hasOwnProperty(e.uid)&&(clearInterval(A.timers[e.uid]),clearInterval(A.timers[e.uid]+"_RelatedStats"),delete A.timers[e.uid]),null!=A.audioLevel[e.uid]&&delete A.audioLevel[e.uid],null!=A.timer_counter[e.uid]&&delete A.timer_counter[e.uid]})),A.socket.on("onUplinkStats",(function(e){})),A.socket.on("liveStreamingStarted",(function(e){var t=Object(v.c)({type:"liveStreamingStarted",url:e.url});A.dispatchEvent(t)})),A.socket.on("liveStreamingFailed",(function(e){var t=Object(v.c)({type:"liveStreamingFailed",url:e.url});A.dispatchEvent(t)})),A.socket.on("liveStreamingStopped",(function(e){var t=Object(v.c)({type:"liveStreamingStopped",url:e.url});A.dispatchEvent(t)})),A.socket.on("liveTranscodingUpdated",(function(e){var t=Object(v.c)({type:"liveTranscodingUpdated",reason:e.reason});A.dispatchEvent(t)})),A.socket.on("streamInjectedStatus",(function(e){var t=Object(v.c)({type:"streamInjectedStatus",url:e.url,uid:e.uid,status:e.status});A.dispatchEvent(t)})),A.socket.on("on_user_online",(function(e){A.joinInfo.stringUid&&"string"!=typeof e.uid&&m.default.error("StringUID is Mixed with UintUID"),A.dispatchEvent({type:"peer-online",uid:e.uid})})),A.socket.on("receive_metadata",(function(e){A.joinInfo.stringUid&&"string"!=typeof e.uid&&m.default.error("StringUID is Mixed with UintUID");var t=decodeURIComponent(escape(window.atob(e.metadata)));m.default.debug("[".concat(A.clientId,"] received ").concat(e.uid," metadata: ").concat(t)),A.dispatchEvent({type:"receive-metadata",uid:e.uid,metadata:t})}));var o},q=function(e,t){if(void 0!==A.socket)try{A.socket.emitSimpleMessage(e,(function(e,n){t&&t(e,n)}))}catch(e){m.default.error("[".concat(A.clientId,"] Error in sendSimpleSdp [").concat(e,"]"))}else m.default.error("[".concat(A.clientId,"] Error in sendSimpleSdp [socket not ready]"))},W=function(){for(var e in A.localStreams)if(void 0!==A.localStreams[e]){var t=A.localStreams[e];delete A.localStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}},H=function(){for(var e in A.remoteStreamsInChannel.clear(),A.remoteStreams)if(A.remoteStreams.hasOwnProperty(e)){var t=A.remoteStreams[e];t.isPlaying()&&t.stop(),t.close(),delete A.remoteStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}};return A},V={_gatewayClients:{},register:function(e,t){if(!t.uid){var n="NO_UID_PROVIDED";return m.default.error("[".concat(e.clientId,"] "),n,t),n}return t.cname?this._gatewayClients[t.cname]&&this._gatewayClients[t.cname][t.uid]&&this._gatewayClients[t.cname][t.uid]!==e?(n="UID_CONFLICT",m.default.error("[".concat(e.clientId,"] "),n,t),n):(m.default.debug("[".concat(e.clientId,"] register client Channel"),t.cname,"Uid",t.uid),this._gatewayClients[t.cname]||(this._gatewayClients[t.cname]={}),this._gatewayClients[t.cname][t.uid]=e,null):(n="NO_CHANNEL_PROVIDED",m.default.error("[".concat(e.clientId,"] "),n,t),n)},unregister:function(e){var t=e&&e.uid,n=e.joinInfo&&e.joinInfo.cname;if(!t||!n){var r="INVALID_GATEWAYCLIENT";return m.default.error("[".concat(e.clientId,"] "),r),r}if(this._gatewayClients[n]&&this._gatewayClients[n][t])return this._gatewayClients[n][t]!==e?(r="GATEWAYCLIENT_UID_CONFLICT",m.default.error("[".concat(e.clientId,"] "),r),r):(m.default.debug("[".concat(e.clientId,"] unregister client "),e.uid),delete this._gatewayClients[n][t],null);r="GATEWEAY_CLIENT_UNREGISTERED",m.default.error("[".concat(e.clientId,"] "),r)}};U.DISCONNECTED=0,U.CONNECTING=1,U.CONNECTED=2,U.DISCONNECTING=3,U.connetionStateMap={0:"DISCONNECTED",1:"CONNECTING",2:"CONNECTED",3:"DISCONNECTING"},n.a=U},function(e,t,n){"use strict";n.r(t),n.d(t,"post",(function(){return d})),n.d(t,"postFormData",(function(){return l})),n.d(t,"shouldUseHttps",(function(){return h})),n.d(t,"getHTTPSendBytes",(function(){return s})),n.d(t,"getHTTPRecvBytes",(function(){return c})),n.d(t,"resetHTTPByetsCount",(function(){return u}));var r=n(2),i=n(10),o=0,a=0,s=function(){return o},c=function(){return a},u=function(){o=0,a=0},l=function(e,t,n,s,c){var u=new XMLHttpRequest;if(u.timeout=t.timeout||Object(r.getParameter)("HTTP_CONNECT_TIMEOUT"),u.open("POST",e,!0),c)for(var l in c)"withCredentials"==l?u.withCredentials=!0:u.setRequestHeader(l,c[l]);u.onload=function(t){a+=Object(i.lengthInUtf8Bytes)(u.responseText),200!==u.status?s&&s({httpErrorCode:"httpcode-xhr.status"},e):n&&n(u.responseText)},u.onerror=function(t){s&&s(t,e)},u.ontimeout=function(t){s&&s(t,e)};var d=JSON.stringify(t);o+=Object(i.lengthInUtf8Bytes)(d);var h=new FormData;h.append("request",d),u.send(h)},d=function(e,t,n,s,c){var u=new XMLHttpRequest;if(u.timeout=t.timeout||Object(r.getParameter)("HTTP_CONNECT_TIMEOUT"),u.open("POST",e,!0),u.setRequestHeader("Content-type","application/json; charset=utf-8"),c)for(var l in c)"withCredentials"==l?u.withCredentials=!0:u.setRequestHeader(l,c[l]);u.onload=function(t){a+=Object(i.lengthInUtf8Bytes)(u.responseText),200!==u.status?s&&s({httpErrorCode:"httpcode-xhr.status"},e):n&&n(u.responseText)},u.onerror=function(t){s&&s(t,e)},u.ontimeout=function(t){s&&s(t,e)};var d=JSON.stringify(t);o+=Object(i.lengthInUtf8Bytes)(d),u.send(d)},h=function(){return"https:"==document.location.protocol}},function(e,t,n){"use strict";n.r(t),n.d(t,"RTCPeerConnection",(function(){return w})),n.d(t,"getUserMedia",(function(){return a})),n.d(t,"attachMediaStream",(function(){return s})),n.d(t,"reattachMediaStream",(function(){return c})),n.d(t,"setSrcObject",(function(){return f})),n.d(t,"getSrcObject",(function(){return p})),n.d(t,"webrtcDetectedBrowser",(function(){return u})),n.d(t,"webrtcDetectedVersion",(function(){return l})),n.d(t,"webrtcMinimumVersion",(function(){return d})),n.d(t,"webrtcTesting",(function(){return x})),n.d(t,"webrtcUtils",(function(){return m}));var r=n(11),i=n.n(r),o=n(4),a=null,s=null,c=null,u=null,l=null,d=null,h=null,f=null,p=null,v=null,g={addStream:null},m={log:function(){},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n])}};if("object"==("undefined"==typeof window?"undefined":i()(window))?(window.HTMLMediaElement&&!("srcObject"in window.HTMLMediaElement.prototype)?(f=function(e,t){"mozSrcObject"in e?e.mozSrcObject=t:(e._srcObject=t,e.src=t?URL.createObjectURL(t):null)},p=function(e){return"mozSrcObject"in e?e.mozSrcObject:e._srcObject}):(f=function(e,t){e.srcObject=t},p=function(e){return e.srcObject}),a=window.navigator&&window.navigator.getUserMedia):(f=function(e,t){e.srcObject=t},p=function(e){return e.srcObject}),s=function(e,t){f(e,t)},c=function(e,t){f(e,p(t))},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){for(var y in m.log("This appears to be Firefox"),u="firefox",l=m.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),d=31,v=mozRTCPeerConnection,g)g[y]=v.prototype[y];if(h=function(e,t){if(l<38&&e&&e.iceServers){for(var n=[],r=0;r<e.iceServers.length;r++){var i=e.iceServers[r];if(i.hasOwnProperty("urls"))for(var o=0;o<i.urls.length;o++){var a={url:i.urls[o]};0===i.urls[o].indexOf("turn")&&(a.username=i.username,a.credential=i.credential),n.push(a)}else n.push(e.iceServers[r])}e.iceServers=n}var s=new v(e,t);for(var c in g)s[c]=g[c];return s},window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),a=function(e,t,n){var r=function(e){if("object"!==i()(e)||e.require)return e;var t=[];return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"===i()(e[n])?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var o={};"number"==typeof r.ideal?o[n]={min:r.ideal,max:r.ideal}:o[n]=r.ideal,e.advanced.push(o),delete r.ideal,Object.keys(r).length||delete e[n]}}})),t.length&&(e.require=t),e};return l<38&&(m.log("spec: "+JSON.stringify(e)),e.audio&&(e.audio=r(e.audio)),e.video&&(e.video=r(e.video)),m.log("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,t,n)},navigator.getUserMedia=a,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:S,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise((function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])}))},l<41){var b=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return b().then(void 0,(function(e){if("NotFoundError"===e.name)return[];throw e}))}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){for(var y in m.log("This appears to be Chrome"),u="chrome",l=m.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),d=38,v=webkitRTCPeerConnection,g)g[y]=v.prototype[y];h=function(e,t){e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new v(e,t);for(var r in g)n[r]=g[r];var i=n.getStats.bind(n);return n.getStats=function(e,t,n){var r=arguments;return r.length>0&&"function"==typeof e&&(t?(n=t,t=e,r=[e=null,t,n]):(t=e,r=[e=null,t])),r.length>=2?i.apply(this,[function(e){r[1](function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t}(e))},r[0]]):i()},n},["createOffer","createAnswer"].forEach((function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"===i()(arguments[0])){var n=1===arguments.length?arguments[0]:void 0;return new Promise((function(r,i){t.apply(e,[r,i,n])}))}return t.apply(this,arguments)}})),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this;return new Promise((function(r,i){t.apply(n,[e[0],function(){r(),e.length>=2&&e[1].apply(null,[])},function(t){i(t),e.length>=3&&e[2].apply(null,[t])}])}))}}));var _=function(e){if("object"!==i()(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===i()(e[n])?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var a={};"number"==typeof r.ideal?(a[o("min",n)]=r.ideal,t.optional.push(a),(a={})[o("max",n)]=r.ideal,t.optional.push(a)):(a[o("",n)]=r.ideal,t.optional.push(a))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t};if(a=function(e,t,n){return e.audio&&(e.audio=_(e.audio)),e.video&&(e.video=_(e.video)),m.log("chrome: "+JSON.stringify(e)),navigator.webkitGetUserMedia(e,t,n)},navigator.getUserMedia=a,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:S,enumerateDevices:function(){return new Promise((function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources((function(n){e(n.map((function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}})))}))}))}}),navigator.mediaDevices.getUserMedia){if((Object(o.getBrowserVersion)()?Number(Object(o.getBrowserVersion)().split(".")[0]):void 0)<46){var E=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return m.log("spec:   "+JSON.stringify(e)),e.audio=_(e.audio),e.video=_(e.video),m.log("chrome: "+JSON.stringify(e)),E(e)}}}else navigator.mediaDevices.getUserMedia=function(e){return S(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){m.log("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){m.log("Dummy mediaDevices.removeEventListener called.")}),s=function(e,t){l>=43?f(e,t):void 0!==e.src?e.src=t?URL.createObjectURL(t):null:m.log("Error attaching stream to element.")},c=function(e,t){l>=43?f(e,p(t)):e.src=t.src}}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(m.log("This appears to be Edge"),u="edge",l=m.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),d=12):m.log("Browser does not appear to be WebRTC-capable");else m.log("This does not appear to be a browser"),u="not a browser";function S(e){return new Promise((function(t,n){a(e,t,n)}))}var w,x={};try{Object.defineProperty(x,"version",{set:function(e){l=e}})}catch(e){}h?w=h:"undefined"!=typeof window&&(w=window.RTCPeerConnection)},function(e,t,n){"use strict";var r=n(12),i=n.n(r),o=n(17),a=n.n(o),s=n(51),c=n.n(s),u=n(4),l=n(1),d=n(3),h=n(0),f=(n(25),n(2),n(5),n(52)),p=n.n(f),v=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function g(e){for(var t=new Uint8Array([99,114,121,112,116,105,105]),n=t.length,r=e,i=r.length,o=new Uint8Array(i),a=new Uint8Array(256),s=0;s<256;s++)a[s]=s;for(var c=0,u=0;u<256;u++){var l=[a[c=(c+a[u]+t[u%n])%256],a[u]];a[u]=l[0],a[c]=l[1]}var d,h=0;c=0;for(var f=0;f<0+i;f++){var p=[a[c=(c+a[h=(h+1)%256])%256],a[h]];a[h]=p[0],a[c]=p[1],d=a[(a[h]+a[c])%256],f>=0&&(o[f-0]=r[f-0]^d)}var v=String.fromCharCode.apply(null,o);return Function("var winSize = 5; return `"+v+"`")()}function m(e,t){var n=g(t),r=p.a.createProgramFromSources(e,[g(v),n]),i=e.getAttribLocation(r,"a_position"),o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(i);var a=2,s=e.FLOAT,c=!1,u=0,l=0;e.vertexAttribPointer(i,a,s,c,u,l);var d=e.getAttribLocation(r,"a_texCoord"),h=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,h),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(d),a=2,s=e.FLOAT,c=!1,u=0,l=0,e.vertexAttribPointer(d,a,s,c,u,l),r}var y=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];function b(e,t,n){var r=e.gl;this.program=m(r,y),this.setUniforms=function(){r.getUniformLocation(this.program,"u_image");var e=r.getUniformLocation(this.program,"u_flipY");r.uniform1f(e,1)}}var _=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];function E(e,t,n){var r=e.gl,i=1/t,o=1/n,a=5;this.program=m(r,_),this.setUniforms=function(){r.getUniformLocation(this.program,"u_image");var e=r.getUniformLocation(this.program,"u_flipY"),t=r.getUniformLocation(this.program,"u_singleStepOffset"),n=r.getUniformLocation(this.program,"u_denoiseLevel");r.uniform2f(t,i,o),r.uniform1f(n,a),r.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(a=e.denoiseLevel)},this.setSize=function(e,t){i=1/e,o=1/t}}var S=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];function w(e,t,n){var r=e.gl,i=1/t,o=1/n,a=5;this.program=m(r,S),this.setUniforms=function(){r.getUniformLocation(this.program,"u_image");var e=r.getUniformLocation(this.program,"u_flipY"),t=r.getUniformLocation(this.program,"u_singleStepOffset"),n=r.getUniformLocation(this.program,"u_denoiseLevel");r.uniform2f(t,i,o),r.uniform1f(n,a),r.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(a=e.denoiseLevel)},this.setSize=function(e,t){i=1/e,o=1/t}}var x=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];function T(e,t,n){var r=e.gl,i=1/t,o=1/n,a=5;this.program=m(r,x),this.setUniforms=function(){r.getUniformLocation(this.program,"u_image");var e=r.getUniformLocation(this.program,"u_flipY"),t=r.getUniformLocation(this.program,"u_singleStepOffset"),n=r.getUniformLocation(this.program,"u_denoiseLevel");r.uniform2f(t,i,o),r.uniform1f(n,a),r.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(a=e.denoiseLevel)},this.setSize=function(e,t){i=1/e,o=1/t}}var I=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144];function R(e,t,n){var r=e.gl,i=5,o=.1,a=.5,s=175/180*3.141593,c=115/180*3.141593,u=173/180*3.141593,l=116/180*3.141593,d=2.04203545,h=0,f=0,p=0,v=[],g=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],y=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],b=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];this.program=m(r,I),this.setUniforms=function(){var t=r.getUniformLocation(this.program,"u_flipY"),n=r.getUniformLocation(this.program,"u_denoiseLevel");r.uniform1f(n,i),r.uniform1f(t,1);var g=r.getUniformLocation(this.program,"light");r.uniform1f(g,o);var m=r.getUniformLocation(this.program,"redness");r.uniform1f(m,a);var y=r.getUniformLocation(this.program,"skin_he_max"),b=r.getUniformLocation(this.program,"skin_he_min"),_=r.getUniformLocation(this.program,"skin_hc_max"),E=r.getUniformLocation(this.program,"skin_hc_min"),S=r.getUniformLocation(this.program,"skin_hc_axis"),w=r.getUniformLocation(this.program,"facts_rotate_c"),x=r.getUniformLocation(this.program,"facts_rotate_le"),T=r.getUniformLocation(this.program,"facts_rotate_ge");r.uniform1f(y,s),r.uniform1f(b,c),r.uniform1f(_,u),r.uniform1f(E,l),r.uniform1f(S,d),r.uniform1f(w,h),r.uniform1f(x,f),r.uniform1f(T,p);var I=r.getUniformLocation(this.program,"u_originImage");r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,e.inputTexture),r.uniform1i(I,2);for(var R=["lighten_lut"],k=[r.TEXTURE3],O=0;O<R.length;O++){var C=r.getUniformLocation(this.program,R[O]);r.activeTexture(k[O]),r.bindTexture(r.TEXTURE_2D,v[O]),r.uniform1i(C,O+3)}},this.setParameters=function(e){void 0!==e.denoiseLevel&&(i=e.denoiseLevel),void 0!==e.lightLevel&&(o=e.lightLevel),void 0!==e.rednessLevel&&(a=e.rednessLevel,this._updateRedness(a)),void 0!==e.lighteningContrastLevel&&this._updateLut(e.lighteningContrastLevel)},this._updateRedness=function(e){var t,n,r=3.141593,i=e,o=i;i>1&&(i=1),i<0&&(i=0),o>1&&(o=1),o<0&&(o=0),h=.8*i,o<.8&&(o=0),(d=(117-4*o)/180*r)<(l=(116-4*o)/180*r)&&(d=l),l<r/2&&(l=r/2),d<r/2&&(d=r/2),(c=(115-4*o)/180*r)<r/2&&(c=r/2),(u=173/180*r)>r&&(u=r),d>r&&(d=r),(s=175/180*r)>r&&(s=r),n=u-d,p=(t=s-u)>.01?h*n/t:h,n=d-l,f=(t=l-c)>.01?h*n/t:h},this._updateLut=function(e){var t=null;0==e&&(t=y),1==e&&(t=b),2==e&&(t=g);for(var n=[new Uint8Array(t)],i=[256],o=[1],a=0;a<n.length;a++)r.bindTexture(r.TEXTURE_2D,v[a]),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,i[a],o[a],0,r.LUMINANCE,r.UNSIGNED_BYTE,n[a])},this._init=function(){for(var e=[new Uint8Array(y)],t=[256],n=[1],i=0;i<e.length;i++){var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,t[i],n[i],0,r.LUMINANCE,r.UNSIGNED_BYTE,e[i]),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),v.push(o)}},this._init()}var k=!1;function O(){this.programs=[];var e=this,t=null,n=null;e.gl=null,e.inputTexture=null;var r=[],i=[],o=0,a=0;e._initGl=function(n,s){e.inputTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,e.inputTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR);for(var c=0;c<4;c++){var u=t.createTexture();t.bindTexture(t.TEXTURE_2D,u),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),c<2?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,s,0,t.RGBA,t.UNSIGNED_BYTE,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,s,n,0,t.RGBA,t.UNSIGNED_BYTE,null);var l=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,l),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,u,0),r.push(u),i.push(l)}t.viewport(0,0,n,s),o=n,a=s},e.render=function(s){if(t){var c=0;a==s.videoWidth&&o===s.videoHeight&&(c=2),t.viewport(0,0,s.videoWidth,s.videoHeight),t.bindTexture(t.TEXTURE_2D,e.inputTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,s);for(var u=k?e.programs.length-1:0,l=0;l<=u;l++){var d=e.programs[l].program;t.useProgram(d);var h=t.getUniformLocation(d,"u_image");e.programs[l].setUniforms(),t.bindFramebuffer(t.FRAMEBUFFER,i[c+l%2]),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,6),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r[c+l%2]),t.uniform1i(h,0)}t.useProgram(n);var f=t.getUniformLocation(n,"u_flipY");t.uniform1f(f,-1),t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,6)}},e.setEnableBeauty=function(e){k=e},e.init=function(r,i,o){if("undefined"==typeof WebGLRenderingContext)throw new Error("NOT_SUPPORT");t=o.getContext("webgl"),e.gl=t,e._initGl(r,i),e.programs.push(new b(this,r,i)),e.programs.push(new E(this,r,i)),e.programs.push(new w(this,r,i)),e.programs.push(new T(this,r,i)),e.programs.push(new R(this,r,i)),n=e.programs[0].program},e.release=function(){e.gl=null,t=null,n=null,e.inputTexture=null,e.programs=[],r=[],i=[]},e.setDenoiseLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({denoiseLevel:t})}))},e.setLightLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({lightLevel:t})}))},e.setRednessLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({rednessLevel:t})}))},e.setContrastLevel=function(t){e.programs.forEach((function(e){e.setParameters&&e.setParameters({lighteningContrastLevel:t})}))},e.setSize=function(t,n){e.programs.forEach((function(e){e.setSize&&e.setSize(t,n)}))}}O._instance=null,O.getInstance=function(){return O._instance||(O._instance=new O),O._instance},t.a={addVideoEffectCapability:function(e){e.videoEffect={canvas:null,video:null,fps:30,stopChromeBackgroundLoop:null,enableBeauty:!1,denoiseLevel:5,lightLevel:.35,rednessLevel:.5,lighteningContrastLevel:1,videoContextInited:!1,originVideoTrack:null,canvasVideoTrack:null,ctx:null},e._initVideoContext=function(){if(e.videoEffect.videoContextInited)throw new Error("Failed to init video context. Already inited");if(!e.stream)throw new Error("Failed to init video context. Local Stream not initialized");e.videoEffect.originVideoTrack=e.stream.getVideoTracks()[0],e.attributes&&e.attributes.maxFrameRate&&(e.videoEffect.fps=e.attributes.maxFrameRate),e.videoEffect.videoContextInited=!0},e._renderWithWebGL=function(t){return new Promise((function(n){e.videoEffect.canvas||(e.videoEffect.canvas=document.createElement("canvas")),e.videoEffect.video||(e.videoEffect.video=document.createElement("video")),e.videoEffect.video.setAttribute("autoplay",""),e.videoEffect.video.setAttribute("muted",""),e.videoEffect.video.muted=!0,e.videoEffect.video.setAttribute("playsinline",""),e.videoEffect.video.setAttribute("style","display:none"),e.videoEffect.video.srcObject=t;var r=t.getVideoTracks()[0].getSettings(),i=r.width,o=r.height;e.videoEffect.canvas.setAttribute("width",i),e.videoEffect.canvas.setAttribute("height",o),e.videoEffect.video.setAttribute("width",i),e.videoEffect.video.setAttribute("height",o);var a=O.getInstance();a.init(e.videoEffect.video.width,e.videoEffect.video.height,e.videoEffect.canvas),a.setDenoiseLevel(e.videoEffect.denoiseLevel),a.setLightLevel(e.videoEffect.lightLevel),a.setRednessLevel(e.videoEffect.rednessLevel),a.setContrastLevel(e.videoEffect.lighteningContrastLevel),e.videoEffect.video.addEventListener("playing",(function t(){var r=e.videoEffect.canvas.captureStream(e.videoEffect.fps);e.videoEffect.video.removeEventListener("playing",t,!0),n([r.getVideoTracks()[0],e.videoEffect.video])}),!0),e.videoEffect.video.play()}))},e._disableEffect=function(){e.videoEffect.videoContextInited||e._initVideoContext();var t=e.videoEffect.originVideoTrack;if(!t)return h.default.warning("Video track is null, fail to disable video effect!"),Promise.resolve();if(e.pc&&e.pc.peerConnection&&e.pc.peerConnection){var n=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"video"==e.track.kind}));if(n&&n.replaceTrack&&t)return n.replaceTrack(t)}return Promise.resolve()},e._releaseEffect=function(){var t;return t=e.videoEffect.enableBeauty?e._disableEffect():Promise.resolve(),O.getInstance().release(),e.videoEffect.videoContextInited=!1,e.videoEffect.canvasVideoTrack=null,t},e._enableEffect=function(){return e.videoEffect.videoContextInited||e._initVideoContext(),e.videoEffect.originVideoTrack?e.videoEffect.canvasVideoTrack?(e._showEffectInLocalPlayer(),e._replaceWithCanvasTrack()):e._renderWithWebGL(e.stream).then((function(t){var n=c()(t,2),r=n[0],i=n[1];e.videoEffect.canvasVideoTrack=r;var o=O.getInstance();return requestAnimationFrame((function t(){e.videoEffect.enableBeauty&&o.render(i),e.videoEffect.videoContextInited&&requestAnimationFrame(t)})),u.isChrome()&&document.addEventListener("visibilitychange",(function(){document.hidden,document.hidden?e.videoEffect.stopChromeBackgroundLoop=function(e,t){var n=1/t,r=new AudioContext,i=r.createGain();i.gain.value=0,i.connect(r.destination),function t(){var a=r.createOscillator();a.onended=t,a.connect(i),a.start(0),a.stop(r.currentTime+n),e(r.currentTime),o&&(a.onended=function(){r.close()})}();var o=!1;return function(){o=!0}}((function(){e.videoEffect.enableBeauty&&o.render(i)}),e.videoEffect.fps):e.videoEffect.stopChromeBackgroundLoop&&(e.videoEffect.stopChromeBackgroundLoop(),e.videoEffect.stopChromeBackgroundLoop=null)}),!1),e._showEffectInLocalPlayer(),e._replaceWithCanvasTrack()})):(h.default.warning("Video track is null, fail to enable video effect!"),Promise.resolve())},e._showEffectInLocalPlayer=function(){if(e.player){var t=e.player.div.children[0];if("none"!==t.style.display&&(e.player.div.appendChild(e.videoEffect.canvas),"video"===t.tagName.toLowerCase())){var n=t.getAttribute("style");e.videoEffect.canvas.setAttribute("style",n),"none"!==t.style.display&&(t.style.display="none")}}},e._removeEffectFromLocalPlayer=function(){if(e.player&&e.player.div&&e.videoEffect.enableBeauty&&e.videoEffect.canvas){e.player.div.removeChild(e.videoEffect.canvas);var t=e.player.div.children[0];"video"===t.tagName.toLowerCase()&&(e.videoEffect.canvas.style.display="none",t.style.display="block")}},e._replaceWithCanvasTrack=function(){var t=null;return e.pc&&e.pc.peerConnection&&e.pc.peerConnection&&(t=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"video"==e.track.kind}))),t&&t.replaceTrack&&e.videoEffect.canvasVideoTrack?t.replaceTrack(e.videoEffect.canvasVideoTrack):Promise.resolve()},e.setBeautyEffectOptions=function(){var t=a()(i.a.mark((function t(n,r){var o,a=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(d.checkValidBoolean)(n,"enabled"),o=O.getInstance(),e.videoEffect.enableBeauty==n){t.next=14;break}if(o.setEnableBeauty(n),!n){t.next=9;break}return t.next=7,e._enableEffect();case 7:t.next=12;break;case 9:return e._removeEffectFromLocalPlayer(),t.next=12,e._releaseEffect();case 12:e.videoEffect.enableBeauty=n,l.report.reportApiInvoke(e.sid,{callback:null,options:a,name:"Stream.setBeautyEffectOptions",tag:"tracer"});case 14:if(n){t.next=16;break}return t.abrupt("return");case 16:if(!r){t.next=20;break}Object(d.checkValidObject)(r,"options"),t.next=21;break;case 20:return t.abrupt("return");case 21:if(void 0!==r.smoothnessLevel&&(Object(d.checkValidFloatNumber)(r.smoothnessLevel,"smoothnessLevel",0,1),e.videoEffect.denoiseLevel=10*r.smoothnessLevel,e.videoEffect.denoiseLevel<.1&&(e.videoEffect.denoiseLevel=.1),o.setDenoiseLevel(e.videoEffect.denoiseLevel)),void 0!==r.lighteningLevel&&(Object(d.checkValidFloatNumber)(r.lighteningLevel,"lighteningLevel",0,1),e.videoEffect.lightLevel=r.lighteningLevel/2,e.videoEffect.lightLevel<.01&&(e.videoEffect.lightLevel=.01),o.setLightLevel(e.videoEffect.lightLevel)),void 0!==r.rednessLevel&&(Object(d.checkValidFloatNumber)(r.rednessLevel,"rednessLevel",0,1),e.videoEffect.rednessLevel=r.rednessLevel,e.videoEffect.rednessLevel<.01&&(e.videoEffect.rednessLevel=.01),o.setRednessLevel(e.videoEffect.rednessLevel)),void 0===r.lighteningContrastLevel){t.next=29;break}if(0===r.lighteningContrastLevel||1===r.lighteningContrastLevel||2===r.lighteningContrastLevel){t.next=27;break}throw new Error("Invalid lighteningContrastLevel: The value should be 0, 1 or 2.");case 27:e.videoEffect.lighteningContrastLevel=parseFloat(r.lighteningContrastLevel),o.setContrastLevel(e.videoEffect.lighteningContrastLevel);case 29:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},restoreVideoEffect:function(e){return e.videoEffect.enableBeauty?e._enableEffect():Promise.resolve()},disableVideoEffect:function(e){return e._releaseEffect?e._releaseEffect():Promise.resolve()},applyEffectInPlayer:function(e){e.videoEffect.enableBeauty&&e.videoEffect.canvas&&e._showEffectInLocalPlayer()},removeEffectFromLocalPlayer:function(e){e._removeEffectFromLocalPlayer()},replaceWithCanvasTrack:function(e){return e.videoEffect.enableBeauty?e._replaceWithCanvasTrack():Promise.resolve()},checkVideoEffectEnabled:function(e){return!!(e.videoEffect.enableBeauty&&e.videoEffect&&e.videoEffect.videoContextInited)&&(h.default.error("Operation not permitted: ".concat("VIDEO_EFFECT_ENABLED")),"VIDEO_EFFECT_ENABLED")}}},function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,c,"next",e)}function c(e){n(a,i,o,s,c,"throw",e)}s(void 0)}))}}},function(e,t,n){"use strict";var r=n(38),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===i.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)u(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,i=arguments.length;r<i;r++)u(arguments[r],n);return t},extend:function(e,t,n){return u(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(7),i=n.n(r),o=n(8),a=n(0),s=n(5);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=new function(){var e=Object(o.b)();return e.devicesHistory={},e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.deviceStates={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},e.deviceReloadTimer=null,e._init=function(t,n){e.state=e.states.INITING,e.devicesHistory={},e._reloadDevicesInfo((function(){e.state=e.states.INITED,e.dispatchEvent({type:"inited"}),t&&t()}),(function(t){a.default.warning("Device Detection functionality cannot start properly."),e.state=e.states.UNINIT,n&&n(t)}))},e._enumerateDevices=function(e,t){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a.default.warning("enumerateDevices() not supported."),t&&t("enumerateDevices() not supported");navigator.mediaDevices.enumerateDevices().then((function(t){e&&setTimeout((function(){e(t)}),0)})).catch((function(e){t&&t(e)}))},e._reloadDevicesInfo=function(t,n){var r=[];e._enumerateDevices((function(n){var o=Date.now();for(var s in n.forEach((function(t){var n=e.devicesHistory[t.deviceId];if((n?n.state:e.deviceStates.INACTIVE)!=e.deviceStates.ACTIVE){var i=n||{initAt:o};i.device=t,i.state=e.deviceStates.ACTIVE,r.push(i),e.devicesHistory[t.deviceId]=i}e.devicesHistory[t.deviceId].lastReloadAt=o})),e.devicesHistory){var c=e.devicesHistory[s];c&&c.state==e.deviceStates.ACTIVE&&c.lastReloadAt!==o&&(c.state=e.deviceStates.INACTIVE,r.push(c)),c.lastReloadAt=o}e.state==e.states.INITED&&r.forEach((function(t){var n=i()({},t);switch(t.device.kind){case"audioinput":n.type="recordingDeviceChanged";break;case"audiooutput":n.type="playoutDeviceChanged";break;case"videoinput":n.type="cameraChanged";break;default:a.default.warning("Unknown device change",n),n.type="unknownDeviceChanged"}e.dispatchEvent(n)})),t&&t()}),n)},e.getDeviceById=function(t,n,r){e.getDevices((function(e){for(var i=0;i<e.length;i++){var o=e[i];if(o&&o.deviceId===t)return n&&n(o)}return r&&r()}))},e.searchDeviceNameById=function(t){var n=e.devicesHistory[t];return n?n.device.label||n.device.deviceId:null},e.getDevices=function(t,n){e._enumerateDevices(t,(function(e){n&&n(e.name+": "+e.message)}))},e.getVideoCameraIdByLabel=function(t,n,r){e.getCameras((function(e){var i,o=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){a=!0,i=e})),f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a.label===t)return n&&n(a.deviceId)}}catch(e){o.e(e)}finally{o.f()}return r&&r(s.default.NOT_FIND_DEVICE_BY_LABEL)}),r)},e.getRecordingDevices=function(t,n){return e._enumerateDevices((function(e){var n=e.filter((function(e){return"audioinput"==e.kind}));t&&t(n)}),(function(e){n&&n(e)}))},e.getPlayoutDevices=function(t,n){return e._enumerateDevices((function(e){var n=e.filter((function(e){return"audiooutput"==e.kind}));t&&t(n)}),(function(e){n&&n(e)}))},e.getCameras=function(t,n){return e._enumerateDevices((function(e){var n=e.filter((function(e){return"videoinput"==e.kind}));t&&t(n)}),(function(e){n&&n(e)}))},e._init((function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",(function(){e._reloadDevicesInfo()})),e.deviceReloadTimer=setInterval(e._reloadDevicesInfo,5e3)})),e}},function(e,t,n){"use strict";n.r(t),n.d(t,"_getReconnectCSTimer",(function(){return I})),n.d(t,"_setClientConnectionStateRecord",(function(){return R})),n.d(t,"getGatewayList",(function(){return O})),n.d(t,"getUserAccount",(function(){return A}));var r=n(11),i=n.n(r),o=n(12),a=n.n(o),s=n(17),c=n.n(s),u=n(2),l=(n(4),n(0)),d=n(14),h=n(1),f=n(5),p=function(e,t){var n=!1,r=0,i=Object(u.getParameter)("PROXY_CS"),o=Object(u.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),a=0,s={command:"convergeAllocateEdge",sid:e.sid,appId:e.appId,token:e.token,uid:e.uid,cname:e.cname,ts:Math.floor(Date.now()/1e3),version:u.VERSION,seq:0,requestId:1},c=function(c){var u=(new Date).getTime();v("https://"+c+"/api/v1",s,(function(s,f){if(s)return l.default.debug("["+e.clientId+"] Request proxy server failed: ",s),r++,h.report.requestProxyAppCenter(e.sid,{lts:u,succ:!1,APAddr:c,workerManagerList:null,ec:JSON.stringify(s),response:JSON.stringify({err:s,res:f})}),r>=i.length&&t&&t("Get proxy server failed: request all failed"),void(!(r%o)&&r<i.length&&(a++,d()));if(!n)if((f=JSON.parse(f)).json_body){var p=JSON.parse(f.json_body);if(l.default.debug("["+e.clientId+"] App return:",p.servers),200!==p.code)s="Get proxy server failed: response code ["+p.code+"], reason [ "+p.reason+"]",r++,l.default.debug("["+e.clientId+"] "+s),h.report.requestProxyAppCenter(e.sid,{lts:u,succ:!1,APAddr:c,workerManagerList:null,ec:s,response:JSON.stringify({err:s,res:f})}),r>=i.length&&t&&t(s),!(r%o)&&r<i.length&&(a++,d());else{n=!0;var v=m(p.servers);h.report.requestProxyAppCenter(e.sid,{lts:u,succ:!0,APAddr:c,workerManagerList:JSON.stringify(v),ec:null,response:JSON.stringify({res:f})}),t&&t(null,v)}}else l.default.debug("["+e.clientId+"] Get proxy server failed: no json_body"),h.report.requestProxyAppCenter(e.sid,{lts:u,succ:!1,APAddr:c,workerManagerList:null,ec:"Get proxy server failed: no json_body",response:JSON.stringify({res:f})})}))},d=function(){for(var e=a*o,t=e;t<Math.min(i.length,e+o);t++){var n=i[t];c(n)}};d()},v=function(e,t,n){var r={service_name:"webrtc_proxy",json_body:JSON.stringify(t)};Object(d.post)(e,r,(function(e){n&&n(null,e)}),(function(e){n&&n(e)}),{"X-Packet-Service-Type":0,"X-Packet-URI":61})},g=function(e,t,n){var r=!1,i=0,o={command:"request",gatewayType:"http",appId:e.appId,cname:e.cname,uid:e.uid+"",sdkVersion:"2.3.1",sid:e.sid,seq:1,ts:+new Date,requestId:3,clientRequest:{appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid}};t.map((function(a){var s=(new Date).getTime();!function(e,t,n){Object(d.post)(e,t,(function(e){n&&n(null,e)}),(function(e){n&&n(e)}))}("https://"+a+":4000/v2/machine",o,(function(o,c){if(o)return l.default.debug("["+e.clientId+"] Request worker manager failed: ",o),i++,h.report.requestProxyWorkerManager(e.sid,{lts:s,succ:!1,workerManagerAddr:a,ec:JSON.stringify(o),response:JSON.stringify({res:c})}),void(i>=t.length&&n&&n("requeet worker manager server failed: request failed"));if(!r){if(!(c=JSON.parse(c)).serverResponse)return n&&n("requeet worker manager server failed: serverResponse is undefined");r=!0,h.report.requestProxyWorkerManager(e.sid,{lts:s,succ:!0,workerManagerAddr:a,ec:JSON.stringify(o),response:JSON.stringify({res:c})}),n&&n(null,{address:a,serverResponse:c.serverResponse})}}))}))},m=function(e){if(!e||[]instanceof Array==0)return[];var t=[];return e.forEach((function(e){var n;e.address&&e.tcp?(e.address.match(/^[\.\:\d]+$/)?n="".concat(e.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(l.default.info("["+joinInfo.clientId+"] "+"Cannot recognized as IP address ".concat(e.address,". Used As Host instead")),n="".concat(e.address,":").concat(e.tcp)),t.push(n)):l.default.error("["+joinInfo.clientId+"] Invalid address format ",e)})),t},y=n(21),b=function(e,t,n,r){var i=Object(u.getParameter)("WEBCS_DOMAIN").concat(Object(u.getParameter)("WEBCS_DOMAIN_BACKUP_LIST")),o=Object(u.getParameter)("PROXY_SERVER_TYPE3");i=i.map((function(e,t){return"".concat(o[(t+1)%o.length],"/ap/?url=").concat(e)}));var a,s=0,c=!0,p=Object(u.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),v=0,g=function(g){!function(e,t,n,r,i){var o=Date.now(),a=function(e,r){try{h.report.joinChooseServer2(n.sid,{lts:o,succ:!e,csAddr:t,serverList:r&&r.gateway_addr,cid:r&&r.cid+"",uid:r&&r.uid+"",ec:e,chooseServerIp:r&&r.detail&&r.detail[502]})}catch(e){}},s=function(r,i){var a=Date.now();try{h.report.joinWebProxyAP({lts:a,sid:n.sid,cname:n.cname,cid:n.cid,uid:n.uid,sucess:r?-1:1,elapse:a-o,eventType:e,apServerAddr:t,turnServerAddrList:JSON.stringify(i),errorCode:r||"0"})}catch(e){}},c=Object(u.getParameter)("AREA_SETTING").reduce((function(e,t,n){var r=Object(y.getAreaCodeByArea)(t);return r?0===n?r:"".concat(e,",").concat(r):e}),""),p={appid:n.token,client_ts:Date.now(),opid:133,sid:n.sid,request_bodies:[{uri:22,buffer:{cname:n.cname,detail:{11:c,6:n.stringUid},key:n.token,service_ids:[11,i?20:18],uid:n.uid||0}}]};t="https://".concat(t,"/api/v2/transpond/webrtc?v=2"),Object(d.postFormData)(t,p,(function(e){var o=function(e){return new RegExp(/10102\d{2}$/).test(e)?"NO_SERVICE_AVAILABLE":f.APErrorCode[e]||e};try{var c,d,h=JSON.parse(e);if(30===(h=h.response_body)[0].uri&&0!==h[0].buffer.code){var p=o(h[0].buffer.code);return s(p,h),r(p)}if(4096===h[0].buffer.flag?(d=h[0].buffer,c=h[1].buffer):(d=h[1].buffer,c=h[0].buffer),0!==c.code)return p=o(c.code),l.default.error("[".concat(n.clientId,"] requestProxyServer failed: ").concat(p)),s(p,c),r(p);if(!c.edges_services||!c.edges_services instanceof Array)return s("UNEXPECTED_ERROR",c),r("UNEXPECTED_ERROR");var v=Object(u.getParameter)("GATEWAY_DOMAINS"),g=0;if(t.indexOf(v[1])>-1&&(g=1),0===c.edges_services.length)return s("EMPTY_PROXY_LIST",c),r("EMPTY_PROXY_LIST");var m=c.edges_services.map((function(e){if(e.ip)return e.ip=i?"".concat(e.ip.replace(/[^\d]/g,"-"),".").concat(v[g++%v.length]):"".concat(e.ip),e}));if(s(null,m),0!==d.code)return p=o(d.code),l.default.error("[".concat(n.clientId,"] requestChooseServer failed: ").concat(p)),a(p),r(p);var y=[];if(v=Object(u.getParameter)("GATEWAY_DOMAINS"),g=0,t.indexOf(v[1])>-1&&(g=1),d.edges_services.forEach((function(e){var r;if(e.ip&&e.port){if(!e.ip.match(/^[\.\:\d]+$/))return l.default.info("["+n.clientId+"] "+"Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),void a("UNEXPECTED_IP");r="".concat(e.ip.replace(/[^\d]/g,"-"),".").concat(v[g++%v.length]);var i=Object(u.getParameter)("PROXY_SERVER_TYPE3");r=/sd-rtn/.test(t)?"".concat(i[0],"/ws/?h=").concat(r,"&p=").concat(e.port):"".concat(i[1],"/ws/?h=").concat(r,"&p=").concat(e.port),y.push(r)}else l.default.error("["+n.clientId+"] Invalid address format ",e)})),!y.length)return l.default.error("["+n.clientId+"] Empty Address response",h),a("EMPTY_ADDRESS_RESPONSE"),r("EMPTY_ADDRESS_RESPONSE");d.ticket=d.cert;var b={gateway_addr:y,uid:d.uid,cid:d.cid,vid:d.detail&&d.detail[8],res:d,detail:h.detail};a(null,b),r(null,{gatewayServers:b,turnServers:m})}catch(e){return l.default.error("[".concat(n.clientId,"] requestProxyServer failed with unexpected body "),e),s("UNEXPECTED_ERROR"),r("UNEXPECTED_ERROR")}}),(function(e,t){"timeout"===e.type?(s("REQUEST_PROXY_SERVER_TIME_OUT"),r("REQUEST_PROXY_SERVER_TIME_OUT")):(s("REQUEST_PROXY_SERVER_FAILED"),r("REQUEST_PROXY_SERVER_FAILED"))}))}(e,g,t,(function(e,r){e?(s++,l.default.error("[".concat(t.clientId,"] request ").concat(g," failed: ").concat(e)),e&&-1===f.JOIN_PROXY_RETRY_LIST.indexOf(e)&&(a=e),s===i.length&&(a||(a="RETRYABLE_ERROR"),n(a)),!(s%p)&&s<i.length&&(v++,m())):c&&(/sd-rtn/.test(r.gatewayServers.gateway_addr[0])?Object(u.setParameter)("NGINX",o[0]):Object(u.setParameter)("NGINX",o[1]),c=!1,n(null,r))}),r)},m=function(){for(var e=v*p,t=e;t<Math.min(i.length,e+p);t++){var n=i[t];g(n)}};m()},_=n(13),E=n(29),S=n.n(E),w=n(30),x={},T={},I=function(e){return x[e]},R=function(e,t){T[e]=t},k=function(e,t,n,r,i,o){var a=(new Date).getTime(),s=t,c="";t.multiIP&&t.multiIP.gateway_ip&&(c={vocs_ip:[t.multiIP.uni_lbs_ip],vos_ip:[t.multiIP.gateway_ip]});var p=Object(u.getParameter)("AREA_SETTING").reduce((function(e,t,n){var r=Object(y.getAreaCodeByArea)(t);return r?0===n?r:"".concat(e,",").concat(r):e}),""),v={appid:t.token,opid:133,client_ts:+new Date,sid:t.sid,request_bodies:[{uri:22,buffer:{cname:t.cname,detail:{5:c?JSON.stringify(c):void 0,6:t.stringUid,11:p},key:t.token,service_ids:[11],uid:t.uid||0}}]};Object(d.postFormData)(e,v,(function(i){try{var c=JSON.parse(i),d=(c=c.response_body[0].buffer).code}catch(e){var p="requestChooseServer failed with unexpected body "+i;return l.default.error("["+s.clientId+"]",p),r(p,void 0,void 0,o)}if(d)return y=new RegExp(/10102\d{2}$/).test(d)?"NO_SERVICE_AVAILABLE":f.APErrorCode[c.code]||d,h.report.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:e,serverList:null,ec:y,chooseServerIp:c&&c.detail&&c.detail[502]}),r("Get server node failed ["+y+"]",e,y,o);var v=[],g=Object(u.getParameter)("GATEWAY_DOMAINS"),m=0;if(e.indexOf(g[1])>-1&&(m=1),c.edges_services.forEach((function(e){var t;e.ip&&e.port?(e.ip.match(/^[\.\:\d]+$/)?t="".concat(e.ip.replace(/[^\d]/g,"-"),".").concat(g[m++%g.length],":").concat(e.port):(l.default.info("["+s.clientId+"] "+"Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),t="".concat(e.ip,":").concat(e.port)),v.push(t)):l.default.error("["+s.clientId+"] Invalid address format ",e)})),!v.length){l.default.error("["+s.clientId+"] Empty Address response",c);var y="EMPTY_ADDRESS_RESPONSE";return h.report.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:e,serverList:null,ec:y,chooseServerIp:c&&c.detail&&c.detail[502]}),r("Get server node failed ["+y+"]",e,y,o)}c.ticket=c.cert;var b={gateway_addr:v,uid:c.uid,cid:c.cid,vid:c.detail&&c.detail[8],res:c,uni_lbs_ip:c.detail};return n(b,e)}),(function(e,n){"timeout"===e.type?(h.report.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:n,serverList:null,ec:"timeout"}),r("Connect choose server timeout",n,void 0,o)):(h.report.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:n,serverList:null,ec:e.httpErrorCode||"server_wrong"}),r("Connect choose server error",n,void 0,o))}))},O=function(e,t,n){var r=!1,i=null,o=1,a=1,s=e.clientId,c=function t(a,c){if(!r){var d=[];!function(e,t,n){var r,i=(new Date).getTime(),o=!1,a=0,s=0,c=Object(u.getParameter)("WEBCS_DOMAIN"),d=c.length,p=Object(u.getParameter)("WEBCS_DOMAIN_BACKUP_LIST"),v=p.length,g=Object(u.getParameter)("CHOOSE_SERVER_FRAGEMENT_LENGTH"),m=0,b=0,_=function(n,r){var a;try{a=n.res.detail[8]}catch(t){l.default.debug("["+e.clientId+"] get vid failed",t)}if(o)h.report.joinChooseServer(e.sid,{lts:i,succ:!0,csAddr:r,serverList:n.gateway_addr,cid:n.cid+"",uid:n.uid+"",ec:null,vid:a,chooseServerIp:n.res&&n.res.detail&&n.res.detail[502]},!1);else{if(clearTimeout(x),o=!0,e.proxyServer)for(var s=n.gateway_addr,c=0;c<s.length;c++){var u=s[c].split(":");n.gateway_addr[c]=e.proxyServer+"/ws/?h="+u[0]+"&p="+u[1]}t(n),h.report.joinChooseServer(e.sid,{lts:i,succ:!0,csAddr:r,serverList:n.gateway_addr,cid:n.cid+"",uid:n.uid+"",ec:null,vid:a,chooseServerIp:n.res&&n.res.detail&&n.res.detail[502]},!0)}},E=function(t,i,o,c){"domain"===c&&a++,"backup"===c&&s++,l.default.error("["+e.clientId+"]",t,i,o),o&&-1===f.JOIN_CS_RETRY_LIST.indexOf(o)&&(r=o),a===d&&s===v&&n(r),"domain"===c&&!(a%g)&&a<d&&(m++,S()),"backup"===c&&!(s%g)&&s<v&&(b++,w())},S=function t(){for(var n=m*g,r=n;r<Math.min(d,n+g);++r){var i;if("string"==typeof c[r]){var o=c[r];i=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(o+"/api/v2/transpond/webrtc?v=2"):"https://".concat(o,"/api/v2/transpond/webrtc?v=2");var s=Object(y.getAreaCodeByWebCS)(o);l.default.debug("["+e.clientId+"] "+"Connect to choose_server: ".concat(i,", ").concat(s)),k(i,e,_,E,0,"domain")}else a++,l.default.error("["+e.clientId+"] Invalid Host",c[r]),r===n+g-1&&r<d-1-1&&(m++,t())}};S();var w=function t(){if(!o)for(var n=b*g,r=n;r<Math.min(v,n+g);r++){var i;if("string"==typeof p[r]){var a=p[r];i=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(a+"/api/v2/transpond/webrtc?v=2"):"https://".concat(a,"/api/v2/transpond/webrtc?v=2");var c=Object(y.getAreaCodeByWebCS)(a);l.default.debug("["+e.clientId+"] "+"Connect to backup_choose_server: ".concat(i,", ").concat(c)),k(i,e,_,E,0,"backup")}else s++,l.default.error("["+e.clientId+"] Invalid Host",p[r]),r===n+g-1&&r<p-1-1&&(m++,t())}},x=setTimeout(w,1e3)}(e,(function(t){r=!0,d=t,clearTimeout(i),T[s]!==_.a.DISCONNECTED&&T[s]!==_.a.DISCONNECTING?c&&c(d,null):l.default.debug("[".concat(e.clientId,"] Request gateway list success when connection state is ").concat(T[s]))}),(function(r){if(r)return l.default.info("["+e.clientId+"] Join failed: "+r),void(n&&n(r));if(T[s]===_.a.DISCONNECTED||T[s]===_.a.DISCONNECTING)return l.default.debug("[".concat(e.clientId,"] Request gateway list falied when connection state is ").concat(T[s])),void(n&&n("OPERATION_ABORT"));l.default.debug("["+e.clientId+"] Request gateway list will be restart in "+o+"s"),i=setTimeout((function(){t(a,c)}),1e3*o),x[s]=i;var d=Object(u.getParameter)("AP_BACKOFF_MAX_TIME");o=o>=d?d:2*o}))}},d=function n(){!function(e,t){p(e,(function(n,r){if(n)return t&&t(n);l.default.debug("["+e.clientId+"] getProxyServerList: ",r),g(e,r,t)}))}(e,(function(r,o){if(r){l.default.debug("["+e.clientId+"]",r),l.default.debug("["+e.clientId+"] Request proxy will be restart in "+a+"s"),i=setTimeout((function(){n()}),1e3*a),x[s]=i;var d=Object(u.getParameter)("AP_BACKOFF_MAX_TIME");a=a>=d?d:2*a}else{clearTimeout(i);var f=o.address;e.proxyServer=f;var p={mode:"manual",url:o.address,tcpport:o.serverResponse.tcpport||"3433",udpport:o.serverResponse.udpport||"3478",username:o.serverResponse.username||"test",credential:o.serverResponse.password||Object(u.getParameter)("TURN_SERVER_PASSWORD"),forceturn:!0};p.tcpport+="",p.udpport+="",e.turnServers=[],e.turnServers.push(p),h.report.setProxyServer(f),l.default.setProxyServer(f),c(f,t)}}))};e.useProxyServer?1==e.proxyServerType?d():2==e.proxyServerType?function n(){!function(e,t){p(e,(function(n,r){return n?t&&t(n):(l.default.debug("["+e.clientId+"] getProxyServerList: ",r),t&&t(null,{address:r[0],serverResponse:{tcpport:"443",udpport:"3478",username:"test",password:"111111"}}))}))}(e,(function(r,o){if(r)return l.default.debug("["+e.clientId+"]",r),l.default.debug("["+e.clientId+"] Request proxy will be restart in "+a+"s"),i=setTimeout((function(){n()}),1e3*a),x[s]=i,void(a=a>=3600?3600:2*a);clearTimeout(i);var d=Object(u.getParameter)("PROXY_SERVER_TYPE2");e.proxyServer=d;var f={mode:"manual",url:o.address,tcpport:o.serverResponse.tcpport||"3433",udpport:o.serverResponse.udpport||"3478",username:o.serverResponse.username||"test",credential:o.serverResponse.password||"111111",forceturn:!0};f.tcpport+="",f.udpport+="",e.turnServers=[],e.turnServers.push(f),h.report.setProxyServer(d),l.default.setProxyServer(d),c(d,t)}))}():3==e.proxyServerType?function r(){b("proxy3",e,(function(o,c){if(o)return"RETRYABLE_ERROR"!==o?n&&n(o):(l.default.debug("["+e.clientId+"]",o),l.default.debug("["+e.clientId+"] Request proxy will be restart in "+a+"s"),i=setTimeout((function(){r()}),1e3*a),x[s]=i,void(a=a>=3600?3600:2*a));var d=c.gatewayServers,f=c.turnServers;clearTimeout(i);var p=Object(u.getParameter)("NGINX");e.proxyServer=p,e.turnServers=[];var v=Object(w.randomString)();f.map((function(t){var n={mode:"manual",url:t.ip,tcpport:"",udpport:t.port||"3478",username:t.username||v,credential:t.password||S()(v).toString(),forceturn:!0};n.tcpport+="",n.udpport+="",e.turnServers.push(n)})),h.report.setProxyServer(p),l.default.setProxyServer(p),t(d)}))}():4==e.proxyServerType?function r(){b("proxy4",e,(function(o,c){if(o)return"RETRYABLE_ERROR"!==o?n&&n(o):(l.default.debug("["+e.clientId+"]",o),l.default.debug("["+e.clientId+"] Request proxy will be restart in "+a+"s"),i=setTimeout((function(){r()}),1e3*a),x[s]=i,void(a=a>=3600?3600:2*a));var d=c.gatewayServers,f=c.turnServers;clearTimeout(i);var p=Object(u.getParameter)("NGINX");e.proxyServer=p,e.turnServers=[];var v=Object(w.randomString)();f.map((function(t){var n={mode:"manual",url:t.ip,tcpport:t.port||"443",udpport:"",username:t.username||v,credential:t.password||S()(v).toString(),forceturn:!1};n.tcpport+="",n.udpport+="",e.turnServers.push(n)})),h.report.setProxyServer(p),l.default.setProxyServer(p),t(d)}))}():5==e.proxyServerType?function r(){b("proxy5",e,(function(o,c){if(o)return"RETRYABLE_ERROR"!==o?n&&n(o):(l.default.debug("["+e.clientId+"]",o),l.default.debug("["+e.clientId+"] Request proxy will be restart in "+a+"s"),i=setTimeout((function(){r()}),1e3*a),x[s]=i,void(a=a>=3600?3600:2*a));var d=c.gatewayServers,f=c.turnServers;clearTimeout(i);var p=Object(u.getParameter)("NGINX");e.proxyServer=p,e.turnServers=[];var v=Object(w.randomString)();f.map((function(t){var n={mode:"manual",url:t.ip,tcpport:t.port||"443",udpport:"",username:t.username||v,credential:t.password||S()(v).toString(),forceturn:!1,useTurns:!0};n.tcpport+="",n.udpport+="",e.turnServers.push(n)})),h.report.setProxyServer(p),l.default.setProxyServer(p),t(d)}),!0)}():d():c(null,t)},C=function(e,t,n,r,i){var o=Date.now();r=r||t.stringUid;var a={sid:t.sid,opid:10,appid:t.appId,string_uid:r};return new Promise((function(i,s){Object(d.post)(e+"".concat(-1===e.indexOf("?")?"?":"&","action=stringuid"),a,(function(c){try{var u=JSON.parse(c),d=u.code}catch(i){var p="requestUserAccount failed with unexpected body "+c;return l.default.error("["+t.clientId+"]",p),s({retryable:!0,info:p,url:e,error:"UNEXPECTED_ERROR"}),n&&n.dispatchEvent({type:"error",reason:"USER_ACCOUNT_BODY_NOT_JSON"}),void h.report.reqUserAccount(a.sid,{lts:o,success:!1,serverAddress:e,stringUid:r,uid:null,extend:c,errorCode:"USER_ACCOUNT_BODY_NOT_JSON"})}if(d){var v=!1;return"INTERNAL_SERVER_ERROR"===(m=f.StringUidErrorCode[u.code%1e4]||"REQ_ACCOUNT_ERR_".concat(d))&&(v=!0),n&&n.dispatchEvent({type:"error",reason:m}),h.report.reqUserAccount(a.sid,{lts:o,success:!1,serverAddress:e,stringUid:r,uid:null,errorCode:m,extend:a}),s({retryable:v,info:p="Get String Uid Failed ["+m+"]",url:e,error:m})}var g=u.uid;if(!(g>0&&g<Math.pow(2,32))){l.default.error("["+t.clientId+"] "+"Invalid Uint Uid ".concat(r," => ").concat(g),u);var m="INVALID_UINT_UID_".concat(g);return n&&n.dispatchEvent({type:"error",reason:m}),h.report.reqUserAccount(a.sid,{lts:o,success:!1,serverAddress:e,stringUid:r,uid:null,errorCode:m,extend:a}),s({retryable:!0,error:m,info:"Get String Uid failed ["+m+"]",url:e})}i({uid:g,url:e}),h.report.reqUserAccount(a.sid,{lts:o,success:!0,serverAddress:e,stringUid:r,uid:g,errorCode:null,extend:a})}),(function(e,t){if("timeout"===e.type){var i="USER_ACCOUNT_TIMEOUT";n&&n.dispatchEvent({type:"error",reason:i}),h.report.reqUserAccount(a.sid,{lts:o,success:!1,serverAddress:t,stringUid:r,uid:null,errorCode:i,extend:a}),s({retryable:!0,info:i,url:t,error:i})}else{var c="USER_ACCOUNT_SERVER_WRONG_".concat(e.type);n&&n.dispatchEvent({type:"error",reason:c}),h.report.reqUserAccount(a.sid,{lts:o,success:!1,serverAddress:t,stringUid:r,uid:null,errorCode:c,extend:a}),s({retryable:!0,info:c,url:t,error:c})}}),{"X-Packet-Service-Type":0,"X-Packet-URI":72})}))},A=function(e,t,n){Date.now();var r,o=Object(u.getParameter)("ACCOUNT_REGISTER"),s=!1,d=Object(u.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT"),h=null,f=null,p=new Promise(function(){var p=c()(a.a.mark((function c(p,v){var g,m,y;return a.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:h=p,f=v,r=0;case 3:if(!(r<Object(u.getParameter)("ACCOUNT_REGISTER_RETRY_COUNT_MAX"))){c.next=33;break}if(!s){c.next=6;break}return c.abrupt("return");case 6:return g=o[r%o.length],m=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(g+"/api/v1"):"https://".concat(g,"/api/v1"),c.prev=8,c.delegateYield(a.a.mark((function r(){var i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.proxyServer,r.next=3,C(m,e,t,n);case 3:if(i=r.sent,!s){r.next=6;break}return r.abrupt("return",{v:void 0});case 6:s=!0,setTimeout((function(){l.default.debug("Get UserAccount Successfully",i),h(i)}),0);case 8:case"end":return r.stop()}}),r)}))(),"t0",10);case 10:if(y=c.t0,"object"!==i()(y)){c.next=13;break}return c.abrupt("return",y.v);case 13:c.next=30;break;case 15:if(c.prev=15,c.t1=c.catch(8),!s){c.next=19;break}return c.abrupt("return");case 19:if(!c.t1.retryable){c.next=27;break}return(d=Math.ceil(d*Object(u.getParameter)("ACCOUNT_REGISTER_RETRY_RATIO")))>Object(u.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")&&(d=Object(u.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")),l.default.error("".concat(c.t1.info," ").concat(c.t1.url," Will Fetch User Account in ").concat(d/1e3," seconds")),c.next=25,new Promise((function(e){setTimeout(e,d)}));case 25:c.next=30;break;case 27:l.default.error("Get UserAccount Error: ".concat(c.t1.info," ").concat(c.t1.url),c.t1.error),s=!0,f(c.t1.error);case 30:r++,c.next=3;break;case 33:case"end":return c.stop()}}),c,null,[[8,15]])})));return function(e,t){return p.apply(this,arguments)}}());return p.cancel=function(){s||(s=!0,f({info:"Request Cancelled",retryable:!1}))},p.isFinished=function(){return s},p}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,a,s=i(n(0));!function(e){e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(o||(o={})),t.AREAS=o,function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(a||(a={}));var c={ASIA:{CODE:a.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:a.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:a.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:a.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","\tuap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:a.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:a.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],NGINX:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:a.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],NGINX:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:a.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:a.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:a.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}};t.AREA_DOMAIN_MAP=c;var u={GLOBAL:{ASIA:[o.CHINA,o.JAPAN,o.INDIA],EUROPE:[],NORTH_AMERICA:[],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},l=Object.keys(u[o.GLOBAL]),d=[o.CHINA,o.NORTH_AMERICA,o.EUROPE,o.ASIA,o.JAPAN,o.INDIA,o.OCEANIA,o.SOUTH_AMERICA,o.AFRICA];t.getAreaCodeByConfig=function(e){var t=e.areaCode,n=e.excludedArea;return n?function(e,t){var n,i=[];if("string"==typeof e&&(e=[e]),t&&!e.includes(o.GLOBAL)&&(i=e),t||(i=e),t&&e.includes(o.GLOBAL)){var a=[o.GLOBAL,o.OVERSEA],s=Object.keys(c);if(t===o.GLOBAL)throw new Error("Can not set excludedArea to 'GLOBAL'");if(t===o.CHINA)i=[o.OVERSEA];else if(n=t,l.includes(n)){var h=function(e){return void 0===e&&(e=""),u[o.GLOBAL][e]||[]}(t),f=r(a,[t],h);i=s.filter((function(e){return!f.includes(e)}))}else if(function(e){var t=!1;return l.forEach((function(n){u.GLOBAL[n].includes(e)&&(t=!0)})),t}(t)){var p=function(e){void 0===e&&(e="");var t="";return l.forEach((function(n){u.GLOBAL[n].includes(e)&&(t=n)})),t}(t),v=r(a,[p,t]);i=s.filter((function(e){return!v.includes(e)}))}else i=e;i=function(e){var t=[];return d.forEach((function(n){e.includes(n)&&t.push(n)})),t.concat(e.filter((function(e){return!d.includes(e)})))}(i)}return i}(t,n):t},c.CHINA={CODE:a.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]},t.getAreaCodeByWebCS=function(e){for(var t=Object.keys(c),n=0;n<t.length;n++){var r=t[n],i=c[r];if(i.WEBCS_DOMAIN.includes(e)||i.WEBCS_DOMAIN_BACKUP_LIST.includes(e))return i.CODE===a.OVERSEA?a.ASIA+","+a.EUROPE+","+a.AFRICA+","+a.NORTH_AMERICA+","+a.SOUTH_AMERICA+","+a.OCEANIA:i.CODE}},t.getAreaCodeByArea=function(e){return e===o.OVERSEA?a.ASIA+","+a.EUROPE+","+a.AFRICA+","+a.NORTH_AMERICA+","+a.SOUTH_AMERICA+","+a.OCEANIA:a[e]},t.getAreaDomainConfig=function(e){var t={WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],NGINX:[]};return e.map((function(e){var n=c[e];if(n){var r=Object.keys(n);r?r.map((function(e){"CODE"!==e&&(t[e]=t[e].concat(n[e]))})):s.default.info(e+" is not exist")}else s.default.info(e+" is not exist")})),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return I}));var r=n(7),i=n.n(r),o=n(4),a=n(8),s=function(e){var t=Object(a.b)(e);return t.url=".",t},c=n(0),u=n(15),l=n(5),d=n(2),h=n(1),f=0,p=function(e){var t=s({});t.id=e.id,t.playerId=f++,t.destroyed=!1,t.fit=e.options&&e.options.fit,"contain"!==t.fit&&"cover"!==t.fit&&(t.fit=null),t.url=e.url,t.stream=e.stream.stream,t.peerVideoReady=!1,t.isFreeze=!1,t.freezeTimeCounterList=[],t.freezeCount=0,t.lastFreezeCount=0,t.lastTimeupdateTime=0,t.elementID=e.elementID,t.setAudioOutput=function(e,n,r){var i=t.video||t.audio;return i?i.setSinkId?void i.setSinkId(e).then((function(){return c.default.debug("["+t.id+"] "+"video ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),i==t.video&&t.audio?t.audio.setSinkId(e):Promise.resolve()})).then((function(){return c.default.debug("["+t.id+"] "+"audio ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),n&&n()})).catch((function(e){return c.default.error("["+t.id+"] VideoPlayer.setAudioOutput",e),r&&r(e)})):(c.default.error("["+t.id+"] ",l.default.WEB_API_NOT_SUPPORTED),r&&r(l.default.WEB_API_NOT_SUPPORTED)):(c.default.error("["+t.id+"] ",l.default.PLAYER_NOT_FOUND),r&&r(l.default.PLAYER_NOT_FOUND))},t.destroy=function(){c.default.debug("[".concat(t.id,"] destroy ").concat(e.stream.local?"local":"remote"," Player ").concat(t.id)),Object(u.setSrcObject)(t.video,null),Object(u.setSrcObject)(t.audio,null),t.video.load(),t.audio.load(),t.video.pause(),t.video.remove(),t.audio.remove(),t.freezeCheckInterval&&clearInterval(t.freezeCheckInterval),t.destroyed=!0,delete t.resizer,document.getElementById(t.div.id)&&t.parentNode.contains(t.div)&&t.div.remove()&&t.parentNode.removeChild(t.div),["video","audio"].forEach((function(n){t[n];var r=a[n];clearTimeout(r.playDeferTimeout),r.formerMediaState=null;var i={playerId:t.playerId,stateId:r.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"stop",updatedAt:Date.now()};a[n]=i;var o={type:"player-status-change",playerId:t.playerId,mediaType:n,status:i.status,reason:i.reason,isErrorState:!1,streamId:t.id};c.default.debug("[".concat(t.id,"] Media Player Status Change Triggered by destroy()"),o),e.stream.dispatchEvent(o),h.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:o,tag:"tracer"})()}))},t.div=document.createElement("div"),t.div.setAttribute("id","player_"+t.id),e.stream.video?t.div.setAttribute("style","width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;"):t.div.setAttribute("style","width: 100%; height: 100%; position: relative; overflow: hidden;"),t.video=document.createElement("video"),t.video.setAttribute("id","video"+t.id),e.stream.local&&!e.stream.screen?e.stream.mirror?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; transform: rotateY(180deg); object-fit: ".concat(t.fit||"cover",";")):t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";")):e.stream.video?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";")):e.stream.screen?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"contain")):t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; display: none; object-fit: ".concat(t.fit||"cover"));var n={autoplay:!0,muted:!!e.stream.local||!(!o.isSafari()&&"iOS"!==o.getBrowserOS())&&"video_element_muted",playsinline:!0,controls:!1,volume:null},r=i()({},n,e.options);!0!==r.muted||r.volume||(r.volume=0),t.video.setAttribute("autoplay",""),t.video.setAttribute("muted",""),t.video.muted=!0,t.video.autoplay=!0,r.playsinline&&t.video.setAttribute("playsinline",""),r.controls&&t.video.setAttribute("controls",""),r.contains&&(t.video.controls=!0),Number.isFinite(r.volume)&&(t.video.volume=r.volume),t.audio=document.createElement("audio"),t.audio.setAttribute("id","audio"+t.id),!0===r.muted&&t.audio.setAttribute("muted",""),!0===r.muted&&(t.audio.muted=!0),r.playsinline&&t.audio.setAttribute("playsinline",""),Number.isFinite(r.volume)&&(t.audio.volume=r.volume),void 0!==t.elementID?(document.getElementById(t.elementID).appendChild(t.div),t.container=document.getElementById(t.elementID)):(document.body.appendChild(t.div),t.container=document.body),t.parentNode=t.div.parentNode;var a={video:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()},audio:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()}};t.mediaElemExists=function(e){for(var t=e,n=0;n<Object(d.getParameter)("MEDIA_ELEMENT_EXISTS_DEPTH")&&t;n++)t=t.parentNode;return!!t};var p=function(e){return t.mediaElemExists(e)?e.paused?"paused":"play":"aborted"},v=function(e,t,n){var r=p(e),i=!0;return"paused"===r?("audio"===t&&!0===n.muted&&(i=!1),n.autoplay||(i=!1)):"play"===r?"video"===t?i=!1:!0===n.muted?e.muted&&(i=!1):e.muted||(i=!1):"aborted"===r&&(i=!1),i},g=function(n){var i,o=this;if(o===t.video?i="video":o===t.audio&&(i="audio"),i){if(n.type||c.default.error("[".concat(t.id,"] Unexpected evt"),n),"video"===i&&o.muted&&o.paused)return c.default.debug("[".concat(t.id,"] auto resume video element")),void o.play();var s=p(o);clearTimeout(a[i].playDeferTimeout),a[i].playDeferTimeout=setTimeout((function(){a[i].playDeferTimeout=null;var u=a[i],l=p(o);if(s===l){var d={playerId:t.playerId,stateId:u.stateId+1,playDeferTimeout:null,error:v(o,i,r),status:p(o),reason:n.type,updatedAt:Date.now()};if(u.status!==d.status){a[i]=d;var f={type:"player-status-change",playerId:t.playerId,mediaType:i,status:d.status,reason:d.reason,isErrorState:d.error,streamId:t.id};c.default.debug("[".concat(t.id,"] Media Player Status Change"),f),e.stream.dispatchEvent(f),h.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:f,tag:"tracer"})()}}else c.default.debug("[".concat(t.id,"] Status Change after event Triggered.")+"Stream ".concat(t.id," PlayerId ").concat(t.playerId," mediaType ").concat(i," Status ").concat(s,"=>").concat(l))}),Object(d.getParameter)("PLAYER_STATE_DEFER"))}else c.default.error("[".concat(t.id,"] Unknown media element"),o)};t.video.addEventListener("playing",(function(e){!function e(){t.video.videoWidth*t.video.videoHeight>4?c.default.debug("["+t.id+"] video dimensions:",t.video.videoWidth,t.video.videoHeight):setTimeout(e,50)}()}));var m=0,y=0,b=0;t.freezeCheckInterval=setInterval((function(){Date.now()-t.lastTimeupdateTime>500&&t.peerVideoReady?(t.isFreeze=!0,t.freezeCount+=1):t.isFreeze=!1}),500),t.video.addEventListener("playing",g),t.video.addEventListener("canplay",g),t.video.addEventListener("abort",g),t.video.addEventListener("onerror",g),t.video.addEventListener("suspend",g),t.video.addEventListener("stalled",g),t.video.addEventListener("pause",g),t.audio.addEventListener("playing",g),t.audio.addEventListener("canplay",g),t.audio.addEventListener("abort",g),t.audio.addEventListener("onerror",g),t.audio.addEventListener("suspend",g),t.audio.addEventListener("stalled",g),t.audio.addEventListener("pause",g);var _=t.audio,E="audio";if(e.stream.hasVideo()||e.stream.hasScreen())t.div.appendChild(t.video),t.div.appendChild(t.audio),o.isEdge()?t.video.srcObject=e.stream.stream:(Object(u.attachMediaStream)(t.video,e.stream.stream),Object(u.attachMediaStream)(t.audio,e.stream.stream)),t.video.addEventListener("timeupdate",(function(){var e=Date.now();if((m+=1)<10)t.lastTimeupdateTime=e;else for(e-t.lastTimeupdateTime>500&&(t.peerVideoReady?y+=e-t.lastTimeupdateTime:t.peerVideoReady=!0),b+=e-t.lastTimeupdateTime,t.lastTimeupdateTime=e;b>=6e3;)b-=6e3,t.freezeTimeCounterList.push(Math.min(6e3,y)),y-=6e3,y=Math.max(y,0)}));else{!1!==r.muted&&"video_element_muted"!==r.muted||(t.video.removeAttribute("muted"),t.video.muted=!1),t.video.removeAttribute("autoplay"),t.video.autoplay=!1,t.div.appendChild(t.video),_=t.video,E="video";var S=a.audio,w={playerId:t.playerId,stateId:S.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"audioonly",updatedAt:Date.now()};a.audio=w;var x={type:"player-status-change",playerId:t.playerId,mediaType:"audio",status:w.status,reason:w.reason,isErrorState:w.error,streamId:t.id};if(c.default.debug("[".concat(t.id,"] Media Player Status Change"),x),Promise.resolve().then((function(){return e.stream.dispatchEvent(x)})),h.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:x,tag:"tracer"})(),window.MediaStream&&(o.isSafari()||"iOS"===o.getBrowserOS())){var T=new MediaStream(e.stream.stream.getAudioTracks());Object(u.setSrcObject)(t.video,T)}else Object(u.setSrcObject)(t.video,e.stream.stream)}if(r.autoplay&&_){var I=_.play();I&&I.catch&&I.catch((function(n){if(!t.destroyed&&_){var i=a[E],o={playerId:t.playerId,stateId:i.stateId+1,playDeferTimeout:null,error:v(_,E,r),status:p(_),reason:"error",updatedAt:Date.now()};if(i.status!==o.status){c.default.debug("[".concat(t.id,"] Player ").concat(t.playerId," Status Changed Detected by promise error: ").concat(i.status,"=>").concat(o.status),n),a[E]=o;var s={type:"player-status-change",playerId:t.playerId,mediaType:E,status:o.status,reason:o.reason,isErrorState:o.error,streamId:t.id};c.default.debug("[".concat(t.id,"] Media Player Status Change"),s),e.stream.dispatchEvent(s),h.report.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:s,tag:"tracer"})()}}}))}return t.setAudioVolume=function(e){var n=parseInt(e)/100;isFinite(n)&&(n<0?n=0:n>1&&(n=1),t.video&&(t.video.volume=n),t.audio&&(t.audio.volume=n))},t},v=n(23),g=n(10),m=n(6),y=n(19),b=n(3),_=n(25),E=n(16),S=n(11),w=n.n(S),x=function(e){Object(b.checkValidString)(e,"profileName"),-1===(e=e.toLowerCase()).indexOf("_")&&(e+="_1"),Object(b.checkValidEnum)(e,"profileName",Object.keys(d.SUPPORT_RESOLUTION_LIST));var t=d.SUPPORT_RESOLUTION_LIST[e];t||(e=Object(d.getParameter)("DEFAULT_PROFILE"),t=d.SUPPORT_RESOLUTION_LIST[e]);var n={profileName:e,video:{width:t[0],height:t[1]},attributes:{resolution:"".concat(t[0],"x").concat(t[1]),minFrameRate:t[2],maxFrameRate:t[3],minVideoBW:t[4],maxVideoBW:t[5]}};return t[2]&&(n.video.frameRate=t[2]),t[6]&&t[7]&&(n.screen={width:t[0],height:t[1],frameRate:{min:t[6],max:t[7]}}),n},T=function(e){var t=Object(a.b)();if(t.params=i()({},e),t.stream=e.stream,t.url=e.url,t.onClose=void 0,t.local=!1,t.videoSource=e.videoSource,t.audioSource=e.audioSource,e.video=!(!e.videoSource&&!e.video),t.video=e.video,e.audio=!(!e.audioSource&&!e.audio),t.audio=e.audio,t.screen=!!e.screen,t.screenAudio=!!e.screenAudio,t.screenAttributes={width:1920,height:1080,maxFr:5,minFr:1},t.videoSize=e.videoSize,t.player=void 0,t.audioLevelHelper=null,e.attributes=e.attributes||{},t.attributes=e.attributes,t.microphoneId=e.microphoneId,t.cameraId=e.cameraId,t.facingMode=e.facingMode,t.inSwitchDevice=!1,t.userMuteVideo=!1,t.userMuteAudio=!1,t.peerMuteVideo=!1,t.peerMuteAudio=!1,t.lowStream=null,t.videoWidth=0,t.videoHeight=0,t.streamId=e.streamID,t.userId=null,t.uintId=e.uintUID||null,t.mirror=!1!==e.mirror,t.DTX=e.audioProcessing&&e.audioProcessing.DTX,t.audioProcessing=e.audioProcessing,t.optimizationMode=e.optimizationMode,t.highQuality=!1,t.stereo=!1,t.speech=!1,t.screen||delete t.screen,!(void 0===t.videoSize||t.videoSize instanceof Array&&4===t.videoSize.length))throw Error("Invalid Video Size");function n(){var e={};t.getVideoTrack()===this?(c.default.debug("Video Track Ended"),e.type="videoTrackEnded",e.track=this):t.getAudioTrack()===this?(c.default.debug("Audio Track Ended"),e.type="audioTrackEnded",e.track=this):c.default.debug("Detached Track ended",this.kind,this.label,this),e.type&&t.dispatchEvent(e)}return t.videoSize=[640,480,640,480],void 0!==e.local&&!0!==e.local||(t.local=!0),t.initialized=!t.local,t._streamInitID=null,function(e){e.audioMixing={audioContextInited:!1,defaultVolume:100,inEarMonitoring:"FILE",sounds:{},states:{IDLE:"IDLE",STARTING:"STARTING",BUSY:"BUSY",PAUSED:"PAUSED"},inEarMonitoringModes:{NONE:"NONE",FILE:"FILE",MICROPHONE:"MOCROPHONE",ALL:"ALL"},ctx:null,mediaStreamSource:null,mediaStreamDest:null,buffer:{}},e._initSoundIfNotExists=function(t,n){e.audioMixing.sounds[t]||(e.audioMixing.sounds[t]={soundId:t,state:"IDLE",muted:e.userMuteAudio,filePath:n,volume:e.audioMixing.defaultVolume,startAt:null,startOffset:null,pauseAt:null,pauseOffset:null,resumeAt:null,resumeOffset:null,stopAt:null,options:null,source:null})},e._initSoundIfNotExists(-1),e.loadAudioBuffer=function(t,n,r){var i=h.report.reportApiInvoke(e.sid,{callback:r,name:"Stream.loadAudioBuffer",options:arguments,tag:"tracer"});Object(b.checkValidString)(n,"url",1,1024,!1),Object(b.checkValidString)(t,"id",1,1024,!1);var o=function(t){c.default.error("[".concat(e.streamId,"] loadAudioBuffer Failed: ")+t),i(l.default.LOAD_AUDIO_FAILED)},a=new XMLHttpRequest;a.open("GET",n,!0),a.responseType="arraybuffer",a.onload=function(){if(a.status>400)o("".concat(a.status," ").concat(a.statusText));else{var n=a.response;e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.ctx.decodeAudioData(n,(function(n){e.audioMixing.buffer[t]=n,i(null)}),(function(t){c.default.error("[".concat(e.streamId,"] decodeAudioData Failed: "),t),i(t)}))}},a.onerror=function(){return o("load error")},a.ontimeout=function(){return o("timeout")},a.send()},e.createAudioBufferSource=function(t){var n=h.report.reportApiInvoke(e.sid,{name:"Stream.createAudioBufferSource",options:arguments,tag:"tracer"});if(e.audioMixing.buffer[t.id]){var r=e.audioMixing.buffer[t.id],i=e.audioMixing.ctx.createBufferSource();i.buffer=r;var a=e.audioMixing.ctx.createGain();if(i.connect(a),a.connect(e.audioMixing.mediaStreamDest),i.gainNode=a,t.loop)i.loop=!0,i.start(0,t.playTime/1e3);else if(t.cycle>1)if(Object(o.isChrome)()){i.loop=!0;var s=t.cycle*r.duration*1e3-(t.playTime||0);i.start(0,t.playTime/1e3,s/1e3)}else c.default.warning("[".concat(e.streamId,"] Cycle Param is ignored by current browser")),i.start(0,t.playTime/1e3);else i.start(0,t.playTime/1e3);var u=e.audioMixing.sounds[t.soundId];return u.source=i,e._flushAudioMixingMuteStatus(),i.addEventListener("ended",(function(){i===u.source&&e.dispatchEvent({type:"audioSourceEnded",soundId:t.soundId,source:i,sound:u})})),n(),i}return c.default.error("[".concat(e.streamId,"] "),"AUDIOBUFFER_NOT_FOUND",t.id),n(!1),!1},e.on("audioSourceEnded",(function(t){var n=t.source,r=t.sound;r&&r.state===e.audioMixing.states.BUSY&&!r.pauseAt&&(r.state=e.audioMixing.states.IDLE,r.startAt=null,r.startOffset=null,r.resumeAt=null,r.resumeOffset=null,n.gainNode&&n.gainNode.disconnect&&n.gainNode.disconnect(),n.buffer=null,e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest))})),e.clearAudioBufferSource=function(){e.audioBufferSource.forEach((function(e){e.stop()}))},e._isSoundExists=function(t){return!!e.audioMixing.sounds[t.soundId]||(c.default.error("SoundId not exists. #".concat(t.soundId)),!1)},e._initAudioContext=function(){if(e.audioMixing.audioContextInited)throw new Error("Failed to init audio context. Already inited");if(!e.stream)throw new Error("Failed to init audio context. Local Stream not initialized");e.audioMixing.ctx=Object(_.a)(),e.audioMixing.mediaStreamSource=e.audioMixing.ctx.createMediaStreamSource(e.stream),e.audioMixing.mediaStreamDest=e.audioMixing.ctx.createMediaStreamDestination(),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest);var t=e.stream.getVideoTracks()[0];if(t&&e.audioMixing.mediaStreamDest.stream.addTrack(t),e._originStream=e.stream,e._isAudioMuted()?(e._unmuteAudio(),e.stream=e.audioMixing.mediaStreamDest.stream,e._muteAudio()):e.stream=e.audioMixing.mediaStreamDest.stream,e.audioLevelHelper=null,e.pc&&e.pc.peerConnection&&e.pc.peerConnection){var n=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"audio"==e.track.kind})),r=e.audioMixing.mediaStreamDest.stream.getAudioTracks()[0];n&&n.replaceTrack&&r&&n.replaceTrack(r)}e.audioMixing.audioContextInited=!0},e._cleanupAudioMixing=function(){if(e.audioMixing.audioContextInited){for(var t in e.audioMixing.sounds){var n=e.audioMixing.sounds[t];n.state!==e.audioMixing.states.BUSY&&n.state!==e.audioMixing.states.PAUSED||e._stopOneEffect({soundId:t})}e.audioLevelHelper=null,e.audioMixing.audioContextInited=!1}},e._reloadInEarMonitoringMode=function(t){if(t){if(!e.audioMixing.inEarMonitoringModes[t])return c.default.error("[".concat(e.streamId,"] Invalid InEarMonitoringMode ").concat(t));e.audioMixing.inEarMonitoring=t}switch(e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.FILE:e.audioMixing.mediaStreamSource.connectedToDestination&&(e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!1);case e.audioMixing.inEarMonitoringModes.ALL:for(var n in e.audioMixing.sounds){var r=e.audioMixing.sounds[n];r&&r.source&&!r.source.connectedToDestination&&(r.source.gainNode.connect(e.audioMixing.ctx.destination),r.source.connectedToDestination=!0)}}switch(e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.MICROPHONE:e.audioMixing.source.forEach((function(t){t.connectedToDestination&&(t.gainNode.disconnect(e.audioMixing.ctx.destination),t.connectedToDestination=!1)}));case e.audioMixing.inEarMonitoringModes.ALL:e.audioMixing.mediaStreamSource.connectedToDestination||(e.audioMixing.mediaStreamSource.connect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!0)}},e._startAudioMixingBufferSource=function(t){e.audioMixing.audioContextInited||e._initAudioContext();var n={soundId:t.soundId,id:t.filePath,loop:t.loop,cycle:t.cycle,playTime:t.playTime||0},r=t.replace,i=e.createAudioBufferSource(n);return i.sound=e.audioMixing.sounds[t.soundId],i?(i.addEventListener("ended",e._audioMixingFinishedListener,{once:!0}),e._reloadInEarMonitoringMode(),r&&e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.mediaStreamDest),i):null},e._stopAudioMixingBufferSource=function(t){var n=e.audioMixing.sounds[t.soundId].source;return n?(n.removeEventListener("ended",e._audioMixingFinishedListener),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest),n.stop(),n.gainNode&&n.gainNode.disconnect&&n.gainNode.disconnect(),n.buffer=null,n):null},e._flushAudioMixingMuteStatus=function(t){for(var n in e.audioMixing.sounds){var r=e.audioMixing.sounds[n];r&&(void 0!==t&&(r.muted=!!t),r.source&&(r.muted?r.source.gainNode.gain.value=0:r.source.gainNode.gain.value=r.volume/100))}},e._handleAudioMixingInvalidStateError=function(t,n,r){var i=e.audioMixing.sounds[n.soundId],o=-1===n.soundId?"INVALID_AUDIO_MIXING_STATE":"INVALID_PLAY_EFFECT_STATE";c.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(o,", state is ").concat(i.state)),r&&r(o)},e._handleAudioMixingNoSourceError=function(t,n,r){e.audioMixing.sounds[n.soundId].state=e.audioMixing.states.IDLE;var i=-1===n.soundId?"NO_AUDIO_MIXING_SOURCE":"NO_EFFECT_SOURCE";c.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(i)),r&&r(i)},e._getOneEffectStates=function(t){var n=e.audioMixing.sounds[t.soundId];return function(){return n?{state:n.state,startAt:n.startAt,resumeAt:n.resumeAt,pauseOffset:n.pauseOffset,pauseAt:n.pauseAt,resumeOffset:n.resumeOffset,stopAt:n.stopAt,duration:e._getOneEffectDuration(t),position:e._getOneEffectCurrentPosition(t)}:{}}},e._audioMixingFinishedListener=function(){var t=this.sound;t.state===e.audioMixing.states.IDLE&&e.audioMixing.buffer[t.options.filePath]&&!t.options.cacheResource&&(c.default.debug("Recycled buffer ".concat(t.options.filePath)),delete e.audioMixing.buffer[t.options.filePath]),-1===t.soundId&&e.dispatchEvent({type:"audioMixingFinished"})},e._playOneEffect=function(t,n){Object(b.checkValidObject)(t,"options");var r=t.soundId,i=(t.filePath,t.cacheResource);if(t.cycle,t.loop,t.playTime,t.replace,Object(o.isSafari)()&&Object(o.getBrowserVersion)()<12){var a="BROWSER_NOT_SUPPORT";return c.default.error("[".concat(e.streamId,"] Cannot _playOneEffect: "),a),n(a)}e.audioMixing.audioContextInited||e._initAudioContext(),e._initSoundIfNotExists(r);var s=e.audioMixing.sounds[r];if(s.state===e.audioMixing.states.IDLE){if(void 0!==t.cycle&&!t.cycle>0)return a="Invalid Parmeter cycle: "+t.cycle,c.default.error("[".concat(e.streamId,"] ").concat(r),a),n(a);if(Object(b.isEmpty)(i)&&(t.cacheResource=!0),s.state=e.audioMixing.states.STARTING,s.options=t,e.audioMixing.buffer[t.filePath]){var u=e._startAudioMixingBufferSource(t);if(u)return s.source=u,s.startAt=Date.now(),s.resumeAt=null,s.pauseOffset=null,s.pauseAt=null,s.resumeOffset=null,s.stopAt=null,s.startOffset=t.playTime||0,s.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),n(null);s.state=e.audioMixing.states.IDLE;var l="CREATE_BUFFERSOURCE_FAILED";if(n)return n(l);c.default.error("[".concat(e.streamId,"] "),l)}else e.loadAudioBuffer(t.filePath,t.filePath,(function(r){if(r)s.state=e.audioMixing.states.IDLE,n?n(r):c.default.error("[".concat(e.streamId,"] "),r);else{var i=e._startAudioMixingBufferSource(t);if(i)return s.source=i,s.startAt=Date.now(),s.resumeAt=null,s.pauseOffset=null,s.pauseAt=null,s.resumeOffset=null,s.stopAt=null,s.startOffset=t.playTime||0,s.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),n(null);if(s.state=e.audioMixing.states.IDLE,r="CREATE_BUFFERSOURCE_FAILED",n)return n(r);c.default.error("[".concat(e.streamId,"] "),r)}}))}else e._handleAudioMixingInvalidStateError("_playEffect",t,n)},e._stopOneEffect=function(t,n){var r=e.audioMixing.sounds[t.soundId];return e._isSoundExists(t)?r.state===e.audioMixing.states.BUSY||r.state===e.audioMixing.states.PAUSED?(e._stopAudioMixingBufferSource(t),r.stopAt=Date.now(),r.state=e.audioMixing.states.IDLE,e.audioMixing.buffer[r.options.filePath]&&!r.options.cacheResource&&(c.default.debug("Recycled buffer ".concat(r.options.filePath)),delete e.audioMixing.buffer[r.options.filePath]),void(n&&n(null))):void e._handleAudioMixingInvalidStateError("_stopOneEffect",t,n):n("SOUND_NOT_EXISTS")},e._pauseOneEffect=function(t,n){var r=e.audioMixing.sounds[t.soundId];if(r.state===e.audioMixing.states.BUSY)return e._stopAudioMixingBufferSource(t)?(r.pauseAt=Date.now(),r.state=e.audioMixing.states.PAUSED,r.resumeAt?r.pauseOffset=r.pauseAt-r.resumeAt+r.resumeOffset:r.pauseOffset=r.pauseAt-r.startAt+r.startOffset,n&&n(null)):void e._handleAudioMixingNoSourceError("_pauseOneEffect",t,n);e._handleAudioMixingInvalidStateError("_pauseOneEffect",t,n)},e._resumeOneEffect=function(t,n){var r=e.audioMixing.sounds[t.soundId];if(r.state===e.audioMixing.states.PAUSED){var i={soundId:t.soundId,filePath:r.options.filePath,cycle:r.options.cycle,loop:r.options.loop,playTime:r.pauseOffset,replace:r.options.replace},o=e._startAudioMixingBufferSource(i);if(!o){var a="CREATE_BUFFERSOURCE_FAILED";return n(a),void c.default.error("[".concat(e.streamId,"] "),a)}r.source=o,r.resumeAt=Date.now(),r.resumeOffset=r.pauseOffset,r.state=e.audioMixing.states.BUSY,r.pauseAt=null,r.pauseOffset=null,n(null)}else e._handleAudioMixingInvalidStateError("_resumeOneEffect",t,n)},e._getOneEffectDuration=function(t){var n=e.audioMixing.sounds[t.soundId];return n.options&&n.options.filePath&&e.audioMixing.buffer[n.options.filePath]?1e3*e.audioMixing.buffer[n.options.filePath].duration:null},e._getOneEffectCurrentPosition=function(t,n){var r=e.audioMixing.sounds[t.soundId];return r.state===e.audioMixing.states.PAUSED?r.pauseOffset%e._getOneEffectDuration(t):r.state===e.audioMixing.states.BUSY?r.resumeAt?(Date.now()-r.resumeAt+r.resumeOffset)%e._getOneEffectDuration(t):(Date.now()-r.startAt+r.startOffset)%e._getOneEffectDuration(t):void(n&&e._handleAudioMixingInvalidStateError("_getOneEffectCurrentPosition",t))},e._setOneEffectPosition=function(t,n,r){var i=e.audioMixing.sounds[t.soundId];if(i.state===e.audioMixing.states.BUSY){if(!e._stopAudioMixingBufferSource(t))return void e._handleAudioMixingNoSourceError("_setOneEffectPosition",t,r);var o={soundId:t.soundId,filePath:i.options.filePath,loop:i.options.loop,cycle:i.options.cycle,playTime:n},a=e._startAudioMixingBufferSource(o);if(!a){var s="CREATE_BUFFERSOURCE_FAILED";return r&&r(s),void c.default.error("[".concat(e.streamId,"] "),s)}i.source=a,i.startAt=Date.now(),i.startOffset=n,i.resumeAt=null,i.resumeOffset=null,i.pauseOffset=null,i.pauseAt=null}else{if(i.state!==e.audioMixing.states.PAUSED)return void e._handleAudioMixingInvalidStateError("_setOneEffectPosition",t,r);i.pauseOffset=n}r&&r(null)},e.startAudioMixing=function(t,n){var r=h.report.reportApiInvoke(e.sid,{callback:function(t){if(t)return n&&n(t);e.dispatchEvent({type:"audioMixingPlayed"}),n&&n(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.startAudioMixing",options:t});Object(b.checkValidObject)(t,"options");var o=t.filePath,a=t.cacheResource,s=t.cycle,c=t.loop,u=t.playTime,l=t.replace;Object(b.checkValidString)(o,"filePath",1,Object(d.getParameter)("FILEPATH_LENMAX"),!1),Object(b.checkValidNumber)(u,"playTime",0,1e8),!Object(b.isEmpty)(s)&&Object(b.checkValidNumber)(s,"cycle"),!Object(b.isEmpty)(c)&&Object(b.checkValidBoolean)(c,"loop"),!Object(b.isEmpty)(l)&&Object(b.checkValidBoolean)(l,"replace"),!Object(b.isEmpty)(a)&&Object(b.checkValidBoolean)(a,"cacheResource");var f=i()({soundId:-1},t);e._playOneEffect(f,r)},e.stopAudioMixing=function(t){var n=h.report.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.stopAudioMixing"});e._stopOneEffect({soundId:-1},n)},e.pauseAudioMixing=function(t){var n=h.report.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.pauseAudioMixing"});return e._pauseOneEffect({soundId:-1},n)},e.resumeAudioMixing=function(t){var n=h.report.reportApiInvoke(e.sid,{callback:function(n,r){if(n)return t&&t(n);e.dispatchEvent({type:"audioMixingPlayed"}),t&&t(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.resumeAudioMixing"});e._resumeOneEffect({soundId:-1},n)},e.adjustAudioMixingVolume=function(t){var n=h.report.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.adjustAudioMixingVolume",options:arguments,tag:"tracer"});Object(b.checkValidNumber)(t,"volume",0,100),e.audioMixing.sounds[-1].volume=t,e._flushAudioMixingMuteStatus(),n()},e.getAudioMixingDuration=function(){var t=h.report.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingDuration"}),n=e._getOneEffectDuration({soundId:-1});return t(null,n),n},e.getAudioMixingCurrentPosition=function(){var t=h.report.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingCurrentPosition"}),n=e._getOneEffectCurrentPosition({soundId:-1},!0);return t(null,n),n},e.setAudioMixingPosition=function(t,n){var r=h.report.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.setAudioMixingPosition"});Object(b.checkValidNumber)(t,"position",0,1e8),e._setOneEffectPosition({soundId:-1},t,r)},e.playEffect=function(t,n){var r=h.report.reportApiInvoke(e.sid,{callback:function(t){if(t)return n&&n(t);e.dispatchEvent({type:"effectPlayed"}),n&&n(null)},name:"Stream.playEffect",options:t});Object(b.checkValidObject)(t,"options");var i=t.soundId,o=t.filePath,a=t.cycle;Object(b.checkValidNumber)(i,"soundId",1,1e4),Object(b.checkValidString)(o,"filePath",0,Object(d.getParameter)("FILEPATH_LENMAX"),!1),!Object(b.isEmpty)(a)&&Object(b.checkValidNumber)(a,"cycle"),e._playOneEffect(t,r)},e.stopEffect=function(t,n){var r=h.report.reportApiInvoke(e.sid,{callback:n,getStates:e._getOneEffectStates({soundId:t}),name:"Stream.stopEffect"});Object(b.checkValidNumber)(t,"soundId",1,1e4),e._stopOneEffect({soundId:t},r)},e.stopAllEffects=function(t){var n=h.report.reportApiInvoke(e.sid,{callback:t,name:"Stream.stopAllEffect"}),r=!1,i=0,o=0,a=function(e){r||(e?(n(e),r=!0):i+=1,i===o&&(n(null),r=!0))};for(var s in e.audioMixing.sounds){var c=e.audioMixing.sounds[s];-1!==c.soundId&&(c.state!==e.audioMixing.states.BUSY&&c.state!==e.audioMixing.states.PAUSED||(o++,e._stopOneEffect({soundId:s},a)))}o||n(null)},e.preloadEffect=function(t,n,r){var i=h.report.reportApiInvoke(e.sid,{callback:r,options:arguments,tag:"tracer",name:"Stream.preloadEffect"});Object(b.checkValidNumber)(t,"soundId",1,1e4),Object(b.checkValidString)(n,"filePath",1,Object(d.getParameter)("FILEPATH_LENMAX"),!1),e._initSoundIfNotExists(t,n),e.audioMixing.buffer[n]?i(null):e.loadAudioBuffer(n,n,i)},e.unloadEffect=function(t,n){var r=h.report.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.unloadEffect"});Object(b.checkValidNumber)(t,"soundId",1,1e4);var i=e.audioMixing.sounds[t];if(!i){var o="SOUND_NOT_EXISTS";return c.default.error(o,t),void r(o)}var a=i.options?i.options.filePath:i.filePath;if(a)delete e.audioMixing.buffer[a],delete e.audioMixing.sounds[t],r(null);else{var s="SOUND_BUFFER_NOT_FOUND";c.default.error(s,t),r(s)}},e.pauseEffect=function(t,n){var r=h.report.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.pauseEffect"});return e._pauseOneEffect({soundId:t},r)},e.pauseAllEffects=function(t){var n=h.report.reportApiInvoke(e.sid,{callback:t,name:"Stream.pauseAllEffects"}),r=!1,i=0,o=0,a=function(e){r||(e?(n(e),r=!0):i+=1,i===o&&(n(null),r=!0))};for(var s in e.audioMixing.sounds)"-1"!==s&&e.audioMixing.sounds[s].state===e.audioMixing.states.BUSY&&(o++,e._pauseOneEffect({soundId:s},a));o||n(null)},e.resumeEffect=function(t,n){Object(b.checkValidNumber)(t,"soundId",1,1e4);var r=h.report.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.resumeEffect"});return e._resumeOneEffect({soundId:t},r)},e.resumeAllEffects=function(t){var n=h.report.reportApiInvoke(e.sid,{callback:t,name:"Stream.resumeAllEffects"}),r=!1,i=0,o=0,a=function(e){r||(e?(n(e),r=!0):i+=1,i===o&&(n(null),r=!0))};for(var s in e.audioMixing.sounds)"-1"!==s&&e.audioMixing.sounds[s].state===e.audioMixing.states.PAUSED&&(o++,e._resumeOneEffect({soundId:s},a));o||n(null)},e.getEffectsVolume=function(){var t=[];for(var n in e.audioMixing.sounds){var r=e.audioMixing.sounds[n];r&&"-1"!==n&&t.push({soundId:parseInt(n),volume:r.volume})}return t},e.setEffectsVolume=function(t,n){var r=h.report.reportApiInvoke(e.sid,{name:"Stream.setEffectsVolume",options:arguments,tag:"tracer",callback:n});for(var i in Object(b.checkValidNumber)(t,"volume",0,100),e.audioMixing.defaultVolume=t,e.audioMixing.sounds){var o=e.audioMixing.sounds[i];"-1"!==i&&(o.volume=t)}e._flushAudioMixingMuteStatus(),r(null)},e.setVolumeOfEffect=function(t,n,r){var i=h.report.reportApiInvoke(e.sid,{name:"Stream.setVolumeOfEffect",options:arguments,tag:"tracer",callback:r});Object(b.checkValidNumber)(t,"soundId",0,1e4),Object(b.checkValidNumber)(n,"volume",0,100),e._initSoundIfNotExists(t),e.audioMixing.sounds[t].volume=n,e._flushAudioMixingMuteStatus(),i(null)}}(t),E.a.addVideoEffectCapability(t),function(e,t){e.videoConstraint={},t.cameraId&&(e.videoConstraint.deviceId={exact:t.cameraId}),t.facingMode&&(e.videoConstraint.facingMode=t.facingMode),e.videoSize&&(e.videoConstraint.width=e.videoSize[0],e.videoConstraint.height=e.videoSize[1]),Object(o.isLegacyChrome)()||(e.videoConstraint.frameRate=30),e.audioConstraint={},t.microphoneId&&(e.audioConstraint.deviceId={exact:t.microphoneId}),Object(o.isLegacyChrome)()||e.audioProcessing&&(void 0!==e.audioProcessing.AGC&&(Object(o.isFireFox)()?e.audioConstraint.autoGainControl=e.audioProcessing.AGC:Object(o.isChrome)()&&(e.audioConstraint.googAutoGainControl=e.audioProcessing.AGC,e.audioConstraint.googAutoGainControl2=e.audioProcessing.AGC)),void 0!==e.audioProcessing.AEC&&(e.audioConstraint.echoCancellation=e.audioProcessing.AEC),void 0!==e.audioProcessing.ANS&&(Object(o.isFireFox)()?e.audioConstraint.noiseSuppression=e.audioProcessing.ANS:Object(o.isChrome)()&&(e.audioConstraint.googNoiseSuppression=e.audioProcessing.ANS))),e.screenConstraint={},t.sourceId&&(e.screenConstraint.sourceId=t.sourceId),t.extensionId&&Object(o.isChrome)()?(e.screenConstraint.extensionId=t.extensionId,e.screenConstraint.mandatory={chromeMediaSource:"desktop",maxWidth:e.screenAttributes.width,maxHeight:e.screenAttributes.height,maxFrameRate:e.screenAttributes.maxFr,minFrameRate:e.screenAttributes.minFr}):(e.screenConstraint.mediaSource="screen",e.screenConstraint.width=e.screenAttributes.width,e.screenConstraint.height=e.screenAttributes.height,e.screenConstraint.frameRate={ideal:e.screenAttributes.maxFr,max:e.screenAttributes.maxFr}),t.mediaSource&&(e.screenConstraint.mediaSource=t.mediaSource),e.setVideoResolution=function(n){var r=h.report.reportApiInvoke(e.sid,{name:"Stream.setVideoResolution",options:arguments,tag:"tracer"});if(!(n instanceof Array)){var o=x(n+="");return o&&o.video?(e.videoConstraint=i()(e.videoConstraint,{width:{ideal:o.video.width},height:{ideal:o.video.height}}),t.attributes.resolution=o.attributes.resolution,(a=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&a.applyConstraints?(c.default.debug("setVideoResolution applyConstraints",e.videoConstraint),a.applyConstraints(e.videoConstraint).then(r).catch(r)):r(),!0):(r("NO_PROFILE_".concat(n)),!1)}var a,s=n[0],u=n[1];e.videoConstraint=i()(e.videoConstraint,{width:{ideal:s},height:{ideal:u}}),t.attributes.resolution="".concat(s,"x").concat(u),(a=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&a.applyConstraints?(c.default.debug("setVideoResolution applyConstraints",e.videoConstraint),E.a.disableVideoEffect(e).then((function(){return a.applyConstraints(e.videoConstraint).then(r).catch(r)})).then((function(){return E.a.restoreVideoEffect(e)}))):r()},e.setVideoFrameRate=function(t){var n=h.report.reportApiInvoke(e.sid,{name:"Stream.setVideoFrameRate",options:arguments,tag:"tracer"});if(Object(o.isFireFox)())return n("FIREFOX_NOT_SUPPORTED"),!1;if("object"===w()(t)&&t instanceof Array&&t.length>1){e.videoConstraint=i()(e.videoConstraint,{frameRate:t[0]}),e.attributes.minFrameRate=t[0],e.attributes.maxFrameRate=t[1];var r=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return r&&r.applyConstraints?(c.default.debug("setVideoFrameRate applyConstraints",e.videoConstraint),r.applyConstraints(e.videoConstraint).then(n).catch(n)):n(),!0}return n("INVALID_PARAM_".concat(JSON.stringify(t))),!1},e.setVideoBitRate=function(n){var r=h.report.reportApiInvoke(e.sid,{name:"Stream.setVideoBitRate",options:arguments,tag:"tracer"});return"object"===w()(n)&&n instanceof Array&&n.length>1?(t.attributes.minVideoBW=n[0],t.attributes.maxVideoBW=n[1],e.connectionSpec&&(e.connectionSpec.minVideoBW=n[0],e.connectionSpec.maxVideoBW=n[1]),e.pc&&e.pc.renegotiate&&e.pc.renegotiate(),r(),!0):(r("INVALID_PARAM_".concat(JSON.stringify(n))),!1)},e.setScreenBitRate=function(t){var n=h.report.reportApiInvoke(e.sid,{name:"Stream.setScreenBitRate",options:arguments,tag:"tracer"});return"object"===w()(t)&&t instanceof Array&&t.length>1?(e.screenAttributes.minVideoBW=t[0],e.screenAttributes.maxVideoBW=t[1],n(),!0):(n("INVALID_PARAM_".concat(JSON.stringify(t))),!1)},e.setScreenProfile=function(t){var n=h.report.reportApiInvoke(e.sid,{name:"Stream.setScreenProfile",options:arguments,tag:"tracer"});Object(b.checkValidEnum)(t,"profile",["480p_1","480p_2","720p_1","720p_2","1080p_1","1080p_2"]);var r=x(t);return r&&r.screen?(e.screenConstraint.mandatory?(e.screenConstraint.mandatory.maxWidth=r.screen.width,e.screenConstraint.mandatory.maxHeight=r.screen.height,r.screen.frameRate&&r.screen.frameRate.min&&r.screen.frameRate.max&&(e.screenConstraint.mandatory.minFrameRate=r.screen.frameRate.min,e.screenConstraint.mandatory.maxFrameRate=r.screen.frameRate.max)):e.screenConstraint=i()(e.screenConstraint,r.screen),e.screenAttributes.width=r.screen.width,e.screenAttributes.height=r.screen.height,e.screenAttributes.minFr=r.screen.frameRate.min,e.screenAttributes.maxFr=r.screen.frameRate.max,n(),!0):(n("NO_SCREEN_PROFILE_".concat(JSON.stringify(t))),!1)},e.setVideoProfileCustom=function(t){var n=h.report.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.setVideoResolution(t[0]),e.setVideoFrameRate([t[1],t[1]]),e.setVideoBitRate([t[2],t[2]]),n()},e.setVideoProfileCustomPlus=function(n){var r=h.report.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.setVideoResolution([n.width,n.height]),t.attributes.resolution="".concat(n.width,"x").concat(n.height),e.setVideoFrameRate([n.framerate,n.framerate]),e.setVideoBitRate([n.bitrate,n.bitrate]),r()},e.setVideoProfile=function(n){var r=h.report.reportApiInvoke(e.sid,{name:"Stream.setVideoProfile",options:arguments,tag:"tracer"}),a=x(n);if(!a){var s="Invalid Profile ".concat(n);throw new Error(s)}if(e.profile=n,a&&a.video){e.profile=a.profileName,e.videoConstraint=i()(e.videoConstraint,a.video),e.connectionSpec&&a.attributes.maxVideoBW&&(e.connectionSpec.minVideoBW=a.attributes.minVideoBW,e.connectionSpec.maxVideoBW=a.attributes.maxVideoBW),Object(o.isEdge)()&&(e.videoConstraint.frameRate.max=60),Object(o.isFireFox)()&&(e.videoConstraint.frameRate=30),t.attributes=i()(t.attributes,a.attributes),e.pc&&e.pc.renegotiate&&e.pc.renegotiate();var u=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return u&&u.applyConstraints?(c.default.debug("setVideoProfile applyConstraints",e.videoConstraint),E.a.disableVideoEffect(e).then((function(){return u.applyConstraints(e.videoConstraint)})).then((function(){return E.a.restoreVideoEffect(e)})).then((function(t){return new Promise((function(n,i){r(t),setTimeout((function(){Object(g.vsResHack)(e.stream,(function(t,r){e.videoWidth=t,e.videoHeight=r,n()}),(function(t){c.default.warning("[".concat(e.streamId,"] vsResHack failed: "),t),i()}))}),2500)}))})).catch(r)):r(),!0}return r("INVALID_VIDEO_PROFILE_".concat(n)),!1},e.setAudioProfile=function(t){var n=h.report.reportApiInvoke(e.sid,{name:"Stream.setAudioProfile",options:arguments,tag:"tracer"});Object(b.checkValidEnum)(t,"profile",["speech_low_quality","speech_standard","music_standard","standard_stereo","high_quality","high_quality_stereo"]),e.audioProfile=t;var r=function(e){var t=d.AUDIO_PROFILE_SETTINGS[e]||d.AUDIO_PROFILE_SETTINGS.default;return{highQuality:t[0],stereo:t[1],speech:t[2],lowQuality:t[3]}}(t);return e.highQuality=r.highQuality,e.stereo=r.stereo,e.speech=r.speech,e.lowQuality=r.lowQuality,e.stereo&&Object(o.isChrome)()&&(e.audioConstraint.googAutoGainControl=!1,e.audioConstraint.googAutoGainControl2=!1,e.audioConstraint.echoCancellation=!1,e.audioConstraint.googNoiseSuppression=!1),n(),!0},e.setVideoEncoderConfiguration=function(t){Object(b.checkValidObject)(t,"config");var n=h.report.reportApiInvoke(e.sid,{name:"Stream.setVideoEncoderConfiguration",options:t,tag:"tracer"});t.resolution&&(Object(b.checkValidNumber)(t.resolution.width,"config.resolution.width"),Object(b.checkValidNumber)(t.resolution.height,"config.resolution.height"),e.setVideoResolution([t.resolution.width,t.resolution.height])),t.frameRate&&(Object(b.checkValidNumber)(t.frameRate.min,"config.frameRate.min"),Object(b.checkValidNumber)(t.frameRate.max,"config.frameRate.max"),e.setVideoFrameRate([t.frameRate.min,t.frameRate.max])),t.bitrate&&(Object(b.checkValidNumber)(t.bitrate.min,"config.bitrate.min",1,1e7),Object(b.checkValidNumber)(t.bitrate.max,"config.bitrate.max",1,1e7),e.setVideoBitRate([t.bitrate.min,t.bitrate.max])),n()},e.getSupportedProfile=function(t){var n=h.report.reportApiInvoke(e.sid,{name:"Stream.getSupportedProfile",options:arguments,tag:"tracer",callback:t});if(!e.local){var r="ONLY_LOCAL_STREAM_SUPPORTED";return c.default.error(r),n(r)}if(!e.stream)return r="STREAM_NOT_INIT",c.default.error(r),n(r);if(!e.stream.getVideoTracks)return r="TRACK_NOT_SUPPORT",c.default.error(r),n(r);var i=e.stream.getVideoTracks()[0];if(!i)return r="NO_VIDEO_TRACK_FOUND",c.default.error(r),n(r);if(!i.getCapabilities)return r="GETCAPABILITY_NOT_SUPPORT",c.default.error(r),n(r);var o=function(e){return Object.keys(d.SUPPORT_RESOLUTION_LIST).filter((function(t){var n=d.SUPPORT_RESOLUTION_LIST[t],r=["width","height","frameRate"];for(var i in r){var o=r[i];if(e[o]&&n[i]){if("number"==typeof e[o].max&&e[o].max<n[i])return!1;if("number"==typeof e[o].min&&e[o].min>n[i])return!1}}return!0})).reverse()}(i.getCapabilities());return n(null,o)}}(t,e),t.getId=function(){return t.streamId},t.getUserId=function(){return t.userId},t.checkDualStreamEnabled=function(){return!(!Object(d.getParameter)("DUALSTREAM_OPERATION_CHECK")||!t.isDualStream)&&(c.default.error("Operation not permitted: ".concat("DUAL_STREAM_ENABLED")),"DUAL_STREAM_ENABLED")},t.setUserId=function(e){var n=h.report.reportApiInvoke(t.sid,{name:"Stream.setUserId",options:arguments,tag:"tracer"});t.userId&&c.default.warning("[".concat(t.streamId,"] Stream.userId ").concat(t.userId," => ").concat(e)),t.userId=e,n()},t.getAttributes=function(){return e.screen?t.screenAttributes:e.attributes},t.hasAudio=function(){return!!t.audio},t.hasVideo=function(){return!!t.video},t.hasScreen=function(){return!!t.screen},t.hasScreenAudio=function(){return!!t.screenAudio},t.isVideoOn=function(){return(t.hasVideo()||t.hasScreen())&&!t.userMuteVideo},t.isAudioOn=function(){return t.hasAudio()&&!t.userMuteAudio},t.init=function(r,i){var o=h.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return i&&i(e);r&&r(t)},name:"Stream.init",options:arguments,tag:"tracer"}),a=((new Date).getTime(),arguments[2]);if(void 0===a&&(a=2),!0===t.initialized)return o({type:"warning",msg:"STREAM_ALREADY_INITIALIZED"});if(!0!==t.local)return o({type:"warning",msg:"STREAM_NOT_LOCAL"});var s=Math.random().toString().slice(3);t._streamInitID=s,t.videoSource?t.videoName="videoSource":t.video&&(t.videoName=y.a.searchDeviceNameById(e.cameraId)||"default"),t.audioSource?t.audioName="audioSource":t.audio&&(t.audioName=y.a.searchDeviceNameById(e.microphoneId)||"default"),t.screen&&(t.screenName=e.extensionId||"default");try{if(e.audio||e.video||e.screen||e.screenAudio||e.videoSource||e.audioSource){c.default.debug("[".concat(t.streamId,"] Requested access to local media"));var u={streamId:t.streamId};e.videoSource?u.videoSource=e.videoSource:e.screen?u.screen=t.screenConstraint:e.video&&(u.video=t.videoConstraint),e.audioSource?u.audioSource=e.audioSource:e.screenAudio?u.screenAudio=e.screenAudio:e.audio&&(u.audio=t.audioConstraint),Object(v.b)(u,(function(r){if(u.screenAudio&&!r.getAudioTracks()[0]&&c.default.warning("[".concat(t.streamId,"] Audio sharing is not selected")),u.screen&&c.default.debug("[".concat(t.streamId,"] User has granted access to screen sharing")),(u.video||u.audio)&&c.default.debug("[".concat(t.streamId,"] User has granted access to local media")),null===t._streamInitID){r.getTracks().forEach((function(e){e.stop()}));var i={type:"error",msg:"STREAM_IS_CLOSED",info:"stream is closed and cannot be initialized"};return c.default.error(t.streamId,i.info),void o(i)}if(t._streamInitID!==s)return r.getTracks().forEach((function(e){e.stop()})),i={type:"error",msg:"ABORT_OTHER_INIT",info:"stream initialization is aborted because of another stream.init"},c.default.error(t.streamId,i.info),void o(i);t.dispatchEvent({type:"accessAllowed"}),t.stream=r,t.initialized=!0,t.reloadDeviceName(),t.hasVideo()&&Object(g.vsResHack)(r,(function(e,n){t.videoWidth=e,t.videoHeight=n}),(function(e){c.default.warning("[".concat(t.streamId,"] vsResHack failed: "),e)})),e.screen&&t.stream&&t.stream.getVideoTracks()[0]&&(t.stream.getVideoTracks()[0].onended=function(){t.dispatchEvent({type:"stopScreenSharing"})}),t.stream&&t.stream.getTracks&&t.stream.getTracks().forEach((function(r){r&&!r.onended&&(r.onended=n),"video"===r.kind&&e.optimizationMode&&(r.contentHint=e.optimizationMode,r.contentHint===e.optimizationMode&&c.default.debug("[".concat(t.streamId,"] set content hint to"),e.optimizationMode))})),o()}),(function(e){var n={type:"error",info:null};switch(e&&(n.msg=e.name||e.code||e,e.message&&(n.info=e.message),e.code&&(n.info?n.info+=". "+e.code:n.info=" "+e.code),e.constraint&&(n.info?n.info+=". Constraint: "+e.constraint:n.info="constraint: "+e.constraint)),n.msg){case"Starting video failed":case"TrackStartError":if(t.videoConstraint&&(delete t.videoConstraint.width,delete t.videoConstraint.height),a>0)return void setTimeout((function(){t.init((function(e){return o(e)}),o,a-1)}),1);n.msg="MEDIA_OPTION_INVALID";break;case"DevicesNotFoundError":n.msg="DEVICES_NOT_FOUND";break;case"NotSupportedError":n.msg="NOT_SUPPORTED";break;case"PermissionDeniedError":case"InvalidStateError":n.msg="PERMISSION_DENIED",t.dispatchEvent({type:"accessDenied"});break;case"PERMISSION_DENIED":case"NotAllowedError":t.dispatchEvent({type:"accessDenied"});break;case"ConstraintNotSatisfiedError":n.msg="CONSTRAINT_NOT_SATISFIED";break;default:n.msg||(n.msg="UNDEFINED")}var r="Media access ".concat(n.msg).concat(n.info?": "+n.info:"");c.default.error("[".concat(t.streamId,"] "),r),o(n)}))}else o({type:"warning",msg:"STREAM_HAS_NO_MEDIA_ATTRIBUTES"})}catch(e){c.default.error("[".concat(t.streamId,"] Stream init: "),e),o({type:"error",msg:e.message||e})}},t.reloadDeviceName=function(){if(t.stream){if(t.stream.getVideoTracks){var e=t.stream.getVideoTracks()[0];e&&e.label&&(t.videoName=e.label)}if(t.stream.getAudioTracks){var n=t.stream.getAudioTracks()[0];n&&n.label&&(t.audioName=n.label)}}},t.close=function(){var e=h.report.reportApiInvoke(null,{name:"Stream.close",options:arguments,tag:"tracer"});if(c.default.debug("[".concat(t.streamId,"] Close stream with id"),t.streamId),t._originStream)try{t._originStream.getTracks().map((function(e){return e.stop()}))}catch(e){}if(void 0!==t.stream){var n=t.stream.getTracks();for(var r in n)n.hasOwnProperty(r)&&(n[r].stop(),n[r].onended=null);!t.isLowStream&&t.local?E.a.disableVideoEffect(t).then((function(){t.stream=void 0})):(t.stream&&t.stream.clean&&t.stream.clean(),t.stream=void 0)}if(t._originStream){for(var r in n=t._originStream.getTracks())n.hasOwnProperty(r)&&(n[r].stop(),n[r].onended=null);!t.isLowStream&&t.local?E.a.disableVideoEffect(t).then((function(){t._originStream=void 0})):(t._originStream&&t._originStream.clean&&t._originStream.clean(),t._originStream=void 0)}Object(o.isSafari)()&&t.pc&&t.pc.peerConnection&&t.pc.peerConnection.removeTrack&&t.pc.peerConnection.getSenders&&t.pc.peerConnection.getSenders().forEach((function(e){e&&(c.default.debug("[".concat(t.streamId,"] Remove Track"),e),t.pc.peerConnection.removeTrack(e))})),t.local&&(t.initialized=!1),t._streamInitID=null,t._onAudioMute=void 0,t._onAudioUnmute=void 0,t._onVideoMute=void 0,t._onVideoUnmute=void 0,t.lowStream&&t.lowStream.close(),t.player&&t.player.video&&t.player.video.srcObject&&(t.player.video.srcObject=null),t.player&&t.player.audio&&t.player.audio.srcObject&&(t.player.audio.srcObject=null),e()},t.enableAudio=function(){var e,n=h.report.reportApiInvoke(t.sid,{name:"Stream.enableAudio",options:arguments,tag:"tracer"});return c.default.deprecate("[".concat(t.streamId,"] Stream.enableAudio is deprecated and will be removed in the future. Use Stream.unmuteAudio instead")),t.userMuteAudio||c.default.warning("[".concat(t.streamId,"] User already enableAudio")),t.userMuteAudio=!1,n(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.disableAudio=function(){var e=h.report.reportApiInvoke(t.sid,{name:"Stream.disableAudio",options:arguments,tag:"tracer"});c.default.deprecate("[".concat(t.streamId,"] Stream.disableAudio is deprecated and will be removed in the future. Use Stream.muteAudio instead")),t.userMuteAudio&&c.default.warning("[".concat(t.streamId,"] User already disableAudio")),t.userMuteAudio=!0;var n=t._muteAudio();return e(null,n),n},t.enableVideo=function(){var e,n=h.report.reportApiInvoke(t.sid,{name:"Stream.enableVideo",options:arguments,tag:"tracer"});return c.default.deprecate("[".concat(t.streamId,"] Stream.enableVideo is deprecated and will be removed in the future. Use Stream.unmuteVideo instead")),t.userMuteVideo||c.default.warning("[".concat(t.streamId,"] User already enableVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),n(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.disableVideo=function(){var e=h.report.reportApiInvoke(t.sid,{name:"Stream.disableVideo",options:arguments,tag:"tracer"});c.default.deprecate("[".concat(t.streamId,"] Stream.disableVideo is deprecated and will be removed in the future. Use Stream.muteVideo instead")),t.userMuteVideo&&c.default.warning("[".concat(t.streamId,"] User already disableVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var n=t._muteVideo();return e(null,n),n},t.unmuteAudio=function(){var e,n=h.report.reportApiInvoke(t.sid,{name:"Stream.unmuteAudio",options:arguments,tag:"tracer"});return t.userMuteAudio||c.default.warning("[".concat(t.streamId,"] User already unmuteAudio")),t.userMuteAudio=!1,n(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.muteAudio=function(){var e=h.report.reportApiInvoke(t.sid,{name:"Stream.muteAudio",options:arguments,tag:"tracer"});t.userMuteAudio&&c.default.warning("[".concat(t.streamId,"] User already muteAudio")),t.userMuteAudio=!0;var n=t._muteAudio();return e(null,n),n},t.unmuteVideo=function(){var e,n=h.report.reportApiInvoke(t.sid,{name:"Stream.unmuteVideo",options:arguments,tag:"tracer"});return t.userMuteVideo||c.default.warning("[".concat(t.streamId,"] User already unmuteVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),n(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.muteVideo=function(){var e=h.report.reportApiInvoke(t.sid,{name:"Stream.muteVideo",options:arguments,tag:"tracer"});t.userMuteVideo&&c.default.warning("[".concat(t.streamId,"] User already muteVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var n=t._muteVideo();return e(null,n),n},t._unmuteAudio=function(){return c.default.debug("[".concat(t.streamId,"] Unmuted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!1),!(!t.hasAudio()||!t.initialized||void 0===t.stream||!0===t.stream.getAudioTracks()[0].enabled)&&(t._onAudioUnmute&&t._onAudioUnmute(),t.pc&&(t.pc.isAudioMute=!1),t.stream.getAudioTracks()[0].enabled=!0,!0)},t._isAudioMuted=function(){if(t.stream&&t.hasAudio()){var e=t.stream.getAudioTracks();return e.length>0&&!e[0].enabled}return!1},t._isVideoMuted=function(){if(t.stream&&t.hasVideo()){var e=t.stream.getVideoTracks();return e.length>0&&!e[0].enabled}return!1},t._muteAudio=function(){return c.default.debug("[".concat(t.streamId,"] Muted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!0),!!(t.hasAudio()&&t.initialized&&void 0!==t.stream&&t.stream.getAudioTracks()[0].enabled)&&(t._onAudioMute&&t._onAudioMute(),t.pc&&(t.pc.isAudioMute=!0),t.stream.getAudioTracks()[0].enabled=!1,t.sid&&h.report.audioSendingStopped(t.sid,{succ:!0,reason:"muteAudio"}),!0)},t._unmuteVideo=function(){return c.default.debug("[".concat(t.streamId,"] Unmuted video stream with id"),t.streamId),!(!t.initialized||void 0===t.stream||!t.stream.getVideoTracks().length||!0===t.stream.getVideoTracks()[0].enabled)&&(t._onVideoUnmute&&t._onVideoUnmute(),t.pc&&(t.pc.isVideoMute=!1),t.stream.getVideoTracks()[0].enabled=!0,t.lowStream&&t.lowStream._unmuteVideo(),!0)},t._muteVideo=function(){return c.default.debug("[".concat(t.streamId,"] Muted video stream with id"),t.streamId),!!(t.initialized&&void 0!==t.stream&&t.stream.getVideoTracks().length&&t.stream.getVideoTracks()[0].enabled)&&(t._onVideoMute&&t._onVideoMute(),t.pc&&(t.pc.isVideoMute=!0),t.stream.getVideoTracks()[0].enabled=!1,t.lowStream&&t.lowStream._muteVideo(),t.sid&&h.report.videoSendingStopped(t.sid,{succ:!0,reason:"muteVideo"}),!0)},t.addTrack=function(r){if(t.audio&&"audio"===r.kind)c.default.warning("already added audio track");else if(t.video&&"video"===r.kind)c.default.warning("already added video track");else{var i=h.report.reportApiInvoke(t.sid,{name:"Stream.addTrack",options:arguments,tag:"tracer"});if(t.pc&&t.pc.addTrack(r,t.stream),"audio"==r.kind){t._cleanupAudioMixing();var o=new MediaStream;t.userMuteAudio&&(r.enabled=!1),o.addTrack(r);var a=t.stream.getVideoTracks()[0];a&&o.addTrack(a),t.audio=!0,e.audio=!0,t.stream=o,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream)}else t.userMuteVideo&&(r.enabled=!1),t.stream.addTrack(r),t.video=!0,e.video=!0;r.onended||(r.onended=n),i()}},t.removeTrack=function(n){if(n)if(t.audio||"audio"!==n.kind)if(t.video||"video"!==n.kind){var r=h.report.reportApiInvoke(t.sid,{name:"Stream.removeTrack",options:arguments,tag:"tracer"});t.pc&&t.pc.removeTrack(n,t.stream),t.stream.removeTrack(n),t._cleanupAudioMixing(),"audio"===n.kind?(t.audio=!1,e.audio=!1):(t.video=!1,e.video=!1),t.audioLevelHelper=null,"live"==n.readyState&&(n.stop(),c.default.debug("[".concat(t.streamId,"] Track ").concat(n.kind," Stopped"))),r()}else c.default.warning("already removed video track");else c.default.warning("already removed audio track");else c.default.warning("track doesn't exist.")},t.setAudioOutput=function(e,n,r){var i=h.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Stream.setAudioOutput",options:arguments,tag:"tracer"});return Object(b.isValidString)(e,1,255)?(t.audioOutput=e,t.player?void t.player.setAudioOutput(e,(function(){return i()}),i):i()):(c.default.error("[".concat(t.streamId,"] setAudioOutput Invalid Parameter"),e),i(l.default.INVALID_PARAMETER))},t.play=function(e,n,r){"function"==typeof n&&(r=n,n=null),c.default.debug("[".concat(t.streamId,"] play()."),e,n);var i=h.report.reportApiInvoke(t.sid,{name:"Stream.play",options:arguments,tag:"tracer",callback:r});if(Object(b.checkValidString)(e,"elementID"),Object(b.isEmpty)(n)||(Object(b.isEmpty)(n.fit)||Object(b.checkValidEnum)(n.fit,"fit",["cover","contain"]),Object(b.isEmpty)(n.muted)||Object(b.checkValidBoolean)(n.muted,"muted")),t.player)c.default.warning("[".concat(t.streamId,"] Stream.play(): Stream is already playing. Fallback to resume stream")),t.resume().then((function(){i(null)})).catch(i);else{t.elementID=e,t.playOptions=n,!t.local||t.video||t.screen?(t.player=new p({id:t.getId(),stream:t,elementID:e,options:n}),t.local&&E.a.applyEffectInPlayer(t)):t.hasAudio()&&(t.player=new p({id:t.getId(),stream:t,elementID:e,options:n}));var o={video:null,audio:null};t.on("player-status-change",(function e(n){if(o[n.mediaType]=n,o.video&&o.audio)if(t.removeEventListener("player-status-change",e),o.video.isErrorState||o.audio.isErrorState){var r=o.video.isErrorState?o.video:o.audio;i({isErrorState:!0,status:r.status,reason:r.reason,video:o.video,audio:o.audio})}else"aborted"===o.video.status&&"aborted"===o.audio.status?i({status:"aborted",reason:"stop",video:o.video,audio:o.audio}):i(null)})),t.audioOutput&&t.player.setAudioOutput(t.audioOutput),void 0!==t.audioLevel&&t.player.setAudioVolume(t.audioLevel),t._flushAudioMixingMuteStatus(!1)}},t.stop=function(){var e=h.report.reportApiInvoke(t.sid,{name:"Stream.stop",options:arguments,tag:"tracer"});c.default.debug("[".concat(t.streamId,"] Stop stream player with id "),t.streamId),t.player?(E.a.removeEffectFromLocalPlayer(t),t.player.destroy(),delete t.player):c.default.error("[".concat(t.streamId,"] Stream.stop(): Stream is not playing")),t._flushAudioMixingMuteStatus(!0),e()},t.isPlaying=function(){return!!t.player},t.isPaused=function(){return!!t.player&&(!!(t.player.video&&t.player.video.paused&&t.player.mediaElemExists(t.player.video))||!!(t.player.audio&&t.player.audio.paused&&t.player.mediaElemExists(t.player.audio)))},t.resume=function(){var e,n;return t.player?(t.player.video&&t.player.video.play&&(e=t.player.video.play()),e=e||Promise.resolve(),t.player.audio&&t.player.audio.play&&(n=t.player.audio.play()),n=n||Promise.resolve(),Promise.all([e,n])):Promise.reject("NO_PLAYER_FOUND")},t.getVideoTrack=function(){var e=h.report.reportApiInvoke(t.sid,{name:"Stream.getVideoTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getVideoTracks){var n=t.stream.getVideoTracks()[0];if(n)return c.default.info("[".concat(t.streamId,"] getVideoTrack"),n),e(),n}c.default.info("[".concat(t.streamId,"] getVideoTrack None")),e(null,"getVideoTrack None")},t.getAudioTrack=function(){var e=h.report.reportApiInvoke(t.sid,{name:"Stream.getAudioTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getAudioTracks){var n=t.stream.getAudioTracks()[0];if(n)return c.default.info("[".concat(t.streamId,"] getAudioTracks"),n),e(),n}c.default.info("[".concat(t.streamId,"] getAudioTracks None")),e(null,"getAudioTracks None")},t._hasVideoTracks=function(){return!!(t.stream&&t.stream.getVideoTracks&&t.stream.getVideoTracks()[0])},t._hasAudioTracks=function(){return!!(t.stream&&t.stream.getAudioTracks&&t.stream.getAudioTracks()[0])},t._replaceMediaStreamTrack=function(e,n,r){if(t.stream){if("video"==e.kind){if(o=t.stream.getVideoTracks()[0])return t.userMuteVideo&&(e.enabled=!1),t.stream.removeTrack(o),t.stream.addTrack(e),c.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(e.kind," SUCCESS")),"live"==o.readyState&&(o.stop(),c.default.debug("[".concat(t.streamId,"] Track ").concat(o.kind," Stopped"))),n&&n();var i="MEDIASTREAM_TRACK_NOT_FOUND";return c.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),r(i)}if("audio"==e.kind){var o;if(o=t.stream.getAudioTracks()[0]){t.userMuteAudio&&(e.enabled=!1);var a=new MediaStream;a.addTrack(e);var s=t.stream&&t.stream.getVideoTracks()[0];return s&&a.addTrack(s),t.stream=a,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream),c.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack SUCCESS")),"live"==o.readyState&&(o.stop(),c.default.debug("[".concat(t.streamId,"] Track ").concat(o.kind," Stopped"))),n&&n()}return i="MEDIASTREAM_TRACK_NOT_FOUND",c.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),r(i)}return i="INVALID_TRACK_TYPE",c.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(i," ").concat(e.kind)),r&&r(i)}return i="NO_STREAM_FOUND",c.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(i)),r&&r(i)},t.replaceTrack=function(e,r,i){var o=h.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return i&&i(e);r&&r(t)},name:"Stream.replaceTrack",options:arguments,tag:"tracer"});return e&&e.kind?(t._cleanupAudioMixing(),e.onended||(e.onended=n),t.pc&&t.pc.hasSender&&t.pc.hasSender(e.kind)?void t.pc.replaceTrack(e,(function(){return c.default.debug("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," SUCCESS")),t._replaceMediaStreamTrack(e,(function(e){return o(null,e)}),o)}),(function(n){return c.default.error("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," Failed ").concat(n)),o(n)})):t._replaceMediaStreamTrack(e,(function(e){return o(null,e)}),o)):o("INVALID_TRACK")},t.setAudioVolume=function(e){var n=h.report.reportApiInvoke(t.sid,{name:"Stream.setAudioVolume",options:arguments,tag:"tracer"});Object(b.checkValidNumber)(e,"level",0,100),t.audioLevel=e,t.player&&t.player.setAudioVolume(e),n()},t.getStats=function(e,n,r){var a=[];a.push(t._getPCStats(r)),a.push(new Promise((function(e){var n={};t.pc&&t.pc.isSubscriber?null!==window.navigator.userAgent.match("Firefox")&&(Object(m.b)(n,"videoReceiveResolutionHeight",t.videoHeight),Object(m.b)(n,"videoReceiveResolutionWidth",t.videoWidth)):t.pc&&!t.pc.isSubscriber&&((Object(o.isSafari)()||Object(o.isFireFox)())&&(Object(m.b)(n,"videoSendResolutionHeight",t.videoHeight),Object(m.b)(n,"videoSendResolutionWidth",t.videoWidth)),(Object(o.isSafari)()||Object(o.isFireFox)())&&t.uplinkStats&&Object(m.b)(n,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),e(n)}))),a.push(new Promise((function(e){var n={};return t.traffic_stats&&t.pc&&t.pc.isSubscriber?(Object(m.b)(n,"accessDelay",t.traffic_stats.access_delay),Object(m.b)(n,"endToEndDelay",t.traffic_stats.e2e_delay),Object(m.b)(n,"videoReceiveDelay",t.traffic_stats.video_delay),Object(m.b)(n,"audioReceiveDelay",t.traffic_stats.audio_delay)):t.traffic_stats&&t.pc&&!t.pc.isSubscriber&&Object(m.b)(n,"accessDelay",t.traffic_stats.access_delay),e(n)}))),Promise.all(a).then((function(n){for(var r={},o=n.length-1;o>=0;o--){var a=n[o];i()(r,a)}e&&setTimeout(e.bind(t,r),0)})).catch((function(e){n&&setTimeout(n.bind(t,e),0)}))},t._getPCStats=function(e){return new Promise((function(n,r){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats)return r("PEER_CONNECTION_NOT_ESTABLISHED");t.pc.getStats((function(e){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats)return r("PEER_CONNECTION_STATE_CHANGE");var i=t.pc.isSubscriber?Object(m.c)(e):Object(m.a)(e);return n(i)}),e)})).then((function(e){return t.pc.isSubscriber?(Object(o.isFireFox)()||Object(o.isSafari)())&&(e.videoReceiveResolutionHeight&&"0"!==e.videoReceiveResolutionHeight||e.videoReceiveResolutionWidth&&"0"!==e.videoReceiveResolutionWidth||(Object(m.b)(e,"videoReceiveResolutionHeight",t.videoHeight),Object(m.b)(e,"videoReceiveResolutionWidth",t.videoWidth))):((Object(o.isSafari)()||Object(o.isFireFox)())&&(e.videoSendResolutionHeight&&"0"!==e.videoSendResolutionHeight||e.videoSendResolutionWidth&&"0"!==e.videoSendResolutionWidth||(Object(m.b)(e,"videoSendResolutionHeight",t.videoHeight),Object(m.b)(e,"videoSendResolutionWidth",t.videoWidth))),(Object(o.isSafari)()||Object(o.isFireFox)())&&t.uplinkStats&&Object(m.b)(e,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),Promise.resolve(e)}))},t.getAudioLevel=function(){if(t.audioLevelHelper)return t.audioLevelHelper.getAudioLevel();if(t.stream){if(0!==t.stream.getAudioTracks().length)return t.audioLevelHelper=new g.audioLevelHelper(t.stream),t.audioLevelHelper.getAudioLevel();c.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no audio trace in stream"))}else c.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no stream exist"))},t.setVideoProfile("480p_1"),t._switchVideoDevice=function(e,n,r){if(e===t.cameraId)return n&&n();var o={video:i()({},t.videoConstraint,{deviceId:{exact:e}}),audio:!1};c.default.debug("[".concat(t.streamId,"] ").concat(o)),Object(v.b)(o,(function(i){try{var o=function(){t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID,t.playOptions)),t.cameraId=e,t.videoConstraint.deviceId={exact:e},t.userMuteVideo&&(t.stream.getVideoTracks()[0].enabled=!1),E.a.restoreVideoEffect(t).then((function(){n&&n()}))};E.a.disableVideoEffect(t).then((function(){var e=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(e=!0),e?t.replaceTrack(i.getVideoTracks()[0],o,r):(t.removeTrack(t.stream.getVideoTracks()[0]),t.addTrack(i.getVideoTracks()[0]),o())}))}catch(e){return r&&r(e)}}),(function(e){return r&&r(e)}))},t._switchAudioDevice=function(e,n,r){if(e===t.microphoneId)return n&&n();var o={video:!1,audio:i()({},t.audioConstraint,{deviceId:{exact:e}})};c.default.debug("[".concat(t.streamId,"] "),o);var a=t.stream.getAudioTracks()[0];a&&a.stop(),Object(v.b)(o,(function(i){var o=function(){t._cleanupAudioMixing(),t.userMuteAudio&&(t.stream.getAudioTracks()[0].enabled=!1),t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID,t.playOptions)),t.microphoneId=e,t.audioConstraint.deviceId={exact:e},n&&n()};try{var a=!1;window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack&&(a=!0),a?t.replaceTrack(i.getAudioTracks()[0],o,r):(t.removeTrack(t.stream.getAudioTracks()[0]),t.addTrack(i.getAudioTracks()[0]),o())}catch(e){return r&&r(e)}}),(function(e){return r&&r(e)}))},t.switchDevice=function(e,n,r,i){var o=h.report.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return i&&i(e);r&&r(t)},name:"Stream.switchDevice",options:arguments,tag:"tracer"});Object(b.checkValidString)(n,"deviceId");var a=function(){return t.inSwitchDevice=!1,o()},s=function(e){t.inSwitchDevice=!1,c.default.error("[".concat(t.streamId,"] "),e),o(e)};if(t.inSwitchDevice)return o("Device switch is in process.");if(t.inSwitchDevice=!0,!t.local)return s("Only the local stream can switch the device.");if(t.screen&&"video"===e)return s("The device cannot be switched during screen-sharing.");if(!t.video&&"video"===e)return s("Video track not exist.");if(!t.audio&&"audio"===e)return s("Audio track not exist.");if(t.videoSource||t.audioSource)return s("The device cannot be switched when using videoSource or audioSource.");var u=!1;for(var l in t.audioMixing.sounds)if(t.audioMixing.sounds[l].state!==t.audioMixing.states.IDLE){u=!0;break}if(t.audioMixing.audioContextInited&&u)return s("The device cannot be switched when using audio Mixing.");y.a.getDeviceById(n,(function(){if("video"===e)t._switchVideoDevice(n,a,s);else{if("audio"!==e)return s("Invalid type.");t._switchAudioDevice(n,a,s)}}),(function(){return s("The device does not exist.")}))},t},I=function(e){var t=h.report.reportApiInvoke(null,{name:"createStream",options:arguments,tag:"tracer",getStates:function(){return{audioTrackEnable:e&&e.audioSource?e.audioSource.enabled:null,videoTrackEnable:e&&e.videoSource?e.videoSource.enabled:null}}});Object(b.checkValidObject)(e,"StreamSpec");var n=e.streamID,r=e.audio,i=e.video,o=e.screen,a=e.screenAudio,s=(e.audioSource,e.videoSource,e.cameraId),u=e.facingMode,l=e.microphoneId,d=e.mirror,f=e.extensionId,p=e.mediaSource,v=e.audioProcessing,m=e.optimizationMode;if(!Object(b.isEmpty)(n)&&!Object(g.is32Uint)(n)&&!Object(b.isValidString)(n,1,255))throw new Error("[String streamID] Length of the string: [1,255]. ASCII characters only. [Number streamID] The value range is Uint32");if(Object(b.checkValidBoolean)(r,"audio"),Object(b.checkValidBoolean)(i,"video"),Object(b.isEmpty)(o)||Object(b.checkValidBoolean)(o,"screen"),Object(b.isEmpty)(a)||Object(b.checkValidBoolean)(a,"screenAudio"),Object(b.isEmpty)(s)||Object(b.checkValidString)(s,"cameraId",0,255,!1),Object(b.isEmpty)(u)||Object(b.checkValidEnum)(u,"facingMode",["user","environment","left","right"]),Object(b.isEmpty)(l)||Object(b.checkValidString)(l,"microphoneId",0,255,!1),Object(b.isEmpty)(f)||Object(b.checkValidString)(f,"extensionId"),Object(b.isEmpty)(p)||Object(b.checkValidEnum)(p,"mediaSource",["screen","application","window"]),Object(b.isEmpty)(d)||Object(b.checkValidBoolean)(d,"mirror"),!Object(b.isEmpty)(v)){var y=v.AGC,_=v.AEC,E=v.ANS;Object(b.isEmpty)(y)||Object(b.checkValidBoolean)(y,"AGC"),Object(b.isEmpty)(_)||Object(b.checkValidBoolean)(_,"AEC"),Object(b.isEmpty)(E)||Object(b.checkValidBoolean)(E,"ANS")}Object(b.isEmpty)(m)||Object(b.checkValidEnum)(m,"optimizationMode",["detail","motion"]),c.default.debug("Create stream"),!0===a&&!0===r&&c.default.warning("Do not set both 'screenAudio' and 'audio' to true at the same time"),e.screen&&!m&&(e.optimizationMode="detail");var S=T(e);return t(),S}},function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return S}));var r=n(4),i=n(7),o=n.n(i),a=n(12),s=n.n(a),c=n(17),u=n.n(c),l=n(0),d=n(15),h=n(2);function f(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){a=!0,i=e})),f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){a=!0,i=e})),f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=n(50),y=n.n(m),b=n(26),_=(n(5),103),E=function(e){var t={};if(t.clientId=e.clientId,e.session_id=_+=1,"undefined"==typeof window||!window.navigator)throw l.default.error("["+t.streamId+"]["+t.clientId+"]Publish/subscribe video/audio streams not supported yet"),new Error("NON_BROWSER_ENV_DETECTED");return null!==window.navigator.userAgent.match("Firefox")?(t.browser="mozilla",t=function(e){var t={},n=(mozRTCPeerConnection,mozRTCSessionDescription),r=!1;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[]},e.iceServers instanceof Array?e.iceServers.map((function(e){0===e.url.indexOf("stun:")&&t.pc_config.iceServers.push({url:e.url})})):(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServers&&(e.turnServers instanceof Array?e.turnServers.map((function(e){e.udpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.udpport+"?transport=udp"}),"string"==typeof e.tcpport&&""!==e.tcpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.tcpport+"?transport=tcp"}),!0===e.forceturn&&(t.pc_config.iceTransportPolicy="relay")})):l.default.error("[".concat(t.clientId,"] turnServers is not a array")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={offerToReceiveAudio:e.audio,offerToReceiveVideo:e.video,mozDontOfferDataChannel:!0},t.roapSessionId=103,t.peerConnection=new d.RTCPeerConnection(t.pc_config),t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,l.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(h.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,r,i,o;r=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),i=n.match(/a=candidate:.+typ\shost.+\r\n/),o=n.match(/a=candidate:.+typ\srelay.+\r\n/),null===r&&null===i&&null===o||void 0!==t.ice||!t.iceCandidateTimer||(clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1},t.checkMLineReverseInSDP=function(e){return!(!~e.indexOf("m=audio")||!~e.indexOf("m=video"))&&e.indexOf("m=audio")>e.indexOf("m=video")},t.reverseMLineInSDP=function(e){var t=e.split("m=audio"),n=t[1].split("m=video"),r="m=video"+n[1],i="m=audio"+n[0];return t[0]+r+i},t.processSignalingMessage=function(r){var i,o=JSON.parse(r);t.incomingMessage=o,"new"===t.state?"OFFER"===o.messageType?(o.sdp=m(o.sdp),i={sdp:o.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new n(i),(function(){l.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){l.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+o.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===o.messageType?(o.sdp=m(o.sdp),o.sdp=o.sdp.replace(/ generation 0/g,""),o.sdp=o.sdp.replace(/ udp /g," UDP "),-1!==o.sdp.indexOf("a=group:BUNDLE")?(o.sdp=o.sdp.replace(/a=group:BUNDLE audio video/,"a=group:BUNDLE sdparta_0 sdparta_1"),o.sdp=o.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),o.sdp=o.sdp.replace(/a=mid:video/,"a=mid:sdparta_1")):(o.sdp=o.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),o.sdp=o.sdp.replace(/a=mid:video/,"a=mid:sdparta_0")),i={sdp:o.sdp,type:"answer"},e.screen&&"detail"===e.optimizationMode&&(l.default.debug("[".concat(t.client,"] remove screen share abs ext")),o.sdp=y(i.sdp)),t.peerConnection.setRemoteDescription(new n(i),(function(){l.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){l.default.info("["+t.clientId+"]setRemoteDescription failed: "+e)})),t.state="established"):"pr-answer"===o.messageType?(i={sdp:o.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new n(i),(function(){l.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){l.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)}))):"offer"===o.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+o.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===o.messageType?(i={sdp:o.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new n(i),(function(){l.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){l.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+o.messageType+" in state "+t.state))},t.setRtpSenderParameters=function(){var e=u()(s.a.mark((function e(n){var r,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.peerConnection.getSenders(),i=r.find((function(e){return"video"===e.track.kind}))){e.next=4;break}return e.abrupt("return");case 4:return(o=i.getParameters()).degradationPreference=n,e.prev=6,l.default.debug("[".concat(t.clientId,"] setParameters"),o),e.next=10,i.setParameters(o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),l.default.debug("[".concat(t.clientId,"] setParameters failed, ignore"));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();var i={id:"",type:"",mediaType:"opus",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},o={id:"",type:"",mediaType:"",googCodecName:e.codec?e.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},a={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},c={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesDecoded:"0"},f=0,p=0,g=0;t.getVideoRelatedStats=function(e){t.peerConnection.getStats().then((function(n){var r,i=v(n.values());try{for(i.s();!(r=i.n()).done;){var o=r.value;if(t.isSubscriber){if(("inbound-rtp"===o.type||"inboundrtp"===o.type)&&"video"===o.mediaType){if(!t.lastReport)return void(t.lastReport=o);e&&e({browser:"firefox",mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:Math.round(o.framerateMean)+"",frameRateDecoded:o.framesDecoded-t.lastReport.framesDecoded+"",bytesReceived:o.bytesReceived+"",packetsReceived:o.packetsReceived+"",packetsLost:o.packetsLost+""}),t.lastReport=o}}else if(("outbound-rtp"===o.type||"outboundrtp"===o.type)&&"video"===o.mediaType){if(!t.lastReport)return void(t.lastReport=o);e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:Math.round(o.framerateMean)+"",frameRateSent:o.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=o}}}catch(e){i.e(e)}finally{i.f()}}))},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then((function(n){var r,i=v(n.values());try{for(i.s();!(r=i.n()).done;){var o=r.value;t.isSubscriber&&("inbound-rtp"!==o.type&&"inboundrtp"!==o.type||"audio"!==o.mediaType||e&&e({browser:"firefox",mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:o.packetsLost+"",frameReceived:o.packetsReceived+"",googJitterReceived:o.jitter+"",bytesReceived:o.bytesReceived+"",packetsReceived:o.packetsReceived+"",packetsLost:o.packetsLost+""}))}}catch(e){i.e(e)}finally{i.f()}}))},t.getStatsRate=function(e){t.getStats((function(t){t.forEach((function(e){})),e(t)}))},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats((function(n,r){t.filterStatsCache=n,t.originStatsCache=r,t.lastTimeGetStats=Date.now(),e&&e(n,r)}))},t._getStats=function(n){t.peerConnection.getStats().then((function(r){var s,u=[],l=v(r.values());try{for(l.s();!(s=l.n()).done;){var d=s.value;u.push(d),"outbound-rtp"!==d.type&&"outboundrtp"!==d.type||"video"!==d.mediaType||-1!==d.id.indexOf("rtcp")||(o.id=d.id,o.type=d.type,o.mediaType=d.mediaType,o.bytesSent=d.bytesSent?d.bytesSent+"":"0",o.packetsSent=d.packetsSent?d.packetsSent+"":"0",o.googPlisReceived=d.pliCount?d.pliCount+"":"0",o.googNacksReceived=d.nackCount?d.nackCount+"":"0",o.googFirsReceived=d.firCount?d.firCount+"":"0",o.googFrameRateSent=d.framerateMean?Math.round(d.framerateMean)+"":"0"),"outbound-rtp"!==d.type&&"outboundrtp"!==d.type||"audio"!==d.mediaType||-1!==d.id.indexOf("rtcp")||(i.id=d.id,i.type=d.type,i.mediaType=d.mediaType,i.bytesSent=d.bytesSent?d.bytesSent+"":"0",i.packetsSent=d.packetsSent?d.packetsSent+"":"0",e.agoraStream.local&&(i.audioInputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==d.type&&"inboundrtp"!==d.type||"audio"!==d.mediaType||d.isRemote||-1!==d.id.indexOf("rtcp")||(a.id=d.id,a.type=d.type,a.mediaType=d.mediaType,a.bytesReceived=d.bytesReceived?d.bytesReceived+"":"0",a.packetsLost=d.packetsLost?d.packetsLost+"":"0",a.packetsReceived=d.packetsReceived?d.packetsReceived+"":"0",a.googJitterReceived=d.jitter?d.jitter+"":"0",e.agoraStream.local||(a.audioOutputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==d.type&&"inboundrtp"!==d.type||"video"!==d.mediaType||d.isRemote||-1!==d.id.indexOf("rtcp")||(c.id=d.id,c.type=d.type,c.mediaType=d.mediaType,c.bytesReceived=d.bytesReceived?d.bytesReceived+"":"0",c.googFrameRateReceived=d.framerateMean?Math.round(d.framerateMean)+"":"0",c.googFramesDecoded=d.framesDecoded?d.framesDecoded+"":"0",Date.now()-g>=1e3?(c.googFrameRateDecoded=(d.framesDecoded-f)/((Date.now()-g)/1e3),c.googFrameRateDecoded=Math.round(Math.max(0,c.googFrameRateDecoded)),g=Date.now(),p=c.googFrameRateDecoded,f=d.framesDecoded,c.googFrameRateDecoded=c.googFrameRateDecoded.toString()):c.googFrameRateDecoded=p.toString(),c.packetsLost=d.packetsLost?d.packetsLost+"":"0",c.packetsReceived=d.packetsReceived?d.packetsReceived+"":"0",c.googJitterBufferMs=d.jitter?d.jitter+"":"0",c.googNacksSent=d.nackCount?d.nackCount+"":"0",c.googPlisSent=d.pliCount?d.pliCount+"":"0",c.googFirsSent=d.firCount?d.firCount+"":"0"),-1!==d.id.indexOf("outbound_rtcp_video")&&(o.packetsLost=d.packetsLost?d.packetsLost+"":"0")}}catch(e){l.e(e)}finally{l.f()}var h=[o,i,a,c];h.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),n(h,u)}),(function(e){l.default.error("["+t.clientId+"]"+e)}))},t.addStream=function(e){r=!0,t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){if(t.actionNeeded){if("new"===t.state||"established"===t.state)r&&(t.mediaConstraints=void 0),t.peerConnection.createOffer((function(e){if(e.sdp=m(e.sdp),e.sdp=e.sdp.replace(/a=extmap:1 http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/,"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"),e.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(e),t.state="preparing-offer",void t.markActionNeeded();l.default.debug("["+t.clientId+"]Not sending a new offer")}),(function(e){l.default.debug("["+t.clientId+"]Ups! create offer failed ",e)}),t.mediaConstraints);else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(e.isCloudProxy3&&e.onNoIceCandidate&&e.onNoIceCandidate(),l.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(h.getParameter)("SHIM_CANDIDATE")?(l.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):l.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;l.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(){l.default.debug("["+t.clientId+"]Ups! Something went wrong")}));else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;var n=t.peerConnection.localDescription.sdp;t.sendMessage("ANSWER",n),t.state="established"}else t.debug("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,n){var r={};r.messageType=e,r.sdp=n,"OFFER"===e?(r.offererSessionId=t.sessionId,r.answererSessionId=t.otherSessionId,r.seq=t.sequenceNumber+=1,r.tiebreaker=Math.floor(429496723*Math.random()+1)):(r.offererSessionId=t.incomingMessage.offererSessionId,r.answererSessionId=t.sessionId,r.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(r))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,r){var i=t._getSender(e.kind);if(!i)return r("NO_SENDER_FOUND");try{i.replaceTrack(e)}catch(e){return r&&r(e)}setTimeout((function(){return n&&n()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)};var m=function(t){var n;if(e.video&&e.maxVideoBW&&(null==(n=t.match(/m=video.*\r\n/))&&(n=t.match(/m=video.*\n/)),n&&n.length>0)){var r=n[0]+"b=TIAS:"+1e3*e.maxVideoBW+"\r\n";t=t.replace(n[0],r)}return e.audio&&e.maxAudioBW&&(null==(n=t.match(/m=audio.*\r\n/))&&(n=t.match(/m=audio.*\n/)),n&&n.length>0)&&(r=n[0]+"b=TIAS:"+1e3*e.maxAudioBW+"\r\n",t=t.replace(n[0],r)),t},y=function(e){return(e=e.replace(/a=.*abs-send-time\r\n/g,"")).replace(/a=.*goog-remb\r\n/g,"")};return t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t}(e)):"iOS"===r.getBrowserOS()||r.isSafari()?(l.default.debug("["+t.streamId+"]["+t.clientId+"]Safari"),(t=function(e){var t={},n=d.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[],bundlePolicy:"max-bundle"},t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServers&&(e.turnServers instanceof Array?e.turnServers.map((function(e){e.udpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.udpport+"?transport=udp"}),"string"==typeof e.tcpport&&""!==e.tcpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.tcpport+"?transport=tcp"}),!0===e.forceturn&&(t.pc_config.iceTransportPolicy="relay")})):l.default.error("[".concat(t.clientId,"] turnServers is not a array")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}},t.roapSessionId=103;try{t.pc_config.sdpSemantics=Object(h.getParameter)("PLAN"),t.peerConnection=new n(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new n(t.pc_config,t.con)}t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(h.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,r,i,o;r=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),i=n.match(/a=candidate:.+typ\shost.+\r\n/),o=n.match(/a=candidate:.+typ\srelay.+\r\n/),0===t.iceCandidateCount&&(t.timeout=setTimeout((function(){t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),1e3)),null===r&&null===i&&null===o||void 0!==t.ice||!t.iceCandidateTimer||(clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1};var r=function(t){return e.screen&&(t=t.replace("a=x-google-flag:conference\r\n","")),t},i=function(n){var r,i;return(r=n.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW&&(i=r[0]+"b=AS:"+e.maxVideoBW+"\r\n",n=n.replace(r[0],i),l.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)),(r=n.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(i=r[0]+"b=AS:"+e.maxAudioBW+"\r\n",n=n.replace(r[0],i)),n};t.processSignalingMessage=function(n){var o,a=JSON.parse(n);t.incomingMessage=a,"new"===t.state?"OFFER"===a.messageType?(o={sdp:a.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(o)),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+a.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===a.messageType?((o={sdp:a.sdp,type:"answer"}).sdp=r(o.sdp),o.sdp=i(o.sdp),o.sdp=o.sdp.replace(/a=x-google-flag:conference\r\n/g,""),e.screen&&"detail"===e.optimizationMode&&(l.default.debug("[".concat(t.client,"] remove screen share abs ext")),o.sdp=o.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),t.peerConnection.setRemoteDescription(new RTCSessionDescription(o)),t.state="established"):"pr-answer"===a.messageType?(o={sdp:a.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(o))):"offer"===a.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+a.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===a.messageType?(o={sdp:a.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(o)),t.state="offer-received",t.markActionNeeded()):"ANSWER"===a.messageType?((o={sdp:a.sdp,type:"answer"}).sdp=r(o.sdp),o.sdp=i(o.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(o))):t.error("Illegal message for this state: "+a.messageType+" in state "+t.state))},t.setRtpSenderParameters=function(){var e=u()(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.degradation=n;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t._setRtpSenderParameters=function(){var e=u()(s.a.mark((function e(n){var r,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.peerConnection.getSenders(),i=r.find((function(e){return e&&e.track&&"video"===e.track.kind}))){e.next=4;break}return e.abrupt("return");case 4:return(o=i.getParameters()).degradationPreference=n,e.prev=6,l.default.debug("[".concat(t.clientId,"] setParameters"),o),e.next=10,i.setParameters(o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),l.default.debug("[".concat(t.clientId,"] setParameters failed, ignore"));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();var o={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},a={id:"",type:"",mediaType:"",googCodecName:e.codec?e.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},c={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},f={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"},p={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"},v=0,g=0,m=0;return t.isRemoteVideoStats=function(e){return!!(e.frameHeight&&e.frameWidth&&e.remoteSource)},t.getVideoRelatedStats=function(n){t.peerConnection.getStats().then((function(r){r.forEach((function(r){if(t.isSubscriber){var i={peerId:t.uid,mediaType:"video",isVideoMute:t.isVideoMute};if("track"===r.type&&(~r.id.indexOf("video")||~r.trackIdentifier.indexOf("v")||t.isRemoteVideoStats(r))){if(!t.lastReport)return void(t.lastReport=r);i.frameRateReceived=r.framesReceived-t.lastReport.framesReceived+"",i.frameRateDecoded=r.framesDecoded-t.lastReport.framesDecoded+"",t.lastReport=r}"inbound-rtp"===r.type&&~r.id.indexOf("Video")&&(i.bytesReceived=r.bytesReceived+"",i.packetsReceived=r.packetsReceived+"",i.packetsLost=r.packetsLost+""),n&&n(i)}else if("outbound-rtp"===r.type&&~r.id.indexOf("Video")){if(!t.lastReport)return void(t.lastReport=r);n&&n({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:e.maxFrameRate+"",frameRateSent:r.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=r}}))}))},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then((function(n){n.forEach((function(n){t.isSubscriber&&"inbound-rtp"===n.type&&~n.id.indexOf("Audio")&&e&&e({peerId:t.uid,mediaType:"audio",isAudioMute:t.isAudioMute,frameDropped:n.packetsLost+"",frameReceived:n.packetsReceived+"",googJitterReceived:n.jitter+"",bytesReceived:n.bytesReceived+"",packetsReceived:n.packetsReceived+"",packetsLost:n.packetsLost+""})}))}))},t.getStatsRate=function(e){t.getStats((function(t){t.forEach((function(e){"outbound-rtp"===e.type&&"video"===e.mediaType&&e.googFramesEncoded&&(e.googFrameRateSent=Math.ceil((e.googFramesEncoded-v)/3).toString(),v=e.googFramesEncoded),"inbound-rtp"===e.type&&-1!=e.id.indexOf("55543")&&(e.googFrameRateReceived&&(e.googFrameRateReceived=Math.ceil((e.googFrameReceived-m)/3).toString(),m=e.googFrameReceived),e.googFrameRateDecoded&&(e.googFrameRateDecoded=Math.ceil((e.googFramesDecoded-g)/3).toString(),g=e.googFramesDecoded))})),e(t)}))},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats((function(n,r){t.filterStatsCache=n,t.originStatsCache=r,t.lastTimeGetStats=Date.now(),e&&e(n,r)}))},t._getStats=function(n){var r=[];t.peerConnection.getStats().then((function(i){i.forEach((function(t){var n;r.push(t),"outbound-rtp"===t.type&&"audio"===t.mediaType&&(o.id=t.id,o.type=t.type,o.mediaType=t.mediaType,o.bytesSent=t.bytesSent?t.bytesSent+"":"0",o.packetsSent=t.packetsSent?t.packetsSent+"":"0",e.agoraStream.local&&(o.audioInputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"outbound-rtp"===t.type&&"video"===t.mediaType&&(a.id=t.id,a.type=t.type,a.mediaType=t.mediaType,a.bytesSent=t.bytesSent?t.bytesSent+"":"0",a.packetsSent=t.packetsSent?t.packetsSent+"":"0",a.googPlisReceived=t.pliCount?t.pliCount+"":"0",a.googNacksReceived=t.nackCount?t.nackCount+"":"0",a.googFirsReceived=t.firCount?t.firCount+"":"0",a.googFramesEncoded=t.framesEncoded?t.framesEncoded+"":"0",(n=i.get(t.trackId))&&(a.googFrameHeightSent=n.frameHeight&&n.frameHeight.toString(),a.googFrameWidthSent=n.frameWidth&&n.frameWidth.toString())),"inbound-rtp"!==t.type||-1==t.id.indexOf("44444")&&"audio"!==t.mediaType||(c.id=t.id,c.type=t.type,c.mediaType="audio",c.packetsReceived=t.packetsReceived?t.packetsReceived+"":"0",c.bytesReceived=t.bytesReceived?t.bytesReceived+"":"0",c.packetsLost=t.packetsLost?t.packetsLost+"":"0",c.packetsReceived=t.packetsReceived?t.packetsReceived+"":"0",c.googJitterReceived=t.jitter?t.jitter+"":"0",(n=i.get(t.trackId))&&(c.audioOutputLevel=n.audioLevel&&Math.round(32767*n.audioLevel).toString()),e.agoraStream.local||c.audioOutputLevel||(c.audioOutputLevel=Math.round(32767*e.agoraStream.getAudioLevel()).toString())),"inbound-rtp"!==t.type||-1==t.id.indexOf("55543")&&"video"!==t.mediaType||(f.id=t.id,f.type=t.type,f.mediaType="video",f.packetsReceived=t.packetsReceived?t.packetsReceived+"":"0",f.bytesReceived=t.bytesReceived?t.bytesReceived+"":"0",f.packetsLost=t.packetsLost?t.packetsLost+"":"0",f.googJitterBufferMs=t.jitter?t.jitter+"":"0",f.googNacksSent=t.nackCount?t.nackCount+"":"0",f.googPlisSent=t.pliCount?t.pliCount+"":"0",f.googFirsSent=t.firCount?t.firCount+"":"0",(n=i.get(t.trackId))&&(f.googFrameHeightReceived=n.frameHeight&&n.frameHeight.toString(),f.googFrameWidthReceived=n.frameWidth&&n.frameWidth.toString(),f.googFrameReceived=n.framesReceived&&n.framesReceived.toString(),f.googFramesDecoded=n.framesDecoded&&n.framesDecoded.toString())),"candidate-pair"===t.type&&(0==t.availableIncomingBitrate?p.googAvailableSendBandwidth=t.availableOutgoingBitrate+"":p.googAvailableReceiveBandwidth=t.availableIncomingBitrate+"")}));var s=[p,o,a,c,f];s.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),n(s,r)})).catch((function(e){l.default.error("["+t.clientId+"] ",e)}))},t.addTrack=function(e,n){t.peerConnection.addTrack(e,n)},t.removeTrack=function(e,n){var r=t.peerConnection.getSenders().find((function(t){return t.track==e}));r.replaceTrack(null),t.peerConnection.removeTrack(r)},t.addStream=function(e){window.navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")?e.getTracks().forEach((function(n){return t.peerConnection.addTrack(n,e)})):t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){var n;if(t.actionNeeded){if("new"===t.state||"established"===t.state)e.isSubscriber&&(t.peerConnection.addTransceiver("audio",{direction:"recvonly"}),t.peerConnection.addTransceiver("video",{direction:"recvonly"})),t.peerConnection.createOffer(t.mediaConstraints).then((function(n){if(n.sdp=i(n.sdp),e.isSubscriber||(n.sdp=n.sdp.replace(/a=.*video-orientation\r\n/g,"")),n.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(n),t.state="preparing-offer",void t.markActionNeeded();l.default.debug("["+t.clientId+"]Not sending a new offer")})).catch((function(e){l.default.debug("["+t.clientId+"]peer connection create offer failed ",e)}));else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(l.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),e.isCloudProxy3&&e.onNoIceCandidate&&e.onNoIceCandidate(),Object(h.getParameter)("SHIM_CANDIDATE")?(l.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):l.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;l.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(e){l.default.debug("["+t.clientId+"]peer connection create answer failed ",e)}),t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;n=t.peerConnection.localDescription.sdp,t.sendMessage("ANSWER",n),t.state="established"}else t.debug("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,n){var r={};r.messageType=e,r.sdp=n,"OFFER"===e?(r.offererSessionId=t.sessionId,r.answererSessionId=t.otherSessionId,r.seq=t.sequenceNumber+=1,r.tiebreaker=Math.floor(429496723*Math.random()+1)):(r.offererSessionId=t.incomingMessage.offererSessionId,r.answererSessionId=t.sessionId,r.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(r))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,r){var i=t._getSender(e.kind);if(!i)return r("NO_SENDER_FOUND");try{i.replaceTrack(e)}catch(e){return r&&r(e)}setTimeout((function(){return n&&n()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date,t._setRtpSenderParameters(t.degradation)),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){t.isSubscriber||(l.default.debug("[".concat(t.uid,"]"),"renegotiating"),void 0!==t.prevOffer&&t.peerConnection.createOffer().then((function(e){return e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),e.sdp=r(e.sdp),e.sdp=i(e.sdp),t.peerConnection.setLocalDescription(e)})).then((function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)})).catch((function(e){l.default.error("createOffer error: ",e)})))},t.isSubscriber||(t.peerConnection.onnegotiationneeded=t.renegotiate),t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t}(e)).browser="safari"):~window.navigator.userAgent.indexOf("Edge")?t=new y.a(e):(t=function(e){var t={},n=d.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[]};var i={id:"outbound_audio_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},a={id:"outbound_video_ssrc_send",type:"ssrc",mediaType:"",googCodecName:e.codec?e.codec.toUpperCase():"",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},c={id:"inbound_audio_ssrc_recv",type:"ssrc",mediaType:"",googCodecName:"opus",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},p={id:"inbound_video_ssrc_recv",type:"ssrc",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesReceived:"0",googFramesDecoded:"0"},v={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"};t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServers&&(e.turnServers instanceof Array?e.turnServers.map((function(e){e.udpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.udpport+"?transport=udp"}),"string"==typeof e.tcpport&&""!==e.tcpport&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,credentialType:"password",urls:(e.useTurns?"turns:":"turn:")+e.url+":"+e.tcpport+"?transport=tcp"}),!0===e.forceturn&&(t.pc_config.iceTransportPolicy="relay")})):l.default.error("[".concat(t.clientId,"] turnServers is not a array")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints=r.isChromeKernel()&&r.getChromeKernelVersion()<103?{mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}}:{offerToReceiveVideo:e.video,offerToReceiveAudio:e.audio},t.roapSessionId=103;try{t.pc_config.sdpSemantics=Object(h.getParameter)("PLAN"),t.peerConnection=new n(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new n(t.pc_config,t.con);var g=t.peerConnection.getConfiguration();g.sdpSemantics&&Object(h.setParameter)("PLAN",g.sdpSemantics)}t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,l.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(h.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,r,i,o;r=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),i=n.match(/a=candidate:.+typ\shost.+\r\n/),o=n.match(/a=candidate:.+typ\srelay.+\r\n/),null===r&&null===i&&null===o||void 0!==t.ice||!t.iceCandidateTimer||(clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1};var m=function(e){return e.replace("a=x-google-flag:conference\r\n","")},y=function(n){var r,i;if((r=n.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW){i=r[0]+"b=AS:"+e.maxVideoBW+"\r\n";var o=0,a=0;"h264"===e.codec?(o=n.search(/a=rtpmap:(\d+) H264\/90000\r\n/),a=n.search(/H264\/90000\r\n/)):"vp8"===e.codec?(o=n.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),a=n.search(/VP8\/90000\r\n/)):"vp9"===e.codec&&(o=n.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),a=n.search(/VP9\/90000\r\n/)),-1!==o&&-1!==a&&a-o>10&&(i=i+"a=fmtp:"+n.slice(o+9,a-1)+" x-google-min-bitrate="+e.minVideoBW+"\r\n"),n=(n=(n=n.replace(r[0],i)).replace("a=fmtp:102 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f","a=fmtp:102 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f")).replace("a=fmtp:125 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f","a=fmtp:125 level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42001f"),l.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)}return(r=n.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(i=r[0]+"b=AS:"+e.maxAudioBW+"\r\n",n=n.replace(r[0],i)),n};t.processSignalingMessage=function(n){var r,i=JSON.parse(n);t.incomingMessage=i,"new"===t.state?"OFFER"===i.messageType?(r={sdp:i.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch((function(e){})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===i.messageType?((r={sdp:i.sdp,type:"answer"}).sdp=m(r.sdp),r.sdp=y(r.sdp),e.screen&&"detail"===e.optimizationMode&&(l.default.debug("[".concat(t.client,"] remove screen share abs ext")),r.sdp=r.sdp.replace(/a=.*abs-send-time\r\n/g,"").replace(/a=.*goog-remb\r\n/g,"")),e.isSubscriber&&(r.sdp=r.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch((function(e){})),t.state="established"):"pr-answer"===i.messageType?(r={sdp:i.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch((function(e){}))):"offer"===i.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===i.messageType?(r={sdp:i.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch((function(e){})),t.state="offer-received",t.markActionNeeded()):"ANSWER"===i.messageType?((r={sdp:i.sdp,type:"answer"}).sdp=m(r.sdp),r.sdp=y(r.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(r)).catch((function(e){}))):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state))},t.setRtpSenderParameters=function(){var e=u()(s.a.mark((function e(n){var r,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.peerConnection.getSenders(),i=r.find((function(e){return"video"===e.track.kind}))){e.next=4;break}return e.abrupt("return");case 4:return(o=i.getParameters()).degradationPreference=n,e.prev=6,l.default.debug("[".concat(t.clientId,"] setParameters"),o),e.next=10,i.setParameters(o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),l.default.debug("[".concat(t.clientId,"] setParameters failed, ignore"));case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();var b=0,_=0;return t.getVideoRelatedStats=function(e){t.getStats((function(n){n.forEach((function(n){if(t.isSubscriber){if("video"===n.mediaType&&n.id&&~n.id.indexOf("recv")){if(r.isChromeKernel()&&+r.getBrowserVersion()>=76){var i=+n.googFramesReceived-b,o=+n.googFramesDecoded-_;t._setStat(p,"googFrameRateReceived",i),t._setStat(p,"googFrameRateDecoded",o),t._setStat(p,"googFrameRateOutput",o),b=+n.googFramesReceived,_=+n.googFramesDecoded}e&&e({mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:n.googFrameRateReceived,frameRateDecoded:n.googFrameRateDecoded,bytesReceived:n.bytesReceived,packetsReceived:n.packetsReceived,packetsLost:n.packetsLost})}}else"video"===n.mediaType&&n.id&&~n.id.indexOf("send")&&e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:n.googFrameRateInput,frameRateSent:n.googFrameRateSent,googRtt:n.googRtt})}))}))},t.getAudioRelatedStats=function(e){t.getStats((function(n){n.forEach((function(n){t.isSubscriber&&"audio"===n.mediaType&&n.id&&~n.id.indexOf("recv")&&e&&e({mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:parseInt(n.googDecodingPLC)+parseInt(n.googDecodingPLCCNG)+"",frameReceived:n.googDecodingCTN,googJitterReceived:n.googJitterReceived,bytesReceived:n.bytesReceived,packetsReceived:n.packetsReceived,packetsLost:n.packetsLost})}))}))},t.getStatsRate=function(e){t.getStats((function(t){e(t)}))},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):(t.lastTimeGetStats=Date.now(),this._getStats((function(n,r){t.filterStatsCache=n,t.originStatsCache=r,e&&e(n,r)})))},t._setStat=function(e,t,n){e.hasOwnProperty(t)&&(null!=n&&n!==1/0&&n==n||(n=0),e[t]=n+"")},t._processGetStatsAfterChrome76=function(e){var n=this;t.lastStats||(t.lastStats=new Map),t.peerConnection.getStats().then((function(r){var s,u=[],l=[],d=new Map,h=new Date,g=f(r.values());try{for(g.s();!(s=g.n()).done;){var m=s.value;"codec"!=m.type?"candidate-pair"!=m.type?("inbound-rtp"===m.type&&"video"===m.mediaType&&d.set("inbound-video",m),"inbound-rtp"===m.type&&"audio"===m.mediaType&&d.set("inbound-audio",m),"outbound-rtp"===m.type&&"audio"===m.mediaType&&d.set("outbound-audio",m),"outbound-rtp"===m.type&&"video"===m.mediaType&&d.set("outbound-video",m),"track"===m.type&&"video"===m.kind&&m.remoteSource&&d.set("remote-video-track",m),"track"===m.type&&"audio"===m.kind&&m.remoteSource&&d.set("remote-audio-track",m),"remote-inbound-rtp"===m.type&&"video"===m.mediaType&&d.set("remote-inbound-video",m),"remote-inbound-rtp"===m.type&&"audio"===m.mediaType&&d.set("remote-inbound-audio",m),"track"!==m.type||"video"!==m.kind||m.remoteSource||d.set("local-video-track",m),"track"!==m.type||"audio"!==m.kind||m.remoteSource||d.set("local-audio-track",m),"media-source"===m.type&&"video"===m.kind&&d.set("media-source-video",m),"media-source"===m.type&&"audio"===m.kind&&d.set("media-source-audio",m)):l.push(m):u.push(m)}}catch(e){g.e(e)}finally{g.f()}d.set("codec",u),d.set("candidatePairs",l),d.set("timestamp",+h);var y=null,b=null;if(p.timestamp=h,c.timestamp=h,i.timestamp=h,i.timestamp=h,v.timestamp=h,n.isSubscriber)(y=d.get("inbound-video"))&&(t._setStat(p,"id","inbound_video_ssrc_recv"),t._setStat(p,"mediaType",y.mediaType),t._setStat(p,"packetsLost",y.packetsLost),t._setStat(p,"googDecodeMs",null),t._setStat(p,"googMaxDecodeMs",null),t._setStat(p,"googRenderDelayMs",null),t._setStat(p,"googMinPlayoutDelayMs",null),t._setStat(p,"googNacksSent",y.nackCount),t._setStat(p,"googPlisSent",y.pliCount),t._setStat(p,"googFirsSent",y.firCount),t._setStat(p,"bytesReceived",y.bytesReceived),t._setStat(p,"packetsReceived",y.packetsReceived)),(y=d.get("inbound-audio"))&&(t._setStat(c,"id","inbound_audio_ssrc_recv"),t._setStat(c,"mediaType",y.mediaType),t._setStat(c,"bytesReceived",y.bytesReceived),t._setStat(c,"packetsLost",y.packetsLost),t._setStat(c,"packetsReceived",y.packetsReceived),t._setStat(c,"googAccelerateRate",y.removedSamplesForAcceleration),t._setStat(c,"googCurrentDelayMs",y.jitterBufferDelay),t._setStat(c,"googDecodingCNG",null),t._setStat(c,"googDecodingCTN",null),t._setStat(c,"googDecodingCTSG",null),t._setStat(c,"googDecodingNormal",null),t._setStat(c,"googDecodingPLC",null),t._setStat(c,"googDecodingPLCCNG",null),t._setStat(c,"googJitterReceived",y.jitter),t._setStat(c,"googPreferredJitterBufferMs",null),t._setStat(c,"googSecondaryDecodedRate",null)),(y=d.get("remote-video-track"))&&(t._setStat(p,"googTargetDelayMs",y.jitterBufferDelay),t._setStat(p,"googFrameWidthReceived",y.frameWidth),t._setStat(p,"googFrameHeightReceived",y.frameHeight),t._setStat(p,"googJitterBufferMs",y.jitterBufferDelay/y.jitterBufferEmittedCount*1e3),t._setStat(p,"googCurrentDelayMs",y.jitterBufferDelay),t._setStat(p,"googFramesDecoded",y.framesDecoded),t._setStat(p,"googFramesReceived",y.framesReceived)),(y=d.get("remote-audio-track"))&&(t._setStat(c,"audioOutputLevel",32767*y.audioLevel),t._setStat(c,"googJitterBufferMs",y.jitterBufferDelay/y.jitterBufferEmittedCount*1e3),t._setStat(c,"googExpandRate",y.concealedSamples),t._setStat(c,"googPreemptiveExpandRate",y.insertedSamplesForDeceleration),t._setStat(c,"googSpeechExpandRate",y.silentConcealedSamples));else{var _=t.lastStats.get("timestamp"),E=t.lastStats.get("outbound-video");if((y=d.get("outbound-audio"))&&(t._setStat(i,"id","outbound_audio_ssrc_send"),t._setStat(i,"mediaType",y.mediaType),t._setStat(i,"aecDivergentFilterFraction",null),t._setStat(i,"bytesSent",y.bytesSent),t._setStat(i,"packetsSent",y.packetsSent),b=y.transportId),y=d.get("outbound-video")){if(t._setStat(a,"id","outbound_video_ssrc_send"),t._setStat(a,"mediaType",y.mediaType),t._setStat(a,"bytesSent",y.bytesSent),t._setStat(a,"packetsSent",y.packetsSent),t._setStat(a,"googAdaptationChanges",y.qualityLimitationDurations),t._setStat(a,"googAvgEncodeMs",null),t._setStat(a,"googEncodeUsagePercent",null),b=y.transportId,y.totalEncodedBytesTarget&&E&&E.totalEncodedBytesTarget){var S=(y.totalEncodedBytesTarget-E.totalEncodedBytesTarget)/(+new Date-_);t._setStat(v,"googTargetEncBitrate",Math.floor(8*S*1e3))}if(y.retransmittedBytesSent&&E&&E.retransmittedBytesSent){var w=(y.retransmittedBytesSent-E.retransmittedBytesSent)/(+new Date-_);t._setStat(v,"googRetransmitBitrate",Math.floor(8*w*1e3))}if(y.bytesSent&&E&&E.bytesSent){var x=(y.bytesSent-E.bytesSent)/(+new Date-_);t._setStat(v,"googTransmitBitrate",Math.floor(8*x*1e3)),t._setStat(v,"googActualEncBitrate",Math.floor(8*x*1e3))}if(y.totalPacketSendDelay&&E&&E.totalPacketSendDelay){var T=(y.totalPacketSendDelay-E.totalPacketSendDelay)/(+new Date-_);t._setStat(v,"googBucketDelay",Math.floor(1e3*T))}}if((y=d.get("remote-inbound-video"))&&(t._setStat(a,"packetsLost",y.packetsLost),t._setStat(a,"googRtt",y.roundTripTime)),(y=d.get("local-video-track"))&&(t._setStat(a,"googFrameHeightSent",y.frameHeight),t._setStat(a,"googFrameWidthSent",y.frameWidth),void 0!==y.framesPerSecond&&t._setStat(a,"googFrameRateSent",y.framesPerSecond)),(y=d.get("local-audio-track"))&&(t._setStat(i,"googEchoCancellationReturnLoss",y.echoReturnLoss),t._setStat(i,"googEchoCancellationReturnLossEnhancement",y.echoReturnLossEnhancement)),(y=d.get("media-source-video"))&&(t._setStat(a,"googFrameHeightInput",y.height),t._setStat(a,"googFrameWidthInput",y.width),t._setStat(a,"googFrameRateInput",y.framesPerSecond)),(y=d.get("media-source-audio"))&&t._setStat(i,"audioInputLevel",32767*y.totalAudioEnergy),(y=d.get("inbound-video"))&&(t._setStat(a,"googFirsReceived",y.firCount),t._setStat(a,"googNacksReceived",y.nackCount),t._setStat(a,"googPlisReceived",y.pliCount)),b)d.get("candidatePairs").map((function(e){b==e.transportId&&t._setStat(v,"googAvailableSendBandwidth",e.availableOutgoingBitrate)}));else{var I=d.get("candidatePairs")[0];I&&t._setStat(v,"googAvailableSendBandwidth",I.availableOutgoingBitrate)}}t.lastStats=d;var R=[o()({},a),o()({},i),o()({},p),o()({},c),o()({},v)];R.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),e(R)}))},t._processGetStatsBeforeChrome76=function(e){t.peerConnection.getStats((function(n){var r=[],s=[],u=null;Object.keys(n).forEach((function(e){var t=n[e];t&&(s.push(t),u=t.timestamp,"VideoBwe"===t.type?v=t:t.id.indexOf("_send")>-1&&"video"===t.mediaType?a=t:t.id.indexOf("_send")>-1&&"audio"===t.mediaType?i=t:t.id.indexOf("_recv")>-1&&"video"===t.mediaType?p=t:t.id.indexOf("_recv")>-1&&"audio"===t.mediaType&&(c=t))})),(r=[o()({},a),o()({},i),o()({},p),o()({},c),o()({},v)]).push({id:"time",startTime:t.connectedTime,timestamp:u||new Date}),e(r,s)}))},t._getStats=function(e){Object(h.getParameter)("CHROME_NEW_STATS")&&r.isChromeKernel()&&+r.getBrowserVersion()>=76?t._processGetStatsAfterChrome76(e):t._processGetStatsBeforeChrome76(e)},t.addTrack=function(e,n){if("unified-plan"===Object(h.getParameter)("PLAN")){var r="audio"===e.kind?t._audioSender:t._videoSender;if(r){var i=t.peerConnection.getTransceivers().find((function(e){return e.sender===r}));r.replaceTrack(e).then((function(){i.direction="sendrecv",t.renegotiate()}))}else r=t.peerConnection.addTrack(e,n),"audio"===e.kind?t._audioSender=r:t._videoSender=r}else t.peerConnection.addTrack(e,n)},t.removeTrack=function(e,n){if("unified-plan"===Object(h.getParameter)("PLAN")){var r=t.peerConnection.getTransceivers().find((function(t){return t.sender.track===e}));r&&(r.direction="inactive",t.peerConnection.removeTrack(r.sender))}else t.peerConnection.removeTrack(t.peerConnection.getSenders().find((function(t){return t.track==e})))},t.addStream=function(e){"unified-plan"===Object(h.getParameter)("PLAN")?e.getTracks().forEach((function(n){var r=t.peerConnection.addTrack(n,e);"audio"===n.kind?t._audioSender=r:t._videoSender=r})):(t.peerConnection.addStream(e),t.markActionNeeded())},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){var n;if(t.actionNeeded){if("new"===t.state||"established"===t.state)t.peerConnection.createOffer(t.mediaConstraints).then((function(n){return n?n.sdp!==t.prevOffer?(e.isSubscriber&&(n.sdp=n.sdp.replace("minptime=10","minptime=10;stereo=1; sprop-stereo=1")),t.peerConnection.setLocalDescription(n),t.state="preparing-offer",void t.markActionNeeded()):void l.default.debug("["+t.clientId+"]Not sending a new offer"):(l.default.debug("["+t.clientId+"]sessionDescription is null"),void t.onsignalingmessage(null))})).catch((function(e){l.default.debug("["+t.clientId+"]peer connection create offer failed ",e)}));else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(e.isCloudProxy3&&e.onNoIceCandidate&&e.onNoIceCandidate(),l.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(h.getParameter)("SHIM_CANDIDATE")?(l.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):l.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;l.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(e){l.default.debug("["+t.clientId+"]peer connection create answer failed ",e)}),t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;n=t.peerConnection.localDescription.sdp,t.sendMessage("ANSWER",n),t.state="established"}else l.default.debug("[".concat(t.clientId,"] Dazed and confused in state ").concat(t.state,", stopping here'"));t.actionNeeded=!1}},t.sendMessage=function(e,n){var r={};r.messageType=e,r.sdp=n,"OFFER"===e?(r.offererSessionId=t.sessionId,r.answererSessionId=t.otherSessionId,r.seq=t.sequenceNumber+=1,r.tiebreaker=Math.floor(429496723*Math.random()+1)):(r.offererSessionId=t.incomingMessage.offererSessionId,r.answererSessionId=t.sessionId,r.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(r))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,r){var i=t._getSender(e.kind);if(!i)return r("NO_SENDER_FOUND");try{i.replaceTrack(e)}catch(e){return r&&r(e)}setTimeout((function(){return n&&n()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&(t.onaddstream(e,"ontrack"),t.peerConnection.onaddstream=null)},t.peerConnection.onaddstream=function(e){t.onaddstream&&(t.onaddstream(e,"onaddstream"),t.peerConnection.ontrack=null)},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){l.default.debug(t.peerConnection.iceConnectionState),"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){void 0!==t.prevOffer&&t.peerConnection.createOffer().then((function(e){return"unified-plan"!==Object(h.getParameter)("PLAN")&&(e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n")),e.sdp=m(e.sdp),e.sdp=y(e.sdp),t.peerConnection.setLocalDescription(e)})).then((function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)})).catch((function(e){l.default.error("createOffer error: ",e.message||e)}))},t.peerConnection.onnegotiationneeded=t.renegotiate,t.onaddstream=null,t.onremovestream=null,t.onnegotiationneeded=null,t.state="new",t.markActionNeeded(),t}(e)).browser="chrome-stable",t},S=function(e,t,n){var i={};i.config=e,i.streamId=e.streamId,delete e.streamId,navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var o=0,a=1,s=!1,c=null,u=function(e){if(o++,c)if(c===e)l.default.debug("Using Video Source/ Audio Source");else{var n=c.getVideoTracks()[0],r=c.getAudioTracks()[0],i=e.getVideoTracks()[0],u=e.getAudioTracks()[0];i&&(n&&c.removeTrack(n),c.addTrack(i)),u&&(r&&c.removeTrack(r),c.addTrack(u))}else c=e;o!==a||s||(s=!0,setTimeout((function(){t(c)}),0))},d=function(e){l.default.error("Failed to GetUserMedia",e.name,e.code,e.message,e),o++,s||(s=!0,setTimeout((function(){n&&n(e)}),0))},h=function(){var t={video:e.video,audio:e.audio};if(l.default.debug("GetUserMedia",JSON.stringify(t)),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia(t).then(u).catch(d);else if("undefined"!=typeof navigator&&navigator.getMedia)navigator.getMedia(e,u,d);else{var r={name:"MEDIA_NOT_SUPPORT",message:"Video/audio streams not supported yet"};l.default.error("["+i.streamId+"]"+r.message),n&&n(r)}};if((e.videoSource||e.audioSource)&&(c=new MediaStream,e.videoSource&&c.addTrack(e.videoSource),e.audioSource&&c.addTrack(e.audioSource)),e.video||e.audio||e.screen||e.screenAudio){if(!e.screen&&e.screenAudio)return n&&n({code:"Set screen to true before sharing the audio"});if(e.screen){if(b.a.isElectron())return e.screen.sourceId?b.a.getScreenStream(e.screen.sourceId,e.screen,(function(t,n){t?d(t):(e.audio&&(a++,h()),u(n))})):b.a.shareScreen(e.screen,(function(t,n){t?d(t):(e.audio&&(a++,h()),u(n))}));if(r.isFireFox()){if(l.default.debug("["+i.streamId+"]Screen access requested"),!~["screen","window","application"].indexOf(e.screen.mediaSource))return n&&n({code:"Invalid mediaSource, mediaSource should be one of [screen, window, application]"});navigator.getMedia({video:e.screen},(function(t){e.audio&&(a++,h()),u(t)}),d)}else if(r.isChromeKernel()&&e.screen.extensionId){if(window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<34)return void n({code:"This browser does not support screen sharing"});l.default.debug("["+i.streamId+"]Screen access on chrome stable, looking for extension");try{chrome.runtime.sendMessage(e.screen.extensionId,{getStream:!0},(function(t){void 0===t?(l.default.error("["+i.streamId+"]No response from Chrome Plugin. Plugin not installed properly"),d({name:"PluginNotInstalledProperly",message:"No response from Chrome Plugin. Plugin not installed properly."})):(e.screen.mandatory.chromeMediaSourceId=t.streamId,navigator.getMedia({video:e.screen},(function(t){e.audio&&(a++,h()),u(t)}),d))}))}catch(e){return l.default.debug("["+i.streamId+"]AgoraRTC screensharing plugin is not accessible"),void n({code:"no_plugin_present"})}}else{if(window.navigator.mediaDevices.getDisplayMedia){var f={};return"number"==typeof e.screen.width&&"number"==typeof e.screen.height?f.video={width:{ideal:e.screen.width},height:{ideal:e.screen.height}}:f.video={width:e.screen.width,height:e.screen.height},e.screen.frameRate&&e.screen.frameRate.min?f.video.frameRate={ideal:e.screen.frameRate.max,max:e.screen.frameRate.max}:f.video.frameRate=e.screen.frameRate,e.screenAudio&&(f.audio=e.screenAudio),l.default.debug("use getDisplayMedia, constraints:",f),window.navigator.mediaDevices.getDisplayMedia(f).then((function(t){!e.screenAudio&&e.audio&&(a++,h()),u(t)})).catch(d)}l.default.error("["+i.streamId+"]This browser does not support screenSharing"),n({code:"This browser does not support screen sharing"})}}else h()}else u(c)}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0)),o=function(){function e(e,t,n){void 0===t&&(t=""),this.name="AgoraRTCException",this.code=e,this.message="AgoraRTCError "+this.code+": "+t,this.data=n}return e.prototype.toString=function(){return this.data?this.message+" data: "+JSON.stringify(this.data):this.message},e.prototype.throw=function(){throw i.default.error(this.toString()),this},e}();t.AgoraRTCError=o,function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_SUPPORT="NOT_SUPPORT",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORT="OPERATION_ABORT",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.STREAM_ALREADY_INITIALIZED="STREAM_ALREADY_INITIALIZED",e.STREAM_IS_CLOSED="STREAM_IS_CLOSED",e.ABORT_OTHER_INIT="ABORT_OTHER_INIT",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.CAN_NOT_AUTOPLAY="CAN_NOT_AUTOPLAY",e.HIGH_STREAM_NO_VIDEO_TRACK="HIGH_STREAM_NO_VIDEO_TRACK",e.SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM="SCREEN_SHARE_CAN_NOT_CREATE_LOW_STREAM",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.TOKEN_GENERATOR_FUNCTION_ERROR="TOKEN_GENERATOR_FUNCTION_ERROR",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.UID_CONFLICT="UID_CONFLICT",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.SUBSCRIPTION_IS_IN_PROGRESS="SUBSCRIPTION_IS_IN_PROGRESS",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.EFFECT_ID_CONFLICTED="EFFECT_ID_CONFLICTED",e.EFFECT_SOUND_ID_NOT_FOUND="EFFECT_SOUND_ID_NOT_FOUND",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER="CAN_NOT_CONNECT_TO_LIVE_STREAMING_WORKER",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT="LIVE_STREAMING_TRANSCODING_NOT_SUPPORT",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"}(t.AgoraRTCErrorCode||(t.AgoraRTCErrorCode={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),i=window.AudioContext||window.webkitAudioContext,o=n(2),a=o.getParameter,s=o.setParameter,c=function(){return a("AUDIO_CONTEXT")||s("AUDIO_CONTEXT",function(){if(i){var e=new i;return window.ctx=e,new Promise((function(e){document.body?e():window.addEventListener("load",e)})).then((function(){var t=function t(){"suspended"==e.state?(r.default.debug("AudioContext is suspended, auto resume"),e.resume().then((function(){r.default.debug("AudioContext resume success"),document.body.removeEventListener("touchend",t,!0),document.body.removeEventListener("mousedown",t,!0)}))):(r.default.debug("AudioContext is running"),document.body.removeEventListener("touchend",t,!0),document.body.removeEventListener("mousedown",t,!0))};document.body.addEventListener("touchend",t,!0),document.body.addEventListener("mousedown",t,!0)})),e}throw new Error("AUDIO_CONTEXT_NOT_SUPPORTED")}()),a("AUDIO_CONTEXT")};c()},function(e,t,n){"use strict";var r=n(1),i=null,o=function(){try{i=window.require("electron")}catch(e){}return i},a=function(e){var t=r.report.reportApiInvoke(null,{callback:e,name:"getScreenSources",options:arguments,tag:"tracer"}),n=o();if(!n)return t&&t("electron is null");try{var i=n.desktopCapturer.getSources({types:["window","screen"]})}catch(e){console.log(e)}i instanceof Promise?i.then((function(e){return t&&t(null,e)})).catch((function(e){return t&&t(e)})):i=n.desktopCapturer.getSources({types:["window","screen"]},(function(e,n){t&&t(null,n)}))},s=function(e,t,n){var r=t.width;t={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:t.height,maxWidth:r,maxFrameRate:t.frameRate&&t.frameRate.max,minFrameRate:t.frameRate&&t.frameRate.min}}},navigator.webkitGetUserMedia(t,(function(e){n&&n(null,e)}),(function(e){n&&n(e)}))};t.a={isElectron:function(){return!!o()},getElectronInstance:o,getScreenSources:a,getScreenStream:s,shareScreen:function(e,t){a((function(n,r){if(n)return t&&t(n);!function(e,t){var n=document.createElement("div");n.innerText="share screen",n.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var r=document.createElement("div");r.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var i=document.createElement("div");i.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",i.setAttribute("style","height: 12%;");var o=document.createElement("div");o.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var a=document.createElement("div");a.setAttribute("style","text-align: right; padding: 16px 0;");var s=document.createElement("button");s.innerHTML="cancel",s.setAttribute("style","width: 85px;"),s.onclick=function(){document.body.removeChild(c),t&&t("NotAllowedError")},a.appendChild(s),r.appendChild(i),r.appendChild(o),r.appendChild(a);var c=document.createElement("div");c.setAttribute("style","position: absolute; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),c.appendChild(n),c.appendChild(r),document.body.appendChild(c),e.map((function(e){if(e.id){var n=document.createElement("div");n.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");var r=e.thumbnail;r.getSize().width>1920&&(r=r.resize({width:1920})),n.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+r.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",n.onclick=function(){document.body.removeChild(c),t&&t(null,e.id)},o.appendChild(n)}}))}(r,(function(n,r){if(n)return t&&t(n);s(r,e,t)}))}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);!function(e){e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e.INJECT="inject_streaming"}(t.LiveStreamingServiceMode||(t.LiveStreamingServiceMode={})),t.DEFAULT_LIVE_STREAMING_TRANSCODING_USER={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},t.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK={x:0,y:0,width:160,height:160,zOrder:255,alpha:1},t.isLiveStreamingTranscodingConfig=function(e){return r.isEmpty(e.width)||r.checkValidNumber(e.width,"config.width",0),r.isEmpty(e.height)||r.checkValidNumber(e.height,"config.height",0),r.isEmpty(e.videoBitrate)||r.checkValidNumber(e.videoBitrate,"config.videoBitrate",1,1e6),r.isEmpty(e.videoFramerate)||r.checkValidNumber(e.videoFramerate,"config.videoFramerate"),r.isEmpty(e.lowLatency)||r.checkValidBoolean(e.lowLatency,"config.lowLatency"),r.isEmpty(e.audioSampleRate)||r.checkValidEnum(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),r.isEmpty(e.audioBitrate)||r.checkValidNumber(e.audioBitrate,"config.audioBitrate",1,128),r.isEmpty(e.audioChannels)||r.checkValidEnum(e.audioChannels,"config.audioChannels",[1,2,3,4,5]),r.isEmpty(e.videoGop)||r.checkValidNumber(e.videoGop,"config.videoGop"),r.isEmpty(e.videoCodecProfile)||r.checkValidEnum(e.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),r.isEmpty(e.userCount)||r.checkValidNumber(e.userCount,"config.userCount",0,17),r.isEmpty(e.backgroundColor)||r.checkValidNumber(e.backgroundColor,"config.backgroundColor",0,16777215),e.transcodingUsers&&!r.isEmpty(e.transcodingUsers)&&(r.checkValidArray(e.transcodingUsers,"config.transcodingUsers"),e.transcodingUsers.forEach((function(e,t){r.checkValidUID(e.uid),r.isEmpty(e.x)||r.checkValidNumber(e.x,"transcodingUser["+t+"].x",0,1e4),r.isEmpty(e.y)||r.checkValidNumber(e.y,"transcodingUser["+t+"].y",0,1e4),r.isEmpty(e.width)||r.checkValidNumber(e.width,"transcodingUser["+t+"].width",0,1e4),r.isEmpty(e.height)||r.checkValidNumber(e.height,"transcodingUser["+t+"].height",0,1e4),r.isEmpty(e.zOrder)||r.checkValidNumber(e.zOrder-1,"transcodingUser["+t+"].zOrder",0,100),r.isEmpty(e.alpha)||r.checkValidFloatNumber(e.alpha,"transcodingUser["+t+"].alpha",0,1)}))),e.images&&!r.isEmpty(e.images)&&(r.checkValidArray(e.images,"config.images"),e.images.forEach((function(e,t){r.checkValidString(e.url,"images["+t+"].url",1,1e3,!1),r.isEmpty(e.x)||r.checkValidNumber(e.x,"images["+t+"].x",0,1e4),r.isEmpty(e.y)||r.checkValidNumber(e.y,"images["+t+"].y",0,1e4),r.isEmpty(e.width)||r.checkValidNumber(e.width,"images["+t+"].width",0,1e4),r.isEmpty(e.height)||r.checkValidNumber(e.height,"images["+t+"].height",0,1e4),r.isEmpty(e.zOrder)||r.checkValidNumber(e.zOrder,"images["+t+"].zOrder",0,255),r.isEmpty(e.alpha)||r.checkValidFloatNumber(e.alpha,"images["+t+"].alpha",0,1)}))),!0},t.DEFAULT_TRANSCODING_CONFIG={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFramerate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""},t.isInjectStreamConfig=function(e){return r.isEmpty(e.audioVolume)||r.checkValidNumber(e.audioVolume,"config.audioVolume",0,1e3),r.isEmpty(e.audioBitrate)||r.checkValidNumber(e.audioBitrate,"config.audioBitrate",1,1e4),r.isEmpty(e.audioChannels)||r.checkValidEnum(e.audioChannels,"config.audioChannels",[1,2]),r.isEmpty(e.audioSampleRate)||r.checkValidEnum(e.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),r.isEmpty(e.width)||r.checkValidNumber(e.width,"config.width",0,1e4),r.isEmpty(e.height)||r.checkValidNumber(e.height,"config.height",0,1e4),r.isEmpty(e.videoBitrate)||r.checkValidNumber(e.videoBitrate,"config.videoBitrate",1,1e4),r.isEmpty(e.videoFramerate)||r.checkValidNumber(e.videoFramerate,"config.videoFramerate",1,1e4),r.isEmpty(e.videoGop)||r.checkValidNumber(e.videoGop,"config.videoGop",1,1e4),!0},t.DEFAULT_INJECT_CONFIG={audioBitrate:48,audioChannels:2,audioVolume:100,audioSampleRate:48e3,height:0,width:0,videoBitrate:400,videoFramerate:15,videoGop:30},function(e){e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.INJECT_STREAM_STATUS="@live_uap-inject-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address"}(t.LiveStreamingUapSignalEvents||(t.LiveStreamingUapSignalEvents={})),function(e){e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager"}(t.LiveStreamingInternalEvents||(t.LiveStreamingInternalEvents={})),function(e){e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE=505]="LIVE_STREAM_RESPONSE_INGNORE_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN"}(t.LIVE_STREAM_ERROR_CODE||(t.LIVE_STREAM_ERROR_CODE={})),function(e){e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls"}(t.WebSocketManagerEvents||(t.WebSocketManagerEvents={}))},function(e,t,n){var r=n(57),i=n(58);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t,n){var r;e.exports=(r=n(73),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,a=t.algo,s=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(s[i]=n(e.pow(r,.5))),c[i]=n(e.pow(r,1/3)),i++),r++}();var u=[],l=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],d=n[6],h=n[7],f=0;f<64;f++){if(f<16)u[f]=0|e[t+f];else{var p=u[f-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=u[f-2],m=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;u[f]=v+u[f-7]+m+u[f-16]}var y=r&i^r&o^i&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),_=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&d)+c[f]+u[f];h=d,d=l,l=s,s=a+_|0,a=o,o=i,i=r,r=_+(b+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+d|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomString=function(e){void 0===e&&(e=8);for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(48*Math.random()));return n}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),c=a(n(37)),u=n(24),l=a(n(0)),d=n(1);function h(e){return new Promise((function(t){window.setTimeout(t,e)}))}function f(e,t){return new Promise((function(n,r){t.timeout=t.timeout||s.getParameter("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&(t.data=JSON.stringify(t.data)),t.headers=t.headers||{},t.headers["Content-Type"]="application/json",t.method="POST",t.url=e,c.default.request(t).then((function(e){n(e.data)})).catch((function(e){c.default.isCancel(e)?r(new u.AgoraRTCError(u.AgoraRTCErrorCode.OPERATION_ABORT,"cancel token canceled")):"ECONNABORTED"===e.code?r(new u.AgoraRTCError(u.AgoraRTCErrorCode.NETWORK_TIMEOUT,e.message)):e.response?r(new u.AgoraRTCError(u.AgoraRTCErrorCode.NETWORK_RESPONSE_ERROR,e.response.status)):r(new u.AgoraRTCError(u.AgoraRTCErrorCode.NETWORK_ERROR,e.message))}))}))}function p(e,n,r,a){var s=this,c=Object.assign({},t.DEFAULT_RETRY_CONFIG,a),l=c.timeout,d=function(){return i(s,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,h(l)];case 1:return e.sent(),l*=c.timeoutFactor,l=Math.min(c.maxRetryTimeout,l),[2]}}))}))},f=!1,p=new Promise((function(t,a){return i(s,void 0,void 0,(function(){var i,s,l;return o(this,(function(o){switch(o.label){case 0:n=n||function(){return!1},r=r||function(){return!0},i=0,o.label=1;case 1:if(!(i<c.maxRetryCount))return[3,12];if(f)return[2,a(new u.AgoraRTCError(u.AgoraRTCErrorCode.OPERATION_ABORT))];o.label=2;case 2:return o.trys.push([2,7,,11]),[4,e()];case 3:return s=o.sent(),n(s,i)?i+1===c.maxRetryCount?[2,t(s)]:[4,d()]:[3,5];case 4:return o.sent(),[3,6];case 5:return[2,t(s)];case 6:return[3,11];case 7:return l=o.sent(),r(l,i)?i+1===c.maxRetryCount?[2,a(l)]:[4,d()]:[3,9];case 8:return o.sent(),[3,10];case 9:return[2,a(l)];case 10:return[3,11];case 11:return i+=1,[3,1];case 12:return[2]}}))}))}));return p.cancel=function(){return f=!0},p}function v(e,t){return{addressList:e.servers.map((function(e,n){return"wss://"+e.address.replace(/\./g,"-")+".edge.agora.io:"+e.wss+"?serviceName="+encodeURIComponent(t)})),workerToken:e.workerToken,vid:e.vid}}t.wait=h,t.post=f,t.DEFAULT_RETRY_CONFIG={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4},t.getRetryWaitTime=function(e,t){var n=t.timeout*Math.pow(t.timeoutFactor,e);return Math.min(t.maxRetryTimeout,n)},t.retryable=p,t.liveStreamingServerResponseToResult=v;var g=1;function m(e,n,a,c,h){var m=this;void 0===h&&(h=t.DEFAULT_RETRY_CONFIG),g+=1;var y,b,_={sid:a.sid,command:"convergeAllocateEdge",uid:"666",appId:a.appId,ts:Math.floor(Date.now()/1e3),seq:g,requestId:g,version:s.VERSION,cname:a.cname},E={service_name:n,json_body:JSON.stringify(_)},S=e[0];return p((function(){return i(m,void 0,void 0,(function(){var e,t,i,a,d;return o(this,(function(o){switch(o.label){case 0:return y=Date.now(),[4,f(S,{data:E,cancelToken:c,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}})];case 1:if(e=o.sent(),b=Date.now()-y,0!==e.code)throw i=new u.AgoraRTCError(u.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0}),l.default.error(i.toString()),i;if(200!==(t=JSON.parse(e.json_body)).code)throw i=new u.AgoraRTCError(u.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center error, code: "+t.code+", reason: "+t.reason),l.default.error(i.toString()),i;if(!t.servers||0===t.servers.length)throw i=new u.AgoraRTCError(u.AgoraRTCErrorCode.UNEXPECTED_RESPONSE,"live streaming app center empty server"),l.default.error(i.toString()),i;if(a=v(t,n),s.getParameter("LIVE_STREAMING_ADDRESS"))try{d=JSON.parse(s.getParameter("LIVE_STREAMING_ADDRESS")),a.addressList=d}catch(e){a.addressList=[s.getParameter("LIVE_STREAMING_ADDRESS")]}return[2,r(r({},a),{responseTime:b})]}}))}))}),(function(t,r){return d.report.requestApWorkerEvent(a.sid,{success:!0,sc:200,serviceName:n,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===r,responseTime:b,serverIp:e[r%e.length]}),!1}),(function(t,r){return d.report.requestApWorkerEvent(a.sid,{success:!1,sc:t.data&&t.data.code||200,serviceName:n,responseTime:b,serverIp:e[r%e.length]}),!!(t.code!==u.AgoraRTCErrorCode.OPERATION_ABORT&&t.code!==u.AgoraRTCErrorCode.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(S=e[(r+1)%e.length],!0)}),h)}t.requestLiveStreamingWorkerManager=m,t.getLiveStreamingWorkerMangerResult=function(e,t,n){return i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:r=s.getParameter("UAP_AP").map((function(e){return t.proxyServer?"https://"+t.proxyServer+"/ap/?url="+e+"/api/v1?action=uap":"https://"+e+"/api/v1?action=uap"})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,m(r,e,t,n)];case 2:return[2,o.sent()];case 3:throw i=o.sent(),d.report.requestApWorkerEvent(t.sid,{success:!1,sc:i.data&&i.data.code||200,serviceName:e,responseTime:i.data&&i.data.responseTime}),i;case 4:return[2]}}))}))}},function(e,t,n){var r=n(70),i=n(71),o=n(34),a=n(72);e.exports=function(e){return r(e)||i(e)||o(e)||a()}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(35);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),o=function(){function e(){this._events={},this.addListener=this.on}return e.prototype.getListeners=function(e){return this._events[e]?this._events[e].map((function(e){return e.listener})):[]},e.prototype.on=function(e,t){this._events[e]||(this._events[e]=[]);var n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!1})},e.prototype.once=function(e,t){this._events[e]||(this._events[e]=[]);var n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!0})},e.prototype.off=function(e,t){if(this._events[e]){var n=this._events[e],r=this._indexOfListener(n,t);-1!==r&&n.splice(r,1),0===this._events[e].length&&delete this._events[e]}},e.prototype.removeAllListeners=function(e){e?delete this._events[e]:this._events={}},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._events[e]||(this._events[e]=[]);for(var r=this._events[e].map((function(e){return e})),i=0;i<r.length;i+=1){var o=r[i];o.once&&this.off(e,o.listener),o.listener.apply(this,t||[])}},e.prototype._indexOfListener=function(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1},e}();function a(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var a=null,s=null;if(e.emit.apply(e,r([t],n,[function(e){a=e},function(e){s=e}])),null!==s)throw s;if(null===a)throw new i.AgoraRTCError(i.AgoraRTCErrorCode.UNEXPECTED_ERROR,"handler is not sync");return a}t.EventEmitter=o,t.emitAsPromise=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return 0===e.getListeners(t).length?Promise.reject(new i.AgoraRTCError(i.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not emit promise")):new Promise((function(i,o){e.emit.apply(e,r([t],n,[i,o]))}))},t.emitAsInvokerNoResponse=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return 0===e.getListeners(t).length?null:a.apply(void 0,r([e,t],n))},t.emitAsInvoker=a},function(e,t,n){e.exports=n(78)},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(18);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){var r=n(18),i=n(84),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(s=n(42)),s),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(o)})),e.exports=c}).call(this,n(83))},function(e,t,n){"use strict";var r=n(18),i=n(85),o=n(39),a=n(87),s=n(90),c=n(91),u=n(43);e.exports=function(e){return new Promise((function(t,l){var d=e.data,h=e.headers;r.isFormData(d)&&delete h["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",v=e.auth.password||"";h.Authorization="Basic "+btoa(p+":"+v)}var g=a(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),o(g,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f};i(t,l,r),f=null}},f.onabort=function(){f&&(l(u("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){l(u("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),l(u(t,e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var m=n(92),y=(e.withCredentials||c(g))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;y&&(h[e.xsrfHeaderName]=y)}if("setRequestHeader"in f&&r.forEach(h,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete h[t]:f.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),l(e),f=null)})),void 0===d&&(d=null),f.send(d)}))}},function(e,t,n){"use strict";var r=n(86);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t){t=t||{};var n={},i=["url","method","params","data"],o=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(i,(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(o,(function(i){r.isObject(t[i])?n[i]=r.deepMerge(e[i],t[i]):void 0!==t[i]?n[i]=t[i]:r.isObject(e[i])?n[i]=r.deepMerge(e[i]):void 0!==e[i]&&(n[i]=e[i])})),r.forEach(a,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var s=i.concat(o).concat(a),c=Object.keys(t).filter((function(e){return-1===s.indexOf(e)}));return r.forEach(c,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(59)),c=a(n(62)),u=a(n(63)),l=o(n(0)),d=n(2),h=s.default.Root.fromJSON(u),f=function(){function e(){this.requestArray=[],this.retryBackoffCount=0,this.state=0}return e.prototype.setProxy=function(e){this.proxyServer=e},e.prototype.sendReportList=function(e,t){var n=this,r=this._dataConvert("ProtoRaws",{vid:t,sendTs:Math.round(Date.now()/1e3),payloads:e.map((function(e){return{id:c[e.type],msg:n._dataConvert(e.type,e.data)}}))});this.send(r)},e.prototype._dataConvert=function(e,t){var n;try{n=h.lookupType("protobuf."+e)}catch(t){l.default.error("[send-proto] invalid proto name "+e)}var r=n.create(t);return n.encode(r).finish()},e.prototype.send=function(e){0==this.state?this._send(e):this.requestArray.push(e)},e.prototype._send=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),this.state=1,[4,this.request(e)];case 1:return t.sent(),this.retryBackoffCount=0,0!==this.requestArray.length?this._send(this.requestArray.shift()):this.state=0,[3,4];case 2:return t.sent(),[4,p(this.retryBackoffCount++<2?200:1e4)];case 3:return t.sent(),this._send(e),[3,4];case 4:return[2]}}))}))},e.prototype.request=function(e){return r(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:t=this._getAddress(),n=this._getBackupAddress(),r.label=1;case 1:return r.trys.push([1,3,,5]),[4,this._request(t,e)];case 2:return r.sent(),[3,5];case 3:return r.sent(),[4,this._request(n,e)];case 4:return r.sent(),[3,5];case 5:return[2]}}))}))},e.prototype._request=function(e,t){return this._post(e,t)},e.prototype._post=function(e,t){var n=this;return new Promise((function(r,i){var o=new XMLHttpRequest;o.timeout=d.getParameter("HTTP_CONNECT_TIMEOUT"),o.open("POST",e,!0),o.setRequestHeader("Content-type","application/octet-stream"),n.proxyServer||(o.setRequestHeader("Cache-Control","no-cache, no-store"),o.setRequestHeader("Pragma","no-cache"),o.setRequestHeader("Expires","0")),o.onload=function(e){r(o.responseText)},o.onerror=function(e){i(e)},o.ontimeout=function(e){i(e)},o.send(t)}))},e.prototype._getAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+d.getParameter("EVENT_REPORT_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+d.getParameter("EVENT_REPORT_DOMAIN")+":6443/events/proto-raws"},e.prototype._getBackupAddress=function(){return this.proxyServer?"https://"+this.proxyServer+"/rs/?h="+d.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+"&p=6443&d=events/proto-raws":"https://"+d.getParameter("EVENT_REPORT_BACKUP_DOMAIN")+":6443/events/proto-raws"},e}();t.default=f;var p=function(e){return new Promise((function(t){window.setTimeout(t,e)}))}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a,s=o(n(0)),c=n(15);!function(e){e.NEW="new",e.PREPARING_OFFER="preparing-offer",e.OFFER_SENT="offer-sent",e.ESTABLISHED="established",e.CLOSED="closed"}(a||(a={}));var u=function(){function e(e){this.candidate=null,this.state=a.NEW,this.config=e,this.isSubscriber=this.config.isSubscriber,this.peerConnection=this.initPeecConnection(e),this.peerConnection.onicecandidate=this._onicecandidate.bind(this),this.peerConnection.oniceconnectionstatechange=this._oniceconnectionstatechange.bind(this),this.peerConnection.onaddstream=this._onaddstream.bind(this),this.peerConnection.ontrack=this._ontrack.bind(this),this.processSignalingMessage=this.setAnswer.bind(this),this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.setLocalSDP.bind(this)),this.sendVideoStats={id:"",type:"",mediaType:"",googCodecName:this.config.codec.toUpperCase(),bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},this.sendAudioStats={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},this.receiveAudioStats={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},this.receiveVideoStats={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"}}return e.prototype.addStream=function(e){this.peerConnection.addStream(e)},e.prototype.setRtpSenderParameters=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))},e.prototype.setAnswer=function(e){var t=JSON.parse(e);this.peerConnection.setRemoteDescription(new RTCSessionDescription({sdp:t.sdp,type:"answer"})),this.onsignalingmessage&&this.onsignalingmessage("")},e.prototype.close=function(){this.peerConnection.close()},e.prototype.getStats=function(e,t){if(void 0===t&&(t=500),t=t>500?500:t,Date.now()-this.lastTimeGetStats<t){var n=[];this.config.isSubscriber?(n.push(this.receiveVideoStats),n.push(this.receiveAudioStats)):(n.push(this.sendAudioStats),n.push(this.sendVideoStats)),n.push({id:"time",startTime:this.connectedTime,timestamp:Date.now()}),e&&e(n)}else this._getStats(e)},e.prototype._getStats=function(e){var t=this,n=[];this.peerConnection.getStats(null).then((function(r){t.lastTimeGetStats=Date.now(),Object.keys(r).map((function(e){var n=r[e];t.config.isSubscriber?n.type&&"inboundrtp"===n.type&&n.mediaType&&"audio"===n.mediaType?(t.receiveAudioStats.id=n.id+"recv",t.receiveAudioStats.type=n.type+"",t.receiveAudioStats.mediaType=n.mediaType+"",t.receiveAudioStats.packetsReceived=n.packetsReceived+"",t.receiveAudioStats.bytesReceived=n.bytesReceived+"",t.receiveAudioStats.packetsLost=n.packetsLost+"",t.receiveAudioStats.googJitterReceived=n.jitter+""):n.type&&"inboundrtp"===n.type&&n.mediaType&&"video"===n.mediaType?(t.receiveVideoStats.id=n.id+"recv",t.receiveVideoStats.type=n.type+"",t.receiveVideoStats.mediaType=n.mediaType+"",t.receiveVideoStats.packetsReceived=n.packetsReceived+"",t.receiveVideoStats.bytesReceived=n.bytesReceived+"",t.receiveVideoStats.packetsLost=n.packetsLost+"",t.receiveVideoStats.googJitterBufferMs=n.jitter+"",t.receiveVideoStats.googPlisSent=n.pliCount+"",t.receiveVideoStats.googFirsSent=n.firCount+"",t.receiveVideoStats.googNacksSent=n.nackCount+""):n.remoteSource&&n.type&&"track"===n.type&&n.trackIdentifier&&-1!==n.trackIdentifier.indexOf("v")?(t.receiveVideoStats.googFrameHeightReceived=n.frameHeight+"",t.receiveVideoStats.googFrameWidthReceived=n.frameWidth+"",t.receiveVideoStats.googFrameRateDecoded=n.framesPerSecond+"",t.receiveVideoStats.googFrameRateOutput=n.framesPerSecond+"",t.receiveVideoStats.googFrameRateReceived=n.framesPerSecond+"",t.receiveVideoStats.googFramesDecoded=n.framesDecoded+"",t.receiveVideoStats.googFrameReceived=n.framesReceived+""):n.remoteSource&&n.type&&"track"===n.type&&n.trackIdentifier&&-1!==n.trackIdentifier.indexOf("a")&&(t.receiveAudioStats.audioOutputLevel=n.audioLevel+""):!n.isRemote&&n.type&&"outboundrtp"===n.type&&n.mediaType&&"audio"===n.mediaType?(t.sendAudioStats.id=n.id+"send",t.sendAudioStats.type=n.type+"",t.sendAudioStats.mediaType=n.mediaType+"",t.sendAudioStats.packetsSent=n.packetsSent+"",t.sendAudioStats.bytesSent=n.bytesSent+""):!n.isRemote&&n.type&&"outboundrtp"===n.type&&n.mediaType&&"video"===n.mediaType?(t.sendVideoStats.id=n.id+"send",t.sendVideoStats.type=n.type+"",t.sendVideoStats.mediaType=n.mediaType+"",t.sendVideoStats.packetsSent=n.packetsSent+"",t.sendVideoStats.bytesSent=n.bytesSent+"",t.sendVideoStats.googRtt=n.roundTripTime+"",t.sendVideoStats.googPlisReceived=n.pliCount+"",t.sendVideoStats.googFirsReceived=n.firCount+"",t.sendVideoStats.googNacksReceived=n.nackCount+""):!n.remoteSource&&n.type&&"track"===n.type&&n.framesSent&&0!==n.framesSent&&(t.sendVideoStats.googFrameHeightSent=n.frameHeight+"",t.sendVideoStats.googFrameHeightInput=n.frameHeight+"",t.sendVideoStats.googFrameWidthSent=n.frameWidth+"",t.sendVideoStats.googFrameWidthInput=n.frameWidth+"",t.sendVideoStats.googFramesEncoded=n.framesSent+"",t.sendVideoStats.googFrameRateSent=n.framesPerSecond+"")})),t.config.isSubscriber?(n.push(t.receiveVideoStats),n.push(t.receiveAudioStats)):(n.push(t.sendAudioStats),n.push(t.sendVideoStats)),n.push({id:"time",startTime:t.connectedTime,timestamp:Date.now()}),e&&e(n)}))},e.prototype.getStatsRate=function(e){this.getStats(e)},e.prototype.initPeecConnection=function(e){var t=e.stunServerUrl,n=e.turnServer,r=e.iceServers;return this.pcConfig={iceServers:[]},r instanceof Array?this.pcConfig.iceServers=e.iceServers:t&&(t instanceof Array?t.map((function(e){"string"==typeof e&&""!==e&&this.pcConfig.iceServers.push({urls:e})})):"string"==typeof t&&""!==t&&this.pcConfig.iceServers.push({urls:t})),n&&(n instanceof Array?n.map((function(e){"string"==typeof e.url&&""!==e.url&&this.pcConfig.iceServers.push({username:e.username,credential:e.credential,url:e.url})})):"auto"!==n.mode&&"manual"!==n.mode||(n.udpport&&this.pcConfig.iceServers.push({username:n.username,credential:n.credential,credentialType:"password",urls:"turn:"+n.url+":"+n.udpport+"?transport=udp"}),"string"==typeof n.tcpport&&""!==n.tcpport&&this.pcConfig.iceServers.push({username:n.username,credential:n.credential,credentialType:"password",urls:"turn:"+n.url+":"+n.tcpport+"?transport=tcp"}),!0===n.forceturn&&(this.pcConfig.iceTransportPolicy="relay"))),new c.RTCPeerConnection(this.pcConfig)},e.prototype._ontrack=function(e){this.onaddstream&&this.onaddstream(e,"ontrack")},e.prototype._onaddstream=function(e){this.onaddstream&&this.onaddstream(e,"onaddstream")},e.prototype._oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(this.state=a.ESTABLISHED,this.connectedTime=Date.now()),this.oniceconnectionstatechange&&this.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},e.prototype._onicecandidate=function(e){!this.candidate&&e&&(this.candidate=e.candidate,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.editLocalSDP.bind(this)).then(this.setLocalSDP.bind(this)).then(this.sendOffer.bind(this)).catch())},e.prototype.setLocalSDP=function(e){return this.peerConnection.setLocalDescription(new RTCSessionDescription({sdp:e.sdp,type:"offer"})),this.state=a.PREPARING_OFFER,e},e.prototype.editLocalSDP=function(e){return e.sdp=this.setBandWidth(e.sdp),e.sdp=this.reviseOpus(e.sdp),e.sdp=this.addCandidate(e.sdp),e},e.prototype.setSendRecv=function(e){return(e=(e=e.replace(/a=recvonly\r\n/g,"a=sendrecv\r\n")).replace(/a=sendonly\r\n/g,"a=sendrecv\r\n")).replace(/a=inactive\r\n/g,"a=sendrecv\r\n")},e.prototype.setBandWidth=function(e){var t,n,r=this.config,i=r.codec,o=r.minVideoBW,a=r.maxVideoBW,c=r.maxAudioBW,u=r.clientId;if((t=e.match(/m=video.*\r\n/))&&o&&a){n=t[0]+"b=AS:"+a+"\r\n";var l=0,d=0;"h264"===i?(l=e.search(/a=rtpmap:(\d+) H264\/90000\r\n/),d=e.search(/H264\/90000\r\n/)):"vp8"===i?(l=e.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),d=e.search(/VP8\/90000\r\n/)):"vp9"===i&&(l=e.search(/a=rtpmap:(\d+) VP9\/90000\r\n/),d=e.search(/VP9\/90000\r\n/)),-1!==l&&-1!==d&&d-l>10&&(n=n+"a=fmtp:"+e.slice(l+9,d-1)+" x-google-min-bitrate="+o+"\r\n"),e=e.replace(t[0],n),s.default.debug("["+u+"]Set Video Bitrate - min:"+o+" max:"+a)}return(t=e.match(/m=audio.*\r\n/))&&c&&(n=t[0]+"b=AS:"+c+"\r\n",e=e.replace(t[0],n)),e},e.prototype.reviseOpus=function(e){return(e=e.replace(/a=rtpmap:102 opus\/48000\/2/g,"a=rtpmap:111 opus/48000/2")).replace(/m=audio 9 UDP\/TLS\/RTP\/SAVPF 102 0 8 97 13 118 101/g,"m=audio 9 UDP/TLS/RTP/SAVPF 111 0 8 97 13 118 101")},e.prototype.addCandidate=function(e){return e+"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"},e.prototype.sendOffer=function(e){this.config.callback(JSON.stringify({sdp:e.sdp,messageType:"OFFER",tiebreaker:Math.floor(429496723*Math.random()+1)})),this.state=a.OFFER_SENT},e}();t.default=u},function(e,t,n){var r=n(65),i=n(66),o=n(34),a=n(67);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()}},function(e,t,n){var r,i,o;i=this,o=function(){"use strict";var e,t=this;function n(e){t.console&&(t.console.error?t.console.error(e):t.console.log&&t.console.log(e))}function r(e,t,r,i){var o=i||n,a=e.createShader(r);return e.shaderSource(a,t),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS)?a:(o("*** Error compiling shader '"+a+"':"+e.getShaderInfoLog(a)),e.deleteShader(a),null)}function i(e,t,r,i,o){var a=o||n,s=e.createProgram();return t.forEach((function(t){e.attachShader(s,t)})),r&&r.forEach((function(t,n){e.bindAttribLocation(s,i?i[n]:n,t)})),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)?s:(a("Error in program linking:"+e.getProgramInfoLog(s)),e.deleteProgram(s),null)}(e=e||t)===e.top&&(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","http://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html"));var o,a=["VERTEX_SHADER","FRAGMENT_SHADER"];return!document.documentMode&&!!window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(o=HTMLCanvasElement.prototype.getContext,function(){var e=arguments;return"webgl"===e[0]&&((e=[].slice.call(arguments))[0]="experimental-webgl"),o.apply(this,e)})),{createProgram:i,createProgramFromSources:function(e,t,n,o,s){for(var c=[],u=0;u<t.length;++u)c.push(r(e,t[u],e[a[u]],s));return i(e,c,n,o,s)}}},void 0===(r=function(){return o.call(i)}.apply(t,[]))||(e.exports=r)},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(68),s=n(4),c=o(n(0));t.getSupportedCodec=function(e){return r(void 0,void 0,void 0,(function(){var t,n,r,o,l;return i(this,(function(i){switch(i.label){case 0:return t={video:[],audio:[]},"undefined"!=typeof window?[3,1]:(c.default.error("getSupportedCodec: NOT_BROWSER_ENV"),[2,Promise.reject("NOT_BROWSER_ENV")]);case 1:try{n=a.createRTCPeerConnection({iceServers:[]})}catch(e){return c.default.error("Failed to init RTCPeerConnection",e),[2,Promise.reject(e)]}return n?[3,2]:(c.default.warning("getSupportedCodec: no RTCPeerConnection constructor is detected"),[2,Promise.resolve(t)]);case 2:return e&&e.stream?[3,7]:(r={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},o=void 0,(s.isSafari()||s.isFireFox()||s.isWeChatBrowser())&&n.addTransceiver?(n.addTransceiver("audio"),n.addTransceiver("video"),[4,n.createOffer()]):[3,4]);case 3:return o=i.sent(),[3,6];case 4:return[4,new Promise((function(e,t){var i=setTimeout((function(){t("CREATEOFFER_TIMEOUT")}),3e3);n.createOffer((function(t){clearTimeout(i),e(t)}),(function(e){clearTimeout(i),t(e)}),r)}))];case 5:o=i.sent(),i.label=6;case 6:return n.close(),l=o.sdp,[2,u(l)];case 7:return e.stream.getTracks&&n.addTrack?e.stream.getTracks().forEach((function(t){n.addTrack(t,e.stream)})):n.addStream(e.stream),o=void 0,s.isSafari()||s.isFireFox()?[4,n.createOffer()]:[3,9];case 8:return o=i.sent(),[3,11];case 9:return[4,new Promise((function(e,t){n.createOffer(e,t)}))];case 10:o=i.sent(),i.label=11;case 11:return n.close(),l=o.sdp,[2,u(l)]}}))}))};var u=function(e){var t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),Promise.resolve(t)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(10);function a(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}t.encryptRSA=function(e){return r(void 0,void 0,void 0,(function(){var t,n,r,s;return i(this,(function(i){switch(i.label){case 0:return t=o.base64ToUint8Array("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),[4,window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"])];case 1:return n=i.sent(),c=e,r=(new TextEncoder).encode(c),[4,window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,r)];case 2:return s=i.sent(),[2,a(new Uint8Array(s))]}var c}))}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(0)),s=n(75),c=n(24),u=n(1),l=n(27);t.addLiveStreamingCapability=function(e,t){var n=this,o=function(t){var n=t.type;if(!e.joinInfo)return new c.AgoraRTCError(c.AgoraRTCErrorCode.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();switch(n){case l.LiveStreamingServiceMode.INJECT:return e._injectStreamingClient||(e._injectStreamingClient=new s.AgoraRTCLiveStreamingClient(e.joinInfo),e._injectStreamingClient.onInjectStatusChange=function(t,n,r){e.gatewayClient.dispatchEvent({type:"streamInjectedStatus",url:r,status:t})}),e._injectStreamingClient;case l.LiveStreamingServiceMode.RAW:return e._liveRawStreamingClient||(e._liveRawStreamingClient=new s.AgoraRTCLiveStreamingClient(e.joinInfo),e._liveRawStreamingClient.setGatewayConnectionState(e.getConnectionState()),e.on("connection-state-change",(function(t){e._liveRawStreamingClient.setGatewayConnectionState(t.curState),"CONNECTING"===t.prevState&&"CONNECTED"===t.curState&&e._liveRawStreamingClient&&e._liveRawStreamingClient.resetAllTask()})),e._liveRawStreamingClient.onLiveStreamError=function(t,n){a.default.error("LIVE_STREAMING_ERROR",n.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:t,reason:n.code})},e._liveRawStreamingClient.onLiveStreamWarning=function(t,n){a.default.warning("LIVE_STREAMING_WARNING",n.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:t,reason:n.code})}),e._liveRawStreamingClient;case l.LiveStreamingServiceMode.TRANSCODE:return e._liveTranscodeStreamingClient||(e._liveTranscodeStreamingClient=new s.AgoraRTCLiveStreamingClient(e.joinInfo),e._liveTranscodeStreamingClient.setGatewayConnectionState(e.getConnectionState()),e.on("connection-state-change",(function(t){e._liveTranscodeStreamingClient.setGatewayConnectionState(t.curState),"CONNECTING"===t.prevState&&"CONNECTED"===t.curState&&e._liveTranscodeStreamingClient&&e._liveTranscodeStreamingClient.resetAllTask()})),e._liveTranscodeStreamingClient.onLiveStreamError=function(t,n){a.default.error("LIVE_STREAMING_ERROR",n.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:t,reason:n.code})},e._liveTranscodeStreamingClient.onLiveStreamWarning=function(t,n){a.default.warning("LIVE_STREAMING_WARNING",n.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingWarning",url:t,reason:n})}),e._liveTranscodeStreamingClient}};e.gatewayClient.addEventListener("join",(function(t){e._injectStreamingClient&&e._injectStreamingClient.resetAllTask()})),e.gatewayClient.addEventListener("stream-unpublished",(function(t){t.options&&0===t.options.streamType&&(e._liveRawStreamingClient&&e._liveRawStreamingClient.resetAllTask(),e._liveTranscodeStreamingClient&&e._liveTranscodeStreamingClient.resetAllTask())})),e.gatewayClient.addEventListener("stream-published",(function(e){})),e.startLiveStreaming=function(n,r){a.default.debug("startLiveStreaming");var i=u.report.reportApiInvoke(t.sessionId,{name:"Client.startLiveStreaming",options:arguments,tag:"tracer"});if(e.gatewayClient&&"audience"===e.gatewayClient.role){var o={code:403,reason:"AUDIENCE_STREAMING_FORBIDDEN"};throw i(o),o}var s=e._startLiveStreaming(n,r);return s.then((function(e){i(null,e)})).catch((function(t){a.default.error("LIVE_STREAMING_ERROR",t.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:n,reason:t.code}),i(t)})),s},e._startLiveStreaming=function(s,u){return r(n,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return u||("vp8"===t.codec&&a.default.warning("VP8 is not supported by raw_streaming. Subscriber side will suffer"),"vp9"===t.codec&&a.default.warning("VP9 is not supported by raw_streaming. Subscriber side will suffer"),"rtc"===t.mode&&a.default.warning("RTC mode is not supported by raw_streaming. Subscriber side will suffer")),(e._liveRawStreamingClient&&e._liveRawStreamingClient.haveUrl(s)||e._liveTranscodeStreamingClient&&e._liveTranscodeStreamingClient.haveUrl(s))&&new c.AgoraRTCError(c.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw(),n=u?l.LiveStreamingServiceMode.TRANSCODE:l.LiveStreamingServiceMode.RAW,[4,o({type:n}).startLiveStreamingTask(s,n)];case 1:return r.sent(),e.gatewayClient.dispatchEvent({type:"liveStreamingStarted",url:s}),[2]}}))}))},e.setLiveTranscoding=function(n){a.default.debug("setLiveTranscoding: "+JSON.stringify(n));var r=u.report.reportApiInvoke(t.sessionId,{name:"Client.setLiveTranscoding",options:arguments,tag:"tracer"});return o({type:l.LiveStreamingServiceMode.TRANSCODE}).setTranscodingConfig(n).then((function(){e.gatewayClient.dispatchEvent({type:"liveTranscodingUpdated"}),r(null)})).catch((function(t){a.default.error("SET_LIVE_TRANSCODING_ERROR",t.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",reason:t.code}),r(t)}))},e.stopLiveStreaming=function(n){var r=u.report.reportApiInvoke(t.sessionId,{name:"Client.stopLiveStreaming",options:arguments,tag:"tracer"}),i=e._stopLiveStreaming(n);return i.then((function(e){r(null,e)})).catch((function(t){a.default.error("STOP_LIVE_STREAMING_ERROR",t.toString()),e.gatewayClient.dispatchEvent({type:"liveStreamingFailed",url:n,reason:t.code}),r(t)})),i},e._stopLiveStreaming=function(t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return a.default.debug("stopLiveStreaming: "+JSON.stringify(t)),n=[e._liveRawStreamingClient,e._liveTranscodeStreamingClient],[4,Promise.all(n.map((function(e){return e&&e.haveUrl(t)&&e.stopLiveStreamingTask(t)})))];case 1:return r.sent(),a.default.debug("stopLiveStreaming sucess: "+JSON.stringify(t)),e.gatewayClient.dispatchEvent({type:"liveStreamingStopped",url:t}),[2]}}))}))},e.addInjectStreamUrl=function(n,r){var i=u.report.reportApiInvoke(t.sessionId,{name:"Client.addInjectStreamUrl",options:[n,r],tag:"tracer"});if("audience"===e.gatewayClient.role){var o={code:403,reason:"AUDIENCE_INJECTING_FORBIDDEN"};throw i(o),o}var s=e._addInjectStreamUrl(n,r);return s.then((function(e){i(null,e)})).catch((function(e){a.default.error("ADD_INJECT_STREAM_ERROR",e.toString()),i(e)})),s},e._addInjectStreamUrl=function(e,t){return r(n,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return(n=o({type:l.LiveStreamingServiceMode.INJECT})).setInjectStreamConfig(t,0),[4,n.startLiveStreamingTask(e,l.LiveStreamingServiceMode.INJECT)];case 1:return r.sent(),[2]}}))}))},e.removeInjectStreamUrl=function(n){return r(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){return r=u.report.reportApiInvoke(t.sessionId,{name:"Client.removeInjectStreamUrl",options:[n],tag:"tracer"}),(o=e._removeInjectStreamUrl(n)).then((function(e){r(null,e)})).catch((function(e){a.default.error("REMOVE_INJECT_STREAM_ERROR",e.toString()),r(e)})),[2,o]}))}))},e._removeInjectStreamUrl=function(e){return r(n,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,o({type:l.LiveStreamingServiceMode.INJECT}).stopLiveStreamingTask(e)];case 1:return t.sent(),[2]}}))}))},e._terminateLiveStreaming=function(){return r(n,void 0,void 0,(function(){return i(this,(function(t){return[e._injectStreamingClient,e._liveRawStreamingClient,e._liveTranscodeStreamingClient].forEach((function(e){e&&e.terminate()})),[2]}))}))}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(5)),o=r(n(0)),a=n(10);t.default=function(e,t){void 0===t&&(t={width:160,height:120,framerate:15});var n=t.width,r=t.height,s=t.framerate,c=e.stream;if(!c)throw i.default.INVALID_LOCAL_STREAM;if(!c.getVideoTracks()[0])throw i.default.HIGH_STREAM_NOT_VIDEO_TRACE;var u=c.getVideoTracks()[0];o.default.debug("Start getLowStream");var l=document.createElement("video"),d=document.createElement("canvas");l.setAttribute("style","display:none"),l.setAttribute("muted",""),l.muted=!0,l.setAttribute("autoplay",""),l.autoplay=!0,l.setAttribute("playsinline",""),d.setAttribute("style","display:none"),d.setAttribute("width",n.toString()),d.setAttribute("height",r.toString());var h=d.getContext("2d");if(!h)throw new Error("not get canvas context");l.srcObject=c,document.body.append(l),document.body.append(d),l.play(),o.default.debug("Start render lowStream");var f=a.audioTimerLoop((function(){return function(){if(l.paused&&l.play(),l.videoHeight>2&&l.videoWidth>2){var t=l.videoWidth,n=l.videoHeight/t,r=d.width*n;Math.abs(r-d.height)>=2&&(o.default.debug("adjust low stream resolution",d.width+"x"+d.height+" -> "+d.width+"x"+r),d.height=r)}h.drawImage(l,0,0,d.width,d.height);var i=e.stream;if(i){var a=i.getVideoTracks()[0];u!==a&&(o.default.debug("adjust low stream track"),l.srcObject=i,u=a)}}()}),s),p=d.captureStream(s),v=p.getVideoTracks()[0];return v.requestFrame&&v.requestFrame(),p.clean=function(){o.default.debug("Start clean lowStream"),f(),(l||l.parentNode||l.parentNode.removeChild)&&l.parentNode.removeChild(l),(d||d.parentNode||d.parentNode.removeChild)&&d.parentNode.removeChild(d),o.default.debug("Clean lowStream")},p}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(module,exports,__nested_webpack_require_660171__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(undefined){"use strict";!function(e,t,n){var r=function n(r){var i=t[r];return i||e[r][0].call(i=t[r]={exports:{}},n,i,i.exports),i.exports}(16);r.util.global.protobuf=r,__WEBPACK_AMD_DEFINE_ARRAY__=[__nested_webpack_require_660171__(61)],(__WEBPACK_AMD_DEFINE_RESULT__=function(e){return e&&e.isLong&&(r.util.Long=e,r.configure()),r}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),module&&module.exports&&(module.exports=r)}({1:[function(e,t,n){t.exports=function(e,t){for(var n=new Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,a){n[r]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,a(e))}}))}},{}],2:[function(e,t,n){var r=n;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var i=new Array(64),o=new Array(123),a=0;a<64;)o[i[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;r.encode=function(e,t,n){for(var r,o=null,a=[],s=0,c=0;t<n;){var u=e[t++];switch(c){case 0:a[s++]=i[u>>2],r=(3&u)<<4,c=1;break;case 1:a[s++]=i[r|u>>4],r=(15&u)<<2,c=2;break;case 2:a[s++]=i[r|u>>6],a[s++]=i[63&u],c=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=i[r],a[s++]=61,1===c&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))},r.decode=function(e,t,n){for(var r,i=n,a=0,s=0;s<e.length;){var c=e.charCodeAt(s++);if(61===c&&a>1)break;if((c=o[c])===undefined)throw Error("invalid encoding");switch(a){case 0:r=c,a=1;break;case 1:t[n++]=r<<2|(48&c)>>4,r=c,a=2;break;case 2:t[n++]=(15&r)<<4|(60&c)>>2,r=c,a=3;break;case 3:t[n++]=(3&r)<<6|c,a=0}}if(1===a)throw Error("invalid encoding");return n-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{}],3:[function(e,t,n){function r(e,t){"string"==typeof e&&(t=e,e=undefined);var n=[];function i(e){if("string"!=typeof e){var t=o();if(r.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var a=Object.keys(e),s=new Array(a.length+1),c=new Array(a.length),u=0;u<a.length;)s[u]=a[u],c[u]=e[a[u++]];return s[u]=t,Function.apply(null,s).apply(null,c)}return Function(t)()}for(var l=new Array(arguments.length-1),d=0;d<l.length;)l[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var n=l[d++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"})),d!==l.length)throw Error("parameter count mismatch");return n.push(e),i}function o(r){return"function "+(r||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return i.toString=o,i}t.exports=r,r.verbose=!1},{}],4:[function(e,t,n){function r(){this._listeners={}}t.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(e===undefined)this._listeners={};else if(t===undefined)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},{}],5:[function(e,t,n){t.exports=o;var r=e(1),i=e(7)("fs");function o(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&i&&i.readFile?i.readFile(e,(function(r,i){return r&&"undefined"!=typeof XMLHttpRequest?o.xhr(e,t,n):r?n(r):n(null,t.binary?i:i.toString("utf8"))})):o.xhr(e,t,n):r(o,this,e,t)}o.xhr=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4!==r.readyState)return undefined;if(0!==r.status&&200!==r.status)return n(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var i=0;i<r.responseText.length;++i)e.push(255&r.responseText.charCodeAt(i))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,r.responseText)},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}},{1:1,7:7}],6:[function(e,t,n){function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function s(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?a:s,e.readFloatBE=r?s:a}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,a=8388607&r;return 255===o?a?NaN:i*(1/0):0===o?1401298464324817e-60*i*a:i*Math.pow(2,o-150)*(a+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,o),e.readFloatLE=n.bind(null,a),e.readFloatBE=n.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function s(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?a:s,e.readDoubleBE=r?s:a}():function(){function t(e,t,n,r,i,o){var a=r<0?1:0;if(a&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((a<<31|2146435072)>>>0,i,o+n);else{var s;if(r<22250738585072014e-324)e((s=r/5e-324)>>>0,i,o+t),e((a<<31|s/4294967296)>>>0,i,o+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=r*Math.pow(2,-c))>>>0,i,o+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,i,o+n)}}}function n(e,t,n,r,i){var o=e(r,i+t),a=e(r,i+n),s=2*(a>>31)+1,c=a>>>20&2047,u=4294967296*(1048575&a)+o;return 2047===c?u?NaN:s*(1/0):0===c?5e-324*s*u:s*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=n.bind(null,a,0,4),e.readDoubleBE=n.bind(null,s,4,0)}(),e}function i(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function o(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=r(r)},{}],7:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},{}],8:[function(e,t,n){var r=n,i=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},o=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=i(e),r="";n&&(r=t.shift()+"/");for(var o=0;o<t.length;)".."===t[o]?o>0&&".."!==t[o-1]?t.splice(--o,2):n?t.splice(o,1):++o:"."===t[o]?t.splice(o,1):++o;return r+t.join("/")};r.resolve=function(e,t,n){return n||(t=o(t)),i(t)?t:(n||(e=o(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?o(e+"/"+t):t)}},{}],9:[function(e,t,n){t.exports=function(e,t,n){var r=n||8192,i=r>>>1,o=null,a=r;return function(n){if(n<1||n>i)return e(n);a+n>r&&(o=e(r),a=0);var s=t.call(o,a,a+=n);return 7&a&&(a=1+(7|a)),s}}},{}],10:[function(e,t,n){var r=n;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],a=0;t<n;)(r=e[t++])<128?o[a++]=r:r>191&&r<224?o[a++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(r>>10),o[a++]=56320+(1023&r)):o[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},r.write=function(e,t,n){for(var r,i,o=n,a=0;a<e.length;++a)(r=e.charCodeAt(a))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&i),++a,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},{}],11:[function(e,t,n){var r=n,i=e(14),o=e(33);function a(e,t,n,r){if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",r);for(var o=t.resolvedType.values,a=Object.keys(o),s=0;s<a.length;++s)t.repeated&&o[a[s]]===t.typeDefault&&e("default:"),e("case%j:",a[s])("case %i:",o[a[s]])("m%s=%j",r,o[a[s]])("break");e("}")}else e('if(typeof d%s!=="object")',r)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,n,r);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":e("m%s=String(d%s)",r,r);break;case"bool":e("m%s=Boolean(d%s)",r,r)}}return e}function s(e,t,n,r){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,n,r,r):e("d%s=types[%i].toObject(m%s,o)",r,n,r);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,o?"true":"",r);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:e("d%s=m%s",r,r)}}return e}r.fromObject=function(e){var t=e.fieldsArray,n=o.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var r=0;r<t.length;++r){var s=t[r].resolve(),c=o.safeProp(s.name);s.map?(n("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),a(n,s,r,c+"[ks[i]]")("}")("}")):s.repeated?(n("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),a(n,s,r,c+"[i]")("}")("}")):(s.resolvedType instanceof i||n("if(d%s!=null){",c),a(n,s,r,c),s.resolvedType instanceof i||n("}"))}return n("return m")},r.toObject=function(e){var t=e.fieldsArray.slice().sort(o.compareFieldsById);if(!t.length)return o.codegen()("return {}");for(var n=o.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],a=[],c=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?r:t[u].map?a:c).push(t[u]);if(r.length){for(n("if(o.arrays||o.defaults){"),u=0;u<r.length;++u)n("d%s=[]",o.safeProp(r[u].name));n("}")}if(a.length){for(n("if(o.objects||o.defaults){"),u=0;u<a.length;++u)n("d%s={}",o.safeProp(a[u].name));n("}")}if(c.length){for(n("if(o.defaults){"),u=0;u<c.length;++u){var l=c[u],d=o.safeProp(l.name);if(l.resolvedType instanceof i)n("d%s=o.enums===String?%j:%j",d,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var h="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",d,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else n("d%s=%j",d,l.typeDefault)}n("}")}var f=!1;for(u=0;u<t.length;++u){l=t[u];var p=e._fieldsArray.indexOf(l);d=o.safeProp(l.name),l.map?(f||(f=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),s(n,l,p,d+"[ks2[j]]")("}")):l.repeated?(n("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),s(n,l,p,d+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",d,l.name),s(n,l,p,d),l.partOf&&n("if(o.oneofs)")("d%s=%j",o.safeProp(l.partOf.name),l.name)),n("}")}return n("return d")}},{14:14,33:33}],12:[function(e,t,n){t.exports=function(e){var t=o.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var n=0;n<e.fieldsArray.length;++n){var s=e._fieldsArray[n].resolve(),c=s.resolvedType instanceof r?"int32":s.type,u="m"+o.safeProp(s.name);t("case %i:",s.id),s.map?(t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),i.defaults[s.keyType]!==undefined?t("k=%j",i.defaults[s.keyType]):t("k=null"),i.defaults[c]!==undefined?t("value=%j",i.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",s.keyType)("case 2:"),i.basic[c]===undefined?t("value=types[%i].decode(r,r.uint32())",n):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),i.long[s.keyType]!==undefined?t('%s[typeof k==="object"?util.longToHash(k):k]=value',u):t("%s[k]=value",u)):s.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),i.packed[c]!==undefined&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,c)("}else"),i.basic[c]===undefined?t(s.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,n):t("%s.push(r.%s())",u,c)):i.basic[c]===undefined?t(s.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,n):t("%s=r.%s()",u,c),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<e._fieldsArray.length;++n){var l=e._fieldsArray[n];l.required&&t("if(!m.hasOwnProperty(%j))",l.name)("throw util.ProtocolError(%j,{instance:m})",a(l))}return t("return m")};var r=e(14),i=e(32),o=e(33);function a(e){return"missing required '"+e.name+"'"}},{14:14,32:32,33:33}],13:[function(e,t,n){t.exports=function(e){for(var t,n=o.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),s=e.fieldsArray.slice().sort(o.compareFieldsById),c=0;c<s.length;++c){var u=s[c].resolve(),l=e._fieldsArray.indexOf(u),d=u.resolvedType instanceof r?"int32":u.type,h=i.basic[d];t="m"+o.safeProp(u.name),u.map?(n("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|i.mapKey[u.keyType],u.keyType),h===undefined?n("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",l,t):n(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,d,t),n("}")("}")):u.repeated?(n("if(%s!=null&&%s.length){",t,t),u.packed&&i.packed[d]!==undefined?n("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",d,t)("w.ldelim()"):(n("for(var i=0;i<%s.length;++i)",t),h===undefined?a(n,u,l,t+"[i]"):n("w.uint32(%i).%s(%s[i])",(u.id<<3|h)>>>0,d,t)),n("}")):(u.optional&&n("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,u.name),h===undefined?a(n,u,l,t):n("w.uint32(%i).%s(%s)",(u.id<<3|h)>>>0,d,t))}return n("return w")};var r=e(14),i=e(32),o=e(33);function a(e,t,n,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(t.id<<3|2)>>>0)}},{14:14,32:32,33:33}],14:[function(e,t,n){t.exports=a;var r=e(22);((a.prototype=Object.create(r.prototype)).constructor=a).className="Enum";var i=e(21),o=e(33);function a(e,t,n,i,o){if(r.call(this,e,n),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=o||{},this.reserved=undefined,t)for(var a=Object.keys(t),s=0;s<a.length;++s)"number"==typeof t[a[s]]&&(this.valuesById[this.values[a[s]]=t[a[s]]]=a[s])}a.fromJSON=function(e,t){var n=new a(e,t.values,t.options,t.comment,t.comments);return n.reserved=t.reserved,n},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",t?this.comment:undefined,"comments",t?this.comments:undefined])},a.prototype.add=function(e,t,n){if(!o.isString(e))throw TypeError("name must be a string");if(!o.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==undefined)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==undefined){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},a.prototype.remove=function(e){if(!o.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},a.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},a.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},{21:21,22:22,33:33}],15:[function(e,t,n){t.exports=u;var r=e(22);((u.prototype=Object.create(r.prototype)).constructor=u).className="Field";var i,o=e(14),a=e(32),s=e(33),c=/^required|optional|repeated$/;function u(e,t,n,i,o,u,l){if(s.isObject(i)?(l=o,u=i,i=o=undefined):s.isObject(o)&&(l=u,u=o,o=undefined),r.call(this,e,u),!s.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!s.isString(n))throw TypeError("type must be a string");if(i!==undefined&&!c.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(o!==undefined&&!s.isString(o))throw TypeError("extend must be a string");this.rule=i&&"optional"!==i?i:undefined,this.type=n,this.id=t,this.extend=o||undefined,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!s.Long&&a.long[n]!==undefined,this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=l}u.fromJSON=function(e,t){return new u(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(e,t,n){return"packed"===e&&(this._packed=null),r.prototype.setOption.call(this,e,t,n)},u.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["rule","optional"!==this.rule&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},u.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=a.defaults[this.type])===undefined&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof i?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(this.options.packed===undefined||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,Object.keys(this.options).length||(this.options=undefined)),this.long)this.typeDefault=s.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;s.base64.test(this.typeDefault)?s.base64.decode(this.typeDefault,e=s.newBuffer(s.base64.length(this.typeDefault)),0):s.utf8.write(this.typeDefault,e=s.newBuffer(s.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=s.emptyObject:this.repeated?this.defaultValue=s.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},u.d=function(e,t,n,r){return"function"==typeof t?t=s.decorateType(t).name:t&&"object"==typeof t&&(t=s.decorateEnum(t).name),function(i,o){s.decorateType(i.constructor).add(new u(o,e,t,n,{default:r}))}},u._configure=function(e){i=e}},{14:14,22:22,32:32,33:33}],16:[function(e,t,n){var r=t.exports=e(17);r.build="light",r.load=function(e,t,n){return"function"==typeof t?(n=t,t=new r.Root):t||(t=new r.Root),t.load(e,n)},r.loadSync=function(e,t){return t||(t=new r.Root),t.loadSync(e)},r.encoder=e(13),r.decoder=e(12),r.verifier=e(36),r.converter=e(11),r.ReflectionObject=e(22),r.Namespace=e(21),r.Root=e(26),r.Enum=e(14),r.Type=e(31),r.Field=e(15),r.OneOf=e(23),r.MapField=e(18),r.Service=e(30),r.Method=e(20),r.Message=e(19),r.wrappers=e(37),r.types=e(32),r.util=e(33),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},{11:11,12:12,13:13,14:14,15:15,17:17,18:18,19:19,20:20,21:21,22:22,23:23,26:26,30:30,31:31,32:32,33:33,36:36,37:37}],17:[function(e,t,n){var r=n;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=e(38),r.BufferWriter=e(39),r.Reader=e(24),r.BufferReader=e(25),r.util=e(35),r.rpc=e(28),r.roots=e(27),r.configure=i,i()},{24:24,25:25,27:27,28:28,35:35,38:38,39:39}],18:[function(e,t,n){t.exports=a;var r=e(15);((a.prototype=Object.create(r.prototype)).constructor=a).className="MapField";var i=e(32),o=e(33);function a(e,t,n,i,a,s){if(r.call(this,e,t,i,undefined,undefined,a,s),!o.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}a.fromJSON=function(e,t){return new a(e,t.id,t.keyType,t.type,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])},a.prototype.resolve=function(){if(this.resolved)return this;if(i.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},a.d=function(e,t,n){return"function"==typeof n?n=o.decorateType(n).name:n&&"object"==typeof n&&(n=o.decorateEnum(n).name),function(r,i){o.decorateType(r.constructor).add(new a(i,e,t,n))}}},{15:15,32:32,33:33}],19:[function(e,t,n){t.exports=i;var r=e(35);function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},{35:35}],20:[function(e,t,n){t.exports=o;var r=e(22);((o.prototype=Object.create(r.prototype)).constructor=o).className="Method";var i=e(33);function o(e,t,n,o,a,s,c,u){if(i.isObject(a)?(c=a,a=s=undefined):i.isObject(s)&&(c=s,s=undefined),t!==undefined&&!i.isString(t))throw TypeError("type must be a string");if(!i.isString(n))throw TypeError("requestType must be a string");if(!i.isString(o))throw TypeError("responseType must be a string");r.call(this,e,c),this.type=t||"rpc",this.requestType=n,this.requestStream=!!a||undefined,this.responseType=o,this.responseStream=!!s||undefined,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u}o.fromJSON=function(e,t){return new o(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["type","rpc"!==this.type&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:undefined])},o.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},{22:22,33:33}],21:[function(e,t,n){t.exports=l;var r=e(22);((l.prototype=Object.create(r.prototype)).constructor=l).className="Namespace";var i,o,a,s=e(15),c=e(33);function u(e,t){if(!e||!e.length)return undefined;for(var n={},r=0;r<e.length;++r)n[e[r].name]=e[r].toJSON(t);return n}function l(e,t){r.call(this,e,t),this.nested=undefined,this._nestedArray=null}function d(e){return e._nestedArray=null,e}l.fromJSON=function(e,t){return new l(e,t.options).addJSON(t.nested)},l.arrayToJSON=u,l.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>t)return!0;return!1},l.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested))}}),l.prototype.toJSON=function(e){return c.toObject(["options",this.options,"nested",u(this.nestedArray,e)])},l.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),r=0;r<n.length;++r)t=e[n[r]],this.add((t.fields!==undefined?i.fromJSON:t.values!==undefined?a.fromJSON:t.methods!==undefined?o.fromJSON:t.id!==undefined?s.fromJSON:l.fromJSON)(n[r],t));return this},l.prototype.get=function(e){return this.nested&&this.nested[e]||null},l.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof a)return this.nested[e].values;throw Error("no such enum: "+e)},l.prototype.add=function(e){if(!(e instanceof s&&e.extend!==undefined||e instanceof i||e instanceof a||e instanceof o||e instanceof l))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof l&&e instanceof l)||t instanceof i||t instanceof o)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,r=0;r<n.length;++r)e.add(n[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),d(this)},l.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=undefined),e.onRemove(this),d(this)},l.prototype.define=function(e,t){if(c.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n=this;e.length>0;){var r=e.shift();if(n.nested&&n.nested[r]){if(!((n=n.nested[r])instanceof l))throw Error("path conflicts with non-namespace objects")}else n.add(n=new l(r))}return t&&n.addJSON(t),n},l.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof l?e[t++].resolveAll():e[t++].resolve();return this.resolve()},l.prototype.lookup=function(e,t,n){if("boolean"==typeof t?(n=t,t=undefined):t&&!Array.isArray(t)&&(t=[t]),c.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||t.indexOf(r.constructor)>-1)return r}else if(r instanceof l&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof l&&(r=this._nestedArray[i].lookup(e,t,!0)))return r;return null===this.parent||n?null:this.parent.lookup(e,t)},l.prototype.lookupType=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such type: "+e);return t},l.prototype.lookupEnum=function(e){var t=this.lookup(e,[a]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},l.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[i,a]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},l.prototype.lookupService=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},l._configure=function(e,t,n){i=e,o=t,a=n}},{15:15,22:22,33:33}],22:[function(e,t,n){t.exports=o,o.className="ReflectionObject";var r,i=e(33);function o(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(o.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof r&&t._handleAdd(this)},o.prototype.onRemove=function(e){var t=e.root;t instanceof r&&t._handleRemove(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},o.prototype.getOption=function(e){return this.options?this.options[e]:undefined},o.prototype.setOption=function(e,t,n){return n&&this.options&&this.options[e]!==undefined||((this.options||(this.options={}))[e]=t),this},o.prototype.setParsedOption=function(e,t,n){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(n){var o=r.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(o){var a=o[e];i.setProperty(a,n,t)}else(o={})[e]=i.setProperty({},n,t),r.push(o)}else{var s={};s[e]=t,r.push(s)}return this},o.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),r=0;r<n.length;++r)this.setOption(n[r],e[n[r]],t);return this},o.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},o._configure=function(e){r=e}},{33:33}],23:[function(e,t,n){t.exports=a;var r=e(22);((a.prototype=Object.create(r.prototype)).constructor=a).className="OneOf";var i=e(15),o=e(33);function a(e,t,n,i){if(Array.isArray(t)||(n=t,t=undefined),r.call(this,e,n),t!==undefined&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function s(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}a.fromJSON=function(e,t){return new a(e,t.oneof,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:undefined])},a.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,s(this),this},a.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},a.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var n=e.get(this.oneof[t]);n&&!n.partOf&&(n.partOf=this,this.fieldsArray.push(n))}s(this)},a.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},a.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,n){o.decorateType(t.constructor).add(new a(n,e)),Object.defineProperty(t,n,{get:o.oneOfGetter(e),set:o.oneOfSetter(e)})}}},{15:15,22:22,33:33}],24:[function(e,t,n){t.exports=c;var r,i=e(35),o=i.LongBits,a=i.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},d=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new r(e):l(e)})(e)}:l};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function f(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw s(this,8);return new o(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}c.create=d(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return f(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|f(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=d(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},{35:35}],25:[function(e,t,n){t.exports=o;var r=e(24);(o.prototype=Object.create(r.prototype)).constructor=o;var i=e(35);function o(e){r.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},{24:24,35:35}],26:[function(e,t,n){t.exports=d;var r=e(21);((d.prototype=Object.create(r.prototype)).constructor=d).className="Root";var i,o,a,s=e(15),c=e(14),u=e(23),l=e(33);function d(e){r.call(this,"",e),this.deferred=[],this.files=[]}function h(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=l.path.resolve,d.prototype.fetch=l.fetch,d.prototype.load=function e(t,n,r){"function"==typeof n&&(r=n,n=undefined);var i=this;if(!r)return l.asPromise(e,i,t,n);var s=r===h;function c(e,t){if(r){var n=r;if(r=null,s)throw e;n(e,t)}}function u(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var n=e.substring(t);if(n in a)return n}return null}function d(e,t){try{if(l.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),l.isString(t)){o.filename=e;var r,a=o(t,i,n),d=0;if(a.imports)for(;d<a.imports.length;++d)(r=u(a.imports[d])||i.resolvePath(e,a.imports[d]))&&f(r);if(a.weakImports)for(d=0;d<a.weakImports.length;++d)(r=u(a.weakImports[d])||i.resolvePath(e,a.weakImports[d]))&&f(r,!0)}else i.setOptions(t.options).addJSON(t.nested)}catch(e){c(e)}s||p||c(null,i)}function f(e,t){if(!(i.files.indexOf(e)>-1))if(i.files.push(e),e in a)s?d(e,a[e]):(++p,setTimeout((function(){--p,d(e,a[e])})));else if(s){var n;try{n=l.fs.readFileSync(e).toString("utf8")}catch(e){return void(t||c(e))}d(e,n)}else++p,i.fetch(e,(function(n,o){--p,r&&(n?t?p||c(null,i):c(n):d(e,o))}))}var p=0;l.isString(t)&&(t=[t]);for(var v,g=0;g<t.length;++g)(v=i.resolvePath("",t[g]))&&f(v);return s?i:(p||c(null,i),undefined)},d.prototype.loadSync=function(e,t){if(!l.isNode)throw Error("not supported");return this.load(e,t,h)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function p(e,t){var n=t.parent.lookup(t.extend);if(n){var r=new s(t.fullName,t.id,t.type,t.rule,undefined,t.options);return r.declaringField=t,t.extensionField=r,n.add(r),!0}return!1}d.prototype._handleAdd=function(e){if(e instanceof s)e.extend===undefined||e.extensionField||p(0,e)||this.deferred.push(e);else if(e instanceof c)f.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof i)for(var t=0;t<this.deferred.length;)p(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);f.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof s){if(e.extend!==undefined)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)f.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);f.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,n){i=e,o=t,a=n}},{14:14,15:15,21:21,23:23,33:33}],27:[function(e,t,n){t.exports={}},{}],28:[function(e,t,n){n.Service=e(29)},{29:29}],29:[function(e,t,n){t.exports=i;var r=e(35);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,o,a){if(!o)throw TypeError("request must be specified");var s=this;if(!a)return r.asPromise(e,s,t,n,i,o);if(!s.rpcImpl)return setTimeout((function(){a(Error("already ended"))}),0),undefined;try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return s.emit("error",e,t),a(e);if(null===n)return s.end(!0),undefined;if(!(n instanceof i))try{n=i[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",n,t),a(null,n)}))}catch(e){return s.emit("error",e,t),setTimeout((function(){a(e)}),0),undefined}},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{35:35}],30:[function(e,t,n){t.exports=s;var r=e(21);((s.prototype=Object.create(r.prototype)).constructor=s).className="Service";var i=e(20),o=e(33),a=e(28);function s(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}s.fromJSON=function(e,t){var n=new s(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),o=0;o<r.length;++o)n.add(i.fromJSON(r[o],t.methods[r[o]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},s.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return o.toObject(["options",t&&t.options||undefined,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||undefined,"comment",n?this.comment:undefined])},Object.defineProperty(s.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=o.toArray(this.methods))}}),s.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},s.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},s.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,c(this)):r.prototype.add.call(this,e)},s.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return r.prototype.remove.call(this,e)},s.prototype.create=function(e,t,n){for(var r,i=new a.Service(e,t,n),s=0;s<this.methodsArray.length;++s){var c=o.lcFirst((r=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");i[c]=o.codegen(["r","c"],o.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return i}},{20:20,21:21,28:28,33:33}],31:[function(e,t,n){t.exports=y;var r=e(21);((y.prototype=Object.create(r.prototype)).constructor=y).className="Type";var i=e(14),o=e(23),a=e(15),s=e(18),c=e(30),u=e(19),l=e(24),d=e(38),h=e(33),f=e(13),p=e(12),v=e(36),g=e(11),m=e(37);function y(e,t){r.call(this,e,t),this.fields={},this.oneofs=undefined,this.extensions=undefined,this.reserved=undefined,this.group=undefined,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(y.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=y.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,u,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var r={};for(n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:h.oneOfGetter(this._oneofsArray[n].oneof),set:h.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,r)}}}),y.generateConstructor=function(e){for(var t,n=h.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?n("this%s={}",h.safeProp(t.name)):t.repeated&&n("this%s=[]",h.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},y.fromJSON=function(e,t){var n=new y(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var u=Object.keys(t.fields),l=0;l<u.length;++l)n.add((void 0!==t.fields[u[l]].keyType?s.fromJSON:a.fromJSON)(u[l],t.fields[u[l]]));if(t.oneofs)for(u=Object.keys(t.oneofs),l=0;l<u.length;++l)n.add(o.fromJSON(u[l],t.oneofs[u[l]]));if(t.nested)for(u=Object.keys(t.nested),l=0;l<u.length;++l){var d=t.nested[u[l]];n.add((d.id!==undefined?a.fromJSON:d.fields!==undefined?y.fromJSON:d.values!==undefined?i.fromJSON:d.methods!==undefined?c.fromJSON:r.fromJSON)(u[l],d))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n},y.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return h.toObject(["options",t&&t.options||undefined,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined,"comment",n?this.comment:undefined])},y.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var n=this.oneofsArray;for(t=0;t<n.length;)n[t++].resolve();return r.prototype.resolveAll.call(this)},y.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},y.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof a&&e.extend===undefined){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof o?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):r.prototype.add.call(this,e)},y.prototype.remove=function(e){if(e instanceof a&&e.extend===undefined){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof o){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return r.prototype.remove.call(this,e)},y.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},y.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},y.prototype.create=function(e){return new this.ctor(e)},y.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);this.encode=f(this)({Writer:d,types:t,util:h}),this.decode=p(this)({Reader:l,types:t,util:h}),this.verify=v(this)({types:t,util:h}),this.fromObject=g.fromObject(this)({types:t,util:h}),this.toObject=g.toObject(this)({types:t,util:h});var r=m[e];if(r){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(i),i.toObject=this.toObject,this.toObject=r.toObject.bind(i)}return this},y.prototype.encode=function(e,t){return this.setup().encode(e,t)},y.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},y.prototype.decode=function(e,t){return this.setup().decode(e,t)},y.prototype.decodeDelimited=function(e){return e instanceof l||(e=l.create(e)),this.decode(e,e.uint32())},y.prototype.verify=function(e){return this.setup().verify(e)},y.prototype.fromObject=function(e){return this.setup().fromObject(e)},y.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},y.d=function(e){return function(t){h.decorateType(t,e)}}},{11:11,12:12,13:13,14:14,15:15,18:18,19:19,21:21,23:23,24:24,30:30,33:33,36:36,37:37,38:38}],32:[function(e,t,n){var r=n,i=e(33),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(e,t){var n=0,r={};for(t|=0;n<e.length;)r[o[n+t]]=e[n++];return r}r.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),r.long=a([0,0,0,1,1],7),r.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0])},{33:33}],33:[function(e,t,n){var r,i,o=t.exports=e(35),a=e(27);o.codegen=e(3),o.fetch=e(5),o.path=e(8),o.fs=o.inquire("fs"),o.toArray=function(e){if(e){for(var t=Object.keys(e),n=new Array(t.length),r=0;r<t.length;)n[r]=e[t[r++]];return n}return[]},o.toObject=function(e){for(var t={},n=0;n<e.length;){var r=e[n++],i=e[n++];i!==undefined&&(t[r]=i)}return t};var s=/\\/g,c=/"/g;o.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},o.safeProp=function(e){return!/^[$\w_]+$/.test(e)||o.isReserved(e)?'["'+e.replace(s,"\\\\").replace(c,'\\"')+'"]':"."+e},o.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;o.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,(function(e,t){return t.toUpperCase()}))},o.compareFieldsById=function(e,t){return e.id-t.id},o.decorateType=function(t,n){if(t.$type)return n&&t.$type.name!==n&&(o.decorateRoot.remove(t.$type),t.$type.name=n,o.decorateRoot.add(t.$type)),t.$type;r||(r=e(31));var i=new r(n||t.name);return o.decorateRoot.add(i),i.ctor=t,Object.defineProperty(t,"$type",{value:i,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:i,enumerable:!1}),i};var l=0;o.decorateEnum=function(t){if(t.$type)return t.$type;i||(i=e(14));var n=new i("Enum"+l++,t);return o.decorateRoot.add(n),Object.defineProperty(t,"$type",{value:n,enumerable:!1}),n},o.setProperty=function(e,t,n){if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,n,r){var i=n.shift();if(n.length>0)t[i]=e(t[i]||{},n,r);else{var o=t[i];o&&(r=[].concat(o).concat(r)),t[i]=r}return t}(e,t=t.split("."),n)},Object.defineProperty(o,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(e(26)))}})},{14:14,26:26,27:27,3:3,31:31,35:35,5:5,8:8}],34:[function(e,t,n){t.exports=i;var r=e(35);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var a=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;i.fromHash=function(e){return e===a?o:new i((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},{35:35}],35:[function(e,t,n){var r=n;function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)e[r[i]]!==undefined&&n||(e[r[i]]=t[r[i]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=e(1),r.base64=e(2),r.EventEmitter=e(4),r.float=e(6),r.inquire=e(7),r.utf8=e(10),r.pool=e(9),r.LongBits=e(34),r.isNode=Boolean(void 0!==global&&global&&global.process&&global.process.versions&&global.process.versions.node),r.global=r.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&this[e[n]]!==undefined&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},{1:1,10:10,2:2,34:34,4:4,6:6,7:7,9:9}],36:[function(e,t,n){t.exports=function(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n={};e.oneofsArray.length&&t("var p={}");for(var r=0;r<e.fieldsArray.length;++r){var c=e._fieldsArray[r].resolve(),u="m"+i.safeProp(c.name);if(c.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",u,c.name),c.map)t("if(!util.isObject(%s))",u)("return%j",o(c,"object"))("var k=Object.keys(%s)",u)("for(var i=0;i<k.length;++i){"),s(t,c,"k[i]"),a(t,c,r,u+"[k[i]]")("}");else if(c.repeated)t("if(!Array.isArray(%s))",u)("return%j",o(c,"array"))("for(var i=0;i<%s.length;++i){",u),a(t,c,r,u+"[i]")("}");else{if(c.partOf){var l=i.safeProp(c.partOf.name);1===n[c.partOf.name]&&t("if(p%s===1)",l)("return%j",c.partOf.name+": multiple values"),n[c.partOf.name]=1,t("p%s=1",l)}a(t,c,r,u)}c.optional&&t("}")}return t("return null")};var r=e(14),i=e(33);function o(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function a(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",i)("default:")("return%j",o(t,"enum value"));for(var a=Object.keys(t.resolvedType.values),s=0;s<a.length;++s)e("case %i:",t.resolvedType.values[a[s]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",o(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",o(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",o(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",o(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",o(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",o(t,"buffer"))}return e}function s(e,t,n){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",n)("return%j",o(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",n)("return%j",o(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",n)("return%j",o(t,"boolean key"))}return e}},{14:14,33:33}],37:[function(e,t,n){var r=n,i=e(19);r[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),n=this.lookup(t);if(n){var r="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:n.encode(n.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var n="",r="";if(t&&t.json&&e.type_url&&e.value){r=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(r);o&&(e=o.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var a=e.$type.toObject(e,t);return""===n&&(n="type.googleapis.com/"),r=n+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),a["@type"]=r,a}return this.toObject(e,t)}}},{19:19}],38:[function(e,t,n){t.exports=d;var r,i=e(35),o=i.LongBits,a=i.base64,s=i.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=undefined,this.val=n}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(d.create=function(){return new r})()}:function(){return new d}};function f(e,t,n){t[n]=255&e}function p(e,t){this.len=e,this.next=undefined,this.val=t}function v(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function g(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}d.create=h(),d.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(d.alloc=i.pool(d.alloc,i.Array.prototype.subarray)),d.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},p.prototype=Object.create(c.prototype),p.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(v,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(v,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(v,t.length(),t)},d.prototype.bool=function(e){return this._push(f,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var m=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(i.isString(e)){var n=d.alloc(t=a.length(e));a.decode(e,n,0),e=n}return this.uint32(t)._push(m,t,e)},d.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(f,1,0)},d.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},d._configure=function(e){r=e,d.create=h(),r._configure()}},{35:35}],39:[function(e,t,n){t.exports=o;var r=e(38);(o.prototype=Object.create(r.prototype)).constructor=o;var i=e(35);function o(){r.call(this)}function a(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},o._configure()},{35:35,38:38}]},{})}()}).call(this,__nested_webpack_require_660171__(33),__nested_webpack_require_660171__(60)(module))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function i(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=i;var o={},a={};function s(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=a[e])?r:(n=u(e,(0|e)<0?-1:0,!0),i&&(a[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=o[e])?r:(n=u(e,e<0?-1:0,!1),i&&(o[e]=n),n)}function c(e,t){if(isNaN(e))return t?y:m;if(t){if(e<0)return y;if(e>=p)return w}else{if(e<=-v)return x;if(e+1>=v)return S}return e<0?c(-e,t).neg():u(e%f|0,e/f|0,t)}function u(e,t,n){return new r(e,t,n)}r.fromInt=s,r.fromNumber=c,r.fromBits=u;var l=Math.pow;function d(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return d(e.substring(1),t,n).neg();for(var i=c(l(n,8)),o=m,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+s),n);if(s<8){var h=c(l(n,s));o=o.mul(h).add(c(u))}else o=(o=o.mul(i)).add(c(u))}return o.unsigned=t,o}function h(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?d(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=h;var f=4294967296,p=f*f,v=p/2,g=s(1<<24),m=s(0);r.ZERO=m;var y=s(0,!0);r.UZERO=y;var b=s(1);r.ONE=b;var _=s(1,!0);r.UONE=_;var E=s(-1);r.NEG_ONE=E;var S=u(-1,2147483647,!1);r.MAX_VALUE=S;var w=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=w;var x=u(0,-2147483648,!1);r.MIN_VALUE=x;var T=r.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},T.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(x)){var t=c(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=c(l(e,6),this.unsigned),o=this,a="";;){var s=o.div(i),u=(o.sub(s.mul(i)).toInt()>>>0).toString(e);if((o=s).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(x)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1==(1&this.low)},T.isEven=function(){return 0==(1&this.low)},T.equals=function(e){return i(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){if(i(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(x)?x:this.not().add(b)},T.neg=T.negate,T.add=function(e){i(e)||(e=h(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,a=e.high>>>16,s=65535&e.high,c=e.low>>>16,l=0,d=0,f=0,p=0;return f+=(p+=o+(65535&e.low))>>>16,d+=(f+=r+c)>>>16,l+=(d+=n+s)>>>16,l+=t+a,u((f&=65535)<<16|(p&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},T.subtract=function(e){return i(e)||(e=h(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){if(this.isZero())return m;if(i(e)||(e=h(e)),n)return u(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(x))return e.isOdd()?x:m;if(e.eq(x))return this.isOdd()?x:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,a=65535&this.low,s=e.high>>>16,l=65535&e.high,d=e.low>>>16,f=65535&e.low,p=0,v=0,y=0,b=0;return y+=(b+=a*f)>>>16,v+=(y+=o*f)>>>16,y&=65535,v+=(y+=a*d)>>>16,p+=(v+=r*f)>>>16,v&=65535,p+=(v+=o*d)>>>16,v&=65535,p+=(v+=a*l)>>>16,p+=t*f+r*d+o*l+a*s,u((y&=65535)<<16|(b&=65535),(p&=65535)<<16|(v&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(e){if(i(e)||(e=h(e)),e.isZero())throw Error("division by zero");var t,r,o;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return _;o=y}else{if(this.eq(x))return e.eq(b)||e.eq(E)?x:e.eq(x)?b:(t=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?b:E:(r=this.sub(e.mul(t)),o=t.add(r.div(e)));if(e.eq(x))return this.unsigned?y:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=m}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(t)/Math.LN2),s=a<=48?1:l(2,a-48),d=c(t),f=d.mul(e);f.isNegative()||f.gt(r);)f=(d=c(t-=s,this.unsigned)).mul(e);d.isZero()&&(d=b),o=o.add(d),r=r.sub(f)}return o},T.div=T.divide,T.modulo=function(e){return i(e)||(e=h(e)),n?u((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return u(~this.low,~this.high,this.unsigned)},T.and=function(e){return i(e)||(e=h(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return i(e)||(e=h(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return i(e)||(e=h(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e){e.exports=JSON.parse('{"PeerPublishStatus":408,"JoinChannelTimeout":407,"OnUpdateStream":356,"OnRemoveStream":355,"OnAddVideoStream":353,"OnAddAudioStream":352,"FirstAudioDecode":351,"FirstVideoDecode":350,"FirstAudioReceived":349,"FirstVideoReceived":348,"ReqUserAccount":196,"ApiInvoke":41,"RequestProxyWorkerManager":36,"RequestProxyAppCenter":35,"VideoSendingStopped":34,"AudioSendingStopped":33,"StreamSwitch":32,"FirstFrame":31,"Publish":30,"Subscribe":29,"JoinGateway":28,"JoinChooseServer":27,"Session":26,"APWorkerEvent":160,"WorkerEvent":156,"JoinWebProxyAP":700,"WebSocketQuit":671}')},function(e){e.exports=JSON.parse('{"nested":{"protobuf":{"nested":{"Session":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"version":{"type":"string","id":11},"browser":{"type":"string","id":12},"appid":{"type":"string","id":13},"mode":{"type":"string","id":14},"extend":{"type":"string","id":15},"process":{"type":"string","id":16},"build":{"type":"string","id":17},"ipv6":{"type":"string","id":18},"sourceHost":{"type":"string","id":19},"sourcePath":{"type":"string","id":20},"collectorHost":{"type":"string","id":21},"collectorName":{"type":"string","id":22}}},"JoinChooseServer":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"chooseServerAddr":{"type":"string","id":11},"chooseServerAddrList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"chooseServerIp":{"type":"string","id":15}}},"JoinGateway":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"gatewayAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"firstSuccess":{"type":"bool","id":14}}},"Subscribe":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"video":{"type":"bool","id":16},"audio":{"type":"bool","id":17},"subscribeRequestid":{"type":"int32","id":18},"p2pid":{"type":"int32","id":19}}},"Publish":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"localSdp":{"type":"string","id":11},"remoteSdp":{"type":"string","id":12},"extend":{"type":"string","id":13},"errorCode":{"type":"string","id":14},"eventElapse":{"type":"int64","id":15},"videoName":{"type":"string","id":16},"audioName":{"type":"string","id":17},"screenName":{"type":"string","id":18},"video":{"type":"bool","id":19},"audio":{"type":"bool","id":20},"publishRequestid":{"type":"int32","id":21},"p2pid":{"type":"int32","id":22},"screenshare":{"type":"bool","id":23}}},"FirstFrame":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"extend":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"width":{"type":"int64","id":13},"height":{"type":"int64","id":14}}},"StreamSwitch":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"isDual":{"type":"bool","id":11}}},"AudioSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"VideoSendingStopped":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"reason":{"type":"string","id":10},"eventType":{"type":"string","id":11}}},"RequestProxyAppCenter":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"APAddr":{"type":"string","id":11},"workerManagerList":{"type":"string","id":12},"errorCode":{"type":"string","id":13},"eventElapse":{"type":"int64","id":14},"extend":{"type":"string","id":15},"response":{"type":"string","id":16}}},"RequestProxyWorkerManager":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"eventType":{"type":"string","id":10},"workerManagerAddr":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"eventElapse":{"type":"int64","id":13},"extend":{"type":"string","id":14},"response":{"type":"string","id":15}}},"ApiInvoke":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"apiName":{"type":"string","id":9},"errorCode":{"type":"string","id":10},"options":{"type":"string","id":11},"execElapse":{"type":"int64","id":12},"execStates":{"type":"string","id":13},"execResult":{"type":"string","id":14},"invokeId":{"type":"int64","id":15}}},"ReqUserAccount":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"serverAddress":{"type":"string","id":10},"stringUid":{"type":"string","id":11},"errorCode":{"type":"string","id":12},"extend":{"type":"string","id":13}}},"FirstVideoReceived":{"fields":{"lts":{"type":"int64","id":1},"peer":{"type":"int64","id":2},"elapse":{"type":"int64","id":3},"sid":{"type":"string","id":4},"cname":{"type":"string","id":5},"cid":{"type":"int64","id":6},"uid":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstAudioReceived":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"FirstVideoDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"videowidth":{"type":"int32","id":9},"videoheight":{"type":"int32","id":10},"subscribeRequestid":{"type":"int32","id":11},"p2pid":{"type":"int32","id":12},"subscribeElapse":{"type":"int64","id":13}}},"FirstAudioDecode":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"elapse":{"type":"int64","id":8},"subscribeRequestid":{"type":"int32","id":9},"p2pid":{"type":"int32","id":10},"subscribeElapse":{"type":"int64","id":11}}},"OnAddAudioStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnAddVideoStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnRemoveStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7}}},"OnUpdateStream":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":6},"peer":{"type":"int64","id":7},"audio":{"type":"bool","id":8},"video":{"type":"bool","id":9}}},"JoinChannelTimeout":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"timeout":{"type":"int32","id":7}}},"PeerPublishStatus":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"peer":{"type":"int64","id":6},"elapse":{"type":"int64","id":7},"peerPublishDuration":{"type":"int64","id":8},"joinChannelSuccessElapse":{"type":"int64","id":9},"subscribeElapse":{"type":"int64","id":10},"audiotag":{"type":"int32","id":11},"videotag":{"type":"int32","id":12},"screensharetag":{"type":"int32","id":13},"firsttimetag":{"type":"int32","id":14}}},"WebSocketQuit":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"uid":{"type":"int64","id":5},"elapse":{"type":"int64","id":6},"succ":{"type":"int32","id":7},"errorCode":{"type":"string","id":8},"ip":{"type":"string","id":9}}},"Message":{"fields":{"id":{"type":"int64","id":1},"msg":{"type":"bytes","id":2}}},"ProtoRaws":{"fields":{"sendTs":{"type":"int64","id":1},"payloads":{"rule":"repeated","type":"Message","id":2},"vid":{"type":"int32","id":3}}},"APWorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"ec":{"type":"int32","id":10},"sc":{"type":"int32","id":11},"serverIp":{"type":"string","id":12},"firstSuccess":{"type":"bool","id":13},"responseTime":{"type":"int32","id":14},"serviceName":{"type":"string","id":15},"responseDetail":{"type":"string","id":16}}},"WorkerEvent":{"fields":{"sid":{"type":"string","id":1},"cname":{"type":"string","id":2},"cid":{"type":"int64","id":3},"lts":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"success":{"type":"bool","id":7},"elapse":{"type":"int64","id":8},"peer":{"type":"int64","id":9},"command":{"type":"string","id":10},"actionType":{"type":"string","id":11},"url":{"type":"string","id":12},"payload":{"type":"string","id":13},"serverCode":{"type":"int32","id":14},"code":{"type":"int32","id":15},"traceId":{"type":"string","id":16},"workerType":{"type":"int32","id":17},"responseTime":{"type":"int32","id":18},"requestId":{"type":"int64","id":19},"packIndex":{"type":"int32","id":20},"requestByUser":{"type":"bool","id":21},"tid":{"type":"string","id":22}}},"JoinWebProxyAP":{"fields":{"lts":{"type":"int64","id":1},"sid":{"type":"string","id":2},"cname":{"type":"string","id":3},"cid":{"type":"int64","id":4},"ip":{"type":"string","id":5},"uid":{"type":"int64","id":6},"sucess":{"type":"int32","id":7},"elapse":{"type":"int64","id":8},"eventType":{"type":"string","id":9},"apServerAddr":{"type":"string","id":10},"turnServerAddrList":{"type":"string","id":11},"errorCode":{"type":"string","id":12}}}}}}}')},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n,r){var i=t&&t.prototype instanceof l?t:l,o=Object.create(i.prototype),a=new S(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function l(){}function d(){}function h(){}var f={};f[i]=function(){return this};var p=Object.getPrototypeOf,v=p&&p(p(w([])));v&&v!==t&&n.call(v,i)&&(f=v);var g=h.prototype=l.prototype=Object.create(f);function m(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function y(e,t){var r;this._invoke=function(i,o){function a(){return new t((function(r,a){!function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function w(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=g.constructor=h,h.constructor=d,h[a]=d.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(y.prototype),y.prototype[o]=function(){return this},e.AsyncIterator=y,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new y(s(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},m(g),g[a]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=w,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:w(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="object"==typeof window&&window.RTCPeerConnection,i="object"==typeof window&&window.webkitRTCPeerConnection,o="object"==typeof window&&window.mozRTCPeerConnection;t.createRTCPeerConnection=function(e){var t=r||i||o;return t?new t(e):null}},function(e,t,n){var r;!function(t){"use strict";function i(){}var o=i.prototype,a=t.EventEmitter;function s(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}o.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},o.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},o.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},o.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),i="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&-1===s(r[n],t)&&r[n].push(i?t:{listener:t,once:!1});return this},o.on=c("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=c("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var n,r,i=this.getListenersAsObject(e);for(r in i)i.hasOwnProperty(r)&&-1!==(n=s(i[r],t))&&i[r].splice(n,1);return this},o.off=c("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,n){var r,i,o=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)o.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?o.call(this,r,i):a.call(this,r,i));return this},o.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},o.removeAllListeners=c("removeEvent"),o.emitEvent=function(e,t){var n,r,i,o,a=this.getListenersAsObject(e);for(o in a)if(a.hasOwnProperty(o))for(n=a[o].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},o.trigger=c("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return t.EventEmitter=a,i},void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof window?window:this||{})},function(e,t,n){var r=n(35);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){(function(t){var r;e.exports=(r=r||function(e,r){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==t&&t.crypto&&(i=t.crypto),!i)try{i=n(74)}catch(e){}var o=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},c=s.lib={},u=c.Base={extend:function(e){var t=a(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=c.WordArray=u.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new l.init(t,e)}}),d=s.enc={},h=d.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},f=d.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},p=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},v=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,s=o/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,u=e.min(4*c,o);if(c){for(var d=0;d<c;d+=a)this._doProcessBlock(i,d);n=i.splice(0,c),r.sigBytes-=u}return new l.init(n,u)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(c.Hasher=v.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math),r)}).call(this,n(33))},function(e,t){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(76),c=n(27),u=n(95),l=n(20),d=n(24),h=n(31),f=a(n(0)),p=a(n(37)),v=function(){function e(e){this.retryTimeout=1e4,this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.taskMutex=new u.PromiseMutex("LS"),this.cancelToken=p.default.CancelToken.source(),this.injectConfig=r({},c.DEFAULT_INJECT_CONFIG),this.injectLoopTimes=0,this.lastTaskId=1,this.statusError=new Map,this.spec=e}return Object.defineProperty(e.prototype,"isNeedReset",{get:function(){for(var e=this,t=0,n=Array.from(this.streamingTasks.values());t<n.length;t++){var r=n[t];if(r.mode===c.LiveStreamingServiceMode.INJECT)return!0;if(r.mode===c.LiveStreamingServiceMode.TRANSCODE&&(this.transcodingConfig&&(this.transcodingConfig.userConfigs||this.transcodingConfig.transcodingUsers)||[]).find((function(t){return t.uid===e.spec.uid})))return!0}return!1},enumerable:!0,configurable:!0}),e.prototype.setTranscodingConfig=function(e){return i(this,void 0,void 0,(function(){var t,n,i,a,s,u=this;return o(this,(function(o){switch(o.label){case 0:(t=r(r({},c.DEFAULT_TRANSCODING_CONFIG),e)).transcodingUsers||(t.transcodingUsers=t.userConfigs),66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(f.default.debug("["+this.spec.clientId+"] set transcoding config, fix video codec profile: "+t.videoCodecProfile+" -> 100"),t.videoCodecProfile=100),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map((function(e){return r(r(r({},c.DEFAULT_LIVE_STREAMING_TRANSCODING_USER),e),{zOrder:e.zOrder?e.zOrder+1:1})}))),t.images&&(t.images=t.images.map((function(e){return r(r({},c.DEFAULT_LIVE_STREAMING_TRANSCODING_WATERMARK),e)})));try{c.isLiveStreamingTranscodingConfig(t)}catch(e){throw e}return t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map((function(e){return r({},e)})),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers),n=(t.userConfigs||[]).map((function(e){return"number"==typeof e.uid?Promise.resolve(e.uid):l.getUserAccount(u.spec,null,e.uid)})),[4,this.taskMutex.lock()];case 1:return i=o.sent(),[4,Promise.all(n)];case 2:if(o.sent().forEach((function(e,n){t.userConfigs&&t.userConfigs[n]&&(t.userConfigs[n].uid=e&&e.uid||e)})),this.transcodingConfig=t,!this.connection)return i(),[2];o.label=3;case 3:return o.trys.push([3,5,,6]),[4,this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(this.streamingTasks.values()).map((function(e){return e.taskId})).join("#")})];case 4:return a=o.sent(),i(),f.default.debug("["+this.spec.clientId+"] update live transcoding config success, code: "+a.code+", config:",JSON.stringify(this.transcodingConfig)),[3,6];case 5:if(s=o.sent(),i(),!s.data||!s.data.retry)throw s;return s.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((function(e){f.default.warning("["+u.spec.clientId+"] live streaming receive error",s.toString(),"try to republish",e.url),u.startLiveStreamingTask(e.url,e.mode,s).then((function(){f.default.debug("["+u.spec.clientId+"] live streaming republish "+e.url+" success")})).catch((function(t){f.default.error("["+u.spec.clientId+"] live streaming republish failed",e.url,t.toString()),u.onLiveStreamError&&u.onLiveStreamError(e.url,t)}))})),[3,6];case 6:return[2]}}))}))},e.prototype.setInjectStreamConfig=function(e,t){this.injectConfig=Object.assign({},this.injectConfig,e),this.injectLoopTimes=t},e.prototype.startLiveStreamingTask=function(e,t,n){return i(this,void 0,void 0,(function(){var i,a,s,u,l,p,v,g,m=this;return o(this,(function(o){switch(o.label){case 0:return Array.from(this.streamingTasks.values()).find((function(e){return e.mode===c.LiveStreamingServiceMode.INJECT}))&&t===c.LiveStreamingServiceMode.INJECT?[2,new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT,"inject stream over limit").throw()]:(i={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:30},f.default.debug("["+this.spec.clientId+"] start live streaming "+e+", mode: "+t),[4,this.taskMutex.lock()]);case 1:if(a=o.sent(),!this.transcodingConfig&&t===c.LiveStreamingServiceMode.TRANSCODE)throw a(),new d.AgoraRTCError(d.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");if(!this.connection&&n)return a(),[2];if(this.streamingTasks.get(e)&&!n)return a(),[2,new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_TASK_CONFLICT).throw()];if(!this.transcodingConfig&&t===c.LiveStreamingServiceMode.TRANSCODE)throw a(),new d.AgoraRTCError(d.AgoraRTCErrorCode.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");o.label=2;case 2:return o.trys.push([2,5,,6]),this.connection?[3,4]:(s=this,[4,this.connect(t)]);case 3:s.connection=o.sent(),o.label=4;case 4:return[3,6];case 5:throw u=o.sent(),a(),u;case 6:switch(t){case c.LiveStreamingServiceMode.TRANSCODE:i.transcodingConfig=r({},this.transcodingConfig);break;case c.LiveStreamingServiceMode.RAW:break;case c.LiveStreamingServiceMode.INJECT:i={cname:this.spec.cname,command:"InjectStream",sid:this.spec.sid,transcodingConfig:this.injectConfig,ts:Date.now(),url:e,loopTimes:this.injectLoopTimes}}this.uapResponse&&this.uapResponse.vid&&(i.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0,l=this.lastTaskId++,o.label=7;case 7:return o.trys.push([7,9,,14]),p=new Promise((function(t,r){h.wait(m.retryTimeout).then((function(){if(n)return r(n);var t=m.statusError.get(e);return t?(m.statusError.delete(e),r(t)):void 0}))})),[4,Promise.race([this.connection.request("request",{clientRequest:i},!0,{url:e,command:"PublishStream",workerType:t===c.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!n,tid:l.toString()}),p])];case 8:return v=o.sent(),this.isStartingStreamingTask=!1,f.default.debug("["+this.spec.clientId+"] live streaming started, code: "+v.code),this.streamingTasks.set(e,{clientRequest:i,mode:t,url:e,taskId:l}),a(),[3,14];case 9:if(g=o.sent(),a(),this.isStartingStreamingTask=!1,!g.data||!g.data.retry||n)throw g;return g.data.changeAddress?[3,11]:[4,this.startLiveStreamingTask(e,t,g)];case 10:return[2,o.sent()];case 11:return this.connection.tryNextAddress(),[4,this.startLiveStreamingTask(e,t,g)];case 12:return[2,o.sent()];case 13:return[3,14];case 14:return[2]}}))}))},e.prototype.stopLiveStreamingTask=function(e){var t=this;return new Promise((function(n,r){var i=t.streamingTasks.get(e);if(!i||!t.connection)return new d.AgoraRTCError(d.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();var o=i.mode;i.abortTask=function(){f.default.debug("["+t.spec.clientId+"] stop live streaming success(worker exception)"),t.streamingTasks.delete(e),n()},f.default.debug("stop live streaming task request: "+JSON.stringify(e)),t.connection.request("request",{clientRequest:{command:o===c.LiveStreamingServiceMode.INJECT?"UninjectStream":"UnpublishStream",url:i.url}},!1,{url:e,command:"UnPublishStream",workerType:o===c.LiveStreamingServiceMode.TRANSCODE?1:2,requestByUser:!0,tid:(t.lastTaskId++).toString()}).then((function(r){f.default.debug("["+t.spec.clientId+"] stop live streaming success, code: "+r.code),t.streamingTasks.delete(e),0===t.streamingTasks.size&&o!==c.LiveStreamingServiceMode.INJECT&&(t.connection.close(),t.connection=void 0),n()})).catch(r)}))},e.prototype.controlInjectStream=function(e,t,n,r){return i(this,void 0,void 0,(function(){var i;return o(this,(function(o){switch(o.label){case 0:if(!(i=this.streamingTasks.get(e))||!this.connection||i.mode!==c.LiveStreamingServiceMode.INJECT)throw new d.AgoraRTCError(d.AgoraRTCErrorCode.INVALID_OPERATION,"can not find inject stream task to control");return[4,this.connection.request("request",{clientRequest:{command:"ControlStream",url:e,control:t,audioVolume:n,position:r}})];case 1:return[2,o.sent().serverResponse]}}))}))},e.prototype.resetAllTask=function(){var e=this,t=Array.from(this.streamingTasks.values());this.terminate();for(var n=function(t){r.startLiveStreamingTask(t.url,t.mode).catch((function(n){e.onLiveStreamError&&e.onLiveStreamError(t.url,n)}))},r=this,i=0,o=t;i<o.length;i++)n(o[i])},e.prototype.setGatewayConnectionState=function(e){this.connection&&(this.connection.gatewayConnectionState=e)},e.prototype.terminate=function(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=p.default.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0},e.prototype.connect=function(e){return i(this,void 0,void 0,(function(){var t,n=this;return o(this,(function(r){switch(r.label){case 0:if(this.connection)throw new d.AgoraRTCError(d.AgoraRTCErrorCode.UNEXPECTED_ERROR,"live streaming connection has already connected");return[4,h.getLiveStreamingWorkerMangerResult(e,this.spec,this.cancelToken.token)];case 1:return t=r.sent(),this.uapResponse=t,this.connection=new s.AgoraLiveStreamingUapSignal(t.workerToken,this.spec,e),this.connection.on(c.LiveStreamingUapSignalEvents.WARNING,(function(e,t){return n.onLiveStreamWarning&&n.onLiveStreamWarning(t,e)})),this.connection.on(c.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,(function(e){return n.handlePublishStreamServer(e)})),this.connection.on(c.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,(function(e){return n.handleInjectStreamServerStatus(e)})),this.connection.on(c.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS,(function(t,r){if(!n.connection)return r(new d.AgoraRTCError(d.AgoraRTCErrorCode.UNEXPECTED_ERROR,"can not get new live streaming address list"));h.getLiveStreamingWorkerMangerResult(e,n.spec,n.cancelToken.token).then((function(e){n.uapResponse=e,t(e.addressList)})).catch(r)})),[4,this.connection.init(t.addressList)];case 2:return r.sent(),[2,this.connection]}}))}))},e.prototype.handlePublishStreamServer=function(e){var t=this,n=e.serverStatus&&e.serverStatus.url;if(!n)throw new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"empty url",{code:e.code});var r=this.streamingTasks.get(n);switch(e.code){case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case c.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:var i=new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(r)return f.default.error(i.toString()),this.onLiveStreamError&&this.onLiveStreamError(n,i);if(!this.isStartingStreamingTask)return;this.statusError.set(n,i);case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case c.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if(!this.connection||0===this.streamingTasks.size)return;this.connection.tryNextAddress();for(var o=Array.from(this.streamingTasks.values()),a=function(n){if(n.abortTask)return n.abortTask(),"continue";f.default.warning("["+s.spec.clientId+"] publish stream status code",e.code,"try to republish",n.url),s.startLiveStreamingTask(n.url,n.mode,new d.AgoraRTCError(d.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((function(){f.default.debug("["+t.spec.clientId+"] republish live stream success",n.url)})).catch((function(e){f.default.error(e.toString()),t.onLiveStreamError&&t.onLiveStreamError(n.url,e)}))},s=this,u=0,l=o;u<l.length;u++)a(l[u]);return}},e.prototype.handleInjectStreamServerStatus=function(e){var t=Number(e.uid),n=e.serverStatus&&e.serverStatus.url;switch(e.code){case 200:return void(this.onInjectStatusChange&&this.onInjectStatusChange(0,t,n));case 451:return this.onInjectStatusChange&&this.onInjectStatusChange(1,t,n),void this.streamingTasks.delete(n);case 453:return this.onInjectStatusChange&&this.onInjectStatusChange(2,t,n),void this.streamingTasks.delete(n);case 470:return this.onInjectStatusChange&&this.onInjectStatusChange(10,t,n),void this.streamingTasks.delete(n);case 499:return this.onInjectStatusChange&&this.onInjectStatusChange(3,t,n),void this.streamingTasks.delete(n);default:return void f.default.debug("inject stream server status",e)}},e.prototype.haveUrl=function(e){return this.streamingTasks.has(e)||void 0},e}();t.AgoraRTCLiveStreamingClient=v},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(27),l=n(77),d=n(36),h=n(24),f=n(2),p=c(n(0)),v=n(1),g=n(31),m=function(e){function t(t,n,r){var i=e.call(this)||this;return i._gatewayConnectionState="CONNECTED",i.reconnectMode="retry",i.reqId=0,i.commandReqId=0,i.waitingResponseList=[],i.handleWebSocketOpen=function(){i.reconnectMode="retry",i.startPingPong()},i.handleWebSocketMessage=function(e){if(e.data){var t=JSON.parse(e.data);if(t.requestId)i.emit("@"+t.requestId,t);else if(i.serviceMode===u.LiveStreamingServiceMode.INJECT)i.emit(u.LiveStreamingUapSignalEvents.INJECT_STREAM_STATUS,t);else{v.report.requestWorkerEvent(i.spec.sid,{actionType:"status",serverCode:t.code,workerType:i.serviceMode===u.LiveStreamingServiceMode.TRANSCODE?1:2});var n=t.serverStatus&&t.serverStatus.url;n&&i.waitingResponseList.includes(n)&&200===t.code&&i.emit(n),i.emit(u.LiveStreamingUapSignalEvents.PUBLISH_STREAM_STATUS,t)}}},i.spec=n,i.token=t,i.serviceMode=r,i.websocket=new l.AgoraWebSocketManager("live-streaming"),i.websocket.on(u.WebSocketManagerEvents.CONNECTED,i.handleWebSocketOpen),i.websocket.on(u.WebSocketManagerEvents.ON_MESSAGE,i.handleWebSocketMessage),i.websocket.on(u.WebSocketManagerEvents.REQUEST_NEW_URLS,(function(e,t){d.emitAsPromise(i,u.LiveStreamingUapSignalEvents.REQUEST_NEW_ADDRESS).then(e).catch(t)})),i.websocket.on(u.WebSocketManagerEvents.RECONNECTING,(function(){i.websocket.reconnectMode=i.reconnectMode})),i}return i(t,e),Object.defineProperty(t.prototype,"gatewayConnectionState",{get:function(){return this._gatewayConnectionState},set:function(e){this._gatewayConnectionState=e,"CONNECTED"===e&&this.emit("gateway-connected",e)},enumerable:!0,configurable:!0}),t.prototype.init=function(e){return this.websocket.init(e)},t.prototype.request=function(e,t,n,r){return a(this,void 0,void 0,(function(){var i,a,c,l,d,p,m,y,b,_,E=this;return s(this,(function(s){switch(s.label){case 0:if(this.reqId+=1,i=this.reqId,"request"===e&&(this.commandReqId+=1),a=this.commandReqId,!i||!this.websocket)throw new h.AgoraRTCError(h.AgoraRTCErrorCode.UNEXPECTED_ERROR);if(c=f.VERSION,"closed"===this.websocket.state)throw new h.AgoraRTCError(h.AgoraRTCErrorCode.WS_DISCONNECT);return l=function(){return new Promise((function(e,t){var n=function t(){"CONNECTED"===E.gatewayConnectionState&&"connected"===E.websocket.state&&(E.off("gateway-connected",t),E.websocket.off(u.WebSocketManagerEvents.CONNECTED,t),e(void 0))};E.on("gateway-connected",n),E.websocket.once(u.WebSocketManagerEvents.CLOSED,(function(){return t(new h.AgoraRTCError(h.AgoraRTCErrorCode.WS_ABORT))})),E.websocket.on(u.WebSocketManagerEvents.CONNECTED,n)}))},"connected"===this.websocket.state&&"CONNECTED"===this.gatewayConnectionState?[3,2]:[4,l()];case 1:s.sent(),s.label=2;case 2:d=Promise.race([new Promise((function(e,t){var n=function(){t(new h.AgoraRTCError(h.AgoraRTCErrorCode.WS_ABORT))};E.websocket.once(u.WebSocketManagerEvents.RECONNECTING,n),E.websocket.once(u.WebSocketManagerEvents.CLOSED,n),E.once("@"+i,(function(t){e(t)}))})),g.wait(f.getParameter("LIVE_STREAMING_TIMEOUT")).then((function(){return!1}))]),(p=o({command:e,sdkVersion:c,seq:i,requestId:i,allocate:n,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t)).clientRequest&&(p.clientRequest.workerToken=this.token),r&&v.report.requestWorkerEvent(this.spec.sid,o(o({},r),{requestId:a,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0})),m=Date.now(),this.websocket.sendMessage(p),y=null,s.label=3;case 3:return s.trys.push([3,5,,8]),[4,d];case 4:return y=s.sent(),[3,8];case 5:if(b=s.sent(),"closed"===this.websocket.state)throw b;return[4,l()];case 6:return s.sent(),[4,this.request(e,t,n,r)];case 7:return[2,s.sent()];case 8:if(!1===y)throw _=new h.AgoraRTCError(h.AgoraRTCErrorCode.NETWORK_TIMEOUT,(t&&t.clientRequest&&t.clientRequest.command)+" timeout",{changeAddress:!0,retry:!0}),this.emit(u.LiveStreamingUapSignalEvents.WARNING,_,r&&r.url||"unknown url"),r&&v.report.requestWorkerEvent(this.spec.sid,o(o({},r),{requestId:a,actionType:"response",payload:"TIMEOUT",serverCode:0,success:0,responseTime:Date.now()-m})),_;return r&&v.report.requestWorkerEvent(this.spec.sid,o(o({},r),{requestId:a,actionType:"response",payload:JSON.stringify(y.serverResponse),serverCode:y.code,success:200===y.code,responseTime:Date.now()-m})),200===y.code?[3,10]:[4,this.handleResponseError(y)];case 9:s.sent(),s.label=10;case 10:return[2,y]}}))}))},t.prototype.tryNextAddress=function(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")},t.prototype.close=function(){var e="__VERSION__"===f.VERSION?"0.0.1":f.VERSION;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)},t.prototype.handleResponseError=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,o=this;return s(this,(function(a){switch(p.default.debug("[live-streaming] receive response error "+e.code),e.code){case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return p.default.warning("live stream response already exists stream"),t=e.serverResponse.url,this.emit(u.LiveStreamingUapSignalEvents.WARNING,"live stream response already exists stream, code 454",t),this.waitingResponseList.includes(t)||this.waitingResponseList.push(t),[2,new Promise((function(n,r){o.once(t,(function(){o.waitingResponseList.splice(o.waitingResponseList.indexOf(t),1),n()})),setTimeout((function(){o.waitingResponseList.splice(o.waitingResponseList.indexOf(t),1),r(new h.AgoraRTCError(h.AgoraRTCErrorCode.TIMEOUT,"live stream timeout waiting 454",{code:e.code}))}),1e4)}))];case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_BAD_STREAM:case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return[2,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw()];case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INGNORE_MESSAGE:throw new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INVALID_ARGUMENT,"",{retry:!0,changeAddress:!0});case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return[2];throw new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return[2,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw()];case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:return n=new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE),[2,this.emit(u.LiveStreamingUapSignalEvents.WARNING,n,e.serverResponse.url)];case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:return n=new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_WARN_FREQUENT_REQUEST),[2,this.emit(u.LiveStreamingUapSignalEvents.WARNING,n,e.serverResponse.url)];case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return[2,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_TRANSCODING_NOT_SUPPORT,"",{code:e.code}).throw()];case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:return n=new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT),[2,this.emit(u.LiveStreamingUapSignalEvents.WARNING,n,e.serverResponse.url)];case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return[2,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw()];case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_LOST:case u.LIVE_STREAM_ERROR_CODE.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return[2];throw new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case u.LIVE_STREAM_ERROR_CODE.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command||"UninjectStream"===e.serverResponse.command)return[2];if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return[2,new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw()];throw new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case u.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case u.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case u.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case u.LIVE_STREAM_ERROR_CODE.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return r=e.serverResponse.url,this.waitingResponseList.includes(r)||this.waitingResponseList.push(r),i=new h.AgoraRTCError(h.AgoraRTCErrorCode.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}),this.emit(u.LiveStreamingUapSignalEvents.WARNING,i,r),[2,new Promise((function(e,t){o.once(r,(function(){o.waitingResponseList.splice(o.waitingResponseList.indexOf(r),1),e()})),setTimeout((function(){o.waitingResponseList.splice(o.waitingResponseList.indexOf(r),1),t(i)}),1e4)}))]}return[2]}))}))},t.prototype.startPingPong=function(){var e=this;this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((function(){"connected"===e.websocket.state&&e.request("ping",{}).catch((function(){}))}),6e3)},t}(d.EventEmitter);t.AgoraLiveStreamingUapSignal=m},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=n(24),u=n(36),l=n(31),d=n(27),h=s(n(0)),f=function(e){function t(t){var n=e.call(this)||this;return n.connectionID=0,n.currentURLIndex=0,n.reconnectMode="tryNext",n._state="closed",n.retryConfig=l.DEFAULT_RETRY_CONFIG,n.reconnectCount=0,n.name=t,n}return i(t,e),Object.defineProperty(t.prototype,"url",{get:function(){return this.websocket?this.websocket.url:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(d.WebSocketManagerEvents.RECONNECTING,this.reconnectMode):"connected"===this._state?this.emit(d.WebSocketManagerEvents.CONNECTED):"closed"===this._state?this.emit(d.WebSocketManagerEvents.CLOSED):"failed"===this._state&&this.emit(d.WebSocketManagerEvents.FAILED))},enumerable:!0,configurable:!0}),t.prototype.init=function(e){var t=this;return new Promise((function(n,r){t.urls=e;var i=t.urls[t.currentURLIndex];t.state="connecting",t.createWebSocketConnection(i).then(n).catch(r),t.once(d.WebSocketManagerEvents.CLOSED,(function(){return r(new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_DISCONNECT))})),t.once(d.WebSocketManagerEvents.CONNECTED,(function(){return n()}))}))},t.prototype.close=function(e,t){if(this.currentURLIndex=0,this.reconnectCount=0,this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;var n=this.websocket;t?setTimeout((function(){return n.close()}),500):n.close(),this.websocket=void 0}this.state=e?"failed":"closed"},t.prototype.reconnect=function(e){if(this.websocket){void 0!==e&&(this.reconnectMode=e);var t=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),t&&t.bind(this.websocket)({code:9999})}else h.default.warning("["+this.name+"] can not reconnect, no websocket")},t.prototype.sendMessage=function(e){if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_ABORT,"websocket is not ready");var t=JSON.stringify(e);try{this.websocket.send(t)}catch(e){throw new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_ERR,"send websocket message error"+e.toString())}},t.prototype.createWebSocketConnection=function(e){return o(this,void 0,void 0,(function(){var t,n=this;return a(this,(function(r){return this.connectionID+=1,t=this.connectionID,[2,new Promise((function(r,i){n.websocket&&(n.websocket.onclose=null,n.websocket.close()),h.default.debug("["+n.name+"] start connect, url: "+e);try{n.websocket=new WebSocket(e),n.websocket.binaryType="arraybuffer"}catch(e){var s=new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_ERR,"init websocket failed! Error: "+e.toString());return h.default.error("["+n.name+"]"+s),void i(s)}l.wait(5e3).then((function(){t===n.connectionID&&n.websocket&&n.websocket.readyState!==WebSocket.OPEN&&n.websocket&&n.websocket.close()})),n.websocket.onopen=function(){h.default.debug("["+n.name+"] websockect opened:",e),n.reconnectMode="retry",n.state="connected",n.reconnectCount=0,r()},n.websocket.onclose=function(e){return o(n,void 0,void 0,(function(){var t,n;return a(this,(function(o){switch(o.label){case 0:return h.default.debug("["+this.name+"] websocket close "+(this.websocket&&this.websocket.url)+", code: "+e.code+", reason: "+e.reason+", current mode: "+this.reconnectMode),this.reconnectCount<this.retryConfig.maxRetryCount?("connected"===this.state&&(this.state="reconnecting"),t=u.emitAsInvokerNoResponse(this,d.WebSocketManagerEvents.WILL_RECONNECT,this.reconnectMode)||this.reconnectMode,[4,this.reconnectWithAction(t)]):[3,2];case 1:return n=o.sent(),"closed"===this.state?(h.default.debug("["+this.connectionID+"] ws is closed, no need to reconnect"),[2]):n?(r(),[3,3]):(i(new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_DISCONNECT,"websocket reconnect failed: "+e.code)),this.close(!0),[2]);case 2:i(new c.AgoraRTCError(c.AgoraRTCErrorCode.WS_DISCONNECT,"websocket close: "+e.code)),this.close(),o.label=3;case 3:return[2]}}))}))},n.websocket.onmessage=function(e){n.emit(d.WebSocketManagerEvents.ON_MESSAGE,e)}}))]}))}))},t.prototype.reconnectWithAction=function(e,t){return o(this,void 0,void 0,(function(){var n,r,i,o;return a(this,(function(a){switch(a.label){case 0:return!t&&this.reconnectCount>=this.retryConfig.maxRetryCount?[2,!1]:this.urls?"closed"===this.state?[2,!1]:(n=l.getRetryWaitTime(this.reconnectCount,this.retryConfig),h.default.debug("["+this.name+"] wait "+n+"ms to reconnect websocket, mode: "+e),[4,l.wait(n)]):[2,!1];case 1:if(a.sent(),"closed"===this.state)return[2,!1];this.reconnectCount+=1,a.label=2;case 2:return a.trys.push([2,12,,14]),"retry"!==e?[3,4]:(i=this.urls[this.currentURLIndex],[4,this.createWebSocketConnection(i)]);case 3:return a.sent(),[3,11];case 4:return"tryNext"!==e?[3,8]:(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length?[4,this.reconnectWithAction("recover")]:[3,6]);case 5:return[2,a.sent()];case 6:return h.default.debug("["+this.name+"] websocket url length: "+this.urls.length+" current index: "+this.currentURLIndex),i=this.urls[this.currentURLIndex],[4,this.createWebSocketConnection(i)];case 7:return a.sent(),[3,11];case 8:return"recover"!==e?[3,11]:(h.default.debug("["+this.name+"] request new urls"),r=this,[4,u.emitAsPromise(this,d.WebSocketManagerEvents.REQUEST_NEW_URLS)]);case 9:return r.urls=a.sent(),this.currentURLIndex=0,i=this.urls[this.currentURLIndex],[4,this.createWebSocketConnection(i)];case 10:a.sent(),a.label=11;case 11:return[2,!0];case 12:return o=a.sent(),h.default.error("["+this.name+"] reconnect failed",o.toString()),[4,this.reconnectWithAction(e)];case 13:return[2,a.sent()];case 14:return[2]}}))}))},t}(u.EventEmitter);t.AgoraWebSocketManager=f},function(e,t,n){"use strict";var r=n(18),i=n(38),o=n(79),a=n(44);function s(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var c=s(n(41));c.Axios=o,c.create=function(e){return s(a(c.defaults,e))},c.Cancel=n(45),c.CancelToken=n(93),c.isCancel=n(40),c.all=function(e){return Promise.all(e)},c.spread=n(94),e.exports=c,e.exports.default=c},function(e,t,n){"use strict";var r=n(18),i=n(39),o=n(80),a=n(81),s=n(44);function c(e){this.defaults=e,this.interceptors={request:new o,response:new o}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,i){return this.request(r.merge(i||{},{method:e,url:t,data:n}))}})),e.exports=c},function(e,t,n){"use strict";var r=n(18);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},function(e,t,n){"use strict";var r=n(18),i=n(82),o=n(40),a=n(41);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function h(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&f())}function f(){if(!l){var e=s(h);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(43);e.exports=function(e,t,n){var i=n.config.validateStatus;!i||i(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(88),i=n(89);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(18),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},function(e,t,n){"use strict";var r=n(18);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(18);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(45);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0)),o=1,a=function(){function e(e){this.lockingPromise=Promise.resolve(),this.locks=0,this.name="",this.lockId=o++,e&&(this.name=e),i.default.debug("[lock-"+this.name+"-"+this.lockId+"] is created.")}return Object.defineProperty(e.prototype,"isLocked",{get:function(){return this.locks>0},enumerable:!0,configurable:!0}),e.prototype.lock=function(){var e,t=this;this.locks+=1,i.default.debug("[lock-"+this.name+"-"+this.lockId+"] is locked, current queue "+this.locks+".");var n=new Promise((function(n){e=function(){t.locks-=1,i.default.debug("[lock-"+t.name+"-"+t.lockId+"] is not locked, current queue "+t.locks+"."),n()}})),r=this.lockingPromise.then((function(){return e}));return this.lockingPromise=this.lockingPromise.then((function(){return n})),r},e}();t.PromiseMutex=a},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(0),o=n(1),a=n(8),s=n(4),c=function(){};c.prototype.set=function(e,t){["BatteryLevel"].indexOf(e)>-1&&(this[e]=t)};var u=function(){var e=o.report.reportApiInvoke(null,{name:"checkSystemRequirements",options:arguments,tag:"tracer"}),t=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket,i=!!t&&!!n&&!!r,a=!1;s.isChrome()&&s.getBrowserVersion()>=58&&"iOS"!==s.getBrowserOS()&&(a=!0),s.isFireFox()&&s.getBrowserVersion()>=56&&(a=!0),s.isOpera()&&s.getBrowserVersion()>=45&&(a=!0),s.isSafari()&&s.getBrowserVersion()>=11&&(a=!0),s.isEdge()&&(a=!0),(s.isWeChatBrowser()||s.isQQBrowser())&&"iOS"!==s.getBrowserOS()&&(a=!0),s.isSupportedPC()||s.isSupportedMobile()||(a=!1);var c=i&&a;return e(null,c),c},l=new function(){var e=Object(a.b)();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.batteryManager=null,e._init=function(t,n){e.state=e.states.INITING,navigator.getBattery?navigator.getBattery().then((function(n){e.batteryManager=n,t&&setTimeout((function(){t()}),0)})).catch((function(e){i.default.debug("navigator.getBattery is disabled",e),t&&t()})):(e.state=e.states.INITED,t&&t())},e._getBatteryStats=function(){var t={};return e.batteryManager&&e.batteryManager.level?t.BatteryLevel=Math.floor(100*e.batteryManager.level):t.BatteryLevel="UNSUPPORTED",t},e.getStats=function(t,n){var r=new c,i=e._getBatteryStats();i&&i.BatteryLevel&&r.set("BatteryLevel",i.BatteryLevel),t&&t(r)},e._init(),e},d=n(22),h=n(19),f=n(26),p=n(53),v=n(9),g=["live","rtc","web","interop","h264_interop","web-only"],m=["vp8","vp9","h264"],y=["aes-128-gcm","aes-256-gcm","aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-256-gcm2","aes-128-gcm2"],b=n(11),_=n.n(b),E=n(7),S=n.n(E),w=n(13),x=n(5),T=n(10),I=n(20),R=n(6),k=n(14),O={1001:"FRAMERATE_INPUT_TOO_LOW",1002:"FRAMERATE_SENT_TOO_LOW",1003:"SEND_VIDEO_BITRATE_TOO_LOW",1005:"RECV_VIDEO_DECODE_FAILED",2001:"AUDIO_INPUT_LEVEL_TOO_LOW",2002:"AUDIO_OUTPUT_LEVEL_TOO_LOW",2003:"SEND_AUDIO_BITRATE_TOO_LOW",2005:"RECV_AUDIO_DECODE_FAILED",3001:"FRAMERATE_INPUT_TOO_LOW_RECOVER",3002:"FRAMERATE_SENT_TOO_LOW_RECOVER",3003:"SEND_VIDEO_BITRATE_TOO_LOW_RECOVER",3005:"RECV_VIDEO_DECODE_FAILED_RECOVER",4001:"AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",4002:"AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",4003:"SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",4005:"RECV_AUDIO_DECODE_FAILED_RECOVER"},C={FramerateInput:1001,FramerateSent:1002,SendVideoBitrate:1003,VideoDecode:1005,AudioIntputLevel:2001,AudioOutputLevel:2002,SendAudioBitrate:2003,AudioDecode:2005},A=function(e){var t={remoteStreamStorage:{},localStreamStorage:{}};return t.gatewayClient=e,t.checkAudioOutputLevel=function(e){return!(e&&parseInt(e.audioRecvBytesDelta)>0&&parseInt(e.audioDecodingNormalDelta)>0&&0===parseInt(e.audioOutputLevel))},t.checkAudioIntputLevel=function(e){return!e||0!==parseInt(e.audioInputLevel)},t.checkFramerateInput=function(e,t){if(!e||!t.attributes)return!0;var n=parseInt(t.attributes.maxFrameRate),r=parseInt(e.googFrameRateInput);return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)},t.checkFramerateSent=function(e){return!(e&&parseInt(e.googFrameRateInput)>5&&parseInt(e.googFrameRateSent)<=1)},t.checkSendVideoBitrate=function(e){return!e||0!==parseInt(e.videoSendBytesDelta)},t.checkSendAudioBitrate=function(e){return!e||0!==parseInt(e.audioSendBytesDelta)},t.checkVideoDecode=function(e){return!e||0===parseInt(e.videoRecvBytesDelta)||0!==parseInt(e.googFrameRateDecoded)},t.checkAudioDecode=function(e){return!e||0===parseInt(e.audioRecvBytesDelta)||0!==parseInt(e.audioDecodingNormalDelta)},t.record=function(e,n,r,i,o){r[e]||(r[e]={isPrevNormal:!0,record:[]});var a=r[e],s=t["check"+e](n,o);if(a.record.push(s),a.record.length>=5){a.isCurNormal=-1!==a.record.indexOf(!0);var c=C[e];a.isPrevNormal&&!a.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:c,msg:O[c],uid:i}),!a.isPrevNormal&&a.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:c+2e3,msg:O[c+2e3],uid:i}),a.isPrevNormal=a.isCurNormal,a.record=[]}},t.setLocalStats=function(e){var n={};Object.keys(e).map((function(r){var i=e[r],o=t.gatewayClient.localStreams[parseInt(r)],a=t.localStreamStorage[r]||{};o&&o.hasVideo()&&(t.record("SendVideoBitrate",i.videoStats,a,r),t.record("FramerateInput",i.videoStats,a,r,o),t.record("FramerateSent",i.videoStats,a,r)),o&&o.hasAudio()&&(t.record("AudioIntputLevel",i.audioStats,a,r),t.record("SendAudioBitrate",i.audioStats,a,r)),n[r]=a})),t.localStreamStorage=n},t.setRemoteStats=function(n){var r={};Object.keys(n).map((function(i){var o=n[i],a=e.remoteStreams[i],s=t.remoteStreamStorage[i]||{};a&&a.hasVideo()&&a.isPlaying()&&t.record("VideoDecode",o.videoStats,s,i),a&&a.hasAudio()&&a.isPlaying()&&(t.record("AudioOutputLevel",o.audioStats,s,i),t.record("AudioDecode",o.audioStats,s,i)),r[i]=s})),t.remoteStreamStorage=r},t};function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j,D=n(3),P=new function(){var e=Object(a.b)();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.type=null,e.lastConnectedAt=null,e.lastDisconnectedAt=null,e.lastTypeChangedAt=null,e.networkChangeTimer=null,e._init=function(t,n){if(e.state=e.states.INITING,navigator.connection&&navigator.connection.addEventListener){var r=e._getNetworkInfo();e.type=r&&r.type,e.state=e.states.INITED,t&&t()}else e.state=e.states.UNINIT,n&&n("DO_NOT_SUPPORT")},e._getNetworkInfo=function(){return navigator.connection},e._reloadNetworkInfo=function(){var t=e._getNetworkInfo(),n=t&&t.type||"UNSUPPORTED",r=Date.now();if(n!==e.type){e.lastTypeChangedAt=r,"none"==n?e.lastDisconnectedAt=r:"none"==e.type&&(e.lastConnectedAt=r),e.type=n;var i={type:"networkTypeChanged",networkType:n};e.dispatchEvent(i)}},e.getStats=function(t,n){var r={},i=e._getNetworkInfo();i&&(r.NetworkType=i.type||"UNSUPPORTED"),setTimeout((function(){t(r)}),0)},e._init((function(){navigator.connection.addEventListener("change",(function(){e._reloadNetworkInfo()})),e.networkChangeTimer=setInterval((function(){e._reloadNetworkInfo()}),5e3)}),(function(e){})),e},L=n(55),M=n(16),U=n(56),V=n.n(U),F=n(21),B=function(){return void 0!==window.isSecureContext},G="host",q=function(e){var t={key:void 0,highStream:null,lowStream:null,lowStreamParameter:null,isDualStream:!1,highStreamState:2,lowStreamState:2,proxyServer:null,turnServers:[],useProxyServer:!1,useLocalAccessPoint:!1};if(t.mode=e.mode,t.codec=e.codec,t.clientId=Object(T.generateSessionId)().slice(0,5),t.uintUid=null,t.customReportCount=0,e=S()({},e),t.aespassword=null,t.aesmode="none",t.hasPublished=!1,t.getSessionId=function(){return e.sessionId},t.startChannelMediaRelay=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return r&&r(e);r&&r()},name:"Client.startChannelMediaRelay",options:arguments,tag:"tracer"});if(!(n instanceof v.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var a=n.getSrcChannelMediaInfo(),s=n.getDestChannelMediaInfos();if(Object(D.isEmpty)(a))throw"srcChannelMediaInfo should not be empty";if(Object(D.isEmpty)(s)||0===s.length)throw"destChannelMediaInfos should not be empty";if(!Object(T.is32Uint)(a.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(D.isValidChannelName)(a.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(a.token&&!Object(D.isValidToken)(a.token))throw"Invalid token in srcChannelMediaInfo";if(s.forEach((function(e){if(!Object(T.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(D.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(D.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"})),t.gatewayClient.state!==w.a.CONNECTED)throw"startChannelMediaRelay should be used after join";t.gatewayClient.startChannelMediaRelay(n).then((function(){i&&i()})).catch((function(e){i&&i(e)}))},t.updateChannelMediaRelay=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return r&&r(e);r&&r()},name:"Client.updateChannelMediaRelay",options:arguments,tag:"tracer"});if(!(n instanceof v.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var a=n.getSrcChannelMediaInfo(),s=n.getDestChannelMediaInfos();if(Object(D.isEmpty)(a))throw"srcChannelMediaInfo should not be empty";if(Object(D.isEmpty)(s)||0===s.length)throw"destChannelMediaInfos should not be empty";if(!Object(T.is32Uint)(a.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(D.isValidChannelName)(a.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(a.token&&!Object(D.isValidToken)(a.token))throw"Invalid token in srcChannelMediaInfo";if(s.forEach((function(e){if(!Object(T.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(D.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(D.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"})),t.gatewayClient.state!==w.a.CONNECTED)throw"updateChannelMediaRelay should be used after join";t.gatewayClient.updateChannelMediaRelay(n).then((function(){i&&i()})).catch((function(e){i&&i(e)}))},t.stopChannelMediaRelay=function(n){var r=o.report.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return n&&n(e);n&&n()},name:"Client.stopChannelMediaRelay",options:arguments,tag:"tracer"});t.gatewayClient.stopChannelMediaRelay().then((function(){r&&r()})).catch((function(e){r&&r(e)}))},t.getConnectionState=function(){var n=o.report.reportApiInvoke(e.sessionId,{name:"Client.getConnectionState",options:arguments,tag:"tracer"}),r=w.a.connetionStateMap[t.gatewayClient.state];return n(),r},t.setClientRole=function(n,r){var a=o.report.reportApiInvoke(e.sessionId,{callback:r,name:"Client.setClientRole",options:arguments,tag:"tracer"});if(Object(D.checkValidEnum)(n,"setClientRole",[G,"audience"]),"rtc"===t.mode){var s="RTC mode can not use setClientRole";return i.default.warning("[".concat(t.clientId,"] ").concat(s)),a&&a(s)}t.gatewayClient&&t.gatewayClient.state===w.a.CONNECTED?("audience"===n&&(0===this.highStreamState?this._unpublish(this.highStream,(function(){a&&a(null,{role:n})}),(function(e){a&&a(e)})):t.gatewayClient.setClientRole("audience",a)),n===G&&t.gatewayClient.setClientRole(G,a)):(t.gatewayClient.role=n,a&&a(null,{role:n}))},t.getGatewayInfo=function(e){if(t.gatewayClient.state!==w.a.CONNECTED){var n="Client is not in connected state";return i.default.error("[".concat(t.clientId,"] ").concat(n)),void e(n)}t.gatewayClient.getGatewayInfo((function(t){e(null,t)}),e)},t.renewToken=function(n,r,a){var s=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return i.default.error("Failed to renew token ".concat(e),t),a&&a(e);r&&r(t)},name:"Client.renewToken",options:arguments,tag:"tracer"});if(!Object(D.isValidToken)(n))throw new Error("Invalid token: Token is of the string type .Length of the string: [1,255]. ASCII characters only.");return t.gatewayClient?t.key?(t.key=n,void t.gatewayClient.renewToken(n,(function(e){return s(null,e)}),s)):(i.default.error("[".concat(t.clientId,"] renewToken should not be called before user join")),s(x.default.INVALID_OPERATION)):(i.default.error("[".concat(t.clientId,"] renewToken Failed. GatewayClient not Exist")),s(x.default.INVALID_OPERATION))},t.setLowStreamParameter=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.setLowStreamParameter",options:arguments,tag:"tracer"});Object(D.checkValidObject)(n,"param");var a=n.width,s=n.height,c=n.framerate,u=n.bitrate;Object(D.isEmpty)(a)||Object(D.checkValidNumber)(a,"width"),Object(D.isEmpty)(s)||Object(D.checkValidNumber)(s,"height"),Object(D.isEmpty)(c)||Object(D.checkValidNumber)(c,"framerate"),Object(D.isEmpty)(u)||Object(D.checkValidNumber)(u,"bitrate",1,1e7),(!a&&s||a&&!s)&&i.default.warning("[".concat(t.clientId,"] The width and height parameters take effect only when both are set")),t.lowStreamParameter=n,r()},t.init=function(t,n,r){var i=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Client.init",options:arguments,tag:"tracer"});Object(D.checkValidString)(t),Object(s.isChromeKernel)()&&Object(s.getChromeKernelVersion)()<=48?r?i(x.default.BAD_ENVIRONMENT):Object(T.popBanTip)():(e.appId=t,e.sessionId=Object(T.generateSessionId)(),i())},t.setTurnServer=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.setTurnServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==w.a.DISCONNECTED)throw new Error("Set turn server before join channel");if(t.useProxyServer)throw new Error("You have already set the proxy");if(t.useLocalAccessPoint)throw new Error("You have already set the local proxy");n instanceof Array||(n=[n]);var a=[];n.map((function(e,n){Object(D.checkValidObject)(e,"turnServer");var r=e.turnServerURL,o=e.username,s=e.password,c=e.udpport,u=e.forceturn,l=e.tcpport;if(Object(D.checkValidString)(r,"turnServerURL"),Object(D.checkValidString)(o,"username"),Object(D.checkValidString)(s,"password"),Object(D.checkValidString)(c,"udpport"),0===parseInt(c))throw new Error("udpport should not be ".concat(c));Object(D.isEmpty)(u)||Object(D.checkValidBoolean)(u,"forceturn");var d={mode:"manual"};if(d.url=r,d.udpport=c,d.username=o,d.credential=s,d.forceturn=u||!1,!Object(D.isEmpty)(l)){if(Object(D.checkValidString)(l,"tcpport"),0===parseInt(l))throw new Error("tcpport should not be ".concat(l));d.tcpport=l,i.default.info("[".concat(t.clientId,"] Set turnserver[").concat(n,"] tcpurl. ").concat(d.url,":").concat(d.tcpport))}i.default.info("[".concat(t.clientId,"] Set turnserver[").concat(n,"] udpurl. ").concat(d.url,":").concat(d.udpport,",username: ").concat(d.username)),a.push(d)})),t.turnServers=a,r()},t.setProxyServer=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.setProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==w.a.DISCONNECTED)throw new Error("Set proxy server before join channel");if(!n)throw new Error("Do not set the proxyServer parameter as empty");if(t.useProxyServer)throw new Error("You have already set the proxy");if(t.useLocalAccessPoint)throw new Error("You have already set the local proxy");Object(D.checkValidString)(n,"proxyServer"),t.proxyServer=n,o.report.setProxyServer(n),i.default.setProxyServer(n),r()},t.startProxyServer=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.startProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==w.a.DISCONNECTED)throw new Error("Start proxy server before join channel");if(t.proxyServer)throw new Error("You have already set the proxy");if(t.useLocalAccessPoint)throw new Error("You have already set the local proxy");t.useProxyServer=!0,t.proxyServerType=n||1,r()},t.stopProxyServer=function(){var n=o.report.reportApiInvoke(e.sessionId,{name:"Client.stopProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==w.a.DISCONNECTED)throw new Error("Stop proxy server after leave channel");o.report.setProxyServer(),i.default.setProxyServer(),t.turnServers=[],t.proxyServer=null,t.useProxyServer=!1,t.proxyServerType=null,n()},t.setEncryptionSecret=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionSecret",options:arguments,tag:"tracer"});Object(D.checkValidString)(n,"password"),new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})").test(n)||i.default.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer,\n      "),t.aespassword=n,r()},t.setEncryptionMode=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionMode",options:arguments,tag:"tracer"});if(Object(D.checkValidString)(n,"encryptionMode"),-1===y.indexOf(n))throw new Error('Invalid encryptionMode: encryptionMode should be "aes-128-xts" | "aes-256-xts" | "aes-128-ecb" | "sm4-128-ecb" | "aes-128-gcm" | "aes-256-gcm" | "aes-128-gcm2" | "aes-256-gcm2"');if(-1!==["aes-128-gcm2","aes-256-gcm2"].indexOf(n)){if(!r||!(r instanceof Uint8Array&&32===r.length))throw Error("salt must be an Uint8Array and exactly equal to 32 bytes")}else if(r)throw new Error("Only ".concat("aes-128-gcm2"," and ").concat("aes-256-gcm2"," support use salt"));r&&(t.aesSalt=Object(T.uint8ArrayToBase64)(r)),t.aesmode=n,i()},t.configPublisher=function(n){var r=o.report.reportApiInvoke(e.sessionId,{name:"Client.configPublisher",options:arguments,tag:"tracer"});Object(D.checkValidObject)(n,"config");var i=n.width,a=n.height,s=n.framerate,c=n.bitrate,u=n.publisherUrl;Object(D.checkValidNumber)(i,"width"),Object(D.checkValidNumber)(a,"height"),Object(D.checkValidNumber)(s,"framerate"),Object(D.checkValidNumber)(c,"bitrate",1,1e7),u&&Object(D.checkValidString)(u,"publisherUrl"),t.gatewayClient.configPublisher(n),r()},t.enableDualStream=function(n,r){var a=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Client.enableDualStream",options:arguments,tag:"tracer"});return"iOS"===Object(s.getBrowserOS)()?(o.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),a(x.default.IOS_NOT_SUPPORT)):Object(s.isWeChatBrowser)()?(o.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),a(x.default.WECHAT_NOT_SUPPORT)):(o.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!0}),t.isDualStream=!0,t.highStream&&(t.highStream.isDualStream=!0),void(0===t.highStreamState?t._publishLowStream((function(e){return a(null,e)}),(function(e){i.default.warning("[".concat(t.clientId,"]"),e),a(x.default.ENABLE_DUALSTREAM_FAILED)})):1===t.highStreamState?a(x.default.STILL_ON_PUBLISHING):a(null)))},t.disableDualStream=function(n,r){var a=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Client.disableDualStream",options:arguments,tag:"tracer"});o.report.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!1,succ:!0}),t.isDualStream=!1,t.highStream&&(t.highStream.isDualStream=!1),0===t.highStreamState?t._unpublishLowStream((function(){t.highStream.lowStream=null,a()}),(function(e){i.default.warning("[".concat(t.clientId,"]"),e),a(x.default.DISABLE_DUALSTREAM_FAILED)})):1===t.highStreamState?a(x.default.STILL_ON_PUBLISHING):a()},t._getLowStream=function(e,n){t.lowStream?e(t.lowStream):t._createLowStream((function(n){t.lowStream=n,e(t.lowStream)}),n)},t._createLowStream=function(e,n){if(t.highStream&&t.highStream.stream){var r=S()({},t.highStream.params);if(r.streamID+=1,r.audio=!1,r.video)if(t.highStream.stream.getVideoTracks()[0]){var i=new d.a(r);i.isLowStream=!0,i.streamId=t.highStream.getId()+1;var o={};t.lowStreamParameter&&(o=S()({},t.lowStreamParameter)),o.width&&o.height||(o.width=160,o.height=120),o.framerate=o.framerate||15,o.bitrate=o.bitrate||50,i.setVideoProfileCustomPlus(o);try{var a=V()(t.highStream,{width:i.videoConstraint.width.ideal,height:i.videoConstraint.height.ideal,framerate:i.videoConstraint.frameRate});return i.stream=a,t.highStream.lowStream=i,t.highStream.userMuteVideo&&i.muteVideo(),e&&e(i)}catch(e){return n&&n(e)}}else n&&n(x.default.HIGH_STREAM_NOT_VIDEO_TRACE);else n&&n(x.default.HIGH_STREAM_NOT_VIDEO_TRACE)}else n&&n(x.default.HIGH_STREAM_NOT_VIDEO_TRACE)},t._publishLowStream=function(e,n){return 2!==t.lowStreamState?n&&n(x.default.LOW_STREAM_ALREADY_PUBLISHED):t.highStream&&t.highStream.hasScreen()?n&&n(x.default.SHARING_SCREEN_NOT_SUPPORT):void t._getLowStream((function(r){t.lowStreamState=1,t.gatewayClient.publish(r,{streamType:1},(function(){t.lowStreamState=0,e&&e()}),(function(e){1===t.lowStreamState&&(t.lowStreamState=2),i.default.debug("[".concat(t.clientId,"] publish low stream failed")),n&&n(e)}))}),n)},t._unpublishLowStream=function(e,n){if(0!==t.lowStreamState)return n&&n(x.default.LOW_STREAM_NOT_YET_PUBLISHED);t.lowStream&&(t.gatewayClient.unpublish(t.lowStream,{streamType:1},(function(){}),(function(e){i.default.debug("[".concat(t.clientId,"] unpublish low stream failed")),n&&n(e)})),t.lowStream.close(),t.lowStream=null,t.lowStreamState=2,e&&e())},t.join=function(n,r,a,c,l,d){c&&"function"==typeof c&&(d=l,l=c,c=null);var h=u(),f=Object(s.getBrowserInfo)();i.default.debug(f,",Support: "+h);var p="HTTPS"===(j||j||(j=(window.location.protocol.split(":")[0]||"").toUpperCase())),v=B()?window.isSecureContext:"Browser Not Support",g=function(){i.default.warning("The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser")};B()?window.isSecureContext||g():p||g();var m=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return d&&d(e);l&&l(t)},name:"Client.join",options:arguments,getStates:function(){return{isHttps:p,isSecureContext:v}},tag:"tracer"});if(n&&!Object(D.isValidToken)(n))return i.default.warning("[".concat(t.clientId,"] Param channelKey should be string")),m(x.default.INVALID_PARAMETER);if(!Object(D.isValidChannelName)(r))return i.default.error("Invalid Channel Name ".concat(r)),i.default.warning("[".concat(t.clientId,"] The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")),m(x.default.INVALID_PARAMETER);if("string"==typeof r&&""===r)return i.default.warning("[".concat(t.clientId,"] Param channel should not be empty")),m(x.default.INVALID_PARAMETER);if(c&&!Object(D.isValidString)(c))return i.default.warning("[".concat(t.clientId,"] optionalInfo should be string")),m(x.default.INVALID_PARAMETER);if(a&&!Object(T.is32Uint)(a)&&!Object(D.isValidString)(a,1,255))return i.default.error("Invalid UID ".concat(a," ").concat(_()(a))),i.default.warning("[".concat(t.clientId,"] [String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is 32Uint")),m(x.default.INVALID_PARAMETER);if("string"==typeof a&&0==a.length)return i.default.warning("[".concat(t.clientId,"] String uid should not be empty")),m(x.default.INVALID_PARAMETER);if("string"==typeof a&&a.length>256)return i.default.warning("[".concat(t.clientId,"] Length of string uid should be less than 255")),m(x.default.INVALID_PARAMETER);i.default.stopWaitJoin(),t.highStream=null,t.lowStream=null,t.lowStreamParameter=null,t.isDualStream=!1,t.highStreamState=2,t.lowStreamState=2;var y=Date.now(),b=setTimeout((function(){if(1!=t.gatewayClient.hasJoined){i.default.debug("[".concat(t.clientId,"] The time to join the channel is greater than 5 seconds "));var n=Date.now();o.report.joinChannelTimeOut({lts:n,sid:e.sessionId,cname:r,cid:E&&E.cid,uid:E.uid||("string"==typeof a?void 0:a),elapse:n-y,timeout:5})}}),5e3),E={clientId:t.clientId,appId:e.appId,sid:e.sessionId,cname:r,uid:a,turnServers:t.turnServers.concat(),proxyServer:t.proxyServer,token:n||e.appId,useProxyServer:t.useProxyServer,useLocalAccessPoint:t.useLocalAccessPoint,proxyServerType:t.proxyServerType,optionalInfo:c};if("string"==typeof a&&(E.stringUid=a,t.uintUid?(E.uid=t.uintUid,delete t.uintUid):E.uid=0),t.aespassword&&"none"!==t.aesmode&&S()(E,{aespassword:t.aespassword,aesmode:t.aesmode}),t.aesSalt&&(E.aes_salt=t.aesSalt),o.report.sessionInit(e.sessionId,{lts:(new Date).getTime(),cname:r,appid:e.appId,mode:e.mode,succ:!0}),t.onSuccess=function(e){clearTimeout(b),t.rtcStatsCollector.startNetworkQualityTimer(),t.onSuccess=null,m(null,e)},t.onFailure=function(e){return m(e)},t.channel=r,t.gatewayClient.state!==w.a.DISCONNECTED)return i.default.error("[".concat(t.clientId,"] Client already in connecting/connected state")),m(x.default.INVALID_OPERATION),void o.report.joinGateway(e.sessionId,{lts:Date.now(),succ:!1,ec:x.default.INVALID_OPERATION,addr:null});t.gatewayClient.state=w.a.CONNECTING;var R=function(o,a){i.default.info("[".concat(t.clientId,"] Joining channel: ").concat(r)),t.gatewayClient.dispatchEvent({type:"config-distribute",config:a,joinInfo:E}),t.key=n||e.appId,E.cid=o.cid,E.uid||(E.uid=o.uid),E.vid=o.vid,E.clientId=t.clientId,E.apResponse=o.res,o.uni_lbs_ip&&o.uni_lbs_ip[1]&&(E.uni_lbs_ip=o.uni_lbs_ip[1]),E.gatewayAddr=o.gateway_addr,t.joinInfo=E,t.gatewayClient.join(E,t.key,(function(e){i.default.info("[".concat(t.clientId,"] Join channel ").concat(r," success, join with uid: ").concat(e,".")),t.onSuccess=null,t.rtcStatsCollector.startNetworkQualityTimer(),m(null,e)}),(function(e){return m(e)}))};E.stringUid&&!E.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=Object(I.getUserAccount)(E,t.gatewayClient),t.userAccountReq.then((function(e){i.default.debug("getUserAccount Success ".concat(e.url," ").concat(E.stringUid," => ").concat(e.uid)),E.uid=e.uid,Object(I.getGatewayList)(E,R,(function(e){return m(e)}))})).catch((function(e){i.default.error("getUserAccount rejected",e),m(e)}))):Object(I.getGatewayList)(E,R,(function(e){return m(e)}))},t.renewChannelKey=function(n,r,a){var s=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return a&&a(e);r&&r(t)},name:"Client.renewChannelKey",options:arguments,tag:"tracer"});Object(D.checkValidString)(n,"key",1,2047),void 0===t.key?(i.default.error("[".concat(t.clientId,"] renewChannelKey should not be called before user join")),s(x.default.INVALID_OPERATION)):(t.key=n,t.gatewayClient.joinInfo.token=n,t.gatewayClient.key=n,t.gatewayClient.recover(),s())},t.leave=function(n,a){t.gatewayClient.isFirstSuccess=!0,t.gatewayClient.hasInvokeLeave=!0;var s=!1,c=o.report.reportApiInvoke(e.sessionId,{callback:function(e,r){if(e)return a&&a(e);t.gatewayClient.reconnectingCS=!1,t.gatewayClient.state=w.a.DISCONNECTED,clearTimeout(Object(I._getReconnectCSTimer)(t.clientId)),t._renewSession(),t.rtcStatsCollector.clearNetworkQualityTimer(),n&&n(r)},name:"Client.leave",options:arguments,tag:"tracer"});i.default.info("[".concat(t.clientId,"] Leaving channel")),t.userAccountReq&&!t.userAccountReq.isFinished()&&(t.userAccountReq.cancel(),t.gatewayClient.state===w.a.CONNECTING&&(t.gatewayClient.state=w.a.DISCONNECTED)),t._terminateLiveStreaming(),t.gatewayClient.leave((function(e){s=!0,c(null,e)}),c),setTimeout((function(){s||(t.gatewayClient.socket&&(t.gatewayClient.socket.close(),t.gatewayClient.socket=null),t.gatewayClient.state=w.a.DISCONNECTED,c(null,"LEAVE_MSG_TIMEOUT"))}),Object(r.getParameter)("LEAVE_MSG_TIMEOUT"))},t._renewSession=function(){var n=Object(T.generateSessionId)();if(i.default.debug("renewSession ".concat(e.sessionId," => ").concat(n)),e.sessionId=n,t.gatewayClient.peerPublishDurationMap.clear(),t.joinInfo&&(t.joinInfo.sid=n),t.gatewayClient&&(t.gatewayClient.joinInfo&&(t.gatewayClient.joinInfo.sid=n),t.gatewayClient.localStreams))for(var r in t.gatewayClient.localStreams){var o=t.gatewayClient.localStreams[r];o&&(o.sid=n)}},t._publish=function(n,o,a,s){if(2!==t.highStreamState)return i.default.warning("[".concat(t.clientId,"] Can't publish stream when stream already publish ").concat(n.getId())),a&&a(x.default.STREAM_ALREADY_PUBLISHED);if(0===t.turnServers.length&&Object(r.getParameter)("FORCE_TURN")&&!Object(r.getParameter)("TURN_ENABLE_TCP")&&!Object(r.getParameter)("TURN_ENABLE_UDP"))throw new Error("force TURN With No TURN Configuration");i.default.info("[".concat(t.clientId,"] Publishing stream, uid ").concat(n.getId())),t.highStream=n,t.highStreamState=1,t.highStream.streamId=t.joinInfo.stringUid||t.joinInfo.uid,t.hasPublished=!1;var c=function(n,r,o){t.gatewayClient.publish(n,{streamType:0},(function(){n.sid=e.sessionId,t.highStreamState=0,i.default.info("[".concat(t.clientId,"] Publish success, uid: ").concat(n.getId())),t.highStream&&(t.highStream.isDualStream=t.isDualStream),t.isDualStream?t._publishLowStream((function(){r&&r()}),(function(e){i.default.warning("[".concat(t.clientId,"] "),e),M.a.replaceWithCanvasTrack(n).then((function(){r&&r()}))})):M.a.replaceWithCanvasTrack(n).then((function(){r&&r()}))}),o)};"audience"!==t.gatewayClient.role||"live"!==t.mode||s?c(n,o,a):t.gatewayClient.setClientRole(G,(function(e){if(e)return a&&a(e);c(n,o,a)}))},t._unpublish=function(e,n,r,o){if(0!==t.highStreamState)return i.default.warning("[".concat(t.clientId,"] Can't unpublish stream when stream not publish")),r&&r(x.default.STREAM_NOT_YET_PUBLISHED);i.default.info("[".concat(t.clientId,"] Unpublish stream, uid ").concat(e.getId()));var a=function(e,n,r){t.isDualStream&&t.lowStream&&t._unpublishLowStream(null,r),t.gatewayClient.unpublish(e,{streamType:0},(function(){t.highStreamState=2,i.default.info("[".concat(t.clientId,"] Unpublish stream success, uid: ").concat(e.getId())),t.gatewayClient.dispatchEvent({type:"stream-unpublished",stream:e}),n&&n()}),(function(n){i.default.info("[".concat(t.clientId,"] Unpublish stream fail, uid: ").concat(e.getId())),r&&r(n)}))};t.gatewayClient.role!==G||"live"!==t.mode||o?a(e,n,r):t.gatewayClient.setClientRole("audience",(function(t){if(t)return r&&r(t);a(e,n,r)}))},t.publish=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{callback:function(e,n){if(e)return 1===t.highStreamState&&"REQUEST_ABORT"!==e&&(t.highStreamState=2),r&&r(e)},name:"Client.publish",tag:"tracer",options:{stream:"too long to show",onFailure:!!r}});2===t.highStreamState?n._hasVideoTracks()||n._hasAudioTracks()?(t.gatewayClient.publishRequestId=Object(T.generateId)(),t._publish(n,(function(e){return i(null,e)}),(function(e){return i(e)}))):i(x.default.NO_TRACK_IN_STREAM):i(x.default.STREAM_ALREADY_PUBLISHED)},t.unpublish=function(n,r,i){var a=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e);i&&i(t)},name:"Client.unpublish",tag:"tracer",options:{stream:"too long to show",onFailure:!!r}});0===t.highStreamState?(t.gatewayClient.publishRequestId=null,t._unpublish(n,(function(e){return a(null,e)}),(function(e){return a(e)}))):a(x.default.STREAM_NOT_YET_PUBLISHED)},t.subscribe=function(n,r,a){var c=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return a&&a(e)},name:"Client.subscribe",tag:"tracer",options:{stream:"too long to show",options:r,onFailure:!!a}});"function"==typeof r&&(a=r,r=null),Object(D.checkValidObject)(n,"stream"),Object(D.isEmpty)(r)||(Object(D.checkValidObject)(r,"options"),Object(D.isEmpty)(r.video)||Object(D.checkValidBoolean)(r.video,"options.video"),Object(D.isEmpty)(r.audio)||Object(D.checkValidBoolean)(r.audio,"options.audio"));var u={video:!0,audio:!0};if(!Object(D.isEmpty)(r)){if(Object(s.isSafari)()&&(!r.video||!r.audio)){var l="SAFARI_NOT_SUPPORTED_FOR_TRACK_SUBSCRIPTION";return i.default.error("[".concat(t.clientId,"] "),l),void c(l)}if(!Object(D.isEmpty)(r.video)&&!Object(D.isValidBoolean)(r.video)||!Object(D.isEmpty)(r.audio)&&!Object(D.isValidBoolean)(r.audio)||!1===r.audio&&!1===r.video)return l="INVALID_PARAMETER ".concat(JSON.stringify(r)),i.default.error("[".concat(t.clientId,"] "),l),void c(l)}n.subscribeOptions?(S()(n.subscribeOptions,u,r),t.gatewayClient.subscribeChange(n,(function(e){return c(null,e)}),c)):(t.gatewayClient.subscribeRequestId.set(n.getId(),Object(T.generateId)()),n.subscribeOptions=S()({},u,r),t.gatewayClient.subscribe(n,(function(e){return c(null,e)}),c))},t.unsubscribe=function(n,r){var a=o.report.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e)},name:"Client.unsubscribe",tag:"tracer",options:{stream:"too long to show",onFailure:!!r}});i.default.info("[".concat(t.clientId,"] Unsubscribe stream, uid: ").concat(n.getId())),t.gatewayClient.subscribeRequestId.delete(n.getId()),t.gatewayClient.unsubscribe(n,(function(e){return a(null,e)}),a)},t.setRemoteVideoStreamType=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{name:"Client.setRemoteVideoStreamType",tag:"tracer",options:{stream:"too long to show",streamType:r}});Object(D.checkValidEnum)(r,"streamType",[0,1]),t.gatewayClient.setRemoteVideoStreamType(n,r),i()},t.setStreamFallbackOption=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{name:"Client.setStreamFallbackOption",tag:"tracer",options:{stream:"too long to show",fallbackType:r}});Object(D.checkValidEnum)(r,"fallbackType",[0,1,2]),t.gatewayClient.setStreamFallbackOption(n,r),i()},t.enableAudioVolumeIndicator=function(n,r){var a=o.report.reportApiInvoke(e.sessionId,{name:"Client.enableAudioVolumeIndicator",options:arguments,tag:"tracer"});n=n||2e3,r=r||3,Object(D.checkValidNumber)(r,"smooth",1,100),Object(D.checkValidNumber)(n,"interval",50,1e5),t.audioVolumeIndication=t.audioVolumeIndication||{enabled:!0},t.audioVolumeIndication.interval=n,t.audioVolumeIndication.smooth=r,t.audioVolumeIndication={interval:n,smooth:r},i.default.info("[".concat(t.clientId,"] enableAudioVolumeIndicator interval ").concat(n," smooth ").concat(r)),t.gatewayClient.enableAudioVolumeIndicator(n,r),a()},t.getNetworkStats=function(e,n){return i.default.deprecate("[".concat(t.clientId,"] client.getNetworkStats is deprecated. Use client.getTransportStats instead.")),P.getStats(e,n)},t.getSystemStats=function(e,t){return l.getStats(e,t)},t.getRecordingDevices=function(e,t){return h.a.getRecordingDevices(e,t)},t.getPlayoutDevices=function(e,t){return h.a.getPlayoutDevices(e,t)},t.getCameras=function(e,t){return h.a.getCameras(e,t)},t.getRemoteAudioStats=function(e,n){return t.rtcStatsCollector.getRemoteAudioStats(e,n)},t.getLocalAudioStats=function(e,n){return t.rtcStatsCollector.getLocalAudioStats(e,n)},t.getRemoteVideoStats=function(e,n){return t.rtcStatsCollector.getRemoteVideoStats(e,n)},t.getLocalVideoStats=function(e,n){return t.rtcStatsCollector.getLocalVideoStats(e,n)},t._getRemoteVideoQualityStats=function(e,n){return t.rtcStatsCollector.getRemoteVideoQualityStats(e,n)},t._getRemoteAudioQualityStats=function(e,n){return t.rtcStatsCollector.getRemoteAudioQualityStats(e,n)},t.getTransportStats=function(e,n){return t.rtcStatsCollector.getTransportStats((function(t){return P.getStats((function(n){var r=S()({},t,n);e&&e(r)}),n)}),n)},t.getSessionStats=function(e,n){return t.rtcStatsCollector.getSessionStats(e,n)},t.onNetworkQuality=function(){return t.rtcStatsCollector.onNetworkQuality(onSuccess,onFailure)},t.sendMetadata=function(n,r){var i=o.report.reportApiInvoke(e.sessionId,{name:"Client.sendMetadata",tag:"tracer",callback:function(e){if(e)return r&&r(e);r&&r()}});t.gatewayClient.sendMetadata(n,i)},t.sendCustomReportMessage=function(n,a,s,c,u,l){Object(r.getParameter)("CR")?t.customReportCount>Object(r.getParameter)("CRL")?l&&l("REPORT_LIMITED"):(t.gatewayClient.hasJoined||(i.default.WARNING("Should invoke Client.sendCustomReportMessage after join"),l&&l("REPORT_BEFORE_JOINED")),t.customReportTimer||(t.customReportTimer=setInterval((function(){t.customReportCount=0}),Object(r.getParameter)("CRI"))),Object(D.checkValidString)(n,"reportId",0,100,!1),Object(D.checkValidString)(a,"category",0,100,!1),Object(D.checkValidString)(s,"event",0,100,!1),Object(D.checkValidString)(c,"label",0,100,!1),Object(D.checkValidNumber)(u,"value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),t.customReportCount++,o.report.sendCustomReportMessage(e.sessionId,{reportId:n,category:a,event:s,label:c,value:u,lts:Date.now()},(function(e){e?l&&l("REPORT_FAILED"):l&&l()}))):l&&l("REPORT_FORBIDDEN")},t.setLocalAccessPoints=function(n,i){var a=o.report.reportApiInvoke(e.sessionId,{name:"Client.setLocalAccessPoints",tag:"tracer"});if(Object(D.checkValidArray)(n,"serverList"),Object(D.checkValidString)(i,"domain"),t.useProxyServer)throw new Error("You have already set the proxy");var s=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;n=n.map((function(e){return s.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(i):e})),t.useLocalAccessPoint=!0,Object(r.setParameter)("WEBCS_DOMAIN",n),Object(r.setParameter)("WEBCS_DOMAIN_BACKUP_LIST",n),Object(r.setParameter)("GATEWAY_DOMAINS",[i]),Object(r.setParameter)("EVENT_REPORT_DOMAIN",n[Math.floor(Math.random()*n.length)]),Object(r.setParameter)("EVENT_REPORT_BACKUP_DOMAIN",n[Math.floor(Math.random()*n.length)]),Object(r.setParameter)("LOG_UPLOAD_SERVER","".concat(n[Math.floor(Math.random()*n.length)],":6444")),a()},e.clientId=t.clientId,t.gatewayClient=Object(w.a)(e),t.listenerLoggerTimer=null,t.listenerLoggerCache=[],t.on=function(e,n){t.gatewayClient.on(e,n),t.listenerLoggerCache.push("".concat(e).concat(n.name?":"+n.name:"")),t.listenerLoggerTimer?clearTimeout(t.listenerLoggerTimer):i.default.info("[".concat(t.clientId,"] Adding event handler on ").concat(e)),t.listenerLoggerTimer=setTimeout((function(){t.listenerLoggerCache.length&&(t.listenerLoggerTimer=null,i.default.info("[".concat(t.clientId,"] Added event handler on ").concat(t.listenerLoggerCache.join(", "))),t.listenerLoggerCache=[])}),0)},t.off=function(e,n){i.default.info("remove event handler from [".concat(e,"]")),t.gatewayClient.removeEventListener(e,n)},t.rtcStatsCollector=function(e){var t=Object(a.b)();return t.gatewayClient=e,t.exceptionMonitor=new A(e),t.localStats={},t.remoteStats={},t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0},t.getRemoteAudioStats=function(e){var n=t.gatewayClient.traffic_stats,r={};for(var i in t.remoteStats){var o={},a=t.remoteStats[i];if(Object(R.b)(o,"End2EndDelay",a.peer_delay&&a.peer_delay.audio_delay),Object(R.b)(o,"TransportDelay",a.peer_delay&&a.peer_delay.e2e_delay),Object(R.b)(o,"PacketLossRate",a.peer_delay&&a.peer_delay.e2e_audio_lost_ratio_400ms),Object(R.b)(o,"RecvLevel",a.audioStats&&a.audioStats.audioOutputLevel),Object(R.b)(o,"RecvBitrate",a.audioRecvBitrate),Object(R.b)(o,"CodecType",a.audioStats&&a.audioStats.googCodecName),Object(R.b)(o,"MuteState",a.audioDisabled),Object(R.b)(o,"TotalFreezeTime",a.audioStats&&a.audioStats.audioTotalFreezeTime),Object(R.b)(o,"TotalPlayDuration",a.audioStats&&a.audioStats.audioTotalPlayDuration),n&&n.peer_delay){var s=n.peer_delay.find((function(e){return e.peer_uid==i}));if(s){var c=s.peer_publish_audio_duration+(Date.now()-n.timestamp);Object(R.b)(o,"AudioPublishDuration",c)}else Object(R.b)(o,"AudioPublishDuration",-1)}r[i]=o}e&&e(r)},t.getLocalAudioStats=function(e){var n={};for(var r in t.localStats){var i={},o=t.localStats[r];Object(R.b)(i,"RecordingLevel",o.audioStats&&o.audioStats.audioInputLevel),Object(R.b)(i,"SendLevel",o.audioStats&&o.audioStats.totalAudioEnergy),Object(R.b)(i,"SamplingRate",o.audioStats&&o.audioStats.totalSamplesDuration),Object(R.b)(i,"SendBitrate",o.audioSendBitrate),Object(R.b)(i,"CodecType",o.audioStats&&o.audioStats.googCodecName),Object(R.b)(i,"MuteState",o.audioDisabled),Object(R.b)(i,"audioSendPacketsLost",o.audioStats&&o.audioStats.packetsLost);var a=t.gatewayClient.localStreams[r];a&&a.isPlaying()&&Object(R.b)(i,"MuteState",a.userMuteAudio?"1":"0"),n[r]=i}e&&e(n)},t.getRemoteVideoStats=function(e){var n=t.gatewayClient.traffic_stats,r={};for(var i in t.remoteStats){var o={},a=t.remoteStats[i];if(Object(R.b)(o,"End2EndDelay",a.peer_delay&&a.peer_delay.video_delay),Object(R.b)(o,"TransportDelay",a.peer_delay&&a.peer_delay.e2e_delay),Object(R.b)(o,"PacketLossRate",a.peer_delay&&a.peer_delay.e2e_video_lost_ratio_400ms),Object(R.b)(o,"RecvBitrate",a.videoRecvBitrate),Object(R.b)(o,"RecvResolutionWidth",a.videoStats&&a.videoStats.googFrameWidthReceived),Object(R.b)(o,"RecvResolutionHeight",a.videoStats&&a.videoStats.googFrameHeightReceived),Object(R.b)(o,"RenderResolutionWidth",a.videoStats&&a.videoStats.renderRemoteWidth),Object(R.b)(o,"RenderResolutionHeight",a.videoStats&&a.videoStats.renderRemoteHeight),Object(R.b)(o,"RenderFrameRate",a.videoStats&&a.videoStats.googFrameRateOutput),Object(R.b)(o,"MuteState",a.videoDisabled),Object(R.b)(o,"TotalFreezeTime",a.videoStats&&a.videoStats.videoTotalFreezeTime),Object(R.b)(o,"TotalPlayDuration",a.videoStats&&a.videoStats.videoTotalPlayDuration),n&&n.peer_delay){var s=n.peer_delay.find((function(e){return e.peer_uid==i}));if(s){var c=s.peer_publish_video_duration+(Date.now()-n.timestamp);Object(R.b)(o,"VideoPublishDuration",c)}else Object(R.b)(o,"VideoPublishDuration",-1)}r[i]=o}e&&e(r)},t.getLocalVideoStats=function(e){var n={};for(var r in t.localStats){var i={},o=t.localStats[r];Object(R.b)(i,"TargetSendBitrate",o.videoTargetSendBitrate),Object(R.b)(i,"SendFrameRate",o.videoStats&&o.videoStats.googFrameRateSent),Object(R.b)(i,"SendBitrate",o.videoSendBitrate),Object(R.b)(i,"SendResolutionWidth",o.videoStats&&o.videoStats.googFrameWidthSent),Object(R.b)(i,"SendResolutionHeight",o.videoStats&&o.videoStats.googFrameHeightSent),Object(R.b)(i,"CaptureResolutionWidth",o.videoStats&&o.videoStats.googFrameWidthInput),Object(R.b)(i,"CaptureResolutionHeight",o.videoStats&&o.videoStats.googFrameHeightInput),Object(R.b)(i,"EncodeDelay",o.videoStats&&o.videoStats.googAvgEncodeMs),Object(R.b)(i,"MuteState",o.videoDisabled),Object(R.b)(i,"TotalFreezeTime",o.videoStats&&o.videoStats.videoTotalFreezeTime),Object(R.b)(i,"TotalDuration",o.videoStats&&o.videoStats.videoTotalPlayDuration),Object(R.b)(i,"CaptureFrameRate",o.videoStats&&o.videoStats.googFrameRateSent),Object(R.b)(i,"videoSendPacketsLost",o.videoStats&&o.videoStats.packetsLost),o.videoStats&&!o.videoStats.googFrameWidthInput&&Object(R.b)(i,"CaptureResolutionWidth",o.videoStats&&o.videoStats.renderLocalWidth),o.videoStats&&!o.videoStats.googFrameHeightInput&&Object(R.b)(i,"CaptureResolutionHeight",o.videoStats&&o.videoStats.renderLocalHeight),n[r]=i}e&&e(n)},t.getRemoteVideoQualityStats=function(e){var n={};for(var r in t.remoteStats){var i={},o=t.remoteStats[r];Object(R.b)(i,"videoReceiveDelay",o.videoStats&&o.videoStats.googCurrentDelayMs),Object(R.b)(i,"VideoFreezeRate",o.videoStats&&o.videoStats.videoFreezeRate),Object(R.b)(i,"FirstFrameTime",o.firstFrameTime),n[r]=i}e&&e(n)},t.getRemoteAudioQualityStats=function(e){var n={};for(var r in t.remoteStats){var i={},o=t.remoteStats[r];Object(R.b)(i,"audioReceiveDelay",o.audioStats&&o.audioStats.googCurrentDelayMs),Object(R.b)(i,"AudioFreezeRate",o.videoStats&&o.videoStats.videoFreezeRate),n[r]=i}e&&e(n)},t.getTransportStats=function(e){var n={},r={},i=t.gatewayClient.traffic_stats,o=i.peer_delay;if(Object(R.b)(n,"OutgoingAvailableBandwidth",t.gatewayClient.OutgoingAvailableBandwidth/1e3),Object(R.b)(n,"RTT",i&&2*i.access_delay),o){var a,s=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){a=!0,i=e})),f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}(o);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.downlink_estimate_bandwidth&&(r[c.peer_uid]=c.downlink_estimate_bandwidth/1e3+"")}}catch(e){s.e(e)}finally{s.f()}}n.IncomingAvailableBandwidth=r,e&&e(n)},t.getSessionStats=function(e){var n={},r=t.gatewayClient.traffic_stats,i=t.gatewayClient.socket,o=0,a=0;for(var s in t.remoteStats)(c=t.remoteStats[s])&&c.videoStats&&c.videoStats.videoRecvBytesDelta&&(a+=parseInt(c.videoStats.videoRecvBytesDelta)),c&&c.audioStats&&c.audioStats.audioRecvBytesDelta&&(a+=parseInt(c.audioStats.audioRecvBytesDelta));for(var s in t.localStats){var c;(c=t.localStats[s])&&c.videoStats&&c.videoStats.videoSendBytesDelta&&(o+=parseInt(c.videoStats.videoSendBytesDelta)),c&&c.audioStats&&c.audioStats.audioSendBytesDelta&&(o+=parseInt(c.audioStats.audioSendBytesDelta))}var u=o+t.session.WSSendBytesDelta+t.session.HTTPSendBytesDelta,l=a+t.session.WSRecvBytesDelta+t.session.HTTPRecvBytesDelta,d=t.session.sendBytes+Object(k.getHTTPSendBytes)(),h=t.session.recvBytes+Object(k.getHTTPRecvBytes)();t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED&&(d+=i.getSendBytes(),h+=i.getRecvBytes());var f=1;r.peer_delay&&(f=r.peer_delay.length,f+=1),i?Object(R.b)(n,"Duration",i.getDuration()):Object(R.b)(n,"Duration",0),Object(R.b)(n,"UserCount",f),Object(R.b)(n,"SendBytes",d),Object(R.b)(n,"RecvBytes",h),Object(R.b)(n,"SendBitrate",8*u/1e3),Object(R.b)(n,"RecvBitrate",8*l/1e3),e&&e(n)},t.isLocalVideoFreeze=function(e,t){var n=0,r=0;if(!e||!t)return!1;if(Object(s.isChrome)()||Object(s.isOpera)())n=e.googFrameRateInput,r=e.googFrameRateSent;else if(Object(s.isSafari)())n=parseInt(e.framerateMean),r=parseInt(e.framesEncoded)-parseInt(t.framesEncoded);else{if(!Object(s.isFireFox)())return!1;n=parseInt(e.framerateMean),r=parseInt(e.framesEncoded)-parseInt(t.framesEncoded)}return n>5&&r<3},t.isRemoteVideoFreeze=function(e,t){var n=0,r=0;if(!e||!t)return!1;if(Object(s.isChrome)()||Object(s.isOpera)())n=e.googFrameRateReceived,r=e.googFrameRateDecoded;else if(Object(s.isSafari)())n=e.framerateMean,r=parseInt(e.framesDecoded)-parseInt(t.framesDecoded);else{if(!Object(s.isFireFox)())return!1;n=parseInt(e.framesReceived)-parseInt(t.framesReceived),r=parseInt(e.framesDecoded)-parseInt(t.framesDecoded)}return n>5&&n<10&&r<3||n>10&&n<20&&r<4||n>20&&r<5},t.isAudioFreeze=function(e){if(Object(s.isChrome)()&&e){if(e.googDecodingPLC&&e.googDecodingPLCCNG&&e.googDecodingCTN)return(parseInt(e.googDecodingPLC)+parseInt(e.googDecodingPLCCNG))/parseInt(e.googDecodingCTN)>.2}else if((Object(s.isSafari)()||Object(s.isFireFox)())&&e.packetsLost&&e.packetsReceived)return parseInt(e.packetsLost)/(parseInt(e.packetsLost)+parseInt(e.packetsReceived))>.2;return!1},t.isAudioDecodeFailed=function(e){return!!((Object(s.isChrome)()||Object(s.isOpera)())&&e&&parseInt(e.bytesReceived)>0&&0===parseInt(e.googDecodingNormal))},t.startNetworkQualityTimer=function(){t.clearNetworkQualityTimer(),t.networkQualityTimer=setInterval((function(){if(t.gatewayClient.state===w.a.CONNECTED&&navigator.onLine){var e=t.gatewayClient.traffic_stats;t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:t.networkQualityTrans(e.uplink_network_quality),downlinkNetworkQuality:t.networkQualityTrans(e.downlink_network_quality)})}else t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3)},t.clearNetworkQualityTimer=function(){t.networkQualityTimer&&clearInterval(t.networkQualityTimer)},t.networkQualityTrans=function(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0},t.getStatsTimer=setInterval((function(){var e=t.gatewayClient.traffic_stats,n=Date.now();t.gatewayClient.dispatchEvent({type:"_testException"}),Object.keys(t.localStats).length&&t.exceptionMonitor.setLocalStats(t.localStats),Object.keys(t.remoteStats).length&&t.exceptionMonitor.setRemoteStats(t.remoteStats);var r={};Object.keys(t.gatewayClient.remoteStreams).forEach((function(i){var o=t.gatewayClient.remoteStreams[i],a=t.remoteStats[i],s={id:i,updatedAt:n};r[i]=s,s.firstFrameTime=o.firstFrameTime,a?(s.audioTotalPlayDuration=a.audioTotalPlayDuration+1,s.audioTotalFreezeTime=a.audioTotalFreezeTime,s.isAudioFreeze=!1,s.isAudioDecodeFailed=!1,s.videoTotalPlayDuration=a.videoTotalPlayDuration+1,s.videoTotalFreezeTime=a.videoTotalFreezeTime,s.isVideoFreeze=!1):(s.audioTotalPlayDuration=1,s.audioTotalFreezeTime=0,s.videoTotalPlayDuration=1,s.videoTotalFreezeTime=0);var c=e&&e.peer_delay&&e.peer_delay.find((function(e){return e.peer_uid==i}));c&&(s.peer_delay=c),o&&(o.isPlaying()&&(s.audioDisabled=o.userMuteAudio||o.peerMuteAudio?"1":"0",s.videoDisabled=o.userMuteVideo||o.peerMuteVideo?"1":"0"),a&&a.peer_delay&&c&&a.peer_delay.stream_type!==c.stream_type&&t.gatewayClient.dispatchEvent({type:"streamTypeChange",uid:i,streamType:c.stream_type}),o.pc&&"established"==o.pc.state&&o.pc.getStats((function(e){if(s.pcStats=e,s.audioStats=e.find((function(e){return"audio"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)})),s.videoStats=e.find((function(e){return"video"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)})),a&&a.audioStats&&s.audioStats){var n=parseInt(s.audioStats.bytesReceived)-parseInt(a.audioStats.bytesReceived),r=parseInt(s.audioStats.googDecodingNormal)-parseInt(a.audioStats.googDecodingNormal);if(s.audioStats.audioRecvBytesDelta=n,s.audioStats.audioDecodingNormalDelta=r,t.session.recvBytes+=n,isFinite(n)&&s.audioStats.timestamp){var i=s.audioStats.timestamp.getTime()-a.audioStats.timestamp.getTime();s.audioRecvBitrate=Math.floor(8*n/i)}t.isAudioFreeze(s.audioStats)&&s.audioTotalPlayDuration>10&&(s.audioTotalFreezeTime++,s.isAudioFreeze=!0),t.isAudioDecodeFailed(s.audioStats)&&s.audioTotalPlayDuration>10&&(s.isAudioDecodeFailed=!0),s.audioStats.audioTotalFreezeTime=s.audioTotalFreezeTime,s.audioStats.audioTotalPlayDuration=s.audioTotalPlayDuration,s.audioStats.audioFreezeRate=Math.ceil(100*s.audioTotalFreezeTime/s.audioTotalPlayDuration)}if(a&&a.videoStats&&s.videoStats){var c=parseInt(s.videoStats.bytesReceived)-parseInt(a.videoStats.bytesReceived);s.videoStats.videoRecvBytesDelta=c,t.session.recvBytes+=c,isFinite(c)&&s.videoStats.timestamp&&(i=s.videoStats.timestamp.getTime()-a.videoStats.timestamp.getTime(),s.videoRecvBitrate=Math.floor(8*c/i)),t.isRemoteVideoFreeze(s.videoStats,a.videoStats)&&(s.videoTotalFreezeTime++,s.isVideoFreeze=!0),s.videoStats.videoTotalFreezeTime=s.videoTotalFreezeTime,s.videoStats.videoTotalPlayDuration=s.videoTotalPlayDuration,s.videoStats.videoFreezeRate=Math.ceil(100*s.videoTotalFreezeTime/s.videoTotalPlayDuration),o.player&&o.player.video&&o.player.video.videoWidth&&o.player.video.videoHeight?(s.videoStats.renderRemoteWidth=o.player.video.videoWidth,s.videoStats.renderRemoteHeight=o.player.video.videoHeight):(s.videoStats.renderRemoteWidth=o.videoWidth||s.videoStats.googFrameWidthReceived,s.videoStats.renderRemoteHeight=o.videoHeight||s.videoStats.googFrameHeightReceived)}})))})),t.remoteStats=r;var i={};if(Object.keys(t.gatewayClient.localStreams).forEach((function(e){var r=t.gatewayClient.localStreams[e],o=t.localStats[e],a={id:e,updatedAt:n};i[e]=a,o?(a.videoTotalPlayDuration=o.videoTotalPlayDuration+1,a.videoTotalFreezeTime=o.videoTotalFreezeTime,a.isVideoFreeze=!1):(a.videoTotalPlayDuration=1,a.videoTotalFreezeTime=0),r&&(r.isPlaying()&&(a.audioDisabled=r.userMuteAudio?"1":"0",a.videoDisabled=r.userMuteVideo?"1":"0"),r.video&&r.attributes.maxVideoBW?a.videoTargetSendBitrate=r.attributes.maxVideoBW:r.video&&r.screenAttributes&&(a.videoTargetSendBitrate=r.screenAttributes.maxVideoBW),r.pc&&"established"==r.pc.state&&r.pc.getStats((function(e){if(a.pcStats=e.reverse(),a.audioStats=e.find((function(e){return"audio"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)})),a.videoStats=e.find((function(e){return"video"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)})),a.audioStats&&o&&o.audioStats){var n=parseInt(a.audioStats.bytesSent)-parseInt(o.audioStats.bytesSent);if(a.audioStats.audioSendBytesDelta=n,t.session.sendBytes+=n,isFinite(n)&&a.audioStats.timestamp){var i=a.audioStats.timestamp.getTime()-o.audioStats.timestamp.getTime();a.audioSendBitrate=Math.floor(8*n/i)}}if(a.videoStats&&o&&o.videoStats){var s=parseInt(a.videoStats.bytesSent)-parseInt(o.videoStats.bytesSent);a.videoStats.videoSendBytesDelta=s,t.session.sendBytes+=s,isFinite(s)&&a.videoStats.timestamp&&(i=a.videoStats.timestamp.getTime()-o.videoStats.timestamp.getTime(),a.videoSendBitrate=Math.floor(8*s/i)),t.isLocalVideoFreeze(a.videoStats,o.videoStats)&&(a.videoTotalFreezeTime++,a.isVideoFreeze=!0),a.videoStats.videoTotalFreezeTime=a.videoTotalFreezeTime,a.videoStats.videoTotalPlayDuration=a.videoTotalPlayDuration,a.videoStats.videoFreezeRate=Math.ceil(100*a.videoTotalFreezeTime/a.videoTotalPlayDuration),a.videoStats.renderLocalWidth=r.videoWidth||a.videoStats.googFrameWidthSent,a.videoStats.renderLocalHeight=r.videoHeight||a.videoStats.googFrameHeightSent}})))})),t.localStats=i,t.session.HTTPSendBytesDelta=Object(k.getHTTPSendBytes)()-t.session.HTTPSendBytes,t.session.HTTPSendBytes=Object(k.getHTTPSendBytes)(),t.session.HTTPRecvBytesDelta=Object(k.getHTTPRecvBytes)()-t.session.HTTPRecvBytes,t.session.HTTPRecvBytes=Object(k.getHTTPRecvBytes)(),t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED){var o=t.gatewayClient.socket;t.session.WSSendBytesDelta=o.getSendBytes()-t.session.WSSendBytes,t.session.WSSendBytes=o.getSendBytes(),t.session.WSRecvBytesDelta=o.getRecvBytes()-t.session.WSRecvBytes,t.session.WSRecvBytes=o.getRecvBytes()}}),1e3),t.gatewayClient.on("join",(function(){t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0}})),t}(t.gatewayClient),t.configDistributManager=function(e){var t={};return t.client=e,t.client.gatewayClient&&t.client.gatewayClient.on("config-distribute",(function(n){var a=n.joinInfo,s=n.config;if(s){Object(D.isEmpty)(s.uploadLog)||(Object(r.setParameter)("UPLOAD_LOG",s.uploadLog),o.report.reportApiInvoke(a.sid,{name:"_configDistribute",options:{feature:"uploadLog",value:s.uploadLog}})()),Object(D.isEmpty)(s.dualStream)||(e.isDualStream=s.dualStream,o.report.reportApiInvoke(a.sid,{name:"_configDistribute",options:{feature:"dualStream",value:s.dualStream}})()),Object(D.isEmpty)(s.streamFallbackOption)||t.client.gatewayClient&&t.client.gatewayClient.on("stream-subscribed",(function(e){var n=e.stream;n?(t.client.gatewayClient.setStreamFallbackOption(n,s.streamFallbackOption),o.report.reportApiInvoke(a.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:s.streamFallbackOption,streamId:n.getId()}})()):o.report.reportApiInvoke(a.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:s.streamFallbackOption,streamId:n.getId(),err:"invalid stream"}})()}));try{i.default.debug("[".concat(e.clientId,"] setParameter in distribution: ").concat(JSON.stringify(s))),Object.keys(s).map((function(e){return Object(r.setParameter)(e,s[e])}))}catch(t){i.default.debug("[".concat(e.clientId,"] setParameter in distribution failed: ").concat(JSON.stringify(s)))}}})),t}(t),Object(L.addLiveStreamingCapability)(t,e),e.areaCode){var n=e,c=n.areaCode,f=n.excludedArea,p=Object(F.getAreaCodeByConfig)({areaCode:c,excludedArea:f});Object(r.setParameter)("AREA_SETTING",p);var g=Object(F.getAreaDomainConfig)(p);Object.keys(g).map((function(e){var t=g[e];"LOG_UPLOAD_SERVER"==e||"EVENT_REPORT_DOMAIN"==e||"EVENT_REPORT_BACKUP_DOMAIN"==e||"NGINX"==e?Object(r.setParameter)(e,t[0]):Object(r.setParameter)(e,t)}))}return Object(D.isEmpty)(e.turnServer)||t.setTurnServer(e.turnServer),Object(D.isEmpty)(e.proxyServer)||t.setProxyServer(e.proxyServer),"live"===t.mode&&(t.gatewayClient.role="audience"),"rtc"===t.mode&&(t.gatewayClient.role=G),t.gatewayClient.on("onMultiIP",(function(e){t.gatewayClient.closeGateway(),t.gatewayClient.socket=void 0,t.gatewayClient.hasChangeBGPAddress=!0,t.joinInfo.multiIP=e.option,t.gatewayClient.state=w.a.CONNECTING;var n=function(e){i.default.info("[".concat(t.clientId,"] Joining channel: ").concat(t.channel)),t.joinInfo.cid=e.cid,t.joinInfo.uid||(t.joinInfo.uid=e.uid),t.joinInfo.uni_lbs_ip=e.uni_lbs_ip,t.joinInfo.gatewayAddr=e.gateway_addr,t.onSuccess?t.gatewayClient.join(t.joinInfo,t.key,(function(e){i.default.info("[".concat(t.clientId,"] Join channel ").concat(t.channel," success"));var n=t.onSuccess;t.onSuccess=null,t.onFailure=null,n(e)}),t.onFailure):(t.gatewayClient.joinInfo=S()({},t.joinInfo),t.gatewayClient.rejoin())};t.joinInfo.stringUid&&!t.joinInfo.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=Object(I.getUserAccount)(joinInfo,t.gatewayClient),t.userAccountReq.then((function(e){i.default.error("getUserAccount Success ".concat(e.url," ").concat(joinInfo.stringUid," => ").concat(e.uid)),t.joinInfo.uid=e.uid,Object(I.getGatewayList)(t.joinInfo,n,t.onFailure)})).catch((function(e){i.default.error("getUserAccount rejected",e),t.onFailure(e)}))):Object(I.getGatewayList)(t.joinInfo,n,t.onFailure)})),t.gatewayClient.on("rejoin-start",(function(){t._renewSession(),o.report.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{rejoin:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})})),t.gatewayClient.on("recover",(function(){t._renewSession(),i.default.debug("[".concat(t.clientId,"]"),"recover",e.sessionId),o.report.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{recover:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})})),t.gatewayClient.on("rejoin",(function(){var e=t.highStreamState;if(i.default.debug("[".concat(t.clientId,"] Client local stream preState: ").concat(e)),t.onSuccess){var n=t.onSuccess;t.onSuccess=null,t.onFailure=null,n(t.joinInfo.uid)}!t.highStream||0!==e&&1!==e||(i.default.info("[".concat(t.clientId,"] publish after rejoin")),t.highStreamState=2,t.lowStreamState=2,t.publish(t.highStream,(function(e){e&&i.default.info("[".concat(t.clientId,"] "),e)})))})),t.gatewayClient.on("streamPublished",(function(e){t.hasPublished||(t.hasPublished=!0,t.gatewayClient.dispatchEvent({type:"stream-published",stream:e.stream,proxy:e.proxy}))})),t.gatewayClient.on("pubP2PLost",(function(e){i.default.debug("[".concat(t.clientId,"] Start reconnect local peerConnection: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:t.highStream.getId()}),1===t.highStreamState&&(t.highStreamState=0,t.lowStreamState=0),t._unpublish(t.highStream,(function(){t._publish(t.highStream,(function(){i.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection success: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!0,reason:""})}),(function(e){i.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})}),!0)}),(function(e){i.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})}),!0)})),t.gatewayClient.on("subP2PLost",(function(e){i.default.debug("[".concat(t.clientId,"] Start reconnect remote peerConnection: ").concat(e.stream.getId()," ").concat(e.stream.subscribeOptions)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:e.stream.getId()});var n=e.stream.subscribeOptions;i.default.debug("[".concat(t.clientId,"]"),"Re-subscribe stream",JSON.stringify(n)),t.gatewayClient.unsubscribe(e.stream,(function(){e.stream.subscribeOptions=n,t.gatewayClient.subscribe(e.stream,(function(){i.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection success: ").concat(e.stream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!0,reason:""})}),(function(n){i.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),n),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:n})}))}),(function(n){i.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),n),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:n})}))})),P.on("networkTypeChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"network-type-changed"});t.gatewayClient.dispatchEvent(n)})),h.a.on("recordingDeviceChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"recording-device-changed"});t.gatewayClient.dispatchEvent(n)})),h.a.on("playoutDeviceChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"playout-device-changed"});t.gatewayClient.dispatchEvent(n)})),h.a.on("cameraChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"camera-changed"});t.gatewayClient.dispatchEvent(n)})),t.gatewayClient.on("streamTypeChange",(function(n){var r=S()({},n,{type:"stream-type-changed"});t.gatewayClient.dispatchEvent(r),o.report.reportApiInvoke(e.sessionId,{name:"streamTypeChange"})(null,JSON.stringify(n))})),t},W=h.a.getDevices,H=f.a.getScreenSources,z=JSON.parse(JSON.stringify(r.SUPPORT_RESOLUTION_LIST));t.default={TranscodingUser:{uid:0,x:0,y:0,width:0,height:0,zOrder:0,alpha:1},LiveTranscoding:{width:640,height:360,videoBitrate:400,videoFramerate:15,lowLatency:!1,audioSampleRate:48e3,audioBitrate:48,audioChannels:1,videoGop:30,videoCodecProfile:100,userCount:0,userConfigExtraInfo:{},backgroundColor:0,transcodingUsers:[]},createClient:function(e){var t=o.report.reportApiInvoke(null,{name:"createClient",options:arguments,tag:"tracer"});(e=S()({},e||{})).codec||(e.codec=function(e){return"h264_interop"===e?"h264":"vp8"}(e.mode));var n=function(e){return-1===g.indexOf(e.mode)?x.default.INVALID_CLIENT_MODE:-1===m.indexOf(e.codec)?x.default.INVALID_CLIENT_CODEC:"h264_interop"==e.mode&&"h264"!==e.codec&&x.default.CLIENT_MODE_CODEC_MISMATCH}(e);if(n)throw i.default.error("Invalid parameter setting MODE: ".concat(e.mode," CODEC: ").concat(e.codec," ERROR ").concat(n)),t(n),new Error(n);return i.default.info("Creating client, MODE: ".concat(e.mode," CODEC: ").concat(e.codec)),function(e){switch(e.mode){case"interop":case"h264_interop":e.mode="live";break;case"web-only":e.mode="rtc"}}(e),t(null,e),q(e)},createStream:d.b,Logger:i.default,report:o.report,getDevices:W,getScreenSources:H,getParameter:r.getParameter,setParameter:r.setParameter,checkSystemRequirements:u,getSupportedCodec:p.getSupportedCodec,ChannelMediaRelayConfiguration:v.ChannelMediaRelayConfiguration,VERSION:r.VERSION,BUILD:r.BUILD,PROFILE_TABLE:z,AUDIO_SAMPLE_RATE_32000:32e3,AUDIO_SAMPLE_RATE_44100:44100,AUDIO_SAMPLE_RATE_48000:48e3,VIDEO_CODEC_PROFILE_BASELINE:66,VIDEO_CODEC_PROFILE_MAIN:77,VIDEO_CODEC_PROFILE_HIGH:100,REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2,AREAS:F.AREAS,AREA_VERSION:"global"}}]).default},module.exports=t()},1197:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var t;module=__webpack_require__.nmd(module),t=function(){function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sl(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function J(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){function o(e){sl(s,r,i,o,a,"next",e)}function a(e){sl(s,r,i,o,a,"throw",e)}var s=e.apply(t,n);o(void 0)}))}}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ha(e,t,n){return t&&tl(e.prototype,t),n&&tl(e,n),e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function la(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&df(e,t)}function wd(e){return(wd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function df(e,t){return(df=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ul(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Sh(e,t,n){return(Sh=ul()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),e=new(Function.bind.apply(e,r)),n&&df(e,n.prototype),e}).apply(null,arguments)}function ef(e){var t="function"==typeof Map?new Map:void 0;return(ef=function(e){function n(){return Sh(e,arguments,wd(this).constructor)}if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),df(n,e)})(e)}function ff(e,t){if(null==e)return{};if(null==e)var n={};else{n={};var r,i=Object.keys(e);for(r=0;r<i.length;r++){var o=i[r];0<=t.indexOf(o)||(n[o]=e[o])}}if(Object.getOwnPropertySymbols)for(r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++)i=r[o],0<=t.indexOf(i)||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i]);return n}function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ma(e){var t=ul();return function(){var r=wd(e);if(t){var i=wd(this).constructor;r=Reflect.construct(r,arguments,i)}else r=r.apply(this,arguments);return!r||"object"!=typeof r&&"function"!=typeof r?n(this):r}}function Th(e,t,n){return(Th="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wd(e)););if(e)return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(n):t.value})(e,t,n||e)}function ra(e,t){var n=Array.isArray(e)?e:void 0;if(!n)if(null==(n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"])))n=void 0;else{var r,i=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){a=!0;var s=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw s}}n=i}if(!(e=n||vl(e,t)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function G(e){var t=Array.isArray(e)?Uh(e):void 0;if(t||(t="undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"]?Array.from(e):void 0),!(e=t||vl(e)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function vl(e,t){if(e){if("string"==typeof e)return Uh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uh(e,t)}}function Uh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function fa(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function $a(e){var t={exports:{}};return e(t,t.exports),t.exports}function wl(e,t){var n,r=3>arguments.length?e:arguments[2];return va(e)===r?e[t]:(n=Fb.f(e,t))?Q(n,"value")?n.value:void 0===n.get?void 0:n.get.call(r):ha(n=Vb(e))?wl(n,t,r):void 0}function rs(e){var t=e.charCodeAt(0)<<24,n=0|ss(~t),r=0,i=0|e.length,o="";if(5>n&&i>=n){for(t=t<<n>>>24+n,r=1;r<n;r=r+1|0)t=t<<6|63&e.charCodeAt(r);65535>=t?o+=xd(t):1114111>=t?o+=xd(55296+((t=t-65536|0)>>10)|0,56320+(1023&t)|0):r=0}for(;r<i;r=r+1|0)o+="\ufffd";return o}function xl(){}function ts(e){var t=0|e.charCodeAt(0);if(55296<=t&&56319>=t){var n=0|e.charCodeAt(1);if(!(n==n&&56320<=n&&57343>=n))return xd(239,191,189);if(65535<(t=(t-55296<<10)+n-56320+65536|0))return xd(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}return 127>=t?e:2047>=t?xd(192|t>>>6,128|63&t):xd(224|t>>>12,128|t>>>6&63,128|63&t)}function yl(){}function ea(){ea.init.call(this)}function ng(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+X(e))}function zl(e,t,n,r){ng(n);var i=e._events;if(void 0===i)i=e._events=Object.create(null),e._eventsCount=0;else{void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events);var o=i[t]}return void 0===o?(i[t]=n,++e._eventsCount):("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),0<(n=void 0===e._maxListeners?ea.defaultMaxListeners:e._maxListeners)&&o.length>n&&!o.warned&&(o.warned=!0,(n=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=o.length,console&&console.warn&&console.warn(n))),e}function us(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Al(e,t,n){return e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},(t=us.bind(e)).listener=n,e.wrapFn=t}function Bl(e,t,n){if(void 0===(e=e._events))return[];if(void 0===(t=e[t]))return[];if("function"==typeof t)return n?[t.listener||t]:[t];if(n)for(n=Array(t.length),e=0;e<n.length;++e)n[e]=t[e].listener||t[e];else n=Cl(t,t.length);return n}function Dl(e){var t=this._events;if(void 0!==t){if("function"==typeof(e=t[e]))return 1;if(void 0!==e)return e.length}return 0}function Cl(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function vs(e,t,n){"function"==typeof e.on&&El(e,"error",t,n)}function El(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+X(e));e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}function ws(e){return e?G(e):xs((function(){return[]}),(function(e,t){return e.push(t),e}))}function Fl(e,t){var n,r,i,o;return w.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=Gl(e)([Hl,Hl,function(e,t){return t}])[2],r=0;case 2:if(!(r<t.length)){a.next=17;break}if(i=t[r],!((o=n(Vh,i))instanceof og)){a.next=11;break}if((o=Wh(o.deref()))===Vh){a.next=10;break}return a.next=10,o;case 10:return a.abrupt("return");case 11:if(o===Vh){a.next=14;break}return a.next=14,o;case 14:r++,a.next=2;break;case 17:case"end":return a.stop()}}),ys)}function pg(e,t){return null!=t&&"function"==typeof t[Symbol.iterator]?Fl(pg(e),t):function(t){var n=t[2];return zs(t,(function(t,r){return n(t,e(r))}))}}function Ac(e){return Object.prototype.toString.call(e).slice(8,-1)}function yd(e){return"Object"===Ac(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Il(e){var t;return(t="Boolean"===Ac(e)||"Null"===Ac(e)||"Undefined"===Ac(e))||(t="Number"===Ac(e)&&!isNaN(e)),t||"String"===Ac(e)||"Symbol"===Ac(e)}function zd(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ce(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function de(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function gf(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qg;++t<n;)this.add(e[t])}function ee(e){this.size=(this.__data__=new rg(e)).size}function fe(e,t,n,r,i,o){var a,s=1&t,c=2&t,u=4&t;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!lb(e))return e;if(r=Va(e)){if(a=As(e),!s)return Xh(e,a)}else{var l=hf(e),d="[object Function]"==l||"[object GeneratorFunction]"==l;if(jf(e))return Jl(e,s);if("[object Object]"==l||"[object Arguments]"==l||d&&!i){if(a=c||d?{}:Kl(e),!s)return c?Bs(e,Cs(a,e)):Ds(e,Es(a,e))}else{if(!wa[l])return i?e:{};a=Fs(e,l,s)}}if(o||(o=new ge),i=o.get(e))return i;o.set(e,a),Gs(e)?e.forEach((function(r){a.add(fe(r,t,n,r,e,o))})):Hs(e)&&e.forEach((function(r,i){a.set(i,fe(r,t,n,i,e,o))})),c=u?c?Ll:Yh:c?kf:Ad;var h=r?void 0:c(e);return Is(h||e,(function(r,i){h&&(r=e[i=r]),Ml(a,i,fe(r,t,n,i,e,o))})),a}function Zh(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;return o.has(i)?o.get(i):(r=e.apply(this,r),n.cache=o.set(i,r)||o,r)};return n.cache=new(Zh.Cache||qg),n}function Nl(e){if("string"==typeof e)return e;if(Va(e))return he(e,Nl)+"";if(ie(e))return Ol?Ol.call(e):"";var t=e+"";return"0"==t&&1/e==-Js?"-0":t}function $h(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Ks),i||(i=[]);++o<a;){var s=e[o];0<t&&n(s)?1<t?$h(s,t-1,n,r,i):ai(i,s):r||(i[i.length]=s)}return i}function je(e,t,n,r,i){if(e===t)t=!0;else if(null==e||null==t||!gc(e)&&!gc(t))t=e!=e&&t!=t;else e:{var o=Va(e),a=Va(t),s=o?"[object Array]":hf(e),c=a?"[object Array]":hf(t),u="[object Object]"==(s="[object Arguments]"==s?"[object Object]":s);if(a="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),(c=s==c)&&jf(e)){if(!jf(t)){t=!1;break e}o=!0,u=!1}if(c&&!u)i||(i=new ge),t=o||bi(e)?Pl(e,t,n,r,je,i):Ls(e,t,s,n,r,je,i);else{if(!(1&n)&&(o=u&&Ql.call(e,"__wrapped__"),s=a&&Ql.call(t,"__wrapped__"),o||s)){e=o?e.value():e,t=s?t.value():t,i||(i=new ge),t=je(e,t,n,r,i);break e}if(c)t:if(i||(i=new ge),o=1&n,s=Yh(e),a=s.length,c=Yh(t).length,a==c||o){for(c=a;c--;){var l=s[c];if(!(o?l in t:Ms.call(t,l))){t=!1;break t}}if(u=i.get(e),l=i.get(t),u&&l)t=u==t&&l==e;else{u=!0,i.set(e,t),i.set(t,e);for(var d=o;++c<a;){var h=e[l=s[c]],f=t[l];if(r)var p=o?r(f,h,l,t,e,i):r(h,f,l,e,t,i);if(void 0===p?h!==f&&!je(h,f,n,r,i):!p){u=!1;break}d||(d="constructor"==l)}u&&!d&&(n=e.constructor)!=(r=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(u=!1),i.delete(e),i.delete(t),t=u}}else t=!1;else t=!1}}return t}function xa(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function mb(e){return!0===(e&&e.__isLong__)}function Bd(e,t){var n;if(t){if((t=0<=(e>>>=0)&&256>e)&&(n=Rl[e]))return n;n=ya(e,0>(0|e)?-1:0,!0),t&&(Rl[e]=n)}else{if((t=-128<=(e|=0)&&128>e)&&(n=Sl[e]))return n;n=ya(e,0>e?-1:0,!1),t&&(Sl[e]=n)}return n}function Gb(e,t){if(isNaN(e))return t?Cd:Hb;if(t){if(0>e)return Cd;if(e>=Tl)return Ul}else{if(e<=-Vl)return nb;if(e+1>=Vl)return Wl}return 0>e?Gb(-e,t).neg():ya(e%ke|0,e/ke|0,t)}function ya(e,t,n){return new xa(e,t,n)}function ci(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return Hb;if("number"==typeof t?(n=t,t=!1):t=!!t,2>(n=n||10)||36<n)throw RangeError("radix");var r;if(0<(r=e.indexOf("-")))throw Error("interior hyphen");if(0===r)return ci(e.substring(1),t,n).neg();r=Gb(sg(n,8));for(var i=Hb,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),s=parseInt(e.substring(o,o+a),n);8>a?(a=Gb(sg(n,a)),i=i.mul(a).add(Gb(s))):i=(i=i.mul(r)).add(Gb(s))}return i.unsigned=t,i}function Wb(e,t){return"number"==typeof e?Gb(e,t):"string"==typeof e?ci(e,t):ya(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}function O(e,t){function n(){this.constructor=e}_di(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function le(e){return"function"==typeof e}function me(e){setTimeout((function(){throw e}),0)}function ei(e){return null!==e&&"object"===X(e)}function Xl(e){return e.reduce((function(e,t){return e.concat(t instanceof lf?t.errors:t)}),[])}function fi(e){for(;e;){var t=e.destination,n=e.isStopped;if(e.closed||n)return!1;e=t&&t instanceof ia?t:null}return!0}function Yc(e){return e}function gi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Yl(e)}function Yl(e){return 0===e.length?Yc:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}function Zl(e){if(e||(e=Ib.Promise||Promise),!e)throw Error("no Promise impl found");return e}function $l(){return function(e){return e.lift(new Ns(e))}}function mf(e){return e?Os(e):vb}function Os(e){return new Y((function(t){return e.schedule((function(){return t.complete()}))}))}function Zc(e){return e&&"function"==typeof e.schedule}function hi(e,t){return new Y((function(n){var r=new Oa,i=0;return r.add(t.schedule((function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||r.add(this.schedule()))}))),r}))}function nf(e,t){return t?hi(e,t):new Y(am(e))}function bb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Zc(t=e[e.length-1])?(e.pop(),hi(e,t)):nf(e)}function Z(e,t){return new Y(t?function(n){return t.schedule(Ps,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function Ps(e){e.subscriber.error(e.error)}function Qs(e,t){return void 0===t&&(t=0),function(n){return n.lift(new Rs(e,t))}}function bm(e){return e in ii&&(delete ii[e],!0)}function hc(){}function ba(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Ss(e,t))}}function cm(e,t,n){if(t){if(!Zc(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return cm(e,n).apply(void 0,r).pipe(ba((function(e){return Jb(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i,o=this,a={context:o,subject:i,callbackFunc:e,scheduler:n};return new Y((function(r){if(n)return n.schedule(Ts,0,{args:t,subscriber:r,params:a});if(!i){i=new of;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.next(1>=e.length?e[0]:e),i.complete()}]))}catch(e){fi(i)?i.error(e):console.warn(e)}}return i.subscribe(r)}))}}function Ts(e){var t=this,n=e.args,r=e.subscriber,i=e.params;e=i.callbackFunc;var o=i.context,a=i.scheduler,s=i.subject;if(!s){s=i.subject=new of,i=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.add(a.schedule(Us,0,{value:1>=e.length?e[0]:e,subject:s}))};try{e.apply(o,n.concat([i]))}catch(e){s.error(e)}}this.add(s.subscribe(r))}function Us(e){var t=e.subject;t.next(e.value),t.complete()}function dm(e,t,n){if(t){if(!Zc(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return dm(e,n).apply(void 0,r).pipe(ba((function(e){return Jb(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new Y((function(r){var o=i.context,a=i.subject;if(n)return n.schedule(Vs,0,{params:i,subscriber:r,context:o});if(!a){a=i.subject=new of;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(t=e.shift())?a.error(t):(a.next(1>=e.length?e[0]:e),a.complete())}]))}catch(e){fi(a)?a.error(e):console.warn(e)}}return a.subscribe(r)}))}}function Vs(e){var t=this,n=e.params,r=e.subscriber;e=e.context;var i=n.callbackFunc,o=n.args,a=n.scheduler,s=n.subject;if(!s){s=n.subject=new of,n=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(n=e.shift())?t.add(a.schedule(em,0,{err:n,subject:s})):t.add(a.schedule(Ws,0,{value:1>=e.length?e[0]:e,subject:s}))};try{i.apply(e,o.concat([n]))}catch(e){this.add(a.schedule(em,0,{err:e,subject:s}))}}this.add(s.subscribe(r))}function Ws(e){var t=e.subject;t.next(e.value),t.complete()}function em(e){e.subject.error(e.err)}function fm(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}function ji(e,t,n,r,i){if(void 0===i&&(i=new Xs(e,n,r)),!i.closed)return t instanceof Y?t.subscribe(i):pf(t)(i)}function Ys(e,t){return new Y((function(n){var r=new Oa;return r.add(t.schedule((function(){var i=e[ne]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}function Zs(e,t){return new Y((function(n){var r=new Oa;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}function $s(e,t){if(!e)throw Error("Iterable cannot be null");return new Y((function(n){var r,i=new Oa;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[$c](),i.add(t.schedule((function(){if(!n.closed){try{var e=r.next(),t=e.value,i=e.done}catch(e){return void n.error(e)}i?n.complete():(n.next(t),this.schedule())}})))}))),i}))}function gm(e,t){if(null!=e){if(e&&"function"==typeof e[ne])return Ys(e,t);if(fm(e))return Zs(e,t);if(hm(e))return hi(e,t);if(e&&"function"==typeof e[$c]||"string"==typeof e)return $s(e,t)}throw new TypeError((null!==e&&X(e)||e)+" is not observable")}function Kb(e,t){return t?gm(e,t):e instanceof Y?e:new Y(pf(e))}function ic(e,t){if(!t.closed){if(e instanceof Y)return e.subscribe(t);try{var n=pf(e)(t)}catch(e){t.error(e)}return n}}function cb(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(cb((function(n,r){return Kb(e(n,r)).pipe(ba((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new at(e,n))})}function tg(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),cb(Yc,e)}function im(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return tg(1)(bb.apply(void 0,e))}function ad(e){return new Y((function(t){try{var n=e()}catch(e){return void t.error(e)}return(n?Kb(n):mf()).subscribe(t)}))}function jm(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(Jb(n))return ug(n,null);if(ei(n)&&Object.getPrototypeOf(n)===Object.prototype)return ug((e=Object.keys(n)).map((function(e){return n[e]})),e)}if("function"==typeof e[e.length-1]){var r=e.pop();return ug(e=1===e.length&&Jb(e[0])?e[0]:e,null).pipe(ba((function(e){return r.apply(void 0,e)})))}return ug(e,null)}function ug(e,t){return new Y((function(n){var r=e.length;if(0===r)n.complete();else for(var i=Array(r),o=0,a=0,s=function(s){var c=Kb(e[s]),u=!1;n.add(c.subscribe({next:function(e){u||(u=!0,a++),i[s]=e},error:function(e){return n.error(e)},complete:function(){++o!==r&&u||(a===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},c=0;c<r;c++)s(c)}))}function gb(e,t,n,r){return le(n)&&(r=n,n=void 0),r?gb(e,t,n).pipe(ba((function(e){return Jb(e)?r.apply(void 0,e):r(e)}))):new Y((function(r){km(e,t,(function(e){1<arguments.length?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}function km(e,t,n,r,i){if(e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener){e.addEventListener(t,n,i);var o=function(){return e.removeEventListener(t,n,i)}}else if(e&&"function"==typeof e.on&&"function"==typeof e.off)e.on(t,n),o=function(){return e.off(t,n)};else if(e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener)e.addListener(t,n),o=function(){return e.removeListener(t,n)};else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var a=0,s=e.length;a<s;a++)km(e[a],t,n,r,i)}r.add(o)}function lm(e,t,n){return n?lm(e,t).pipe(ba((function(e){return Jb(e)?n.apply(void 0,e):n(e)}))):new Y((function(n){var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{var i=e(r)}catch(e){return void n.error(e)}if(le(t))return function(){return t(r,i)}}))}function bt(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}try{var i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function ki(e){return!Jb(e)&&0<=e-parseFloat(e)+1}function mm(e,t){return void 0===e&&(e=0),void 0===t&&(t=bd),(!ki(e)||0>e)&&(e=0),t&&"function"==typeof t.schedule||(t=bd),new Y((function(n){return n.add(t.schedule(ct,e,{subscriber:n,counter:0,period:e})),n}))}function ct(e){var t=e.subscriber,n=e.counter;e=e.period,t.next(n),this.schedule({subscriber:t,counter:n+1,period:e},e)}function Xb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];t=Number.POSITIVE_INFINITY;var n=null,r=e[e.length-1];return Zc(r)?(n=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof Y?e[0]:tg(t)(nf(e,n))}function li(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return vb;var n=e[0],r=e.slice(1);return 1===e.length&&Jb(n)?li.apply(void 0,n):new Y((function(e){var t=function(){return e.add(li.apply(void 0,r).subscribe(e))};return Kb(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function dt(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription;if(e=e.obj,!r.closed)if(n<t.length){var o=t[n];r.next([o,e[o]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:e}))}else r.complete()}function et(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}function wb(e,t){return function(n){return n.lift(new ft(e,t))}}function Ca(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Jb(e[0]))return e[0];e=e[0]}return nf(e,void 0).lift(new gt)}function ht(e){var t=e.start,n=e.index,r=e.subscriber;n>=e.count?r.complete():(r.next(t),r.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}function Bc(e,t,n){void 0===e&&(e=0);var r=-1;return ki(t)?r=1>Number(t)?1:Number(t):Zc(t)&&(n=t),Zc(n)||(n=bd),new Y((function(t){var i=ki(e)?e:+e-n.now();return n.schedule(it,i,{index:0,period:r,subscriber:t})}))}function it(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function mi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"function"==typeof(t=e[e.length-1])&&e.pop(),nf(e,void 0).lift(new jt(t))}function Ga(e){return function(t){var n=new kt(e);return t=t.lift(n),n.caught=t}}function ni(e,t){return cb(e,t,1)}function nm(e){return void 0===e&&(e=null),function(t){return t.lift(new lt(e))}}function cd(e,t){void 0===t&&(t=bd);var n=e instanceof Date&&!isNaN(+e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new mt(n,t))}}function om(e,t){return function(n){return n.lift(new nt(e,t))}}function Dd(e){return void 0===e&&(e=ot),function(t){return t.lift(new pt(e))}}function ot(){return new vg}function Ka(e){return function(t){return 0===e?mf():t.lift(new qt(e))}}function pm(e,t){return t?function(n){return n.pipe(pm((function(n,r){return Kb(e(n,r)).pipe(ba((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new rt(e))}}function wg(e){return function(t){return t.lift(new st(e))}}function aa(e,t){var n=2<=arguments.length;return function(r){return r.pipe(e?wb((function(t,n){return e(t,n,r)})):Yc,Ka(1),n?nm(t):Dd((function(){return new vg})))}}function tt(){return function(e){return e.lift(new ut)}}function qm(e){return function(t){return 0===e?mf():t.lift(new vt(e))}}function qf(e){return function(t){return t.lift(new wt(e))}}function xg(e,t){var n=!1;return 2<=arguments.length&&(n=!0),function(r){return r.lift(new xt(e,t,n))}}function rm(e,t){return 2<=arguments.length?function(n){return gi(xg(e,t),qm(1),nm(t))(n)}:function(t){return gi(xg((function(t,n,r){return e(t,n,r+1)})),qm(1))(t)}}function yt(e,t){return function(n){var r="function"==typeof e?e:function(){return e};if("function"==typeof t)return n.lift(new zt(r,t));var i=Object.create(n,At);return i.source=n,i.subjectFactory=r,i}}function oe(e){return function(t){return t.lift(new Bt(e,t))}}function Ct(){return new Pa}function pe(){return function(e){return $l()(yt(Ct)(e))}}function sm(e,t,n){var r=e&&"object"===X(e)?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n};return function(e){return e.lift(Dt(r))}}function Dt(e){var t,n,r=e.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=void 0===(r=e.windowTime)?Number.POSITIVE_INFINITY:r,a=e.refCount,s=e.scheduler,c=0,u=!1,l=!1;return function(e){if(c++,!t||u){u=!1;var r=(t=new qe(i,o,s)).subscribe(this);n=e.subscribe({next:function(e){t.next(e)},error:function(e){u=!0,t.error(e)},complete:function(){l=!0,n=void 0,t.complete()}}),l&&(n=void 0)}else r=t.subscribe(this);this.add((function(){c--,r.unsubscribe(),r=void 0,n&&!l&&a&&0===c&&(n.unsubscribe(),t=n=void 0)}))}}function Cc(e,t){return"function"==typeof t?function(n){return n.pipe(Cc((function(n,r){return Kb(e(n,r)).pipe(ba((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new Et(e))}}function ob(e){return function(t){return t.lift(new Ft(e))}}function Gt(e,t){return void 0===t&&(t=!1),function(n){return n.lift(new Ht(e,t))}}function ca(e,t,n){return function(r){return r.lift(new It(e,t,n))}}function Jt(e,t,n){return void 0===t&&(t=bd),void 0===n&&(n=Kt),function(r){return r.lift(new Lt(e,t,n.leading,n.trailing))}}function Mt(e){e.subscriber.clearThrottle()}function Nt(e,t,n){return void 0===n&&(n=bd),function(r){var i=e instanceof Date&&!isNaN(+e),o=i?+e-n.now():Math.abs(e);return r.lift(new Ot(o,i,t,n))}}function hb(e,t){return void 0===t&&(t=bd),Nt(e,Z(new pb),t)}function Pt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new Qt(e,n))}}function tm(e,t,n,r,i){e!==t&&um(t,(function(o,a){if(i||(i=new ge),lb(o)){o=i;var s=oi(e,a),c=oi(t,a),u=o.get(c);if(u)pi(e,a,u);else{var l=void 0===(u=r?r(s,c,a+"",e,t,o):void 0);if(l){var d=Va(c),h=!d&&jf(c),f=!d&&!h&&bi(c);u=c,d||h||f?Va(s)?u=s:gc(s)&&Ed(s)?u=Xh(s):h?(l=!1,u=Jl(c,!0)):f?(l=!1,u=vm(c,!0)):u=[]:wm(c)||rf(c)?(u=s,rf(s)?u=re(s,kf(s)):lb(s)&&!qi(s)||(u=Kl(c))):l=!1}l&&(o.set(c,u),tm(u,c,n,r,o),o.delete(c)),pi(e,a,u)}}else void 0===(s=r?r(oi(e,a),o,a+"",e,t,i):void 0)&&(s=o),pi(e,a,s)}),kf)}function Rt(e){var t=1,n=ri;1==(1>=arguments.length?0:arguments.length-1)?"number"==typeof(1>=arguments.length?void 0:arguments[1])?t=1>=arguments.length?void 0:arguments[1]:n=1>=arguments.length?void 0:arguments[1]:2==(1>=arguments.length?0:arguments.length-1)&&(t=1>=arguments.length?void 0:arguments[1],n=2>=arguments.length?void 0:arguments[2]);var r=t||1;return function(t){return t.pipe(xg((function(t,i){var o=n.now(),a=o-e;if((t=t.filter((function(e){return e.until>a}))).length>=r){var s=t[t.length-1],c=t[0].until+e*Math.floor(t.length/r);t.push({delay:s.until<o?c-o:c-s.until,until:c,value:i})}else t.push({delay:0,until:o,value:i});return t}),[]),ba((function(e){return e[e.length-1]})),ni((function(e){var t=bb(e.value);return e.delay?t.pipe(cd(e.delay,n)):t})))}}function St(e,t){var n=(t=void 0===t?{protocols:xm,makeWebSocket:ym}:t).protocols,r=void 0===n?xm:n,i=void 0===(t=t.makeWebSocket)?ym:t;return new Y((function(t){var n,o=new Pa,a=i(e,r),s=!1,c=!1,u=function(e){if(n)throw s=!0,e=Error("Web socket message factory function called more than once"),t.error(e),e;return n=e.subscribe((function(e){a.send(e)})),o};return a.onopen=function(){c?(s=!0,a.close()):t.next(u)},a.onmessage=function(e){o.next(e.data)},a.onerror=function(e){s=!0,t.error(Error(e.message))},a.onclose=function(e){s||(s=!0,c?(t.complete(),o.complete()):t.error(Error(1e3===e.code?"Normal closure":e.reason)))},function(){c=!0,n&&n.unsubscribe(),s||(s=!0,a.close())}}))}function yg(){this._listeners={}}function zm(e){return"undefined"!=typeof Float32Array?function(){function t(e,t,n){o[0]=e,t[n]=a[0],t[n+1]=a[1],t[n+2]=a[2],t[n+3]=a[3]}function n(e,t,n){o[0]=e,t[n]=a[3],t[n+1]=a[2],t[n+2]=a[1],t[n+3]=a[0]}function r(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],o[0]}function i(e,t){return a[3]=e[t],a[2]=e[t+1],a[1]=e[t+2],a[0]=e[t+3],o[0]}var o=new Float32Array([-0]),a=new Uint8Array(o.buffer),s=128===a[3];e.writeFloatLE=s?t:n,e.writeFloatBE=s?n:t,e.readFloatLE=s?r:i,e.readFloatBE=s?i:r}():function(){function t(e,t,n,r){var i=0>t?1:0;if(i&&(t=-t),0===t)e(0<1/t?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(34028234663852886e22<t)e((i<<31|2139095040)>>>0,n,r);else if(11754943508222875e-54>t)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){return n=e(t,n),e=2*(n>>31)+1,t=n>>>23&255,n&=8388607,255===t?n?NaN:1/0*e:0===t?1401298464324817e-60*e*n:e*Math.pow(2,t-150)*(n+8388608)}e.writeFloatLE=t.bind(null,Am),e.writeFloatBE=t.bind(null,Bm),e.readFloatLE=n.bind(null,Cm),e.readFloatBE=n.bind(null,Dm)}(),"undefined"!=typeof Float64Array?function(){function t(e,t,n){o[0]=e,t[n]=a[0],t[n+1]=a[1],t[n+2]=a[2],t[n+3]=a[3],t[n+4]=a[4],t[n+5]=a[5],t[n+6]=a[6],t[n+7]=a[7]}function n(e,t,n){o[0]=e,t[n]=a[7],t[n+1]=a[6],t[n+2]=a[5],t[n+3]=a[4],t[n+4]=a[3],t[n+5]=a[2],t[n+6]=a[1],t[n+7]=a[0]}function r(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],a[4]=e[t+4],a[5]=e[t+5],a[6]=e[t+6],a[7]=e[t+7],o[0]}function i(e,t){return a[7]=e[t],a[6]=e[t+1],a[5]=e[t+2],a[4]=e[t+3],a[3]=e[t+4],a[2]=e[t+5],a[1]=e[t+6],a[0]=e[t+7],o[0]}var o=new Float64Array([-0]),a=new Uint8Array(o.buffer),s=128===a[7];e.writeDoubleLE=s?t:n,e.writeDoubleBE=s?n:t,e.readDoubleLE=s?r:i,e.readDoubleBE=s?i:r}():function(){function t(e,t,n,r,i,o){var a=0>r?1:0;if(a&&(r=-r),0===r)e(0,i,o+t),e(0<1/r?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(17976931348623157e292<r)e(0,i,o+t),e((a<<31|2146435072)>>>0,i,o+n);else if(22250738585072014e-324>r)e((r/=5e-324)>>>0,i,o+t),e((a<<31|r/4294967296)>>>0,i,o+n);else{var s=Math.floor(Math.log(r)/Math.LN2);1024===s&&(s=1023),e(4503599627370496*(r*=Math.pow(2,-s))>>>0,i,o+t),e((a<<31|s+1023<<20|1048576*r&1048575)>>>0,i,o+n)}}function n(e,t,n,r,i){return t=e(r,i+t),r=e(r,i+n),e=2*(r>>31)+1,t=4294967296*(1048575&r)+t,2047===(n=r>>>20&2047)?t?NaN:1/0*e:0===n?5e-324*e*t:e*Math.pow(2,n-1075)*(t+4503599627370496)}e.writeDoubleLE=t.bind(null,Am,0,4),e.writeDoubleBE=t.bind(null,Bm,4,0),e.readDoubleLE=n.bind(null,Cm,0,4),e.readDoubleBE=n.bind(null,Dm,4,0)}(),e}function Am(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function Bm(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function Cm(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function Dm(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function Wa(e,t){this.lo=e>>>0,this.hi=t>>>0}function sf(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function si(){}function Tt(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function ja(){this.len=0,this.tail=this.head=new sf(si,0,0),this.states=null}function ti(e,t,n){t[n]=255&e}function ui(e,t){this.len=e,this.next=void 0,this.val=t}function vi(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[n++]=127&e.lo|128,e.lo>>>=7;t[n++]=e.lo}function wi(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function jc(){xi.call(this)}function Ut(e,t,n){40>e.length?V.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}function Yb(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function La(e){this.buf=e,this.pos=0,this.len=e.length}function yi(){var e=new Em(0,0),t=0;if(!(4<this.len-this.pos)){for(;3>t;++t){if(this.pos>=this.len)throw Yb(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;4>t;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,128>this.buf[this.pos++])return e;if(t=0,4<this.len-this.pos){for(;5>t;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return e}else for(;5>t;++t){if(this.pos>=this.len)throw Yb(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return e}throw Error("invalid varint encoding")}function zg(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function Fm(){if(this.pos+8>this.len)throw Yb(this,8);return new Em(zg(this.buf,this.pos+=4),zg(this.buf,this.pos+=4))}function Fd(e){zi.call(this,e)}function tf(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");V.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!n}function za(e){return"string"==typeof e&&/^[\s\w!#$%&()+,.:;<=>?@[\]^{|}~-]{1,64}$/.test(e)&&"null"!==e}function Gm(e){try{var t=e.split(".").map((function(e){return Number(e)}))}catch(e){return!1}if(4!==t.length||0===t[0])return!1;for(e=0;e<t.length;e++){var n=t[e];if(!Number.isInteger(n)||0>n||255<n)return!1}return!0}function Hm(e,t){if(!Array.isArray(t)||0===t.length||32<t.length||t.some((function(e){return 0===e.length||32<e.length})))throw new I("arguments is not valid",Ja);if(!za(e))throw new I("ID is invalid",Ja)}function uf(e){var t=e.attributes,n=e.attrSizeMap,r=e.maxAttrsCount,i=e.maxAttrValueSize;if(e=e.maxTotalSize,!yd(t))throw new I("attributes must be an object",Ja);if(Object.keys(t).length>r)throw new ib("Exceed the limit of ".concat(r," attributes"),se);if(0===Object.keys(t).length)throw new I("The attributes is an empty object",Ja);var o=0,a=0;for(t=Object.entries(t);a<t.length;a++){var s=ra(t[a],2),c=s[1];s=new Blob([s[0]]).size;var u=new Blob([c]).size;if(0===s||32<s)throw new I("Invalid attribute key",Ja);if(u>i)throw new ib("Invalid attribute value, over the limit of ".concat(i," bytes"),se);if("string"!=typeof c||0===c.length)throw new I("Invalid attribute value",Ja);o+=s,o+=u}if(o>e)throw new ib("The attributes size overflow",se);if(void 0!==n){if(Object.keys(n).length>r)throw new ib("Exceed the limit of ".concat(r," attributes"),se);for(o=r=0,n=Object.entries(n);o<n.length;o++){if(a=(t=ra(n[o],2))[1],0===(t=new Blob([t[0]]).size))throw new I("Invalid attribute key",Ja);if(a>i)throw new ib("Invalid attribute value, over the limit of ".concat(i," bytes"),se);r+=t,r+=a}if(r>e)throw new ib("The attributes size overflow",se)}}function Ag(e,t){return Math.floor(Math.random()*(Math.floor(t)-Math.ceil(e)+1))+e}function Bg(){var e=Ag(0,4294967295),t=Ag(1,4294967295);return new U(e,t,!0)}function Xa(e){return e.toString().padEnd(32,"0")}function Im(e,t){return new TypeError("Unexpected ".concat(e,": ").concat(t))}function Jm(e,t){return e=e.split(".").map((function(e){return Number(e)})),t=t.split(".").map((function(e){return Number(e)})),Math.sqrt(1e3*Math.pow(e[0]-t[0],2)+100*Math.pow(e[1]-t[1],2)+10*Math.pow(e[2]-t[2],2)+1*Math.pow(e[3]-t[3],2))}function Km(e){return e.lessThanOrEqual(Number.MAX_SAFE_INTEGER)?e.toNumber():e.toString()}function Ai(e,t){t="".concat(e).concat(t||"");var n=Lm.get(t)||1;return Lm.set(t,n+1),"".concat(e).concat(n)}function Mm(e,t){var n="number"==typeof t?t:void 0!==t&&"string"!=typeof t?t.code:void 0;return t="number"!=typeof t&&"string"!=typeof t&&void 0!==t&&void 0!==t.serverCode?t.serverCode:void 0,n="".concat(void 0!==n?" Error Code ".concat(n):"").concat(void 0!==t?", server Code ".concat(t):""),e="string"==typeof e&&e?Cg(e):Array.isArray(e)&&"string"==typeof e[0]&&e[0]?Cg(Nm.apply(void 0,[e[0]].concat(G(e.slice(1))))):"","".concat(""===n?"":"".concat(n," - ")).concat(e)}function Om(e){return Bi.apply(this,arguments)}function Bi(){return(Bi=J(w.mark((function e(t){return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout((function(){e()}),t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pm(e){return e instanceof Blob||"[object Blob]"===Object.prototype.toString.call(e)}function Dg(e){var t=255&e,n=e>>8&255,r=e>>16&255;return"".concat(e>>24&255,".").concat(r,".").concat(n,".").concat(t)}function te(e,t,n){return Ci.apply(this,arguments)}function Ci(){return(Ci=J(w.mark((function e(t,n,r){var i,o,a,s,c,u,l,d,h,f,p,v,g,m,y,b,_,E,S,x,T,I,R,k,O,C;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.body,o=n.headers,a=void 0===o?{}:o,s=n.timeout,c=void 0===s?1e4:s,u=n.signal,l=n.withCredentials,d=void 0!==l&&l,h=(r||{}).useBinaryResponse,f=void 0!==h&&h,(p=new XMLHttpRequest).open("POST",t,!0),p.responseType=f?"arraybuffer":"text",p.withCredentials=d,p.timeout=c,v=i instanceof FormData,g=i instanceof Uint8Array,!(1<(m=Object.keys(a).filter((function(e){return"content-type"===e.toLowerCase()}))).length)){e.next=14;break}throw new RangeError("multiple content-type");case 14:0===m.length&&(g?a["Content-Type"]="application/octet-stream":v||(a["Content-Type"]="application/json"));case 15:if("setRequestHeader"in p){e.next=46;break}return p.abort(),e.next=19,fetch(t,{body:v||g?i:JSON.stringify(i),cache:"no-cache",credentials:d?"include":"same-origin",headers:a,method:"POST",mode:"cors",referrer:"no-referrer",signal:u});case 19:if(y=e.sent,!(200<=(b=y.status)&&300>b||304===b)){e.next=31;break}if(!f){e.next=27;break}return e.next=25,y.arrayBuffer();case 25:return _=e.sent,e.abrupt("return",{status:b,responseData:_});case 27:return e.next=29,y.text();case 29:return E=e.sent,e.abrupt("return",{status:b,responseText:E});case 31:return S=new da(["Post XHR failure, status %d",b]),e.prev=32,e.next=35,y.text();case 35:throw x=e.sent,S.statusCode=b,S.message=x||"Request failed, status ".concat(b),S;case 41:throw e.prev=41,e.t0=e.catch(32),S.statusCode=b,S.message="Request failed, status ".concat(b),S;case 46:if(0!==Object.keys(a).length)for(T=0,I=Object.entries(a);T<I.length;T++)R=ra(I[T],2),k=R[0],O=R[1],p.setRequestHeader(k,O);return void 0!==u&&(C=function e(){p.abort(),u.removeEventListener("abort",e)},u.addEventListener("abort",C)),v||g?p.send(i):p.send(JSON.stringify(i)),e.abrupt("return",new Promise((function(e,t){p.onload=function(){var n=p.status;if(200<=n&&300>n||304===n)e(f?{status:n,responseData:p.response}:{status:n,responseText:p.responseText});else{var r=new da(["Post XHR failure, status %d",n]);r.statusCode=n,r.message=p.response||"Request failed, status ".concat(p.status),t(r)}},p.ontimeout=function(e){t(new db(["XHR request timed out after %d ms",c],{originalError:e}))},p.onerror=function(){var e=new da(["Post XHR failure, status %d",p.status]);e.statusCode=p.status,e.message=p.response||"Request failed, status ".concat(p.status),t(e)},p.onabort=function(){try{t(new DOMException("The request aborted.","AbortError"))}catch(n){var e=Error("The request aborted.");e.name="AbortError",t(e)}}})));case 50:case"end":return e.stop()}}),e,null,[[32,41]])})))).apply(this,arguments)}function Rm(e){return Hi.apply(this,arguments)}function Hi(){return(Hi=J(w.mark((function e(t){var n;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Image).src=t,e.abrupt("return",new Promise((function(e,t){n.onload=function(){e({width:n.width,height:n.height})},n.onerror=t})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xt(e,t){return Ii.apply(this,arguments)}function Ii(){return(Ii=J(w.mark((function e(t,n){var r,i,o,a,s,c,u,l,d,h;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.thumbnailHeight,i=void 0===r?0:r,o=t.thumbnailWidth,a=void 0===o?0:o,s=t.width,c=void 0===s?0:s,u=t.height,l=void 0===u?0:u,d=t.thumbnail,h=[],"number"==typeof i&&"number"==typeof a&&"number"==typeof c&&"number"==typeof l){e.next=5;break}throw new I("Invalid message params",wf);case 5:return 0>=c&&0>=l&&h.push(Rm(Sm(n)).then((function(e){c=e.width,l=e.height}))),0>=a&&0>=i&&void 0!==d&&h.push(Ji(d).then(function(){var e=J(w.mark((function e(t){var n;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rm(Sm(t));case 2:n=e.sent,a=n.width,i=n.height;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.next=9,Promise.all(h).catch((function(){}));case 9:return e.abrupt("return",{width:c,height:l,thumbnailWidth:a,thumbnailHeight:i});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tm(e,t){if(!yd(e))throw new I("message object is not a plain object",t);if(void 0===e.messageType)if(e.rawMessage instanceof Uint8Array){if(e.messageType="RAW",void 0!==e.text)throw new I("Raw messages cannot have text property. Use description instead",t)}else{if("string"!=typeof e.text)throw new I("messageType is undefined",t);if(e.messageType="TEXT",void 0!==e.rawMessage)throw new I("Text messages cannot have rawMessage property",t)}}function Gg(e){return Ki.apply(this,arguments)}function Ki(){return(Ki=J(w.mark((function e(t){var n,r,i,o,a,s,c,u,l,d,h,f,p,v,g,m,y,b,_,E,S;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.message,r=t.peerId,i=t.toPeer,o=t.session,a=t.errorCodes,s=t.diff,c=t.logger,u=t.options,void 0!==o){e.next=3;break}throw new K("The client is not logged in. Cannot do the operation",a.NOT_LOGGED_IN);case 3:if(l=!1,"TEXT"!==n.messageType||!n.text.startsWith("AgoraRTMLegacyEndcallCompatibleMessagePrefix")||!i){e.next=11;break}if(d=n.text.split("_"),h=ra(d,3),f=h[0],p=h[1],void 0!==h[2]&&za(p)&&"AgoraRTMLegacyEndcallCompatibleMessagePrefix"===f){e.next=10;break}throw new I("Message is not valid",ve);case 10:l=!0;case 11:if(v=Date.now(),g=o.messageSentTimes.length-1,!((m=o.messageSentTimes[g])&&m+3e3<v)){e.next=18;break}o.messageSentTimes=[v],e.next=29;break;case 18:y=g;case 19:if(!(0<=y)){e.next=28;break}if(!(o.messageSentTimes[y]+3e3<v)){e.next=23;break}return o.messageSentTimes=o.messageSentTimes.slice(y+1,g+1),e.abrupt("break",28);case 23:if(!(180<=g-y+1)){e.next=25;break}throw new ib("Message sent failed, exceeded the 180 message in 3 seconds",a.TOO_OFTEN);case 25:y--,e.next=19;break;case 28:o.messageSentTimes.push(v);case 29:e.t0=n.messageType,e.next="TEXT"===e.t0?32:"RAW"===e.t0?37:"FILE"===e.t0||"IMAGE"===e.t0?39:40;break;case 32:if(!l){e.next=36;break}return b=n.text.split("_"),_=ra(b,3),E=_[1],S=_[2],c.info("[rtm-API] EndCall message send api is called"),e.abrupt("return",o.sendInvitationMessage({peerId:r,type:"CallCancel",extra:S,channelId:E,callId:"0"}));case 36:return e.abrupt("return",o.sendTextMessage(n.text,r,i,u,1e4-s));case 37:return void 0===n.description&&(n.description=""),e.abrupt("return",o.sendRawMessage(n.rawMessage,n.description,r,i,u,1e4-s));case 39:return e.abrupt("return",o.sendMediaMessage(n.messageType,n,r,i,u,1e4-s));case 40:throw new I("Invalid message type",ve);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yt(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=e.replace(/(https?:\/\/)?(www.)?/i,"");return t||(n=n.split(".").slice(e.length-2).join(".")),-1!==n.indexOf("/")?n.split("/")[0]:n}function oa(e){if("string"!=typeof e)return"[Sensitive Info]";var t=Math.floor(.7*e.length),n=e.length;return Um(e,t,n,"*".repeat(n-t))}function Vm(e,t,n){function r(i){if(void 0===e)return e;if(Il(i))return i;if(Array.isArray(i))return i.map(r);var o={},a=0;for(i=Hg(i);a<i.length;a++){var s=ra(i[a],2),c=s[0];if("string"==typeof(s=s[1])&&n.includes(c)){o[c]="string"==typeof s?oa(s):"[Sensitive Info]";break}t.includes(c)?o[c]="[Hidden Info]":o[c]=null==s?s:n.includes(c)?"[Sensitive Info]":r(s)}return o}return Array.isArray(e)?e.map(r):r(e)}function Wm(e){return Object.getOwnPropertyNames(e).forEach((function(t){"object"==X(t=e[t])&&null!==t&&Wm(t)})),Object.freeze(e)}function pa(e){return new TextDecoder("utf-8").decode(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}function Ig(e){return(new TextEncoder).encode(e).length}function Xm(){for(var e=0,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(t=0;t<n.length;t++)e+=n[t].length;for(e=new Uint8Array(e),r=t=0;r<n.length;r++){var i=n[r];e.set(i,t),t+=i.length}return e}function we(e,t,n){var r=e.match(/([^?#]+)(\?[^#]*)?(#.*)?/);if(e=null==r?void 0:r[1],r=null==r?void 0:r[2]){var i;for(r=r.substr(1).split("&"),i=0;i<r.length;i++)if(r[i].split("=")[0]==t){r[i]=t+"="+encodeURIComponent(n);break}return i==r.length&&r.push(t+"="+encodeURIComponent(n)),e+"?"+r.join("&")}return e+"?"+t+"="+encodeURIComponent(n)}function Ji(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){var e=r.result||new ArrayBuffer(0);t(e)},r.onerror=n,r.readAsArrayBuffer(e)}))}function Zt(e,t){e=e=[e],"string"==typeof(t=t||{})&&(t={type:t});try{var n=new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder);for(var r=0;r<e.length;r+=1)n.append(e[r]);n=n.getBlob(t.type)}return n}function Um(e,t,n,r){return"string"!=typeof e?"[Sensitive Info]":e.substring(0,t)+r+e.substring(n)}function Ym(e){var t=[];return function e(n){if(null===n||"object"!==X(n))return n;if(-1!==t.indexOf(n))return"[Circular]";if(t.push(n),"function"==typeof n.toJSON)try{var r=e(n.toJSON());return t.pop(),r}catch(e){return"[Throws: "+(e?e.message:"?")+"]"}return Array.isArray(n)?(r=n.map(e),t.pop(),r):(r=Object.keys(n).reduce((function(t,r){e:{if($t.call(n,r))try{var i=n[r];break e}catch(e){i="[Throws: "+(e?e.message:"?")+"]";break e}i=n[r]}return t[r]=e(i),t}),{}),t.pop(),r)}(e)}function au(e){if(!(100<(e=String(e)).length)&&(e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e))){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"weeks":case"week":case"w":return 6048e5*t;case"days":case"day":case"d":return 864e5*t;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*t;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t}}}function Jg(e,t,n,r){return Math.round(e/n)+" "+r+(t>=1.5*n?"s":"")}function bu(e){var t=e.areas,n=e.excludedArea;if(1===t.length&&t[0]===F.GLOBAL&&n===F.CHINA)return xe([F.OVERSEA]);if(t.includes(F.GLOBAL)){if(e=xf(Kg).filter((function(e){return e!==F.GLOBAL&&e!==F.OVERSEA})),n in yf){t=yf[n];var r=[].concat(G(null!=t?t:[]),[n]);return xe(e.filter((function(e){return!r.includes(e)})))}if(Zm(n)){var i=cu(n);return xe(e.filter((function(e){return e!==n&&e!==i})))}}if(Zm(n)||n in yf)return xe(t);throw new I("Invalid excludedArea area config")}function Ma(e,t,n){void 0===n&&(n=Object.getOwnPropertyDescriptor(e,t));var r=n.value;return n.value=function(){for(var e=this,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];this.invokeTracker.apply(this,["%s: ".concat(0<i.length?"%s with args: ".concat(i.map((function(){return"%o"}))):"%s"),this.name,t].concat(G(i.map(ye))));try{var a=r.apply(this,i)}catch(e){throw this.logError.apply(this,["".concat(void 0!==e.code?"Error Code ".concat(e.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(G(i.map(ye)))),e.originalError&&this.logError(e.originalError),this.errorTracker(e),e}var s=Date.now();return J(w.mark((function n(){var r,o;return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a;case 3:r=n.sent,n.next=12;break;case 6:return n.prev=6,n.t0=n.catch(0),e.logError.apply(e,["".concat(void 0!==n.t0.code?"Error Code ".concat(n.t0.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(G(i.map(ye)))),n.t0.originalError&&e.logError(n.t0.originalError),e.errorTracker(n.t0),n.abrupt("return");case 12:r!==a?void 0===r?e.resultTracker("%s promise resolves after %dms",t,Date.now()-s):e.resultTracker("%s promise resolves after %dms, result is %o",t,Date.now()-s,ye(r)):"Object"!==Ac(r)||yd(r)?e.resultTracker("%s result is %o",t,ye(r)):e.resultTracker("%s result is %s",t,r.name||(null===(o=r.constructor)||void 0===o?void 0:o.name));case 13:case"end":return n.stop()}}),n,null,[[0,6]])})))(),a},n}function Nb(e,t,n){void 0===n&&(n=Object.getOwnPropertyDescriptor(e,t));var r=n.value;return n.value=function(){for(var e=this,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];this.invokeTracker.apply(this,["%s: ".concat(0<i.length?"%s with args: ".concat(i.map((function(){return"%o"}))):"%s"),this.name,t].concat(i));try{var a=r.apply(this,i)}catch(e){throw this.logError.apply(this,["".concat(void 0!==e.code?"Error Code ".concat(e.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(i)),e.originalError&&this.logError(e.originalError),this.errorTracker(e),e}var s=Date.now();return J(w.mark((function n(){var r,o;return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a;case 3:r=n.sent,n.next=12;break;case 6:return n.prev=6,n.t0=n.catch(0),e.logError.apply(e,["".concat(void 0!==n.t0.code?"Error Code ".concat(n.t0.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(i)),n.t0.originalError&&e.logError(n.t0.originalError),e.errorTracker(n.t0),n.abrupt("return");case 12:r!==a?void 0===r?e.resultTracker("%s promise resolves after %dms",t,Date.now()-s):e.resultTracker("%s promise resolves after %dms, result is %o",t,Date.now()-s,r):"Object"!==Ac(r)||yd(r)?e.resultTracker("%s result is %o",t,r):e.resultTracker("%s result is %s",t,r.name||(null===(o=r.constructor)||void 0===o?void 0:o.name));case 13:case"end":return n.stop()}}),n,null,[[0,6]])})))(),a},n}function du(e,t){var n="".concat(e,"Uri");if("number"!=typeof(n=Li[n])||0===n)throw new TypeError("Got Unknown URI Name");return t=new(e=$m[e])(t),t=e.encode(t).finish(),new eu({uri:n,data:t})}function an(e,t){return"".concat(e.split(".").join("-"),".edge.").concat(t?"sd-rtn.com":"agora.io")}function eb(e,t,n){return Mi.apply(this,arguments)}function Mi(){return(Mi=J(w.mark((function e(t,n,r){var i,o;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return i=fu[t].encode(n).finish(),o=function(){var e=J(w.mark((function e(n){var a,s,c,u=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(3<(s=1<u.length&&void 0!==u[1]?u[1]:0))){e.next=3;break}return e.abrupt("return");case 3:return c=we(c=r?"https://".concat(null!==(a=null==M?void 0:M.PROXY_NGINX[0])&&void 0!==a?a:"webrtc-cloud-proxy.sd-rtn.com","/rs/?h=").concat(n,"&p=6443&d=events/proto-raw"):"https://".concat(n,":6443/events/proto-raw"),"sentTs",Math.ceil(Date.now()/1e3).toString()),c=we(c,"id",gu[t].toString()),e.next=8,te(c,{body:i,timeout:2e4,headers:{"Content-Type":"application/octet-stream"}}).catch((function(e){return o(n,s+1)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.prev=4,e.next=7,o((null==M?void 0:M.EVENT_REPORT_DOMAIN[0])||"webcollector-rtm.agora.io");case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),e.next=13,o(M&&bn(1<(null==M?void 0:M.EVENT_REPORT_DOMAIN.length)?null==M?void 0:M.EVENT_REPORT_DOMAIN.slice(1):null==M?void 0:M.EVENT_REPORT_DOMAIN)||"rtm.statscollector.sd-rtn.com");case 13:case"end":return e.stop()}}),e,null,[[4,9]])})))).apply(this,arguments)}function fb(e){return void 0===e?U.fromNumber(0):U.fromNumber(Date.now()-e)}function hu(e){return btoa(String.fromCharCode.apply({},e.replace(/\r|\n/g,"").replace(/([\dA-Fa-f]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").map((function(e){return parseInt(e,16)})))).replace(/={1,2}$/,"")}function Lg(e,t){return U.fromValue(e).eq(t)}function Mg(e,t){var n=void 0===t?e.val:t,r=e.isBoolean;t=e.isNumber;var i=e.oneof,o=e.len;if(2!==[r,t,i].filter((function(e){return!e})).length)throw new TypeError("invalid field type");if(void 0!==n&&(e=!1,void 0!==i&&(i=Ni(i),iu(i,Lg).length===i.length&&void 0!==ju(i,(function(e){return Lg(n,e)}))&&(e=!0)),r=void 0!==r&&(0===n||1===n)&&1===o,t=void 0!==t&&n.toString(2).length<=o,!(e||r||t)))throw Error("invalid field value")}function cn(e){return function(){var t=e();if(!t)throw new K("Client is not logged in. Cannot do the operation");return t}}var Ya="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof __webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},Ng=function(e){return e&&e.Math==Math&&e},y=Ng("object"==typeof globalThis&&globalThis)||Ng("object"==typeof window&&window)||Ng("object"==typeof self&&self)||Ng("object"==typeof Ya&&Ya)||function(){return this}()||Function("return this")(),R=function(e){try{return!!e()}catch(e){return!0}},ka=!R((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),dn={}.propertyIsEnumerable,en=Object.getOwnPropertyDescriptor,zf=en&&!dn.call({1:2},1)?function(e){return!!(e=en(this,e))&&e.enumerable}:dn,dd=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},ku={}.toString,Zb=function(e){return ku.call(e).slice(8,-1)},lu="".split,Af=R((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==Zb(e)?lu.call(e,""):Object(e)}:Object,jb=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},qb=function(e){return Af(jb(e))},ha=function(e){return"object"==typeof e?null!==e:"function"==typeof e},lc=function(e,t){if(!ha(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!ha(r=n.call(e))||"function"==typeof(n=e.valueOf)&&!ha(r=n.call(e))||!t&&"function"==typeof(n=e.toString)&&!ha(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},Qa=function(e){return Object(jb(e))},mu={}.hasOwnProperty,Q=function(e,t){return mu.call(Qa(e),t)},ze=y.document,Og=ha(ze)&&ha(ze.createElement),fn=!ka&&!R((function(){return 7!=Object.defineProperty(Og?ze.createElement("div"):{},"a",{get:function(){return 7}}).a})),gn=Object.getOwnPropertyDescriptor,Fb={f:ka?gn:function(e,t){if(e=qb(e),t=lc(t,!0),fn)try{return gn(e,t)}catch(e){}if(Q(e,t))return dd(!zf.call(e,t),e[t])}},va=function(e){if(!ha(e))throw TypeError(String(e)+" is not an object");return e},hn=Object.defineProperty,Ra={f:ka?hn:function(e,t,n){if(va(e),t=lc(t,!0),va(n),fn)try{return hn(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Na=ka?function(e,t,n){return Ra.f(e,t,dd(1,n))}:function(e,t,n){return e[t]=n,e},Oi=function(e,t){try{Na(y,e,t)}catch(n){y[e]=t}return t},ed=y["__core-js_shared__"]||Oi("__core-js_shared__",{}),nu=Function.toString;"function"!=typeof ed.inspectSource&&(ed.inspectSource=function(e){return nu.call(e)});var Pi=ed.inspectSource,jn=y.WeakMap,ou="function"==typeof jn&&/native code/.test(Pi(jn)),fd=$a((function(e){(e.exports=function(e,t){return ed[e]||(ed[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.12.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})})),pu=0,qu=Math.random(),Ae=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++pu+qu).toString(36)},kn=fd("keys"),Pg=function(e){return kn[e]||(kn[e]=Ae(e))},Be={},ru=y.WeakMap;if(ou||ed.state)var Gd=ed.state||(ed.state=new ru),su=Gd.get,ln=Gd.has,tu=Gd.set,Qi=function(e,t){if(ln.call(Gd,e))throw new TypeError("Object already initialized");return t.facade=e,tu.call(Gd,e,t),t},Qg=function(e){return su.call(Gd,e)||{}},Ri=function(e){return ln.call(Gd,e)};else{var Ce=Pg("state");Be[Ce]=!0,Qi=function(e,t){if(Q(e,Ce))throw new TypeError("Object already initialized");return t.facade=e,Na(e,Ce,t),t},Qg=function(e){return Q(e,Ce)?e[Ce]:{}},Ri=function(e){return Q(e,Ce)}}var Za={set:Qi,get:Qg,has:Ri,enforce:function(e){return Ri(e)?Qg(e):Qi(e,{})},getterFor:function(e){return function(t){var n;if(!ha(t)||(n=Qg(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Ta=$a((function(e){var t=Za.get,n=Za.enforce,r=String(String).split("String");(e.exports=function(e,t,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable;if(o=!!o&&!!o.noTargetGet,"function"==typeof i){"string"!=typeof t||Q(i,"name")||Na(i,"name",t);var c=n(i);c.source||(c.source=r.join("string"==typeof t?t:""))}e===y?s?e[t]=i:Oi(t,i):(a?!o&&e[t]&&(s=!0):delete e[t],s?e[t]=i:Na(e,t,i))})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||Pi(this)}))})),mn=function(e){return"function"==typeof e?e:void 0},mc=function(e,t){return 2>arguments.length?mn(y[e])||mn(y[e]):y[e]&&y[e][t]||y[e]&&y[e][t]},uu=Math.ceil,vu=Math.floor,$b=function(e){return isNaN(e=+e)?0:(0<e?vu:uu)(e)},wu=Math.min,ta=function(e){return 0<e?wu($b(e),9007199254740991):0},xu=Math.max,yu=Math.min,xb=function(e,t){return 0>(e=$b(e))?xu(e+t,0):yu(e,t)},nn=function(e){return function(t,n,r){t=qb(t);var i=ta(t.length);if(r=xb(r,i),e&&n!=n){for(;i>r;)if((n=t[r++])!=n)return!0}else for(;i>r;r++)if((e||r in t)&&t[r]===n)return e||r||0;return!e&&-1}},on=nn(!0),Si=nn(!1),pn=function(e,t){e=qb(e);var n,r=0,i=[];for(n in e)!Q(Be,n)&&Q(e,n)&&i.push(n);for(;t.length>r;)Q(e,n=t[r++])&&(~Si(i,n)||i.push(n));return i},Rg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),zu=Rg.concat("length","prototype"),Hd={f:Object.getOwnPropertyNames||function(e){return pn(e,zu)}},Bf={f:Object.getOwnPropertySymbols},qn=mc("Reflect","ownKeys")||function(e){var t=Hd.f(va(e)),n=Bf.f;return n?t.concat(n(e)):t},rn=function(e,t){for(var n=qn(t),r=Ra.f,i=Fb.f,o=0;o<n.length;o++){var a=n[o];Q(e,a)||r(e,a,i(t,a))}},Au=/#|\.prototype\./,nc=function(e,t){return(e=Bu[Cu(e)])==Du||e!=Eu&&("function"==typeof t?R(t):!!t)},Cu=nc.normalize=function(e){return String(e).replace(Au,".").toLowerCase()},Bu=nc.data={},Eu=nc.NATIVE="N",Du=nc.POLYFILL="P",Fu=Fb.f,N=function(e,t){var n,r,i,o=e.target,a=e.global,s=e.stat;if(r=a?y:s?y[o]||Oi(o,{}):(y[o]||{}).prototype)for(i in t){var c=t[i],u=e.noTargetGet?(n=Fu(r,i))&&n.value:r[i];if(!(n=nc(a?i:o+(s?".":"#")+i,e.forced))&&void 0!==u){if(typeof c==typeof u)continue;rn(c,u)}(e.sham||u&&u.sham)&&Na(c,"sham",!0);try{Ta(r,i,c,e)}catch(e){}}},yb=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Id=function(e,t,n){if(yb(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},gd=Array.isArray||function(e){return"Array"==Zb(e)},De=mc("navigator","userAgent")||"",sn=y.process,tn=sn&&sn.versions,un=tn&&tn.v8;if(un)var hd=un.split("."),Ti=4>hd[0]?1:hd[0]+hd[1];else De&&(hd=De.match(/Edge\/(\d+)/),(!hd||74<=hd[1])&&(hd=De.match(/Chrome\/(\d+)/))&&(Ti=hd[1]));var id=Ti&&+Ti,oc=!!Object.getOwnPropertySymbols&&!R((function(){return!String(Symbol())||!Symbol.sham&&id&&41>id})),vn=oc&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Cf=fd("wks"),Df=y.Symbol,Gu=vn?Df:Df&&Df.withoutSetter||Ae,qa=function(e){return Q(Cf,e)&&(oc||"string"==typeof Cf[e])||(oc&&Q(Df,e)?Cf[e]=Df[e]:Cf[e]=Gu("Symbol."+e)),Cf[e]},Hu=qa("species"),Sg=function(e,t){if(gd(e)){var n=e.constructor;"function"!=typeof n||n!==Array&&!gd(n.prototype)?ha(n)&&null===(n=n[Hu])&&(n=void 0):n=void 0}return new(void 0===n?Array:n)(0===t?0:t)},wn=[].push,jd=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(c,u,l,d){var h=Qa(c),f=Af(h);u=Id(u,l,3),l=ta(f.length);var p,v=0;for(d=d||Sg,c=t?d(c,l):n||a?d(c,0):void 0;l>v;v++)if((s||v in f)&&(p=u(d=f[v],v,h),e))if(t)c[v]=p;else if(p)switch(e){case 3:return!0;case 5:return d;case 6:return v;case 2:wn.call(c,d)}else switch(e){case 4:return!1;case 7:wn.call(c,d)}return o?-1:r||i?i:c}},Jd=jd(0),xn=jd(1),yn=jd(2),Iu=jd(3),Ju=jd(4),zn=jd(5),An=jd(6);jd(7);var Ku=qa("species"),Ef=function(e){return 51<=id||!R((function(){var t=[];return(t.constructor={})[Ku]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Lu=Ef("filter");N({target:"Array",proto:!0,forced:!Lu},{filter:function(e){return yn(this,e,1<arguments.length?arguments[1]:void 0)}});var Dc=Object.keys||function(e){return pn(e,Rg)},Mu=R((function(){Dc(1)}));N({target:"Object",stat:!0,forced:Mu},{keys:function(e){return Dc(Qa(e))}});var Ee=function(e,t){var n=[][e];return!!n&&R((function(){n.call(null,t||function(){throw 1},1)}))},Nu=[].join,Ou=Af!=Object,Pu=Ee("join",",");N({target:"Array",proto:!0,forced:Ou||!Pu},{join:function(e){return Nu.call(qb(this),void 0===e?",":e)}});var Qu=Ef("map");N({target:"Array",proto:!0,forced:!Qu},{map:function(e){return xn(this,e,1<arguments.length?arguments[1]:void 0)}});var Ui=function(e){var t=e.return;if(void 0!==t)return va(t.call(e)).value},Fe={},Ru=qa("iterator"),Su=Array.prototype,Vi=function(e){return void 0!==e&&(Fe.Array===e||Su[Ru]===e)},Ge=function(e,t,n){(t=lc(t))in e?Ra.f(e,t,dd(0,n)):e[t]=n},Tu=qa("toStringTag"),Bn={};Bn[Tu]="z";var Wi="[object z]"===String(Bn),Uu=qa("toStringTag"),Vu="Arguments"==Zb(function(){return arguments}()),Ff=Wi?Zb:function(e){var t;if(void 0===e)var n="Undefined";else{if(null===e)var r="Null";else{e:{var i=e=Object(e);try{r=i[Uu];break e}catch(e){}r=void 0}r="string"==typeof(n=r)?n:Vu?Zb(e):"Object"==(t=Zb(e))&&"function"==typeof e.callee?"Arguments":t}n=r}return n},Wu=qa("iterator"),Xi=function(e){if(null!=e)return e[Wu]||e["@@iterator"]||Fe[Ff(e)]},Cn=qa("iterator"),Dn=!1;try{var Xu=0,En={next:function(){return{done:!!Xu++}},return:function(){Dn=!0}};En[Cn]=function(){return this},Array.from(En,(function(){throw 2}))}catch(c){}var Tg=function(e,t){if(!t&&!Dn)return!1;var n=!1;try{(t={})[Cn]=function(){return{next:function(){return{done:n=!0}}}},e(t)}catch(e){}return n},Yu=!Tg((function(e){Array.from(e)}));N({target:"Array",stat:!0,forced:Yu},{from:function(e){var t,n=Qa(e),r="function"==typeof this?this:Array,i=arguments.length,o=1<i?arguments[1]:void 0,a=void 0!==o,s=Xi(n),c=0;if(a&&(o=Id(o,2<i?arguments[2]:void 0,2)),null==s||r==Array&&Vi(s)){var u=ta(n.length);for(r=new r(u);u>c;c++)s=a?o(n[c],c):n[c],Ge(r,c,s)}else for(i=(n=s.call(n)).next,r=new r;!(t=i.call(n)).done;c++){if(a){s=n;var l=o;t=[t.value,c];try{u=l(va(t)[0],t[1])}catch(e){throw Ui(s),e}}else u=t.value;Ge(r,c,s=u)}return r.length=c,r}});var Fn=function(e){return function(t,n){t=String(jb(t)),n=$b(n);var r,i=t.length;if(0>n||n>=i)return e?"":void 0;var o=t.charCodeAt(n);return 55296>o||56319<o||n+1===i||56320>(r=t.charCodeAt(n+1))||57343<r?e?t.charAt(n):o:e?t.slice(n,n+2):r-56320+(o-55296<<10)+65536}};Fn(!1);var Gn=Fn(!0),Hn=!R((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),In=Pg("IE_PROTO"),Zu=Object.prototype,Vb=Hn?Object.getPrototypeOf:function(e){return e=Qa(e),Q(e,In)?e[In]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Zu:null},Yi=qa("iterator"),Jn=!1,$u=function(){return this},Kd;if([].keys){var Kn=[].keys();if("next"in Kn){var Ln=Vb(Vb(Kn));Ln!==Object.prototype&&(Kd=Ln)}else Jn=!0}(null==Kd||R((function(){var e={};return Kd[Yi].call(e)!==e})))&&(Kd={}),Q(Kd,Yi)||Na(Kd,Yi,$u);var Ug=Kd,Vg=Jn,av=ka?Object.defineProperties:function(e,t){va(e);for(var n,r=Dc(t),i=r.length,o=0;i>o;)Ra.f(e,n=r[o++],t[n]);return e},Zi=mc("document","documentElement"),Mn=Pg("IE_PROTO"),$i=function(){},aj,_Wg=function(){try{aj=document.domain&&new ActiveXObject("htmlfile")}catch(e){}if(aj){var e=aj;e.write("<script><\/script>"),e.close(),e=e.parentWindow.Object}else(e=Og?ze.createElement("iframe"):{}).style.display="none",Zi.appendChild(e),e.src="javascript:",(e=e.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),e=e.F;for(_Wg=e,e=Rg.length;e--;)delete _Wg.prototype[Rg[e]];return _Wg()};Be[Mn]=!0;var ac=Object.create||function(e,t){if(null!==e){$i.prototype=va(e);var n=new $i;$i.prototype=null,n[Mn]=e}else n=_Wg();return void 0===t?n:av(n,t)},bv=Ra.f,Nn=qa("toStringTag"),Ec=function(e,t,n){e&&!Q(e=n?e:e.prototype,Nn)&&bv(e,Nn,{configurable:!0,value:t})},cv=function(){return this},dv=function(e,t,n){return t+=" Iterator",e.prototype=ac(Ug,{next:dd(1,n)}),Ec(e,t,!1),Fe[t]=cv,e},Ua=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={};try{var n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set;n.call(t,[]),e=t instanceof Array}catch(e){}return function(t,r){if(va(t),!ha(r)&&null!==r)throw TypeError("Can't set "+String(r)+" as a prototype");return e?n.call(t,r):t.__proto__=r,t}}():void 0),Gf=qa("iterator"),ev=function(){return this},bj=function(e,t,n,r,i,o,a){dv(n,t,r),r=function(e){if(e===i&&h)return h;if(!Vg&&e in l)return l[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}};var s,c=t+" Iterator",u=!1,l=e.prototype,d=l[Gf]||l["@@iterator"]||i&&l[i],h=!Vg&&d||r(i),f="Array"==t&&l.entries||d;if(f&&(e=Vb(f.call(new e)),Ug!==Object.prototype&&e.next&&(Vb(e)!==Ug&&(Ua?Ua(e,Ug):"function"!=typeof e[Gf]&&Na(e,Gf,ev)),Ec(e,c,!0))),"values"==i&&d&&"values"!==d.name&&(u=!0,h=function(){return d.call(this)}),l[Gf]!==h&&Na(l,Gf,h),Fe[t]=h,i){var p={values:r("values"),keys:o?h:r("keys"),entries:r("entries")};if(a)for(s in p)!Vg&&!u&&s in l||Ta(l,s,p[s]);else N({target:t,proto:!0,forced:Vg||u},p)}return p},fv=Za.set,gv=Za.getterFor("String Iterator");bj(String,"String",(function(e){fv(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e=gv(this),t=e.string,n=e.index;return n>=t.length?{value:void 0,done:!0}:(t=Gn(t,n),e.index+=t.length,{value:t,done:!1})}));var cj=qa("unscopables"),dj=Array.prototype;null==dj[cj]&&Ra.f(dj,cj,{configurable:!0,value:ac(null)});var Ld=function(e){dj[cj][e]=!0},On=!0;"find"in[]&&Array(1).find((function(){On=!1})),N({target:"Array",proto:!0,forced:On},{find:function(e){return zn(this,e,1<arguments.length?arguments[1]:void 0)}}),Ld("find");var Pn=function(e){var t=String(jb(this)),n="";if(0>(e=$b(e))||1/0==e)throw RangeError("Wrong number of repetitions");for(;0<e;(e>>>=1)&&(t+=t))1&e&&(n+=t);return n};N({target:"String",proto:!0},{repeat:Pn}),N({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),N({target:"Number",stat:!0},{isNaN:function(e){return e!=e}}),y.Number.isNaN;var hv=Wi?{}.toString:function(){return"[object "+Ff(this)+"]"};Wi||Ta(Object.prototype,"toString",hv,{unsafe:!0});var Fc=y.Promise,Hf=function(e,t,n){for(var r in t)Ta(e,r,t[r],n);return e},Qn=qa("species"),If=function(e){e=mc(e);var t=Ra.f;ka&&e&&!e[Qn]&&t(e,Qn,{configurable:!0,get:function(){return this}})},Gc=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},Jf=function(e,t){this.stopped=e,this.result=t},Xg=function(e,t,n){var r,i=!(!n||!n.AS_ENTRIES),o=!(!n||!n.IS_ITERATOR),a=!(!n||!n.INTERRUPTED),s=Id(t,n&&n.that,1+i+a),c=function(e){return u&&Ui(u),new Jf(!0,e)};if(t=function(e){return i?(va(e),a?s(e[0],e[1],c):s(e[0],e[1])):a?s(e,c):s(e)},o)var u=e;else{if("function"!=typeof(o=Xi(e)))throw TypeError("Target is not iterable");if(Vi(o)){for(o=0,n=ta(e.length);n>o;o++)if((r=t(e[o]))&&r instanceof Jf)return r;return new Jf(!1)}u=o.call(e)}for(e=u.next;!(o=e.call(u)).done;){try{r=t(o.value)}catch(e){throw Ui(u),e}if("object"==typeof r&&r&&r instanceof Jf)return r}return new Jf(!1)},iv=qa("species"),kd=function(e,t){var n;return void 0===(e=va(e).constructor)||null==(n=va(e)[iv])?t:yb(n)},Rn=/(?:iphone|ipod|ipad).*applewebkit/i.test(De),Hc="process"==Zb(y.process),Yg=y.location,ej=y.setImmediate,Sn=y.clearImmediate,jv=y.process,Tn=y.MessageChannel,fj=y.Dispatch,gj=0,Kf={},hj=function(e){if(Kf.hasOwnProperty(e)){var t=Kf[e];delete Kf[e],t()}},ij=function(e){return function(){hj(e)}},Un=function(e){hj(e.data)},Vn=function(e){y.postMessage(e+"",Yg.protocol+"//"+Yg.host)};if(!ej||!Sn)if(ej=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Kf[++gj]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},Lf(gj),gj},Sn=function(e){delete Kf[e]},Hc)var Lf=function(e){jv.nextTick(ij(e))};else if(fj&&fj.now)Lf=function(e){fj.now(ij(e))};else if(Tn&&!Rn){var Wn=new Tn,Xn=Wn.port2;Wn.port1.onmessage=Un,Lf=Id(Xn.postMessage,Xn,1)}else y.addEventListener&&"function"==typeof postMessage&&!y.importScripts&&Yg&&"file:"!==Yg.protocol&&!R(Vn)?(Lf=Vn,y.addEventListener("message",Un,!1)):Lf="onreadystatechange"in(Og?ze.createElement("script"):{})?function(e){Zi.appendChild(Og?ze.createElement("script"):{}).onreadystatechange=function(){Zi.removeChild(this),hj(e)}}:function(e){setTimeout(ij(e),0)};var jj=ej,kv=/web0s(?!.*chrome)/i.test(De),lv=Fb.f,Yn=y.MutationObserver||y.WebKitMutationObserver,Zn=y.document,$n=y.process,Zg=y.Promise,ao=lv(y,"queueMicrotask"),bo=ao&&ao.value,Md,Mf;if(!bo){var ah=function(){var e;for(Hc&&(e=$n.domain)&&e.exit();Md;){var t=Md.fn;Md=Md.next;try{t()}catch(e){throw Md?$g():Mf=void 0,e}}Mf=void 0,e&&e.enter()};if(Rn||Hc||kv||!Yn||!Zn)if(Zg&&Zg.resolve){var kj=Zg.resolve(void 0);kj.constructor=Zg;var mv=kj.then,$g=function(){mv.call(kj,ah)}}else $g=Hc?function(){$n.nextTick(ah)}:function(){jj.call(y,ah)};else{var co=!0,eo=Zn.createTextNode("");new Yn(ah).observe(eo,{characterData:!0}),$g=function(){eo.data=co=!co}}}var fo=bo||function(e){e={fn:e,next:void 0},Mf&&(Mf.next=e),Md||(Md=e,$g()),Mf=e},nv=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=yb(t),this.reject=yb(n)},lj={f:function(e){return new nv(e)}},mj=function(e,t){return va(e),ha(t)&&t.constructor===e?t:((0,(e=lj.f(e)).resolve)(t),e.promise)},ov=function(e,t){var n=y.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))},nj=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},pv="object"==typeof window,qv=qa("species"),go=Za.get,rv=Za.set,sv=Za.getterFor("Promise"),Nd=Fc&&Fc.prototype,_zb=Fc,bh=Nd,ho=y.TypeError,oj=y.document,pj=y.process,He=lj.f,tv=He,uv=!!(oj&&oj.createEvent&&y.dispatchEvent),io="function"==typeof PromiseRejectionEvent,jo=!1,Nf=nc("Promise",(function(){var e=Pi(_zb)!==String(_zb);if(!e&&66===id)return!0;if(51<=id&&/native code/.test(_zb))return!1;var t=new _zb((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(t.constructor={})[qv]=n,!(jo=t.then((function(){}))instanceof n)||!e&&pv&&!io})),vv=Nf||!Tg((function(e){_zb.all(e).catch((function(){}))})),ko=function(e){var t;return!(!ha(e)||"function"!=typeof(t=e.then))&&t},qj=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;fo((function(){for(var r=e.value,i=1==e.state,o=0;n.length>o;){var a,s=n[o++],c=i?s.ok:s.fail,u=s.resolve,l=s.reject,d=s.domain;try{if(c){if(i||(2===e.rejection&&wv(e),e.rejection=1),!0===c)var h=r;else if(d&&d.enter(),h=c(r),d){d.exit();var f=!0}h===s.promise?l(ho("Promise-chain cycle")):(a=ko(h))?a.call(h,u,l):u(h)}else l(r)}catch(e){d&&!f&&d.exit(),l(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&xv(e)}))}},lo=function(e,t,n){var r;if(uv){var i=oj.createEvent("Event");i.promise=t,i.reason=n,i.initEvent(e,!1,!0),y.dispatchEvent(i)}else i={promise:t,reason:n};!io&&(r=y["on"+e])?r(i):"unhandledrejection"===e&&ov("Unhandled promise rejection",n)},xv=function(e){jj.call(y,(function(){var t=e.facade,n=e.value;if(1!==e.rejection&&!e.parent){var r=nj((function(){Hc?pj.emit("unhandledRejection",n,t):lo("unhandledrejection",t,n)}));if(e.rejection=Hc||1!==e.rejection&&!e.parent?2:1,r.error)throw r.value}}))},wv=function(e){jj.call(y,(function(){var t=e.facade;Hc?pj.emit("rejectionHandled",t):lo("rejectionhandled",t,e.value)}))},Ie=function(e,t,n){return function(r){e(t,r,n)}},Je=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,qj(e,!0))},rj=function e(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw ho("Promise can't be resolved itself");var i=ko(n);i?fo((function(){var r={done:!1};try{i.call(n,Ie(e,r,t),Ie(Je,r,t))}catch(n){Je(r,n,t)}})):(t.value=n,t.state=1,qj(t,!1))}catch(n){Je({done:!1},n,t)}}};if(Nf){_zb=function(e){Gc(this,_zb,"Promise"),yb(e),sj.call(this);var t=go(this);try{e(Ie(rj,t),Ie(Je,t))}catch(e){Je(t,e)}},bh=_zb.prototype;var sj=function(e){rv(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})};sj.prototype=Hf(bh,{then:function(e,t){var n=sv(this),r=He(kd(this,_zb));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=Hc?pj.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&qj(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}});var yv=function(){var e=new sj,t=go(e);this.promise=e,this.resolve=Ie(rj,t),this.reject=Ie(Je,t)};if(lj.f=He=function(e){return e===_zb||e===zv?new yv(e):tv(e)},"function"==typeof Fc&&Nd!==Object.prototype){var Av=Nd.then;jo||(Ta(Nd,"then",(function(e,t){var n=this;return new _zb((function(e,t){Av.call(n,e,t)})).then(e,t)}),{unsafe:!0}),Ta(Nd,"catch",bh.catch,{unsafe:!0}));try{delete Nd.constructor}catch(c){}Ua&&Ua(Nd,bh)}}N({global:!0,wrap:!0,forced:Nf},{Promise:_zb}),Ec(_zb,"Promise",!1),If("Promise");var zv=mc("Promise");N({target:"Promise",stat:!0,forced:Nf},{reject:function(e){var t=He(this);return t.reject.call(void 0,e),t.promise}}),N({target:"Promise",stat:!0,forced:Nf},{resolve:function(e){return mj(this,e)}}),N({target:"Promise",stat:!0,forced:vv},{all:function(e){var t=this,n=He(t),r=n.resolve,i=n.reject,o=nj((function(){var n=yb(t.resolve),o=[],a=0,s=1;Xg(e,(function(e){var c=a++,u=!1;o.push(void 0),s++,n.call(t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=He(t),r=n.reject,i=nj((function(){var i=yb(t.resolve);Xg(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var mo=[].indexOf,no=!!mo&&0>1/[1].indexOf(1,-0),Bv=Ee("indexOf");N({target:"Array",proto:!0,forced:no||!Bv},{indexOf:function(e){return no?mo.apply(this,arguments)||0:Si(this,e,1<arguments.length?arguments[1]:void 0)}});var tj=function(){var e=va(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},pc=R((function(){var e=RegExp("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Cv=R((function(){var e=RegExp("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),ch=RegExp.prototype.exec,Dv=fd("native-string-replace",String.prototype.replace),oo=ch,uj=(c=/a/,a=/b*/g,ch.call(c,"a"),ch.call(a,"a"),0!==c.lastIndex||0!==a.lastIndex),po=pc||Cv,vj=void 0!==/()??/.exec("")[1],c,a;(uj||vj||po)&&(oo=function(e){var t,n=po&&this.sticky,r=tj.call(this),i=this.source,o=0,a=e;if(n){-1===(r=r.replace("y","")).indexOf("g")&&(r+="g"),a=String(e).slice(this.lastIndex),0<this.lastIndex&&(!this.multiline||this.multiline&&"\n"!==e[this.lastIndex-1])&&(i="(?: "+i+")",a=" "+a,o++);var s=new RegExp("^(?:"+i+")",r)}if(vj&&(s=new RegExp("^"+i+"$(?!\\s)",r)),uj)var c=this.lastIndex;var u=ch.call(n?s:this,a);return n?u?(u.input=u.input.slice(o),u[0]=u[0].slice(o),u.index=this.lastIndex,this.lastIndex+=u[0].length):this.lastIndex=0:uj&&u&&(this.lastIndex=this.global?u.index+u[0].length:c),vj&&u&&1<u.length&&Dv.call(u[0],s,(function(){for(t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(u[t]=void 0)})),u});var Of=oo;N({target:"RegExp",proto:!0,forced:/./.exec!==Of},{exec:Of});var Ev=qa("species"),wj=RegExp.prototype,Fv=!R((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),qo="$0"==="a".replace(/./,"$0"),ro=qa("replace"),so=!!/./[ro]&&""===/./[ro]("a","$0"),Gv=!R((function(){var e=/(?:)/,t=e.exec;return e.exec=function(){return t.apply(this,arguments)},2!==(e="ab".split(e)).length||"a"!==e[0]||"b"!==e[1]})),dh=function(e,t,n,r){var i=qa(e),o=!R((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),a=o&&!R((function(){var t=!1,n=/a/;return"split"===e&&((n={constructor:{}}).constructor[Ev]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!o||!a||"replace"===e&&(!Fv||!qo||so)||"split"===e&&!Gv){var s=/./[i],c=(n=n(i,""[e],(function(e,t,n,r,i){var a=t.exec;return a===Of||a===wj.exec?o&&!i?{done:!0,value:s.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:qo,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:so}))[1];Ta(String.prototype,e,n[0]),Ta(wj,i,2==t?function(e,t){return c.call(e,this,t)}:function(e){return c.call(e,this)})}r&&Na(wj[i],"sham",!0)},xj=function(e,t,n){return t+(n?Gn(e,t).length:1)},Hv=Math.floor,Iv="".replace,Jv=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Kv=/\$([$&'`]|\d{1,2})/g,Lv=function(e,t,n,r,i,o){var a=n+e.length,s=r.length,c=Kv;return void 0!==i&&(i=Qa(i),c=Jv),Iv.call(o,c,(function(o,c){switch(c.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(a);case"<":o=i[c.slice(1,-1)];break;default:var u=+c;if(0===u)return o;if(u>s)return 0===(u=Hv(u/10))?o:u<=s?void 0===r[u-1]?c.charAt(1):r[u-1]+c.charAt(1):o;o=r[u-1]}return void 0===o?"":o}))},Ke=function(e,t){var n=e.exec;if("function"==typeof n){if("object"!=typeof(e=n.call(e,t)))throw TypeError("RegExp exec method returned something other than an Object or null");return e}if("RegExp"!==Zb(e))throw TypeError("RegExp#exec called on incompatible receiver");return Of.call(e,t)},Mv=Math.max,Nv=Math.min,Ov=function(e){return void 0===e?e:String(e)};dh("replace",2,(function(e,t,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=r.REPLACE_KEEPS_$0,a=i?"$":"$0";return[function(n,r){var i=jb(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!i&&o||"string"==typeof r&&-1===r.indexOf(a)){var s=n(t,e,this,r);if(s.done)return s.value}var c=va(e);e=String(this),(s="function"==typeof r)||(r=String(r));var u=c.global;if(u){var l=c.unicode;c.lastIndex=0}for(var d=[];;){var h=Ke(c,e);if(null===h)break;if(d.push(h),!u)break;""===String(h[0])&&(c.lastIndex=xj(e,ta(c.lastIndex),l))}for(l="",u=c=0;u<d.length;u++){h=d[u];for(var f=String(h[0]),p=Mv(Nv($b(h.index),e.length),0),v=[],g=1;g<h.length;g++)v.push(Ov(h[g]));h=h.groups,s?(v=[f].concat(v,p,e),void 0!==h&&v.push(h),h=String(r.apply(void 0,v))):h=Lv(f,e,p,v,h,r),p>=c&&(l+=e.slice(c,p)+h,c=p+f.length)}return l+e.slice(c)}]}));var Pv=Ef("slice"),Qv=qa("species"),Rv=[].slice,Sv=Math.max;N({target:"Array",proto:!0,forced:!Pv},{slice:function(e,t){var n=qb(this),r=ta(n.length);if(e=xb(e,r),t=xb(void 0===t?r:t,r),gd(n)){var i=n.constructor;if("function"!=typeof i||i!==Array&&!gd(i.prototype)?ha(i)&&null===(i=i[Qv])&&(i=void 0):i=void 0,i===Array||void 0===i)return Rv.call(n,e,t)}for(i=new(void 0===i?Array:i)(Sv(t-e,0)),r=0;e<t;e++,r++)e in n&&Ge(i,r,n[e]);return i.length=r,i}});var Tv=Za.set,Uv=Za.getterFor("Array Iterator"),ld=bj(Array,"Array",(function(e,t){Tv(this,{type:"Array Iterator",target:qb(e),index:0,kind:t})}),(function(){var e=Uv(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");Fe.Arguments=Fe.Array,Ld("keys"),Ld("values"),Ld("entries");var to="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Le=function(e){if(void 0===e)return 0;e=$b(e);var t=ta(e);if(e!==t)throw RangeError("Wrong length or index");return t},Vv=Math.abs,Ic=Math.pow,Wv=Math.floor,Xv=Math.log,Yv=Math.LN2,yj=function(e){var t=Qa(this),n=ta(t.length),r=arguments.length,i=xb(1<r?arguments[1]:void 0,n);for(n=void 0===(r=2<r?arguments[2]:void 0)?n:xb(r,n);n>i;)t[i++]=e;return t},Zv=Hd.f,$v=Ra.f,Me=Za.get,uo=Za.set,bc=y.ArrayBuffer,_Ab2=bc,_cc=y.DataView,eh=_cc&&_cc.prototype,vo=Object.prototype,fh=y.RangeError,wo=function(e,t,n){var r,i=Array(n),o=(1<<(n=8*n-t-1))-1,a=o>>1,s=23===t?Ic(2,-24)-Ic(2,-77):0,c=0>e||0===e&&0>1/e?1:0,u=0;if((e=Vv(e))!=e||1/0===e){e=e!=e?1:0;var l=o}else l=Wv(Xv(e)/Yv),1>e*(r=Ic(2,-l))&&(l--,r*=2),2<=(e=1<=l+a?e+s/r:e+s*Ic(2,1-a))*r&&(l++,r/=2),l+a>=o?(e=0,l=o):1<=l+a?(e=(e*r-1)*Ic(2,t),l+=a):(e=e*Ic(2,a-1)*Ic(2,t),l=0);for(;8<=t;i[u++]=255&e,e/=256,t-=8);for(l=l<<t|e,n+=t;0<n;i[u++]=255&l,l/=256,n-=8);return i[--u]|=128*c,i},xo=function(e,t){var n=e.length,r=8*n-t-1,i=(1<<r)-1,o=i>>1;r-=7,--n;var a=e[n--],s=127&a;for(a>>=7;0<r;s=256*s+e[n],n--,r-=8);var c=s&(1<<-r)-1;for(s>>=-r,r+=t;0<r;c=256*c+e[n],n--,r-=8);if(0===s)s=1-o;else{if(s===i)return c?NaN:a?-1/0:1/0;c+=Ic(2,t),s-=o}return(a?-1:1)*c*Ic(2,s-t)},yo=function(e){return[255&e]},zo=function(e){return[255&e,e>>8&255]},Ao=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Bo=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},aw=function(e){return wo(e,23,4)},bw=function(e){return wo(e,52,8)},gh=function(e,t){$v(e.prototype,t,{get:function(){return Me(this)[t]}})},md=function(e,t,n,r){n=Le(n);var i=Me(e);if(n+t>i.byteLength)throw fh("Wrong index");return e=Me(i.buffer).bytes,n+=i.byteOffset,t=e.slice(n,n+t),r?t:t.reverse()},nd=function(e,t,n,r,i,o){n=Le(n);var a=Me(e);if(n+t>a.byteLength)throw fh("Wrong index");for(e=Me(a.buffer).bytes,n+=a.byteOffset,r=r(+i),i=0;i<t;i++)e[n+i]=r[o?i:t-i-1]};if(to){if(!R((function(){bc(1)}))||!R((function(){new bc(-1)}))||R((function(){return new bc,new bc(1.5),new bc(NaN),"ArrayBuffer"!=bc.name}))){_Ab2=function(e){return Gc(this,_Ab2),new bc(Le(e))};for(var cw=_Ab2.prototype=bc.prototype,Co=Zv(bc),Do=0,zj;Co.length>Do;)(zj=Co[Do++])in _Ab2||Na(_Ab2,zj,bc[zj]);cw.constructor=_Ab2}Ua&&Vb(eh)!==vo&&Ua(eh,vo);var hh=new _cc(new _Ab2(2)),Eo=eh.setInt8;hh.setInt8(0,2147483648),hh.setInt8(1,2147483649),!hh.getInt8(0)&&hh.getInt8(1)||Hf(eh,{setInt8:function(e,t){Eo.call(this,e,t<<24>>24)},setUint8:function(e,t){Eo.call(this,e,t<<24>>24)}},{unsafe:!0})}else _Ab2=function(e){Gc(this,_Ab2,"ArrayBuffer"),e=Le(e),uo(this,{bytes:yj.call(Array(e),0),byteLength:e}),ka||(this.byteLength=e)},_cc=function(e,t,n){Gc(this,_cc,"DataView"),Gc(e,_Ab2,"DataView");var r=Me(e).byteLength;if(0>(t=$b(t))||t>r)throw fh("Wrong offset");if(t+(n=void 0===n?r-t:ta(n))>r)throw fh("Wrong length");uo(this,{buffer:e,byteLength:n,byteOffset:t}),ka||(this.buffer=e,this.byteLength=n,this.byteOffset=t)},ka&&(gh(_Ab2,"byteLength"),gh(_cc,"buffer"),gh(_cc,"byteLength"),gh(_cc,"byteOffset")),Hf(_cc.prototype,{getInt8:function(e){return md(this,1,e)[0]<<24>>24},getUint8:function(e){return md(this,1,e)[0]},getInt16:function(e){var t=md(this,2,e,1<arguments.length?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=md(this,2,e,1<arguments.length?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return Bo(md(this,4,e,1<arguments.length?arguments[1]:void 0))},getUint32:function(e){return Bo(md(this,4,e,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(e){return xo(md(this,4,e,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(e){return xo(md(this,8,e,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(e,t){nd(this,1,e,yo,t)},setUint8:function(e,t){nd(this,1,e,yo,t)},setInt16:function(e,t){nd(this,2,e,zo,t,2<arguments.length?arguments[2]:void 0)},setUint16:function(e,t){nd(this,2,e,zo,t,2<arguments.length?arguments[2]:void 0)},setInt32:function(e,t){nd(this,4,e,Ao,t,2<arguments.length?arguments[2]:void 0)},setUint32:function(e,t){nd(this,4,e,Ao,t,2<arguments.length?arguments[2]:void 0)},setFloat32:function(e,t){nd(this,4,e,aw,t,2<arguments.length?arguments[2]:void 0)},setFloat64:function(e,t){nd(this,8,e,bw,t,2<arguments.length?arguments[2]:void 0)}});Ec(_Ab2,"ArrayBuffer"),Ec(_cc,"DataView");var Pf={ArrayBuffer:_Ab2,DataView:_cc},Aj=Pf.ArrayBuffer,Fo=Pf.DataView,Go=Aj.prototype.slice,dw=R((function(){return!new Aj(2).slice(1,void 0).byteLength}));N({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:dw},{slice:function(e,t){if(void 0!==Go&&void 0===t)return Go.call(va(this),e);var n=va(this).byteLength;e=xb(e,n),t=xb(void 0===t?n:t,n),n=new(kd(this,Aj))(ta(t-e));for(var r=new Fo(this),i=new Fo(n),o=0;e<t;)i.setUint8(o++,r.getUint8(e++));return n}});var ew=Ra.f,ih=y.Int8Array,Bj=ih&&ih.prototype,Ho=y.Uint8ClampedArray,Io=Ho&&Ho.prototype,qc=ih&&Vb(ih),dc=Bj&&Vb(Bj),Jo=Object.prototype,Ko=Jo.isPrototypeOf,Lo=qa("toStringTag"),Cj=Ae("TYPED_ARRAY_TAG"),Jc=to&&!!Ua&&"Opera"!==Ff(y.opera),Mo=!1,Bb,rc={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},fw={BigInt64Array:8,BigUint64Array:8},jh=function(e){return!!ha(e)&&(e=Ff(e),Q(rc,e)||Q(fw,e))};for(Bb in rc)y[Bb]||(Jc=!1);if((!Jc||"function"!=typeof qc||qc===Function.prototype)&&(qc=function(){throw TypeError("Incorrect invocation")},Jc))for(Bb in rc)y[Bb]&&Ua(y[Bb],qc);if((!Jc||!dc||dc===Jo)&&(dc=qc.prototype,Jc))for(Bb in rc)y[Bb]&&Ua(y[Bb].prototype,dc);if(Jc&&Vb(Io)!==dc&&Ua(Io,dc),ka&&!Q(dc,Lo))for(Bb in Mo=!0,ew(dc,Lo,{get:function(){return ha(this)?this[Cj]:void 0}}),rc)y[Bb]&&Na(y[Bb],Cj,Bb);var Qf=Jc,No=Mo&&Cj,Da=function(e){if(jh(e))return e;throw TypeError("Target is not a typed array")},Ne=function(e){if(Ua){if(Ko.call(qc,e))return e}else for(var t in rc)if(Q(rc,Bb)){var n=y[t];if(n&&(e===n||Ko.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},Aa=function(e,t,n){if(ka){if(n)for(var r in rc){var i=y[r];if(i&&Q(i.prototype,e))try{delete i.prototype[e]}catch(e){}}dc[e]&&!n||Ta(dc,e,n?t:Jc&&Bj[e]||t)}},Oo=function(e,t,n){var r,i;if(ka){if(Ua){if(n)for(r in rc)if((i=y[r])&&Q(i,e))try{delete i[e]}catch(e){}if(qc[e]&&!n)return;try{return Ta(qc,e,n?t:Jc&&qc[e]||t)}catch(e){}}for(r in rc)!(i=y[r])||i[e]&&!n||Ta(i,e,t)}},Po=qc,Rf=dc,gw=y.ArrayBuffer,Od=y.Int8Array,Dj=!Qf||!R((function(){Od(1)}))||!R((function(){new Od(-1)}))||!Tg((function(e){new Od,new Od(null),new Od(1.5),new Od(e)}),!0)||R((function(){return 1!==new Od(new gw(2),1,void 0).length})),kh=function(e,t){if(0>(e=$b(e)))throw RangeError("The argument can't be less than 0");if(e%t)throw RangeError("Wrong offset");return e},Ej=function(e){var t=Qa(e),n=arguments.length,r=1<n?arguments[1]:void 0,i=void 0!==r,o=Xi(t);if(null!=o&&!Vi(o)){var a=o.call(t),s=a.next;for(t=[];!(o=s.call(a)).done;)t.push(o.value)}for(i&&2<n&&(r=Id(r,arguments[2],2)),o=ta(t.length),a=new(Ne(this))(o),n=0;o>n;n++)a[n]=i?r(t[n],n):t[n];return a},lh=function(e,t,n){var r,i;return Ua&&"function"==typeof(r=t.constructor)&&r!==n&&ha(i=r.prototype)&&i!==n.prototype&&Ua(e,i),e},Sf=$a((function(e){var t=Hd.f,n=Za.get,r=Za.set,i=Ra.f,o=Fb.f,a=Math.round,s=y.RangeError,c=Pf.ArrayBuffer,u=Pf.DataView,l=function(e,t){var n=0,r=t.length;for(e=new(Ne(e))(r);r>n;)e[n]=t[n++];return e},d=function(e,t){i(e,t,{get:function(){return n(this)[t]}})},h=function(e){var t;return e instanceof c||"ArrayBuffer"==(t=Ff(e))||"SharedArrayBuffer"==t},f=function(e,t){return jh(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},p=function(e,t){return f(e,t=lc(t,!0))?dd(2,e[t]):o(e,t)},v=function(e,t,n){return!(f(e,t=lc(t,!0))&&ha(n)&&Q(n,"value"))||Q(n,"get")||Q(n,"set")||n.configurable||Q(n,"writable")&&!n.writable||Q(n,"enumerable")&&!n.enumerable?i(e,t,n):(e[t]=n.value,e)};ka?(Qf||(Fb.f=p,Ra.f=v,d(Rf,"buffer"),d(Rf,"byteOffset"),d(Rf,"byteLength"),d(Rf,"length")),N({target:"Object",stat:!0,forced:!Qf},{getOwnPropertyDescriptor:p,defineProperty:v}),e.exports=function(e,o,d){var f=e.match(/\d+$/)[0]/8,p=e+(d?"Clamped":"")+"Array",v="get"+e,g="set"+e,m=y[p],b=m;e=b&&b.prototype;var _={},E=function(e,t){i(e,t,{get:function(){var e=n(this);return e.view[v](t*f+e.byteOffset,!0)},set:function(e){var r=n(this);d&&(e=0>(e=a(e))?0:255<e?255:255&e),r.view[g](t*f+r.byteOffset,e,!0)},enumerable:!0})};Qf?Dj&&(b=o((function(e,t,n,r){return Gc(e,b,p),lh(ha(t)?h(t)?void 0!==r?new m(t,kh(n,f),r):void 0!==n?new m(t,kh(n,f)):new m(t):jh(t)?l(b,t):Ej.call(b,t):new m(Le(t)),e,b)})),Ua&&Ua(b,Po),Jd(t(m),(function(e){e in b||Na(b,e,m[e])})),b.prototype=e):(b=o((function(e,t,n,i){Gc(e,b,p);var o=0,a=0;if(ha(t)){if(!h(t))return jh(t)?l(b,t):Ej.call(b,t);var d=t;if(a=kh(n,f),t=t.byteLength,void 0===i){if(t%f)throw s("Wrong length");if(0>(i=t-a))throw s("Wrong length")}else if((i=ta(i)*f)+a>t)throw s("Wrong length");t=i/f}else t=Le(t),d=new c(i=t*f);for(r(e,{buffer:d,byteOffset:a,byteLength:i,length:t,view:new u(d)});o<t;)E(e,o++)})),Ua&&Ua(b,Po),e=b.prototype=ac(Rf)),e.constructor!==b&&Na(e,"constructor",b),No&&Na(e,No,p),_[p]=b,N({global:!0,forced:b!=m,sham:!Qf},_),"BYTES_PER_ELEMENT"in b||Na(b,"BYTES_PER_ELEMENT",f),"BYTES_PER_ELEMENT"in e||Na(e,"BYTES_PER_ELEMENT",f),If(p)}):e.exports=function(){}}));Sf("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var hw=Math.min,iw=[].copyWithin||function(e,t){var n=Qa(this),r=ta(n.length),i=xb(e,r),o=xb(t,r),a=2<arguments.length?arguments[2]:void 0;for(r=hw((void 0===a?r:xb(a,r))-o,r-i),a=1,o<i&&i<o+r&&(a=-1,o+=r-1,i+=r-1);0<r--;)o in n?n[i]=n[o]:delete n[i],i+=a,o+=a;return n};Aa("copyWithin",(function(e,t){return iw.call(Da(this),e,t,2<arguments.length?arguments[2]:void 0)})),Aa("every",(function(e){return Ju(Da(this),e,1<arguments.length?arguments[1]:void 0)})),Aa("fill",(function(e){return yj.apply(Da(this),arguments)})),Aa("filter",(function(e){var t=yn(Da(this),e,1<arguments.length?arguments[1]:void 0),n=kd(this,this.constructor),r=0,i=t.length;for(n=new(Ne(n))(i);i>r;)n[r]=t[r++];return n})),Aa("find",(function(e){return zn(Da(this),e,1<arguments.length?arguments[1]:void 0)})),Aa("findIndex",(function(e){return An(Da(this),e,1<arguments.length?arguments[1]:void 0)})),Aa("forEach",(function(e){Jd(Da(this),e,1<arguments.length?arguments[1]:void 0)})),Aa("includes",(function(e){return on(Da(this),e,1<arguments.length?arguments[1]:void 0)})),Aa("indexOf",(function(e){return Si(Da(this),e,1<arguments.length?arguments[1]:void 0)}));var Qo=qa("iterator"),Ro=y.Uint8Array,jw=ld.values,kw=ld.keys,lw=ld.entries,Fj=Ro&&Ro.prototype[Qo],So=!!Fj&&("values"==Fj.name||null==Fj.name),To=function(){return jw.call(Da(this))};Aa("entries",(function(){return lw.call(Da(this))})),Aa("keys",(function(){return kw.call(Da(this))})),Aa("values",To,!So),Aa(Qo,To,!So);var mw=[].join;Aa("join",(function(e){return mw.apply(Da(this),arguments)}));var nw=Math.min,Gj=[].lastIndexOf,Uo=!!Gj&&0>1/[1].lastIndexOf(1,-0),ow=Ee("lastIndexOf"),pw=Uo||!ow?function(e){if(Uo)return Gj.apply(this,arguments)||0;var t=qb(this),n=ta(t.length),r=n-1;for(1<arguments.length&&(r=nw(r,$b(arguments[1]))),0>r&&(r=n+r);0<=r;r--)if(r in t&&t[r]===e)return r||0;return-1}:Gj;Aa("lastIndexOf",(function(e){return pw.apply(Da(this),arguments)})),Aa("map",(function(e){return xn(Da(this),e,1<arguments.length?arguments[1]:void 0,(function(e,t){return new(Ne(kd(e,e.constructor)))(t)}))}));var Vo=function(e){return function(t,n,r,i){yb(n),t=Qa(t);var o=Af(t),a=ta(t.length),s=e?a-1:0,c=e?-1:1;if(2>r)for(;;){if(s in o){i=o[s],s+=c;break}if(s+=c,e?0>s:a<=s)throw TypeError("Reduce of empty array with no initial value")}for(;e?0<=s:a>s;s+=c)s in o&&(i=n(i,o[s],s,t));return i}},Wo=Vo(!1),qw=Vo(!0);Aa("reduce",(function(e){return Wo(Da(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)})),Aa("reduceRight",(function(e){return qw(Da(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)}));var rw=Math.floor;Aa("reverse",(function(){for(var e,t=Da(this).length,n=rw(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}));var sw=R((function(){new Int8Array(1).set({})}));Aa("set",(function(e){Da(this);var t=kh(1<arguments.length?arguments[1]:void 0,1),n=this.length,r=Qa(e),i=ta(r.length),o=0;if(i+t>n)throw RangeError("Wrong length");for(;o<i;)this[t+o]=r[o++]}),sw);var tw=[].slice,uw=R((function(){new Int8Array(1).slice()}));Aa("slice",(function(e,t){e=tw.call(Da(this),e,t);var n=kd(this,this.constructor);t=0;var r=e.length;for(n=new(Ne(n))(r);r>t;)n[t]=e[t++];return n}),uw),Aa("some",(function(e){return Iu(Da(this),e,1<arguments.length?arguments[1]:void 0)}));var vw=[].sort;Aa("sort",(function(e){return vw.call(Da(this),e)})),Aa("subarray",(function(e,t){var n=Da(this),r=n.length;return e=xb(e,r),new(kd(n,n.constructor))(n.buffer,n.byteOffset+e*n.BYTES_PER_ELEMENT,ta((void 0===t?r:xb(t,r))-e))}));var mh=y.Int8Array,Xo=[].toLocaleString,ww=[].slice,xw=!!mh&&R((function(){Xo.call(new mh(1))})),yw=R((function(){return[1,2].toLocaleString()!=new mh([1,2]).toLocaleString()}))||!R((function(){mh.prototype.toLocaleString.call([1,2])}));Aa("toLocaleString",(function(){return Xo.apply(xw?ww.call(Da(this)):Da(this),arguments)}),yw);var Yo=y.Uint8Array,zw=Yo&&Yo.prototype||{},nh=[].toString,Aw=[].join;R((function(){nh.call({})}))&&(nh=function(){return Aw.call(this)}),Aa("toString",nh,zw.toString!=nh);var Zo=Pf.ArrayBuffer;N({global:!0,forced:y.ArrayBuffer!==Zo},{ArrayBuffer:Zo}),If("ArrayBuffer");var Bw=Ra.f,Hj=Function.prototype,Cw=Hj.toString,Dw=/^\s*function ([^ (]*)/;!ka||"name"in Hj||Bw(Hj,"name",{configurable:!0,get:function(){try{return Cw.call(this).match(Dw)[1]}catch(e){return""}}});var $o=RegExp.prototype,ap=$o.toString,Ew=R((function(){return"/a/b"!=ap.call({source:"a",flags:"b"})})),Fw="toString"!=ap.name;(Ew||Fw)&&Ta(RegExp.prototype,"toString",(function(){var e=va(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in $o)?tj.call(e):n)}),{unsafe:!0});var Gw=Ef("splice"),Hw=Math.max,Iw=Math.min;N({target:"Array",proto:!0,forced:!Gw},{splice:function(e,t){var n,r,i=Qa(this),o=ta(i.length),a=xb(e,o),s=arguments.length;if(0===s?s=n=0:1===s?(s=0,n=o-a):(s-=2,n=Iw(Hw($b(t),0),o-a)),9007199254740991<o+s-n)throw TypeError("Maximum allowed length exceeded");var c=Sg(i,n);for(r=0;r<n;r++){var u=a+r;u in i&&Ge(c,r,i[u])}if(c.length=n,s<n){for(r=a;r<o-n;r++){var l=r+s;(u=r+n)in i?i[l]=i[u]:delete i[l]}for(r=o;r>o-n+s;r--)delete i[r-1]}else if(s>n)for(r=o-n;r>a;r--)l=r+s-1,(u=r+n-1)in i?i[l]=i[u]:delete i[l];for(r=0;r<s;r++)i[r+a]=arguments[r+2];return i.length=o-n+s,c}});var Ij={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Jj=qa("iterator"),bp=qa("toStringTag"),Kj=ld.values,oh;for(oh in Ij){var cp=y[oh],Kc=cp&&cp.prototype;if(Kc){if(Kc[Jj]!==Kj)try{Na(Kc,Jj,Kj)}catch(c){Kc[Jj]=Kj}if(Kc[bp]||Na(Kc,bp,oh),Ij[oh])for(var Oe in ld)if(Kc[Oe]!==ld[Oe])try{Na(Kc,Oe,ld[Oe])}catch(c){Kc[Oe]=ld[Oe]}}}var dp=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};dh("search",1,(function(e,t,n){return[function(t){var n=jb(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;e=va(e);var i=String(this);return r=e.lastIndex,dp(r,0)||(e.lastIndex=0),i=Ke(e,i),dp(e.lastIndex,r)||(e.lastIndex=r),null===i?-1:i.index}]})),$a((function(e){!function(t,n){e.exports?e.exports=n(t):n(t)}("undefined"!=typeof self?self:Ya,(function(e){function t(e){return btoa(e).replace(/=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function n(e){return e=(e+="===").slice(0,-e.length%4),atob(e.replace(/-/g,"+").replace(/_/g,"/"))}function r(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function i(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),String.fromCharCode.apply(String,e)}function o(e){var t={name:(e.name||e||"").toUpperCase().replace("V","v")};switch(t.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":e.length&&(t.length=e.length);break;case"HMAC":e.hash&&(t.hash=o(e.hash)),e.length&&(t.length=e.length);break;case"RSAES-PKCS1-v1_5":e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":e.hash&&(t.hash=o(e.hash)),e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return t}function a(e){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[e.name][(e.hash||{}).name||e.length||""]}function s(e){(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=JSON.parse(decodeURIComponent(escape(i(e)))));var t={kty:e.kty,alg:e.alg,ext:e.ext||e.extractable};switch(t.kty){case"oct":t.k=e.k;case"RSA":"n e d p q dp dq qi oth".split(" ").forEach((function(n){n in e&&(t[n]=e[n])}));break;default:throw new TypeError("Unsupported key type")}return t}function c(e){var n=u(e),r=!1;if("1.2.840.113549.1.1.1"!==(2<n.length&&(r=!0,n.shift()),e={ext:!0},n[0][0]))throw new TypeError("Unsupported key type");var o="n e d p q dp dq qi".split(" ");for(n=u(n[1]),r&&n.shift(),r=0;r<n.length;r++)n[r][0]||(n[r]=n[r].subarray(1)),e[o[r]]=t(i(n[r]));return e.kty="RSA",e}function u(e,t){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t||(t={pos:0,end:e.length}),2>t.end-t.pos||t.end>e.length)throw new RangeError("Malformed DER");var n=e[t.pos++],r=e[t.pos++];if(128<=r){if(r&=127,t.end-t.pos<r)throw new RangeError("Malformed DER");for(var o=0;r--;)o<<=8,o|=e[t.pos++];r=o}if(t.end-t.pos<r)throw new RangeError("Malformed DER");switch(n){case 2:n=e.subarray(t.pos,t.pos+=r);break;case 3:if(e[t.pos++])throw Error("Unsupported bit string");r--;case 4:n=new Uint8Array(e.subarray(t.pos,t.pos+=r)).buffer;break;case 5:n=null;break;case 6:if(!((e=btoa(i(e.subarray(t.pos,t.pos+=r))))in E))throw Error("Unsupported OBJECT ID "+e);n=E[e];break;case 48:for(n=[],r=t.pos+r;t.pos<r;)n.push(u(e,t));break;default:throw Error("Unsupported DER tag 0x"+n.toString(16))}return n}function l(e,t){t||(t=[]);var n=t.length+2;if(t.push(0,0),e instanceof Uint8Array)for(var i=2,o=e.length,a=0;a<o;a++)t.push(e[a]);else if(e instanceof ArrayBuffer)for(i=4,o=e.byteLength,e=new Uint8Array(e),a=0;a<o;a++)t.push(e[a]);else if(null===e)i=5,o=0;else if("string"==typeof e&&e in S)for(i=6,o=(e=r(atob(S[e]))).length,a=0;a<o;a++)t.push(e[a]);else if(e instanceof Array){for(a=0;a<e.length;a++)l(e[a],t);i=48,o=t.length-n}else{if(!("object"===X(e)&&3===e.tag&&e.value instanceof ArrayBuffer))throw Error("Unsupported DER value "+e);for(i=3,o=(e=new Uint8Array(e.value)).byteLength,t.push(0),a=0;a<o;a++)t.push(e[a]);o++}if(128<=o){for(a=o,o=4,t.splice(n,0,a>>24&255,a>>16&255,a>>8&255,255&a);1<o&&!(a>>24);)a<<=8,o--;4>o&&t.splice(n,4-o),o|=128}return t.splice(n-2,2,i,o),t}function d(e,t,n,r){Object.defineProperties(this,{_key:{value:e},type:{value:e.type,enumerable:!0},extractable:{value:void 0===n?e.extractable:n,enumerable:!0},algorithm:{value:void 0===t?e.algorithm:t,enumerable:!0},usages:{value:void 0===r?e.usages:r,enumerable:!0}})}function h(e){return"verify"===e||"encrypt"===e||"wrapKey"===e}function f(e){return"sign"===e||"decrypt"===e||"unwrapKey"===e}if("function"!=typeof Promise)throw"Promise support required";var p=e.crypto||e.msCrypto;if(p){var v=p.subtle||p.webkitSubtle;if(v){var g=e.Crypto||p.constructor||Object,m=e.SubtleCrypto||v.constructor||Object;e.CryptoKey||e.Key;var y=-1<e.navigator.userAgent.indexOf("Edge/"),b=!!e.msCrypto&&!y,_=!p.subtle&&!!p.webkitSubtle;if(b||_){var E={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},S={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach((function(e){var t=v[e];v[e]=function(i,u,l){var g=[].slice.call(arguments);switch(e){case"generateKey":var m=o(i),y=u,E=l;break;case"importKey":m=o(l),y=g[3],E=g[4],"jwk"===i&&((u=s(u)).alg||(u.alg=a(m)),u.key_ops||(u.key_ops="oct"!==u.kty?"d"in u?E.filter(f):E.filter(h):E.slice()),g[1]=function(e){return e=s(e),b&&(e.extractable=e.ext,delete e.ext),r(unescape(encodeURIComponent(JSON.stringify(e)))).buffer}(u));break;case"unwrapKey":m=g[4],y=g[5],E=g[6],g[2]=l._key}if("generateKey"===e&&"HMAC"===m.name&&m.hash)return m.length=m.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[m.hash.name],v.importKey("raw",p.getRandomValues(new Uint8Array(m.length+7>>3)),m,y,E);if(_&&"generateKey"===e&&"RSASSA-PKCS1-v1_5"===m.name&&(!m.modulusLength||2048<=m.modulusLength))return(i=o(i)).name="RSAES-PKCS1-v1_5",delete i.hash,v.generateKey(i,!0,["encrypt","decrypt"]).then((function(e){return Promise.all([v.exportKey("jwk",e.publicKey),v.exportKey("jwk",e.privateKey)])})).then((function(e){return e[0].alg=e[1].alg=a(m),e[0].key_ops=E.filter(h),e[1].key_ops=E.filter(f),Promise.all([v.importKey("jwk",e[0],m,!0,e[0].key_ops),v.importKey("jwk",e[1],m,y,e[1].key_ops)])})).then((function(e){return{publicKey:e[0],privateKey:e[1]}}));if((_||b&&"SHA-1"===(m.hash||{}).name)&&"importKey"===e&&"jwk"===i&&"HMAC"===m.name&&"oct"===u.kty)return v.importKey("raw",r(n(u.k)),l,g[3],g[4]);if(_&&"importKey"===e&&("spki"===i||"pkcs8"===i))return v.importKey("jwk",c(u),l,g[3],g[4]);if(b&&"unwrapKey"===e)return v.decrypt(g[3],l,u).then((function(e){return v.importKey(i,e,g[4],g[5],g[6])}));try{var S=t.apply(v,g)}catch(e){return Promise.reject(e)}return b&&(S=new Promise((function(e,t){S.onabort=S.onerror=function(e){t(e)},S.oncomplete=function(t){e(t.target.result)}}))),S=S.then((function(e){return"HMAC"!==m.name||m.length||(m.length=8*e.algorithm.length),0==m.name.search("RSA")&&(m.modulusLength||(m.modulusLength=(e.publicKey||e).algorithm.modulusLength),m.publicExponent||(m.publicExponent=(e.publicKey||e).algorithm.publicExponent)),e.publicKey&&e.privateKey?{publicKey:new d(e.publicKey,m,y,E.filter(h)),privateKey:new d(e.privateKey,m,y,E.filter(f))}:new d(e,m,y,E)}))}})),["exportKey","wrapKey"].forEach((function(e){var o=v[e];v[e]=function(c,u,d){var p=[].slice.call(arguments);switch(e){case"exportKey":p[1]=u._key;break;case"wrapKey":p[1]=u._key,p[2]=d._key}if((_||b&&"SHA-1"===(u.algorithm.hash||{}).name)&&"exportKey"===e&&"jwk"===c&&"HMAC"===u.algorithm.name&&(p[0]="raw"),!_||"exportKey"!==e||"spki"!==c&&"pkcs8"!==c||(p[0]="jwk"),b&&"wrapKey"===e)return v.exportKey(c,u).then((function(e){return"jwk"===c&&(e=r(unescape(encodeURIComponent(JSON.stringify(s(e)))))),v.encrypt(p[3],d,e)}));try{var g=o.apply(v,p)}catch(e){return Promise.reject(e)}return b&&(g=new Promise((function(e,t){g.onabort=g.onerror=function(e){t(e)},g.oncomplete=function(t){e(t.target.result)}}))),"exportKey"===e&&"jwk"===c&&(g=g.then((function(e){return(_||b&&"SHA-1"===(u.algorithm.hash||{}).name)&&"HMAC"===u.algorithm.name?{kty:"oct",alg:a(u.algorithm),key_ops:u.usages.slice(),ext:!0,k:t(i(e))}:((e=s(e)).alg||(e.alg=a(u.algorithm)),e.key_ops||(e.key_ops="public"===u.type?u.usages.filter(h):"private"===u.type?u.usages.filter(f):u.usages.slice()),e)}))),!_||"exportKey"!==e||"spki"!==c&&"pkcs8"!==c||(g=g.then((function(e){var t=[["",null]],i=!1;if("RSA"!==(e=s(e)).kty)throw new TypeError("Unsupported key type");for(var o="n e d p q dp dq qi".split(" "),a=[],c=0;c<o.length&&o[c]in e;c++){var u=a[c]=r(n(e[o[c]]));128&u[0]&&(a[c]=new Uint8Array(u.length+1),a[c].set(u,1))}return 2<a.length&&(i=!0,a.unshift(new Uint8Array([0]))),t[0][0]="1.2.840.113549.1.1.1",t.push(new Uint8Array(l(a)).buffer),i?t.unshift(new Uint8Array([0])):t[1]={tag:3,value:t[1]},new Uint8Array(l(t)).buffer}))),g}})),["encrypt","decrypt","sign","verify"].forEach((function(e){var t=v[e];v[e]=function(n,r,i,a){if(b&&(!i.byteLength||a&&!a.byteLength))throw Error("Empty input is not allowed");var s=[].slice.call(arguments),c=o(n);if(!b||"sign"!==e&&"verify"!==e||"RSASSA-PKCS1-v1_5"!==n&&"HMAC"!==n||(s[0]={name:n}),b&&r.algorithm.hash&&(s[0].hash=s[0].hash||r.algorithm.hash),b&&"decrypt"===e&&"AES-GCM"===c.name){var u=n.tagLength>>3;s[2]=(i.buffer||i).slice(0,i.byteLength-u),n.tag=(i.buffer||i).slice(i.byteLength-u)}b&&"AES-GCM"===c.name&&void 0===s[0].tagLength&&(s[0].tagLength=128),s[1]=r._key;try{var l=t.apply(v,s)}catch(e){return Promise.reject(e)}return b&&(l=new Promise((function(t,n){l.onabort=l.onerror=function(e){n(e)},l.oncomplete=function(n){if(n=n.target.result,"encrypt"===e&&n instanceof AesGcmEncryptResult){var r=n.ciphertext,i=n.tag;(n=new Uint8Array(r.byteLength+i.byteLength)).set(new Uint8Array(r),0),n.set(new Uint8Array(i),r.byteLength),n=n.buffer}t(n)}}))),l}})),b){var w=v.digest;v.digest=function(e,t){if(!t.byteLength)throw Error("Empty input is not allowed");try{var n=w.call(v,e,t)}catch(e){return Promise.reject(e)}return n=new Promise((function(e,t){n.onabort=n.onerror=function(e){t(e)},n.oncomplete=function(t){e(t.target.result)}}))},e.crypto=Object.create(p,{getRandomValues:{value:function(e){return p.getRandomValues(e)}},subtle:{value:v}}),e.CryptoKey=d}_&&(p.subtle=v,e.Crypto=g,e.SubtleCrypto=m,e.CryptoKey=d)}}}}))}));var Jw=qa("match"),Lj=function(e){var t;return ha(e)&&(void 0!==(t=e[Jw])?!!t:"RegExp"==Zb(e))},Kw=[].push,Lw=Math.min;dh("split",2,(function(e,t,n){var r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,n){var r=String(jb(this));if(0===(n=void 0===n?4294967295:n>>>0))return[];if(void 0===e)return[r];if(!Lj(e))return t.call(r,e,n);var i,o,a,s=[],c=0;for(e=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(i=Of.call(e,r))&&!((o=e.lastIndex)>c&&(s.push(r.slice(c,i.index)),1<i.length&&i.index<r.length&&Kw.apply(s,i.slice(1)),a=i[0].length,c=o,s.length>=n));)e.lastIndex===i.index&&e.lastIndex++;return c===r.length?(a||!e.test(""))&&s.push(""):s.push(r.slice(c)),s.length>n?s.slice(0,n):s}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t;return[function(t,n){var i=jb(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,i,n):r.call(String(i),t,n)},function(e,i){var o=n(r,e,this,i,r!==t);if(o.done)return o.value;var a=va(e);e=String(this);var s=kd(a,RegExp);if(o=a.unicode,a=new s(pc?"^(?:"+a.source+")":a,(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(pc?"g":"y")),0===(i=void 0===i?4294967295:i>>>0))return[];if(0===e.length)return null===Ke(a,e)?[e]:[];var c=0,u=0;for(s=[];u<e.length;){a.lastIndex=pc?0:u;var l,d=Ke(a,pc?e.slice(u):e);if(null===d||(l=Lw(ta(a.lastIndex+(pc?u:0)),e.length))===c)u=xj(e,u,o);else{if(s.push(e.slice(c,u)),s.length===i)return s;for(c=1;c<=d.length-1;c++)if(s.push(d[c]),s.length===i)return s;u=c=l}}return s.push(e.slice(c)),s}]}),pc),function(e){e.console||(e.console={}),e=e.console;for(var t,n=function(){},r=["memory"],i="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");t=r.pop();)e[t]||(e[t]={});for(;t=i.pop();)e[t]||(e[t]=n)}("undefined"==typeof window?Ya:window),N({target:"Object",stat:!0},{setPrototypeOf:Ua});var Mw=R((function(){Vb(1)}));N({target:"Object",stat:!0,forced:Mw,sham:!Hn},{getPrototypeOf:function(e){return Vb(Qa(e))}});var ep=[].slice,Mj={},Nw=Function.bind||function(e){var t=yb(this),n=ep.call(arguments,1),r=function r(){var i=n.concat(ep.call(arguments));if(this instanceof r){var o=i.length;if(!(o in Mj)){for(var a=[],s=0;s<o;s++)a[s]="a["+s+"]";Mj[o]=Function("C,a","return new C("+a.join(",")+")")}i=Mj[o](t,i)}else i=t.apply(e,i);return i};return ha(t.prototype)&&(r.prototype=t.prototype),r},Nj=mc("Reflect","construct"),fp=R((function(){function e(){}return!(Nj((function(){}),[],e)instanceof e)})),gp=!R((function(){Nj((function(){}))})),hp=fp||gp;N({target:"Reflect",stat:!0,forced:hp,sham:hp},{construct:function(e,t){yb(e),va(t);var n=3>arguments.length?e:yb(arguments[2]);if(gp&&!fp)return Nj(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}return(n=[null]).push.apply(n,t),new(Nw.apply(e,n))}n=n.prototype,n=ac(ha(n)?n:Object.prototype);var r=Function.apply.call(e,n,t);return ha(r)?r:n}}),N({target:"Reflect",stat:!0},{get:wl});var ip=Fb.f,Ow=R((function(){ip(1)}));N({target:"Object",stat:!0,forced:!ka||Ow,sham:!ka},{getOwnPropertyDescriptor:function(e,t){return ip(qb(e),t)}});var jp=Hd.f,Pw={}.toString,kp="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Oj=function(e){if(kp&&"[object Window]"==Pw.call(e))try{var t=jp(e)}catch(e){t=kp.slice()}else t=jp(qb(e));return t},lp={f:qa},Qw=Ra.f,ph=function(e){var t=y.Symbol||(y.Symbol={});Q(t,e)||Qw(t,e,{value:lp.f(e)})},rb=Pg("hidden"),mp=qa("toPrimitive"),Rw=Za.set,np=Za.getterFor("Symbol"),Ob=Object.prototype,_sb=y.Symbol,Tf=mc("JSON","stringify"),op=Fb.f,od=Ra.f,pp=Oj,Sw=zf,Lc=fd("symbols"),Uf=fd("op-symbols"),Pj=fd("string-to-symbol-registry"),Qj=fd("symbol-to-string-registry"),Tw=fd("wks"),Rj=y.QObject,Sj=!Rj||!Rj.prototype||!Rj.prototype.findChild,Tj=ka&&R((function(){return 7!=ac(od({},"a",{get:function(){return od(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=op(Ob,t);r&&delete Ob[t],od(e,t,n),r&&e!==Ob&&od(Ob,t,r)}:od,Uj=function(e,t){var n=Lc[e]=ac(_sb.prototype);return Rw(n,{type:"Symbol",tag:e,description:t}),ka||(n.description=t),n},Vj=vn?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof _sb},qh=function e(t,n,r){return t===Ob&&e(Uf,n,r),va(t),n=lc(n,!0),va(r),Q(Lc,n)?(r.enumerable?(Q(t,rb)&&t[rb][n]&&(t[rb][n]=!1),r=ac(r,{enumerable:dd(0,!1)})):(Q(t,rb)||od(t,rb,dd(1,{})),t[rb][n]=!0),Tj(t,n,r)):od(t,n,r)},qp=function(e,t){va(e);var n=qb(t);return t=Dc(n).concat(Wj(n)),Jd(t,(function(t){ka&&!Xj.call(n,t)||qh(e,t,n[t])})),e},Xj=function(e){e=lc(e,!0);var t=Sw.call(this,e);return!(this===Ob&&Q(Lc,e)&&!Q(Uf,e))&&(!(t||!Q(this,e)||!Q(Lc,e)||Q(this,rb)&&this[rb][e])||t)},rp=function(e,t){if(e=qb(e),t=lc(t,!0),e!==Ob||!Q(Lc,t)||Q(Uf,t)){var n=op(e,t);return!n||!Q(Lc,t)||Q(e,rb)&&e[rb][t]||(n.enumerable=!0),n}},sp=function(e){e=pp(qb(e));var t=[];return Jd(e,(function(e){Q(Lc,e)||Q(Be,e)||t.push(e)})),t},Wj=function(e){var t=e===Ob;e=pp(t?Uf:qb(e));var n=[];return Jd(e,(function(e){!Q(Lc,e)||t&&!Q(Ob,e)||n.push(Lc[e])})),n};if(oc||(_sb=function(){if(this instanceof _sb)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=Ae(e);return ka&&Sj&&Tj(Ob,t,{configurable:!0,set:function e(n){this===Ob&&e.call(Uf,n),Q(this,rb)&&Q(this[rb],t)&&(this[rb][t]=!1),Tj(this,t,dd(1,n))}}),Uj(t,e)},Ta(_sb.prototype,"toString",(function(){return np(this).tag})),Ta(_sb,"withoutSetter",(function(e){return Uj(Ae(e),e)})),zf=Xj,Ra.f=qh,Fb.f=rp,Hd.f=Oj=sp,Bf.f=Wj,lp.f=function(e){return Uj(qa(e),e)},ka&&(od(_sb.prototype,"description",{configurable:!0,get:function(){return np(this).description}}),Ta(Ob,"propertyIsEnumerable",Xj,{unsafe:!0}))),N({global:!0,wrap:!0,forced:!oc,sham:!oc},{Symbol:_sb}),Jd(Dc(Tw),(function(e){ph(e)})),N({target:"Symbol",stat:!0,forced:!oc},{for:function(e){if(e=String(e),Q(Pj,e))return Pj[e];var t=_sb(e);return Pj[e]=t,Qj[t]=e,t},keyFor:function(e){if(!Vj(e))throw TypeError(e+" is not a symbol");if(Q(Qj,e))return Qj[e]},useSetter:function(){Sj=!0},useSimple:function(){Sj=!1}}),N({target:"Object",stat:!0,forced:!oc,sham:!ka},{create:function(e,t){return void 0===t?ac(e):qp(ac(e),t)},defineProperty:qh,defineProperties:qp,getOwnPropertyDescriptor:rp}),N({target:"Object",stat:!0,forced:!oc},{getOwnPropertyNames:sp,getOwnPropertySymbols:Wj}),N({target:"Object",stat:!0,forced:R((function(){Bf.f(1)}))},{getOwnPropertySymbols:function(e){return Bf.f(Qa(e))}}),Tf){var Uw=!oc||R((function(){var e=_sb();return"[null]"!=Tf([e])||"{}"!=Tf({a:e})||"{}"!=Tf(Object(e))}));N({target:"JSON",stat:!0,forced:Uw},{stringify:function(e,t,n){for(var r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=t,(ha(t)||void 0!==e)&&!Vj(e))return gd(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Vj(t))return t}),i[1]=t,Tf.apply(null,i)}})}_sb.prototype[mp]||Na(_sb.prototype,mp,_sb.prototype.valueOf),Ec(_sb,"Symbol"),Be[rb]=!0;var Vw=Ra.f,Mc=y.Symbol;if(ka&&"function"==typeof Mc&&(!("description"in Mc.prototype)||void 0!==Mc().description)){var tp={},Vf=function e(){var t=1>arguments.length||void 0===arguments[0]?void 0:String(arguments[0]),n=this instanceof e?new Mc(t):void 0===t?Mc():Mc(t);return""===t&&(tp[n]=!0),n};rn(Vf,Mc);var Yj=Vf.prototype=Mc.prototype;Yj.constructor=Vf;var Ww=Yj.toString,Xw="Symbol(test)"==String(Mc("test")),Yw=/^Symbol\((.*)\)[^)]+$/;Vw(Yj,"description",{configurable:!0,get:function(){var e=ha(this)?this.valueOf():this,t=Ww.call(e);return Q(tp,e)?"":""===(e=Xw?t.slice(7,-1):t.replace(Yw,"$1"))?void 0:e}}),N({global:!0,forced:!0},{Symbol:Vf})}ph("toStringTag"),Ec(y.JSON,"JSON",!0),Ec(Math,"Math",!0),function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););if(e)return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(n):t.value})(e,t,n||e)}var c=function(){function t(){e(this,t),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(t,[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=0,r=(e=this.listeners[e]).length;n<r;n++)if(e[n].callback===t){e.splice(n,1);break}}},{key:"dispatchEvent",value:function(e){var t=this;if(e.type in this.listeners){for(var n=function(){a=r[i];try{a.callback.call(t,e)}catch(e){Promise.resolve().then((function(){throw e}))}a.options&&a.options.once&&t.removeEventListener(e.type,a.callback)},r=this.listeners[e.type].slice(),i=0,o=r.length;i<o;i++){var a;n()}return!e.defaultPrevented}}}]),t}(),u=function(t){function o(){e(this,o);var t=u.call(this);return t.listeners||c.call(a(t)),Object.defineProperty(a(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(a(t),"onabort",{value:null,writable:!0,configurable:!0}),t}r(o,t);var u=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n=i(e);if(t){var r=i(this).constructor;n=Reflect.construct(n,arguments,r)}else n=n.apply(this,arguments);return!n||"object"!==X(n)&&"function"!=typeof n?a(this):n}}(o);return n(o,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),s(i(o.prototype),"dispatchEvent",this).call(this,e)}}]),o}(c),l=function(){function t(){e(this,t),Object.defineProperty(this,"signal",{value:new u,writable:!0,configurable:!0})}return n(t,[{key:"abort",value:function(){try{var e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(l.prototype[Symbol.toStringTag]="AbortController",u.prototype[Symbol.toStringTag]="AbortSignal"),function(e){if(e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL){console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill");var t=!0}else t="function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController;t&&(e.AbortController=l,e.AbortSignal=u)}("undefined"!=typeof self?self:Ya)}();var Zw=Math.floor,$w=Math.log,ax=Math.LOG2E;N({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-Zw($w(e+.5)*ax):32}});var bx=Math.log,cx=Math.LN2,ss=Math.clz32||function(e){return 31-bx(e>>>0)/cx|0},xd=String.fromCharCode,up={}.toString,Zj=window.Uint8Array,ak=Zj||Array,dx=up.call((window.ArrayBuffer||ak).prototype),bk;xl.prototype.decode=function(e){if(e=e&&e.buffer||e,up.call(e)!==dx)throw Error("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");for(var t="",n=0,r=0|(e=Zj?new ak(e):e).length;n<r;n=n+32768|0)t+=xd.apply(0,e[Zj?"slice":"subarray"](n,n+32768|0));return t.replace(/[\xc0-\xff][\x80-\xbf]*/g,rs)},window.TextDecoder||(window.TextDecoder=xl),yl.prototype.encode=function(e){for(var t=0|(e=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,ts)).length,n=new ak(t),r=0;r<t;r=r+1|0)n[r]=e.charCodeAt(r);return n},window.TextEncoder||(window.TextEncoder=yl),function(e){var t,n,r,i,o,a,s,c,u,l,d;!function(e){e.LOGIN="LOGIN",e.LOGIN_SUCCESS="LOGIN_SUCCESS",e.LOGIN_FAILURE="LOGIN_FAILURE",e.LOGIN_TIMEOUT="LOGIN_TIMEOUT",e.INTERRUPTED="INTERRUPTED",e.LOGOUT="LOGOUT",e.BANNED_BY_SERVER="BANNED_BY_SERVER",e.REMOTE_LOGIN="REMOTE_LOGIN"}(t||(t={})),e.ConnectionChangeReason=t,function(e){e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED",e.RECONNECTING="RECONNECTING",e.ABORTED="ABORTED"}(n||(n={})),e.ConnectionState=n,function(e){e.IDLE="IDLE",e.SENT_TO_REMOTE="SENT_TO_REMOTE",e.RECEIVED_BY_REMOTE="RECEIVED_BY_REMOTE",e.ACCEPTED_BY_REMOTE="ACCEPTED_BY_REMOTE",e.REFUSED_BY_REMOTE="REFUSED_BY_REMOTE",e.CANCELED="CANCELED",e.FAILURE="FAILURE"}(r||(r={})),e.LocalInvitationState=r,function(e){e.INVITATION_RECEIVED="INVITATION_RECEIVED",e.ACCEPT_SENT_TO_LOCAL="ACCEPT_SENT_TO_LOCAL",e.REFUSED="REFUSED",e.ACCEPTED="ACCEPTED",e.CANCELED="CANCELED",e.FAILURE="FAILURE"}(i||(i={})),e.RemoteInvitationState=i,function(e){e.UNKNOWN="UNKNOWN",e.PEER_NO_RESPONSE="PEER_NO_RESPONSE",e.INVITATION_EXPIRE="INVITATION_EXPIRE",e.PEER_OFFLINE="PEER_OFFLINE",e.NOT_LOGGEDIN="NOT_LOGGEDIN"}(o||(o={})),e.LocalInvitationFailureReason=o,function(e){e.UNKNOWN="UNKNOWN",e.PEER_OFFLINE="PEER_OFFLINE",e.ACCEPT_FAILURE="ACCEPT_FAILURE",e.INVITATION_EXPIRE="INVITATION_EXPIRE"}(a||(a={})),e.RemoteInvitationFailureReason=a,function(e){e.ONLINE="ONLINE",e.UNREACHABLE="UNREACHABLE",e.OFFLINE="OFFLINE"}(s||(s={})),e.PeerOnlineState=s,(c||(c={})).ONLINE_STATUS="ONLINE_STATUS",e.PeerSubscriptionOption=c,function(e){e.TEXT="TEXT",e.RAW="RAW",e.IMAGE="IMAGE",e.FILE="FILE"}(u||(u={})),e.MessageType=u,function(e){e.CN="CN",e.NA="NA",e.EU="EU",e.AS="AS",e.JP="JP",e.IN="IN",e.GLOB="GLOB",e.OC="OC",e.SA="SA",e.AF="AF",e.OVS="OVS"}(l||(l={})),e.LegacyAreaCode=l,function(e){e.GLOBAL="GLOBAL",e.INDIA="INDIA",e.JAPAN="JAPAN",e.ASIA="ASIA",e.EUROPE="EUROPE",e.CHINA="CHINA",e.NORTH_AMERICA="NORTH_AMERICA"}(d||(d={})),e.AreaCode=d}(bk||(bk={}));var S=bk;N({target:"Array",proto:!0},{includes:function(e){return on(this,e,1<arguments.length?arguments[1]:void 0)}}),Ld("includes");var ck=function(e){if(Lj(e))throw TypeError("The method doesn't accept regular expressions");return e},ex=qa("match"),dk=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[ex]=!1,"/./"[e](t)}catch(e){}}return!1};N({target:"String",proto:!0,forced:!dk("includes")},{includes:function(e){return!!~String(jb(this)).indexOf(ck(e),1<arguments.length?arguments[1]:void 0)}});var Nc={RECONNECTING_AP_INTERVAL:2500,RECONNECTING_AP_NUM:2,DISABLE_MESSAGE_COMPRESSION:!1,LOG_UPLOAD_INTERVAL:3e3,LOG_HANDLER:void 0};ph("iterator"),ph("asyncIterator");var ek=Ee("forEach")?[].forEach:function(e){return Jd(this,e,1<arguments.length?arguments[1]:void 0)},vp;for(vp in Ij){var wp=y[vp],rh=wp&&wp.prototype;if(rh&&rh.forEach!==ek)try{Na(rh,"forEach",ek)}catch(c){rh.forEach=ek}}var fx=[].reverse,xp=[1,2];N({target:"Array",proto:!0,forced:String(xp)===String(xp.reverse())},{reverse:function(){return gd(this)&&(this.length=this.length),fx.call(this)}});var w=$a((function(e){e=function(e){function t(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function n(e,t,n,o){return t=Object.create((t&&t.prototype instanceof i?t:i).prototype),o=new h(o||[]),t._invoke=function(e,t,n){var i=S;return function(o,a){if(i===x)throw Error("Generator is already running");if(i===T){if("throw"===o)throw a;return p()}for(n.method=o,n.arg=a;;){if((o=n.delegate)&&(o=u(o,n))){if(o===I)continue;return o}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===S)throw i=T,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);if(i=x,"normal"===(o=r(e,t,n)).type){if(i=n.done?T:w,o.arg===I)continue;return{value:o.arg,done:n.done}}"throw"===o.type&&(i=T,n.method="throw",n.arg=o.arg)}}}(e,n,o),t}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach((function(n){t(e,n,(function(e){return this._invoke(n,e)}))}))}function c(e,t){function n(i,o,a,s){if("throw"!==(i=r(e[i],e,o)).type){var c=i.arg;return(i=c.value)&&"object"===X(i)&&m.call(i,"__await")?t.resolve(i.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(i).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(i.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function u(e,t){var n=e.iterator[t.method];if(n===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,u(e,t),"throw"===t.method))return I;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return I}return"throw"===(n=r(n,e.iterator,t.arg)).type?(t.method="throw",t.arg=n.arg,t.delegate=null,I):(n=n.arg)?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,I):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,I)}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function f(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1;return(t=function t(){for(;++n<e.length;)if(m.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t}).next=t}}return{next:p}}function p(){return{value:v,done:!0}}var v,g=Object.prototype,m=g.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},b=y.iterator||"@@iterator",_=y.asyncIterator||"@@asyncIterator",E=y.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(e,t,n){return e[t]=n}}e.wrap=n;var S="suspendedStart",w="suspendedYield",x="executing",T="completed",I={};t(y={},b,(function(){return this}));var R=Object.getPrototypeOf;(R=R&&R(R(f([]))))&&R!==g&&m.call(R,b)&&(y=R);var k=a.prototype=i.prototype=Object.create(y);return o.prototype=a,t(k,"constructor",a),t(a,"constructor",o),o.displayName=t(a,E,"GeneratorFunction"),e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,E,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},s(c.prototype),t(c.prototype,_,(function(){return this})),e.AsyncIterator=c,e.async=function(t,r,i,o,a){void 0===a&&(a=Promise);var s=new c(n(t,r,i,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},s(k),t(k,E,"Generator"),t(k,b,(function(){return this})),t(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=f,h.prototype={constructor:h,reset:function(e){if(this.next=this.prev=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=m.call(i,"catchLoc"),s=m.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}return i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null),(n=i?i.completion:{}).type=e,n.arg=t,i?(this.method="next",this.next=i.finallyLoc,I):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),I},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),I}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){if("throw"===(e=n.completion).type){var r=e.arg;d(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:f(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=v),I}},e}(e.exports);try{regeneratorRuntime=e}catch(t){"object"===("undefined"==typeof globalThis?"undefined":X(globalThis))?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})),yp=!R((function(){return Object.isExtensible(Object.preventExtensions({}))})),fk=$a((function(e){var t=Ra.f,n=Ae("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(e){t(e,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!ha(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Q(e,n)){if(!i(e))return"F";if(!t)return"E";o(e)}return e[n].objectID},getWeakData:function(e,t){if(!Q(e,n)){if(!i(e))return!0;if(!t)return!1;o(e)}return e[n].weakData},onFreeze:function(e){return yp&&a.REQUIRED&&i(e)&&!Q(e,n)&&o(e),e}};Be[n]=!0})),zp=function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",a=y[e],s=a&&a.prototype,c=a,u={},l=function(e){var t=s[e];Ta(s,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!ha(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return i&&!ha(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!ha(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(nc(e,"function"!=typeof a||!(i||s.forEach&&!R((function(){(new a).entries().next()})))))c=n.getConstructor(t,e,r,o),fk.REQUIRED=!0;else if(nc(e,!0)){var d=new c,h=d[o](i?{}:-0,1)!=d,f=R((function(){d.has(1)})),p=Tg((function(e){new a(e)})),v=!i&&R((function(){for(var e=new a,t=5;t--;)e[o](t,t);return!e.has(-0)}));p||((c=t((function(t,n){return Gc(t,c,e),t=lh(new a,t,c),null!=n&&Xg(n,t[o],{that:t,AS_ENTRIES:r}),t}))).prototype=s,s.constructor=c),(f||v)&&(l("delete"),l("has"),r&&l("get")),(v||h)&&l(o),i&&s.clear&&delete s.clear}return u[e]=c,N({global:!0,forced:c!=a},u),Ec(c,e),i||n.setStrong(c,e,r),c},gx=Ra.f,Ap=fk.fastKey,Bp=Za.set,gk=Za.getterFor,Cp={getConstructor:function(e,t,n,r){var i=e((function(e,o){Gc(e,i,t),Bp(e,{type:t,index:ac(null),first:void 0,last:void 0,size:0}),ka||(e.size=0),null!=o&&Xg(o,e[r],{that:e,AS_ENTRIES:n})})),o=gk(t),a=function(e,t,n){var r,i=o(e),a=s(e,t);return a?a.value=n:(i.last=a={index:r=Ap(t,!0),key:t,value:n,previous:t=i.last,next:void 0,removed:!1},i.first||(i.first=a),t&&(t.next=a),ka?i.size++:e.size++,"F"!==r&&(i.index[r]=a)),e},s=function(e,t){e=o(e);var n=Ap(t);if("F"!==n)return e.index[n];for(e=e.first;e;e=e.next)if(e.key==t)return e};return Hf(i.prototype,{clear:function(){for(var e=o(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,ka?e.size=0:this.size=0},delete:function(e){var t=o(this);if(e=s(this,e)){var n=e.next,r=e.previous;delete t.index[e.index],e.removed=!0,r&&(r.next=n),n&&(n.previous=r),t.first==e&&(t.first=n),t.last==e&&(t.last=r),ka?t.size--:this.size--}return!!e},forEach:function(e){for(var t,n=o(this),r=Id(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),Hf(i.prototype,n?{get:function(e){return(e=s(this,e))&&e.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),ka&&gx(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=gk(t),o=gk(r);bj(e,t,(function(e,t){Bp(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),If(t)}};zp("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Cp);var hx=/^[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*/,ix=/[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$/,hk=function(e){return function(t){return t=String(jb(t)),1&e&&(t=t.replace(hx,"")),2&e&&(t=t.replace(ix,"")),t}};hk(1),hk(2);var ik=hk(3),sh=y.parseInt,jx=/^[+-]?0[Xx]/,Dp=8!==sh("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff08")||22!==sh("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff0x16")?function(e,t){return e=ik(String(e)),sh(e,t>>>0||(jx.test(e)?16:10))}:sh;N({global:!0,forced:parseInt!=Dp},{parseInt:Dp});var kx=Hd.f,lx=Fb.f,mx=Ra.f,pd=y.Number,th=pd.prototype,nx="Number"==Zb(ac(th)),Ep=function(e){var t,n=lc(e,!1);if("string"==typeof n&&2<n.length)if(43===(e=(n=ik(n)).charCodeAt(0))||45===e){if(88===(e=n.charCodeAt(2))||120===e)return NaN}else if(48===e){switch(n.charCodeAt(1)){case 66:case 98:e=2;var r=49;break;case 79:case 111:e=8,r=55;break;default:return+n}var i=(n=n.slice(2)).length;for(t=0;t<i;t++){var o=n.charCodeAt(t);if(48>o||o>r)return NaN}return parseInt(n,e)}return+n};if(nc("Number",!pd(" 0o1")||!pd("0b1")||pd("+0x1"))){for(var Pd=function e(t){var n=1>arguments.length?0:t,r=this;return r instanceof e&&(nx?R((function(){th.valueOf.call(r)})):"Number"!=Zb(r))?lh(new pd(Ep(n)),r,e):Ep(n)},Fp=ka?kx(pd):"MAX_VALUE MIN_VALUE NaN NEGATIVE_INFINITY POSITIVE_INFINITY EPSILON isFinite isInteger isNaN isSafeInteger MAX_SAFE_INTEGER MIN_SAFE_INTEGER parseFloat parseInt isInteger fromString range".split(" "),jk=0,uh;Fp.length>jk;jk++)Q(pd,uh=Fp[jk])&&!Q(Pd,uh)&&mx(Pd,uh,lx(pd,uh));Pd.prototype=th,th.constructor=Pd,Ta(y,"Number",Pd)}var Gp=qa("isConcatSpreadable"),ox=51<=id||!R((function(){var e=[];return e[Gp]=!1,e.concat()[0]!==e})),px=Ef("concat");N({target:"Array",proto:!0,forced:!ox||!px},{concat:function(e){var t,n=Qa(this),r=Sg(n,0),i=0,o=-1;for(t=arguments.length;o<t;o++){var a=-1===o?n:arguments[o],s=a;if(ha(s)){var c=s[Gp];s=void 0!==c?!!c:gd(s)}else s=!1;if(s){if(9007199254740991<i+(c=ta(a.length)))throw TypeError("Maximum allowed index exceeded");for(s=0;s<c;s++,i++)s in a&&Ge(r,i,a[s])}else{if(9007199254740991<=i)throw TypeError("Maximum allowed index exceeded");Ge(r,i++,a)}}return r.length=i,r}});var kk=mc("Reflect","apply"),qx=Function.apply,rx=!R((function(){kk((function(){}))}));N({target:"Reflect",stat:!0,forced:rx},{apply:function(e,t,n){return yb(e),va(n),kk?kk(e,t,n):qx.call(e,t,n)}}),N({target:"Reflect",stat:!0},{ownKeys:qn});var sx=Oj,tx=R((function(){return!Object.getOwnPropertyNames(1)}));N({target:"Object",stat:!0,forced:tx},{getOwnPropertyNames:sx});var Pe="object"===("undefined"==typeof Reflect?"undefined":X(Reflect))?Reflect:null,Hp=Pe&&"function"==typeof Pe.apply?Pe.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},ux=Pe&&"function"==typeof Pe.ownKeys?Pe.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},Ip=Number.isNaN||function(e){return e!=e};ea.EventEmitter=ea,ea.prototype._events=void 0,ea.prototype._eventsCount=0,ea.prototype._maxListeners=void 0;var Jp=10;Object.defineProperty(ea,"defaultMaxListeners",{enumerable:!0,get:function(){return Jp},set:function(e){if("number"!=typeof e||0>e||Ip(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Jp=e}}),ea.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ea.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||Ip(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},ea.prototype.getMaxListeners=function(){return void 0===this._maxListeners?ea.defaultMaxListeners:this._maxListeners},ea.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);n="error"===e;var r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var i;if(0<t.length&&(i=t[0]),i instanceof Error)throw i;throw(t=Error("Unhandled error."+(i?" ("+i.message+")":""))).context=i,t}if(void 0===(n=r[e]))return!1;if("function"==typeof n)Hp(n,this,t);else for(r=Cl(n,i=n.length),n=0;n<i;++n)Hp(r[n],this,t);return!0},ea.prototype.addListener=function(e,t){return zl(this,e,t,!1)},ea.prototype.on=ea.prototype.addListener,ea.prototype.prependListener=function(e,t){return zl(this,e,t,!0)},ea.prototype.once=function(e,t){return ng(t),this.on(e,Al(this,e,t)),this},ea.prototype.prependOnceListener=function(e,t){return ng(t),this.prependListener(e,Al(this,e,t)),this},ea.prototype.removeListener=function(e,t){var n;ng(t);var r=this._events;if(void 0===r)return this;var i=r[e];if(void 0===i)return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){var o=-1;for(n=i.length-1;0<=n;n--)if(i[n]===t||i[n].listener===t){var a=i[n].listener;o=n;break}if(0>o)return this;if(0===o)i.shift();else{for(;o+1<i.length;o++)i[o]=i[o+1];i.pop()}1===i.length&&(r[e]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},ea.prototype.off=ea.prototype.removeListener,ea.prototype.removeAllListeners=function(e){var t=this._events;if(void 0===t)return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete t[e]),this;if(0===arguments.length){var n=Object.keys(t);for(t=0;t<n.length;++t){var r=n[t];"removeListener"!==r&&this.removeAllListeners(r)}return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(n=t[e]))this.removeListener(e,n);else if(void 0!==n)for(t=n.length-1;0<=t;t--)this.removeListener(e,n[t]);return this},ea.prototype.listeners=function(e){return Bl(this,e,!0)},ea.prototype.rawListeners=function(e){return Bl(this,e,!1)},ea.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Dl.call(e,t)},ea.prototype.listenerCount=Dl,ea.prototype.eventNames=function(){return 0<this._eventsCount?ux(this._events):[]},ea.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}El(e,t,o,{once:!0}),"error"!==t&&vs(e,i,{once:!0})}))};var Qe=Object.assign,Kp=Object.defineProperty,Lp=!Qe||R((function(){if(ka&&1!==Qe({b:1},Qe(Kp({},"a",{enumerable:!0,get:function(){Kp(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=Qe({},e)[n]||"abcdefghijklmnopqrst"!=Dc(Qe({},t)).join("")}))?function(e,t){for(var n=Qa(e),r=arguments.length,i=1,o=Bf.f,a=zf;r>i;)for(var s,c=Af(arguments[i++]),u=o?Dc(c).concat(o(c)):Dc(c),l=u.length,d=0;l>d;)s=u[d++],(!ka||a.call(c,s))&&(n[s]=c[s]);return n}:Qe;N({target:"Object",stat:!0,forced:Object.assign!==Lp},{assign:Lp}),zp("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Cp);var vx=Math.log,wx=Math.LN2;N({target:"Math",stat:!0},{log2:function(e){return vx(e)/wx}});var xx=Ra.f,yx=Hd.f,zx=Za.enforce,Ax=qa("match"),sc=y.RegExp,lk=sc.prototype,Wf=/a/g,mk=/a/g,nk=new sc(Wf)!==Wf;if(ka&&nc("RegExp",!nk||pc||R((function(){return mk[Ax]=!1,sc(Wf)!=Wf||sc(mk)==mk||"/a/i"!=sc(Wf,"i")})))){for(var Oc=function e(t,n){var r,i=this instanceof e,o=Lj(t),a=void 0===n;return!i&&o&&t.constructor===e&&a||(nk?o&&!a&&(t=t.source):t instanceof e&&(a&&(n=tj.call(t)),t=t.source),pc&&(r=!!n&&-1<n.indexOf("y"))&&(n=n.replace(/y/g,"")),t=lh(nk?new sc(t,n):sc(t,n),i?this:lk,e),pc&&r&&(zx(t).sticky=!0)),t},Bx=function(e){e in Oc||xx(Oc,e,{configurable:!0,get:function(){return sc[e]},set:function(t){sc[e]=t}})},Mp=yx(sc),Np=0;Mp.length>Np;)Bx(Mp[Np++]);lk.constructor=Oc,Oc.prototype=lk,Ta(y,"RegExp",Oc)}If("RegExp"),Sf("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Sf("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Sf("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Sf("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var ok=function(e,t){return e===t?0:null==e?null==t?0:-1:null==t?null==e?0:1:"function"==typeof e.compare?e.compare(t):"function"==typeof t.compare?-t.compare(e):e<t?-1:e>t?1:0},pk=[],Op=pk.sort,Cx=R((function(){pk.sort(void 0)})),Dx=R((function(){pk.sort(null)})),Ex=Ee("sort");N({target:"Array",proto:!0,forced:Cx||!Dx||!Ex},{sort:function(e){return void 0===e?Op.call(Qa(this)):Op.call(Qa(this),yb(e))}});var Pp=Object.getPrototypeOf({}),Xf=function(e,t){var n;return e===t||(null==e?e==t:"function"===X(e.equiv)?e.equiv(t):null==t?e==t:"function"===X(t.equiv)?t.equiv(e):"string"!==X(e)&&"string"!==X(t)&&(null!=(n=Object.getPrototypeOf(e))&&n!==Pp||null!=(n=Object.getPrototypeOf(t))&&n!==Pp?"function"!==X(e)&&void 0!==e.length&&"function"!==X(t)&&void 0!==t.length?Gx(e,t):e instanceof Set&&t instanceof Set?Hx(e,t):e instanceof Map&&t instanceof Map?Ix(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:Fx(e,t)))},Gx=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xf,r=e.length;if(r===t.length)for(;0<=--r&&n(e[r],t[r]););return 0>r},Hx=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xf;return e.size===t.size&&n(G(e.keys()).sort(),G(t.keys()).sort())},Ix=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xf;return e.size===t.size&&n(G(e).sort(),G(t).sort())},Fx=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Xf;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!t.hasOwnProperty(r)||!n(e[r],t[r]))return!1;return!0},Qp=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e){return void 0!==e?": "+e:""};return function(n){function r(n){return W(this,r),i.call(this,e(n)+t(n))}la(r,n);var i=ma(r);return r}(ef(Error))},Jx=Qp((function(){return"illegal argument(s)"})),vh=function(e){throw new Jx(e)},qk=Qp((function(){return"index out of bounds"})),Rp=1/4294967295,Kx=function(){function e(){W(this,e)}return Ha(e,[{key:"float",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return this.int()*Rp*e}},{key:"norm",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(this.int()*Rp-.5)*e}},{key:"minmax",value:function(e,t){return this.float()*(t-e)+e}}]),e}(),rk=Math.random,Lx=new(function(e){function t(){return W(this,t),n.apply(this,arguments)}la(t,e);var n=ma(t);return Ha(t,[{key:"int",value:function(){return 4294967296*rk()>>>0}},{key:"float",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return rk()*e}},{key:"norm",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(rk()-.5)*e}}]),t}(Kx)),Vh=Symbol(),Hl=function(){},Mx=fk.onFreeze,sk=Object.freeze,Nx=R((function(){sk(1)}));N({target:"Object",stat:!0,forced:Nx,sham:!yp},{freeze:function(e){return sk&&ha(e)?sk(Mx(e)):e}});var Ox=Ee("reduce"),Px=!Hc&&79<id&&83>id;N({target:"Array",proto:!0,forced:!Ox||Px},{reduce:function(e){return Wo(this,e,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Gl=function(e){return null!=e&&"function"==typeof e.xform?e.xform():e},og=function(){function e(t){W(this,e),this.value=t}return Ha(e,[{key:"deref",value:function(){return this.value}}]),e}(),Wh=function(e){return e instanceof og?e.deref():e},xs=function(e,t){return[e,function(e){return e},t]},Qx=w.mark((function(e,t){var n,r,i,o,a,s;return w.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:n=Gl(e)(ws()),r=n[1],i=n[2],o=0;case 4:if(!(o<t.length)){c.next=15;break}if(a=t[o],!((s=i([],a))instanceof og)){c.next=10;break}return c.delegateYield(Wh(r(s.deref())),"t0",9);case 9:return c.abrupt("return");case 10:if(!s.length){c.next=12;break}return c.delegateYield(s,"t1",12);case 12:o++,c.next=4;break;case 15:return c.delegateYield(Wh(r([])),"t2",16);case 16:case"end":return c.stop()}}),Qx)})),ys=w.mark(Fl),zs=function(e,t){return[e[0],e[1],t]},Sp=!0;"findIndex"in[]&&Array(1).findIndex((function(){Sp=!1})),N({target:"Array",proto:!0,forced:Sp},{findIndex:function(e){return An(this,e,1<arguments.length?arguments[1]:void 0)}}),Ld("findIndex"),N({target:"Array",proto:!0},{fill:yj}),Ld("fill");var Rx=function(){function e(t){W(this,e),this._length=0,t&&this.into(t)}return Ha(e,[{key:"length",get:function(){return this._length}},{key:"copy",value:function(){return new e(this)}},{key:"empty",value:function(){return new e}},{key:"clear",value:function(){this.release()}},{key:"release",value:function(){for(var e,t=this.head;t;)e=t.next,delete t.value,delete t.prev,delete t.next,t=e;return delete this.head,delete this.tail,this._length=0,!0}},{key:"compare",value:function(e){var t=this._length;if(t<e._length)return-1;if(t>e._length)return 1;if(0===t)return 0;t=this.head,e=e.head;for(var n=0;t&&0==n;)n=ok(t.value,e.value),t=t.next,e=e.next;return n}},{key:"equiv",value:function(t){if(!(t instanceof e||null!=t&&"function"!=typeof t&&void 0!==t.length)||this._length!==t.length)return!1;if(!this._length||this===t)return!0;for(var n=this.head,r=0;r<t.length;r++){if(!Xf(n.value,t[r]))return!1;n=n.next}return!0}},{key:Symbol.iterator,value:w.mark((function e(){var t;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))},{key:"seq",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;if(!(e>=t||0>e)){e=this.nthCell(e);var n=this.nthCell(t-1);return t=function e(t){return{first:function(){return t.value},next:function(){return t!==n&&t.next?e(t.next):void 0}}},e?t(e):void 0}}},{key:"cycle",value:w.mark((function e(){return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this,"t0",2);case 2:e.next=0;break;case 4:case"end":return e.stop()}}),e,this)}))},{key:"$reduce",value:function(e,t){for(var n=this.head;n&&!(t instanceof og);)t=e(t,n.value),n=n.next;return t}},{key:"drop",value:function(){var e=this.head;if(e)return(this.head=e.next)?delete this.head.prev:delete this.tail,this._length--,e.value}},{key:"cons",value:function(e){return e={value:e,next:this.head},this.head?this.head.prev=e:this.tail=e,this.head=e,this._length++,this}},{key:"insertBefore",value:function(e,t){return e||vh("cell is undefined"),t={value:t,next:e,prev:e.prev},e.prev?e.prev.next=t:this.head=t,e.prev=t,this._length++,this}},{key:"insertAfter",value:function(e,t){return e||vh("cell is undefined"),t={value:t,next:e.next,prev:e},e.next?e.next.prev=t:this.tail=t,e.next=t,this._length++,this}},{key:"insertBeforeNth",value:function(e,t){if(0>e&&(e+=this._length),0>=e)return this.cons(t);if(0>e||e>=this._length)throw new qk(e);return this.insertBefore(this.nthCellUnsafe(e),t)}},{key:"insertAfterNth",value:function(e,t){if(0>e&&(e+=this._length),e>=this._length-1)return this.push(t);if(0>e||e>=this._length)throw new qk(e);return this.insertAfter(this.nthCellUnsafe(e),t)}},{key:"insertSorted",value:function(e,t){t=t||ok;for(var n=this.head;n;){if(0>=t(e,n.value))return this.insertBefore(n,e);n=n.next}return this.push(e)}},{key:"find",value:function(e){for(var t=this.head;t;){if(t.value===e)return t;t=t.next}}},{key:"findWith",value:function(e){for(var t=this.head;t;){if(e(t.value))return t;t=t.next}}},{key:"concat",value:function(){for(var e=this.copy(),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(t=0;t<n.length;t++)e.into(n[t]);return e}},{key:"into",value:function(e){for(var t=0;t<e.length;t++)this.push(e[t])}},{key:"slice",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;t=0>t?t+this._length:t,n=0>n?n+this._length:n,(0>t||0>n)&&vh("invalid indices: ${from} / ${to}");for(var r=new e,i=this.nthCell(t);i&&++t<=n;)r.push(i.value),i=i.next;return r}},{key:"splice",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length?arguments[2]:void 0;if("number"==typeof t){if(0>t&&(t+=this._length),0>t||t>=this._length)throw new qk(t);var i=this.nthCellUnsafe(t)}else i=t;var o=new e;if(0<n)for(;i&&0<n--;)this.remove(i),o.push(i.value),i=i.next;else i&&(i=i.next);if(r)if(i)for(n=0;n<r.length;n++)this.insertBefore(i,r[n]);else for(i=0;i<r.length;i++)this.push(r[i]);return o}},{key:"remove",value:function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,this._length--,this}},{key:"swap",value:function(e,t){if(e!==t){var n=e.value;e.value=t.value,t.value=n}return this}},{key:"push",value:function(e){return this.tail?(e={value:e,prev:this.tail},this.tail=this.tail.next=e,this._length++,this):this.cons(e)}},{key:"pop",value:function(){var e=this.tail;if(e)return(this.tail=e.prev)?delete this.tail.next:delete this.head,this._length--,e.value}},{key:"first",value:function(){return this.head&&this.head.value}},{key:"peek",value:function(){return this.tail&&this.tail.value}},{key:"setHead",value:function(e){return this.head?(this.head.value=e,this):this.cons(e)}},{key:"setTail",value:function(e){return this.tail?(this.tail.value=e,this):this.push(e)}},{key:"setNth",value:function(e,t){var n=this.nthCell(e);return!n&&vh("index out of bounds: ".concat(e)),n.value=t,this}},{key:"nth",value:function(e,t){return(e=this.nthCell(e))?e.value:t}},{key:"nthCell",value:function(e){if(0>e&&(e+=this._length),!(0>e||e>=this._length))return this.nthCellUnsafe(e)}},{key:"rotateLeft",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:return this.push(this.drop())}}},{key:"rotateRight",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:var e=this.peek();return this.pop(),this.cons(e)}}},{key:"map",value:function(t){for(var n=new e,r=this.head;r;)n.push(t(r.value)),r=r.next;return n}},{key:"filter",value:function(t){for(var n=new e,r=this.head;r;)t(r.value)&&n.push(r.value),r=r.next;return n}},{key:"reduce",value:function(e,t){for(var n=this.head;n;)t=e(t,n.value),n=n.next;return t}},{key:"shuffle",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Lx;if(2>this._length)return this;for(e=null!=e?e:Math.ceil(1.5*Math.log2(this._length));0<e;e--)for(var n=this.head;n;){var r=n.next;.5>t.float()?this.asHead(n):this.asTail(n),n=r}return this}},{key:"sort",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ok;if(!this._length)return this;for(var t=1;;){var n=this.head;this.tail=this.head=void 0;for(var r=0;n;){r++;for(var i=n,o=0,a=0;a<t&&(o++,i=i.next);a++);for(a=t;0<o||0<a&&i;){if(0===o){var s=i;i=i.next,a--}else i&&0!==a?0>=e(n.value,i.value)?(s=n,n=n.next,o--):(s=i,i=i.next,a--):(s=n,n=n.next,o--);this.tail?this.tail.next=s:this.head=s,s.prev=this.tail,this.tail=s}n=i}if(this.tail.next=void 0,1>=r)return this;t*=2}}},{key:"reverse",value:function(){for(var e=this.head,t=this.tail,n=(this._length>>>1)+(1&this._length);e&&t&&0<n;){var r=e.value;e.value=t.value,t.value=r,e=e.next,t=t.prev,n--}return this}},{key:"asHead",value:function(e){return e===this.head||(this.remove(e),this.head.prev=e,e.next=this.head,e.prev=void 0,this.head=e,this._length++),this}},{key:"asTail",value:function(e){return e===this.tail||(this.remove(e),this.tail.next=e,e.prev=this.tail,e.next=void 0,this.tail=e,this._length++),this}},{key:"toString",value:function(){for(var e=[],t=this.head;t;)e.push(String(t.value)),t=t.next;return e.join(", ")}},{key:"toJSON",value:function(){return G(this)}},{key:"nthCellUnsafe",value:function(e){if(e<=this._length>>1)var t=this.head,n="next";else t=this.tail,n="prev",e=this._length-e-1;for(;0<e--&&t;)t=t[n];return t}}]),e}(),tc=function(){function e(t,n){W(this,e),n=Object.assign({maxlen:1/0,maxsize:1/0,map:function(){return new Map},ksize:function(){return 0},vsize:function(){return 0}},n),this.map=n.map(),this.items=new Rx,this._size=0,this.opts=n,t&&this.into(t)}return Ha(e,[{key:"length",get:function(){return this.items.length}},{key:"size",get:function(){return this._size}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(){return pg((function(e){return[e.k,e]}),this.items)}},{key:"keys",value:function(){return pg((function(e){return e.k}),this.items)}},{key:"values",value:function(){return pg((function(e){return e.v}),this.items)}},{key:"copy",value:function(){var e=this.empty();e.items=this.items.copy();for(var t=e.items.head;t;)e.map.set(t.value.k,t),t=t.next;return e}},{key:"empty",value:function(){return new e(null,this.opts)}},{key:"release",value:function(){this._size=0,this.map.clear();var e=this.opts.release;if(e){for(var t;t=this.items.drop();)e(t.k,t.v);return!0}return this.items.release()}},{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e,t){return(e=this.map.get(e))?this.resetEntry(e):t}},{key:"set",value:function(e,t){var n=this.opts.ksize(e)+this.opts.vsize(t),r=this.map.get(e);return this._size+=Math.max(0,n-(r?r.value.s:0)),this.ensureSize()&&this.doSetEntry(r,e,t,n),t}},{key:"into",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];this.set(n[0],n[1])}return this}},{key:"getSet",value:function(e,t){var n=this,r=this.map.get(e);return r?Promise.resolve(this.resetEntry(r)):t().then((function(t){return n.set(e,t)}))}},{key:"delete",value:function(e){return!!(e=this.map.get(e))&&(this.removeEntry(e),!0)}},{key:"resetEntry",value:function(e){return this.items.asTail(e),e.value.v}},{key:"ensureSize",value:function(){for(var e=this.opts.release,t=this.opts.maxsize,n=this.opts.maxlen;this._size>t||this.length>=n;){var r=this.items.drop();if(!r)return!1;this.map.delete(r.k),e&&e(r.k,r.v),this._size-=r.s}return!0}},{key:"removeEntry",value:function(e){var t=e.value;this.map.delete(t.k),this.items.remove(e),this.opts.release&&this.opts.release(t.k,t.v),this._size-=t.s}},{key:"doSetEntry",value:function(e,t,n,r){e?(e.value.v=n,e.value.s=r,this.items.asTail(e)):(this.items.push({k:t,v:n,s:r}),this.map.set(t,this.items.tail))}}]),e}(),Sx=function(e){function t(e,r){return W(this,t),r=Object.assign({ttl:36e5},r),n.call(this,e,r)}la(t,e);var n=ma(t);return Ha(t,[{key:"empty",value:function(){return new t(null,this.opts)}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"get",value:function(e,t){if(e=this.map.get(e)){if(e.value.t>=Date.now())return this.resetEntry(e);this.removeEntry(e)}return t}},{key:"set",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,r=this.opts.ksize(e)+this.opts.vsize(t),i=this.map.get(e);return this._size+=Math.max(0,r-(i?i.value.s:0)),this.ensureSize()&&(n=Date.now()+n,i?(i.value.v=t,i.value.s=r,i.value.t=n,this.items.asTail(i)):(this.items.push({k:e,v:t,s:r,t:n}),this.map.set(e,this.items.tail))),t}},{key:"getSet",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,i=this.get(e);return i?Promise.resolve(i):t().then((function(t){return n.set(e,t,r)}))}},{key:"prune",value:function(){for(var e=Date.now(),t=this.items.head;t;)t.value.t<e&&this.removeEntry(t),t=t.next}},{key:"ensureSize",value:function(){for(var e=this.opts.maxsize,n=this.opts.maxlen,r=Date.now(),i=this.items.head;i&&(this._size>e||this.length>=n);)i.value.t<r&&this.removeEntry(i),i=i.next;return Th(wd(t.prototype),"ensureSize",this).call(this)}}]),t}(tc),Tp="object"==X(Ya)&&Ya&&Ya.Object===Object&&Ya,Tx="object"==("undefined"==typeof self?"undefined":X(self))&&self&&self.Object===Object&&self,Cb=Tp||Tx||Function("return this")(),Pb=Cb.Symbol,Up=Object.prototype,Ux=Up.hasOwnProperty,Vx=Up.toString,Yf=Pb?Pb.toStringTag:void 0,Wx=Object.prototype.toString,Vp=Pb?Pb.toStringTag:void 0,Qd=function(e){if(null==e)e=void 0===e?"[object Undefined]":"[object Null]";else if(Vp&&Vp in Object(e)){var t=Ux.call(e,Yf),n=e[Yf];try{e[Yf]=void 0;var r=!0}catch(e){}var i=Vx.call(e);r&&(t?e[Yf]=n:delete e[Yf]),e=i}else e=Wx.call(e);return e},lb=function(e){var t=X(e);return null!=e&&("object"==t||"function"==t)},qi=function(e){return!!lb(e)&&("[object Function]"==(e=Qd(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)},tk=Cb["__core-js_shared__"],Wp=function(){var e=/[^.]+$/.exec(tk&&tk.keys&&tk.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Xx=Function.prototype.toString,Rd=function(e){if(null!=e){try{return Xx.call(e)}catch(e){}return e+""}return""},Yx=/^\[object .+?Constructor\]$/,Zx=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Sd=function(e,t){return e=null==e?void 0:e[t],!lb(e)||Wp&&Wp in e||!(qi(e)?Zx:Yx).test(Rd(e))?void 0:e},Zf=Sd(Object,"create"),$x=Object.prototype.hasOwnProperty,ay=Object.prototype.hasOwnProperty;zd.prototype.clear=function(){this.__data__=Zf?Zf(null):{},this.size=0},zd.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},zd.prototype.get=function(e){var t=this.__data__;return Zf?"__lodash_hash_undefined__"===(e=t[e])?void 0:e:$x.call(t,e)?t[e]:void 0},zd.prototype.has=function(e){var t=this.__data__;return Zf?void 0!==t[e]:ay.call(t,e)},zd.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Zf&&void 0===t?"__lodash_hash_undefined__":t,this};var $f=function(e,t){return e===t||e!=e&&t!=t},wh=function(e,t){for(var n=e.length;n--;)if($f(e[n][0],t))return n;return-1},by=Array.prototype.splice;ce.prototype.clear=function(){this.__data__=[],this.size=0},ce.prototype.delete=function(e){var t=this.__data__;return!(0>(e=wh(t,e)))&&(e==t.length-1?t.pop():by.call(t,e,1),--this.size,!0)},ce.prototype.get=function(e){var t=this.__data__;return 0>(e=wh(t,e))?void 0:t[e][1]},ce.prototype.has=function(e){return-1<wh(this.__data__,e)},ce.prototype.set=function(e,t){var n=this.__data__,r=wh(n,e);return 0>r?(++this.size,n.push([e,t])):n[r][1]=t,this};var rg=ce,ag=Sd(Cb,"Map"),xh=function(e,t){e=e.__data__;var n=X(t);return("string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?e["string"==typeof t?"string":"hash"]:e.map};de.prototype.clear=function(){this.size=0,this.__data__={hash:new zd,map:new(ag||rg),string:new zd}},de.prototype.delete=function(e){return e=xh(this,e).delete(e),this.size-=e?1:0,e},de.prototype.get=function(e){return xh(this,e).get(e)},de.prototype.has=function(e){return xh(this,e).has(e)},de.prototype.set=function(e,t){var n=xh(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var qg=de;gf.prototype.add=gf.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},gf.prototype.has=function(e){return this.__data__.has(e)};var Xp=function(e,t,n,r){var i=e.length;for(n+=r?1:-1;r?n--:++n<i;)if(t(e[n],n,e))return n;return-1},cy=function(e){return e!=e},dy=function(e,t){var n;if(n=!(null==e||!e.length)){if(t==t)e:{n=-1;for(var r=e.length;++n<r;)if(e[n]===t){e=n;break e}e=-1}else e=Xp(e,cy,0);n=-1<e}return n},ey=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1},fy=function(e,t){return e.has(t)},Re=Sd(Cb,"Set"),gy=function(){},uk=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},hy=1/0,iy=Re&&1/uk(new Re([,-0]))[1]==hy?function(e){return new Re(e)}:gy,vk=function(e,t,n){var r=-1,i=dy,o=e.length,a=!0,s=[],c=s;if(n)a=!1,i=ey;else if(200<=o){if(i=t?null:iy(e))return uk(i);a=!1,i=fy,c=new gf}else c=t?[]:s;e:for(;++r<o;){var u=e[r],l=t?t(u):u;if(u=n||0!==u?u:0,a&&l==l){for(var d=c.length;d--;)if(c[d]===l)continue e;t&&c.push(l),s.push(u)}else i(c,l,n)||(c!==s&&c.push(l),s.push(u))}return s},Yp=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},he=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};ee.prototype.clear=function(){this.__data__=new rg,this.size=0},ee.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},ee.prototype.get=function(e){return this.__data__.get(e)},ee.prototype.has=function(e){return this.__data__.has(e)},ee.prototype.set=function(e,t){var n=this.__data__;if(n instanceof rg){var r=n.__data__;if(!ag||199>r.length)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qg(r)}return n.set(e,t),this.size=n.size,this};var ge=ee,Is=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},yh=function(){try{var e=Sd(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),bg=function(e,t,n){"__proto__"==t&&yh?yh(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},jy=Object.prototype.hasOwnProperty,Ml=function(e,t,n){var r=e[t];jy.call(e,t)&&$f(r,n)&&(void 0!==n||t in e)||bg(e,t,n)},re=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?bg(n,s,c):Ml(n,s,c)}return n},gc=function(e){return null!=e&&"object"==X(e)},Zp=function(e){return gc(e)&&"[object Arguments]"==Qd(e)},$p=Object.prototype,ky=$p.hasOwnProperty,ly=$p.propertyIsEnumerable,rf=Zp(function(){return arguments}())?Zp:function(e){return gc(e)&&ky.call(e,"callee")&&!ly.call(e,"callee")},Va=Array.isArray,my=function(){return!1},jf=$a((function(e,t){var n=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e;t=n&&n.exports===t?Cb.Buffer:void 0,e.exports=(t?t.isBuffer:void 0)||my})),ny=/^(?:0|[1-9]\d*)$/,wk=function(e,t){var n=X(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ny.test(e))&&-1<e&&0==e%1&&e<t},xk=function(e){return"number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e},Ea={};Ea["[object Float32Array]"]=Ea["[object Float64Array]"]=Ea["[object Int8Array]"]=Ea["[object Int16Array]"]=Ea["[object Int32Array]"]=Ea["[object Uint8Array]"]=Ea["[object Uint8ClampedArray]"]=Ea["[object Uint16Array]"]=Ea["[object Uint32Array]"]=!0,Ea["[object Arguments]"]=Ea["[object Array]"]=Ea["[object ArrayBuffer]"]=Ea["[object Boolean]"]=Ea["[object DataView]"]=Ea["[object Date]"]=Ea["[object Error]"]=Ea["[object Function]"]=Ea["[object Map]"]=Ea["[object Number]"]=Ea["[object Object]"]=Ea["[object RegExp]"]=Ea["[object Set]"]=Ea["[object String]"]=Ea["[object WeakMap]"]=!1;var oy=function(e){return gc(e)&&xk(e.length)&&!!Ea[Qd(e)]},zh=function(e){return function(t){return e(t)}},Se=$a((function(e,t){var n=t&&!t.nodeType&&t;n=(t=n&&e&&!e.nodeType&&e)&&t.exports===n&&Tp.process;e:{try{var r=t&&t.require&&t.require("util").types;if(r){var i=r;break e}i=n&&n.binding&&n.binding("util");break e}catch(e){}i=void 0}e.exports=i})),aq=Se&&Se.isTypedArray,bi=aq?zh(aq):oy,py=Object.prototype.hasOwnProperty,bq=function(e,t){var n=Va(e),r=!n&&rf(e),i=!n&&!r&&jf(e),o=!n&&!r&&!i&&bi(e);if(n=n||r||i||o){r=e.length;for(var a=String,s=-1,c=Array(r);++s<r;)c[s]=a(s);r=c}else r=[];for(var u in a=r.length,e)!t&&!py.call(e,u)||n&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||wk(u,a))||r.push(u);return r},qy=Object.prototype,yk=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||qy)},cq=function(e,t){return function(n){return e(t(n))}},ry=cq(Object.keys,Object),sy=Object.prototype.hasOwnProperty,Ed=function(e){return null!=e&&xk(e.length)&&!qi(e)},Ad=function(e){if(Ed(e))e=bq(e);else if(yk(e)){var t,n=[];for(t in Object(e))sy.call(e,t)&&"constructor"!=t&&n.push(t);e=n}else e=ry(e);return e},Es=function(e,t){return e&&re(t,Ad(t),e)},ty=Object.prototype.hasOwnProperty,kf=function(e){if(Ed(e))e=bq(e,!0);else if(lb(e)){var t=yk(e),n=[];for(r in e)("constructor"!=r||!t&&ty.call(e,r))&&n.push(r);e=n}else{var r=[];if(null!=e)for(t in Object(e))r.push(t);e=r}return e},Cs=function(e,t){return e&&re(t,kf(t),e)},Jl=$a((function(e,t){var n=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e,r=(t=n&&n.exports===t?Cb.Buffer:void 0)?t.allocUnsafe:void 0;e.exports=function(e,t){return t?e.slice():(t=e.length,t=r?r(t):new e.constructor(t),e.copy(t),t)}})),Xh=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},uy=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o},dq=function(){return[]},vy=Object.prototype.propertyIsEnumerable,eq=Object.getOwnPropertySymbols,zk=eq?function(e){return null==e?[]:(e=Object(e),uy(eq(e),(function(t){return vy.call(e,t)})))}:dq,Ds=function(e,t){return re(e,zk(e),t)},ai=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},Ak=cq(Object.getPrototypeOf,Object),fq=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)ai(t,zk(e)),e=Ak(e);return t}:dq,Bs=function(e,t){return re(e,fq(e),t)},gq=function(e,t,n){return t=t(e),Va(e)?t:ai(t,n(e))},Yh=function(e){return gq(e,Ad,zk)},Ll=function(e){return gq(e,kf,fq)},Bk=Sd(Cb,"DataView"),Ck=Sd(Cb,"Promise"),Dk=Sd(Cb,"WeakMap"),wy=Rd(Bk),xy=Rd(ag),yy=Rd(Ck),zy=Rd(Re),Ay=Rd(Dk),Td=Qd;(Bk&&"[object DataView]"!=Td(new Bk(new ArrayBuffer(1)))||ag&&"[object Map]"!=Td(new ag)||Ck&&"[object Promise]"!=Td(Ck.resolve())||Re&&"[object Set]"!=Td(new Re)||Dk&&"[object WeakMap]"!=Td(new Dk))&&(Td=function(e){var t=Qd(e);if(e=(e="[object Object]"==t?e.constructor:void 0)?Rd(e):"")switch(e){case wy:return"[object DataView]";case xy:return"[object Map]";case yy:return"[object Promise]";case zy:return"[object Set]";case Ay:return"[object WeakMap]"}return t});var hf=Td,By=Object.prototype.hasOwnProperty,As=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&By.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Ah=Cb.Uint8Array,Ek=function(e){var t=new e.constructor(e.byteLength);return new Ah(t).set(new Ah(e)),t},Cy=/\w*$/,hq=Pb?Pb.prototype:void 0,iq=hq?hq.valueOf:void 0,vm=function(e,t){return t=t?Ek(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.length)},Fs=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Ek(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return t=n?Ek(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return vm(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return(t=new e.constructor(e.source,Cy.exec(e))).lastIndex=e.lastIndex,t;case"[object Symbol]":return iq?Object(iq.call(e)):{}}},jq=Object.create,Dy=function(){function e(){}return function(t){return lb(t)?jq?jq(t):(e.prototype=t,t=new e,e.prototype=void 0,t):{}}}(),Kl=function(e){return"function"!=typeof e.constructor||yk(e)?{}:Dy(Ak(e))},Ey=function(e){return gc(e)&&"[object Map]"==hf(e)},kq=Se&&Se.isMap,Hs=kq?zh(kq):Ey,Fy=function(e){return gc(e)&&"[object Set]"==hf(e)},lq=Se&&Se.isSet,Gs=lq?zh(lq):Fy,wa={};wa["[object Arguments]"]=wa["[object Array]"]=wa["[object ArrayBuffer]"]=wa["[object DataView]"]=wa["[object Boolean]"]=wa["[object Date]"]=wa["[object Float32Array]"]=wa["[object Float64Array]"]=wa["[object Int8Array]"]=wa["[object Int16Array]"]=wa["[object Int32Array]"]=wa["[object Map]"]=wa["[object Number]"]=wa["[object Object]"]=wa["[object RegExp]"]=wa["[object Set]"]=wa["[object String]"]=wa["[object Symbol]"]=wa["[object Uint8Array]"]=wa["[object Uint8ClampedArray]"]=wa["[object Uint16Array]"]=wa["[object Uint32Array]"]=!0,wa["[object Error]"]=wa["[object Function]"]=wa["[object WeakMap]"]=!1;var ie=function(e){return"symbol"==X(e)||gc(e)&&"[object Symbol]"==Qd(e)},Gy=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hy=/^\w*$/,Fk=function(e,t){if(Va(e))return!1;var n=X(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ie(e))||Hy.test(e)||!Gy.test(e)||null!=t&&e in Object(t)};Zh.Cache=qg;var Iy=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jy=/\\(\\)?/g,Ky=function(e){var t=(e=Zh(e,(function(e){return 500===t.size&&t.clear(),e}))).cache;return e}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Iy,(function(e,n,r,i){t.push(r?i.replace(Jy,"$1"):n||e)})),t})),Js=1/0,mq=Pb?Pb.prototype:void 0,Ol=mq?mq.toString:void 0,Bh=function(e,t){return Va(e)?e:Fk(e,t)?[e]:Ky(null==e?"":Nl(e))},Ly=1/0,cg=function(e){if("string"==typeof e||ie(e))return e;var t=e+"";return"0"==t&&1/e==-Ly?"-0":t},Ch=function(e,t){for(var n=0,r=(t=Bh(t,e)).length;null!=e&&n<r;)e=e[cg(t[n++])];return n&&n==r?e:void 0},My=function(e,t){if(!(2>(t=Bh(t,e)).length)){var n=t,r=0,i=-1,o=-1,a=n.length;for(0>r&&(r=-r>a?0:a+r),0>(i=i>a?a:i)&&(i+=a),a=r>i?0:i-r>>>0,r>>>=0,i=Array(a);++o<a;)i[o]=n[o+r];e=Ch(e,i)}return(n=null==e)||(n=null==t?0:t.length,n=delete e[cg(n?t[n-1]:void 0)]),n},nq=Function.prototype.toString,Ny=Object.prototype.hasOwnProperty,Oy=nq.call(Object),wm=function(e){return!(!gc(e)||"[object Object]"!=Qd(e))&&(null===(e=Ak(e))||"function"==typeof(e=Ny.call(e,"constructor")&&e.constructor)&&e instanceof e&&nq.call(e)==Oy)},Py=function(e){return wm(e)?void 0:e},oq=Pb?Pb.isConcatSpreadable:void 0,Ks=function(e){return Va(e)||rf(e)||!!(oq&&e&&e[oq])},Qy=function(e){return null!=e&&e.length?$h(e,1):[]},Ry=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},pq=Math.max,qq=function(e,t,n){return t=pq(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=pq(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];for(i=-1,o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(a),Ry(e,this,o)}},Sy=function(e){return function(){return e}},Dh=function(e){return e},Ty=Date.now,rq=function(e){var t=0,n=0;return function(){var r=Ty(),i=16-(r-n);if(n=r,0<i){if(800<=++t)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(yh?function(e,t){return yh(e,"toString",{configurable:!0,enumerable:!1,value:Sy(t),writable:!0})}:Dh),Gk=function(e){return rq(qq(e,void 0,Qy),e+"")}((function(e,t){var n={};if(null==e)return n;var r=!1;t=he(t,(function(t){return t=Bh(t,e),r||(r=1<t.length),t})),re(e,Ll(e),n),r&&(n=fe(n,7,Py));for(var i=t.length;i--;)My(n,t[i]);return n})),Uy=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r},um=function(e,t,n){for(var r=-1,i=Object(e),o=(n=n(e)).length;o--;){var a=n[++r];if(!1===t(i[a],a,i))break}return e},sq=function(e,t){return e&&um(e,t,Ad)},Hk=function(e,t){return function(t,n){if(null==t)return t;if(!Ed(t))return e(t,n);for(var r=t.length,i=-1,o=Object(t);++i<r&&!1!==n(o[i],i,o););return t}}(sq),Vy=function(e,t,n,r){return Hk(e,(function(e,i,o){t(r,e,n(e),o)})),r},tq=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Pl=function(e,t,n,r,i,o){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;c=o.get(e);var u=o.get(t);if(c&&u)return c==t&&u==e;c=-1,u=!0;var l=2&n?new gf:void 0;for(o.set(e,t),o.set(t,e);++c<s;){var d=e[c],h=t[c];if(r)var f=a?r(h,d,c,t,e,o):r(d,h,c,e,t,o);if(void 0!==f){if(f)continue;u=!1;break}if(l){if(!tq(t,(function(e,t){if(!l.has(t)&&(d===e||i(d,e,n,r,o)))return l.push(t)}))){u=!1;break}}else if(d!==h&&!i(d,h,n,r,o)){u=!1;break}}return o.delete(e),o.delete(t),u},Wy=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},uq=Pb?Pb.prototype:void 0,Ik=uq?uq.valueOf:void 0,Ls=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!o(new Ah(e),new Ah(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return $f(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Wy;case"[object Set]":if(s||(s=uk),e.size!=t.size&&!(1&r))break;return(n=a.get(e))?n==t:(r|=2,a.set(e,t),t=Pl(s(e),s(t),r,i,o,a),a.delete(e),t);case"[object Symbol]":if(Ik)return Ik.call(e)==Ik.call(t)}return!1},Ms=Object.prototype.hasOwnProperty,Ql=Object.prototype.hasOwnProperty,Xy=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var c=(s=n[i])[0],u=e[c],l=s[1];if(a&&s[2]){if(void 0===u&&!(c in e))return!1}else{if(s=new ge,r)var d=r(u,l,c,e,t,s);if(void 0===d?!je(l,u,3,r,s):!d)return!1}}return!0},Yy=function(e){for(var t=Ad(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,i==i&&!lb(i)]}return t},vq=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},Zy=function(e){var t=Yy(e);return 1==t.length&&t[0][2]?vq(t[0][0],t[0][1]):function(n){return n===e||Xy(n,e,t)}},$y=function(e,t){return Fk(e)&&t==t&&!lb(t)?vq(cg(e),t):function(n){var r=null==n?void 0:Ch(n,e);if(void 0===(r=void 0===r?void 0:r)&&r===t){if(r=null!=n){for(var i=-1,o=(r=Bh(r=e,n)).length,a=!1;++i<o;){var s=cg(r[i]);if(!(a=null!=n&&null!=n&&s in Object(n)))break;n=n[s]}r=a||++i!=o?a:!!(o=null==n?0:n.length)&&xk(o)&&wk(s,o)&&(Va(n)||rf(n))}s=r}else s=je(t,r,3);return s}},az=function(e){return function(t){return null==t?void 0:t[e]}},bz=function(e){return function(t){return Ch(t,e)}},Te=function(e){return"function"==typeof e?e:null==e?Dh:"object"==X(e)?Va(e)?$y(e[0],e[1]):Zy(e):Fk(e)?az(cg(e)):bz(e)},Jk=function(e,t){return function(t,n){return(Va(t)?Uy:Vy)(t,e,Te(n),{})}}((function(e,t,n){bg(e,n,t)})),uc=function(e,t){var n={};return t=Te(t),sq(e,(function(e,r,i){bg(n,r,t(e,r,i))})),n};N({target:"String",proto:!0,forced:R((function(){var e="".sub('"');return e!==e.toLowerCase()||3<e.split('"').length}))},{sub:function(){return"<sub>"+String(jb(this))+"</sub>"}});var U=xa,Qb=null;try{Qb=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(c){}xa.prototype.__isLong__,Object.defineProperty(xa.prototype,"__isLong__",{value:!0}),xa.isLong=mb;var Sl={},Rl={};xa.fromInt=Bd,xa.fromNumber=Gb,xa.fromBits=ya;var sg=Math.pow;xa.fromString=ci,xa.fromValue=Wb;var ke=4294967296,Tl=ke*ke,Vl=Tl/2,wq=Bd(16777216),Hb=Bd(0);xa.ZERO=Hb;var Cd=Bd(0,!0);xa.UZERO=Cd;var Ue=Bd(1);xa.ONE=Ue;var xq=Bd(1,!0);xa.UONE=xq;var Kk=Bd(-1);xa.NEG_ONE=Kk;var Wl=ya(-1,2147483647,!1);xa.MAX_VALUE=Wl;var Ul=ya(-1,-1,!0);xa.MAX_UNSIGNED_VALUE=Ul;var nb=ya(0,-2147483648,!1);xa.MIN_VALUE=nb;var D=xa.prototype;D.toInt=function(){return this.unsigned?this.low>>>0:this.low},D.toNumber=function(){return this.unsigned?(this.high>>>0)*ke+(this.low>>>0):this.high*ke+(this.low>>>0)},D.toString=function(e){if(2>(e=e||10)||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(nb)){var t=Gb(e),n=this.div(t);return t=n.mul(t).sub(this),n.toString(e)+t.toInt().toString(e)}return"-"+this.neg().toString(e)}n=Gb(sg(e,6),this.unsigned),t=this;for(var r="";;){var i=t.div(n),o=(t.sub(i.mul(n)).toInt()>>>0).toString(e);if((t=i).isZero())return o+r;for(;6>o.length;)o="0"+o;r=""+o+r}},D.getHighBits=function(){return this.high},D.getHighBitsUnsigned=function(){return this.high>>>0},D.getLowBits=function(){return this.low},D.getLowBitsUnsigned=function(){return this.low>>>0},D.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nb)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},D.isZero=function(){return 0===this.high&&0===this.low},D.eqz=D.isZero,D.isNegative=function(){return!this.unsigned&&0>this.high},D.isPositive=function(){return this.unsigned||0<=this.high},D.isOdd=function(){return 1==(1&this.low)},D.isEven=function(){return 0==(1&this.low)},D.equals=function(e){return mb(e)||(e=Wb(e)),(this.unsigned===e.unsigned||1!=this.high>>>31||1!=e.high>>>31)&&this.high===e.high&&this.low===e.low},D.eq=D.equals,D.notEquals=function(e){return!this.eq(e)},D.neq=D.notEquals,D.ne=D.notEquals,D.lessThan=function(e){return 0>this.comp(e)},D.lt=D.lessThan,D.lessThanOrEqual=function(e){return 0>=this.comp(e)},D.lte=D.lessThanOrEqual,D.le=D.lessThanOrEqual,D.greaterThan=function(e){return 0<this.comp(e)},D.gt=D.greaterThan,D.greaterThanOrEqual=function(e){return 0<=this.comp(e)},D.gte=D.greaterThanOrEqual,D.ge=D.greaterThanOrEqual,D.compare=function(e){if(mb(e)||(e=Wb(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},D.comp=D.compare,D.negate=function(){return!this.unsigned&&this.eq(nb)?nb:this.not().add(Ue)},D.neg=D.negate,D.add=function(e){mb(e)||(e=Wb(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=e.high>>>16,o=65535&e.high,a=e.low>>>16;return r=(a=((e=(65535&this.low)+(65535&e.low))>>>16)+(r+a))>>>16,ya((65535&a)<<16|65535&e,(t=((r+=n+o)>>>16)+(t+i)&65535)<<16|65535&r,this.unsigned)},D.subtract=function(e){return mb(e)||(e=Wb(e)),this.add(e.neg())},D.sub=D.subtract,D.multiply=function(e){if(this.isZero())return Hb;if(mb(e)||(e=Wb(e)),Qb){var t=Qb.mul(this.low,this.high,e.low,e.high);return ya(t,Qb.get_high(),this.unsigned)}if(e.isZero())return Hb;if(this.eq(nb))return e.isOdd()?nb:Hb;if(e.eq(nb))return this.isOdd()?nb:Hb;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(wq)&&e.lt(wq))return Gb(this.toNumber()*e.toNumber(),this.unsigned);t=this.high>>>16;var n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,c=i*(e=65535&e.low),u=(c>>>16)+r*e,l=u>>>16;l+=(u=(65535&u)+i*s)>>>16;var d=(l+=n*e)>>>16;return ya((65535&u)<<16|65535&c,(d=(d+=(l=(65535&l)+r*s)>>>16)+((l=(65535&l)+i*a)>>>16)+(t*e+n*s+r*a+i*o)&65535)<<16|65535&l,this.unsigned)},D.mul=D.multiply,D.divide=function(e){if(mb(e)||(e=Wb(e)),e.isZero())throw Error("division by zero");if(Qb)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?ya(e=(this.unsigned?Qb.div_u:Qb.div_s)(this.low,this.high,e.low,e.high),Qb.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Cd:Hb;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Cd;if(e.gt(this.shru(1)))return xq;var t=Cd}else{if(this.eq(nb)){if(e.eq(Ue)||e.eq(Kk))return nb;if(e.eq(nb))return Ue;var n=this.shr(1).div(e).shl(1);if(n.eq(Hb))return e.isNegative()?Ue:Kk;var r=this.sub(e.mul(n));return n.add(r.div(e))}if(e.eq(nb))return this.unsigned?Cd:Hb;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();t=Hb}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));var i=Math.ceil(Math.log(n)/Math.LN2);i=48>=i?1:sg(2,i-48);for(var o=Gb(n),a=o.mul(e);a.isNegative()||a.gt(r);)a=(o=Gb(n-=i,this.unsigned)).mul(e);o.isZero()&&(o=Ue),t=t.add(o),r=r.sub(a)}return t},D.div=D.divide,D.modulo=function(e){return mb(e)||(e=Wb(e)),Qb?ya(e=(this.unsigned?Qb.rem_u:Qb.rem_s)(this.low,this.high,e.low,e.high),Qb.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},D.mod=D.modulo,D.rem=D.modulo,D.not=function(){return ya(~this.low,~this.high,this.unsigned)},D.and=function(e){return mb(e)||(e=Wb(e)),ya(this.low&e.low,this.high&e.high,this.unsigned)},D.or=function(e){return mb(e)||(e=Wb(e)),ya(this.low|e.low,this.high|e.high,this.unsigned)},D.xor=function(e){return mb(e)||(e=Wb(e)),ya(this.low^e.low,this.high^e.high,this.unsigned)},D.shiftLeft=function(e){return mb(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?ya(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):ya(0,this.low<<e-32,this.unsigned)},D.shl=D.shiftLeft,D.shiftRight=function(e){return mb(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?ya(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):ya(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},D.shr=D.shiftRight,D.shiftRightUnsigned=function(e){if(mb(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return 32>e?ya(this.low>>>e|t<<32-e,t>>>e,this.unsigned):ya(32===e?t:t>>>e-32,0,this.unsigned)},D.shru=D.shiftRightUnsigned,D.shr_u=D.shiftRightUnsigned,D.toSigned=function(){return this.unsigned?ya(this.low,this.high,!1):this},D.toUnsigned=function(){return this.unsigned?this:ya(this.low,this.high,!0)},D.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},D.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},D.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},xa.fromBytes=function(e,t,n){return n?xa.fromBytesLE(e,t):xa.fromBytesBE(e,t)},xa.fromBytesLE=function(e,t){return new xa(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},xa.fromBytesBE=function(e,t){return new xa(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var _di=function(e,t){return(_di=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},Lk=!1,Ib={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e?console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Error().stack):Lk&&console.log("RxJS: Back to a better error behavior. Thank you. <3"),Lk=e},get useDeprecatedSynchronousErrorHandling(){return Lk}},Eh={closed:!0,next:function(e){},error:function(e){if(Ib.useDeprecatedSynchronousErrorHandling)throw e;me(e)},complete:function(){}},Jb=Array.isArray||function(e){return e&&"number"==typeof e.length},lf=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),Oa=function(){function e(e){this.closed=!1,this._subscriptions=this._parentOrParents=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){if(!this.closed){var t=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,t instanceof e)t.remove(this);else if(null!==t)for(var o=0;o<t.length;++o)t[o].remove(this);if(le(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(e){var a=e instanceof lf?Xl(e.errors):[e]}}if(Jb(i))for(o=-1,t=i.length;++o<t;)if(ei(n=i[o]))try{n.unsubscribe()}catch(e){a=a||[],e instanceof lf?a=a.concat(Xl(e.errors)):a.push(e)}if(a)throw new lf(a)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(X(t)){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof e||(t=n,(n=new e)._subscriptions=[t]);break;default:throw Error("unrecognized teardown "+t+" added to Subscription.")}if(null===(t=n._parentOrParents))n._parentOrParents=this;else if(t instanceof e){if(t===this)return n;n._parentOrParents=[t,this]}else{if(-1!==t.indexOf(this))return n;t.push(this)}return null===(t=this._subscriptions)?this._subscriptions=[n]:t.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;t&&-1!==(e=t.indexOf(e))&&t.splice(e,1)},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}(),Fh="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),ia=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=Eh;break;case 1:if(!n){o.destination=Eh;break}if("object"===X(n)){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new yq(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new yq(o,n,r,i)}return o}return O(t,e),t.prototype[Fh]=function(){return this},t.create=function(e,n,r){return(e=new t(e,n,r)).syncErrorThrowable=!1,e},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.isStopped=this.closed=!1,this._parentOrParents=e,this},t}(Oa),yq=function(e){function t(t,n,r,i){var o=e.call(this)||this;if(o._parentSubscriber=t,t=o,le(n))var a=n;else n&&(a=n.next,r=n.error,i=n.complete,n!==Eh&&(le((t=Object.create(n)).unsubscribe)&&o.add(t.unsubscribe.bind(t)),t.unsubscribe=o.unsubscribe.bind(o)));return o._context=t,o._next=a,o._error=r,o._complete=i,o}return O(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;Ib.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=Ib.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):me(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;me(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};Ib.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,n):this.__tryOrUnsub(n)}this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),Ib.useDeprecatedSynchronousErrorHandling)throw e;me(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!Ib.useDeprecatedSynchronousErrorHandling)throw Error("bad call");try{t.call(this._context,n)}catch(t){return Ib.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):me(t),!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._parentSubscriber=this._context=null,e.unsubscribe()},t}(ia),ne="function"==typeof Symbol&&Symbol.observable||"@@observable",Y=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator;e:{if(e){if(e instanceof ia)break e;if(e[Fh]){e=e[Fh]();break e}}e=e||t||n?new ia(e,t,n):new ia(Eh)}if(r?e.add(r.call(e,this.source)):e.add(this.source||Ib.useDeprecatedSynchronousErrorHandling&&!e.syncErrorThrowable?this._subscribe(e):this._trySubscribe(e)),Ib.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable&&(e.syncErrorThrowable=!1,e.syncErrorThrown))throw e.syncErrorValue;return e},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){Ib.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),fi(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Zl(t))((function(t,r){var i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[ne]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Yl(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Zl(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}(),qd=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),zq=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return O(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;this.subject=null,!t||0===t.length||e.isStopped||e.closed||-1!==(e=t.indexOf(this.subscriber))&&t.splice(e,1)}},t}(Oa),Aq=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return O(t,e),t}(ia),Pa=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return O(t,e),t.prototype[Fh]=function(){return new Aq(this)},t.prototype.lift=function(e){var t=new Bq(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new qd;if(!this.isStopped){var t=this.observers,n=t.length;t=t.slice();for(var r=0;r<n;r++)t[r].next(e)}},t.prototype.error=function(e){if(this.closed)throw new qd;this.hasError=!0,this.thrownError=e,this.isStopped=!0;var t=this.observers,n=t.length;t=t.slice();for(var r=0;r<n;r++)t[r].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new qd;this.isStopped=!0;var e=this.observers,t=e.length;e=e.slice();for(var n=0;n<t;n++)e[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.closed=this.isStopped=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new qd;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new qd;return this.hasError?(e.error(this.thrownError),Oa.EMPTY):this.isStopped?(e.complete(),Oa.EMPTY):(this.observers.push(e),new zq(this,e))},t.prototype.asObservable=function(){var e=new Y;return e.source=this,e},t.create=function(e,t){return new Bq(e,t)},t}(Y),Bq=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return O(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Oa.EMPTY},t}(Pa),Ns=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;return n._refCount++,e=new cz(e,n),t=t.subscribe(e),e.closed||(e.connection=n.connect()),t},e}(),cz=function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}return O(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;0>=t?this.connection=null:(e._refCount=t-1,1<t?this.connection=null:(t=this.connection,e=e._connection,this.connection=null,!e||t&&e!==t||e.unsubscribe()))}else this.connection=null},t}(ia),Cq=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return O(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Oa).add(this.source.subscribe(new dz(this.getSubject(),this))),e.closed&&(this._connection=null,e=Oa.EMPTY)),e},t.prototype.refCount=function(){return $l()(this)},t}(Y),At=function(){var e=Cq.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),dz=function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}return O(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(Aq);!function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}O(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;0>=t?this.connection=null:(e._refCount=t-1,1<t?this.connection=null:(t=this.connection,e=e._connection,this.connection=null,!e||t&&e!==t||e.unsubscribe()))}else this.connection=null}}(ia),function(e){function t(t,n,r,i,o){return(t=e.call(this,t)||this).keySelector=n,t.elementSelector=r,t.durationSelector=i,t.subjectSelector=o,t.groups=null,t.attemptedToUnsubscribe=!1,t.count=0,t}O(t,e),t.prototype._next=function(e){try{var t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var n=this.groups;n||(n=this.groups=new Map);var r=n.get(t);if(this.elementSelector)try{var i=this.elementSelector(e)}catch(e){this.error(e)}else i=e;if(!r&&(r=this.subjectSelector?this.subjectSelector():new Pa,n.set(t,r),e=new Mk(t,r,this),this.destination.next(e),this.durationSelector)){e=void 0;try{e=this.durationSelector(new Mk(t,r))}catch(e){return void this.error(e)}this.add(e.subscribe(new ez(t,r,this)))}r.closed||r.next(i)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach((function(t,n){t.error(e)})),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach((function(e,t){e.complete()})),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))}}(ia);var ez=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.key=t,i.group=n,i.parent=r,i}return O(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(ia),Mk=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return O(t,e),t.prototype._subscribe=function(e){var t=new Oa,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new fz(n)),t.add(r.subscribe(e)),t},t}(Y),fz=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return O(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),--t.count,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(Oa),gz=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return O(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new qd;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(Pa),dg=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return O(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,e=this.id;var n=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(n,e,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(e=this._execute(e,t))?e:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},t.prototype._execute=function(e,t){t=!1;var n=void 0;try{this.work(e)}catch(e){t=!0,n=!!e&&e||Error(e)}if(t)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return O(t,e),t.prototype.schedule=function(e,t){return this},t}(Oa)),hz=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return O(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),0<n?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return 0<n||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(dg),Nk=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),eg=function(e){function t(n,r){void 0===r&&(r=Nk.now);var i=e.call(this,n,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return O(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Nk),fg=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t}(eg))(hz),vb=new Y((function(e){return e.complete()})),am=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},Ok;!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(Ok||(Ok={}));var Ve=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return bb(this.value);case"E":return Z(this.error);case"C":return mf()}throw Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),Rs=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new Dq(e,this.scheduler,this.delay))},e}(),Dq=function(e){function t(t,n,r){return void 0===r&&(r=0),(t=e.call(this,t)||this).scheduler=n,t.delay=r,t}return O(t,e),t.dispatch=function(e){e.notification.observe(e.destination),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new iz(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Ve.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Ve.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Ve.createComplete()),this.unsubscribe()},t}(ia),iz=function(e,t){this.notification=e,this.destination=t},qe=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=1>t?1:t,i._windowTime=1>n?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return O(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new jz(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;if(this.closed)throw new qd;if(this.isStopped||this.hasError)var o=Oa.EMPTY;else this.observers.push(e),o=new zq(this,e);if(r&&e.add(e=new Dq(e,r)),t)for(t=0;t<i&&!e.closed;t++)e.next(n[t]);else for(t=0;t<i&&!e.closed;t++)e.next(n[t].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o},t.prototype._getNow=function(){return(this.scheduler||fg).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),0<o&&r.splice(0,o),r},t}(Pa),jz=function(e,t){this.time=e,this.value=t},of=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return O(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),Oa.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),Oa.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(Pa),kz=1,lz=Promise.resolve(),ii={},Eq={setImmediate:function(e){var t=kz++;return ii[t]=!0,lz.then((function(){return bm(t)&&e()})),t},clearImmediate:function(e){bm(e)}},mz=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return O(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=Eq.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(Eq.clearImmediate(n),t.scheduled=void 0)},t}(dg),ri=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(eg))(mz),nz=ri,Pk=new eg(dg),bd=Pk,oz=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return O(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(dg),Fq=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(eg))(oz),pz=function(e){function t(t,n){void 0===t&&(t=Gq),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return O(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(eg),Gq=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return O(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),this.delay=e.frame+r,(e=e.actions).push(this),e.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(dg),Qk=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),vg=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),pb=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),Ss=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new qz(e,this.project,this.thisArg))},e}(),qz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).project=n,t.count=0,t.thisArg=r||t,t}return O(t,e),t.prototype._next=function(e){try{var t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(ia),Rk=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(ia),Xs=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return O(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(ia),rz=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,me),t}},$c="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",sz=function(e){return function(t){for(var n=e[$c]();;){var r=void 0;try{r=n.next()}catch(e){return t.error(e),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t}},tz=function(e){return function(t){var n=e[ne]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},hm=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e},pf=function(e){if(e&&"function"==typeof e[ne])return tz(e);if(hm(e))return am(e);if(fm(e))return rz(e);if(e&&"function"==typeof e[$c])return sz(e);throw e=ei(e)?"an invalid object":"'"+e+"'",new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},Hq={},vz=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new uz(e,this.resultSelector))},e}(),uz=function(e){function t(t,n){return(t=e.call(this,t)||this).resultSelector=n,t.active=0,t.values=[],t.observables=[],t}return O(t,e),t.prototype._next=function(e){this.values.push(Hq),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.toRespond=this.active=t;for(var n=0;n<t;n++)this.add(ji(this,e[n],void 0,n))}},t.prototype.notifyComplete=function(e){0==--this.active&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n){var r=(e=this.values)[n];r=this.toRespond?r===Hq?--this.toRespond:this.toRespond:0,e[n]=t,0===r&&(this.resultSelector?this._tryResultSelector(e):this.destination.next(e.slice()))},t.prototype._tryResultSelector=function(e){try{var t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Rk),vc=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return O(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(ia);!function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i}O(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}}(ia);var wc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(ia);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}O(t,e),t.prototype.notifyNext=function(e,t,n,r){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()}}(ia);var at=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new wz(e,this.project,this.concurrent))},e}(),wz=function(e){function t(t,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),(t=e.call(this,t)||this).project=n,t.concurrent=r,t.hasCompleted=!1,t.buffer=[],t.active=0,t.index=0,t}return O(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(n)},t.prototype._innerSub=function(e){var t=new vc(this),n=this.destination;n.add(t),(e=ic(e,t))!==t&&n.add(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(wc),Sk=y.parseFloat,Iq=-1/0!=1/Sk("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff-0")?function(e){e=ik(String(e));var t=Sk(e);return 0===t&&"-"==e.charAt(0)?-0:t}:Sk;N({global:!0,forced:parseFloat!=Iq},{parseFloat:Iq});var Tk=new Y(hc),ft=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new xz(e,this.predicate,this.thisArg))},e}(),xz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).predicate=n,t.thisArg=r,t.count=0,t}return O(t,e),t.prototype._next=function(e){try{var t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(ia),gt=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new yz(e))},e}(),yz=function(e){function t(t){return(t=e.call(this,t)||this).hasFirst=!1,t.observables=[],t.subscriptions=[],t}return O(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=ji(this,e[n],void 0,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},t.prototype.notifyNext=function(e,t,n){if(!this.hasFirst){for(this.hasFirst=!0,e=0;e<this.subscriptions.length;e++)if(e!==n){var r=this.subscriptions[e];r.unsubscribe(),this.remove(r)}this.subscriptions=null}this.destination.next(t)},t}(Rk),jt=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new zz(e,this.resultSelector))},e}(),zz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).resultSelector=n,t.iterators=[],t.active=0,t.resultSelector="function"==typeof n?n:void 0,t}return O(t,e),t.prototype._next=function(e){var t=this.iterators;Jb(e)?t.push(new Az(e)):"function"==typeof e[$c]?t.push(new Bz(e[$c]())):t.push(new Cz(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0===t)this.destination.complete();else{this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){var i=e[r];if("function"==typeof i.hasValue&&!i.hasValue())return}var o=!1,a=[];for(r=0;r<t;r++){var s=(i=e[r]).next();if(i.hasCompleted()&&(o=!0),s.done)return void n.complete();a.push(s.value)}this.resultSelector?this._tryresultSelector(a):n.next(a),o&&n.complete()},t.prototype._tryresultSelector=function(e){try{var t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(ia),Bz=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return!(!e||!e.done)},e}(),Az=function(){function e(e){this.array=e,this.length=this.index=0,this.length=e.length}return e.prototype[$c]=function(){return this},e.prototype.next=function(e){e=this.index++;var t=this.array;return e<this.length?{value:t[e],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),Cz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).parent=n,t.observable=r,t.stillUnsubscribed=!0,t.buffer=[],t.isComplete=!1,t}return O(t,e),t.prototype[$c]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return 0<this.buffer.length},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return ic(this.observable,new vc(this))},t}(wc),Dz=Object.freeze({__proto__:null,Observable:Y,ConnectableObservable:Cq,GroupedObservable:Mk,observable:ne,Subject:Pa,BehaviorSubject:gz,ReplaySubject:qe,AsyncSubject:of,asap:nz,asapScheduler:ri,async:bd,asyncScheduler:Pk,queue:fg,queueScheduler:fg,animationFrame:Fq,animationFrameScheduler:Fq,VirtualTimeScheduler:pz,VirtualAction:Gq,Scheduler:Nk,Subscription:Oa,Subscriber:ia,Notification:Ve,get NotificationKind(){return Ok},pipe:gi,noop:hc,identity:Yc,isObservable:function(e){return!!e&&(e instanceof Y||"function"==typeof e.lift&&"function"==typeof e.subscribe)},ArgumentOutOfRangeError:Qk,EmptyError:vg,ObjectUnsubscribedError:qd,UnsubscriptionError:lf,TimeoutError:pb,bindCallback:cm,bindNodeCallback:dm,combineLatest:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=t=void 0;return Zc(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&Jb(e[0])&&(e=e[0]),nf(e,n).lift(new vz(t))},concat:im,defer:ad,empty:mf,forkJoin:jm,from:Kb,fromEvent:gb,fromEventPattern:lm,generate:function(e,t,n,r,i){if(1==arguments.length){var o=e.initialState;t=e.condition,n=e.iterate;var a=e.resultSelector||Yc;i=e.scheduler}else void 0===r||Zc(r)?(o=e,a=Yc,i=r):(o=e,a=r);return new Y((function(e){var r=o;if(i)return i.schedule(bt,0,{subscriber:e,iterate:n,condition:t,resultSelector:a,state:r});for(;;){if(t){var s=void 0;try{s=t(r)}catch(t){e.error(t);break}if(!s){e.complete();break}}s=void 0;try{s=a(r)}catch(t){e.error(t);break}if(e.next(s),e.closed)break;try{r=n(r)}catch(t){e.error(t);break}}}))},iif:function(e,t,n){return void 0===t&&(t=vb),void 0===n&&(n=vb),ad((function(){return e()?t:n}))},interval:mm,merge:Xb,never:function(){return Tk},of:bb,onErrorResumeNext:li,pairs:function(e,t){return new Y(t?function(n){var r=Object.keys(e),i=new Oa;return i.add(t.schedule(dt,0,{keys:r,index:0,subscriber:n,subscription:i,obj:e})),i}:function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})},partition:function(e,t,n){return[wb(t,n)(new Y(pf(e))),wb(et(t,n))(new Y(pf(e)))]},race:Ca,range:function(e,t,n){return void 0===e&&(e=0),new Y((function(r){void 0===t&&(t=e,e=0);var i=0,o=e;if(n)return n.schedule(ht,0,{index:i,count:t,start:e,subscriber:r});for(;;){if(i++>=t){r.complete();break}if(r.next(o++),r.closed)break}}))},throwError:Z,timer:Bc,using:function(e,t){return new Y((function(n){try{var r=e()}catch(e){return void n.error(e)}try{var i=t(r)}catch(e){return void n.error(e)}var o=(i?Kb(i):vb).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))},zip:mi,scheduled:gm,EMPTY:vb,NEVER:Tk,config:Ib}),kt=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new Ez(e,this.selector,this.caught))},e}(),Ez=function(e){function t(t,n,r){return(t=e.call(this,t)||this).selector=n,t.caught=r,t}return O(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),t=new vc(this),this.add(t),(n=ic(n,t))!==t&&this.add(n)}},t}(wc),lt=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new Fz(e,this.defaultValue))},e}(),Fz=function(e){function t(t,n){return(t=e.call(this,t)||this).defaultValue=n,t.isEmpty=!0,t}return O(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(ia),mt=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new Gz(e,this.delay,this.scheduler))},e}(),Gz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).delay=n,t.scheduler=r,t.queue=[],t.active=!1,t.errored=!1,t}return O(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;0<n.length&&0>=n[0].time-r.now();)n.shift().notification.observe(i);0<n.length?(t=Math.max(0,n[0].time-r.now()),this.schedule(e,t)):(this.unsubscribe(),t.active=!1)},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler;e=new Hz(t.now()+this.delay,e),this.queue.push(e),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(Ve.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(Ve.createComplete()),this.unsubscribe()},t}(ia),Hz=function(e,t){this.time=e,this.notification=t},nt=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new Iz(e,this.keySelector,this.flushes))},e}(),Iz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).keySelector=n,t.values=new Set,r&&t.add(ic(r,new vc(t))),t}return O(t,e),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t=this.destination;try{var n=this.keySelector(e)}catch(e){return void t.error(e)}this._finalizeNext(n,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(wc),pt=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new Jz(e,this.errorFactory))},e}(),Jz=function(e){function t(t,n){return(t=e.call(this,t)||this).errorFactory=n,t.hasValue=!1,t}return O(t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(ia),qt=function(){function e(e){if(this.total=e,0>this.total)throw new Qk}return e.prototype.call=function(e,t){return t.subscribe(new Kz(e,this.total))},e}(),Kz=function(e){function t(t,n){return(t=e.call(this,t)||this).total=n,t.count=0,t}return O(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(ia),rt=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new Lz(e,this.project))},e}(),Lz=function(e){function t(t,n){return(t=e.call(this,t)||this).project=n,t.hasSubscription=!1,t.hasCompleted=!1,t.index=0,t}return O(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(e){return void this.destination.error(e)}this.hasSubscription=!0,this._innerSub(n)},t.prototype._innerSub=function(e){var t=new vc(this),n=this.destination;n.add(t),(e=ic(e,t))!==t&&n.add(e)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(wc),st=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new Mz(e,this.callback))},e}(),Mz=function(e){function t(t,n){return(t=e.call(this,t)||this).add(new Oa(n)),t}return O(t,e),t}(ia),ut=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Nz(e))},e}(),Nz=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.prototype._next=function(e){},t}(ia),vt=function(){function e(e){if(this.total=e,0>this.total)throw new Qk}return e.prototype.call=function(e,t){return t.subscribe(new Oz(e,this.total))},e}(),Oz=function(e){function t(t,n){return(t=e.call(this,t)||this).total=n,t.ring=[],t.count=0,t}return O(t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(0<t)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=t++%n;e.next(r[o])}e.complete()},t}(ia),wt=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new Pz(e,this.value))},e}(),Pz=function(e){function t(t,n){return(t=e.call(this,t)||this).value=n,t}return O(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(ia),xt=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new Qz(e,this.accumulator,this.seed,this.hasSeed))},e}(),Qz=function(e){function t(t,n,r,i){return(t=e.call(this,t)||this).accumulator=n,t._seed=r,t.hasSeed=i,t.index=0,t}return O(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t=this.index++;try{var n=this.accumulator(this.seed,e,t)}catch(e){this.destination.error(e)}this.seed=n,this.destination.next(n)},t}(ia),zt=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory();return(e=n(r).subscribe(e)).add(t.subscribe(r)),e},e}(),Bt=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new Rz(e,this.notifier,this.source))},e}(),Rz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).notifier=n,t.source=r,t}return O(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.retriesSubscription=this.errors=void 0;else{n=new Pa;try{r=(0,this.notifier)(n)}catch(t){return e.prototype.error.call(this,t)}i=ic(r,new vc(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(wc),Et=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new Sz(e,this.project))},e}(),Sz=function(e){function t(t,n){return(t=e.call(this,t)||this).project=n,t.index=0,t}return O(t,e),t.prototype._next=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(e){return void this.destination.error(e)}this._innerSub(n)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),t=new vc(this);var n=this.destination;n.add(t),this.innerSubscription=ic(e,t),this.innerSubscription!==t&&n.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(wc),Ft=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){e=new Tz(e);var n=ic(this.notifier,new vc(e));return n&&!e.seenValue?(e.add(n),t.subscribe(e)):e},e}(),Tz=function(e){function t(t){return(t=e.call(this,t)||this).seenValue=!1,t}return O(t,e),t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(wc),Ht=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new Uz(e,this.predicate,this.inclusive))},e}(),Uz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).predicate=n,t.inclusive=r,t.index=0,t}return O(t,e),t.prototype._next=function(e){var t=this.destination;try{var n=this.predicate(e,this.index++)}catch(e){return void t.error(e)}this.nextOrComplete(e,n)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;t?n.next(e):(this.inclusive&&n.next(e),n.complete())},t}(ia),It=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new Vz(e,this.nextOrObserver,this.error,this.complete))},e}(),Vz=function(e){function t(t,n,r,i){return(t=e.call(this,t)||this)._tapNext=hc,t._tapError=hc,t._tapComplete=hc,t._tapError=r||hc,t._tapComplete=i||hc,le(n)?(t._context=t,t._tapNext=n):n&&(t._context=n,t._tapNext=n.next||hc,t._tapError=n.error||hc,t._tapComplete=n.complete||hc),t}return O(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(ia),Kt={leading:!0,trailing:!1};!function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.destination=t,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}O(t,e),t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this._sendValue;this._hasValue&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0},t.prototype.throttle=function(e){(e=this.tryDurationSelector(e))&&this.add(this._throttled=ic(e,new vc(this)))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},t.prototype.throttlingDone=function(){var e=this._throttled,t=this._trailing;e&&e.unsubscribe(),this._throttled=void 0,t&&this.send()},t.prototype.notifyNext=function(){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()}}(wc);for(var Lt=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new Wz(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),Wz=function(e){function t(t,n,r,i,o){return(t=e.call(this,t)||this).duration=n,t.scheduler=r,t.leading=i,t.trailing=o,t._hasTrailingValue=!1,t._trailingValue=null,t}return O(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Mt,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(ia),Ot=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new Xz(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),Xz=function(e){function t(t,n,r,i,o){return(t=e.call(this,t)||this).absoluteTimeout=n,t.waitFor=r,t.withObservable=i,t.scheduler=o,t.scheduleTimeout(),t}return O(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(ic(t,new vc(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=void 0,this.withObservable=this.scheduler=null},t}(wc),Qt=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new Yz(e,this.observables,this.project))},e}(),Yz=function(e){function t(t,n,r){(t=e.call(this,t)||this).observables=n,t.project=r,t.toRespond=[],r=n.length,t.values=Array(r);for(var i=0;i<r;i++)t.toRespond.push(i);for(i=0;i<r;i++)t.add(ji(t,n[i],void 0,i));return t}return O(t,e),t.prototype.notifyNext=function(e,t,n){this.values[n]=t,0<(e=this.toRespond).length&&-1!==(n=e.indexOf(n))&&e.splice(n,1)},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){0===this.toRespond.length&&(e=[e].concat(this.values),this.project?this._tryProject(e):this.destination.next(e))},t.prototype._tryProject=function(e){try{var t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Rk),Jq=$a((function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=Array(16);e.exports=function(){for(var e,t=0;16>t;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}})),ab=[],Gh=0;256>Gh;++Gh)ab[Gh]=(Gh+256).toString(16).substr(1);var Kq=function(e,t){return t=t||0,[ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]]].join("")},Ud=function(e,t,n){if(n=t&&n||0,"string"==typeof e&&(t="binary"===e?Array(16):null,e=null),(e=(e=e||{}).random||(e.rng||Jq)())[6]=15&e[6]|64,e[8]=63&e[8]|128,t)for(var r=0;16>r;++r)t[n+r]=e[r];return t||Kq(e)},gg=Ud(),Uk=!1,Pc,rd,Vk,Wk,sd,Vd,ec,We,Rb,Xk,Qc,Wd,Rc,Sc,Tc,Xe,Uc,Vc;!function(e){e[e.ATTRIBUTE_OPERATION_ERR_FAILURE=2]="ATTRIBUTE_OPERATION_ERR_FAILURE",e[e.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT=3]="ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT",e[e.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW=4]="ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW",e[e.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN=5]="ATTRIBUTE_OPERATION_ERR_TOO_OFTEN",e[e.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND=6]="ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND",e[e.ATTRIBUTE_OPERATION_ERR_TIMEOUT=7]="ATTRIBUTE_OPERATION_ERR_TIMEOUT",e[e.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN=102]="ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN"}(Pc||(Pc={})),function(e){e[e.CHANNEL_MESSAGE_ERR_FAILURE=1]="CHANNEL_MESSAGE_ERR_FAILURE",e[e.CHANNEL_MESSAGE_ERR_TIMEOUT=2]="CHANNEL_MESSAGE_ERR_TIMEOUT",e[e.CHANNEL_MESSAGE_ERR_TOO_OFTEN=3]="CHANNEL_MESSAGE_ERR_TOO_OFTEN",e[e.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE=4]="CHANNEL_MESSAGE_ERR_INVALID_MESSAGE",e[e.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL=5]="CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL",e[e.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(rd||(rd={})),function(e){e[e.CREATE_CHANNEL_ERR_INVALID_ARGUMENT=1]="CREATE_CHANNEL_ERR_INVALID_ARGUMENT"}(Vk||(Vk={})),function(e){e[e.CREATE_INSTANCE_ERR_INVALID_ARGUMENT=1]="CREATE_INSTANCE_ERR_INVALID_ARGUMENT"}(Wk||(Wk={})),function(e){e[e.GET_MEMBERS_ERR_FAILURE=1]="GET_MEMBERS_ERR_FAILURE",e[e.GET_MEMBERS_ERR_REJECTED=2]="GET_MEMBERS_ERR_REJECTED",e[e.GET_MEMBERS_ERR_TIMEOUT=3]="GET_MEMBERS_ERR_TIMEOUT",e[e.GET_MEMBERS_ERR_TOO_OFTEN=4]="GET_MEMBERS_ERR_TOO_OFTEN",e[e.GET_MEMBERS_ERR_NOT_IN_CHANNEL=5]="GET_MEMBERS_ERR_NOT_IN_CHANNEL",e[e.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN=102]="GET_MEMBERS_ERR_USER_NOT_LOGGED_IN"}(sd||(sd={})),function(e){e[e.INVITATION_API_CALL_ERR_INVALID_ARGUMENT=1]="INVITATION_API_CALL_ERR_INVALID_ARGUMENT",e[e.INVITATION_API_CALL_ERR_NOT_STARTED=2]="INVITATION_API_CALL_ERR_NOT_STARTED",e[e.INVITATION_API_CALL_ERR_ALREADY_END=3]="INVITATION_API_CALL_ERR_ALREADY_END",e[e.INVITATION_API_CALL_ERR_ALREADY_ACCEPT=4]="INVITATION_API_CALL_ERR_ALREADY_ACCEPT",e[e.INVITATION_API_CALL_ERR_ALREADY_SENT=5]="INVITATION_API_CALL_ERR_ALREADY_SENT"}(Vd||(Vd={})),function(e){e[e.JOIN_CHANNEL_ERR_FAILURE=1]="JOIN_CHANNEL_ERR_FAILURE",e[e.JOIN_CHANNEL_ERR_REJECTED=2]="JOIN_CHANNEL_ERR_REJECTED",e[e.JOIN_CHANNEL_ERR_INVALID_ARGUMENT=3]="JOIN_CHANNEL_ERR_INVALID_ARGUMENT",e[e.JOIN_CHANNEL_TIMEOUT=4]="JOIN_CHANNEL_TIMEOUT",e[e.JOIN_CHANNEL_ERR_EXCEED_LIMIT=5]="JOIN_CHANNEL_ERR_EXCEED_LIMIT",e[e.JOIN_CHANNEL_ERR_ALREADY_JOINED=6]="JOIN_CHANNEL_ERR_ALREADY_JOINED",e[e.JOIN_CHANNEL_ERR_TOO_OFTEN=7]="JOIN_CHANNEL_ERR_TOO_OFTEN",e[e.JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN=8]="JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN",e[e.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN",e[e.JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE=201]="JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE",e[e.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID=202]="JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID"}(ec||(ec={})),function(e){e[e.LEAVE_CHANNEL_ERR_FAILURE=1]="LEAVE_CHANNEL_ERR_FAILURE",e[e.LEAVE_CHANNEL_ERR_REJECTED=2]="LEAVE_CHANNEL_ERR_REJECTED",e[e.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL=3]="LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL",e[e.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN"}(We||(We={})),function(e){e[e.LOGIN_ERR_UNKNOWN=1]="LOGIN_ERR_UNKNOWN",e[e.LOGIN_ERR_REJECTED=2]="LOGIN_ERR_REJECTED",e[e.LOGIN_ERR_INVALID_ARGUMENT=3]="LOGIN_ERR_INVALID_ARGUMENT",e[e.LOGIN_ERR_INVALID_APP_ID=4]="LOGIN_ERR_INVALID_APP_ID",e[e.LOGIN_ERR_INVALID_TOKEN=5]="LOGIN_ERR_INVALID_TOKEN",e[e.LOGIN_ERR_TOKEN_EXPIRED=6]="LOGIN_ERR_TOKEN_EXPIRED",e[e.LOGIN_ERR_NOT_AUTHORIZED=7]="LOGIN_ERR_NOT_AUTHORIZED",e[e.LOGIN_ERR_ALREADY_LOGIN=8]="LOGIN_ERR_ALREADY_LOGIN",e[e.LOGIN_ERR_TIMEOUT=9]="LOGIN_ERR_TIMEOUT",e[e.LOGIN_ERR_TOO_OFTEN=10]="LOGIN_ERR_TOO_OFTEN",e[e.LOGIN_ERR_ABORTED_BY_LOGOUT=201]="LOGIN_ERR_ABORTED_BY_LOGOUT"}(Rb||(Rb={})),function(e){e[e.LOGOUT_ERR_USER_NOT_LOGGED_IN=102]="LOGOUT_ERR_USER_NOT_LOGGED_IN"}(Xk||(Xk={})),function(e){e[e.PEER_MESSAGE_ERR_FAILURE=1]="PEER_MESSAGE_ERR_FAILURE",e[e.PEER_MESSAGE_ERR_TIMEOUT=2]="PEER_MESSAGE_ERR_TIMEOUT",e[e.PEER_MESSAGE_ERR_TOO_OFTEN=5]="PEER_MESSAGE_ERR_TOO_OFTEN",e[e.PEER_MESSAGE_ERR_INVALID_USERID=6]="PEER_MESSAGE_ERR_INVALID_USERID",e[e.PEER_MESSAGE_ERR_INVALID_MESSAGE=7]="PEER_MESSAGE_ERR_INVALID_MESSAGE",e[e.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE=8]="PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE",e[e.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(Qc||(Qc={})),function(e){e[e.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT=2]="QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED=3]="QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT=4]="QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN=5]="QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN"}(Wd||(Wd={})),function(e){e[e.RENEW_TOKEN_ERR_FAILURE=1]="RENEW_TOKEN_ERR_FAILURE",e[e.RENEW_TOKEN_ERR_INVALID_ARGUMENT=2]="RENEW_TOKEN_ERR_INVALID_ARGUMENT",e[e.RENEW_TOKEN_ERR_REJECTED=3]="RENEW_TOKEN_ERR_REJECTED",e[e.RENEW_TOKEN_ERR_TOO_OFTEN=4]="RENEW_TOKEN_ERR_TOO_OFTEN",e[e.RENEW_TOKEN_ERR_TOKEN_EXPIRED=5]="RENEW_TOKEN_ERR_TOKEN_EXPIRED",e[e.RENEW_TOKEN_ERR_INVALID_TOKEN=6]="RENEW_TOKEN_ERR_INVALID_TOKEN",e[e.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN=102]="RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN",e[e.RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT=201]="RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT"}(Rc||(Rc={})),function(e){e[e.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE=1]="GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT=2]="GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN=3]="GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT=4]="GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT=5]="GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED=101]="GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN=102]="GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN"}(Sc||(Sc={})),function(e){e[e.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE=1]="PEER_SUBSCRIPTION_STATUS_ERR_FAILURE",e[e.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT=2]="PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT",e[e.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED=3]="PEER_SUBSCRIPTION_STATUS_ERR_REJECTED",e[e.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT=4]="PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT",e[e.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN=5]="PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN",e[e.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW=6]="PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW",e[e.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN=102]="PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN"}(Tc||(Tc={})),function(e){e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE=1]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT=2]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN=3]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN"}(Xe||(Xe={})),function(e){e[e.UPLOAD_MEDIA_ERR_FAILURE=1]="UPLOAD_MEDIA_ERR_FAILURE",e[e.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="UPLOAD_MEDIA_ERR_INVALID_ARGUMENT",e[e.UPLOAD_MEDIA_ERR_TIMEOUT=3]="UPLOAD_MEDIA_ERR_TIMEOUT",e[e.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW=4]="UPLOAD_MEDIA_ERR_SIZE_OVERFLOW",e[e.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",e[e.UPLOAD_MEDIA_ERR_INTERRUPTED=6]="UPLOAD_MEDIA_ERR_INTERRUPTED",e[e.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="UPLOAD_MEDIA_ERR_NOT_LOGGED_IN"}(Uc||(Uc={})),function(e){e[e.DOWNLOAD_MEDIA_ERR_FAILURE=1]="DOWNLOAD_MEDIA_ERR_FAILURE",e[e.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT",e[e.DOWNLOAD_MEDIA_ERR_TIMEOUT=3]="DOWNLOAD_MEDIA_ERR_TIMEOUT",e[e.DOWNLOAD_MEDIA_ERR_NOT_EXIST=4]="DOWNLOAD_MEDIA_ERR_NOT_EXIST",e[e.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",e[e.DOWNLOAD_MEDIA_ERR_INTERRUPTED=6]="DOWNLOAD_MEDIA_ERR_INTERRUPTED",e[e.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN"}(Vc||(Vc={}));var Sb=Pc.ATTRIBUTE_OPERATION_ERR_FAILURE,Ja=Pc.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT,se=Pc.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW;Pc.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN;var Lq=Pc.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND,Tb=Pc.ATTRIBUTE_OPERATION_ERR_TIMEOUT,Ub=Pc.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN,hg=rd.CHANNEL_MESSAGE_ERR_FAILURE,Yk=rd.CHANNEL_MESSAGE_ERR_TIMEOUT,Mq=rd.CHANNEL_MESSAGE_ERR_TOO_OFTEN,Hh=rd.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE;rd.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL;var ig=rd.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN,Zz=Vk.CREATE_CHANNEL_ERR_INVALID_ARGUMENT,Nq=Wk.CREATE_INSTANCE_ERR_INVALID_ARGUMENT;Sc.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE;var Oq=Sc.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT;Sc.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN;var Pq=Sc.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT,$z=Sc.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT;Sc.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED;var aA=Sc.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN,bA=sd.GET_MEMBERS_ERR_FAILURE,cA=sd.GET_MEMBERS_ERR_REJECTED;sd.GET_MEMBERS_ERR_TIMEOUT,sd.GET_MEMBERS_ERR_TOO_OFTEN;var dA=sd.GET_MEMBERS_ERR_NOT_IN_CHANNEL,eA=sd.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN,xc=Vd.INVITATION_API_CALL_ERR_INVALID_ARGUMENT,fA=Vd.INVITATION_API_CALL_ERR_NOT_STARTED,Ih=Vd.INVITATION_API_CALL_ERR_ALREADY_END,Qq=Vd.INVITATION_API_CALL_ERR_ALREADY_ACCEPT,gA=Vd.INVITATION_API_CALL_ERR_ALREADY_SENT,Rq=ec.JOIN_CHANNEL_ERR_FAILURE;ec.JOIN_CHANNEL_ERR_REJECTED;var hA=ec.JOIN_CHANNEL_ERR_INVALID_ARGUMENT,Sq=ec.JOIN_CHANNEL_TIMEOUT,Tq=ec.JOIN_CHANNEL_ERR_EXCEED_LIMIT,Uq=ec.JOIN_CHANNEL_ERR_ALREADY_JOINED;ec.JOIN_CHANNEL_ERR_TOO_OFTEN;var Vq=ec.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN,Wq=ec.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID,Xq=We.LEAVE_CHANNEL_ERR_FAILURE,Yq=We.LEAVE_CHANNEL_ERR_REJECTED,iA=We.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL,jA=We.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN,Zq=Rb.LOGIN_ERR_UNKNOWN,jg=Rb.LOGIN_ERR_REJECTED,Jh=Rb.LOGIN_ERR_INVALID_ARGUMENT,$q=Rb.LOGIN_ERR_INVALID_APP_ID,ar=Rb.LOGIN_ERR_INVALID_TOKEN,Kh=Rb.LOGIN_ERR_TOKEN_EXPIRED;Rb.LOGIN_ERR_NOT_AUTHORIZED;var kA=Rb.LOGIN_ERR_ALREADY_LOGIN,lA=Rb.LOGIN_ERR_TIMEOUT,mA=Rb.LOGIN_ERR_TOO_OFTEN,br=Xk.LOGOUT_ERR_USER_NOT_LOGGED_IN,cr=Qc.PEER_MESSAGE_ERR_FAILURE,Zk=Qc.PEER_MESSAGE_ERR_TIMEOUT,dr=Qc.PEER_MESSAGE_ERR_TOO_OFTEN,$k=Qc.PEER_MESSAGE_ERR_INVALID_USERID,ve=Qc.PEER_MESSAGE_ERR_INVALID_MESSAGE,al=Qc.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN,nA=Qc.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE,er=Wd.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT;Wd.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED;var oA=Wd.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT;Wd.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN;var pA=Wd.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN,qA=Rc.RENEW_TOKEN_ERR_FAILURE,rA=Rc.RENEW_TOKEN_ERR_INVALID_ARGUMENT;Rc.RENEW_TOKEN_ERR_REJECTED,Rc.RENEW_TOKEN_ERR_TOO_OFTEN;var sA=Rc.RENEW_TOKEN_ERR_TOKEN_EXPIRED,tA=Rc.RENEW_TOKEN_ERR_INVALID_TOKEN,uA=Rc.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN,fr=Tc.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE,kg=Tc.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT;Tc.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED;var vA=Tc.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT;Tc.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN;var gr=Tc.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW,bl=Tc.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN;Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE,Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT,Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN,Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN;var lg=Uc.UPLOAD_MEDIA_ERR_FAILURE,wf=Uc.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT,Lh=Uc.UPLOAD_MEDIA_ERR_TIMEOUT,wA=Uc.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW,xA=Uc.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,hr=Uc.UPLOAD_MEDIA_ERR_INTERRUPTED,yA=Uc.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN,mg=Vc.DOWNLOAD_MEDIA_ERR_FAILURE,cl=Vc.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT,zA=Vc.DOWNLOAD_MEDIA_ERR_TIMEOUT,AA=Vc.DOWNLOAD_MEDIA_ERR_NOT_EXIST,BA=Vc.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,ir=Vc.DOWNLOAD_MEDIA_ERR_INTERRUPTED,CA=Vc.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN,DA=function(e,t){var n;return Hk(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n},Mh=function(e,t,n){if(!lb(n))return!1;var r=X(t);return!!("number"==r?Ed(n)&&wk(t,n.length):"string"==r&&t in n)&&$f(n[t],e)},dl=function(e,t,n){var r=Va(e)?tq:DA;return n&&Mh(e,t,n)&&(t=void 0),r(e,Te(t))},EA=function(e,t){var n=-1,r=Ed(e)?Array(e.length):[];return Hk(e,(function(e,i,o){r[++n]=t(e,i,o)})),r},FA=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},GA=function(e,t,n){t=t.length?he(t,(function(e){return Va(e)?function(t){return Ch(t,1===e.length?e[0]:e)}:e})):[Dh];var r=-1;return t=he(t,zh(Te)),e=EA(e,(function(e,n,i){return{criteria:he(t,(function(t){return t(e)})),index:++r,value:e}})),FA(e,(function(e,t){e:{for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){t:{var c=i[r],u=o[r];if(c!==u){var l=void 0!==c,d=null===c,h=c==c,f=ie(c),p=void 0!==u,v=null===u,g=u==u,m=ie(u);if(!v&&!m&&!f&&c>u||f&&p&&g&&!v&&!m||d&&p&&g||!l&&g||!h){c=1;break t}if(!d&&!f&&!m&&c<u||m&&l&&h&&!d&&!f||v&&l&&h||!p&&h||!g){c=-1;break t}}c=0}if(c){e=r>=s?c:c*("desc"==n[r]?-1:1);break e}}e=e.index-t.index}return e}))},jr=function(e,t){return rq(qq(e,t,Dh),e+"")},kr=jr((function(e,t){if(null==e)return[];var n=t.length;return 1<n&&Mh(e,t[0],t[1])?t=[]:2<n&&Mh(t[0],t[1],t[2])&&(t=[t[0]]),GA(e,$h(t,1),[])})),lr=function(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}(Dz),mr=$a((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=[],r=function(e,t){return new WebSocket(e,t)};t.normalClosureMessage="Normal closure",t.default=function(e,i){var o=(i=void 0===i?{protocols:n,makeWebSocket:r}:i).protocols,a=void 0===o?n:o,s=void 0===(i=i.makeWebSocket)?r:i;return new lr.Observable((function(n){var r,i=new lr.Subject,o=s(e,a),c=!1,u=!1,l=function(e){if(r)throw c=!0,e=Error("Web socket message factory function called more than once"),n.error(e),e;return r=e.subscribe((function(e){o.send(e)})),i};return o.onopen=function(){u?(c=!0,o.close()):n.next(l)},o.onmessage=function(e){i.next(e.data)},o.onerror=function(e){c=!0,n.error(Error(e.message))},o.onclose=function(e){c||(c=!0,u?(n.complete(),i.complete()):n.error(Error(1e3===e.code?t.normalClosureMessage:e.reason)))},function(){u=!0,r&&r.unsubscribe(),c||(c=!0,o.close())}}))}}));!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}(mr);var pi=function(e,t,n){(void 0===n||$f(e[t],n))&&(void 0!==n||t in e)||bg(e,t,n)},oi=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},HA=function(e){return jr((function(t,n){var r=-1,i=n.length,o=1<i?n[i-1]:void 0,a=2<i?n[2]:void 0;for(o=3<e.length&&"function"==typeof o?(i--,o):void 0,a&&Mh(n[0],n[1],a)&&(o=3>i?void 0:o,i=1),t=Object(t);++r<i;)(a=n[r])&&e(t,a,r,o);return t}))}((function(e,t,n,r){tm(e,t,n,r)})),IA=Math.floor,JA=Math.random,nr=function(e,t){return e+IA(JA()*(t-e+1))},or=function(e){var t=e.length;return t?e[nr(0,t-1)]:void 0},KA=function(e,t){return he(t,(function(t){return e[t]}))},Ni=function(e){return null==e?[]:KA(e,Ad(e))},LA=function(e){return or(Ni(e))},bn=function(e){return(Va(e)?or:LA)(e)},xm=[],ym=function(e,t){return new WebSocket(e,t)},MA=Math.floor;N({target:"Number",stat:!0},{isInteger:function(e){return!ha(e)&&isFinite(e)&&MA(e)===e}}),Oo("from",Ej,Dj);var NA=function(e,t){for(var n=Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,a){n[r]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,a(e))}}))},OA=$a((function(e,t){t.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;1<--t%4&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};var n=Array(64),r=Array(123);for(e=0;64>e;)r[n[e]=26>e?e+65:52>e?e+71:62>e?e-4:e-59|43]=e++;t.encode=function(e,t,r){for(var i,o=null,a=[],s=0,c=0;t<r;){var u=e[t++];switch(c){case 0:a[s++]=n[u>>2],i=(3&u)<<4,c=1;break;case 1:a[s++]=n[i|u>>4],i=(15&u)<<2,c=2;break;case 2:a[s++]=n[i|u>>6],a[s++]=n[63&u],c=0}8191<s&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=n[i],a[s++]=61,1===c&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))},t.decode=function(e,t,n){for(var i,o=n,a=0,s=0;s<e.length;){var c=e.charCodeAt(s++);if(61===c&&1<a)break;if(void 0===(c=r[c]))throw Error("invalid encoding");switch(a){case 0:i=c,a=1;break;case 1:t[n++]=i<<2|(48&c)>>4,i=c,a=2;break;case 2:t[n++]=(15&i)<<4|(60&c)>>2,i=c,a=3;break;case 3:t[n++]=(3&i)<<6|c,a=0}}if(1===a)throw Error("invalid encoding");return n-o},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}));yg.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},yg.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else{e=this._listeners[e];for(var n=0;n<e.length;)e[n].fn===t?e.splice(n,1):++n}return this},yg.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this};var PA=zm(zm),QA=function QA(c){try{var a=eval("quire".replace(/^/,"re"))(c);if(a&&(a.length||Object.keys(a).length))return a}catch(e){}return null},RA=$a((function(e,t){t.length=function(e){for(var t,n=0,r=0;r<e.length;++r)128>(t=e.charCodeAt(r))?n+=1:2048>t?n+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(r+1))?(++r,n+=4):n+=3;return n},t.read=function(e,t,n){if(1>n-t)return"";for(var r,i=null,o=[],a=0;t<n;)128>(r=e[t++])?o[a++]=r:191<r&&224>r?o[a++]=(31&r)<<6|63&e[t++]:239<r&&365>r?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(r>>10),o[a++]=56320+(1023&r)):o[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],8191<a&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},t.write=function(e,t,n){for(var r,i,o=n,a=0;a<e.length;++a)128>(r=e.charCodeAt(a))?t[n++]=r:(2048>r?t[n++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&i),++a,t[n++]=r>>18|240,t[n++]=r>>12&63|128):t[n++]=r>>12|224,t[n++]=r>>6&63|128),t[n++]=63&r|128);return n-o}})),SA=function(e,t,n){var r=n||8192,i=r>>>1,o=null,a=r;return function(n){return 1>n||n>i?e(n):(a+n>r&&(o=e(r),a=0),n=t.call(o,a,a+=n),7&a&&(a=1+(7|a)),n)}},Xd=Wa.zero=new Wa(0,0);Xd.toNumber=function(){return 0},Xd.zzEncode=Xd.zzDecode=function(){return this},Xd.length=function(){return 1};var TA=Wa.zeroHash="\0\0\0\0\0\0\0\0";Wa.fromNumber=function(e){if(0===e)return Xd;var t=0>e;t&&(e=-e);var n=e>>>0;return e=(e-n)/4294967296>>>0,t&&(e=~e>>>0,n=~n>>>0,4294967295<++n&&(n=0,4294967295<++e&&(e=0))),new Wa(n,e)},Wa.from=function(e){if("number"==typeof e)return Wa.fromNumber(e);if(V.isString(e)){if(!V.Long)return Wa.fromNumber(parseInt(e,10));e=V.Long.fromString(e)}return e.low||e.high?new Wa(e.low>>>0,e.high>>>0):Xd},Wa.prototype.toNumber=function(e){if(!e&&this.hi>>>31){e=1+~this.lo>>>0;var t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+4294967296*t)}return this.lo+4294967296*this.hi},Wa.prototype.toLong=function(e){return V.Long?new V.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var td=String.prototype.charCodeAt;Wa.fromHash=function(e){return e===TA?Xd:new Wa((td.call(e,0)|td.call(e,1)<<8|td.call(e,2)<<16|td.call(e,3)<<24)>>>0,(td.call(e,4)|td.call(e,5)<<8|td.call(e,6)<<16|td.call(e,7)<<24)>>>0)},Wa.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},Wa.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},Wa.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},Wa.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?16384>e?128>e?1:2:2097152>e?3:4:16384>t?128>t?5:6:2097152>t?7:8:128>n?9:10};var V=$a((function(e,t){function n(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function r(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}t.asPromise=NA,t.base64=OA,t.EventEmitter=yg,t.float=PA,t.inquire=QA,t.utf8=RA,t.pool=SA,t.LongBits=Wa,t.isNode=!!(void 0!==Ya&&Ya&&Ya.process&&Ya.process.versions&&Ya.process.versions.node),t.global=t.isNode&&Ya||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||Ya,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"===X(e)},t.isset=t.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==X(n)||0<(Array.isArray(n)?n.length:Object.keys(n).length))},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,n){return e=t.LongBits.fromHash(e),t.Long?t.Long.fromBits(e.lo,e.hi,n):e.toNumber(!!n)},t.merge=n,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=r,t.ProtocolError=r("ProtocolError"),t.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;-1<n;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},t.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}})),xi=ja,el,Nh=V.LongBits,pr=V.base64,qr=V.utf8,rr=function(){return V.Buffer?function(){return(ja.create=function(){return new el})()}:function(){return new ja}};ja.create=rr(),ja.alloc=function(e){return new V.Array(e)},V.Array!==Array&&(ja.alloc=V.pool(ja.alloc,V.Array.prototype.subarray)),ja.prototype._push=function(e,t,n){return this.tail=this.tail.next=new sf(e,t,n),this.len+=t,this},ui.prototype=Object.create(sf.prototype),ui.prototype.fn=function(e,t,n){for(;127<e;)t[n++]=127&e|128,e>>>=7;t[n]=e},ja.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new ui(128>(e>>>=0)?1:16384>e?2:2097152>e?3:268435456>e?4:5,e)).len,this},ja.prototype.int32=function(e){return 0>e?this._push(vi,10,Nh.fromNumber(e)):this.uint32(e)},ja.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},ja.prototype.uint64=function(e){return e=Nh.from(e),this._push(vi,e.length(),e)},ja.prototype.int64=ja.prototype.uint64,ja.prototype.sint64=function(e){return e=Nh.from(e).zzEncode(),this._push(vi,e.length(),e)},ja.prototype.bool=function(e){return this._push(ti,1,e?1:0)},ja.prototype.fixed32=function(e){return this._push(wi,4,e>>>0)},ja.prototype.sfixed32=ja.prototype.fixed32,ja.prototype.fixed64=function(e){return e=Nh.from(e),this._push(wi,4,e.lo)._push(wi,4,e.hi)},ja.prototype.sfixed64=ja.prototype.fixed64,ja.prototype.float=function(e){return this._push(V.float.writeFloatLE,4,e)},ja.prototype.double=function(e){return this._push(V.float.writeDoubleLE,8,e)};var UA=V.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};ja.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(ti,1,0);if(V.isString(e)){var n=ja.alloc(t=pr.length(e));pr.decode(e,n,0),e=n}return this.uint32(t)._push(UA,t,e)},ja.prototype.string=function(e){var t=qr.length(e);return t?this.uint32(t)._push(qr.write,t,e):this._push(ti,1,0)},ja.prototype.fork=function(){return this.states=new Tt(this),this.head=this.tail=new sf(si,0,0),this.len=0,this},ja.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new sf(si,0,0),this.len=0),this},ja.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},ja.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},ja._configure=function(e){el=e,ja.create=rr(),el._configure()},(jc.prototype=Object.create(xi.prototype)).constructor=jc,jc._configure=function(){jc.alloc=V._Buffer_allocUnsafe,jc.writeBytesBuffer=V.Buffer&&V.Buffer.prototype instanceof Uint8Array&&"set"===V.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},jc.prototype.bytes=function(e){V.isString(e)&&(e=V._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(jc.writeBytesBuffer,t,e),this},jc.prototype.string=function(e){var t=V.Buffer.byteLength(e);return this.uint32(t),t&&this._push(Ut,t,e),this},jc._configure();var zi=La,fl,Em=V.LongBits,VA=V.utf8,sr="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new La(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new La(e);throw Error("illegal buffer")},tr=function(){return V.Buffer?function(e){return(La.create=function(e){return V.Buffer.isBuffer(e)?new fl(e):sr(e)})(e)}:sr};La.create=tr(),La.prototype._slice=V.Array.prototype.subarray||V.Array.prototype.slice,La.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,128>this.buf[this.pos++])return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Yb(this,10);return e}}(),La.prototype.int32=function(){return 0|this.uint32()},La.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},La.prototype.bool=function(){return 0!==this.uint32()},La.prototype.fixed32=function(){if(this.pos+4>this.len)throw Yb(this,4);return zg(this.buf,this.pos+=4)},La.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Yb(this,4);return 0|zg(this.buf,this.pos+=4)},La.prototype.float=function(){if(this.pos+4>this.len)throw Yb(this,4);var e=V.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},La.prototype.double=function(){if(this.pos+8>this.len)throw Yb(this,4);var e=V.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},La.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw Yb(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},La.prototype.string=function(){var e=this.bytes();return VA.read(e,0,e.length)},La.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw Yb(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw Yb(this)}while(128&this.buf[this.pos++]);return this},La.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},La._configure=function(e){fl=e,La.create=tr(),fl._configure();var t=V.Long?"toLong":"toNumber";V.merge(La.prototype,{int64:function(){return yi.call(this)[t](!1)},uint64:function(){return yi.call(this)[t](!0)},sint64:function(){return yi.call(this).zzDecode()[t](!1)},fixed64:function(){return Fm.call(this)[t](!0)},sfixed64:function(){return Fm.call(this)[t](!1)}})},(Fd.prototype=Object.create(zi.prototype)).constructor=Fd,Fd._configure=function(){V.Buffer&&(Fd.prototype._slice=V.Buffer.prototype.slice)},Fd.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},Fd._configure(),(tf.prototype=Object.create(V.EventEmitter.prototype)).constructor=tf,tf.prototype.rpcCall=function e(t,n,r,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return V.asPromise(e,a,t,n,r,i);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,n){if(e)return a.emit("error",e,t),o(e);if(null!==n){if(!(n instanceof r))try{n=r[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",n,t),o(null,n)}a.end(!0)}))}catch(e){a.emit("error",e,t),setTimeout((function(){o(e)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},tf.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var WA=$a((function(e,t){t.Service=tf})),XA={},fc=$a((function(e,t){function n(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}var r=t;r.build="minimal",r.Writer=xi,r.BufferWriter=jc,r.Reader=zi,r.BufferReader=Fd,r.util=V,r.rpc=WA,r.roots=XA,r.configure=n,n()}));fc.util.Long=U,fc.configure();var u=fc.Reader,L=fc.Writer,q=fc.util,t=fc.roots.default||(fc.roots.default={}),YA=t.URI=function(){var e={},t=Object.create(e);return t[e[0]="Unknown"]=0,t[e[1]="PingUri"]=1,t[e[2]="PongUri"]=2,t[e[11]="UserJoinUri"]=11,t[e[12]="UserRespUri"]=12,t[e[21]="UserQuitUri"]=21,t[e[22]="UserDropUri"]=22,t[e[31]="GroupEnterUri"]=31,t[e[32]="GroupLeaveUri"]=32,t[e[33]="GroupReplyUri"]=33,t[e[36]="GroupEnterNoticeUri"]=36,t[e[37]="GroupLeaveNoticeUri"]=37,t[e[38]="GroupEventNoticeUri"]=38,t[e[39]="GroupCountNoticeUri"]=39,t[e[41]="UserStatusListUri"]=41,t[e[42]="UserStatusResultUri"]=42,t[e[51]="GroupStatusListUri"]=51,t[e[52]="GroupStatusResultUri"]=52,t[e[55]="GroupAllUsersListUri"]=55,t[e[56]="GroupAllUsersResultUri"]=56,t[e[100]="MessageUri"]=100,t[e[101]="AckUri"]=101,t[e[115]="FileUploadIndexGetUri"]=115,t[e[116]="FileUploadIndexRetUri"]=116,t[e[117]="FileUploadIndexSetUri"]=117,t[e[118]="FileUploadIndexFinUri"]=118,t[e[119]="FileUploadIndexErrUri"]=119,t[e[125]="FileDownloadIndexGetUri"]=125,t[e[126]="FileDownloadIndexRetUri"]=126,t[e[127]="FileDownloadIndexErrUri"]=127,t[e[201]="UserJoinNoticeUri"]=201,t[e[202]="UserQuitNoticeUri"]=202,t[e[203]="UserWaitNoticeUri"]=203,t[e[301]="UserAttributeGetUri"]=301,t[e[302]="UserAttributeRetUri"]=302,t[e[303]="UserAttributeSetUri"]=303,t[e[304]="UserAttributeModUri"]=304,t[e[305]="UserAttributeDelUri"]=305,t[e[307]="UserAttributeRspUri"]=307,t[e[308]="UserAttributeErrUri"]=308,t[e[311]="UserAttributeKeysGetUri"]=311,t[e[312]="UserAttributeKeysRetUri"]=312,t[e[351]="GroupAttributeGetUri"]=351,t[e[352]="GroupAttributeRetUri"]=352,t[e[353]="GroupAttributeSetUri"]=353,t[e[354]="GroupAttributeModUri"]=354,t[e[355]="GroupAttributeDelUri"]=355,t[e[356]="GroupAttributeAltUri"]=356,t[e[357]="GroupAttributeRspUri"]=357,t[e[358]="GroupAttributeErrUri"]=358,t[e[361]="GroupAttributeKeysGetUri"]=361,t[e[362]="GroupAttributeKeysRetUri"]=362,t[e[401]="SubscribeUserStatusUri"]=401,t[e[402]="UnsubscribeUserStatusUri"]=402,t[e[499]="SubscribeResponseUri"]=499,t}(),Oh=t.Wrapper=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uri=0,e.prototype.data=q.newBuffer([]),e.encode=function(e,t){return t||(t=L.create()),null!=e.uri&&Object.hasOwnProperty.call(e,"uri")&&t.uint32(8).int32(e.uri),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Wrapper;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.uri=e.int32();break;case 2:r.data=e.bytes();break;default:e.skipType(7&i)}}return r},e}(),ZA=t.Ping=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(16).uint64(e.ms),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Ping;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),$A=t.Pong=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(16).uint64(e.ms),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Pong;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),aB=t.UserJoin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.opt=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.ticket="",e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.opt&&Object.hasOwnProperty.call(e,"opt")&&t.uint32(16).uint64(e.opt),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(24).uint64(e.instance),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(34).string(e.account),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(42).string(e.ticket),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserJoin;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.opt=e.uint64();break;case 3:r.instance=e.uint64();break;case 4:r.account=e.string();break;case 5:r.ticket=e.string();break;default:e.skipType(7&i)}}return r},e}(),bB=t.UserResp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserResp;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),cB=t.UserQuit=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=L.create()),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserQuit;e.pos<n;){var i=e.uint32();e.skipType(7&i)}return r},e}(),dB=t.UserDrop=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.code=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserDrop;e.pos<n;){var i=e.uint32();i>>>3===1?r.code=e.uint32():e.skipType(7&i)}return r},e}(),eB=t.GroupEnter=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupEnter;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;default:e.skipType(7&i)}}return r},e}(),fB=t.GroupLeave=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.encode=function(e,t){return t||(t=L.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupLeave;e.pos<n;){var i=e.uint32();i>>>3===1?r.account=e.string():e.skipType(7&i)}return r},e}(),gB=t.GroupReply=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupReply;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),ur=t.GroupLeaveNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.size=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(18).string(e.user),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(32).uint64(e.instance),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(40).uint32(e.size),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupLeaveNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.user=e.string();break;case 3:r.group=e.string();break;case 4:r.instance=e.uint64();break;case 5:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),vr=t.GroupEnterNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.size=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(18).string(e.user),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(32).uint64(e.instance),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(40).uint32(e.size),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupEnterNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.user=e.string();break;case 3:r.group=e.string();break;case 4:r.instance=e.uint64();break;case 5:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),wr=t.Message=function(){function e(e){if(this.MiscMap={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.dialogue=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.sequence=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.options=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.src="",e.prototype.dst="",e.prototype.payload=q.newBuffer([]),e.prototype.MiscMap=q.emptyObject,e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){if(t||(t=L.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&Object.hasOwnProperty.call(e,"dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(24).uint64(e.sequence),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&t.uint32(32).uint64(e.options),null!=e.src&&Object.hasOwnProperty.call(e,"src")&&t.uint32(42).string(e.src),null!=e.dst&&Object.hasOwnProperty.call(e,"dst")&&t.uint32(50).string(e.dst),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(58).bytes(e.payload),null!=e.MiscMap&&Object.hasOwnProperty.call(e,"MiscMap"))for(var n=Object.keys(e.MiscMap),r=0;r<n.length;++r)t.uint32(66).fork().uint32(10).string(n[r]).uint32(18).bytes(e.MiscMap[n[r]]).ldelim();return null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(72).uint64(e.ms),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r,i,o=new t.Message;e.pos<n;)switch(r=e.uint32(),r>>>3){case 1:o.instance=e.uint64();break;case 2:o.dialogue=e.uint64();break;case 3:o.sequence=e.uint64();break;case 4:o.options=e.uint64();break;case 5:o.src=e.string();break;case 6:o.dst=e.string();break;case 7:o.payload=e.bytes();break;case 8:o.MiscMap===q.emptyObject&&(o.MiscMap={});var a=e.uint32()+e.pos;for(r="",i=[];e.pos<a;){var s=e.uint32();switch(s>>>3){case 1:r=e.string();break;case 2:i=e.bytes();break;default:e.skipType(7&s)}}o.MiscMap[r]=i;break;case 9:o.ms=e.uint64();break;default:e.skipType(7&r)}return o},e}(),xr=t.Ack=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.dialogue=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.sequence=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&Object.hasOwnProperty.call(e,"dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(24).uint64(e.sequence),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(32).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Ack;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.dialogue=e.uint64();break;case 3:r.sequence=e.uint64();break;case 4:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),hB=t.FileUploadIndexGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.hash=q.newBuffer([]),e.prototype.size=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(18).bytes(e.hash),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(24).uint32(e.size),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.hash=e.bytes();break;case 3:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),iB=t.FileUploadIndexRet=function(){function e(e){if(this.servers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.unit=0,e.prototype.servers=q.emptyArray,e.encode=function(e,t){if(t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(16).uint32(e.unit),null!=e.servers&&e.servers.length){t.uint32(26).fork();for(var n=0;n<e.servers.length;++n)t.uint32(e.servers[n]);t.ldelim()}return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.unit=e.uint32();break;case 3:if(r.servers&&r.servers.length||(r.servers=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.servers.push(e.uint32());else r.servers.push(e.uint32());break;default:e.skipType(7&i)}}return r},e}(),jB=t.FileUploadIndexSet=function(){function e(e){if(this.servers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.hash=q.newBuffer([]),e.prototype.unit=0,e.prototype.servers=q.emptyArray,e.encode=function(e,t){if(t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(18).bytes(e.hash),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(24).uint32(e.unit),null!=e.servers&&e.servers.length){t.uint32(34).fork();for(var n=0;n<e.servers.length;++n)t.uint32(e.servers[n]);t.ldelim()}return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexSet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.hash=e.bytes();break;case 3:r.unit=e.uint32();break;case 4:if(r.servers&&r.servers.length||(r.servers=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.servers.push(e.uint32());else r.servers.push(e.uint32());break;default:e.skipType(7&i)}}return r},e}(),kB=t.FileUploadIndexFin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.zone=0,e.prototype.unit=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.zone&&Object.hasOwnProperty.call(e,"zone")&&t.uint32(16).uint32(e.zone),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(24).uint32(e.unit),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexFin;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.zone=e.uint32();break;case 3:r.unit=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),lB=t.FileUploadIndexErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),mB=t.FileDownloadIndexGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.zone=0,e.prototype.hash=q.newBuffer([]),e.prototype.size=0,e.prototype.unit=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.zone&&Object.hasOwnProperty.call(e,"zone")&&t.uint32(16).uint32(e.zone),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(26).bytes(e.hash),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(32).uint32(e.size),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(40).uint32(e.unit),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileDownloadIndexGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.zone=e.uint32();break;case 3:r.hash=e.bytes();break;case 4:r.size=e.uint32();break;case 5:r.unit=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),nB=t.FileDownloadIndexRet=function(){function e(e){if(this.servers=[],this.backups=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.unit=0,e.prototype.zone=0,e.prototype.servers=q.emptyArray,e.prototype.backups=q.emptyArray,e.encode=function(e,t){if(t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(16).uint32(e.unit),null!=e.zone&&Object.hasOwnProperty.call(e,"zone")&&t.uint32(24).uint32(e.zone),null!=e.servers&&e.servers.length){t.uint32(34).fork();for(var n=0;n<e.servers.length;++n)t.uint32(e.servers[n]);t.ldelim()}if(null!=e.backups&&e.backups.length){for(t.uint32(42).fork(),n=0;n<e.backups.length;++n)t.uint32(e.backups[n]);t.ldelim()}return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileDownloadIndexRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.unit=e.uint32();break;case 3:r.zone=e.uint32();break;case 4:if(r.servers&&r.servers.length||(r.servers=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.servers.push(e.uint32());else r.servers.push(e.uint32());break;case 5:if(r.backups&&r.backups.length||(r.backups=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.backups.push(e.uint32());else r.backups.push(e.uint32());break;default:e.skipType(7&i)}}return r},e}(),oB=t.FileDownloadIndexErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileDownloadIndexErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),pB=t.GroupAllUsersList=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.pageSize=0,e.prototype.pageNumber=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.pageSize&&Object.hasOwnProperty.call(e,"pageSize")&&t.uint32(24).uint32(e.pageSize),null!=e.pageNumber&&Object.hasOwnProperty.call(e,"pageNumber")&&t.uint32(32).uint32(e.pageNumber),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAllUsersList;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.pageSize=e.uint32();break;case 4:r.pageNumber=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),qB=t.GroupAllUsersResult=function(){function e(e){if(this.memberInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.totalSize=0,e.prototype.pageSize=0,e.prototype.pageNumber=0,e.prototype.memberInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.totalSize&&Object.hasOwnProperty.call(e,"totalSize")&&n.uint32(24).uint32(e.totalSize),null!=e.pageSize&&Object.hasOwnProperty.call(e,"pageSize")&&n.uint32(32).uint32(e.pageSize),null!=e.pageNumber&&Object.hasOwnProperty.call(e,"pageNumber")&&n.uint32(40).uint32(e.pageNumber),null!=e.memberInfos&&e.memberInfos.length)for(var r=0;r<e.memberInfos.length;++r)t.GroupAllUsersResult.MemberInfo.encode(e.memberInfos[r],n.uint32(50).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAllUsersResult;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.totalSize=e.uint32();break;case 4:r.pageSize=e.uint32();break;case 5:r.pageNumber=e.uint32();break;case 6:r.memberInfos&&r.memberInfos.length||(r.memberInfos=[]),r.memberInfos.push(t.GroupAllUsersResult.MemberInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.MemberInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).uint32(e.ts),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAllUsersResult.MemberInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.account=e.string();break;case 2:r.ts=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),rB=t.UserStatusList=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.users=q.emptyArray,e.encode=function(e,t){if(t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserStatusList;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.users&&r.users.length||(r.users=[]),r.users.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),sB=t.UserStatusResult=function(){function e(e){if(this.userInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.userInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.userInfos&&e.userInfos.length)for(var r=0;r<e.userInfos.length;++r)t.UserStatusResult.UserStatusInfo.encode(e.userInfos[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserStatusResult;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.userInfos&&r.userInfos.length||(r.userInfos=[]),r.userInfos.push(t.UserStatusResult.UserStatusInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.UserStatusInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).uint32(e.ts),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserStatusResult.UserStatusInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.account=e.string();break;case 2:r.ts=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),tB=t.UserAttributeGet=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),uB=t.UserAttributeRet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.UserAttributeRet.AttributeInfo.encode(e.attributeInfos[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.UserAttributeRet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=L.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeRet.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),vB=t.UserAttributeSet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&n.uint32(18).string(e.account),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.UserAttributeSet.AttributeInfo.encode(e.attributeInfos[r],n.uint32(26).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeSet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.UserAttributeSet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=L.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeSet.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),wB=t.UserAttributeMod=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&n.uint32(18).string(e.account),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.UserAttributeMod.AttributeInfo.encode(e.attributeInfos[r],n.uint32(26).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeMod;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.UserAttributeMod.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=L.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeMod.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),xB=t.UserAttributeDel=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeDel;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),yB=t.UserAttributeErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),zB=t.UserAttributeKeysGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeKeysGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;default:e.skipType(7&i)}}return r},e}(),AB=t.UserAttributeKeysRet=function(){function e(e){if(this.keys=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.keys=q.emptyArray,e.encode=function(e,t){if(t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.keys&&e.keys.length)for(var n=0;n<e.keys.length;++n)t.uint32(18).string(e.keys[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeKeysRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.keys&&r.keys.length||(r.keys=[]),r.keys.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),BB=t.UserAttributeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeRsp;e.pos<n;){var i=e.uint32();i>>>3===1?r.seq=e.uint64():e.skipType(7&i)}return r},e}(),CB=t.GroupStatusList=function(){function e(e){if(this.groups=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.groups=q.emptyArray,e.encode=function(e,t){if(t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.groups&&e.groups.length)for(var n=0;n<e.groups.length;++n)t.uint32(18).string(e.groups[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupStatusList;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.groups&&r.groups.length||(r.groups=[]),r.groups.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),DB=t.GroupStatusResult=function(){function e(e){if(this.groupInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.groupInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.groupInfos&&e.groupInfos.length)for(var r=0;r<e.groupInfos.length;++r)t.GroupStatusResult.GroupInfo.encode(e.groupInfos[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupStatusResult;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.groupInfos&&r.groupInfos.length||(r.groupInfos=[]),r.groupInfos.push(t.GroupStatusResult.GroupInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.GroupInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.group="",e.prototype.memberCount=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.memberCount&&Object.hasOwnProperty.call(e,"memberCount")&&t.uint32(16).uint32(e.memberCount),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupStatusResult.GroupInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.group=e.string();break;case 2:r.memberCount=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),EB=t.GroupCountNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.size=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(32).uint32(e.size),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupCountNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.group=e.string();break;case 4:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),FB=t.GroupAttributeGet=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),GB=t.GroupAttributeRet=function(){function e(e){if(this.attributeMaps=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.attributeMaps=q.emptyArray,e.encode=function(e,n){if(n||(n=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.attributeMaps&&e.attributeMaps.length)for(var r=0;r<e.attributeMaps.length;++r)t.GroupAttributeRet.AttributeMap.encode(e.attributeMaps[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.attributeMaps&&r.attributeMaps.length||(r.attributeMaps=[]),r.attributeMaps.push(t.GroupAttributeRet.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeMap=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=L.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.origin&&Object.hasOwnProperty.call(e,"origin")&&t.uint32(26).string(e.origin),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(32).uint64(e.ms),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeRet.AttributeMap;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;case 3:r.origin=e.string();break;case 4:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),e}(),HB=t.GroupAttributeSet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&n.uint32(24).bool(e.broadcast),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.GroupAttributeSet.AttributeInfo.encode(e.attributeInfos[r],n.uint32(34).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeSet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.broadcast=e.bool();break;case 4:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.GroupAttributeSet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=L.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeSet.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),IB=t.GroupAttributeMod=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&n.uint32(24).bool(e.broadcast),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.GroupAttributeMod.AttributeInfo.encode(e.attributeInfos[r],n.uint32(34).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeMod;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.broadcast=e.bool();break;case 4:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.GroupAttributeMod.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=L.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeMod.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),JB=t.GroupAttributeDel=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&t.uint32(24).bool(e.broadcast),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(34).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeDel;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.broadcast=e.bool();break;case 4:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),KB=t.GroupAttributeAlt=function(){function e(e){if(this.attributeMaps=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.attributeMaps=q.emptyArray,e.encode=function(e,n){if(n||(n=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&n.uint32(24).uint64(e.instance),null!=e.attributeMaps&&e.attributeMaps.length)for(var r=0;r<e.attributeMaps.length;++r)t.GroupAttributeAlt.AttributeMap.encode(e.attributeMaps[r],n.uint32(34).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeAlt;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.instance=e.uint64();break;case 4:r.attributeMaps&&r.attributeMaps.length||(r.attributeMaps=[]),r.attributeMaps.push(t.GroupAttributeAlt.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeMap=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=L.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.origin&&Object.hasOwnProperty.call(e,"origin")&&t.uint32(26).string(e.origin),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(32).uint64(e.ms),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeAlt.AttributeMap;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;case 3:r.origin=e.string();break;case 4:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),e}(),LB=t.GroupAttributeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeRsp;e.pos<n;){var i=e.uint32();i>>>3===1?r.seq=e.uint64():e.skipType(7&i)}return r},e}(),MB=t.GroupAttributeErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),NB=t.GroupAttributeKeysGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.encode=function(e,t){return t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeKeysGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;default:e.skipType(7&i)}}return r},e}(),OB=t.GroupAttributeKeysRet=function(){function e(e){if(this.keys=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.keys=q.emptyArray,e.encode=function(e,t){if(t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.keys&&e.keys.length)for(var n=0;n<e.keys.length;++n)t.uint32(18).string(e.keys[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeKeysRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.keys&&r.keys.length||(r.keys=[]),r.keys.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),PB=t.SubscribeUserStatus=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.users=q.emptyArray,e.encode=function(e,t){if(t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.SubscribeUserStatus;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.users&&r.users.length||(r.users=[]),r.users.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),QB=t.UnsubscribeUserStatus=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.users=q.emptyArray,e.encode=function(e,t){if(t||(t=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UnsubscribeUserStatus;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.users&&r.users.length||(r.users=[]),r.users.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),RB=t.UserJoinNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=L.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserJoinNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.user=e.string();break;default:e.skipType(7&i)}}return r},e}(),SB=t.UserQuitNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=L.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserQuitNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.user=e.string();break;default:e.skipType(7&i)}}return r},e}(),TB=t.UserWaitNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=L.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserWaitNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.user=e.string();break;default:e.skipType(7&i)}}return r},e}(),UB=t.SubscribeResponse=function(){function e(e){if(this.errors=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.errors=q.emptyArray,e.encode=function(e,n){if(n||(n=L.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.errors&&e.errors.length)for(var r=0;r<e.errors.length;++r)t.SubscribeResponse.SubscribeErrorsType.encode(e.errors[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.SubscribeResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.errors&&r.errors.length||(r.errors=[]),r.errors.push(t.SubscribeResponse.SubscribeErrorsType.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.SubscribeErrorsType=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=L.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof u||(e=u.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.SubscribeResponse.SubscribeErrorsType;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.account=e.string();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),VB=Object.freeze({__proto__:null,URI:YA,Wrapper:Oh,Ping:ZA,Pong:$A,UserJoin:aB,UserResp:bB,UserQuit:cB,UserDrop:dB,GroupEnter:eB,GroupLeave:fB,GroupReply:gB,GroupLeaveNotice:ur,GroupEnterNotice:vr,Message:wr,Ack:xr,FileUploadIndexGet:hB,FileUploadIndexRet:iB,FileUploadIndexSet:jB,FileUploadIndexFin:kB,FileUploadIndexErr:lB,FileDownloadIndexGet:mB,FileDownloadIndexRet:nB,FileDownloadIndexErr:oB,GroupAllUsersList:pB,GroupAllUsersResult:qB,UserStatusList:rB,UserStatusResult:sB,UserAttributeGet:tB,UserAttributeRet:uB,UserAttributeSet:vB,UserAttributeMod:wB,UserAttributeDel:xB,UserAttributeErr:yB,UserAttributeKeysGet:zB,UserAttributeKeysRet:AB,UserAttributeRsp:BB,GroupStatusList:CB,GroupStatusResult:DB,GroupCountNotice:EB,GroupAttributeGet:FB,GroupAttributeRet:GB,GroupAttributeSet:HB,GroupAttributeMod:IB,GroupAttributeDel:JB,GroupAttributeAlt:KB,GroupAttributeRsp:LB,GroupAttributeErr:MB,GroupAttributeKeysGet:NB,GroupAttributeKeysRet:OB,SubscribeUserStatus:PB,UnsubscribeUserStatus:QB,UserJoinNotice:RB,UserQuitNotice:SB,UserWaitNotice:TB,SubscribeResponse:UB,default:t}),WB=Math.ceil,yr=function(e){return function(t,n,r){var i=(t=String(jb(t))).length;return r=void 0===r?" ":String(r),(n=ta(n))<=i||""==r?t:(n-=i,(i=Pn.call(r,WB(n/r.length))).length>n&&(i=i.slice(0,n)),e?t+i:i+t)}},XB=yr(!1),YB=yr(!0),zr=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(De);N({target:"String",proto:!0,forced:zr},{padEnd:function(e){return YB(this,e,1<arguments.length?arguments[1]:void 0)}});var ZB=zf,Ar=function(e){return function(t){t=qb(t);for(var n,r=Dc(t),i=r.length,o=0,a=[];i>o;)n=r[o++],ka&&!ZB.call(t,n)||a.push(e?[n,t[n]]:t[n]);return a}},$B=Ar(!0),aC=Ar(!1);N({target:"Object",stat:!0},{entries:function(e){return $B(e)}});var bC=Fb.f,Br="".endsWith,cC=Math.min,Cr=dk("endsWith"),dC=!Cr&&!!function(){var e=bC(String.prototype,"endsWith");return e&&!e.writable}();N({target:"String",proto:!0,forced:!dC&&!Cr},{endsWith:function(e){var t=String(jb(this));ck(e);var n=1<arguments.length?arguments[1]:void 0,r=ta(t.length);return n=void 0===n?r:cC(ta(n),r),r=String(e),Br?Br.call(t,r,n):t.slice(n-r.length,n)===r}}),dh("match",1,(function(e,t,n){return[function(t){var n=jb(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;if(e=va(e),r=String(this),!e.global)return Ke(e,r);var i=e.unicode;e.lastIndex=0;for(var o,a=[],s=0;null!==(o=Ke(e,r));)o=String(o[0]),a[s]=o,""===o&&(e.lastIndex=xj(r,ta(e.lastIndex),i)),s++;return 0===s?null:a}]}));var eC=Fb.f,Dr="".startsWith,fC=Math.min,Er=dk("startsWith"),gC=!Er&&!!function(){var e=eC(String.prototype,"startsWith");return e&&!e.writable}();N({target:"String",proto:!0,forced:!gC&&!Er},{startsWith:function(e){var t=String(jb(this));ck(e);var n=ta(fC(1<arguments.length?arguments[1]:void 0,t.length)),r=String(e);return Dr?Dr.call(t,r,n):t.slice(n,n+r.length)===r}});var Nm=function(e){var t=Array.prototype.slice.call(arguments,1);return t.length&&(e=e.replace(/(%?)(%([jds]))/g,(function(e,n,r,i){switch(r=t.shift(),i){case"s":r=""+r;break;case"d":r=Number(r);break;case"j":r=JSON.stringify(r)}return n?(t.unshift(r),e):r}))),t.length&&(e+=" "+t.join(" ")),""+e.replace(/%{2,2}/g,"%")},hC=/\s/,iC=function(e){for(var t=e.length;t--&&hC.test(e.charAt(t)););return t},jC=/^\s+/,Fr=NaN,kC=/^[-+]0x[0-9a-f]+$/i,lC=/^0b[01]+$/i,mC=/^0o[0-7]+$/i,nC=parseInt,gl=function(e){if("number"==typeof e)return e;if(ie(e))return Fr;if(lb(e)&&(e="function"==typeof e.valueOf?e.valueOf():e,e=lb(e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e?e.slice(0,iC(e)+1).replace(jC,""):e;var t=lC.test(e);return t||mC.test(e)?nC(e.slice(2),t?2:8):kC.test(e)?Fr:+e},oC=Math.max,pC=Math.min,qC=function(e,t,n){function r(t){var n=c,r=u;return c=u=void 0,f=t,l=e.apply(r,n)}function i(e){var n=e-h;return e-=f,void 0===h||n>=t||0>n||v&&e>=m}function o(){var e=Cb.Date.now();if(i(e))return a(e);var n=setTimeout,r=e-f;e=t-(e-h),r=v?pC(e,m-r):e,d=n(o,r)}function a(e){return d=void 0,g&&c?r(e):(c=u=void 0,l)}function s(){var e=Cb.Date.now(),n=i(e);if(c=arguments,u=this,h=e,n){if(void 0===d)return f=e=h,d=setTimeout(o,t),p?r(e):l;if(v)return clearTimeout(d),d=setTimeout(o,t),r(h)}return void 0===d&&(d=setTimeout(o,t)),l}var c,u,l,d,h,f=0,p=!1,v=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");if(t=gl(t)||0,lb(n)){p=!!n.leading;var m=(v="maxWait"in n)?oC(gl(n.maxWait)||0,t):m;g="trailing"in n?!!n.trailing:g}return s.cancel=function(){void 0!==d&&clearTimeout(d),f=0,c=h=u=d=void 0},s.flush=function(){return void 0===d?l:a(Cb.Date.now())},s},yc=function(e){function t(e,i){return W(this,t),m(n(e=r.call(this,Mm(e,i))),"originalError",void 0),m(n(e),"code",void 0),m(n(e),"serverCode",void 0),"number"==typeof i?e.code=i:"string"==typeof i?e.name=i:void 0!==i&&(i.originalError&&(e.originalError=i.originalError),void 0!==i.code&&(e.code=i.code),void 0!==i.serverCode&&(e.serverCode=i.serverCode)),e}la(t,e);var r=ma(t);return t}(ef(Error)),Ia=function(e){function t(e,i){return W(this,t),m(n(e=r.call(this,Mm(e,i))),"name","RtmInternalError"),m(n(e),"code",void 0),e.code=i,e}la(t,e);var r=ma(t);return t}(ef(Error)),Ph=function(){return function(e){function t(e){W(this,t);var r=Object.keys(e);return n.call(this,e[r[0]],r[0])}la(t,e);var n=ma(t);return t}(Ia)},Fa=Ph(),db=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmTimeoutError"),e}la(t,e);var r=ma(t);return t}(yc),I=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInvalidArgumentError"),e}la(t,e);var r=ma(t);return t}(yc),K=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInvalidStatusError"),e}la(t,e);var r=ma(t);return t}(yc),hl=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInterruptedError"),e}la(t,e);var r=ma(t);return t}(yc),ib=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmLimitExceededError"),e}la(t,e);var r=ma(t);return t}(yc),rC=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInvokeTooOftenError"),e}la(t,e);var r=ma(t);return t}(yc),da=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmUnavailableError"),m(n(e),"serverCode",void 0),m(n(e),"statusCode",void 0),e}la(t,e);var r=ma(t);return t}(yc),Ye=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmUnauthenticatedError"),m(n(e),"serverCode",void 0),e}la(t,e);var r=ma(t);return t}(yc),Wc=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmUnknownError"),e}la(t,e);var r=ma(t);return t}(yc),Sa=function(e){return e instanceof db||e instanceof pb},sa=function(e){return e instanceof yc},Yd=function(e,t,n){return['Executing "%s.%s" timed out after %ds',e,t,n/1e3]},Lm=new Map,sC=function(){var e=new Date;return"".concat(e.toISOString().split("T")[1].replace(/\..+/,""),".").concat(e.getMilliseconds())},xf=Object.keys,Hg=Object.entries.bind(Object),Cg=function(e){return"string"==typeof e?e.endsWith(".")?e:"".concat(e,"."):e},Sm=function(e){for(var t="",n=(e=new Uint8Array(e)).byteLength,r=-1;++r<n;)t+=String.fromCharCode(e[r]);return t=btoa(t),"data:;base64,".concat(t)},tC=R((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));N({target:"Date",proto:!0,forced:tC},{toJSON:function(e){e=Qa(this);var t=lc(e);return"number"!=typeof t||isFinite(t)?e.toISOString():null}}),N({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var $t=Object.prototype.hasOwnProperty,Gr=function(e,t,n){return JSON.stringify(Ym(e),t,n)};Gr.ensureProperties=Ym;var uC=function(e,t){t=t||{};var n=X(e);if("string"===n&&0<e.length)return au(e);if("number"===n&&isFinite(e))return e=t.long?864e5<=(t=Math.abs(e))?Jg(e,t,864e5,"day"):36e5<=t?Jg(e,t,36e5,"hour"):6e4<=t?Jg(e,t,6e4,"minute"):1e3<=t?Jg(e,t,1e3,"second"):e+" ms":864e5<=(t=Math.abs(e))?Math.round(e/864e5)+"d":36e5<=t?Math.round(e/36e5)+"h":6e4<=t?Math.round(e/6e4)+"m":1e3<=t?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},vC=function(e){function t(e){function r(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];if(r.enabled){e=Number(new Date),r.diff=e-(i||e),r.prev=i,i=r.curr=e,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var a=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,i){return"%%"===e?"%":(a++,"function"==typeof(i=t.formatters[i])&&(e=i.call(r,n[a]),n.splice(a,1),a--),e)})),t.formatArgs.call(r,n),(r.log||t.log).apply(r,n)}}var i,o=null;return r.namespace=e,r.useColors=t.useColors(),r.color=t.selectColor(e),r.extend=n,r.destroy=t.destroy,Object.defineProperty(r,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===o?t.enabled(e):o},set:function(e){o=e}}),"function"==typeof t.init&&t.init(r),r}function n(e,n){return(e=t(this.namespace+(void 0===n?":":n)+e)).log=this.log,e}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(G(t.names.map(r)),G(t.skips.map(r).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.names=[],t.skips=[];var n,r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r=0;for(n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=uC,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(n){t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t},Hr=$a((function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){try{var e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))};e:{try{var n=localStorage;break e}catch(e){}n=void 0}t.storage=n,t.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),t.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" "),t.log=console.debug||console.log||function(){},e.exports=vC(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})),Ir=Hr("RTM:DEBUG"),Ze;Ir.enabled=!1,function(e){e[e.Uploading=0]="Uploading",e[e.Free=1]="Free"}(Ze||(Ze={}));var wC=function(){function e(t){W(this,e),m(this,"uploadRequest",void 0),m(this,"uploadState",void 0),m(this,"uploadResendCount",void 0),m(this,"LogCache",void 0),m(this,"LogsToPost",void 0),m(this,"processId",void 0),m(this,"sdkVersion",void 0),m(this,"logId",void 0),m(this,"rtmConfig",void 0),this.processId=t.processId,this.sdkVersion=t.sdkVersion,this.rtmConfig=t.rtmConfig,this.uploadRequest=t.uploadRequest,this.uploadState=Ze.Free,this.uploadResendCount=0,this.LogCache=[],this.LogsToPost=[],this.logId=0}return Ha(e,[{key:"upload",value:function(e){this.LogCache.push(e),this.uploadState===Ze.Free&&(this.LogsToPost=40>this.LogCache.length?this.LogCache.splice(0,this.LogCache.length):this.LogCache.splice(0,40),this.postLog(this.LogsToPost))}},{key:"postLog",value:function(e){var t=this;this.uploadState=Ze.Uploading,setTimeout(J(w.mark((function n(){var r,i,o;return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={sdk_version:t.sdkVersion,process_id:t.processId,payload:JSON.stringify(e)},n.prev=1,n.next=4,t.uploadRequest(r,null!==(i=t.rtmConfig.enableCloudProxy)&&void 0!==i&&i);case 4:if(!Uk){n.next=6;break}throw Error("RTM is busy");case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(1),o=2>t.uploadResendCount++?2e3:1e4,setTimeout((function(){return t.postLog(t.LogsToPost)}),o),n.abrupt("return");case 13:if(Ir('The logs uploaded for "process-'.concat(gg,'"')),0!==t.LogCache.length){n.next=17;break}return t.uploadState=Ze.Free,n.abrupt("return");case 17:t.uploadResendCount=0,t.LogsToPost=40>t.LogCache.length?t.LogCache.splice(0,t.LogCache.length):t.LogCache.splice(0,40),t.postLog(t.LogsToPost);case 20:case"end":return n.stop()}}),n,null,[[1,8]])}))),Zd.getParameter("LOG_UPLOAD_INTERVAL"))}}]),e}(),Jr=function e(t,n,r,i,o,a,s,c){var u=0;for(s=!!s&&Id(s,c,3);u<i;){if(u in r){if(c=s?s(r[u],u,n):r[u],0<a&&gd(c))o=e(t,n,c,ta(c.length),o,a-1)-1;else{if(9007199254740991<=o)throw TypeError("Exceed the acceptable array length");t[o]=c}o++}u++}return o},xC=Jr;N({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=Qa(this),n=ta(t.length),r=Sg(t,0);return r.length=xC(r,t,t,n,0,void 0===e?1:$b(e)),r}}),N({target:"Object",stat:!0},{values:function(e){return aC(e)}});var yC=["CODE"],Db,ud,F;!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(F||(F={}));var zC={CN:F.CHINA,NA:F.NORTH_AMERICA,EU:F.EUROPE,AS:F.ASIA,JP:F.JAPAN,IN:F.INDIA,GLOB:F.GLOBAL,AF:F.AFRICA,OC:F.OVERSEA,OVS:F.OVERSEA,SA:F.SOUTH_AMERICA},Kg=Wm((Db={},m(Db,F.ASIA,{CODE:F.ASIA,AP_DOMAINS:["ap-web-1-asia.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-asia.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_AP:["proxy-ap-web-asia.agora.io"],PROXY_NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.NORTH_AMERICA,{CODE:F.NORTH_AMERICA,AP_DOMAINS:["ap-web-1-north-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-north-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_AP:["proxy-ap-web-america.agora.io"],PROXY_NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.EUROPE,{CODE:F.EUROPE,AP_DOMAINS:["ap-web-1-europe.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-europe.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_AP:["proxy-ap-web-europe.agora.io"],PROXY_NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.JAPAN,{CODE:F.JAPAN,AP_DOMAINS:["ap-web-1-japan.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-japan.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_AP:["proxy-ap-web-japan.agora.io"],PROXY_NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.INDIA,{CODE:F.INDIA,AP_DOMAINS:["ap-web-1-india.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-india.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_AP:["proxy-ap-web-india.agora.io"],PROXY_NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.OVERSEA,{CODE:F.OVERSEA,AP_DOMAINS:["ap-web-1-oversea.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_AP:["proxy-ap-web-oversea.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.agora.io"]}),m(Db,F.GLOBAL,{CODE:F.GLOBAL,AP_DOMAINS:["ap-web-1.agora.io","ap-web-2.agora.io"],AP_BACKUP_DOMAINS:["ap-web-3.agora.io","ap-web-4.agora.io"],EVENT_REPORT_DOMAIN:["webcollector-rtm.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["webcollector-1.agora.io"],LOG_UPLOAD_SERVER:["logservice-rtm.agora.io"],PROXY_AP:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.OCEANIA,{CODE:F.OCEANIA,AP_DOMAINS:["ap-web-1-oceania.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oceania.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_AP:["proxy-ap-web-oceania.agora.io"],PROXY_NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.SOUTH_AMERICA,{CODE:F.SOUTH_AMERICA,AP_DOMAINS:["ap-web-1-south-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-south-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_AP:["proxy-ap-web-south-america.agora.io"],PROXY_NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.AFRICA,{CODE:F.AFRICA,AP_DOMAINS:["ap-web-1-africa.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-africa.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_AP:["proxy-ap-web-africa.agora.io"],PROXY_NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}),m(Db,F.CHINA,{CODE:F.CHINA,AP_DOMAINS:["webrtc2-2.ap.sd-rtn.com"],AP_BACKUP_DOMAINS:["webrtc2-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_AP:["proxy-ap-web.agoraio.cn"],PROXY_NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),Db)),yf=(ud={},m(ud,F.ASIA,[F.CHINA,F.JAPAN,F.INDIA]),m(ud,F.EUROPE,[]),m(ud,F.NORTH_AMERICA,[]),m(ud,F.SOUTH_AMERICA,[]),m(ud,F.OCEANIA,[]),m(ud,F.AFRICA,[]),ud),Kr=[F.OVERSEA,F.GLOBAL,F.CHINA,F.NORTH_AMERICA,F.EUROPE,F.ASIA,F.JAPAN,F.INDIA,F.OCEANIA,F.SOUTH_AMERICA,F.AFRICA],Zm=function(e){return Object.values(yf).flat().includes(e)},cu=function(e){var t;return null===(t=Hg(yf).find((function(t){return(t=ra(t,2))[0],t[1].includes(e)})))||void 0===t?void 0:t[0]},AC=function(e){return e.sort((function(e,t){return Kr.indexOf(e)-Kr.indexOf(t)}))},xe=function(e){var t=new Set;if(0===(e=AC(e).slice(0,3).map((function(e){var n=Kg[e];if(void 0===n)throw new Ia("invalid area key");return e=n.CODE,n=ff(n,yC),t.add(e),n}))).length)throw new Ia("areas cannot be empty");return ua({CODES:t},e.reduce((function(e,t){for(var n=0,r=Hg(e);n<r.length;n++){var i=ra(r[n],2),o=i[0];i=i[1],e[o]=Array.from(new Set([].concat(G(t[o]),G(i))))}return e})))},M,Lr=function(){var e=J(w.mark((function e(t,n){var r,i,o,a,s,c=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(2<(i=2<c.length&&void 0!==c[2]?c[2]:0))){e.next=3;break}return e.abrupt("return");case 3:return o={withCredentials:!0,body:t,timeout:2e4},a=0<i?(null==M?void 0:M.LOG_UPLOAD_SERVER[0])||"rtm.logservice.sd-rtn.com":(null==M?void 0:M.LOG_UPLOAD_SERVER[0])||"logservice-rtm.agora.io",s=n?"https://".concat(null!==(r=null==M?void 0:M.PROXY_NGINX[0])&&void 0!==r?r:"webrtc-cloud-proxy.sd-rtn.com","/ls/?h=").concat(a,"&p=443&d=upload/v1"):"https://".concat(a,"/upload/v1"),e.next=8,te(s,o).catch((function(e){return Lr(t,n,i+1)}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Mr=new wC({processId:"process-".concat(gg),sdkVersion:"Agora_RTM_SDK_for_Web_".concat("v1.4.3-17-g1e27aa38"),uploadRequest:Lr,rtmConfig:{}}),il="text payload rawMessage thumbnail attributeInfos keys value extra".split(" "),Nr="account ticket uid detail token account fileName cname user group key origin users src dst lastUpdateUserId channel cert wan_ip".split(" "),Or="serverReceivedTs isOfflineMessage enableHistoricalMessaging enableOfflineMessaging hasPeerReceived messageType enableNotificationToChannelMembers lastUpdateTs".split(" "),BC="ChannelMessage MemberLeft MessageFromPeer LocalInvitationRefused LocalInvitationAccepted RemoteInvitationCanceled PeersOnlineStatusChanged AttributesUpdated MemberJoined".split(" "),ye=function(e){if("string"==typeof e)return oa(e);if(Array.isArray(e)&&e.every((function(e){return"string"==typeof e})))return e.map((function(e){return oa(e)}));if(!Il(e)){for(var t={},n=0;n<Or.length;n++){var r=Or[n];r in e&&(t[r]=e[r])}if(0<Object.keys(t).length)return t;if(5>Object.keys(e).length){for(n=0,e=Object.entries(e);n<e.length;n++){var i=ra(e[n],2);r=i[0],i=i[1],il.includes(r)?t[r]="[Hidden Info]":t[oa(r)]="string"==typeof i?oa(i):"[Sensitive Info]"}return t}return"[Sensitive Info]"}return e},Pr=function(e){return"object"===X(e)?yd(e)?Vm(fe(e,5),il,Nr):e.constructor&&e.constructor.name:e},Qr=function(e,t){return e instanceof Error?e.message:"string"!=typeof e?JSON.stringify(Vm(fe(e,5),il,Nr)):(t=t.map((function(e){return e instanceof Error?e.message:"object"===X(e)?Gr(Array.isArray(e)?e.map(Pr):Pr(e)):e})),Nm.apply(void 0,[e.replace(/%[%Oo]/g,(function(e){return"%%"===e?"%":"%o"===e||"%O"===e?"%s":e}))].concat(G(t))))},CC=1,Rr=function(e,t,n){var r=Hr(e);return r.enabled=!0,r.log=n,r.useColors=!1,function(n){for(var i=arguments.length,o=Array(1<i?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(t.enableLogUpload){i=Cg(n);var s=Qr(i,o);Mr.upload({log_item_id:"".concat(CC++),log_level:e,payload_str:"[".concat(sC(),"] ").concat(e," - ").concat(256<s.length?s.slice(0,256):s)})}switch(i=function(e){var t=s||Qr(Cg(n),o),i=Nc.LOG_HANDLER;"function"==typeof i&&i({level:e,message:t}),r(t)},e){case"RTM:INFO":t.logFilter.info&&i("log");break;case"RTM:WARN":t.logFilter.warn&&i("warning");break;case"RTM:ERROR":t.logFilter.error&&i("error");break;case"RTM:TRACK":t.logFilter.track&&i("log");break;case"RTM:MSG:RECV":case"RTM:MSG:SEND":case"RTM:DEBUG":t.logFilter.debug&&i("debug")}}},jl,Sr=function(e){return function(t){var n=1===jl||void 0===e?"":"Ins#".concat(e," ");return"".concat(n).concat(t)}},kl=function(e,t,n){var r=Sr(jl);return Rr("RTM:".concat(t),n,(function(t){return e(r(t))}))},tb=function(){return function(e){function t(e,i){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];W(this,t);var a=r.call(this);if(m(n(a),"logError",void 0),m(n(a),"invokeTracker",void 0),m(n(a),"resultTracker",void 0),m(n(a),"errorTracker",void 0),m(n(a),"eventTracker",void 0),m(n(a),"info",void 0),m(n(a),"warn",void 0),m(n(a),"log",void 0),m(n(a),"genLogger",void 0),m(n(a),"loggerId",void 0),m(n(a),"logger",void 0),m(n(a),"name",void 0),a.logger=e,a.name=i,a.loggerId=e.loggerId,a.info=e.info,a.warn=e.warn,a.logError=e.logError,a.genLogger=e.genLogger,a.log=e.genLogger("RTM:DEBUG","<".concat(i,"> ")),a.invokeTracker=e.genTracker("Invoke"),a.eventTracker=e.genTracker("Event"),a.resultTracker=e.genTracker("Result"),a.errorTracker=e.genTracker("Error"),o){var s=a.emit.bind(n(a));a.emit=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];e=t[0],n=t.slice(1);var r=BC.includes(e);a.eventTracker.apply(a,["%s: ".concat(0<n.length?"%s emitted with args: ".concat(n.map((function(){return"%o"}))):"%s emitted"),i,e].concat(G(r?n.map(ye):n)));try{s.apply(void 0,t)}catch(t){a.logError("Caught in the callback function of the event %s",e,t)}}}return a}la(t,e);var r=ma(t);return t}(ea)},DC=function(e){return kl(console.log.bind(console),"INFO",e)},EC=function(e){return kl(console.warn.bind(console),"WARN",e)},FC=function(e){return kl(console.error.bind(console),"ERROR",e)},Tr=function(e,t){return function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",i=Sr(e),o=console.debug.bind(console),a=Rr(n,t,(function(e){return o(i(e))}));return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return a.apply(void 0,[r+e].concat(n))}}},GC=function(e,t){return function(n){return Tr(e,t)("RTM:TRACK","[".concat(n,"] "))}},Li=t.URI,eu=Oh,HC=ff(VB,["Wrapper"]),$m=Gk(HC,"URI"),Ur=function(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=e[r=nr(n,i)];e[r]=e[n],e[n]=o}return e.length=t,e},IC=function(e){return Ur(Xh(e))},JC=function(e){return Ur(Ni(e))},$e=function(e){return(Va(e)?IC:JC)(e)},af={0:9591,1:9593},$d=function(e){return"https://".concat(e,"/api/v1")},KC=bb.apply(void 0,G($e(["web-1.ap.sd-rtn.com","web-2.ap.sd-rtn.com"].map($d)))),LC=bb.apply(void 0,G($e(["ap-web-1.agora.io","ap-web-2.agora.io"].map($d)))),MC=bb.apply(void 0,G($e(["web-3.ap.sd-rtn.com","web-4.ap.sd-rtn.com"].map($d)))),NC=bb.apply(void 0,G($e(["ap-web-3.agora.io","ap-web-4.agora.io"].map($d)))),ll=Ph(),ml=function(e){function t(e,i,o,a,s,c){W(this,t);var u=r.call(this,s,Ai("Socket-",s.loggerId));if(m(n(u),"isActiveClose",!1),m(n(u),"loggedIn",!1),m(n(u),"useNewDomain",void 0),m(n(u),"receivedPacket",new Pa),m(n(u),"open$",void 0),m(n(u),"input$",new Pa),m(n(u),"userJoin$",new Pa),m(n(u),"attemptsSinceLastError",0),m(n(u),"message$",new Pa),m(n(u),"socket$",void 0),m(n(u),"toClose",new Pa),m(n(u),"toReconnect",new Pa),m(n(u),"sendLogger",void 0),m(n(u),"receiveLogger",void 0),m(n(u),"ip",void 0),m(n(u),"env",void 0),m(n(u),"ticket",void 0),m(n(u),"context",void 0),m(n(u),"getDomain",(function(){return an(u.ip,u.useNewDomain)})),m(n(u),"socketReconnector",(function(e){var t=function(e){return u.attemptsSinceLastError+=1,u.warn("The %s of Env %d reconnecting %s",u.name,u.env,e.message),Bc(3e3)};return e.pipe(Ga((function(e){return u.log("socket connection closed"),u.loggedIn=!1,2<=u.attemptsSinceLastError?(u.warn("socket connection failure"),u.emit("connectionFailure"),u.close(),Z(e)):u.isActiveClose?vb:(u.emit("reconnect"),u.useNewDomain=!u.useNewDomain,Z(e))})),oe((function(e){return e.pipe(Cc(t))})))})),u.ip=e,u.env=i,u.ticket=o,u.context=a,u.useNewDomain=null!=c?c:.5<=Math.random(),u.sendLogger=u.genLogger("RTM:MSG:SEND"),u.receiveLogger=u.genLogger("RTM:MSG:RECV"),0!==i&&1!==i)throw new ll({ILLEGAL_RTM_ENV:"The env number is out of rtm env count"});if(!Gm(e))throw new ll({IP_NOT_VALID:"The ip from ap is not valid"});var l=af[i];u.log("Opening websocket address %s for the Env %d",u.ip,u.env);var d=Xb(u.input$,u.userJoin$.pipe(Rt(2)),u.message$).pipe(ba((function(e){return Oh.encode(e).finish()})));return e=Xb(St("",{protocols:[],makeWebSocket:function(){if(u.context.config.enableCloudProxy){if(0===u.context.cloudProxyServers.length)throw u.logError("No cloud proxy server to connect"),new da;var e="wss://".concat(an(bn(u.context.cloudProxyServers),!1),"/");e=we(e,"sid",u.context.sid),e=we(e,"remote_port",l.toString()),e=we(e,"remote_ip",u.ip),e=we(e,"token",u.context.key),e=new WebSocket(e)}else e=new WebSocket("wss://".concat(u.getDomain(),":").concat(l));return e.binaryType="arraybuffer",e}}),u.toReconnect),u.socket$=Ca(e,Tk.pipe(hb(15e3),Ga((function(e){return Sa(e)&&u.warn("socket open timed out"),Z(e)})))).pipe(ba((function(e){if(e instanceof Error)throw u.warn("Env_%d: Force reconnect the socket",u.env),e;return e(d).pipe(ba((function(e){return Oh.decode(new Uint8Array(e))})))})),u.socketReconnector),u.open$=u.socket$.pipe(ca((function(e){u.log("Websocket opened",u.name),e.subscribe((function(e){var t=e.data;e=Li[e.uri].slice(0,-3),t=$m[e].decode(t);var n=HA({},Gk(t,"toJSON"),(function(e,t){return t instanceof U?Km(t):t})),r=!1;if((t instanceof vr||t instanceof ur)&&t.instance.lessThanOrEqual(4294967295)&&(r=!0),t instanceof wr||t instanceof xr){var i=t.instance,o=t.sequence;(t.dialogue.lessThanOrEqual(4294967295)||i.lessThanOrEqual(4294967295)||o.lessThan(1))&&(r=!0)}r?u.warn("Env_%d: Illegal %s, abandoned %o",u.env,e,n):("Pong"!==e&&u.receiveLogger("Env_%d: %s %o",u.env,e,n),u.receivedPacket.next([e,t]))}),(function(){}))})),qf(void 0),ob(u.toClose),pe()),u}la(t,e);var r=ma(t);return Ha(t,[{key:"address",get:function(){return"".concat(this.ip,":").concat(af[this.env])}},{key:"sendPacket",value:function(e,t){if("Ping"!==e){var n=uc(t,(function(e){return e instanceof U?Km(e):e}));this.sendLogger("Env_%d: %s %o",this.env,e,n)}t=du(e,t),"UserJoin"===e?this.userJoin$.next(t):"Message"===e?this.message$.next(t):this.input$.next(t)}},{key:"close",value:function(){this.isActiveClose=!0,this.loggedIn=!1,this.toClose.next()}},{key:"fromReceived",value:function(e){var t=this;return this.receivedPacket.pipe(ca((function(e){var n=ra(e,2);e=n[0],n=n[1],"UserResp"===e&&(t.attemptsSinceLastError=0,t.loggedIn=!0),"UserDrop"===e&&t.emit("socketUserDrop",n)})),wb((function(t){return ra(t,1)[0]===e})),ba((function(e){return ra(e,2)[1]})))}},{key:"forceReconnect",value:function(){this.toReconnect.next(new ll({FORCE_RECONNECTING:"Connection seems broken, try force reconnecting"}))}}]),t}(tb());N({target:"String",proto:!0,forced:zr},{padStart:function(e){return XB(this,e,1<arguments.length?arguments[1]:void 0)}});var OC=function(e){var t=xf(Kg);e=Yt(e);for(var n=0;n<t.length;n++){var r=Kg[t[n]];if(null!=r&&r.AP_DOMAINS.includes(e)||null!=r&&r.AP_BACKUP_DOMAINS.includes(e)||null!=r&&r.PROXY_AP.includes(e))return[r.CODE]}return[F.CHINA,F.GLOBAL]},PC={INVALID_APP_ID:"Illegal App ID",NO_AUTHORIZED:"Signature verification failed",TOKEN_TIMEOUT:"Dynamic key expired",INVALID_TOKEN_UID:"UID in the security key(token) is not valid",APP_ID_NO_ACTIVATED:"The vendor is not activated",DYNAMIC_KEY_NOT_ENABLED:"The vendor did not enable the dynamic key, but uses the dynamic key",DYNAMIC_ENABLED_BUT_STATIC_KEY:"The vendor enabled the dynamic key, but uses the static key",TOKEN_EXPIRED:"The token has expired",INVALID_USER_ID:"The user ID to login does not match the token",FORBIDDEN_REGION:"Forbidden to access the request in this area",CANNOT_MEET_AREA_DEMAND:"Cannot allocate to meet the requirements of the given area limit"},Vr={5:"INVALID_APP_ID",7:"INVALID_USER_ID",9:"NO_AUTHORIZED",10:"TOKEN_TIMEOUT",11:"APP_ID_NO_ACTIVATED",12:"INVALID_TOKEN_UID",13:"TOKEN_EXPIRED",14:"DYNAMIC_KEY_NOT_ENABLED",15:"DYNAMIC_ENABLED_BUT_STATIC_KEY",18:"FORBIDDEN_REGION",19:"CANNOT_MEET_AREA_DEMAND"},QC=[100,101,102],Qh=/web-(\d)/,Wr=function(e){function t(e,i){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];W(this,t);var a=r.call(this,i,"AccessPoint");return m(n(a),"handleUniLbsError",(function(e,t){var n=e;if(4<e.toString().length){var r=e.toString().padStart(8,"0"),i=parseInt(r.slice(0,4),10);if(r=parseInt(r.slice(4,8),10),201===i)n=r;else if(101===i&&!QC.includes(r))return Z(Error("service is currently unavailable"))}if(i=n.toString(),!Object.keys(Vr).includes(i))return(e=new da(["Login is rejected by the server. The response code is %d",e],jg)).serverCode=n,Z(e);switch(i=Vr[i],n=PC[i],i){case"INVALID_APP_ID":case"APP_ID_NO_ACTIVATED":return(t=new Ye(n,$q)).serverCode=e,Z(t);case"INVALID_USER_ID":return(t=new Ye(n,Jh)).serverCode=e,Z(t);case"TOKEN_EXPIRED":case"TOKEN_TIMEOUT":return(t=new Ye(n,Kh)).serverCode=e,Z(t);case"NO_AUTHORIZED":case"INVALID_TOKEN_UID":case"DYNAMIC_KEY_NOT_ENABLED":case"DYNAMIC_ENABLED_BUT_STATIC_KEY":return(t=new Ye(n,ar)).serverCode=e,Z(t);case"CANNOT_MEET_AREA_DEMAND":return(t=OC(t)).forEach((function(e){return a.failedAreas.add(e)})),a.failedAreas.size===(void 0===M?2:M.CODES.size)?((t=new I(n,jg)).serverCode=e,Z(t)):Z(Error("ap ".concat(t.join(", ")," cannot meet requirement")));case"FORBIDDEN_REGION":return(t=new da(n,jg)).serverCode=e,Z(t);default:return Z(Im("ApResErrType",i))}})),m(n(a),"getApEdgeInfo$",void 0),m(n(a),"getApEdgeInfoEndFirst$",void 0),m(n(a),"apFinish$",new Pa),m(n(a),"retryCount",0),m(n(a),"failedAreas",new Set),m(n(a),"usedUrl",[]),m(n(a),"newDomainUsed",!1),m(n(a),"backupNewDomainUsed",!1),m(n(a),"genUrl",(function(){return void 0===M?mi.apply(void 0,G($e([KC,LC]))).pipe(ni((function(e){return bb.apply(void 0,G(e))}))):bb.apply(void 0,G(M.AP_DOMAINS.slice(0,3).map($d)))})),m(n(a),"genBackupUrl",(function(){return void 0===M?mi.apply(void 0,G($e([MC,NC]))).pipe(ni((function(e){return bb.apply(void 0,G(e))}))):bb.apply(void 0,G(M.AP_BACKUP_DOMAINS.slice(0,3).map($d)))})),m(n(a),"getApUrl$",(function(e){var n,r;return a.genUrl().pipe(wb((function(e){return(!a.newDomainUsed||!e.includes("sd-rtn.com"))&&(e.includes("sd-rtn.com")&&(a.newDomainUsed=!0),!dl(a.usedUrl,(function(t){var n;return t===(null===(n=e.match(Qh))||void 0===n?void 0:n[1])})))})),ca((function(e){var t;void 0===M&&"string"==typeof(e=null===(t=e.match(Qh))||void 0===t?void 0:t[1])&&a.usedUrl.push(e)})),Ka(e?Math.max(Nc.RECONNECTING_AP_NUM,null!==(n=null==M?void 0:M.CODES.size)&&void 0!==n?n:0):null!==(r=null==M?void 0:M.CODES.size)&&void 0!==r?r:2),Dd((function(){return t.runOutOfUrlSymbol})),Ga((function(e,n){return a.newDomainUsed=!1,e===t.runOutOfUrlSymbol?(a.usedUrl=[],n):Z(e)})))})),m(n(a),"getBackupApUrl$",(function(e){var n,r;return a.genBackupUrl().pipe(wb((function(e){return(!a.backupNewDomainUsed||!e.includes("sd-rtn.com"))&&(e.includes("sd-rtn.com")&&(a.backupNewDomainUsed=!0),!dl(a.usedUrl,(function(t){var n;return t===(null===(n=e.match(Qh))||void 0===n?void 0:n[1])})))})),ca((function(e){var t;void 0===M&&"string"==typeof(e=null===(t=e.match(Qh))||void 0===t?void 0:t[1])&&a.usedUrl.push(e)})),Ka(e?Math.max(Nc.RECONNECTING_AP_NUM,null!==(n=null==M?void 0:M.CODES.size)&&void 0!==n?n:0):null!==(r=null==M?void 0:M.CODES.size)&&void 0!==r?r:2),Dd((function(){return t.runOutOfUrlSymbol})),Ga((function(e,n){return a.backupNewDomainUsed=!1,e===t.runOutOfUrlSymbol?(a.usedUrl=[],n):Z(e)})))})),m(n(a),"getProxyApUrl$",(function(e){var t,n;return bb.apply(void 0,G(((null==M?void 0:M.PROXY_AP.slice(0,3))||["ap-proxy-1.agora.io","ap-proxy-2.agora.io"]).map($d))).pipe(Ka(e?Math.max(Nc.RECONNECTING_AP_NUM,null!==(t=null==M?void 0:M.CODES.size)&&void 0!==t?t:0):null!==(n=null==M?void 0:M.CODES.size)&&void 0!==n?n:2))})),m(n(a),"context",void 0),m(n(a),"fetchCloudProxy",(function(e,t){var n=Ai("AP-",a.loggerId);a.log("The AccessPoint requests %s(%s)",e,n);var r=new AbortController;return a.apFinish$.pipe(Ka(1)).subscribe((function(){return r.abort()})),ad(J(w.mark((function i(){var o;return w.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=Ag(0,Number.MAX_SAFE_INTEGER),a.log("%s request opid: %d",n,o),i.abrupt("return",te(e,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"90","Content-Type":"application/json"},body:{sid:a.context.sid,opid:o,appid:a.context.appId,client_ts:Math.ceil(Date.now()/1e3),request_bodies:[{uri:22,buffer:{service_ids:[7,16],key:null!=t?t:a.context.key,cname:a.context.uid,uid:0,detail:ua({},void 0===M?{11:[F.CHINA,F.GLOBAL].join()}:{11:Array.from(M.CODES).map((function(e){return e===F.OVERSEA?"".concat(F.ASIA,",").concat(F.EUROPE,",").concat(F.AFRICA,",").concat(F.NORTH_AMERICA,",").concat(F.SOUTH_AMERICA,",").concat(F.OCEANIA):e})).join(",")})}}]},signal:r.signal}));case 3:case"end":return i.stop()}}),i)})))).pipe(Ga((function(t){return"AbortError"!==t.name&&(a.logError(t),a.warn("The AP server %s request failure",e,t)),vb})),cb(function(){var t=J(w.mark((function t(r){var i,o,s,c,u,l,d,h,f,p,v,g,m,y,b,_,E,S,x;return w.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.responseText,o=JSON.parse(i),a.log("The %s response is %o",n,o),(void 0===(s=o.response_body)||0===s.length||s.some((function(e){var t;return void 0===(null===(t=e.buffer)||void 0===t?void 0:t.code)||23!==e.uri})))&&Z(new da("cloud proxy response_body not valid",jg)),0===(c=s.filter((function(e){return 0!==e.buffer.code}))).length){t.next=14;break}if(void 0===(u=c.find((function(e){return 128===e.buffer.flag})))){t.next=12;break}return t.abrupt("return",a.handleUniLbsError(u.buffer.code,e));case 12:return a.logError("cloud proxy error response"),t.abrupt("return",a.handleUniLbsError(c[0].buffer.code,e));case 14:for(l=[],d=0;d<s.length;d++)if(262144===(null==(p=s[d])||null===(h=p.buffer)||void 0===h?void 0:h.flag))null===(v=p.buffer)||void 0===v||null===(g=v.edges_services)||void 0===g||null===(m=g.forEach)||void 0===m||m.call(g,(function(e){Gm(e=e.ip)&&-1===a.context.cloudProxyServers.indexOf(e)&&(a.log("got cloud proxy server: %s",e),a.context.cloudProxyServers.push(e))}));else if(128===(null==p||null===(f=p.buffer)||void 0===f?void 0:f.flag)){for(E=function(e,t){var n=t[e];l.some((function(e){return e.ip===n.ip}))||l.push({ip:n.ip,ticket:p.buffer.cert})},S=0,x=p.buffer.edges_services;S<x.length;S++)E(S,x);a.context.rtmArea=null!==(y=null===(b=p.buffer)||void 0===b||null===(_=b.detail)||void 0===_?void 0:_[9])&&void 0!==y?y:""}return t.abrupt("return",bb.apply(void 0,G(l).concat([fg])));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Ga((function(e){return sa(e)?Z(e):vb})),tg(),wb((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket})))})),m(n(a),"fetchAp",(function(e,t){var n=Ai("AP-",a.loggerId);a.log("The AccessPoint requests %s(%s)",e,n);var r=new AbortController;return a.apFinish$.pipe(Ka(1)).subscribe((function(){return r.abort()})),ad(J(w.mark((function i(){var o;return w.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=Ag(0,Number.MAX_SAFE_INTEGER),a.log("%s request opid: %d",n,o),i.abrupt("return",te(e,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"69","Content-Type":"application/json"},body:{flag:128,opid:o,key:t||a.context.key,cname:a.context.uid,detail:ua({},void 0===M?{11:[F.CHINA,F.GLOBAL].join()}:{11:Array.from(M.CODES).map((function(e){return e===F.OVERSEA?"".concat(F.ASIA,",").concat(F.EUROPE,",").concat(F.AFRICA,",").concat(F.NORTH_AMERICA,",").concat(F.SOUTH_AMERICA,",").concat(F.OCEANIA):e})).join(",")}),uid:0,sid:a.context.sid},signal:r.signal}));case 3:case"end":return i.stop()}}),i)})))).pipe(Ga((function(t){return"AbortError"!==t.name&&(a.logError(t),a.warn("The AP server %s request failure",e,t)),vb})),cb(function(){var t=J(w.mark((function t(r){var i,o,s,c,u,l,d;return w.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.responseText,o=JSON.parse(i),a.log("The %s response is %o",n,o),c=(s=o).code,u=s.addresses,l=s.detail,0===c){t.next=6;break}return t.abrupt("return",a.handleUniLbsError(c,e));case 6:if(0!==(d=u).length){t.next=11;break}return t.abrupt("return",Z(Error("No available edge address to connect")));case 11:return a.context.rtmArea=null==l?void 0:l[9],t.abrupt("return",bb.apply(void 0,G(d).concat([fg])));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),tg(),Ga((function(e){return sa(e)?Z(e):vb})),wb((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket})))})),a.context=e,a.getApEdgeInfoEndFirst$=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return Bc(0,e||o?Nc.RECONNECTING_AP_INTERVAL:2e3).pipe(Ka(1),ca((function(){a.retryCount+=1})),cb((function(){return a.context.config.enableCloudProxy?a.getProxyApUrl$(e||o):(4<=a.retryCount&&(a.retryCount=0),3>=a.retryCount?a.getApUrl$(e||o):a.getBackupApUrl$(e||o))})),cb((function(e){return a.context.config.enableCloudProxy?a.fetchCloudProxy(e):a.fetchAp(e)})),Ga((function(e){return e instanceof pb&&a.warn("AP request timeout"),Z(e)})),om((function(e){return e.ip})),ob(a.apFinish$))},a.getApEdgeInfo$=function(e){return Bc(0,e||o?Nc.RECONNECTING_AP_INTERVAL:2e3).pipe(Ka(8),ca((function(){a.retryCount+=1})),cb((function(){return a.context.config.enableCloudProxy?a.getProxyApUrl$(e||o):3>=a.retryCount?a.getApUrl$(e||o):a.getBackupApUrl$(e||o)})),cb((function(e){return(a.context.config.enableCloudProxy?a.fetchCloudProxy(e):a.fetchAp(e)).pipe()})),Ga((function(e){return e instanceof pb&&a.warn("AP request timeout"),Z(e)})),om((function(e){return e.ip})),ob(a.apFinish$))},a}la(t,e);var r=ma(t);return Ha(t,[{key:"clearUp",value:function(){this.failedAreas.clear(),this.retryCount=0}}]),t}(tb());m(Wr,"runOutOfUrlSymbol",Symbol("AP urls are used up"));var Xr=Ph(),Yr=function(e){function t(e,i,o){W(this,t);var a=r.call(this,i,"Connection");m(n(a),"apClient",void 0),m(n(a),"lastOpenSockets",[new qe(1),new qe(1)]),m(n(a),"curOpenSockets",[void 0,void 0]),m(n(a),"ipIterator",0),m(n(a),"firstEnv",.5<=Math.random()?1:0),m(n(a),"firstSocketOpener",void 0),m(n(a),"secondSocketOpener",void 0),m(n(a),"firstOpenKeeperSubject",new Pa),m(n(a),"secondOpenKeeperSubject",new Pa),m(n(a),"edgeInfoReplayed",void 0),m(n(a),"firstEnvOpenSocket",void 0),m(n(a),"firstOpenKeeperSub",void 0),m(n(a),"secondOpenKeeperSub",void 0),m(n(a),"context",void 0),m(n(a),"logger",void 0),a.context=e,a.logger=i,a.apClient=new Wr(a.context,i),a.apClient.apFinish$.subscribe((function(){a.log("Ap client fetch finished")}));var s,c=[];return a.edgeInfoReplayed=a.apClient.getApEdgeInfo$(o).pipe(oe((function(e){return e.pipe(ca((function(e){if(sa(e))throw e})),cd(o?Zd.getParameter("RECONNECTING_AP_INTERVAL"):900),ob(Bc(2e4)))})),wb((function(e){return!dl(c,e)})),Dd((function(){return new Xr({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})})),ca((function(e){c.push(e),a.log("An edge info got %o",e)})),ca({error:function(e){a.emit("connectionInitFailure",e)}}),wg((function(){a.apClient.clearUp()})),sm()),a.firstEnvOpenSocket=a.edgeInfoReplayed.pipe(cb((function(e){if(void 0===e)return Z(Error("Invalid edge info"));var t=new ml(e.ip,a.firstEnv,e.ticket,a.context,i,s);return a.firstEnv=1===a.firstEnv?0:1,t.on("connectionFailure",(function(){return a.onSocketConnectionFailure(t)})),s=!t.useNewDomain,t.open$.pipe(qf(t))})),ca((function(e){a.log("The websocket of ENV_%d opened to %s:%d",e.env,e.ip,af[e.env]),a.curOpenSockets[e.env]=e,a.lastOpenSockets[e.env].next(e),a.firstEnv=e.env,a.openSecondSocket(e.env,e.ip,e.useNewDomain)})),Ka(1),pe()),a.firstSocketOpener=a.firstEnvOpenSocket.pipe(cb((function(e){return e.open$.pipe(ca((function(){a.log("The websocket of first ENV_%d re-opened to %s:%d",e.env,e.ip,af[e.env]),a.curOpenSockets[e.env]=e,a.lastOpenSockets[e.env].next(e)})))}))),e=a.firstOpenKeeperSubject.pipe(Cc(Yc)),a.firstOpenKeeperSub=e.subscribe({error:a.logError}),a}la(t,e);var r=ma(t);return Ha(t,[{key:"initConnection",value:function(){this.firstOpenKeeperSubject.next(this.firstSocketOpener)}},{key:"closeSocket",value:function(e,t){if(![0,1].includes(e))throw new Fa({INVALID_ENV:"The env argument is not 0 or 1"});var n=e===this.firstEnv?this.firstOpenKeeperSub:this.secondOpenKeeperSub;this.firstOpenKeeperSub=void 0;var r=this.curOpenSockets[e];this.curOpenSockets[e]=void 0,r&&(r.isActiveClose=!0,setTimeout((function(){r.close()}),t)),void 0!==n&&setTimeout((function(){null==n||n.unsubscribe()}),t)}},{key:"waitClosing",value:function(e){var t=this;return e.isActiveClose=!0,e.open$.pipe(tt(),Ga((function(e){return e.message===mr.normalClosureMessage?vb:Z(e)})),hb(5e3),Ga((function(n){return n instanceof pb?(t.warn("Force closing the ENV_%d connection",e.env),vb):Z(n)})))}},{key:"onSocketConnectionFailure",value:function(e){var t=[0,1].filter((function(t){return t!==e.env}))[0];(t=this.curOpenSockets[t])&&t.loggedIn?this.reopenSocketWithApRequest(e.env):this.emit("socketsFailure")}},{key:"openSecondSocket",value:function(e,t,n){var r=this,i=1===e?0:1;this.secondSocketOpener=this.edgeInfoReplayed.pipe(rm((function(e,t){return[].concat(G(e),[t])}),[]),ba((function(e){return kr(e,(function(e){return Jm(t,e.ip)})).slice(-1)[0]})),Ka(1),cb((function(e){if(void 0===e)return Z(Error("Invalid edge info"));var t=new ml(e.ip,i,e.ticket,r.context,r.logger,n);return t.on("connectionFailure",(function(){return r.onSocketConnectionFailure(t)})),t.open$.pipe(ca((function(){r.lastOpenSockets[i].next(t),r.curOpenSockets[i]=t})))})),pe()),this.secondOpenKeeperSub=this.secondOpenKeeperSubject.pipe(Cc(Yc)).subscribe({error:this.logError}),this.secondOpenKeeperSubject.next(this.secondSocketOpener)}},{key:"reopenSocketWithApRequest",value:function(e){var t=this,n=[0,1].filter((function(t){return t!==e}))[0];if(void 0!==(n=this.curOpenSockets[n])){var r,i=n.ip;n=this.apClient.getApEdgeInfoEndFirst$(!0).pipe(Dd((function(){return new Xr({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})})),oe((function(e){return e.pipe(ca((function(e){if(e.code===Kh)t.emit("tokenExpired"),t.apClient.apFinish$.next(void 0);else if(sa(e))throw e})),cd(Zd.getParameter("RECONNECTING_AP_INTERVAL")),ob(Bc(15e3)))})),ca((function(e){t.log("An edge info got %o",e)})),wg((function(){t.apClient.clearUp()}))).pipe(rm((function(e,t){return[].concat(G(e),[t])}),[]),ba((function(e){return(e=kr(e,(function(e){return Jm(i,e.ip)}))).length-1>=t.ipIterator?e.slice(-t.ipIterator++-1)[0]:(t.ipIterator=0,e.slice(-1)[0])})),Dd(),cb((function(n){if(void 0===n)return Z(Error("Invalid edge info"));var i=new ml(n.ip,e,n.ticket,t.context,t.logger,r);return i.on("connectionFailure",(function(){return t.onSocketConnectionFailure(i)})),r=!i.useNewDomain,i.open$.pipe(qf(i))})),ca((function(n){t.log("The websocket of ENV_%d re-opened to %s:%d using ap",n.env,n.ip,af[n.env]),t.curOpenSockets[e]=n,t.lastOpenSockets[e].next(n)})),cb((function(n){return n.open$.pipe(ca((function(){t.log("The websocket of ENV_%d re-opened to %s:%d",n.env,n.ip,af[n.env]),t.curOpenSockets[e]=n,t.lastOpenSockets[e].next(n)})))})),pe()),e===this.firstEnv?this.firstOpenKeeperSubject.next(n):this.secondOpenKeeperSubject.next(n)}}}]),t}(tb()),Xc=fc.Writer,na=fc.util,zc=fc.roots.default||(fc.roots.default={}),RC=zc.Session=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.appId="",e.prototype.ver="",e.prototype.buildno=0,e.prototype.installId="",e.prototype.os=0,e.prototype.did="",e.prototype.index=null,e.prototype.token="",e.prototype.version=0,e.prototype.subVersion=0,e.encode=function(e,t){return t||(t=Xc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.appId&&Object.hasOwnProperty.call(e,"appId")&&t.uint32(42).string(e.appId),null!=e.ver&&Object.hasOwnProperty.call(e,"ver")&&t.uint32(50).string(e.ver),null!=e.buildno&&Object.hasOwnProperty.call(e,"buildno")&&t.uint32(56).int32(e.buildno),null!=e.installId&&Object.hasOwnProperty.call(e,"installId")&&t.uint32(66).string(e.installId),null!=e.os&&Object.hasOwnProperty.call(e,"os")&&t.uint32(128).int32(e.os),null!=e.did&&Object.hasOwnProperty.call(e,"did")&&t.uint32(138).string(e.did),null!=e.index&&Object.hasOwnProperty.call(e,"index")&&zc.Session.CommonIndex.encode(e.index,t.uint32(162).fork()).ldelim(),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(170).string(e.token),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(176).int32(e.version),null!=e.subVersion&&Object.hasOwnProperty.call(e,"subVersion")&&t.uint32(184).int32(e.subVersion),t},e.CommonIndex=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.index1="",e.prototype.index2="",e.prototype.index3="",e.encode=function(e,t){return t||(t=Xc.create()),null!=e.index1&&Object.hasOwnProperty.call(e,"index1")&&t.uint32(10).string(e.index1),null!=e.index2&&Object.hasOwnProperty.call(e,"index2")&&t.uint32(18).string(e.index2),null!=e.index3&&Object.hasOwnProperty.call(e,"index3")&&t.uint32(26).string(e.index3),t},e}(),e}(),SC=zc.Link=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.ec=0,e.prototype.sc=0,e.prototype.destServerIp="",e.prototype.ackedServerIp="",e.prototype.responseTime=0,e.encode=function(e,t){return t||(t=Xc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.ec&&Object.hasOwnProperty.call(e,"ec")&&t.uint32(40).int32(e.ec),null!=e.sc&&Object.hasOwnProperty.call(e,"sc")&&t.uint32(48).int32(e.sc),null!=e.destServerIp&&Object.hasOwnProperty.call(e,"destServerIp")&&t.uint32(58).string(e.destServerIp),null!=e.ackedServerIp&&Object.hasOwnProperty.call(e,"ackedServerIp")&&t.uint32(66).string(e.ackedServerIp),null!=e.responseTime&&Object.hasOwnProperty.call(e,"responseTime")&&t.uint32(72).int32(e.responseTime),t},e}(),TC=zc.Logout=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.encode=function(e,t){return t||(t=Xc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),t},e}(),UC=zc.KickedOff=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.linkId=0,e.prototype.code=0,e.prototype.server="",e.prototype.serverCode=0,e.encode=function(e,t){return t||(t=Xc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.linkId&&Object.hasOwnProperty.call(e,"linkId")&&t.uint32(48).int32(e.linkId),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(56).int32(e.code),null!=e.server&&Object.hasOwnProperty.call(e,"server")&&t.uint32(66).string(e.server),null!=e.serverCode&&Object.hasOwnProperty.call(e,"serverCode")&&t.uint32(72).int32(e.serverCode),t},e}(),VC=zc.ChnJoin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.encode=function(e,t){return t||(t=Xc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),t},e}(),WC=zc.ChnJoinRes=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.prototype.serverErrCode=0,e.encode=function(e,t){return t||(t=Xc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),null!=e.serverErrCode&&Object.hasOwnProperty.call(e,"serverErrCode")&&t.uint32(64).int32(e.serverErrCode),t},e}(),XC=zc.ChnLeave=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.encode=function(e,t){return t||(t=Xc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),t},e}(),YC=zc.ConnectionStateChange=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.elapse=na.Long?na.Long.fromBits(0,0,!1):0,e.prototype.oldState=0,e.prototype.newState=0,e.prototype.reason=0,e.prototype.reconnId=0,e.encode=function(e,t){return t||(t=Xc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.oldState&&Object.hasOwnProperty.call(e,"oldState")&&t.uint32(40).int32(e.oldState),null!=e.newState&&Object.hasOwnProperty.call(e,"newState")&&t.uint32(48).int32(e.newState),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(56).int32(e.reason),null!=e.reconnId&&Object.hasOwnProperty.call(e,"reconnId")&&t.uint32(64).int32(e.reconnId),t},e}(),fu=Object.freeze({__proto__:null,Session:RC,Link:SC,Logout:TC,KickedOff:UC,ChnJoin:VC,ChnJoinRes:WC,ChnLeave:XC,ConnectionStateChange:YC,default:zc}),gu=Object.freeze({__proto__:null,Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191,default:{Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191}}),ZC=function(e){function t(e,i,o){return W(this,t),m(n(o=r.call(this,o,"Context")),"_token",void 0),m(n(o),"config",void 0),m(n(o),"_uid",void 0),m(n(o),"_sid",void 0),m(n(o),"_area","CN"),m(n(o),"appId",void 0),m(n(o),"enableCloudProxy",!1),m(n(o),"cloudProxyServers",[]),o.appId=e,o.config=i,o}la(t,e);var r=ma(t);return Ha(t,[{key:"token",set:function(e){this._token="string"==typeof e&&e?e:void 0}},{key:"uid",get:function(){if("string"==typeof this._uid&&this._uid)return this._uid;throw new Ia("Cannot get illegal uid")},set:function(e){if(this.log("The user ID is set to %s",oa(e)),!za(e))throw new Ia;this._uid=e}},{key:"key",get:function(){if("string"==typeof this._token&&this._token)return this._token;if("string"==typeof this.appId&&this.appId)return this.appId;throw new Ia("Cannot get illegal key")}},{key:"sid",get:function(){if("string"==typeof this._sid&&this._sid)return this._sid;throw new Ia("Cannot get illegal sid")},set:function(e){if(this.log("sid is set to %s",e),"string"!=typeof e||!e)throw new Ia;this._sid=e}},{key:"rtmArea",get:function(){if("string"==typeof this._area&&this._area)return this._area;throw new Ia("Cannot get illegal area")},set:function(e){this.log("area is set to %s",e),"string"==typeof e&&e?this._area=e:this.warn("set area failed")}}]),t}(tb()),$C=!!Fc&&R((function(){Fc.prototype.finally.call({then:function(){}},(function(){}))}));if(N({target:"Promise",proto:!0,real:!0,forced:$C},{finally:function(e){var t=kd(this,mc("Promise")),n="function"==typeof e;return this.then(n?function(n){return mj(t,e()).then((function(){return n}))}:e,n?function(n){return mj(t,e()).then((function(){throw n}))}:e)}}),"function"==typeof Fc){var Zr=mc("Promise").prototype.finally;Fc.prototype.finally!==Zr&&Ta(Fc.prototype,"finally",Zr,{unsafe:!0})}var aD=function(){var e=J(w.mark((function e(t){return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,crypto.subtle.digest("SHA-256",t);case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$r=function(e){return Array.from(e).map((function(e){return e.toString(16).padStart(2,"0")})).join("")},bD=function(e){if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(0!=e.length%2)throw new RangeError("Expected string to be an even number of characters");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)t[n/2]=parseInt(e.substring(n,n+2),16);return t},as=function(e){return btoa(String.fromCharCode.apply(String,G(e))).replace(/={1,2}$/,"")},bs=function(){var e=J(w.mark((function e(t){var n;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,crypto.subtle.digest("SHA-1",t);case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n=sha1.arrayBuffer(t);case 9:return e.abrupt("return",as(new Uint8Array(n)));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),cs=function(e,t,n,r){r[t]=!0,n.has(e)?n.get(e).add(t):n.set(e,new Set([t]))},cD=function(e){switch(e){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":case"FFD8FFE1":return"image/jpeg";case"504B0304":return"application/zip";default:return"application/octet-stream"}},ds=function(e){function t(e,i,o,a){W(this,t);var s=r.call(this,o,"ChunkDownloadManager");if(m(n(s),"abortController",new AbortController),m(n(s),"downloadedSize",0),m(n(s),"successCount",0),m(n(s),"timer",void 0),m(n(s),"chunks",[]),m(n(s),"retUnit",void 0),m(n(s),"singleThread",!1),m(n(s),"initialized",!1),m(n(s),"ee",void 0),m(n(s),"chunkCount",void 0),m(n(s),"aborted",!1),m(n(s),"serverToIndices",new Map),m(n(s),"backupToIndices",new Map),m(n(s),"indexToBackupServers",[]),m(n(s),"busyBackupServers",new Map),m(n(s),"downloadingChunks",new Set),m(n(s),"metaInfo",void 0),m(n(s),"transHandler",void 0),s.metaInfo=e,s.transHandler=i,s.ee=void 0===a?new ea:a,o=e.size,e=e.unit,0===o)throw new Ia("size cannot be 0");return void 0!==i.cancelSignal&&i.cancelSignal.addEventListener("abort",(function(){s.abortController.abort()}),{once:!0}),s.abortController.signal.addEventListener("abort",(function(){s.aborted=!0}),{once:!0}),s.chunkCount=Math.ceil(o/(32768*e)),s}la(t,e);var r=ma(t);return Ha(t,[{key:"setInfoByResponse",value:function(e){var t=this,n=e.serverList,r=e.backupList;if(e=e.unit,n.length<this.chunkCount&&r.length<this.chunkCount)throw new Ia("servers is not enough");this.updateProgress(0),this.initialized=!0;var i=Array(this.chunkCount).fill(!1);if(n.forEach((function(e,n){return e.forEach((function(e){return cs(e,n,t.serverToIndices,i)}))})),r.forEach((function(e,n){return e.forEach((function(e){return cs(e,n,t.backupToIndices,i)}))})),i.some((function(){return!1})))throw new da("Not enough servers to download",mg);this.indexToBackupServers=r.map((function(e){return new Set(e)})),this.retUnit=e}},{key:"downloadChunks",value:function(){this.aborted?this.warn("downloadChunks after abort, ignored"):1===this.serverToIndices.size&&0===Array.from(this.serverToIndices.keys())[0]?this.serversDownload(this.backupToIndices):1<=this.serverToIndices.size?this.serversDownload(this.serverToIndices,!0):this.ee.emit("error",new da("not enough servers to download",mg))}},{key:"updateProgress",value:function(e){var t=this,n=this.downloadedSize+e;this.downloadedSize>this.metaInfo.size?(this.warn("Invalid download size, overflowed"),this.ee.emit("error",new Wc("Invalid download size",mg))):(this.downloadedSize=n,void 0!==this.timer&&0!==e&&(clearTimeout(this.timer),this.timer=void 0),void 0===this.timer&&this.successCount!==this.chunkCount&&(this.timer=setTimeout((function(){t.ee.emit("timedOut"),t.abortController.abort()}),12e4)),this.initialized&&0===e||void 0===this.transHandler.onOperationProgress||this.transHandler.onOperationProgress({totalSize:this.metaInfo.size,currentSize:this.downloadedSize}))}},{key:"getPayload",value:function(){for(var e=0,t=0,n=this.chunks;t<n.length;t++)e+=n[t].byteLength;if(e!==this.metaInfo.size)throw new Ia("invalid chunks total size");e=new Uint8Array(e),n=t=0;for(var r=this.chunks;n<r.length;n++){var i=r[n];e.set(new Uint8Array(i),t),t+=i.byteLength}return t=Array.from(e.subarray(0,4)).map((function(e){return e.toString(16)})).join("").toUpperCase(),Zt(e.buffer,cD(t))}},{key:"getDownloadUrl",value:function(e){var t=this.metaInfo.useNewDomain?"sd-rtn.com":"agora.io";return"https://".concat(Dg(e).split(".").join("-"),".edge.").concat(t,":9601/api/v1/chuck/download")}},{key:"serversDownload",value:function(){var e=J(w.mark((function e(t){var n,r=this,i=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=1<i.length&&void 0!==i[1]&&i[1],e.next=3,Promise.all(Array.from(t.entries()).map((function(e){return e=ra(e,2),r.postDownloadRequest(e[0],Array.from(e[1]),n).catch((function(e){404===e.statusCode?(r.ee.emit("notExist"),r.abortController.abort()):"AbortError"!==e.name&&(Sa(e)?r.singleThread?(r.abortController.abort(),r.ee.emit("timedOut")):(r.warn("%d download timed out after %d, retrying use single thread",e.index,r.singleThread?6e4:3e4),r.abortController.abort(),r.singleThread=!0,r.ee.emit("multiTimeOut")):(r.ee.emit("error",e),r.abortController.abort()))}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"postDownloadRequest",value:function(){var e=J(w.mark((function e(t,n,r){var i,o,a,s,c,u,l,d,h,f=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=function(){return(h=J(w.mark((function e(o){var a,h,f,p,v,g,m,y,b;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!==o||0!==t){e.next=5;break}throw new Ia("Invalid serverIp");case 5:a=void 0===o?l.getDownloadUrl(t):o;case 6:return l.downloadingChunks.add(i),e.next=9,u(a);case 9:return h=e.sent,f=h.responseData,l.downloadingChunks.delete(i),e.abrupt("return",f);case 15:if(e.prev=15,e.t0=e.catch(0),l.downloadingChunks.delete(i),n.unshift(i),l.metaInfo.useNewDomain=!1,"AbortError"!==e.t0.name){e.next=22;break}throw e.t0;case 22:if(!Sa(e.t0)){e.next=25;break}throw e.t0.index=i,e.t0;case 25:if(p=s,s+=1,!(2>p)){e.next=30;break}return e.t0 instanceof Ia||l.warn("%o, %d download failed, retrying",e.t0,i),e.abrupt("return",d());case 30:if(504!==e.t0.statusCode){e.next=34;break}throw(v=new db("download server timed out",{originalError:e.t0,serverCode:504})).index=i,v;case 34:if(!r||2!==p||0===c[0]){e.next=45;break}return e.t0 instanceof Ia||l.warn("%d download failed, using backup: %d, %o",i,c[0],e.t0),e.next=38,l.busyBackupServers.get(c[0]);case 38:return g=d(l.getDownloadUrl(c[0])),l.busyBackupServers.set(c[0],g),e.next=42,g;case 42:return m=e.sent,l.busyBackupServers.delete(c[0]),e.abrupt("return",m);case 45:if(!(r&&2<p&&void 0!==c[1]&&0!==c[1])){e.next=56;break}return l.warn("%d download failed, using backup 1: %d",i,c[1]),e.next=49,l.busyBackupServers.get(c[1]);case 49:return y=d(l.getDownloadUrl(c[1])),l.busyBackupServers.set(c[1],y),e.next=53,y;case 53:return b=e.sent,l.busyBackupServers.delete(c[1]),e.abrupt("return",b);case 56:throw e.t0.index=i,e.t0;case 58:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)},d=function(e){return h.apply(this,arguments)},!this.aborted){e.next=4;break}throw new Ia("download already aborted");case 4:if(void 0!==(i=n.shift())){e.next=8;break}return this.log("%s download finished",t),e.abrupt("return");case 8:if(!(this.singleThread&&0<this.downloadingChunks.size)){e.next=10;break}return e.abrupt("return");case 10:if(!this.downloadingChunks.has(i)){e.next=13;break}return this.log("%s already downloading, return",i),e.abrupt("return");case 13:if(void 0===this.chunks[i]){e.next=19;break}return this.successCount===this.chunkCount&&(this.log("chunks all download"),this.ee.emit("finished")),this.log("%s already downloaded, do next",i),e.next=18,this.postDownloadRequest(t,n,r);case 18:return e.abrupt("return");case 19:return o=new FormData,a={hash:hu(this.metaInfo.hashHexStr),unit:void 0===this.retUnit?this.metaInfo.unit:this.retUnit,instance:this.metaInfo.instance,loginOpt:this.metaInfo.loginOpt,ticket:this.metaInfo.ticket,index:i},o.append("parameter",JSON.stringify(a)),s=0,c=Array.from(this.indexToBackupServers[i]),u=function(e){return te(e,{body:o,signal:f.abortController.signal,timeout:f.singleThread?12e4:3e4},{useBinaryResponse:!0})},l=this,e.next=28,d().then((function(e){return void 0!==f.chunks[i]?f.log("chunk %d download duplicated",i):(f.chunks[i]=e,f.log("chunk %d downloaded",i),f.successCount+=1,f.updateProgress(f.chunks[i].byteLength)),f.successCount===f.chunkCount&&(f.log("chunks all download"),f.ee.emit("finished")),f.singleThread?(f.downloadChunks(),Promise.resolve()):f.postDownloadRequest(t,n,r)}));case 28:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),t}(tb()),es=function(e){function t(e,i,o,a){W(this,t);var s=r.call(this,o,"ChunkUploadManager");if(m(n(s),"chunkCount",0),m(n(s),"chunks",[]),m(n(s),"uploadedChunks",[]),m(n(s),"totalFailures",0),m(n(s),"timer",void 0),m(n(s),"initState","uninitialized"),m(n(s),"ee",void 0),m(n(s),"unit",0),m(n(s),"uploadedSize",0),m(n(s),"singleThread",!1),m(n(s),"abortController",new AbortController),m(n(s),"servers",[]),m(n(s),"aborted",!1),m(n(s),"metaInfo",void 0),m(n(s),"transHandler",void 0),s.metaInfo=e,s.transHandler=i,s.ee=void 0===a?new ea:a,0===e.file.length)throw new I("file not found or is empty",wf);return void 0!==i.cancelSignal&&i.cancelSignal.addEventListener("abort",(function(){s.abortController.abort()}),{once:!0}),s.abortController.signal.addEventListener("abort",(function(){s.aborted=!0}),{once:!0}),s}la(t,e);var r=ma(t);return Ha(t,[{key:"initChunks",value:function(){var e=J(w.mark((function e(t){var n,r,i,o,a,s=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("initialized"!==this.initState&&"initializing"!==this.initState){e.next=2;break}throw new Ia("cannot re-initialize");case 2:for(this.initState="initializing",this.unit=t,n=this.sliceFile(t,this.metaInfo.file),this.chunkCount=n.length,r=[],i=function(e,t){var n=(e=ra(t[e],2))[0],i=e[1];e=bs(i).then((function(e){s.chunks[n]={payload:i,sha1:e,uploadedTo:void 0,index:n,processed:!1}})),r.push(e)},o=0,a=Array.from(n.entries());o<a.length;o++)i(o,a);return e.next=11,Promise.all(r);case 11:this.updateProgress(0),this.initState="initialized",this.log("upload chunks initialized");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadToServers",value:function(){var e=this;if(!this.aborted){for(var t=this.chunks.filter((function(e){return!e.processed})),n=function(n){var r=t[n],i=e.servers.filter((function(e){return!e.isUploading})).sort((function(e,t){return e.successCount-t.successCount})).sort((function(e,t){return e.failureCount-t.failureCount}))[0];if(void 0===i||1<i.failureCount)return e.log("Upload server not available, waiting"),e.ee.emit("serverUsedUp"),Om(1e3).then((function(){e.totalFailures>2*e.chunkCount&&e.ee.emit("error"),e.totalFailures+=1,void 0!==i&&(i.failureCount=0),e.uploadToServers()})).catch((function(){})),"break";r.processed=!0,i.isUploading=!0,e.log("uploading chunk %d to server %s",r.index,Dg(i.ip));var o=e.getUploadUrl(i.ip);return J(w.mark((function t(){var n;return w.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.postChunk(r.payload,o,r.index);case 3:n=e.chunks.findIndex((function(e){return e===r})),r.uploadedTo=i.ip,e.chunks.splice(n,1),e.uploadedChunks.push(r),i.successCount+=1,i.isUploading=!1,e.updateProgress(r.payload.byteLength),e.log("upload chunk %d successfully",r.index),t.next=31;break;case 13:if(t.prev=13,t.t0=t.catch(0),i.isUploading=!1,r.processed=!1,504!==t.t0.statusCode&&!Sa(t.t0)){t.next=27;break}if(e.singleThread){t.next=24;break}return e.warn("%d upload timed out after %d, retrying use single thread",r.index,e.singleThread?12e4:3e4),e.abortController.abort(),e.singleThread=!0,e.ee.emit("multiTimeOut"),t.abrupt("return");case 24:return e.ee.emit("timedOut"),e.abortController.abort(),t.abrupt("return");case 27:return e.metaInfo.useNewDomain=!1,i.failureCount+=1,t.next=31,Om(1e3);case 31:e.uploadedChunks.length===e.chunkCount?(e.log("chunks uploaded"),e.ee.emit("finished")):(e.singleThread||1===e.chunks.filter((function(e){return!e.processed})).length)&&e.uploadToServers();case 32:case"end":return t.stop()}}),t,null,[[0,13]])})))(),e.singleThread?"break":void 0},r=0;r<t.length&&"break"!==n(r);r++);0===t.length&&this.uploadedChunks.length!==this.chunkCount&&this.log("%d chunks left uploading",this.chunkCount-this.uploadedChunks.length)}}},{key:"getUploadServerIPs",value:function(){var e=!0,t=[],n=G(this.uploadedChunks).sort((function(e,t){return e.index-t.index})),r=0;for(n=Array.from(n.values());r<n.length;r++){var i=n[r].uploadedTo;if(void 0===i){e=!1;break}t.push(i)}if(!e)throw new Ia("some chunks not uploaded, cannot get upload server ips");return t}},{key:"addServers",value:function(e){var t=this;e.forEach((function(e){var n=t.servers.findIndex((function(t){return t.ip===e}));-1!==n?t.servers[n].failureCount=0:(t.log("server %s added",Dg(e)),t.servers.push({successCount:0,isUploading:!1,ip:e,failureCount:0}))}))}},{key:"updateProgress",value:function(e){var t=this,n=void 0!==e?this.uploadedSize+e:this.metaInfo.file.length;n>this.metaInfo.file.length?(this.warn("Invalid upload size, overflowed"),this.ee.emit("error",new Wc("Invalid upload size",lg))):(this.uploadedSize=n,void 0!==this.timer&&0!==e&&(clearTimeout(this.timer),this.timer=void 0),void 0===this.timer&&void 0!==e&&this.uploadedChunks.length!==this.chunkCount&&(this.timer=setTimeout((function(){t.ee.emit("timedOut"),t.abortController.abort()}),12e4)),"initialized"===this.initState&&0===e||void 0===this.transHandler.onOperationProgress||this.transHandler.onOperationProgress({totalSize:this.metaInfo.file.length,currentSize:this.uploadedSize}))}},{key:"sliceFile",value:function(e,t){var n=0,r=[],i=t.length;for(e*=32768;n<i;)r.push(t.slice(n,n+e)),n+=e;return this.log("chunks split into %d",r.length),r}},{key:"postChunk",value:function(){var e=J(w.mark((function e(t,n,r){var i,o,a,s,c,u,l;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.aborted){e.next=2;break}throw new Ia("upload already aborted");case 2:if(void 0!==this.unit){e.next=4;break}throw new Ia("unit is undefined");case 4:return i=this.metaInfo,o=i.ticket,a=i.instance,s=i.loginOpt,c=i.hashStr,e.t0=r,e.t1=c,e.next=9,bs(t);case 9:return e.t2=e.sent,e.t3=this.unit,e.t4=o,e.t5=a,e.t6=s,u={index:e.t0,hash:e.t1,sha1:e.t2,unit:e.t3,ticket:e.t4,instance:e.t5,loginOpt:e.t6},(l=new FormData).append("parameter",JSON.stringify(u)),l.append("payload",new Blob([t])),e.next=20,te(n,{headers:{Accept:"application/json"},body:l,timeout:this.singleThread?12e4:3e4,signal:this.abortController.signal});case 20:if(201===e.sent.status){e.next=24;break}throw new da("uploading chunk ".concat(r," failed"));case 24:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getUploadUrl",value:function(e){var t=this.metaInfo.useNewDomain?"sd-rtn.com":"agora.io";return"https://".concat(Dg(e).split(".").join("-"),".edge.").concat(t,":9601/api/v1/chuck/upload")}}]),t}(tb()),fs=function(e){function t(e){W(this,t);var i=r.call(this,e,"MediaTaskManager");return m(n(i),"isProcessing",!1),m(n(i),"authInfo",void 0),m(n(i),"taskFinishers",{}),m(n(i),"mediaTasks",new Map),m(n(i),"ongoingTask",void 0),i.on("connectionStateChanged",(function(e){if(e===S.ConnectionState.ABORTED||e===S.ConnectionState.DISCONNECTED){void 0!==i.ongoingTask&&i.cancelTask(i.ongoingTask),e=0;for(var t=Array.from(i.mediaTasks.entries());e<t.length;e++){var n=ra(t[e],2)[1];i.cancelTask(n)}i.mediaTasks.clear(),i.taskFinishers={}}else e===S.ConnectionState.RECONNECTING?void 0!==i.ongoingTask&&i.ongoingTask.manager.abortController.abort():e===S.ConnectionState.CONNECTED&&void 0!==i.ongoingTask&&i.ongoingTask.manager.ee.emit("reconnected")})),i}la(t,e);var r=ma(t);return Ha(t,[{key:"setAuthInfo",value:function(e){this.authInfo=e}},{key:"waitMediaTask",value:function(e){var t=this;return new Promise((function(n,r){t.taskFinishers[e]={resolve:n,reject:r},t.isProcessing||t.processMediaTask()})).finally((function(){void 0!==t.ongoingTask&&void 0!==t.ongoingTask.manager.timer&&clearTimeout(t.ongoingTask.manager.timer),delete t.taskFinishers[e],0!==t.mediaTasks.size?t.processMediaTask():t.isProcessing=!1}))}},{key:"addUploadTask",value:function(e,n,r,i){var o=e.file;if(e=e.hash,void 0===this.authInfo)throw new Ia("session not found");if(this.mediaTasks.size>=t.MAX_PENDING_TASK_COUNT-1)throw new ib("Upload media failed, exceed max pending jobs",xA);return i=new es({hashStr:as(e),file:o,ticket:this.authInfo.ticket,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),useNewDomain:this.authInfo.useNewDomain},i,this.logger),o=Ud(),this.mediaTasks.set(o,{type:"UPLOAD",manager:i,hash:e,setter:r,fetcher:n,taskId:o}),o}},{key:"addDownloadTask",value:function(e,n,r){var i=e.hashHexStr,o=e.size,a=e.unit;if(e=e.zone,void 0===this.authInfo)throw new Ia("session not found");if(this.mediaTasks.size>=t.MAX_PENDING_TASK_COUNT-1)throw new ib("Download media failed, exceed max pending jobs",BA);return r=new ds({hashHexStr:i,ticket:this.authInfo.ticket,useNewDomain:this.authInfo.useNewDomain,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),size:o,zone:e,unit:a},r,this.logger),i=Ud(),this.mediaTasks.set(i,{type:"DOWNLOAD",manager:r,fetcher:n,taskId:i}),i}},{key:"doDownloadTaskImpl",value:function(){var e=J(w.mark((function e(t,n){var r,i,o,a,s,c,u,l,d=this,h=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=2<h.length&&void 0!==h[2]&&h[2],o=i=t.manager,r&&(i=new ds(o.metaInfo,o.transHandler,this.logger,o.ee)),a=t.fetcher,e.next=7,a();case 7:if(s=e.sent,c=s.serverList,u=s.backupList,l=s.unit,!r||l===o.retUnit){e.next=13;break}throw new da("download unit is different, reject to continue",mg);case 13:r&&(t.manager=i,i.downloadedSize=o.downloadedSize,i.successCount=o.successCount,i.timer=o.timer,i.chunks=o.chunks,i.initialized=o.initialized,i.singleThread=o.singleThread,i.updateProgress(0)),i.ee.once("reconnected",(function(){i.ee.removeAllListeners(),d.doDownloadTaskImpl(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("multiTimeOut",(function(){i.ee.removeAllListeners(),d.doDownloadTaskImpl(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("error",(function(e){i.ee.removeAllListeners(),n.reject(new da(["download file file, index %d",e.index],{code:mg,originalError:e}))})),i.ee.once("notExist",(function(){i.abortController.abort(),i.ee.removeAllListeners(),n.reject(new da("download file not found",AA))})),i.ee.once("timedOut",(function(){i.ee.removeAllListeners(),i.abortController.abort(),n.reject(new db("download timed out",zA))})),void 0!==i.transHandler.cancelSignal&&i.transHandler.cancelSignal.addEventListener("abort",(function(){n.reject(new hl("Downloading canceled",ir))}),{once:!0}),i.ee.once("finished",(function(){n.resolve({type:"DOWNLOAD",payload:i.getPayload()})})),i.setInfoByResponse({serverList:c,backupList:u,unit:l}),i.downloadChunks();case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"doDownloadTask",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=e.taskId;return r||(this.mediaTasks.delete(i),this.ongoingTask=e),new Promise((function(i,o){n.doDownloadTaskImpl(e,t,r).then(i).catch(o)}))}},{key:"doUploadTaskImpl",value:function(){var e=J(w.mark((function e(t,n){var r,i,o,a,s,c,u,l,d=this,h=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=2<h.length&&void 0!==h[2]&&h[2],o=i=t.manager,r&&(i=new es(o.metaInfo,o.transHandler,this.logger,o.ee)),a=t.fetcher,s=new Pa,u=new Promise((function(e,u){var l=a(),d=l.ret,h=l.err,f=l.timeout;l.fin.pipe(ob(s)).subscribe({next:function(e){n.resolve({type:"UPLOAD",retUnit:e.unit,zone:e.zone})},complete:function(){e({hasExist:!0}),s.next(),s.complete()}}),d.pipe(ob(s),cb(function(){var e=J(w.mark((function e(a){var s,u;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.servers,u=a.unit,r&&o.unit!==u?n.reject(new da("upload unit is different, reject to continue",lg)):r&&(t.manager=i,i.chunkCount=o.chunkCount,i.chunks=o.chunks,i.totalFailures=o.totalFailures,i.uploadedChunks=o.uploadedChunks,i.timer=o.timer,i.initState=o.initState,i.unit=o.unit,i.uploadedSize=o.uploadedSize,i.singleThread=o.singleThread,i.updateProgress(0)),i.addServers(s),"uninitialized"!==i.initState){e.next=7;break}return c=i.initChunks(u),e.next=7,c;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).subscribe({complete:function(){return e({hasExist:!1})},error:u}),l=function(t){"uninitialized"!==i.initState&&c?e(c.then((function(){return{hasExist:!1}}))):u(t)},h.pipe(ob(s)).subscribe({error:l}),f.pipe(ob(s)).subscribe({error:l})})),e.next=9,u;case 9:if(!e.sent.hasExist){e.next=15;break}return i.updateProgress(),this.log("file already exists, skipping upload"),e.abrupt("return");case 15:s.next(),s.complete(),this.log("chunks initialization promise resolved"),l=gb(i.ee,"serverUsedUp").pipe(Gt((function(){return i.chunkCount!==i.uploadedChunks.length})),Jt(5e3,void 0,{leading:!1}),pm((function(){return a().ret}))).subscribe((function(e){i.addServers(e.servers)})),i.ee.once("reconnected",(function(){i.ee.removeAllListeners(),d.doUploadTask(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("multiTimeOut",(function(){i.ee.removeAllListeners(),d.doUploadTask(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("timedOut",(function(){l.unsubscribe(),i.ee.removeAllListeners(),i.abortController.abort(),n.reject(new db("upload timed out",Lh))})),i.ee.once("error",(function(e){l.unsubscribe(),i.ee.removeAllListeners(),i.abortController.abort(),n.reject(e||new da("upload error",lg))})),void 0!==i.transHandler.cancelSignal&&i.transHandler.cancelSignal.addEventListener("abort",(function(){n.reject(new hl("Uploading canceled",hr))}),{once:!0}),i.ee.once("finished",J(w.mark((function e(){var r,o,a;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.unsubscribe(),e.next=3,t.setter(i.unit,i.getUploadServerIPs());case 3:r=e.sent,o=r.zone,a=r.unit,i.ee.removeAllListeners(),n.resolve({type:"UPLOAD",retUnit:a,zone:o});case 8:case"end":return e.stop()}}),e)})))),i.uploadToServers();case 26:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"doUploadTask",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=e.taskId;return r||(this.mediaTasks.delete(i),this.ongoingTask=e),new Promise((function(i,o){n.doUploadTaskImpl(e,t,r).then(i).catch(o)}))}},{key:"processMediaTask",value:function(){var e=J(w.mark((function e(){var t,n,r;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.mediaTasks.size){e.next=2;break}throw Error("no upload tasks");case 2:if(this.isProcessing=!0,t=this.mediaTasks.keys().next().value,void 0!==(n=this.taskFinishers[t])){e.next=7;break}throw Error("top task not found");case 7:if(void 0!==(r=this.mediaTasks.get(t))){e.next=10;break}throw new Ia("task invalid");case 10:if("UPLOAD"!==r.type){e.next=15;break}return e.next=13,this.doUploadTask(r,n).catch((function(e){r.manager.ee.removeAllListeners(),n.reject(e)}));case 13:e.next=18;break;case 15:if("DOWNLOAD"!==r.type){e.next=18;break}return e.next=18,this.doDownloadTask(r,n).catch((function(e){r.manager.ee.removeAllListeners(),n.reject(e)}));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelTask",value:function(e){var t="DOWNLOAD"===e.type?ir:hr;e.manager.ee.removeAllListeners(),e.manager.abortController.abort(),void 0!==this.taskFinishers[e.taskId]&&this.taskFinishers[e.taskId].reject(new hl("User logged out or kicked off, media task canceled",t))}}]),t}(tb());m(fs,"MAX_PENDING_TASK_COUNT",9),Oo("of",(function(){for(var e=0,t=arguments.length,n=new(Ne(this))(t);t>e;)n[e]=arguments[e++];return n}),Dj);var gs=1/0,dD=Math.max,ju=function(e,t,n){var r=Object(e);if(!Ed(e)){var i=Te(t);e=Ad(e),t=function(e){return i(r[e],e,r)}}return-1<(t=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;if(null==n)n=0;else{var i=(n=n?(n=gl(n))===gs||n===-gs?17976931348623157e292*(0>n?-1:1):n==n?n:0:0===n?n:0)%1;n=n==n?i?n-i:n:0}return 0>n&&(n=dD(r+n,0)),Xp(e,Te(t),n)}(e,t,n))?r[i?e[t]:t]:void 0},iu=function(e,t){return e&&e.length?vk(e,void 0,"function"==typeof t?t:void 0):[]},hs=function(){function e(){W(this,e),m(this,"size",0),m(this,"fields",new Map)}return Ha(e,[{key:"define",value:function(e,t,n){if(this.size+=n,64<this.size)throw new RangeError("the struct over 64 bits is not supported");Mg(t={val:0,isNumber:"number"===t,isBoolean:"boolean"===t,oneof:"number"===t||"boolean"===t?void 0:t,len:n}),this.fields.set(e,t)}},{key:"set",value:function(e,t){if(!(e=this.fields.get(e)))throw Error("field not found");var n=e.oneof;if(!U.isLong(t)&&"number"!=typeof t)if("boolean"==typeof t)t=t?1:0;else{if(void 0===n)throw Error("invalid field type");if(void 0===(t=n[t]))throw Error("field type not found")}Mg(e,t),e.val=t}},{key:"toNumber",value:function(){for(var e=0,t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var i=ra(r[n],2)[1],o=i.len;void 0!==(i=i.val)&&(e+=U.fromValue(i).shiftLeft(t).toNumber(),t+=o)}return e}},{key:"toLong",value:function(){for(var e=U.fromNumber(0,!0),t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var i=ra(r[n],2)[1],o=i.len;void 0!==(i=i.val)&&(e=U.fromValue(i).shiftLeft(t).add(e),t+=o)}return e}},{key:"assert",value:function(e,t){function n(e){if(!U.isLong(e)&&"number"!=typeof e)if("boolean"==typeof e)e=e?1:0;else{if(void 0===i)throw Error("invalid field type");if(void 0===(e=i[e]))throw Error("field type not found")}return Mg(r,e),Lg(e,r.val)}var r=this.fields.get(e);if(!r)throw Error("field not found");var i=r.oneof;if(!Array.isArray(t))return n(t);if(1===t.length)return n(t[0]);if(t.every((function(e){return"string"==typeof e}))&&void 0!==i)return t.some((function(e){return n(e)}));throw Error("invalid valueTypes")}},{key:"from",value:function(e){e=U.fromValue(e);for(var t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var i=ra(r[n],2)[1],o=i.len,a=U.fromNumber(Math.pow(2,o)-1,!0).shiftLeft(t);Mg(i,a=e.and(a).shiftRightUnsigned(t)),i.val=a,t+=o}}},{key:"typeOf",value:function(e){if(void 0!==(e=this.fields.get(e))){var t=e.oneof;if(e=e.val,void 0!==t){var n=0;for(t=Object.entries(t);n<t.length;n++){var r=ra(t[n],2),i=r[0];if(Lg(e,r[1]))return i}}}throw new TypeError("can only get type of oneof type")}}]),e}(),is=function(e){function t(e){W(this,t);var r=n.call(this);return r.define("Rejoin","boolean",1),r.define("Unused","number",31),r.define("Platform","number",8),r.define("Version","number",12),r.define("Subversion","number",12),r.set("Platform",7),r.set("Version",4),r.set("Subversion",203),r.set("Rejoin",e),r}la(t,e);var n=ma(t);return t}(hs),eD=ua(ua(ua(ua({},{PeerTextMessage:0,ChannelTextMessage:1,VendorTextMessage:2}),{PeerRawMessage:3,ChannelRawMessage:4,VendorRawMessage:5}),{PeerImageMessage:6,ChannelImageMessage:7,VendorImageMessage:8}),{PeerFileMessage:15,ChannelFileMessage:16,VendorFileMessage:17}),js={CallInvite:101,CallAccept:102,CallReject:103,CallCancel:104},fD=ua(ua({},eD),js),gD={Uncompressed:0,Zlib:1},ae=function(e){function t(e){W(this,t);var r=n.call(this);if(r.define("MessageType",fD,8),r.define("BroadcastJumps","number",2),r.define("ToCache","boolean",1),r.define("FromCache","boolean",1),r.define("CompressionMethod",gD,2),r.define("IterationNumber","number",4),r.define("BufferedMessage","boolean",1),r.define("ToArchive","boolean",1),r.define("FromArchive","boolean",1),"number"==typeof e||U.isLong(e))r.from(e);else if(void 0!==e){var i=0;for(e=Hg(e);i<e.length;i++){var o=ra(e[i],2);r.set(o[0],o[1])}}return r}la(t,e);var n=ma(t);return Ha(t,[{key:"isTextMessage",value:function(){return this.assert("MessageType",["PeerTextMessage","ChannelTextMessage","VendorTextMessage"])}},{key:"isRawMessage",value:function(){return this.assert("MessageType",["ChannelRawMessage","PeerRawMessage","VendorRawMessage"])}},{key:"isRawPeerMessage",value:function(){return this.assert("MessageType","PeerRawMessage")}},{key:"isRawChannelMessage",value:function(){return this.assert("MessageType","ChannelRawMessage")}},{key:"isPeerTextMessage",value:function(){return this.assert("MessageType","PeerTextMessage")}},{key:"isChannelTextMessage",value:function(){return this.assert("MessageType","ChannelTextMessage")}},{key:"isInvitation",value:function(e){var t=this;return void 0!==e?this.assert("MessageType",e):xf(js).some((function(e){return t.assert("MessageType",e)}))}},{key:"isFileMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","ChannelFileMessage","VendorFileMessage"])}},{key:"isImageMessage",value:function(){return this.assert("MessageType",["PeerImageMessage","ChannelImageMessage","VendorImageMessage"])}},{key:"isPeerMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","PeerTextMessage","PeerImageMessage","PeerRawMessage"])}},{key:"isZlibCompressed",value:function(){return this.assert("CompressionMethod","Zlib")}},{key:"isFromCache",value:function(){return this.assert("FromCache",!0)}},{key:"isBufferedMessage",value:function(){return this.assert("BufferedMessage",!0)}},{key:"getInvitationType",value:function(){if(!this.isInvitation())throw new TypeError("cannot get InvitationType of a normal message type");return this.typeOf("MessageType")}}]),t}(hs),hD=function(e){function t(e){return W(this,t),m(n(e=r.call(this,e,"ChatManager")),"dialogueLru",new Sx(void 0,{maxlen:1e4,ttl:1e4})),e}la(t,e);var r=ma(t);return Ha(t,[{key:"getChatInfo",value:function(e){var t=this.dialogueLru.get(e);if(this.dialogueLru.prune(),t){var n=t.dialogue,r={dialogue:n,sequence:t=t.sequence.add(1)};return this.dialogueLru.set(e,{dialogue:n,sequence:t}),r}return n={dialogue:Bg(),sequence:U.fromNumber(1,!0)},this.dialogueLru.set(e,n),n}}]),t}(tb()),v={};"object"==X(module)&&(module.exports=v),v.parse=function(e,t){var n,r=v.bin.readUshort,i=v.bin.readUint,o={};for(n=(e=new Uint8Array(e)).length-4;101010256!=i(e,n);)n--;var a=r(e,n=n+4+4);r(e,n+=2),i(e,n+=2),n=i(e,n+=4);for(var s=0;s<a;s++){i(e,n),n+=4,n+=4,n+=4,i(e,n+=4);var c=i(e,n+=4),u=i(e,n+=4),l=r(e,n+=4),d=r(e,n+2),h=r(e,n+4);n+=6;var f=i(e,n+=8);n+=4,n+=l+d+h,v._readLocal(e,f,o,c,u,t)}return o},v._readLocal=function(e,t,n,r,i,o){var a=v.bin.readUshort,s=v.bin.readUint;s(e,t),a(e,t+=4),a(e,t+=2);var c=a(e,t+=2);s(e,t+=2),s(e,t+=4),s=a(e,t=t+4+8);var u=a(e,t+=2);if(t+=2,a=v.bin.readUTF8(e,t,s),t=t+s+u,o)n[a]={size:i,csize:r};else if(e=new Uint8Array(e.buffer,t),0==c)n[a]=new Uint8Array(e.buffer.slice(t,t+r));else{if(8!=c)throw"unknown compression method: "+c;t=new Uint8Array(i),v.inflateRaw(e,t),n[a]=t}},v.inflateRaw=function(e,t){return v.F.inflate(e,t)},v.inflate=function(e,t){return e[0],e[1],v.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-2),t)},v.deflate=function(e,t){null==t&&(t={level:6});var n=0,r=new Uint8Array(50+Math.floor(1.1*e.length));return r[n]=120,r[n+1]=156,n=v.F.deflateRaw(e,r,n+2,t.level),e=v.adler(e,0,e.length),r[n+0]=e>>>24&255,r[n+1]=e>>>16&255,r[n+2]=e>>>8&255,r[n+3]=e>>>0&255,new Uint8Array(r.buffer,0,n+4)},v.deflateRaw=function(e,t){null==t&&(t={level:6});var n=new Uint8Array(50+Math.floor(1.1*e.length)),r=v.F.deflateRaw(e,n,r,t.level);return new Uint8Array(n.buffer,0,r)},v.encode=function(e,t){null==t&&(t=!1);var n,r=0,i=v.bin.writeUint,o=v.bin.writeUshort,a={};for(n in e){var s=!v._noNeed(n)&&!t,c=e[n],u=v.crc.crc(c,0,c.length);a[n]={cpr:s,usize:c.length,crc:u,file:s?v.deflateRaw(c):c}}for(n in a)r+=a[n].file.length+30+46+2*v.bin.sizeUTF8(n);for(n in e=new Uint8Array(r+22),t=0,c=[],a)u=a[n],c.push(t),t=v._writeHeader(e,t,n,u,0);for(n in r=0,s=t,a)u=a[n],c.push(t),t=v._writeHeader(e,t,n,u,1,c[r++]);return a=t-s,i(e,t,101010256),o(e,t=t+4+4,r),o(e,t+=2,r),i(e,t+=2,a),i(e,t+4,s),e.buffer},v._noNeed=function(e){return e=e.split(".").pop().toLowerCase(),-1!="png,jpg,jpeg,zip".indexOf(e)},v._writeHeader=function(e,t,n,r,i,o){var a=v.bin.writeUint,s=v.bin.writeUshort,c=r.file;return a(e,t,0==i?67324752:33639248),t+=4,1==i&&(t+=2),s(e,t,20),s(e,t+=2,0),s(e,t+=2,r.cpr?8:0),a(e,t+=2,0),a(e,t+=4,r.crc),a(e,t+=4,c.length),a(e,t+=4,r.usize),s(e,t+=4,v.bin.sizeUTF8(n)),s(e,t+=2,0),t+=2,1==i&&(a(e,t=t+2+2+6,o),t+=4),t+=n=v.bin.writeUTF8(e,t,n),0==i&&(e.set(c,t),t+=c.length),t},v.crc={table:function(){for(var e=new Uint32Array(256),t=0;256>t;t++){for(var n=t,r=0;8>r;r++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}(),update:function(e,t,n,r){for(var i=0;i<r;i++)e=v.crc.table[255&(e^t[n+i])]^e>>>8;return e},crc:function(e,t,n){return 4294967295^v.crc.update(4294967295,e,t,n)}},v.adler=function(e,t,n){var r=1,i=0,o=t;for(t+=n;o<t;){for(n=Math.min(o+5552,t);o<n;)i+=r+=e[o++];r%=65521,i%=65521}return i<<16|r},v.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII:function(e,t,n){for(var r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},pad:function(e){return 2>e.length?"0"+e:e},readUTF8:function(e,t,n){for(var r,i="",o=0;o<n;o++)i+="%"+v.bin.pad(e[t+o].toString(16));try{r=decodeURIComponent(i)}catch(r){return v.bin.readASCII(e,t,n)}return r},writeUTF8:function(e,t,n){for(var r=n.length,i=0,o=0;o<r;o++){var a=n.charCodeAt(o);if(0==(4294967168&a))e[t+i]=a,i++;else if(0==(4294965248&a))e[t+i]=192|a>>6,e[t+i+1]=128|a>>0&63,i+=2;else if(0==(4294901760&a))e[t+i]=224|a>>12,e[t+i+1]=128|a>>6&63,e[t+i+2]=128|a>>0&63,i+=3;else{if(0!=(4292870144&a))throw"e";e[t+i]=240|a>>18,e[t+i+1]=128|a>>12&63,e[t+i+2]=128|a>>6&63,e[t+i+3]=128|a>>0&63,i+=4}}return i},sizeUTF8:function(e){for(var t=e.length,n=0,r=0;r<t;r++){var i=e.charCodeAt(r);if(0==(4294967168&i))n++;else if(0==(4294965248&i))n+=2;else if(0==(4294901760&i))n+=3;else{if(0!=(4292870144&i))throw"e";n+=4}}return n}},v.F={},v.F.deflateRaw=function(e,t,n,r){var i=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][r],o=v.F.U,a=v.F._goodIndex;v.F._hash;var s=v.F._putsE,c=0;n<<=3;var u=0,l=e.length;if(0==r){for(;c<l;){var d=Math.min(65535,l-c);s(t,n,c+d==l?1:0),n=v.F._copyExact(e,c,d,t,n+8),c+=d}return n>>>3}s=o.lits,r=o.strt;var h=o.prev,f=0,p=0,g=0,m=0,y=0;for(2<l&&(r[y=v.F._hash(e,0)]=0),c=0;c<l;c++){if(d=y,c+1<l-2){y=v.F._hash(e,c+1);var b=c+1&32767;h[b]=r[y],r[y]=b}if(u<=c){if((14e3<f||26697<p)&&100<l-c&&(u<c&&(s[f]=c-u,f+=2,u=c),n=v.F._writeBlock(c==l-1||u==l?1:0,s,f,m,e,g,c-g,t,n),f=p=m=0,g=c),b=0,c<l-2&&(b=v.F._bestMatch(e,c,h,d,Math.min(i[2],l-c),i[3])),0!=b){d=b>>>16,b&=65535;var _=a(d,o.of0);o.lhst[257+_]++;var E=a(b,o.df0);o.dhst[E]++,m+=o.exb[_]+o.dxb[E],s[f]=d<<23|c-u,s[f+1]=b<<16|_<<8|E,f+=2,u=c+d}else o.lhst[e[c]]++;p++}}for(g==c&&0!=e.length||(u<c&&(s[f]=c-u,f+=2),n=v.F._writeBlock(1,s,f,m,e,g,c-g,t,n));0!=(7&n);)n++;return n>>>3},v.F._bestMatch=function(e,t,n,r,i,o){var a=32767&t,s=n[a],c=a-s+32768&32767;if(s==a||r!=v.F._hash(e,t-c))return 0;for(var u=r=0,l=Math.min(32767,t);c<=l&&0!=--o&&s!=a;){if((0==r||e[t+r]==e[t+r-c])&&(a=v.F._howLong(e,t,c))>r){if(u=c,(r=a)>=i)break;c+2<a&&(a=c+2);for(var d=0,h=0;h<a-2;h++){var f=t-c+h+32768&32767,p=f-n[f]+32768&32767;p>d&&(d=p,s=f)}}c+=(a=s)-(s=n[a])+32768&32767}return r<<16|u},v.F._howLong=function(e,t,n){if(e[t]!=e[t-n]||e[t+1]!=e[t+1-n]||e[t+2]!=e[t+2-n])return 0;var r=t,i=Math.min(e.length,t+258);for(t+=3;t<i&&e[t]==e[t-n];)t++;return t-r},v.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},v.saved=0,v.F._writeBlock=function(e,t,n,r,i,o,a,s,c){var u=v.F.U,l=v.F._putsF,d=v.F._putsE;u.lhst[256]++;var h=v.F.getTrees(),f=h[0],p=h[1],g=h[2],m=h[3],y=h[4],b=h[5],_=h[6];h=h[7];var E=32+(0==(c+3&7)?0:8-(c+3&7))+(a<<3),S=r+v.F.contSize(u.fltree,u.lhst)+v.F.contSize(u.fdtree,u.dhst);r=r+v.F.contSize(u.ltree,u.lhst)+v.F.contSize(u.dtree,u.dhst),r+=14+3*b+v.F.contSize(u.itree,u.ihst)+(2*u.ihst[16]+3*u.ihst[17]+7*u.ihst[18]);for(var w=0;286>w;w++)u.lhst[w]=0;for(w=0;30>w;w++)u.dhst[w]=0;for(w=0;19>w;w++)u.ihst[w]=0;if(E=E<S&&E<r?0:S<r?1:2,l(s,c,e),l(s,c+1,E),c+=3,0==E){for(;0!=(7&c);)c++;c=v.F._copyExact(i,o,a,s,c)}else{if(1==E)var x=u.fltree,T=u.fdtree;if(2==E){for(v.F.makeCodes(u.ltree,f),v.F.revCodes(u.ltree,f),v.F.makeCodes(u.dtree,p),v.F.revCodes(u.dtree,p),v.F.makeCodes(u.itree,g),v.F.revCodes(u.itree,g),x=u.ltree,T=u.dtree,d(s,c,m-257),d(s,c+=5,y-1),d(s,c+=5,b-4),c+=4,e=0;e<b;e++)d(s,c+3*e,u.itree[1+(u.ordr[e]<<1)]);c=v.F._codeTiny(_,u.itree,s,c+3*b),c=v.F._codeTiny(h,u.itree,s,c)}for(b=0;b<n;b+=2){for(_=(e=t[b])>>>23,e=o+(8388607&e);o<e;)c=v.F._writeLit(i[o++],x,s,c);0!=_&&(e=(f=t[b+1])>>16,a=f>>8&255,f&=255,d(s,c=v.F._writeLit(257+a,x,s,c),_-u.of0[a]),c+=u.exb[a],l(s,c=v.F._writeLit(f,T,s,c),e-u.df0[f]),c+=u.dxb[f],o+=_)}c=v.F._writeLit(256,x,s,c)}return c},v.F._copyExact=function(e,t,n,r,i){var o=i>>>3;return r[o]=n,r[o+1]=n>>>8,r[o+2]=255-r[o],r[o+3]=255-r[o+1],o+=4,r.set(new Uint8Array(e.buffer,t,n),o),i+(n+4<<3)},v.F.getTrees=function(){for(var e=v.F.U,t=v.F._hufTree(e.lhst,e.ltree,15),n=v.F._hufTree(e.dhst,e.dtree,15),r=[],i=v.F._lenCodes(e.ltree,r),o=[],a=v.F._lenCodes(e.dtree,o),s=0;s<r.length;s+=2)e.ihst[r[s]]++;for(s=0;s<o.length;s+=2)e.ihst[o[s]]++;s=v.F._hufTree(e.ihst,e.itree,7);for(var c=19;4<c&&0==e.itree[1+(e.ordr[c-1]<<1)];)c--;return[t,n,s,i,a,c,r,o]},v.F.getSecond=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(e[n+1]);return t},v.F.nonZero=function(e){for(var t="",n=0;n<e.length;n+=2)0!=e[n+1]&&(t+=(n>>1)+",");return t},v.F.contSize=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[1+(r<<1)];return n},v.F._codeTiny=function(e,t,n,r){for(var i=0;i<e.length;i+=2){var o=e[i],a=e[i+1];r=v.F._writeLit(o,t,n,r);var s=16==o?2:17==o?3:7;15<o&&(v.F._putsE(n,r,a,s),r+=s)}return r},v.F._lenCodes=function(e,t){for(var n=e.length;2!=n&&0==e[n-1];)n-=2;for(var r=0;r<n;r+=2){var i=e[r+1],o=r+3<n?e[r+3]:-1,a=r+5<n?e[r+5]:-1,s=0==r?-1:e[r-1];if(0==i&&o==i&&a==i){for(o=r+5;o+2<n&&e[o+2]==i;)o+=2;11>(i=Math.min(o+1-r>>>1,138))?t.push(17,i-3):t.push(18,i-11),r+=2*i-2}else if(i==s&&o==i&&a==i){for(o=r+5;o+2<n&&e[o+2]==i;)o+=2;i=Math.min(o+1-r>>>1,6),t.push(16,i-3),r+=2*i-2}else t.push(i,0)}return n>>>1},v.F._hufTree=function(e,t,n){var r=[],i=e.length,o=t.length,a=0;for(a=0;a<o;a+=2)t[a]=0,t[a+1]=0;for(a=0;a<i;a++)0!=e[a]&&r.push({lit:a,f:e[a]});if(e=r.length,i=r.slice(0),0==e)return 0;if(1==e)return t[1+((n=r[0].lit)<<1)]=1,t[1+((0==n?1:0)<<1)]=1;r.sort((function(e,t){return e.f-t.f})),a=r[0],o=r[1];var s=0,c=1,u=2;for(r[0]={lit:-1,f:a.f+o.f,l:a,r:o,d:0};c!=e-1;)a=s!=c&&(u==e||r[s].f<r[u].f)?r[s++]:r[u++],o=s!=c&&(u==e||r[s].f<r[u].f)?r[s++]:r[u++],r[c++]={lit:-1,f:a.f+o.f,l:a,r:o};for((r=v.F.setDepth(r[c-1],0))>n&&(v.F.restrictDepth(i,n,r),r=n),a=0;a<e;a++)t[1+(i[a].lit<<1)]=i[a].d;return r},v.F.setDepth=function(e,t){return-1!=e.lit?e.d=t:Math.max(v.F.setDepth(e.l,t+1),v.F.setDepth(e.r,t+1))},v.F.restrictDepth=function(e,t,n){var r=0,i=1<<n-t,o=0;for(e.sort((function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d})),r=0;r<e.length&&e[r].d>t;r++){var a=e[r].d;e[r].d=t,o+=i-(1<<n-a)}for(o>>>=n-t;0<o;)(a=e[r].d)<t?(e[r].d++,o-=1<<t-a-1):r++;for(;0<=r;r--)e[r].d==t&&0>o&&(e[r].d--,o++);0!=o&&console.log("debt left")},v.F._goodIndex=function(e,t){var n=0;return t[16|n]<=e&&(n|=16),t[8|n]<=e&&(n|=8),t[4|n]<=e&&(n|=4),t[2|n]<=e&&(n|=2),t[1|n]<=e&&(n|=1),n},v.F._writeLit=function(e,t,n,r){return v.F._putsF(n,r,t[e<<1]),r+t[1+(e<<1)]},v.F.inflate=function(e,t){var n=Uint8Array;if(3==e[0]&&0==e[1])return t||new n(0);var r=v.F,i=r._bitsF,o=r._bitsE,a=r._decodeTiny,s=r.makeCodes,c=r.codes2map,u=r._get17,l=r.U,d=null==t;d&&(t=new n(e.length>>>2<<3));for(var h,f,p,g,m=0,y=0,b=f=0,_=0;0==m;)if(m=i(e,_,1),h=i(e,_+1,2),_+=3,0==h)0!=(7&_)&&(_+=8-(7&_)),h=e[(_=4+(_>>>3))-4]|e[_-3]<<8,d&&(t=v.F._check(t,b+h)),t.set(new n(e.buffer,e.byteOffset+_,h),b),_=_+h<<3,b+=h;else{if(d&&(t=v.F._check(t,b+131072)),1==h&&(p=l.flmap,g=l.fdmap,y=511,f=31),2==h){for(f=o(e,_,5)+257,h=o(e,_+5,5)+1,p=o(e,_+10,4)+4,_+=14,g=0;38>g;g+=2)l.itree[g]=0,l.itree[g+1]=0;for(y=1,g=0;g<p;g++){var E=o(e,_+3*g,3);l.itree[1+(l.ordr[g]<<1)]=E,E>y&&(y=E)}_+=3*p,s(l.itree,y),c(l.itree,y,l.imap),p=l.lmap,g=l.dmap,_=a(l.imap,(1<<y)-1,f+h,e,_,l.ttree),y=(1<<(E=r._copyOut(l.ttree,0,f,l.ltree)))-1,f=(1<<(h=r._copyOut(l.ttree,f,h,l.dtree)))-1,s(l.ltree,E),c(l.ltree,E,p),s(l.dtree,h),c(l.dtree,h,g)}for(;;)if(_+=15&(h=p[u(e,_)&y]),0==(E=h>>>4)>>>8)t[b++]=E;else{if(256==E)break;h=b+E-254,264<E&&(h=b+((E=l.ldef[E-257])>>>3)+o(e,_,7&E),_+=7&E),_+=15&(E=g[u(e,_)&f]);var S=((E=l.ddef[E>>>4])>>>4)+i(e,_,15&E);for(_+=15&E,d&&(t=v.F._check(t,b+131072));b<h;)t[b]=t[b++-S],t[b]=t[b++-S],t[b]=t[b++-S],t[b]=t[b++-S];b=h}}return t.length==b?t:t.slice(0,b)},v.F._check=function(e,t){var n=e.length;return t<=n?e:((t=new Uint8Array(Math.max(n<<1,t))).set(e,0),t)},v.F._decodeTiny=function(e,t,n,r,i,o){for(var a=v.F._bitsE,s=v.F._get17,c=0;c<n;){var u=e[s(r,i)&t];i+=15&u;var l=u>>>4;if(15>=l)o[c]=l,c++;else{var d=u=0;for(16==l?(d=3+a(r,i,2),i+=2,u=o[c-1]):17==l?(d=3+a(r,i,3),i+=3):18==l&&(d=11+a(r,i,7),i+=7),l=c+d;c<l;)o[c]=u,c++}}return i},v.F._copyOut=function(e,t,n,r){for(var i=0,o=0,a=r.length>>>1;o<n;){var s=e[o+t];r[o<<1]=0,r[1+(o<<1)]=s,s>i&&(i=s),o++}for(;o<a;)r[o<<1]=0,r[1+(o<<1)]=0,o++;return i},v.F.makeCodes=function(e,t){var n,r,i=v.F.U,o=e.length,a=i.bl_count;for(n=0;n<=t;n++)a[n]=0;for(n=1;n<o;n+=2)a[e[n]]++;for(i=i.next_code,n=0,a[0]=0,r=1;r<=t;r++)n=n+a[r-1]<<1,i[r]=n;for(t=0;t<o;t+=2)0!=(a=e[t+1])&&(e[t]=i[a],i[a]++)},v.F.codes2map=function(e,t,n){for(var r=e.length,i=v.F.U.rev15,o=0;o<r;o+=2)if(0!=e[o+1]){var a=e[o+1],s=o>>1<<4|a,c=t-a;for(c=(a=e[o]<<c)+(1<<c);a!=c;)n[i[a]>>>15-t]=s,a++}},v.F.revCodes=function(e,t){for(var n=v.F.U.rev15,r=15-t,i=0;i<e.length;i+=2)e[i]=n[e[i]<<t-e[i+1]]>>>r},v.F._putsE=function(e,t,n){n<<=7&t,e[t>>>=3]|=n,e[t+1]|=n>>>8},v.F._putsF=function(e,t,n){n<<=7&t,e[t>>>=3]|=n,e[t+1]|=n>>>8,e[t+2]|=n>>>16},v.F._bitsE=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},v.F._bitsF=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},v.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},v.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},v.F.U=function(){var e=Uint16Array,t=Uint32Array;return{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}}(),function(){function e(e,t,n){for(;0!=t--;)e.push(0,n)}for(var t=v.F.U,n=0;32768>n;n++){var r=n;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,t.rev15[n]=(r>>>16|r<<16)>>>17}for(n=0;32>n;n++)t.ldef[n]=t.of0[n]<<3|t.exb[n],t.ddef[n]=t.df0[n]<<4|t.dxb[n];e(t.fltree,144,8),e(t.fltree,112,9),e(t.fltree,24,7),e(t.fltree,8,8),v.F.makeCodes(t.fltree,9),v.F.codes2map(t.fltree,9,t.flmap),v.F.revCodes(t.fltree,9),e(t.fdtree,32,5),v.F.makeCodes(t.fdtree,5),v.F.codes2map(t.fdtree,5,t.fdmap),v.F.revCodes(t.fdtree,5),e(t.itree,19,0),e(t.ltree,286,0),e(t.dtree,30,0),e(t.ttree,320,0)}();var iD=["backups","servers"],jD=["backups","servers"],kD=["group"],nl=v.inflate,ks=v.deflate,ls=function(e){function t(e,i,o,a){W(this,t);var s=r.call(this,a,"Session");return m(n(s),"chatManager",void 0),m(n(s),"joinedChannels",new Set),m(n(s),"msgDedupLru",new tc(void 0,{maxlen:200})),m(n(s),"startTime",Date.now()),m(n(s),"seq",U.fromNumber(1,!0)),m(n(s),"userJoinOptions",new is(!1)),m(n(s),"seqSentStatuses",[!1,!1]),m(n(s),"dialogueSequenceLru",new tc(void 0,{maxlen:1e4})),m(n(s),"loggedOut",!1),m(n(s),"messageSentTimes",[]),m(n(s),"curLoginSockets",[void 0,void 0]),m(n(s),"loginSocketSubs",[{channels:new Map,receivers:[]},{channels:new Map,receivers:[]}]),m(n(s),"lastLoginSockets",[new qe(1),new qe(1)]),m(n(s),"dialPendingMsgSubjectMap",new Map),m(n(s),"context",void 0),m(n(s),"connection",void 0),m(n(s),"instanceId",void 0),m(n(s),"registerSocketsFailureListener",(function(){s.connection.once("socketsFailure",(function(){s.log("socketsFailure, creating a new connection"),ad((function(){return s.connection.removeAllListeners(),s.connection=new Yr(s.context,s.logger,!0),s.loginHandler(15e3,!0)})).pipe(oe((function(e){return e.pipe(cd(Zd.getParameter("RECONNECTING_AP_INTERVAL")))})),ob(s.connection.apClient.apFinish$)).subscribe((function(){s.log("new connection connected")}))})),0===s.connection.listenerCount("tokenExpired")&&s.connection.on("tokenExpired",(function(){s.emit("tokenExpired")}))})),s.context=e,s.connection=i,s.instanceId=o,s.chatManager=new hD(a),s.log("The instanceId is %s",s.instanceId.toString()),s}la(t,e);var r=ma(t);return Ha(t,[{key:"fetchFileUploadIndexGet",value:function(e){var n=e.hash,r=e.size;if(0===(e=this.getLoginSockets()).length)throw new K("Client is not logged in");var i=this.incGetSeq();return e.forEach((function(e){e.sendPacket("FileUploadIndexGet",{seq:i,hash:n,size:r})})),{ret:Ca.apply(void 0,G(e.map((function(e){return e.fromReceived("FileUploadIndexRet").pipe(aa((function(e){return i.eq(e.seq)})))})))),fin:Ca.apply(void 0,G(e.map((function(e){return e.fromReceived("FileUploadIndexFin").pipe(aa((function(e){return i.eq(e.seq)})))})))),err:Xb.apply(void 0,G(e.map((function(e){return e.fromReceived("FileUploadIndexErr").pipe(aa((function(e){return i.eq(e.seq)})),ba((function(e){throw new da(["The media message upload failure, code %d",e.code],lg)})))})))),timeout:t.genTimeoutError(Lh)}}},{key:"requestFileUploadIndexSet",value:function(e){var n=e.hash,r=e.unit,i=e.servers;if(0===(e=this.getLoginSockets()).length)throw new K("Client is not logged in");var o=this.incGetSeq();return e.forEach((function(e){e.sendPacket("FileUploadIndexSet",{seq:o,servers:i,hash:n,unit:r})})),Ca.apply(void 0,[t.genTimeoutError(Lh)].concat(G(e.map((function(e){return e.fromReceived("FileUploadIndexErr").pipe(aa((function(e){return o.eq(e.seq)})),ba((function(e){throw new da(["FileUploadIndexSet failure, code %d",e.code],lg)})))}))),G(e.map((function(e){return e.fromReceived("FileUploadIndexFin").pipe(aa((function(e){return o.eq(e.seq)})))})))))}},{key:"requestFileDownloadIndexGet",value:function(e){var n=e.size,r=e.zone,i=e.unit,o=e.hash,a=this.getLoginSockets();if(0===a.length)throw new K("Client is not logged in");var s=this.incGetSeq();return a.forEach((function(e){e.sendPacket("FileDownloadIndexGet",{seq:s,size:n,zone:r,unit:i,hash:o})})),e=Ca.apply(void 0,G(a.map((function(e){return e.fromReceived("FileDownloadIndexRet").pipe(aa((function(e){return s.eq(e.seq)})))})))).pipe(ba((function(e){var t=e.backups,n=e.servers;return e=ff(e,iD),ua({backupList:t.map((function(e){return[e]})),serverList:n.map((function(e){return[e]}))},e)})),cd(500)),a=jm(a.map((function(e){return e.fromReceived("FileDownloadIndexRet").pipe(aa((function(e){return s.eq(e.seq)})))}))),Ca(e,a.pipe(ba((function(e){return e.reduce((function(e,t){var n=e.backupList,r=e.serverList;e=t.backups;var i=t.servers;return t=ff(t,jD),ua({backupList:e.map((function(e,t){return[e].concat(G(void 0!==n&&Array.isArray(n[t])?n[t]:[]))})),serverList:i.map((function(e,t){return[e].concat(G(void 0!==n&&Array.isArray(r[t])?r[t]:[]))}))},t)}),{})}))),t.genTimeoutError(Lh))}},{key:"loginHandler",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:2e4,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(this.loggedOut&&n)throw new K("Already logged out, request ignored");n&&this.registerSocketsFailureListener(),this.connection.initConnection();var r=this.getSocketLoginObservables(this.connection.lastOpenSockets,this.seq),i=Date.now();return r.forEach((function(t,r){var o=e.loginSocketSubs[r].login;void 0!==o&&o.unsubscribe(),e.loginSocketSubs[r].login=t.pipe(ca((function(t){var o;e.curLoginSockets[r]=t;var a=Date.now();eb("Link",{ackedServerIp:t.address,destServerIp:t.ip,ec:0,sc:0,elapse:fb(e.startTime),lts:U.fromNumber(a),responseTime:i-a,sid:Xa(e.instanceId),userId:e.context.uid},null!==(o=e.context.config.enableCloudProxy)&&void 0!==o&&o),e.emit("userJoined",t.env),n&&e.connection.apClient.apFinish$.next(void 0)}))).subscribe(e.lastLoginSockets[r])})),this.initKeepAliveSender(),this.initKeepAliveReconnector(),this.initLoginReceiver(),Xb.apply(void 0,G(r).concat([gb(this.connection,"connectionInitFailure").pipe(ca((function(e){if(sa(e)||Sa(e))throw e;throw new da("Login failure",{code:Zq,originalError:e})})))])).pipe(Ka(1),hb(t),Ga((function(t){return t instanceof pb&&e.warn("Client login timeout"),t&&t.code===Kh&&(e.connection.emit("tokenExpired"),e.connection.apClient.apFinish$.next(void 0)),e.clearSockets(0,n),Z(t)})),ca((function(){n||e.registerSocketsFailureListener()})),wg((function(){n||e.connection.apClient.apFinish$.next(void 0)})))}},{key:"logoutHandler",value:function(){var e=J(w.mark((function e(){var t,n,r,i=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loggedOut=!0,this.connection.apClient.apFinish$.next(void 0),t=this.getLoginSockets(),n=t.map((function(e){return e.sendPacket("UserQuit",{}),i.connection.waitClosing(e)})),this.clearSockets(5e3),r=t.map((function(e){return e.env})),[0,1].filter((function(e){return!r.includes(e)})).forEach((function(e){i.connection.closeSocket(e,0)})),e.abrupt("return",Xb.apply(void 0,G(n)).toPromise());case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestChannelJoin",value:function(){var e=J(w.mark((function e(t,n){var r,i,o,a=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.getLoginSockets().length){e.next=2;break}throw new K("Client is not logged in. Cannot join the channel",Vq);case 2:return r=gb(this,"channelLeft").pipe(wb((function(e){return e===t})),Ka(1)),i=this.incGetSeq(),(o=this.lastLoginSockets.map((function(e){return e.pipe(Cc((function(e,t){0!==t&&a.incSeqIfNeeded(e.env);var r=0===t?i:a.seq;return e.sendPacket("GroupEnter",{account:n,seq:r}),e.fromReceived("GroupReply").pipe(aa((function(e){return r.eq(e.seq)})),ca((function(e){if(0!==(e=e.code))throw new da(["Channel join failure. The response code is %d",e],Rq)})))})),ob(r),pe())}))).forEach((function(e,n){var r=function(){return a.loginSocketSubs[n].channels.delete(t.channelId)};a.loginSocketSubs[n].channels.set(t.channelId,e.subscribe({error:r,complete:r}))})),e.next=8,Xb.apply(void 0,G(o)).pipe(Ka(1),hb(1e4),Ga((function(e){return e instanceof pb&&a.warn("Channel join timeout"),Z(e)}))).toPromise();case 8:this.joinedChannels.add(t);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestChannelLeave",value:function(e,t){this.emit("channelLeft",e),this.joinedChannels.delete(e),this.getLoginSockets().forEach((function(e){e.sendPacket("GroupLeave",{account:t})}))}},{key:"requestChannelMemberList",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new K("Client is not logged in. Cannot get the channel members",cA);var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupAllUsersList",{group:e,pageNumber:0,pageSize:200,seq:r})})),Ca.apply(void 0,[t.genTimeoutError(Pq)].concat(G(n.map((function(t){return t.fromReceived("GroupAllUsersResult").pipe(aa((function(t){var n=t.seq;return t.group===e&&r.eq(n)})))})))))}},{key:"requestPeersOnlineStatus",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new K("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserStatusList",{users:e,seq:r})})),Ca.apply(void 0,[t.genTimeoutError(oA)].concat(G(n.map((function(e){return e.fromReceived("UserStatusResult").pipe(aa((function(e){return r.eq(e.seq)})))})))))}},{key:"requestSetLocalUserAttributes",value:function(e,n){var r=this,i=this.getLoginSockets();if(0===i.length)throw new K("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t,i){void 0!==n&&i!==n||t.sendPacket("UserAttributeSet",{account:r.context.uid,attributeInfos:Object.entries(e).map((function(e){return{key:(e=ra(e,2))[0],value:e[1]}})),seq:o})})),Ca.apply(void 0,G(i.map((function(e){return e.fromReceived("UserAttributeErr").pipe(aa((function(e){return o.eq(e.seq)})),ba((function(e){throw new da(["The user attributes set failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],G(i.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(aa((function(e){return o.eq(e.seq)})))})))))}},{key:"requestSetChannelAttributes",value:function(e,n,r){var i=this.getLoginSockets();if(0===i.length)throw new K("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t){t.sendPacket("GroupAttributeSet",{broadcast:r,group:e,attributeInfos:Object.entries(n).map((function(e){return{key:(e=ra(e,2))[0],value:e[1]}})),seq:o})})),Ca.apply(void 0,G(i.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(aa((function(e){return o.eq(e.seq)})),ba((function(e){throw new da(["The group attributes set failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],G(i.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(aa((function(e){return o.eq(e.seq)})))})))))}},{key:"requestAddOrUpdateLocalUserAttributes",value:function(e){var n=this,r=this.getLoginSockets();if(0===r.length)throw new K("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeMod",{account:n.context.uid,attributeInfos:Object.entries(e).map((function(e){return{key:(e=ra(e,2))[0],value:e[1]}})),seq:i})})),Ca.apply(void 0,G(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(aa((function(e){return i.eq(e.seq)})),ba((function(e){throw new da(["The user attributes add or update failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],G(r.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(aa((function(e){return i.eq(e.seq)})))})))))}},{key:"requestAddOrUpdateChannelAttributes",value:function(e,n,r){var i=this.getLoginSockets();if(0===i.length)throw new K("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t){t.sendPacket("GroupAttributeMod",{broadcast:r,group:e,attributeInfos:Object.entries(n).map((function(e){return{key:(e=ra(e,2))[0],value:e[1]}})),seq:o})})),Ca.apply(void 0,G(i.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(aa((function(e){return o.eq(e.seq)})),ba((function(e){throw new da(["The group attributes add or update failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],G(i.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(aa((function(e){return o.eq(e.seq)})))})))))}},{key:"requestDeleteLocalUserAttributesByKeys",value:function(e){var n=this,r=this.getLoginSockets();if(0===r.length)throw new K("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeDel",{account:n.context.uid,attributes:e,seq:i})})),Ca.apply(void 0,G(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(aa((function(e){return i.eq(e.seq)})),ba((function(e){throw new da(["The user attributes delete failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],G(r.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(aa((function(e){return i.eq(e.seq)})))})))))}},{key:"requestDeleteChannelAttributesByKeys",value:function(e,n,r){var i=this.getLoginSockets();if(0===i.length)throw new K("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t){t.sendPacket("GroupAttributeDel",{group:e,broadcast:r,attributes:n,seq:o})})),Ca.apply(void 0,G(i.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(aa((function(e){return o.eq(e.seq)})),ba((function(e){throw new da(["The channel attributes delete failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],G(i.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(aa((function(e){return o.eq(e.seq)})))})))))}},{key:"requestClearLocalUserAttributes",value:function(){var e=this,n=this.getLoginSockets();if(0===n.length)throw new K("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserAttributeSet",{account:e.context.uid,seq:r,attributeInfos:[]})})),Ca.apply(void 0,G(n.map((function(e){return e.fromReceived("UserAttributeErr").pipe(aa((function(e){return r.eq(e.seq)})),ba((function(e){throw new da(["The user attributes clear failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],G(n.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(aa((function(e){return r.eq(e.seq)})))})))))}},{key:"requestClearChannelAttributes",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new K("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("GroupAttributeSet",{group:e,seq:i,attributeInfos:[],broadcast:n})})),Ca.apply(void 0,G(r.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(aa((function(e){return i.eq(e.seq)})),ba((function(e){throw new da(["The channel attributes clear failure, code %d",e.code],Sb)})))}))).concat([t.genTimeoutError(Tb)],G(r.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(aa((function(e){return i.eq(e.seq)})))})))))}},{key:"requestGetUserAttributesByKeys",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new K("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeGet",{account:e,seq:i,attributes:n})})),Ca.apply(void 0,[t.genTimeoutError(Tb)].concat(G(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(aa((function(e){return i.eq(e.seq)})),ba((function(e){if(10008===(e=e.code))throw new da("The user requested is not online",Lq);throw new Wc(["User attribute operation unknown error code: %d",e],Sb)})))}))),G(r.map((function(e){return e.fromReceived("UserAttributeRet").pipe(aa((function(e){return i.eq(e.seq)})))})))))}},{key:"requestGetChannelAttributesByKeys",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new K("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("GroupAttributeGet",{group:e,seq:i,attributes:n})})),Ca.apply(void 0,[t.genTimeoutError(Tb)].concat(G(r.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(aa((function(e){return i.eq(e.seq)})),ba((function(e){throw new da(["The channel attributes get failure, code %d",e.code],Sb)})))}))),G(r.map((function(e){return e.fromReceived("GroupAttributeRet").pipe(aa((function(e){return i.eq(e.seq)})))})))))}},{key:"requestGetUserAttributeKeys",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new K("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserAttributeKeysGet",{account:e,seq:r})})),Ca.apply(void 0,[t.genTimeoutError(Tb)].concat(G(n.map((function(e){return e.fromReceived("UserAttributeErr").pipe(aa((function(e){return r.eq(e.seq)})),ba((function(e){if(10008===(e=e.code))throw new da("The user requested is not online",Lq);throw new Wc(["User attribute operation unknown error code: %d",e],Sb)})))}))),G(n.map((function(e){return e.fromReceived("UserAttributeKeysRet").pipe(aa((function(e){return r.eq(e.seq)})))})))))}},{key:"requestGetChannelAttributesKeys",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new K("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupAttributeKeysGet",{group:e,seq:r})})),Ca.apply(void 0,[t.genTimeoutError(Tb)].concat(G(n.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(aa((function(e){return r.eq(e.seq)})),ba((function(e){throw new Wc(["Channel attribute operation unknown error code: %d",e.code],Sb)})))}))),G(n.map((function(e){return e.fromReceived("GroupAttributeKeysRet").pipe(aa((function(e){return r.eq(e.seq)})))})))))}},{key:"requestGetChannelMemberCount",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new K("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupStatusList",{groups:e,seq:r})})),Ca.apply(void 0,[t.genTimeoutError(Pq)].concat(G(n.map((function(e){return e.fromReceived("GroupStatusResult").pipe(aa((function(e){return r.eq(e.seq)})))})))))}},{key:"requestSubscribePeersOnlineStatus",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new K("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("SubscribeUserStatus",{seq:r,users:e})})),Ca.apply(void 0,[t.genTimeoutError(vA)].concat(G(n.map((function(e){return e.fromReceived("SubscribeResponse").pipe(aa((function(e){return r.eq(e.seq)})))})))))}},{key:"requestUnsubscribePeersOnlineStatus",value:function(e){var t=this.getLoginSockets();if(0===t.length)throw new K("Client is not logged in");var n=this.incGetSeq();t.forEach((function(t){t.sendPacket("UnsubscribeUserStatus",{seq:n,users:e})}))}},{key:"sendInvitationMessage",value:function(){var e=J(w.mark((function e(t){var n,r,i,o,a,s,c,u,l,d,h,f,p=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.peerId,r=t.callId,i=t.extra,o=t.isAcceptAck,a=t.channelId,s=t.type,c={callId:r},void 0===o){e.next=6;break}if("CallAccept"===s){e.next=5;break}throw Error("invalid invitation type");case 5:c.type=o?"ack":"request";case 6:return c.channel=a,("CallInvite"===s||"CallCancel"===s||"CallReject"===s||"CallAccept"===s&&!1===o)&&void 0!==i&&(c.extra=i),u=Bg(),this.log("The sent invitation body is %o",c),l=function(e){return{MiscMap:{},sequence:U.fromNumber(1),dialogue:u,instance:p.instanceId,dst:n,ms:U.fromNumber(Date.now(),!0),options:new ae({IterationNumber:e,MessageType:s}).toLong(),payload:(new TextEncoder).encode(JSON.stringify(c)),src:p.context.uid}},e.next=14,Kb(this.sendMessageToRetry(l,!0)).pipe(hb(1e4),Ga((function(e){return e instanceof pb&&p.warn("Send invitation timeout"),Z(e)}))).toPromise();case 14:return d=e.sent,h=d.code,f=d.retryTimes,e.abrupt("return",{hasPeerReceived:0===h,hasReSent:0!==f});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendMediaMessage",value:function(){var e=J(w.mark((function e(t,n,r,i,o,a){var s,c,u,l,d,h,f,p,v,g,y,b,_,E,S,x,T,R,k,O,C,A,N,j,D,P,L,M,V,F=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.width,u=void 0===c?0:c,l=n.height,d=void 0===l?0:l,h=n.fileName,f=void 0===h?"":h,p=n.description,v=void 0===p?"":p,g=n.thumbnail,y=void 0===g?new Blob:g,b=n.thumbnailHeight,_=void 0===b?0:b,E=n.thumbnailWidth,S=void 0===E?0:E,x=n.size,T=void 0===x?0:x,R=n.mediaId,k=o.enableOfflineMessaging,O=o.enableHistoricalMessaging,za(r)){e.next=4;break}throw new I("The send message arguments are not valid",i?$k:hg);case 4:if(!(32768<new Blob([f,y,v]).size)){e.next=6;break}throw new I("The size of message overflowed ",i?ve:Hh);case 6:return C=this.chatManager.getChatInfo(r),A=C.dialogue,N=C.sequence,j=this.instanceId,this.log('A%s media message is sending to %s: "'.concat(j,"-").concat(A,"#").concat(N,'"'),i?" peer":" channel",oa(r)),m(s={},"media_description",v),m(s,"media_width",u),m(s,"media_height",d),m(s,"media_thumbnailwidth",S),m(s,"media_thumbnailheight",_),m(s,"media_size",T),m(s,"media_id",R),m(s,"media_filename",f),D=uc(s,(function(e){return(new TextEncoder).encode(e.toString())})),e.t0=Uint8Array,e.next=14,Ji(y);case 14:return e.t1=e.sent,D.media_thumbnail=new e.t0(e.t1),P=i&&"IMAGE"===t?"PeerImageMessage":i&&"FILE"===t?"PeerFileMessage":i||"IMAGE"!==t?"ChannelFileMessage":"ChannelImageMessage",L=function(e){return{MiscMap:D,sequence:N,dialogue:A,instance:j,dst:r,ms:U.fromNumber(Date.now(),!0),options:new ae({IterationNumber:e,CompressionMethod:"Uncompressed",MessageType:P,ToCache:k,ToArchive:O}).toLong(),payload:new Uint8Array,src:F.context.uid}},e.next=20,Kb(this.sendMessageToRetry(L,!0)).pipe(hb(void 0===a?1e4:a),Ga((function(e){return e instanceof pb&&F.warn("Send message timeout"),Z(e)}))).toPromise();case 20:if(M=e.sent,2!==(V=M.code)){e.next=24;break}throw new da("The peer does not support this type of message",nA);case 24:return e.abrupt("return",{hasPeerReceived:0===V});case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,a){return e.apply(this,arguments)}}()},{key:"sendRawMessage",value:function(){var e=J(w.mark((function e(t,n,r,i,o,a){var s,c,u,l,d,h,f,p,v,g,m=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=o.enableOfflineMessaging,c=o.enableHistoricalMessaging,za(r)&&t instanceof Uint8Array&&"string"==typeof n){e.next=3;break}throw new I("The send message arguments are not valid",i?$k:hg);case 3:if(!(32768<t.byteLength+new Blob([n]).size)){e.next=5;break}throw new ib("The message size is over the 32KB limit",i?ve:Hh);case 5:return u=!Zd.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=t.byteLength,l=this.chatManager.getChatInfo(r),d=l.dialogue,h=l.sequence,f=this.instanceId,this.log('A%s %s raw message is sending to %s: "'.concat(f,"-").concat(d,"#").concat(h,'"'),u?" compressed":"",i?"peer":"channel",oa(r)),p=function(e){return{MiscMap:{description:(new TextEncoder).encode(n)},sequence:h,dialogue:d,instance:f,dst:r,ms:U.fromNumber(Date.now(),!0),options:new ae({IterationNumber:e,CompressionMethod:u?"Zlib":"Uncompressed",MessageType:i?"PeerRawMessage":"ChannelRawMessage",ToCache:s,ToArchive:c}).toLong(),payload:u?ks(t):t,src:m.context.uid}},e.next=12,Kb(this.sendMessageToRetry(p,!0)).pipe(hb(void 0===a?1e4:a),Ga((function(e){return e instanceof pb&&m.warn("Send message timeout"),Z(e)}))).toPromise();case 12:return v=e.sent,g=v.code,e.abrupt("return",{hasPeerReceived:0===g});case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,a){return e.apply(this,arguments)}}()},{key:"sendTextMessage",value:function(){var e=J(w.mark((function e(t,n,r,i,o){var a,s,c,u,l,d,h,f,p,v,g,m=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.enableOfflineMessaging,s=i.enableHistoricalMessaging,za(n)){e.next=3;break}throw new I("The send message arguments are not valid",r?$k:hg);case 3:if(!(32768<new Blob([t]).size)){e.next=5;break}throw new ib("The message size is over the 32KB limit",r?ve:Hh);case 5:return c=!Zd.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=new Blob([t]).size,u=this.chatManager.getChatInfo(n),l=u.dialogue,d=u.sequence,h=this.instanceId,this.log('A%s %s message is sending to %s: "'.concat(h,"-").concat(l,"#").concat(d,'"'),c?" compressed":"",r?"peer":"channel",oa(n)),f=(new TextEncoder).encode(t),p=function(e){return{MiscMap:{},sequence:d,dialogue:l,instance:h,dst:n,ms:U.fromNumber(Date.now(),!0),options:new ae({IterationNumber:e,CompressionMethod:c?"Zlib":"Uncompressed",MessageType:r?"PeerTextMessage":"ChannelTextMessage",ToCache:a,ToArchive:s}).toLong(),payload:c?ks(f):f,src:m.context.uid}},e.next=13,Kb(this.sendMessageToRetry(p,!0)).pipe(hb(void 0===o?1e4:o),Ga((function(e){return e instanceof pb&&m.warn("Send message timeout"),Z(e)}))).toPromise();case 13:return v=e.sent,g=v.code,e.abrupt("return",{hasPeerReceived:0===g});case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}()},{key:"cleanLoginSubs",value:function(e,t){Object.entries(this.loginSocketSubs[e]).forEach((function(e){var n=(e=ra(e,2))[1];"channels"===e[0]&&t||(Array.isArray(n)||n instanceof Map?n.forEach((function(e){return e.unsubscribe()})):n&&n.unsubscribe())})),this.loginSocketSubs[e]={channels:t?this.loginSocketSubs[e].channels:new Map,receivers:[]}}},{key:"sendMessageToRetry",value:function(){var e=J(w.mark((function e(t,n){var r,i,o,a,s,c,u,l,d,h=this,f=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<f.length&&void 0!==f[2]?f[2]:0,this.log("Attempt to send the message ".concat(n?" with retrying, %o":"without retrying"),{retryTimes:r}),0!==(i=this.getLoginSockets()).length){e.next=5;break}throw Error("no logged-in sockets");case 5:return o=t(r),i.forEach((function(e){e.sendPacket("Message",o)})),a=o.dialogue,s=o.sequence,c=o.instance,u=i.map((function(e){return e.fromReceived("Ack").pipe(wb((function(e){return a.eq(e.dialogue)&&s.eq(e.sequence)&&c.eq(e.instance)})))})),e.prev=9,e.next=12,Xb.apply(void 0,G(u)).pipe(hb(6e3),Ga((function(e){return Sa(e)&&h.warn("Message send timeout, retry times %d",r),Z(e)})),Ka(1)).toPromise();case 12:return l=e.sent,d=l.code,this.log("The message has been acked, %o",{code:d}),e.abrupt("return",{code:d,retryTimes:r});case 18:if(e.prev=18,e.t0=e.catch(9),!(e.t0 instanceof pb&&n)){e.next=22;break}return e.abrupt("return",this.sendMessageToRetry(t,!1,r+1));case 22:throw e.t0;case 23:case"end":return e.stop()}}),e,this,[[9,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"initKeepAliveSender",value:function(){var e=this;this.lastLoginSockets.map((function(t){return t.pipe(Cc((function(t){return Bc(0,2750).pipe(ca((function(){e.incSeqIfNeeded(t.env),t.sendPacket("Ping",{ms:U.fromNumber(Date.now(),!0),seq:e.seq})})))})))})).forEach((function(t,n){var r=e.loginSocketSubs[n].keepAlive;void 0!==r&&r.unsubscribe(),e.loginSocketSubs[n].keepAlive=t.subscribe({error:function(){}})}))}},{key:"initKeepAliveReconnector",value:function(){var e=this;this.lastLoginSockets.map((function(e){return e.pipe(Cc((function(e){var t,n=!1,r=e.userJoin$.pipe(ca((function(){n=!0}))),i=e.input$.pipe(ca((function(e){"Ping"!==Li[e.uri].slice(0,-3)&&(n=!1)})));return Xb(Bc(15e3,1e4).pipe(Pt(e.receivedPacket),ca((function(r){r=ra(r,2),r=ra(r[1],2)[1],t!==r||n||e.forceReconnect(),t=r}))),r,i)})))})).forEach((function(t,n){var r=e.loginSocketSubs[n].keepAliveReconnector;void 0!==r&&r.unsubscribe(),e.loginSocketSubs[n].keepAliveReconnector=t.subscribe({error:function(){}})}))}},{key:"initLoginReceiver",value:function(){var e=this;this.lastLoginSockets.map((function(t){return t.pipe(Cc((function(t){return Xb(gb(t,"reconnect").pipe(ca(e.onSocketReconnect(t))),t.fromReceived("Message").pipe(ca(e.onMessage(t))),t.fromReceived("GroupEnterNotice").pipe(ca(e.onGroupEnterNotice())),t.fromReceived("GroupLeaveNotice").pipe(ca(e.onGroupLeaveNotice())),t.fromReceived("GroupCountNotice").pipe(ca(e.onGroupCountNotice())),t.fromReceived("GroupAttributeAlt").pipe(ca(e.onGroupAttributeAlt())),t.fromReceived("UserJoinNotice").pipe(ca(e.onUserNotice(S.PeerOnlineState.ONLINE))),t.fromReceived("UserQuitNotice").pipe(ca(e.onUserNotice(S.PeerOnlineState.OFFLINE))),t.fromReceived("UserWaitNotice").pipe(ca(e.onUserNotice(S.PeerOnlineState.UNREACHABLE)))).pipe(qf(void 0))})))})).forEach((function(t,n){e.loginSocketSubs[n].receivers.push(t.subscribe({error:function(){}}))}))}},{key:"requestSocketLogin",value:function(e,t,n){var r=this;return im(ad((function(){r.userJoinOptions=new is(t),e.sendPacket("UserJoin",{account:r.context.uid,instance:r.instanceId,opt:r.userJoinOptions.toLong(),seq:n,ticket:e.ticket})})),e.fromReceived("UserResp").pipe(aa((function(e){return n.eq(e.seq)})),ca((function(t){if(0!==(t=t.code))throw r.clearSockets(),r.logError("Connected to gateway success but the Rtm server rejected login"),new da(["Login failure. The response code from the RTM service is %d",t],jg);r.log("ENV_%d logged in",e.env)})),qf(e),hb(15e3))).pipe(wb((function(e){return void 0!==e})),Ga((function(e){return e instanceof pb&&r.warn("Login response timeout, rejoin: %s",t),Z(e)})))}},{key:"getSocketLoginObservables",value:function(e,t){var n=this;return e.map((function(e){return e.pipe(ca((function(e){0===e.listenerCount("socketUserDrop")&&e.on("socketUserDrop",(function(t){return n.onUserDrop(t,e)}))})),Cc((function(e,r){return n.incSeqIfNeeded(e.env),n.requestSocketLogin(e,0!==r,0===r?t:n.seq)})),pe())}))}},{key:"incSeqIfNeeded",value:function(e){if(![0,1].includes(e))throw new Fa({INVALID_ENV:"The env argument is not 0 or 1"});this.seqSentStatuses[e]&&(this.seq=this.seq.add(1),this.seqSentStatuses=[!1,!1]),this.seqSentStatuses[e]=!0}},{key:"incGetSeq",value:function(){return this.seq=this.seq.add(1),this.seqSentStatuses=[!0,!0],this.seq}},{key:"getLoginSockets",value:function(){for(var e=this.curLoginSockets,t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}},{key:"emitMessage",value:function(e,n){var r=e.options,i=e.payload,o=e.src,a=e.dst,s=e.instance,c=e.dialogue,u=e.sequence,l=e.ms,d=e.MiscMap;this.dialogueSequenceLru.set(c.toString(),u),s="".concat(s,"-").concat(c,"#").concat(u),this.msgDedupLru.has(s)?this.warn("Env_%d: Messages out-of-order or not start with 1: %s",n,s):(this.msgDedupLru.set(s,void 0),n=new ae(r),this.lastLoginSockets.forEach(function(){var n=J(w.mark((function n(r){var i;return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.pipe(Ka(1)).toPromise();case 2:i=n.sent,t.sendMessageAck(e,i);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),r=n.isZlibCompressed(),n.isInvitation()?(a=pa(r?nl(Xm(i,Uint8Array.of(0,0,0,0))):i),a=JSON.parse(a),this.log("The received invitation body is %o",a),this.emit("invitationMessage",{body:a,type:n.getInvitationType(),peerId:o,serverReceivedTs:l.toNumber()})):n.isTextMessage()?(d=n.isPeerTextMessage(),i=pa(r?nl(Xm(i,Uint8Array.of(0,0,0,0))):i),this.info("Received a %s %s text message from %s to %s, %s",r?" compressed":"",d?"peer":"channel",oa(o),oa(a),s),d?(o={text:i,peerId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}},this.emit("peerTextMessage",o)):this.emit("channelTextMessage",{channelId:a,memberId:o,text:i,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:!1}})):n.isRawMessage()?(c=n.isRawPeerMessage(),d=void 0===(d=d.description)?"":pa(d),i=r?nl(i):i,this.info("Received a %s %s raw message from %s to %s, %s",r?" compressed":"",c?"peer":"channel",oa(o),oa(a),s),c?(o={desc:d,raw:i,peerId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}},this.emit("peerRawMessage",o)):this.emit("channelRawMessage",{desc:d,raw:i,channelId:a,memberId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:!1}})):(n.isImageMessage()||n.isFileMessage())&&(i=n.isPeerMessage(),this.info("Received a %s media message from %s to %s, %s",i?"peer":"channel",oa(o),oa(a),s),i?this.emit("peerMediaMessage",{messageType:n.isImageMessage()?"IMAGE":"FILE",details:d,peerId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}}):this.emit("channelMediaMessage",{messageType:n.isImageMessage()?"IMAGE":"FILE",details:d,memberId:o,channelId:a,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}})))}},{key:"onSocketReconnect",value:function(e){var t=this;return function(){var n=[0,1].filter((function(t){return t!==e.env}))[0];(n=t.connection.curOpenSockets[n])&&!n.loggedIn&&t.emit("connectionLost")}}},{key:"onUserDrop",value:function(e,t){var n;e=e.code,eb("KickedOff",{code:0,elapse:fb(this.startTime),linkId:parseInt(t.name.split("-")[1],10),lts:U.fromNumber(Date.now()),server:t.address,serverCode:e,sid:Xa(this.instanceId),userId:this.context.uid},null!==(n=this.context.config.enableCloudProxy)&&void 0!==n&&n),10006===e||10001===e?this.warn("Login too often and kicked off, reconnect and login"):10009===e?(this.warn("The instance ID conflicts, reconnecting"),this.instanceId=Bg(),this.context.sid=Xa(this.instanceId),this.emit("instanceChanged",this.instanceId)):[11,14,15,16].includes(e)&&(this.emit("userDrop",e),this.clearSockets())}},{key:"clearSockets",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];[0,1].forEach((function(r){e.cleanLoginSubs(r,n),e.connection.closeSocket(r,t)}))}},{key:"onMessage",value:function(e){var t=this;return function(n){var r=n.dialogue,i=n.instance,o=n.sequence,a=n.options;if(n.src===t.context.uid)t.log("The message is from the local account, ignored");else{var s=r.toString(),c=t.dialPendingMsgSubjectMap.get(s);if(r="".concat(i,"-").concat(r,"#").concat(o),c)c.next(n),t.log("Env_%d: The dialogue has pending messages, next: %s",e.env,r);else{var u=t.dialogueSequenceLru.get(s);if(c=!u&&o.eq(1),i=void 0!==u&&o.sub(u).eq(1),c||i)t.emitMessage(n,e.env);else{if(u){if(o.lte(u))return;t.log("Env_%d: The message pended, the sequence is not continuous with the last: %s",e.env,r)}else t.log("Env_%d: The message pended, the first sequence is not equal to 1: %s",e.env,r);o=new Pa,t.dialPendingMsgSubjectMap.set(s,o);var l=o.pipe(Qs(Pk),xg((function(e,t){return[].concat(G(e),[t])}),[]),ba((function(e){return G(e).sort((function(e,t){return e=e.sequence,t=t.sequence,e.eq(t)?0:e.gt(t)?1:-1}))})),sm(1));a=!(a=new ae(a)).isFromCache()&&!a.isBufferedMessage(),l.pipe(ob(Bc(a?750:1500)),aa((function(e){if(2>e.length)return!1;for(var t=void 0===u?U.fromNumber(1,!0):u.add(1),n=0;n<e.length;t=t.add(1),n++)if(!e[n].sequence.eq(t))return!1;return!0})),wg((function(){t.dialPendingMsgSubjectMap.delete(s)}))).subscribe((function(n){n.forEach((function(n){t.emitMessage(n,e.env),t.log("Env_%d: The message queue has fully ordered, emitting: %s",e.env,"".concat(n.instance,"-").concat(n.dialogue,"#").concat(n.sequence))}))}),(function(n){n instanceof vg&&l.pipe(Ka(1)).subscribe((function(n){return n.forEach((function(n){t.log("Env_%d: The message pending queue expired, emitting: %s",e.env,"".concat(n.instance,"-").concat(n.dialogue,"#").concat(n.sequence)),t.emitMessage(n,e.env)}))}))})),o.next(n)}}}}}},{key:"onGroupEnterNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,memberId:t.user,type:"MemberJoined",size:t.size})}}},{key:"onGroupLeaveNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,memberId:t.user,type:"MemberLeft",size:t.size})}}},{key:"onGroupCountNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,type:"MemberCountUpdated",size:t.size})}}},{key:"onGroupAttributeAlt",value:function(){var e=this;return function(t){var n=t.group;t=ff(t,kD),e.emit("channelAttributesUpdated",ua({channelId:n},t))}}},{key:"onUserNotice",value:function(e){var t=this;return function(n){t.emit("peerOnlineStatusChanged",{peerId:n.user,instance:n.instance,seq:n.seq,state:e})}}}],[{key:"sendMessageAck",value:function(e,t){var n=new ae(e.options);(n.isInvitation()||n.isPeerMessage())&&t.sendPacket("Ack",{code:0,dialogue:e.dialogue,instance:e.instance,sequence:e.sequence})}}]),t}(tb());m(ls,"genTimeoutError",(function(e,t){return bb(void 0).pipe(cd(void 0===t?1e4:t),ba((function(){throw new db(["Request timed out after %ds",void 0===t?1e4:t],e)})))}));var ms,ol,pl=0,ql=0;Ud.v1=function(e,t,n){n=t&&n||0;var r=t||[],i=(e=e||{}).node||ms,o=void 0!==e.clockseq?e.clockseq:ol;if(null==i||null==o){var a=Jq();null==i&&(i=ms=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==o&&(o=ol=16383&(a[6]<<8|a[7]))}a=void 0!==e.msecs?e.msecs:(new Date).getTime();var s=void 0!==e.nsecs?e.nsecs:ql+1,c=a-pl+(s-ql)/1e4;if(0>c&&void 0===e.clockseq&&(o=o+1&16383),(0>c||a>pl)&&void 0===e.nsecs&&(s=0),1e4<=s)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(pl=a,ql=s,ol=o,e=(1e4*(268435455&(a+=122192928e5))+s)%4294967296,r[n++]=e>>>24&255,r[n++]=e>>>16&255,r[n++]=e>>>8&255,r[n++]=255&e,e=a/4294967296*1e4&268435455,r[n++]=e>>>8&255,r[n++]=255&e,r[n++]=e>>>24&15|16,r[n++]=e>>>16&255,r[n++]=o>>>8|128,r[n++]=255&o,o=0;6>o;++o)r[n+o]=i[o];return t||Kq(r)},Ud.v4=Ud;var rl=Ph(),vd,bf=S.LocalInvitationFailureReason,Ba=S.LocalInvitationState,lD=(vd=function(e){function t(e,i,o){W(this,t);var a=r.call(this,o,"RtmLocalInvitation",!0);return m(n(a),"state",Ba.IDLE),m(n(a),"localInvitationEnd$",Ca(gb(n(a),"LocalInvitationAccepted"),gb(n(a),"LocalInvitationRefused"),gb(n(a),"LocalInvitationFailure"),gb(n(a),"LocalInvitationCanceled")).pipe(Ka(1))),m(n(a),"callId",Ud.v4()),m(n(a),"_content",""),m(n(a),"_channelId",""),m(n(a),"_response",""),m(n(a),"calleeId",void 0),m(n(a),"logger",void 0),m(n(a),"getSession",void 0),a.calleeId=e,a.getSession=i,a.logger=o,a}la(t,e);var r=ma(t);return Ha(t,[{key:"channelId",get:function(){return this._channelId},set:function(e){this.state!==Ba.IDLE?this.info("set channelId only allow before invitation sent to remote"):(this.log("set channelId for %s",this.callId),this._channelId=e)}},{key:"content",get:function(){return this._content},set:function(e){this.log("set content for %s",this.callId),this._content=e}},{key:"response",get:function(){return this._response},set:function(e){throw new I('Cannot set the "response" of the LocalInvitation instance.',xc)}},{key:"send",value:function(){var e,t=this;if(this.state===Ba.SENT_TO_REMOTE||this.state===Ba.RECEIVED_BY_REMOTE)throw new K("The local invitation send failure. The call invitation has already been sent.",gA);if(this.isLocalInvitationEnd())throw new K("The local invitation send failure. The call invitation has ended.",Ih);if(0<this._channelId.length&&!za(this._channelId))throw new I("Illegal invitation channel ID",xc);if(!za(this.calleeId))throw new I("Illegal invitation callee user ID",xc);if(8192<Ig(this._content))throw new I('The length of the "content" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',xc);this.state=Ba.SENT_TO_REMOTE,ad(J(w.mark((function n(){var r,i,o;return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getSession().sendInvitationMessage({peerId:t.calleeId,callId:t.callId,extra:t._content,type:"CallInvite",channelId:t._channelId});case 2:if(r=n.sent,i=r.hasPeerReceived,o=r.hasReSent,!t.isLocalInvitationEnd()){n.next=7;break}throw new db("send invitation timeout");case 7:if(t.log("The local invitation has sent to the callee"),i||o){n.next=11;break}throw e=new rl({PEER_NOT_ONLINE:"The peer of the invitation is not online"});case 11:if(i){n.next=14;break}throw e=new rl({RESENT_AND_OFFLINE:"Resent and the peer of the invitation is not online"});case 14:case"end":return n.stop()}}),n)})))).pipe(oe((function(e){return e.pipe(ca((function(e){if(!(e instanceof rl))throw e})),cd(2e3))})),hb(3e4),Ga((function(e){return Sa(e)&&t.warn("local invitation ack timed out"),Z(e)})),ob(this.localInvitationEnd$)).subscribe({next:function(){t.state===Ba.RECEIVED_BY_REMOTE?t.log('The local invitation state is already "RECEIVED_BY_REMOTE", skipped emitting "LocalInvitationReceivedByPeer"'):t.state!==Ba.SENT_TO_REMOTE?t.log("The invitation has ended, skipped emitting the %s event","LocalInvitationReceivedByPeer"):(t.info("The peer received the local invitation %s.",t.callId),t.state=Ba.RECEIVED_BY_REMOTE,t.emit("LocalInvitationReceivedByPeer"),t.localInvitationEnd$.pipe(hb(6e4),Ga((function(e){return Sa(e)&&t.warn("local invitation expired"),Z(e)}))).subscribe({error:function(){t.state=Ba.FAILURE,t.emit("LocalInvitationFailure",bf.INVITATION_EXPIRE)}}))},error:function(n){t.isLocalInvitationEnd()?t.log("The invitation has ended, skipped emitting the %s event","LocalInvitationFailure"):(t.state=Ba.FAILURE,Sa(n)&&e?"PEER_NOT_ONLINE"===e.code?t.emit("LocalInvitationFailure",bf.PEER_OFFLINE):"RESENT_AND_OFFLINE"===e.code&&t.emit("LocalInvitationFailure",bf.PEER_NO_RESPONSE):Sa(n)?t.emit("LocalInvitationFailure",bf.PEER_NO_RESPONSE):"RtmInvalidStatusError"===n.name?t.emit("LocalInvitationFailure",bf.NOT_LOGGEDIN):t.emit("LocalInvitationFailure",bf.UNKNOWN))}})}},{key:"cancel",value:function(){if(this.isLocalInvitationEnd())throw new K("The local invitation cancel failure",Ih);if(this.state===Ba.IDLE)throw new K("The local invitation has not been sent",fA);if(8192<Ig(this._content))throw new I('The length of the "content" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',xc);this.getSession().sendInvitationMessage({callId:this.callId,peerId:this.calleeId,type:"CallCancel",channelId:this._channelId,extra:this._content}),this.state=Ba.CANCELED,this.emit("LocalInvitationCanceled")}},{key:"onAcceptReceived",value:function(e){if(this.isLocalInvitationEnd()&&this.state!==Ba.ACCEPTED_BY_REMOTE)this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationAccepted");else{if(this.state===Ba.IDLE)throw new K("the local have not sent the invitation, how can remote accept it?");this.getSession().sendInvitationMessage({callId:this.callId,isAcceptAck:!0,type:"CallAccept",peerId:this.calleeId,channelId:this.channelId}),this.state===Ba.ACCEPTED_BY_REMOTE?this.log("already in ACCEPTED_BY_REMOTE state, ignore emit ACCEPTED_BY_REMOTE"):(this.state===Ba.SENT_TO_REMOTE&&(this.log("receive LocalInvitationAccepted before remote response to the invitation"),this.state=Ba.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this.state=Ba.ACCEPTED_BY_REMOTE,this._response=e,this.emit("LocalInvitationAccepted",e))}}},{key:"onRefuseReceived",value:function(e){if(this.isLocalInvitationEnd())this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationRefused");else{if(this.state===Ba.IDLE)throw new K("the local have not sent the invitation, how can remote refuse it?");this.state===Ba.SENT_TO_REMOTE&&(this.log("receive LocalInvitationRefused before remote response to the invitation"),this.state=Ba.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this._response=e,this.state=Ba.REFUSED_BY_REMOTE,this.emit("LocalInvitationRefused",e)}}},{key:"isLocalInvitationEnd",value:function(){return[Ba.CANCELED,Ba.FAILURE,Ba.ACCEPTED_BY_REMOTE,Ba.REFUSED_BY_REMOTE].includes(this.state)}}]),t}(tb()),fa(vd.prototype,"send",[Nb],Object.getOwnPropertyDescriptor(vd.prototype,"send"),vd.prototype),fa(vd.prototype,"cancel",[Nb],Object.getOwnPropertyDescriptor(vd.prototype,"cancel"),vd.prototype),vd),Rh=S.RemoteInvitationFailureReason,kb=S.RemoteInvitationState,mD=function(e){function t(e){var i=e.invitationChannel,o=e.extraContent,a=e.callId,s=e.callerId,c=e.logger;e=e.getSession,W(this,t);var u=r.call(this,c,"RtmRemoteInvitation",!0);return m(n(u),"state",kb.INVITATION_RECEIVED),m(n(u),"remoteInvitationEnd$",Ca(gb(n(u),"RemoteInvitationCanceled"),gb(n(u),"RemoteInvitationRefused"),gb(n(u),"RemoteInvitationAccepted"),gb(n(u),"RemoteInvitationFailure")).pipe(Ka(1))),m(n(u),"callerId",void 0),m(n(u),"callId",void 0),m(n(u),"_getSession",void 0),m(n(u),"logger",void 0),m(n(u),"_content",void 0),m(n(u),"_channelId",void 0),m(n(u),"_response",""),u._channelId=i,u._content=o,u.callId=a,u.callerId=s,u._getSession=e,u.logger=c,u.remoteInvitationEnd$.pipe(hb(6e4),Ga((function(e){return Sa(e)&&u.warn("Remote invitation expired"),Z(e)}))).subscribe({error:function(){u.state=kb.FAILURE,u.emit("RemoteInvitationFailure",Rh.INVITATION_EXPIRE)}}),u}la(t,e);var r=ma(t);return Ha(t,[{key:"channelId",get:function(){return this._channelId},set:function(e){throw new I('Cannot set the "response" of the RemoteInvitation instance.',xc)}},{key:"content",get:function(){return this._content},set:function(e){throw new I('Cannot set the "content" of the RemoteInvitation instance.',xc)}},{key:"response",get:function(){return this._response},set:function(e){this._response=e}},{key:"accept",value:function(){var e,t=this;if(this.isRemoteInvitationEnd())throw new K("The local invitation has ended. Cannot accept.",Ih);if(this.state===kb.ACCEPT_SENT_TO_LOCAL)throw new K("The remote invitation is accepting. Cannot do the operation.",Qq);if(8192<Ig(this._response))throw new I('The length of the "response" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',xc);this.state=kb.ACCEPT_SENT_TO_LOCAL,Xb(mm(1e3).pipe(cb((function(){return ad(J(w.mark((function e(){return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._getSession().sendInvitationMessage({peerId:t.callerId,callId:t.callId,extra:t.response,type:"CallAccept",isAcceptAck:!1,channelId:t.channelId}));case 1:case"end":return e.stop()}}),e)}))))})),wb((function(t){return e=t.hasPeerReceived})),Ka(1)),gb(this,"RemoteInvitationAccepted")).pipe(hb(5e3),ob(this.remoteInvitationEnd$)).subscribe({error:function(n){if(t.logError(n),t.state=kb.FAILURE,Sa(n))switch(e){case void 0:case!0:return void t.emit("RemoteInvitationFailure",Rh.ACCEPT_FAILURE);case!1:return void t.emit("RemoteInvitationFailure",Rh.PEER_OFFLINE)}t.emit("RemoteInvitationFailure",Rh.UNKNOWN)}})}},{key:"refuse",value:function(){if(this.state===kb.ACCEPT_SENT_TO_LOCAL)throw new K("The remote invitation is accepting. Cannot do the operation.",Qq);if(this.isRemoteInvitationEnd())throw new K("The invitation is end. Cannot refuse",Ih);if(8192<Ig(this._response))throw new I('The length of the "response" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',xc);this._getSession().sendInvitationMessage({peerId:this.callerId,callId:this.callId,extra:this.response,type:"CallReject",channelId:this.channelId}),this.state=kb.REFUSED,this.emit("RemoteInvitationRefused")}},{key:"onCancelReceived",value:function(e){this.isRemoteInvitationEnd()?this.log("The invitation has ended, skipped emitting the %s event","RemoteInvitationCanceled"):(this.state===kb.ACCEPT_SENT_TO_LOCAL&&this.log("caller canceled before receive accept"),this._content=e,this.state=kb.CANCELED,this.emit("RemoteInvitationCanceled",e))}},{key:"onAcceptAckReceived",value:function(){this.state!==kb.ACCEPT_SENT_TO_LOCAL?this.log("The invitation has ended, skipped emitting the %s event","ori:".concat(this.state,", to: RemoteInvitationAccepted")):(this.state=kb.ACCEPTED,this.emit("RemoteInvitationAccepted"))}},{key:"isRemoteInvitationEnd",value:function(){return[kb.ACCEPTED,kb.REFUSED,kb.CANCELED,kb.FAILURE].includes(this.state)}}]),t}(tb()),nD=function(e){function t(e,i){W(this,t);var o=r.call(this,i,"InvitationManager");return m(n(o),"getSession",void 0),m(n(o),"invitationDispatcher",new ea.EventEmitter),m(n(o),"outgoingLocalInvitations",new Map),m(n(o),"receivedRemoteInvitations",new tc(void 0,{maxlen:1e4})),m(n(o),"logger",void 0),o.getSession=cn(e),o.logger=i,o.invitationDispatcher.on("remoteInvitationToManager",(function(e){var t=e.callId,n=e.extra,r=e.callerId;e=e.channelId,o.receivedRemoteInvitations.has(t)||((n=new mD({callerId:r,callId:t,getSession:o.getSession,logger:i,extraContent:n,invitationChannel:e})).remoteInvitationEnd$.subscribe((function(){o.receivedRemoteInvitations.delete(t)})),o.receivedRemoteInvitations.set(t,n),o.emit("remoteInvitationInstance",n))})),o.invitationDispatcher.on("acceptAckToRemoteInvitation",(function(e){(e=o.receivedRemoteInvitations.get(e.callId))&&e.onAcceptAckReceived()})),o.invitationDispatcher.on("cancelToRemoteInvitation",(function(e){var t=e.extra;(e=o.receivedRemoteInvitations.get(e.callId))&&e.onCancelReceived(t)})),o.invitationDispatcher.on("acceptToLocalInvitation",(function(e){var t=e.extra;(e=o.outgoingLocalInvitations.get(e.callId))&&e.onAcceptReceived(t)})),o.invitationDispatcher.on("refuseToLocalInvitation",(function(e){var t=e.extra;(e=o.outgoingLocalInvitations.get(e.callId))&&e.onRefuseReceived(t)})),o}la(t,e);var r=ma(t);return Ha(t,[{key:"invitationMessageHandler",value:function(e){var t=e.body,n=t.callId,r=t.extra;r=void 0===r?"":r;var i=t.type,o=void 0===(t=t.channel)?"":t,a=e.type;switch(t=e.peerId,e=e.serverReceivedTs,a){case"CallAccept":"ack"===i?this.invitationDispatcher.emit("acceptAckToRemoteInvitation",{callId:n}):"request"===i&&this.invitationDispatcher.emit("acceptToLocalInvitation",{callId:n,extra:r});break;case"CallInvite":this.invitationDispatcher.emit("remoteInvitationToManager",{callId:n,callerId:t,extra:r,channelId:o});break;case"CallCancel":if("0"===n){n="".concat("AgoraRTMLegacyEndcallCompatibleMessagePrefix","_").concat(o,"_").concat(r),this.getSession().emit("peerTextMessage",{peerId:t,properties:{serverReceivedTs:e,isOfflineMessage:!1},text:n});break}this.invitationDispatcher.emit("cancelToRemoteInvitation",{callId:n,extra:r});break;case"CallReject":this.invitationDispatcher.emit("refuseToLocalInvitation",{callId:n,extra:r});break;default:throw Im("invitationType",a)}}},{key:"genLocalInvitation",value:function(e){var t=this,n=new lD(e,this.getSession,this.logger);return n.localInvitationEnd$.subscribe((function(){t.outgoingLocalInvitations.delete(n.callId)})),this.outgoingLocalInvitations.set(n.callId,n),n}}]),t}(tb()),oD=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return lb(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),qC(e,t,{leading:r,maxWait:t,trailing:i})},ub,cf;!function(e){e[e.JOINED=0]="JOINED",e[e.LEFT=1]="LEFT"}(cf||(cf={}));var ns=S.ConnectionState,pD=(ub=function(e){function t(e,i,o,a){W(this,t);var s=r.call(this,a,"RtmChannel",!0);return m(n(s),"onMemberCountUpdated",oD((function(e){e!==s.memberCount&&(s.memberCount=e,s.emit("MemberCountUpdated",e))}),1e3)),m(n(s),"getSession",void 0),m(n(s),"memberCount",0),m(n(s),"memberJoinedLru",new tc(void 0,{maxlen:1e4})),m(n(s),"memberLeftLru",new tc(void 0,{maxlen:1e4})),m(n(s),"memberJoinStateLru",new tc(void 0,{maxlen:1e4})),m(n(s),"attributesSeqLru",new tc(void 0,{maxlen:1e4})),m(n(s),"channelId",void 0),m(n(s),"client",void 0),m(n(s),"onAttributesUpdated",(function(e){var t=e.channelId,n=e.attributeMaps,r=e.seq;e=e.instance.toString();var i=s.attributesSeqLru.get(e);if((!i||r.greaterThan(i))&&(s.attributesSeqLru.set(e,r),t===s.channelId)){for(t={},r=0;r<n.length;r++){var o=n[r];e=o.key,i=o.ms;var a=o.value;if(o=o.origin,"string"!=typeof e||!U.isLong(i)||"string"!=typeof a||!za(o))break;t[e]={value:a,lastUpdateUserId:o,lastUpdateTs:i.toNumber()}}s.emit("AttributesUpdated",t)}})),m(n(s),"onChannelTextMessage",(function(e){var t=e.memberId,n=e.text,r=e.properties;e.channelId===s.channelId&&s.emit("ChannelMessage",{text:n,messageType:S.MessageType.TEXT},t,r)})),m(n(s),"onChannelMediaMessage",(function(e){var t=e.memberId,n=e.properties,r=e.details,i=e.messageType;e.channelId===s.channelId&&("FILE"===i?s.emit("ChannelMessage",{messageType:S.MessageType.FILE,size:parseInt(pa(r.media_size),10),description:pa(r.media_description),fileName:pa(r.media_filename),mediaId:pa(r.media_id),thumbnail:new Blob([r.media_thumbnail])},t,n):"IMAGE"===i&&s.emit("ChannelMessage",{messageType:S.MessageType.IMAGE,size:parseInt(pa(r.media_size),10),description:pa(r.media_description),fileName:pa(r.media_filename),mediaId:pa(r.media_id),thumbnail:new Blob([r.media_thumbnail]),height:parseInt(pa(r.media_height),10),width:parseInt(pa(r.media_width),10),thumbnailHeight:parseInt(pa(r.media_thumbnailheight),10),thumbnailWidth:parseInt(pa(r.media_thumbnailwidth),10)},t,n))})),m(n(s),"onChannelRawMessage",(function(e){var t=e.desc,n=e.raw,r=e.memberId,i=e.properties;e.channelId===s.channelId&&s.emit("ChannelMessage",{messageType:S.MessageType.RAW,rawMessage:n,description:t},r,i)})),m(n(s),"onMemberNotice",(function(e){var t=e.memberId,n=e.type,r=e.size;if(e.channelId===s.channelId){var i=e.instance.toString();e=e.seq.toString();var o={MemberLeft:s.memberLeftLru,MemberJoined:s.memberJoinedLru,MemberCountUpdated:void 0}[n];if(o){if(o.has(i+e))return void s.log("received duplicated %s notice (seq: %s), channel '%s', member '%s'",n,e,oa(s.channelId),oa(t||""));if(o.set(i+e,void 0),"string"!=typeof t)return;if(t!==s.getSession().context.uid){if((i=s.memberJoinStateLru.get(t))===cf.JOINED&&"MemberJoined"===n)return void s.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",n,e,oa(s.channelId),oa(t||""));if(i===cf.LEFT&&"MemberLeft"===n)return void s.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",n,e,oa(s.channelId),oa(t||""))}s.memberJoinStateLru.set(t,"MemberJoined"===n?cf.JOINED:cf.LEFT)}s.info("Channel %s - %s, memberId: %s",n,oa(s.channelId),"MemberCountUpdated"===n?"[unknown]":oa(t||"")),i=t===s.getSession().context.uid,"MemberLeft"===n&&za(t)||"MemberJoined"===n&&za(t)?(i||s.emit(n,t),s.onMemberCountUpdated(r)):"MemberCountUpdated"===n&&"number"==typeof r&&s.onMemberCountUpdated(r)}})),s.getSession=cn(i),s.channelId=e,s.client=o,s.info("A channel created, id %s",oa(e)),s}la(t,e);var r=ma(t);return Ha(t,[{key:"join",value:function(){var e=J(w.mark((function e(){var t,n,r,i,o,a,s;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(za(this.channelId)){e.next=2;break}throw new I(["The %s in the arguments is invalid","channelId"],hA);case 2:e.prev=2,t=this.getSession(),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new K("The client is not logged in. Cannot do the operation",Vq);case 9:if(!t.joinedChannels.has(this)){e.next=12;break}throw eb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:fb(t.startTime),errCode:Uq,sid:Xa(t.instanceId)},null!==(n=this.client.context.config.enableCloudProxy)&&void 0!==n&&n),new K("The channel has joined. Cannot rejoin",Uq);case 12:if(e.prev=12,this.log("Joining the channel %s",oa(this.channelId)),!this.hasOtherChannelJoined()){e.next=17;break}throw eb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:fb(t.startTime),errCode:Wq,sid:Xa(t.instanceId)},null!==(o=this.client.context.config.enableCloudProxy)&&void 0!==o&&o),new K("A channel of the same channel ID has already joined. Cannot rejoin",Wq);case 17:if(20!==t.joinedChannels.size){e.next=20;break}throw eb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:fb(t.startTime),errCode:Tq,sid:Xa(t.instanceId)},null!==(a=this.client.context.config.enableCloudProxy)&&void 0!==a&&a),new ib("The joined channels has exceeded the limit of 20",Tq);case 20:return eb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:fb(t.startTime),errCode:0,sid:Xa(t.instanceId)},null!==(r=this.client.context.config.enableCloudProxy)&&void 0!==r&&r),e.next=23,t.requestChannelJoin(this,this.channelId);case 23:eb("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:fb(t.startTime),errCode:0,sid:Xa(t.instanceId),serverErrCode:0,userId:t.context.uid},null!==(i=this.client.context.config.enableCloudProxy)&&void 0!==i&&i),this.info("The channel %s joined successfully",oa(this.channelId)),t.on("channelTextMessage",this.onChannelTextMessage),t.on("channelRawMessage",this.onChannelRawMessage),t.on("channelMediaMessage",this.onChannelMediaMessage),t.on("memberNotice",this.onMemberNotice),t.on("channelAttributesUpdated",this.onAttributesUpdated),e.next=41;break;case 32:if(e.prev=32,e.t1=e.catch(12),this.logError(e.t1),!sa(e.t1)){e.next=37;break}throw e.t1;case 37:if(!Sa(e.t1)){e.next=40;break}throw eb("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:fb(t.startTime),errCode:Sq,sid:Xa(t.instanceId),serverErrCode:0,userId:t.context.uid},null!==(s=this.client.context.config.enableCloudProxy)&&void 0!==s&&s),new db(["Join channel %s timed out",oa(this.channelId)],Sq);case 40:throw new Wc(["The channel %s join failure",oa(this.channelId)],{code:Rq,originalError:e.t1});case 41:case"end":return e.stop()}}),e,this,[[2,6],[12,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"leave",value:function(){var e=J(w.mark((function e(){var t,n,r,i;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=this.getSession(),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new K("The client is not logged in. Cannot do the operation",jA);case 7:if(n.joinedChannels.has(this)){e.next=9;break}throw new K("The channel does not join. Cannot do the operation",iA);case 9:e.prev=9,n.requestChannelLeave(this,this.channelId),this.memberLeftLru.empty(),this.memberJoinedLru.empty(),this.attributesSeqLru.empty(),this.memberJoinStateLru.empty(),this.memberCount=0,n.removeListener("channelTextMessage",this.onChannelTextMessage),n.removeListener("channelRawMessage",this.onChannelRawMessage),n.removeListener("channelMediaMessage",this.onChannelMediaMessage),n.removeListener("memberNotice",this.onMemberNotice),n.removeListener("channelAttributesUpdated",this.onAttributesUpdated),e.next=32;break;case 23:if(e.prev=23,e.t1=e.catch(9),this.logError(e.t1),!sa(e.t1)){e.next=30;break}throw void 0===e.t1.code&&(e.t1.code=Yq),eb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:fb(n.startTime),errCode:Yq,sid:Xa(n.instanceId),userId:n.context.uid},null!==(i=this.client.context.config.enableCloudProxy)&&void 0!==i&&i),e.t1;case 30:throw eb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:fb(n.startTime),errCode:Xq,sid:Xa(n.instanceId),userId:n.context.uid},null!==(r=this.client.context.config.enableCloudProxy)&&void 0!==r&&r),new Wc("The channel leave failure",{code:Xq,originalError:e.t1});case 32:eb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:fb(n.startTime),errCode:0,sid:Xa(n.instanceId),userId:n.context.uid},null!==(t=this.client.context.config.enableCloudProxy)&&void 0!==t&&t);case 33:case"end":return e.stop()}}),e,this,[[0,4],[9,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=J(w.mark((function e(t){var n,r,i,o,a=this,s=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(1<s.length&&void 0!==s[1]?s[1]:{}).enableHistoricalMessaging,r=void 0!==n&&n,Tm(t,Hh),e.prev=2,i=this.getSession(),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new K("The client is not logged in. Cannot do the operation",ig);case 9:if(i.joinedChannels.has(this)){e.next=11;break}throw new K("The channel does not join. Cannot do the operation",ig);case 11:if(this.client.connectionState!==ns.RECONNECTING){e.next=16;break}return o=Date.now(),e.next=15,new Promise((function(e,n){var i=function(){var i=J(w.mark((function i(){var c;return w.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return c=Date.now()-o,i.prev=1,i.next=4,Gg({message:t,peerId:a.channelId,toPeer:!1,session:a.getSession(),errorCodes:{NOT_LOGGED_IN:ig,TOO_OFTEN:Mq},diff:c,logger:a.logger,options:{enableHistoricalMessaging:r,enableOfflineMessaging:!1}});case 4:e(),i.next=12;break;case 7:i.prev=7,i.t0=i.catch(1),Sa(i.t0)&&n(new db(Yd(a.name,"sendMessageToPeer",1e4),Yk)),sa(i.t0)&&n(i.t0),n(new da("Channel message send failure",{code:hg,originalError:i.t0}));case 12:return i.prev=12,clearTimeout(s),i.finish(12);case 15:case"end":return i.stop()}}),i,null,[[1,7,12,15]])})));return function(){return i.apply(this,arguments)}}();a.client.internalEmitter.once("RECONNECTED",i);var s=setTimeout((function(){a.client.internalEmitter.off("RECONNECTED",i),n(new db(Yd(a.name,"sendMessageToPeer",1e4),Yk))}),9e3)}));case 15:return e.abrupt("return");case 16:if(this.client.connectionState===ns.CONNECTED){e.next=18;break}throw new K("The client is not logged in. Cannot do the operation",ig);case 18:return e.prev=18,e.next=21,Gg({message:t,peerId:this.channelId,toPeer:!1,session:this.getSession(),errorCodes:{NOT_LOGGED_IN:ig,TOO_OFTEN:Mq},diff:0,logger:this.logger,options:{enableHistoricalMessaging:r,enableOfflineMessaging:!1}});case 21:e.next=31;break;case 23:if(e.prev=23,e.t1=e.catch(18),!Sa(e.t1)){e.next=27;break}throw new db(Yd(this.name,"sendMessage",1e4),Yk);case 27:if(!sa(e.t1)){e.next=30;break}throw this.logError(e.t1),e.t1;case 30:throw new Wc("The channel message send failure",hg);case 31:case"end":return e.stop()}}),e,this,[[2,6],[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getMembers",value:function(){var e=J(w.mark((function e(){var t,n,r;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.prev=1,t=this.getSession(),e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(1),new K("The client is not logged in. Cannot do the operation",eA);case 8:if(t.joinedChannels.has(this)){e.next=10;break}throw new K("The channel does not join. Cannot do the operation",dA);case 10:return n=this.getSession().requestChannelMemberList(this.channelId),e.next=13,n.pipe(ba((function(e){return e.memberInfos.map((function(e){return e.account}))}))).toPromise();case 13:return r=e.sent,this.info("Channel %s - get members success, %o",oa(this.channelId),r.map(oa)),e.abrupt("return",r);case 18:if(e.prev=18,e.t1=e.catch(0),!sa(e.t1)){e.next=23;break}throw this.logError(e.t1),e.t1;case 23:throw new Wc("The channel members get failure",bA);case 24:case"end":return e.stop()}}),e,this,[[0,18],[1,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"hasOtherChannelJoined",value:function(){var e=this;return!this.getSession().joinedChannels.has(this)&&Array.from(this.getSession().joinedChannels).some((function(t){return t.channelId===e.channelId}))}}]),t}(tb()),fa(ub.prototype,"join",[Nb],Object.getOwnPropertyDescriptor(ub.prototype,"join"),ub.prototype),fa(ub.prototype,"leave",[Nb],Object.getOwnPropertyDescriptor(ub.prototype,"leave"),ub.prototype),fa(ub.prototype,"sendMessage",[Nb],Object.getOwnPropertyDescriptor(ub.prototype,"sendMessage"),ub.prototype),fa(ub.prototype,"getMembers",[Ma],Object.getOwnPropertyDescriptor(ub.prototype,"getMembers"),ub.prototype),ub),E,Eb=S.ConnectionChangeReason,T=S.ConnectionState,os={DISCONNECTED:1,CONNECTING:2,CONNECTED:3,RECONNECTING:4,ABORTED:5},qD={LOGIN:1,LOGIN_SUCCESS:2,LOGIN_FAILURE:3,LOGIN_TIMEOUT:4,INTERRUPTED:5,LOGOUT:6,BANNED_BY_SERVER:7,REMOTE_LOGIN:8},rD=(E=function(e){function t(e,i,o,a){W(this,t);var s=r.call(this,i,"RtmClient",!0);return m(n(s),"connectionState",T.DISCONNECTED),m(n(s),"internalEmitter",new ea),m(n(s),"context",void 0),m(n(s),"attributes",{}),m(n(s),"loginPromise",void 0),m(n(s),"attributeDrafts",new Set),m(n(s),"session",void 0),m(n(s),"lastLoginTime",void 0),m(n(s),"reconnId",0),m(n(s),"channelAttributesCacheLru",new tc(void 0,{maxlen:1e4})),m(n(s),"invitationManager",void 0),m(n(s),"subscribedPeerStatusCache",{}),m(n(s),"peerStatusSeqLru",new tc(void 0,{maxlen:1e4})),m(n(s),"peerUnreachableTimers",{}),m(n(s),"mediaTaskManager",void 0),m(n(s),"setParameters",void 0),m(n(s),"updateConfig",void 0),m(n(s),"userDropHandler",(function(e){if(s.connectionState!==T.ABORTED)switch(e){case 11:s.logError("Kicked off by remote session"),s.onConnectionStateChanged(T.ABORTED,Eb.REMOTE_LOGIN);break;case 14:case 15:case 16:s.logError("Server banned because of illegal ".concat({14:"User ID",15:"IP",16:"Channel Name"}[e])),s.onConnectionStateChanged(T.ABORTED,Eb.BANNED_BY_SERVER);break;default:s.logError("User kicked off for unknown code: ".concat(e)),s.onConnectionStateChanged(T.ABORTED,Eb.INTERRUPTED)}})),s.context=new ZC(e,o,i),s.mediaTaskManager=new fs(i),s.context.config=o,s.internalEmitter.setMaxListeners(512),s.setParameters=a.bind(n(s)),s.updateConfig=a.bind(n(s)),s.invitationManager=new nD((function(){return s.session}),i),s.invitationManager.on("remoteInvitationInstance",(function(e){s.emit("RemoteInvitationReceived",e)})),s}la(t,e);var r=ma(t);return Ha(t,[{key:"renewToken",value:function(){var e=J(w.mark((function e(t){var n,r,i,o=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t&&0!==t.length){e.next=2;break}throw new I("Invalid argument",rA);case 2:if(this.connectionState!==T.ABORTED){e.next=5;break}return e.next=5,new Promise((function(){}));case 5:if(this.connectionState===T.CONNECTED||this.connectionState===T.RECONNECTING){e.next=7;break}throw new K("The client is not logged in",uA);case 7:if(void 0!==this.session){e.next=9;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return e.prev=9,n=this.context.token,this.context.token=t,e.next=14,this.session.connection.apClient.getApEdgeInfo$(!1).pipe(Dd((function(){return Error("No available edge address to connect")})),oe((function(e){return e.pipe(ca((function(e){if(sa(e))throw e})),cd(2500),Ka(4))})),Ka(1),hb(2e4),Ga((function(e){return Sa(e)&&o.warn("renewToken timed out"),Z(e)}))).toPromise();case 14:r=e.sent,i=r.ticket,e.next=27;break;case 18:if(e.prev=18,e.t0=e.catch(9),this.context.token=n,e.t0.code!==$q&&e.t0.code!==ar){e.next=23;break}throw new Ye("Invalid token",tA);case 23:if(e.t0.code!==Kh){e.next=25;break}throw new Ye("The token expired",sA);case 25:if(!Sa(e.t0)){e.next=27;break}throw new db("Renew token timed out",qA);case 27:this.session.curLoginSockets.filter((function(e){return void 0!==e})).forEach((function(e){return e.ticket=i}));case 28:case"end":return e.stop()}}),e,this,[[9,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"queryPeersOnlineStatus",value:function(){var e=J(w.mark((function e(t){var n,r,i=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new K("The client is not logged in",pA);case 2:if(void 0!==this.session){e.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(!(!Array.isArray(t)||0===t.length||t.some((function(e){return!za(e)}))||256<t.length)){e.next=6;break}throw new I("invalid arguments",er);case 6:return e.next=8,this.session.requestPeersOnlineStatus(t).toPromise();case 8:return n=e.sent,r=uc(Jk(n.userInfos,"account"),(function(e){return!!e.ts})),Object.keys(r).forEach((function(e){if(e in i.subscribedPeerStatusCache&&i.subscribedPeerStatusCache[e]!==S.PeerOnlineState.UNREACHABLE){var t=r[e]?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE;i.emit("PeersOnlineStatusChanged",m({},e,t)),i.subscribedPeerStatusCache[e]=t}})),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelMemberCount",value:function(){var e=J(w.mark((function e(t){var n,r,i,o,a,s,c,u=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new K("The client is not logged in",aA);case 2:if(void 0!==this.session){e.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&t.every((function(e){return"string"==typeof e}))&&0!==t.length){e.next=6;break}throw new I("Invalid arguments: channelIds",Oq);case 6:if(!(32<t.length)){e.next=8;break}throw new I("getChannelMemberCount exceed limit of 32 channelIds",$z);case 8:n=0;case 9:if(!(n<t.length)){e.next=16;break}if(za(r=t[n])){e.next=13;break}throw new I(["getChannelMemberCount channel id %s is invalid",r],Oq);case 13:n++,e.next=9;break;case 16:return e.next=18,this.session.requestGetChannelMemberCount(t).toPromise();case 18:for(i=e.sent,o=i.groupInfos,a={},s=function(e){var t=(e=o[e]).group,n=e.memberCount;za(t)&&"number"==typeof n&&(u.session.joinedChannels.forEach((function(e){e.channelId===t&&e.onMemberCountUpdated(n)})),a[t]=n)},c=0;c<o.length;c++)s(c);return e.abrupt("return",a);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setLocalUserAttributes",value:function(){var e=J(w.mark((function e(t){var n,r;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(uf({attributes:t,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===T.CONNECTED){e.next=3;break}throw new K("The client is not logged in",Ub);case 3:if(void 0!==this.session){e.next=5;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return n=this.session.requestSetLocalUserAttributes(t).toPromise(),r={attribute:t,promise:n},this.attributeDrafts.add(r),e.prev=8,e.next=11,n;case 11:this.attributes=t,e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(8),!sa(e.t0)){e.next=18;break}throw e.t0;case 18:throw new I("arguments is not valid",Ja);case 19:return e.prev=19,this.attributeDrafts.delete(r),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[8,14,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setChannelAttributes",value:function(){var e=J(w.mark((function e(t,n){var r,i,o,a,s=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(2<s.length&&void 0!==s[2]?s[2]:{}).enableNotificationToChannelMembers,i=void 0!==r&&r,uf({attributes:n,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===T.CONNECTED){e.next=4;break}throw new K("The client is not logged in",Ub);case 4:if(void 0!==this.session){e.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return o=this.session.requestSetChannelAttributes(t,n,i).toPromise(),e.prev=7,e.next=10,o;case 10:a=uc(n,(function(e){return new Blob([e]).size})),this.channelAttributesCacheLru.set(t,a),e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(7),!sa(e.t0)){e.next=18;break}throw e.t0;case 18:throw new I("arguments is not valid",Ja);case 19:case"end":return e.stop()}}),e,this,[[7,14]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addOrUpdateLocalUserAttributes",value:function(){var e=J(w.mark((function e(t){var n,r,i;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ua(ua({},this.attributes),t),uf({attributes:t,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),uf({attributes:n,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===T.CONNECTED){e.next=5;break}throw new K("The client is not logged in",Ub);case 5:if(void 0!==this.session){e.next=7;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return r=this.session.requestAddOrUpdateLocalUserAttributes(t).toPromise(),i={attribute:n,promise:r},this.attributeDrafts.add(i),e.prev=10,e.next=13,r;case 13:this.attributes=n,e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(10),!sa(e.t0)){e.next=20;break}throw e.t0;case 20:throw new I("arguments is not valid",er);case 21:return e.prev=21,this.attributeDrafts.delete(i),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[10,16,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addOrUpdateChannelAttributes",value:function(){var e=J(w.mark((function e(t,n){var r,i,o,a,s,c,u=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(2<u.length&&void 0!==u[2]?u[2]:{}).enableNotificationToChannelMembers,i=void 0!==r&&r,o=this.channelAttributesCacheLru.get(t,{}),a=uc(n,(function(e){return new Blob([e]).size})),s=ua(ua({},o),a),uf({attributes:n,attrSizeMap:s,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===T.CONNECTED){e.next=7;break}throw new K("The client is not logged in",Ub);case 7:if(void 0!==this.session){e.next=9;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return c=this.session.requestAddOrUpdateChannelAttributes(t,n,i).toPromise(),e.prev=10,e.next=13,c;case 13:this.channelAttributesCacheLru.set(t,s),e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(10),!sa(e.t0)){e.next=20;break}throw e.t0;case 20:throw new I("arguments is not valid",Ja);case 21:case"end":return e.stop()}}),e,this,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteLocalUserAttributesByKeys",value:function(){var e=J(w.mark((function e(t){var n,r,i,o;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)&&0!==t.length&&!t.some((function(e){return 0===e.length}))){e.next=2;break}throw new K("arguments is not valid",Ja);case 2:if(this.connectionState===T.CONNECTED){e.next=4;break}throw new K("The client is not logged in",Ub);case 4:if(void 0!==this.session){e.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return n=this.session.requestDeleteLocalUserAttributesByKeys(t).toPromise(),r={attribute:Gk(this.attributes,t),promise:n},this.attributeDrafts.add(r),e.prev=9,e.next=12,n;case 12:for(i=0;i<t.length;i++)o=t[i],delete this.attributes[o];e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(9),!sa(e.t0)){e.next=19;break}throw e.t0;case 19:throw new I("arguments is not valid",Ja);case 20:return e.prev=20,this.attributeDrafts.delete(r),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[9,15,20,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteChannelAttributesByKeys",value:function(){var e=J(w.mark((function e(t,n){var r,i,o,a,s,c,u=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(2<u.length&&void 0!==u[2]?u[2]:{}).enableNotificationToChannelMembers,i=void 0!==r&&r,Array.isArray(n)&&0!==n.length&&za(t)&&!n.some((function(e){return 0===e.length||512<e.length}))){e.next=3;break}throw new K("arguments is not valid",Ja);case 3:if(this.connectionState===T.CONNECTED){e.next=5;break}throw new K("The client is not logged in",Ub);case 5:if(void 0!==this.session){e.next=7;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return o=this.session.requestDeleteChannelAttributesByKeys(t,n,i).toPromise(),e.prev=8,e.next=11,o;case 11:if(a=this.channelAttributesCacheLru.get(t))for(s=0;s<n.length;s++)c=n[s],delete a[c];e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(8),!sa(e.t0)){e.next=19;break}throw e.t0;case 19:throw new I("arguments is not valid",Ja);case 20:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clearLocalUserAttributes",value:function(){var e=J(w.mark((function e(){var t,n;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new K("The client is not logged in",Ub);case 2:if(void 0!==this.session){e.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return t=this.session.requestClearLocalUserAttributes().toPromise(),n={attribute:{},promise:t},this.attributeDrafts.add(n),e.prev=7,e.next=10,t;case 10:this.attributes={},e.next=18;break;case 13:if(e.prev=13,e.t0=e.catch(7),!sa(e.t0)){e.next=17;break}throw e.t0;case 17:throw new I("arguments is not valid",Ja);case 18:return e.prev=18,this.attributeDrafts.delete(n),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[7,13,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"clearChannelAttributes",value:function(){var e=J(w.mark((function e(t){var n,r,i,o=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(1<o.length&&void 0!==o[1]?o[1]:{}).enableNotificationToChannelMembers,r=void 0!==n&&n,this.connectionState===T.CONNECTED){e.next=3;break}throw new K("The client is not logged in",Ub);case 3:if(void 0!==this.session){e.next=5;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return i=this.session.requestClearChannelAttributes(t,r).toPromise(),e.prev=6,e.next=9,i;case 9:this.channelAttributesCacheLru.delete(t),e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(6),!sa(e.t0)){e.next=16;break}throw e.t0;case 16:throw new I("arguments is not valid",Ja);case 17:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserAttributes",value:function(){var e=J(w.mark((function e(t){var n,r,i;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(za(t)){e.next=2;break}throw new I("Not a valid user ID",Ja);case 2:if(this.connectionState===T.CONNECTED){e.next=4;break}throw new K("The client is not logged in",Ub);case 4:if(void 0!==this.session){e.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return e.prev=6,e.next=9,this.session.requestGetUserAttributeKeys(t).toPromise();case 9:return n=e.sent,r=n.keys,e.next=13,this.session.requestGetUserAttributesByKeys(t,r.slice(0,512)).toPromise();case 13:i=e.sent,e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(6),!sa(e.t0)){e.next=20;break}throw e.t0;case 20:throw new I("arguments is not valid",Ja);case 21:return e.abrupt("return",Yp(i.attributeInfos.map((function(e){return[e.key,e.value]}))));case 22:case"end":return e.stop()}}),e,this,[[6,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelAttributes",value:function(){var e=J(w.mark((function e(t){var n,r,i,o,a,s,c,u,l,d,h;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(za(t)){e.next=2;break}throw new I("Not a valid channel ID",Ja);case 2:if(this.connectionState===T.CONNECTED){e.next=4;break}throw new K("The client is not logged in",Ub);case 4:if(void 0!==this.session){e.next=6;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return e.prev=6,e.next=9,this.session.requestGetChannelAttributesKeys(t).toPromise();case 9:return n=e.sent,r=n.keys,e.next=13,this.session.requestGetChannelAttributesByKeys(t,r).toPromise();case 13:i=e.sent,o=i.attributeMaps,e.next=22;break;case 17:if(e.prev=17,e.t0=e.catch(6),!sa(e.t0)){e.next=21;break}throw e.t0;case 21:throw new I("arguments is not valid",Ja);case 22:a={},s=0;case 24:if(!(s<o.length)){e.next=32;break}if(c=o[s],u=c.key,l=c.ms,d=c.value,h=c.origin,"string"==typeof u&&U.isLong(l)&&"string"==typeof d&&za(h)){e.next=28;break}return e.abrupt("break",32);case 28:a[u]={value:d,lastUpdateUserId:h,lastUpdateTs:l.toNumber()};case 29:s++,e.next=24;break;case 32:return this.channelAttributesCacheLru.set(t,uc(a,(function(e){return new Blob([e.value]).size}))),e.abrupt("return",a);case 34:case"end":return e.stop()}}),e,this,[[6,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelAttributesByKeys",value:function(){var e=J(w.mark((function e(t,n){var r,i,o,a,s,c,u,l,d,h;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new K("The client is not logged in",Ub);case 2:if(void 0!==this.session){e.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Hm(t,n),e.prev=5,e.next=8,this.session.requestGetChannelAttributesByKeys(t,n).toPromise();case 8:r=e.sent,i=r.attributeMaps,e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(5),!sa(e.t0)){e.next=16;break}throw e.t0;case 16:throw new I("arguments is not valid",Ja);case 17:o={},a=this.channelAttributesCacheLru.get(t,{}),s=0;case 20:if(!(s<i.length)){e.next=29;break}if(c=i[s],u=c.key,l=c.ms,d=c.value,h=c.origin,"string"==typeof u&&U.isLong(l)&&"string"==typeof d&&za(h)){e.next=24;break}return e.abrupt("break",29);case 24:a[u]=new Blob([d]).size,o[u]={value:d,lastUpdateUserId:h,lastUpdateTs:l.toNumber()};case 26:s++,e.next=20;break;case 29:return this.channelAttributesCacheLru.set(t,a),e.abrupt("return",o);case 31:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUserAttributesByKeys",value:function(){var e=J(w.mark((function e(t,n){var r;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new K("The client is not logged in",Ub);case 2:if(void 0!==this.session){e.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Hm(t,n),e.prev=5,e.next=8,this.session.requestGetUserAttributesByKeys(t,n).toPromise();case 8:r=e.sent,e.next=16;break;case 11:if(e.prev=11,e.t0=e.catch(5),!sa(e.t0)){e.next=15;break}throw e.t0;case 15:throw new I("arguments is not valid",Ja);case 16:return e.abrupt("return",Yp(r.attributeInfos.map((function(e){return[e.key,e.value]}))));case 17:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=J(w.mark((function e(t){var n,r,i,o,a=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Uk=!0,n=Bg(),r=t.token,t.token===this.context.appId&&(r=void 0),setTimeout((function(){var e;eb("Session",{appId:a.context.appId,did:navigator.userAgent,elapse:fb(a.session&&a.session.startTime),index:{index1:t.uid,index2:a.context.appId,index3:"enableLogUpload=".concat(a.context.config.enableLogUpload)},installId:gg,lts:U.fromNumber(Date.now()),os:7,sid:Xa(n),token:r||"",userId:t.uid,ver:"1.4.3-203",buildno:603,subVersion:203,version:4},null!==(e=a.context.config.enableCloudProxy)&&void 0!==e&&e)}),1e4),yd(t)&&za(t.uid)){e.next=7;break}throw new I("not a valid user id",Jh);case 7:if("string"!=typeof r||!r){e.next=11;break}this.context.token=r,e.next=13;break;case 11:if("string"==typeof r||null==r){e.next=13;break}throw new I('The "token" is not a valid string.',Jh);case 13:return i=Date.now(),this.context.sid=Xa(n),this.loginPromise=this.loginImpl({uid:t.uid,instanceId:n}),this.info("RTM Client logging in as ".concat(oa(t.uid))),e.prev=17,e.next=20,this.loginPromise;case 20:e.next=27;break;case 22:throw e.prev=22,e.t0=e.catch(17),sa(e.t0)&&eb("Link",{ackedServerIp:"",destServerIp:"",ec:e.t0.code||1,sc:e.t0.serverCode,elapse:fb(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),responseTime:Date.now()-i,sid:Xa(n),userId:t.uid},null!==(o=this.context.config.enableCloudProxy)&&void 0!==o&&o),this.context.token=void 0,e.t0;case 27:return e.prev=27,this.loginPromise=void 0,e.finish(27);case 30:Uk=!1;case 31:case"end":return e.stop()}}),e,this,[[17,22,27,30]])})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=J(w.mark((function e(){var t;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loginPromise){e.next=3;break}return e.next=3,this.loginPromise;case 3:if(this.connectionState!==T.DISCONNECTED){e.next=6;break}throw this.logError("Already in logout state"),new K("Logout failure. The client has already been logged out",br);case 6:if(this.connectionState!==T.ABORTED){e.next=10;break}return this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'),this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT),e.abrupt("return");case 10:if(void 0!==this.session){e.next=13;break}return this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT),e.abrupt("return");case 13:return eb("Logout",{elapse:fb(this.session.startTime),lts:U.fromNumber(Date.now()),sid:Xa(this.session.instanceId),userId:this.context.uid},null!==(t=this.context.config.enableCloudProxy)&&void 0!==t&&t),e.next=16,this.session.logoutHandler();case 16:this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT),this.log("Log out success");case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logoutSync",value:function(){var e,t=this;if(this.connectionState===T.DISCONNECTED)throw this.logError("Already in logout state"),new K("Logout failure. The client has already been logged out",br);this.connectionState===T.ABORTED?this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'):void 0!==this.session&&(eb("Logout",{elapse:fb(this.session.startTime),lts:U.fromNumber(Date.now()),sid:Xa(this.session.instanceId),userId:this.context.uid},null!==(e=this.context.config.enableCloudProxy)&&void 0!==e&&e),this.session.logoutHandler().then((function(){t.log("Log out success")}))),this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGOUT)}},{key:"sendMessageToPeer",value:function(){var e=J(w.mark((function e(t,n){var r,i,o,a,s,c,u=this,l=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(r=2<l.length&&void 0!==l[2]?l[2]:{}).enableOfflineMessaging,o=void 0!==i&&i,a=r.enableHistoricalMessaging,s=void 0!==a&&a,Tm(t,ve),this.connectionState!==T.RECONNECTING){e.next=5;break}return c=Date.now(),e.abrupt("return",new Promise((function(e,r){var i=function(){var i=J(w.mark((function i(){var l;return w.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==u.session){i.next=2;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 2:return l=Date.now()-c,i.prev=3,i.t0=e,i.next=7,Gg({message:t,peerId:n,toPeer:!0,session:u.session,errorCodes:{NOT_LOGGED_IN:al,TOO_OFTEN:dr},diff:l,logger:u.logger,options:{enableHistoricalMessaging:s,enableOfflineMessaging:o}});case 7:i.t1=i.sent,(0,i.t0)(i.t1),i.next=16;break;case 11:i.prev=11,i.t2=i.catch(3),Sa(i.t2)&&r(new db(Yd(u.name,"sendMessageToPeer",1e4),Zk)),sa(i.t2)&&r(i.t2),r(new da("Peer-to-peer message send failure",{code:cr,originalError:i.t2}));case 16:return i.prev=16,clearTimeout(a),i.finish(16);case 19:case"end":return i.stop()}}),i,null,[[3,11,16,19]])})));return function(){return i.apply(this,arguments)}}();u.internalEmitter.once("RECONNECTED",i);var a=setTimeout((function(){u.internalEmitter.off("RECONNECTED",i),r(new db(Yd(u.name,"sendMessageToPeer",1e4),Zk))}),9e3)})));case 5:if(this.connectionState===T.CONNECTED){e.next=7;break}throw new K("Failed to send the peer-to-peer message. The client is not logged in",al);case 7:if(void 0!==this.session){e.next=9;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return e.prev=9,e.next=12,Gg({message:t,peerId:n,toPeer:!0,session:this.session,errorCodes:{NOT_LOGGED_IN:al,TOO_OFTEN:dr},diff:0,logger:this.logger,options:{enableHistoricalMessaging:s,enableOfflineMessaging:o}});case 12:return e.abrupt("return",e.sent);case 15:if(e.prev=15,e.t0=e.catch(9),!Sa(e.t0)){e.next=19;break}throw new db(Yd(this.name,"sendMessageToPeer",1e4),Zk);case 19:if(!sa(e.t0)){e.next=21;break}throw e.t0;case 21:throw new da("Peer-to-peer message send failure",{code:cr,originalError:e.t0});case 22:case"end":return e.stop()}}),e,this,[[9,15]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createChannel",value:function(e){var t=this;if(!za(e))throw new I(["The %s in the arguments is invalid",Object.keys({channelId:e})[0]],Zz);return new pD(e,(function(){return t.session}),this,this.logger)}},{key:"createLocalInvitation",value:function(e){if(!za(e))throw new I(["The %s in the arguments is invalid",Object.keys({calleeId:e})[0]],xc);return this.invitationManager.genLocalInvitation(e)}},{key:"subscribePeersOnlineStatus",value:function(){var e=J(w.mark((function e(t){var n,r,i,o,a,s,c,u,l,d,h,f,p,v=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new K("The client is not logged in",bl);case 2:if(void 0!==this.session){e.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&0!==t.length){e.next=6;break}throw new I("Invalid arguments: peerIds",kg);case 6:n=0;case 7:if(!(n<t.length)){e.next=14;break}if(za(r=t[n])){e.next=11;break}throw new I(["subscribePeersOnlineStatus peer id %s is invalid",r],kg);case 11:n++,e.next=7;break;case 14:if(!(512<(i=t&&t.length?vk(t):[]).length+Object.keys(this.subscribedPeerStatusCache).length)){e.next=17;break}throw new ib("Subscribed peers overflows",gr);case 17:return e.next=19,this.session.requestSubscribePeersOnlineStatus(i).toPromise();case 19:o=e.sent,a=o.errors,s=[],c=[],u=0;case 24:if(!(u<a.length)){e.next=32;break}if(l=a[u],d=l.code,"string"==typeof(h=l.account)){e.next=28;break}throw new da("Returned account is invalid",fr);case 28:0!==d&&s.push(h);case 29:u++,e.next=24;break;case 32:for(f=0;f<i.length;f++)p=i[f],s.includes(p)||(c.push(p),this.subscribedPeerStatusCache[p]=void 0);if(this.session.requestPeersOnlineStatus(c).pipe(ba((function(e){return uc(Jk(e.userInfos,"account"),(function(e){return!!e.ts}))}))).subscribe((function(e){e=uc(e,(function(e,t){return e=e?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE,v.subscribedPeerStatusCache[t]=e})),v.emit("PeersOnlineStatusChanged",e)})),0===s.length){e.next=36;break}throw new da("Subscription failed",fr);case 36:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribePeersOnlineStatus",value:function(){var e=J(w.mark((function e(t){var n,r,i,o,a;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new K("The client is not logged in",bl);case 2:if(void 0!==this.session){e.next=4;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&0!==t.length){e.next=6;break}throw new I("Invalid arguments: peerIds",kg);case 6:n=0;case 7:if(!(n<t.length)){e.next=14;break}if(za(r=t[n])){e.next=11;break}throw new I(["subscribePeersOnlineStatus peer id %s is invalid",r],kg);case 11:n++,e.next=7;break;case 14:if(!(512<t.length)){e.next=16;break}throw new ib("Unsubscribed peers overflows",gr);case 16:for(i=t&&t.length?vk(t):[],this.session.requestUnsubscribePeersOnlineStatus(i),o=0;o<i.length;o++)a=i[o],delete this.subscribedPeerStatusCache[a];case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryPeersBySubscriptionOption",value:function(){var e=J(w.mark((function e(t){return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===T.CONNECTED){e.next=2;break}throw new K("The client is not logged in",bl);case 2:if(t!==S.PeerSubscriptionOption.ONLINE_STATUS){e.next=4;break}return e.abrupt("return",Object.keys(this.subscribedPeerStatusCache));case 4:throw new I("Subscription option not supported",kg);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createMessage",value:function(e){return"IMAGE"===e.messageType?ua({width:0,height:0,fileName:"",description:"",thumbnail:new Blob,thumbnailWidth:0,thumbnailHeight:0,size:0},e):"FILE"===e.messageType?ua({fileName:"",description:"",thumbnail:new Blob,size:0},e):e}},{key:"downloadMedia",value:function(){var e=J(w.mark((function e(t){var n,r,i,o,a,s,c,u,l,d,h,f,p,v,g=this,m=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<m.length&&void 0!==m[1]?m[1]:{},"string"==typeof t){e.next=3;break}throw new I("invalid mediaId format",cl);case 3:if(e.prev=3,r=t.split("z"),i=ra(r,3),o=i[0],a=i[1],s=i[2],c=o.slice(1,65),u=bD(c),l=parseInt(o.slice(65),10),d=parseInt(a,10),h=parseInt(s,10),!(Number.isNaN(l)||Number.isNaN(d)||Number.isNaN(h))){e.next=12;break}throw new I("Invalid mediaId content",cl);case 12:e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(3),!sa(e.t0)){e.next=18;break}throw e.t0;case 18:throw new I("parse mediaId failure",{code:cl,originalError:e.t0});case 19:if(this.connectionState===T.CONNECTED){e.next=21;break}throw new K("The client is not logged in, cannot download",CA);case 21:if(void 0!==this.session){e.next=23;break}throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});case 23:return f=this.mediaTaskManager.addDownloadTask({unit:d,zone:l,hashHexStr:c,size:h},(function(){if(void 0===g.session)throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});return g.session.requestFileDownloadIndexGet({hash:u,zone:l,unit:d,size:h}).toPromise()}),n),e.next=26,this.mediaTaskManager.waitMediaTask(f);case 26:return p=e.sent,v=p.payload,e.abrupt("return",v);case 29:case"end":return e.stop()}}),e,this,[[3,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createMediaMessageByUploading",value:function(){var e=J(w.mark((function e(t){var n,r,i,o,a,s,c,u,l,d,h,f,p,v,g,m,y,b,_,E,S,x,R,k,O=this,C=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<C.length&&void 0!==C[2]?C[2]:{},yd(n=1<C.length&&void 0!==C[1]?C[1]:{})){e.next=4;break}throw new I("Invalid params",wf);case 4:if(i="thumbnailWidth"in n||"thumbnailHeight"in n||"width"in n||"height"in n,o=n.messageType,a=void 0===o?i?"IMAGE":"FILE":o,s=n.description,c=void 0===s?"":s,u=n.fileName,l=void 0===u?"":u,d=n.thumbnail,"string"==typeof n.messageType&&"string"==typeof c&&"string"==typeof l&&(Pm(d)||void 0===d)&&Pm(t)){e.next=8;break}throw new I("Invalid message params type",wf);case 8:if(!i||"FILE"!==a){e.next=10;break}throw new I("Invalid message params, unexpected field in RtmFileMessage",wf);case 10:if(!(33554432<(h=t.size))){e.next=13;break}throw new ib("The payload size overflow 32 MB",wA);case 13:return e.next=15,Ji(t);case 15:return f=e.sent,e.next=18,aD(f);case 18:if(p=e.sent,this.connectionState===T.CONNECTED){e.next=21;break}throw new K("The client is not logged in",yA);case 21:if("IMAGE"!==a){e.next=29;break}return e.next=24,Xt(n,f);case 24:v=e.sent,g=v.height,m=v.width,y=v.thumbnailWidth,b=v.thumbnailHeight;case 29:return _=this.mediaTaskManager.addUploadTask({file:new Uint8Array(f),hash:p},(function(){if(void 0===O.session)throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});return O.session.fetchFileUploadIndexGet({hash:p,size:h})}),(function(e,t){if(void 0===O.session)throw new Fa({SESSION_NOT_FOUND:"Failed to get session of the client"});return O.session.requestFileUploadIndexSet({hash:p,unit:e,servers:t}).toPromise()}),r),e.next=32,this.mediaTaskManager.waitMediaTask(_);case 32:if(E=e.sent,S=E.zone,x=E.retUnit,"IMAGE"!==a){e.next=38;break}return R={height:g,width:m,fileName:l,size:h,description:c,thumbnail:d,messageType:a,thumbnailWidth:y,thumbnailHeight:b,mediaId:"0".concat($r(p)).concat(S,"z").concat(x,"z").concat(h,"z").concat(g,"z").concat(m)},e.abrupt("return",R);case 38:return k={fileName:l,size:h,description:c,mediaId:"0".concat($r(p)).concat(S,"z").concat(x,"z").concat(h),thumbnail:d,messageType:a},e.abrupt("return",k);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginImpl",value:function(){var e=J(w.mark((function e(t){var n,r,i,o,a=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.uid,r=t.instanceId,!(void 0!==this.lastLoginTime&&500>Date.now()-this.lastLoginTime)){e.next=4;break}throw new rC(["The frequency of login exceeded the limit of %d queries per second",2],mA);case 4:if(this.connectionState===T.DISCONNECTED){e.next=6;break}throw new K("The SDK is either logging in or has logged in the Agora RTM system",kA);case 6:e.prev=6,this.context.uid=n,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(6),new I(["The %s in the arguments is invalid",Object.keys({uid:n})[0]],Jh);case 13:return this.onConnectionStateChanged(T.CONNECTING,Eb.LOGIN),this.session=i=new ls(this.context,new Yr(this.context,this.logger,!1),r,this.logger),o=function(){a.connectionState===T.CONNECTED&&(a.onConnectionStateChanged(T.RECONNECTING,Eb.INTERRUPTED),a.session)&&a.session.once("userJoined",(function(){a.onConnectionStateChanged(T.CONNECTED,Eb.LOGIN_SUCCESS)}))},i.on("connectionLost",o),i.on("tokenExpired",(function(){a.emit("TokenExpired")})),i.once("userDrop",this.userDropHandler),this.session.on("peerTextMessage",(function(e){a.emit("MessageFromPeer",{text:e.text,messageType:S.MessageType.TEXT},e.peerId,e.properties)})),this.session.on("peerMediaMessage",(function(e){var t=e.peerId,n=e.properties,r=e.messageType;e=e.details,"FILE"===r?a.emit("MessageFromPeer",{messageType:S.MessageType.FILE,size:parseInt(pa(e.media_size),10),description:pa(e.media_description),fileName:pa(e.media_filename),mediaId:pa(e.media_id),thumbnail:new Blob([e.media_thumbnail])},t,n):"IMAGE"===r&&a.emit("MessageFromPeer",{messageType:S.MessageType.IMAGE,size:parseInt(pa(e.media_size),10),description:pa(e.media_description),fileName:pa(e.media_filename),mediaId:pa(e.media_id),thumbnail:new Blob([e.media_thumbnail]),height:parseInt(pa(e.media_height),10),width:parseInt(pa(e.media_width),10),thumbnailHeight:parseInt(pa(e.media_thumbnailheight),10),thumbnailWidth:parseInt(pa(e.media_thumbnailwidth),10)},t,n)})),this.session.on("peerRawMessage",(function(e){a.emit("MessageFromPeer",{rawMessage:e.raw,description:e.desc,messageType:S.MessageType.RAW},e.peerId,e.properties)})),i.on("instanceChanged",(function(e){return r=e})),i.on("peerOnlineStatusChanged",(function(e){var t=e.instance.toString()+e.state,n=a.peerStatusSeqLru.get(t);!n||e.seq.greaterThan(n)?(a.peerStatusSeqLru.set(t,e.seq),e.state!==a.subscribedPeerStatusCache[e.peerId]&&a.emit("PeersOnlineStatusChanged",m({},e.peerId,e.state)),a.subscribedPeerStatusCache[e.peerId]=e.state,clearTimeout(a.peerUnreachableTimers[t]),e.state===S.PeerOnlineState.UNREACHABLE&&(a.peerUnreachableTimers[t]=setTimeout((function(){a.subscribedPeerStatusCache[e.peerId]===S.PeerOnlineState.UNREACHABLE&&(a.subscribedPeerStatusCache[e.peerId]=S.PeerOnlineState.ONLINE,a.emit("PeersOnlineStatusChanged",m({},e.peerId,S.PeerOnlineState.ONLINE)))}),3e4))):a.log("peerOnlineStatusChanged dedup for %s, %d",t,e.seq.toNumber())})),i.on("invitationMessage",this.invitationManager.invitationMessageHandler.bind(this.invitationManager)),i.on("channelAttributesUpdated",(function(e){var t=e.channelId;e=e.attributeMaps;for(var n={},r=0;r<e.length;r++){var i=e[r],o=i.key,s=i.ms,c=i.value;if(i=i.origin,"string"!=typeof o||!U.isLong(s)||"string"!=typeof c||!za(i))break;n[o]=new Blob([c]).size}a.channelAttributesCacheLru.set(t,n)})),i.on("userJoined",(function(e){if(0!==Object.keys(a.attributes).length){if(void 0===a.session)return;a.session.requestSetLocalUserAttributes(a.attributes,e).toPromise()}if(0!==a.attributeDrafts.size)for(var t=function(t,n){var r=(t=n[t]).attribute;t.promise.then((function(){void 0!==a.session&&a.session.requestSetLocalUserAttributes(r,e).toPromise()}))},n=0,r=Array.from(a.attributeDrafts);n<r.length;n++)t(n,r);0!==Object.keys(a.subscribedPeerStatusCache).length&&i.requestSubscribePeersOnlineStatus(Object.keys(a.subscribedPeerStatusCache))})),this.lastLoginTime=Date.now(),e.prev=29,e.next=32,i.loginHandler().toPromise();case 32:this.mediaTaskManager.setAuthInfo({ticket:i.connection.curOpenSockets.filter((function(e){return void 0!==e}))[0].ticket,instance:i.instanceId,useNewDomain:.5<=Math.random(),loginOpt:i.userJoinOptions.toLong()}),e.next=44;break;case 35:if(e.prev=35,e.t1=e.catch(29),!Sa(e.t1)){e.next=40;break}throw this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGIN_TIMEOUT),new db(Yd(this.name,"login",2e4),lA);case 40:if(this.onConnectionStateChanged(T.DISCONNECTED,Eb.LOGIN_FAILURE),!sa(e.t1)){e.next=43;break}throw e.t1;case 43:throw new da("Login failure",{code:Zq,originalError:e.t1});case 44:this.onConnectionStateChanged(T.CONNECTED,Eb.LOGIN_SUCCESS);case 45:case"end":return e.stop()}}),e,this,[[6,10],[29,35]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onConnectionStateChanged",value:function(e,t){var n,r=this;e===T.RECONNECTING&&(this.reconnId+=1),eb("ConnectionStateChange",{elapse:fb(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),newState:os[e],oldState:os[this.connectionState],reason:qD[t],sid:Xa(this.session&&this.session.instanceId||U.fromNumber(0)),userId:this.context.uid,reconnId:this.reconnId},null!==(n=this.context.config.enableCloudProxy)&&void 0!==n&&n),this.connectionState===T.RECONNECTING&&e===T.CONNECTED&&(0!==Object.keys(this.subscribedPeerStatusCache).length&&void 0!==this.session&&this.session.requestPeersOnlineStatus(Object.keys(this.subscribedPeerStatusCache)).pipe(ba((function(e){return uc(Jk(e.userInfos,"account"),(function(e){return!!e.ts}))}))).subscribe((function(e){e=uc(e,(function(e,t){return e=e?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE,r.subscribedPeerStatusCache[t]=e})),r.emit("PeersOnlineStatusChanged",e)})),this.internalEmitter.emit("RECONNECTED")),this.connectionState=e,e!==T.ABORTED&&e!==T.DISCONNECTED||(this.reconnId=0,this.attributes={},this.session&&(this.session.removeAllListeners(),this.session.joinedChannels.clear(),this.session.msgDedupLru.empty(),this.session.dialogueSequenceLru.empty(),this.session.dialPendingMsgSubjectMap.clear()),this.session=void 0,this.channelAttributesCacheLru.empty(),this.peerStatusSeqLru.empty(),this.peerUnreachableTimers={},this.subscribedPeerStatusCache={},this.attributeDrafts.clear(),this.context.token=void 0),this.mediaTaskManager.emit("connectionStateChanged",e),this.emit("ConnectionStateChanged",e,t)}}]),t}(tb()),fa(E.prototype,"renewToken",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"renewToken"),E.prototype),fa(E.prototype,"queryPeersOnlineStatus",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"queryPeersOnlineStatus"),E.prototype),fa(E.prototype,"getChannelMemberCount",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"getChannelMemberCount"),E.prototype),fa(E.prototype,"setLocalUserAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"setLocalUserAttributes"),E.prototype),fa(E.prototype,"setChannelAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"setChannelAttributes"),E.prototype),fa(E.prototype,"addOrUpdateLocalUserAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"addOrUpdateLocalUserAttributes"),E.prototype),fa(E.prototype,"addOrUpdateChannelAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"addOrUpdateChannelAttributes"),E.prototype),fa(E.prototype,"deleteLocalUserAttributesByKeys",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"deleteLocalUserAttributesByKeys"),E.prototype),fa(E.prototype,"deleteChannelAttributesByKeys",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"deleteChannelAttributesByKeys"),E.prototype),fa(E.prototype,"clearLocalUserAttributes",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"clearLocalUserAttributes"),E.prototype),fa(E.prototype,"clearChannelAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"clearChannelAttributes"),E.prototype),fa(E.prototype,"getUserAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"getUserAttributes"),E.prototype),fa(E.prototype,"getChannelAttributes",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"getChannelAttributes"),E.prototype),fa(E.prototype,"getChannelAttributesByKeys",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"getChannelAttributesByKeys"),E.prototype),fa(E.prototype,"getUserAttributesByKeys",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"getUserAttributesByKeys"),E.prototype),fa(E.prototype,"login",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"login"),E.prototype),fa(E.prototype,"logout",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"logout"),E.prototype),fa(E.prototype,"logoutSync",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"logoutSync"),E.prototype),fa(E.prototype,"sendMessageToPeer",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"sendMessageToPeer"),E.prototype),fa(E.prototype,"createChannel",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"createChannel"),E.prototype),fa(E.prototype,"createLocalInvitation",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"createLocalInvitation"),E.prototype),fa(E.prototype,"subscribePeersOnlineStatus",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"subscribePeersOnlineStatus"),E.prototype),fa(E.prototype,"unsubscribePeersOnlineStatus",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"unsubscribePeersOnlineStatus"),E.prototype),fa(E.prototype,"queryPeersBySubscriptionOption",[Ma],Object.getOwnPropertyDescriptor(E.prototype,"queryPeersBySubscriptionOption"),E.prototype),fa(E.prototype,"createMessage",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"createMessage"),E.prototype),fa(E.prototype,"downloadMedia",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"downloadMedia"),E.prototype),fa(E.prototype,"createMediaMessageByUploading",[Nb],Object.getOwnPropertyDescriptor(E.prototype,"createMediaMessageByUploading"),E.prototype),E),ps={LOG_FILTER_OFF:{error:!1,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_ERROR:{error:!0,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_WARNING:{error:!0,warn:!0,info:!1,track:!1,debug:!1},LOG_FILTER_INFO:{error:!0,warn:!0,info:!0,track:!1,debug:!1},LOG_FILTER_DEBUG:{error:!0,warn:!0,info:!0,track:!0,debug:!0}},qs={enableLogUpload:!1,logFilter:ps.LOG_FILTER_INFO,enableCloudProxy:!1},Zd=ua(ua({createInstance:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0;if(!/^[\dA-Za-z]{32}$/.test(e))throw new I(["The %s in the arguments is invalid",Object.keys({appId:e})[0]],Nq);var r=Object.keys(t).filter((function(e){return!(e in qs)}));if(0!==r.length)throw new I("Invalid RTM config: ".concat(r.join(", ")),Nq);var i=ua(ua({},qs),t);if(void 0!==n&&(!Array.isArray(n)||0===n.length))throw new I("Invalid area config");if(null!=n){if(!n.every((function(e){return e in S.LegacyAreaCode})))throw new I("Invalid area codes: ".concat(n.filter((function(e){return!(e in S)})).join(", ")));M=xe(n.map((function(e){return zC[e]})))}n=jl=Ya.__global_unique_id__=(Ya.__global_unique_id__||0)+1;var o=DC(i);r=EC(i);var a=FC(i),s=GC(n,i),c=Tr(n,i),u=c("RTM:DEBUG","<Entry> ");return Mr.rtmConfig=i,o("The Agora RTM Web SDK version is %s","1.4.3-203"),t.enableCloudProxy&&o("RTM cloud proxy enabled"),t.enableLogUpload&&o("Log upload enabled"),M&&u("Area is set to %s",Array.from(M.CODES).map((function(e){return xf(F).find((function(t){return F[t]===e}))})).join(", ")),u("Creating an RtmClient instance"),u('The Git commit ID is "'.concat("v1.4.3-17-g1e27aa38",'"')),u("The App ID is %s",Um(e,4,10,"*".repeat(6))),o("The process ID is %s",gg),u("The build is %s","v1.4.3-17-g1e27aa38"),u("NODE_ENV is %s","production"),new rD(e,{genLogger:c,genTracker:s,info:o,warn:r,logError:a,loggerId:n},i,(function(e){for(var t=0,n=xf(e);t<n.length;t++){var r=n[t];try{var a=e[r];null!=a&&(e.enableCloudProxy&&o("RTM cloud proxy enabled"),e.enableLogUpload&&o("Log upload enabled"),i[r]=a)}catch(e){throw new I(["The %s in the arguments is invalid",r],void 0)}}}))},BUILD:"v1.4.3-17-g1e27aa38",VERSION:"1.4.3-203",END_CALL_PREFIX:"AgoraRTMLegacyEndcallCompatibleMessagePrefix",processId:gg,ConnectionChangeReason:S.ConnectionChangeReason,ConnectionState:S.ConnectionState,LocalInvitationFailureReason:S.LocalInvitationFailureReason,LocalInvitationState:S.LocalInvitationState,RemoteInvitationFailureReason:S.RemoteInvitationFailureReason,RemoteInvitationState:S.RemoteInvitationState,MessageType:S.MessageType,PeerOnlineState:S.PeerOnlineState,PeerSubscriptionOption:S.PeerSubscriptionOption},ps),{},{setParameter:function(e,t){Object.keys(Nc).includes(e)&&(Nc[e]=t)},getParameter:function(e){return Nc[e]},setArea:function(e){var t=e.areaCodes;if(e=e.excludedArea,!Array.isArray(t)||0===t.length||!t.every((function(e){return e in S.AreaCode})))throw new I("Invalid area config");if(void 0!==e&&e===S.AreaCode.GLOBAL)throw new I("Excluded area cannot be global");if(void 0===e)M=xe(t.map((function(e){return F[e]})));else{if(t.includes(e))throw new I("Excluded area cannot be in areaCodes");if(!(e in F))throw new I("Invalid excludedArea:",e);M=bu({areas:t.map((function(e){return F[e]})),excludedArea:F[e]})}}});return Zd},module.exports=t()},1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},9948:function(e){"use strict";var t=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)};var n="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?c((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function i(e,t,n){return e.concat(t).map((function(e){return r(e,n)}))}function o(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function a(e,t){try{return t in e}catch(n){return!1}}function s(e,t,n){var i={};return n.isMergeableObject(e)&&o(e).forEach((function(t){i[t]=r(e[t],n)})),o(t).forEach((function(o){(function(e,t){return a(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(a(e,o)&&n.isMergeableObject(t[o])?i[o]=function(e,t){if(!t.customMerge)return c;var n=t.customMerge(e);return"function"===typeof n?n:c}(o,n)(e[o],t[o],n):i[o]=r(t[o],n))})),i}function c(e,n,o){(o=o||{}).arrayMerge=o.arrayMerge||i,o.isMergeableObject=o.isMergeableObject||t,o.cloneUnlessOtherwiseSpecified=r;var a=Array.isArray(n);return a===Array.isArray(e)?a?o.arrayMerge(e,n,o):s(e,n,o):r(n,o)}c.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return c(e,n,t)}),{})};var u=c;e.exports=u},2244:function(e,t,n){var r=n(7447),i=n(8051).each;function o(e,t){this.query=e,this.isUnconditional=t,this.handlers=[],this.mql=window.matchMedia(e);var n=this;this.listener=function(e){n.mql=e.currentTarget||e,n.assess()},this.mql.addListener(this.listener)}o.prototype={constuctor:o,addHandler:function(e){var t=new r(e);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(e){var t=this.handlers;i(t,(function(n,r){if(n.equals(e))return n.destroy(),!t.splice(r,1)}))},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){i(this.handlers,(function(e){e.destroy()})),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var e=this.matches()?"on":"off";i(this.handlers,(function(t){t[e]()}))}},e.exports=o},4e3:function(e,t,n){var r=n(2244),i=n(8051),o=i.each,a=i.isFunction,s=i.isArray;function c(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}c.prototype={constructor:c,register:function(e,t,n){var i=this.queries,c=n&&this.browserIsIncapable;return i[e]||(i[e]=new r(e,c)),a(t)&&(t={match:t}),s(t)||(t=[t]),o(t,(function(t){a(t)&&(t={match:t}),i[e].addHandler(t)})),this},unregister:function(e,t){var n=this.queries[e];return n&&(t?n.removeHandler(t):(n.clear(),delete this.queries[e])),this}},e.exports=c},7447:function(e){function t(e){this.options=e,!e.deferSetup&&this.setup()}t.prototype={constructor:t,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},e.exports=t},8051:function(e){e.exports={isFunction:function(e){return"function"===typeof e},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},each:function(e,t){for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);}}},8153:function(e,t,n){var r=n(4e3);e.exports=new r},5477:function(e,t,n){var r=n(2806),i=function(e){var t="",n=Object.keys(e);return n.forEach((function(i,o){var a=e[i];(function(e){return/[height|width]$/.test(e)})(i=r(i))&&"number"===typeof a&&(a+="px"),t+=!0===a?i:!1===a?"not "+i:"("+i+": "+a+")",o<n.length-1&&(t+=" and ")})),t};e.exports=function(e){var t="";return"string"===typeof e?e:e instanceof Array?(e.forEach((function(n,r){t+=i(n),r<e.length-1&&(t+=", ")})),t):i(e)}},5102:function(e){function t(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function n(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,r,i){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"===typeof r&&(i=r,r={}),r=r||{},i=i||function(){},a.type=r.type||"text/javascript",a.charset=r.charset||"utf8",a.async=!("async"in r)||!!r.async,a.src=e,r.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(a,r.attrs),r.text&&(a.text=""+r.text),("onload"in a?t:n)(a,i),a.onload||t(a,i),o.appendChild(a)}},5095:function(e,t,n){var r=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,h=l||d||Function("return this")(),f=Object.prototype.toString,p=Math.max,v=Math.min,g=function(){return h.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==i}(e))return r;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):a.test(e)?r:+e}e.exports=function(e,t,n){var r,i,o,a,s,c,u=0,l=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function b(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-u>=o}function _(){var e=g();if(b(e))return E(e);s=setTimeout(_,function(e){var n=t-(e-c);return d?v(n,o-(e-u)):n}(e))}function E(e){return s=void 0,h&&r?f(e):(r=i=void 0,a)}function S(){var e=g(),n=b(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return function(e){return u=e,s=setTimeout(_,t),l?f(e):a}(c);if(d)return s=setTimeout(_,t),f(c)}return void 0===s&&(s=setTimeout(_,t)),a}return t=y(t)||0,m(n)&&(l=!!n.leading,o=(d="maxWait"in n)?p(y(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),S.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=i=s=void 0},S.flush=function(){return void 0===s?a:E(g())},S}},5781:function(e,t,n){"use strict";n.r(t);var r=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function i(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(i=e[n],o=t[n],!(i===o||r(i)&&r(o)))return!1;var i,o;return!0}t.default=function(e,t){var n;void 0===t&&(t=i);var r,o=[],a=!1;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return a&&n===this&&t(i,o)||(r=e.apply(this,i),a=!0,n=this,o=i),r}}},9147:function(e,t,n){!function(e,t){"use strict";var n=function(){function e(e){e&&Object.assign(this,e)}return e}(),r=function(){function e(e,n){this.el=e,this.ngZone=n,this.onAddressChange=new t.EventEmitter}return e.prototype.ngAfterViewInit=function(){this.options||(this.options=new n),this.initialize()},e.prototype.isGoogleLibExists=function(){return!(!google||!google.maps||!google.maps.places)},e.prototype.initialize=function(){var e=this;if(!this.isGoogleLibExists())throw new Error("Google maps library can not be found");if(this.autocomplete=new google.maps.places.Autocomplete(this.el.nativeElement,this.options),!this.autocomplete)throw new Error("Autocomplete is not initialized");null!=!this.autocomplete.addListener&&(this.eventListener=this.autocomplete.addListener("place_changed",(function(){e.handleChangeEvent()}))),this.el.nativeElement.addEventListener("keydown",(function(t){t.key&&"enter"==t.key.toLowerCase()&&t.target===e.el.nativeElement&&(t.preventDefault(),t.stopPropagation())})),window&&window.navigator&&window.navigator.userAgent&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&setTimeout((function(){var e=document.getElementsByClassName("pac-container");if(e){var t=Array.from(e);if(t)for(var n=0,r=t;n<r.length;n++){var i=r[n];i&&i.addEventListener("touchend",(function(e){e.stopImmediatePropagation()}))}}}),500)},e.prototype.reset=function(){this.autocomplete.setComponentRestrictions(this.options.componentRestrictions),this.autocomplete.setTypes(this.options.types)},e.prototype.handleChangeEvent=function(){var e=this;this.ngZone.run((function(){e.place=e.autocomplete.getPlace(),e.place&&e.onAddressChange.emit(e.place)}))},e.decorators=[{type:t.Directive,args:[{selector:"[ngx-google-places-autocomplete]",exportAs:"ngx-places"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.NgZone}]},e.propDecorators={options:[{type:t.Input,args:["options"]}],onAddressChange:[{type:t.Output}]},e}(),i=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[r],exports:[r]}]}],e.ctorParameters=function(){return[]},e}();e.GooglePlaceModule=i,e.GooglePlaceDirective=r,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(6215))},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(t,n,r){"use strict";var i=r(2791),o=r(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,c={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(c[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},v={};function g(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(v,e)||!h.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var E=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),k=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var M,U=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var c="\n"+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=a&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function G(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case w:return"Portal";case I:return"Profiler";case T:return"StrictMode";case C:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case R:return(e._context.displayName||"Context")+".Provider";case O:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=z(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function $(e,t){Q(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,n):t.hasOwnProperty("defaultValue")&&te(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function te(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ne=Array.isArray;function re(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(ne(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ce(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ce(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,de,he=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ee=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,xe=null,Te=null;function Ie(e){if(e=_i(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=Si(t),we(e.stateNode,e.type,t))}}function Re(e){xe?Te?Te.push(e):Te=[e]:xe=e}function ke(){if(xe){var e=xe,t=Te;if(Te=xe=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Oe(e,t){return e(t)}function Ce(){}var Ae=!1;function Ne(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Oe(e,t,n)}finally{Ae=!1,(null!==xe||null!==Te)&&(Ce(),ke())}}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=Si(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(d)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(de){De=!1}function Le(e,t,n,r,i,o,a,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var Me=!1,Ue=null,Ve=!1,Fe=null,Be={onError:function(e){Me=!0,Ue=e}};function Ge(e,t,n,r,i,o,a,s,c){Me=!1,Ue=null,Le.apply(Be,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(a(188))}function ze(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,c=i.child;c;){if(c===n){s=!0,n=i,r=o;break}if(c===r){s=!0,r=i,n=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===n){s=!0,n=o,r=i;break}if(c===r){s=!0,r=o,n=i;break}c=c.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ye=o.unstable_scheduleCallback,Ze=o.unstable_cancelCallback,Je=o.unstable_shouldYield,Xe=o.unstable_requestPaint,Qe=o.unstable_now,$e=o.unstable_getCurrentPriorityLevel,et=o.unstable_ImmediatePriority,tt=o.unstable_UserBlockingPriority,nt=o.unstable_NormalPriority,rt=o.unstable_LowPriority,it=o.unstable_IdlePriority,ot=null,at=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ct(e)/ut|0)|0},ct=Math.log,ut=Math.LN2;var lt=64,dt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=ht(s):0!==(o&=a)&&(r=ht(o))}else 0!==(a=n&~i)?r=ht(a):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function Et(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,wt,xt,Tt,It,Rt=!1,kt=[],Ot=null,Ct=null,At=null,Nt=new Map,jt=new Map,Dt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(t.pointerId)}}function Mt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=bi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void It(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ee=r,n.target.dispatchEvent(r),Ee=null,t.shift()}return!0}function Ft(e,t,n){Vt(e)&&n.delete(t)}function Bt(){Rt=!1,null!==Ot&&Vt(Ot)&&(Ot=null),null!==Ct&&Vt(Ct)&&(Ct=null),null!==At&&Vt(At)&&(At=null),Nt.forEach(Ft),jt.forEach(Ft)}function Gt(e,t){e.blockedOn===t&&(e.blockedOn=null,Rt||(Rt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Bt)))}function qt(e){function t(t){return Gt(t,e)}if(0<kt.length){Gt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ot&&Gt(Ot,e),null!==Ct&&Gt(Ct,e),null!==At&&Gt(At,e),Nt.forEach(t),jt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Dt.shift()}var Wt=E.ReactCurrentBatchConfig,Ht=!0;function zt(e,t,n,r){var i=_t,o=Wt.transition;Wt.transition=null;try{_t=1,Yt(e,t,n,r)}finally{_t=i,Wt.transition=o}}function Kt(e,t,n,r){var i=_t,o=Wt.transition;Wt.transition=null;try{_t=4,Yt(e,t,n,r)}finally{_t=i,Wt.transition=o}}function Yt(e,t,n,r){if(Ht){var i=Jt(e,t,n,r);if(null===i)Hr(e,t,r,Zt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ot=Mt(Ot,e,t,n,r,i),!0;case"dragenter":return Ct=Mt(Ct,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nt.set(o,Mt(Nt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,jt.set(o,Mt(jt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var o=_i(i);if(null!==o&&St(o),null===(o=Jt(e,t,n,r))&&Hr(e,t,r,Zt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Zt=null;function Jt(e,t,n,r){if(Zt=null,null!==(e=bi(e=Se(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case et:return 1;case tt:return 4;case nt:case rt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Qt=null,$t=null,en=null;function tn(){if(en)return en;var e,t,n=$t,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function on(){return!1}function an(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:on,this.isPropagationStopped=on,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var sn,cn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(ln),hn=U({},ln,{view:0,detail:0}),fn=an(hn),pn=U({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(sn=e.screenX-un.screenX,cn=e.screenY-un.screenY):cn=sn=0,un=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),vn=an(pn),gn=an(U({},pn,{dataTransfer:0})),mn=an(U({},hn,{relatedTarget:0})),yn=an(U({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=U({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(bn),En=an(U({},ln,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function In(){return Tn}var Rn=U({},hn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=an(Rn),On=an(U({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(U({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),An=an(U({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=U({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=an(Nn),Dn=[9,13,27,32],Pn=d&&"CompositionEvent"in window,Ln=null;d&&"documentMode"in document&&(Ln=document.documentMode);var Mn=d&&"TextEvent"in window&&!Ln,Un=d&&(!Pn||Ln&&8<Ln&&11>=Ln),Vn=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function zn(e,t,n,r){Re(r),0<(t=Kr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Yn=null;function Zn(e){Vr(e,0)}function Jn(e){if(Y(Ei(e)))return e}function Xn(e,t){if("change"===e)return t}var Qn=!1;if(d){var $n;if(d){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"===typeof tr.oninput}$n=er}else $n=!1;Qn=$n&&(!document.documentMode||9<document.documentMode)}function nr(){Kn&&(Kn.detachEvent("onpropertychange",rr),Yn=Kn=null)}function rr(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];zn(t,Yn,e,Se(e)),Ne(Zn,t)}}function ir(e,t,n){"focusin"===e?(nr(),Yn=n,(Kn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function ar(e,t){if("click"===e)return Jn(t)}function sr(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!cr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=dr(n,o);var a=dr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=d&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,br=null,_r=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==mr||mr!==Z(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&ur(br,r)||(br=r,0<(r=Kr(yr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function Sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},xr={},Tr={};function Ir(e){if(xr[e])return xr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return xr[e]=n[t];return e}d&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Rr=Ir("animationend"),kr=Ir("animationiteration"),Or=Ir("animationstart"),Cr=Ir("transitionend"),Ar=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){Ar.set(e,t),u(t,[e])}for(var Dr=0;Dr<Nr.length;Dr++){var Pr=Nr[Dr];jr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}jr(Rr,"onAnimationEnd"),jr(kr,"onAnimationIteration"),jr(Or,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(Cr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,c,u){if(Ge.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Ue;Me=!1,Ue=null,Ve||(Ve=!0,Fe=l)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;Ur(i,s,u),o=c}else for(a=0;a<r.length;a++){if(c=(s=r[a]).instance,u=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;Ur(i,s,u),o=c}}}if(Ve)throw e=Fe,Ve=!1,Fe=null,e}function Fr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Gr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Gr]){e[Gr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Gr]||(t[Gr]=!0,Br("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Xt(t)){case 1:var i=zt;break;case 4:i=Kt;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&((c=a.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=bi(s)))return;if(5===(c=a.tag)||6===c){r=o=a;continue e}s=s.parentNode}}r=r.return}Ne((function(){var r=o,i=Se(n),a=[];e:{var s=Ar.get(e);if(void 0!==s){var c=dn,u=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":c=kn;break;case"focusin":u="focus",c=mn;break;case"focusout":u="blur",c=mn;break;case"beforeblur":case"afterblur":c=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Cn;break;case Rr:case kr:case Or:c=yn;break;case Cr:c=An;break;case"scroll":c=fn;break;case"wheel":c=jn;break;case"copy":case"cut":case"paste":c=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=On}var l=0!==(4&t),d=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var f,p=r;null!==p;){var v=(f=p).stateNode;if(5===f.tag&&null!==v&&(f=v,null!==h&&(null!=(v=je(p,h))&&l.push(zr(p,v,f)))),d)break;p=p.return}0<l.length&&(s=new c(s,u,null,n,i),a.push({event:s,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Ee||!(u=n.relatedTarget||n.fromElement)||!bi(u)&&!u[vi])&&(c||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?bi(u):null)&&(u!==(d=qe(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=r),c!==u)){if(l=vn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=On,v="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==c?s:Ei(c),f=null==u?s:Ei(u),(s=new l(v,p+"leave",c,n,i)).target=d,s.relatedTarget=f,v=null,bi(i)===r&&((l=new l(h,p+"enter",u,n,i)).target=f,l.relatedTarget=d,v=l),d=v,c&&u)e:{for(h=u,p=0,f=l=c;f;f=Yr(f))p++;for(f=0,v=h;v;v=Yr(v))f++;for(;0<p-f;)l=Yr(l),p--;for(;0<f-p;)h=Yr(h),f--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Yr(l),h=Yr(h)}l=null}else l=null;null!==c&&Zr(a,s,c,l,!1),null!==u&&null!==d&&Zr(a,d,u,l,!0)}if("select"===(c=(s=r?Ei(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var g=Xn;else if(Hn(s))if(Qn)g=sr;else{g=or;var m=ir}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?zn(a,g,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&te(s,"number",s.value)),m=r?Ei(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(mr=m,yr=r,br=null);break;case"focusout":br=yr=mr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Er(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":Er(a,n,i)}var y;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Un&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(y=tn()):($t="value"in(Qt=i)?Qt.value:Qt.textContent,qn=!0)),0<(m=Kr(r,b)).length&&(b=new En(b,e,null,n,i),a.push({event:b,listeners:m}),y?b.data=y:null!==(y=Gn(n))&&(b.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Gn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Vn);case"textInput":return(e=t.data)===Vn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Pn&&Bn(e,t)?(e=tn(),en=$t=Qt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Vr(a,t)}))}function zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=je(e,n))&&r.unshift(zr(e,o,i)),null!=(o=je(e,t))&&r.push(zr(e,o,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,c=s.alternate,u=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(c=je(n,o))&&a.unshift(zr(n,c,s)):i||null!=(c=je(n,o))&&a.push(zr(n,c,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Jr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function ei(){}var ti=null,ni=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ii="function"===typeof setTimeout?setTimeout:void 0,oi="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ci)}:ii;function ci(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,pi="__reactProps$"+hi,vi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function bi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[fi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[fi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ei(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Si(e){return e[pi]||null}var wi=[],xi=-1;function Ti(e){return{current:e}}function Ii(e){0>xi||(e.current=wi[xi],wi[xi]=null,xi--)}function Ri(e,t){xi++,wi[xi]=e.current,e.current=t}var ki={},Oi=Ti(ki),Ci=Ti(!1),Ai=ki;function Ni(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ji(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ii(Ci),Ii(Oi)}function Pi(e,t,n){if(Oi.current!==ki)throw Error(a(168));Ri(Oi,t),Ri(Ci,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,W(e)||"Unknown",i));return U({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ai=Oi.current,Ri(Oi,e),Ri(Ci,Ci.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ci),Ii(Oi),Ri(Oi,e)):Ii(Ci),Ri(Ci,n)}var Vi=null,Fi=!1,Bi=!1;function Gi(e){null===Vi?Vi=[e]:Vi.push(e)}function qi(){if(!Bi&&null!==Vi){Bi=!0;var t=0,n=_t;try{var r=Vi;for(_t=1;t<r.length;t++){var i=r[t];do{i=i(!0)}while(null!==i)}Vi=null,Fi=!1}catch(e){throw null!==Vi&&(Vi=Vi.slice(t+1)),Ye(et,qi),e}finally{_t=n,Bi=!1}}return null}var Wi=[],Hi=0,zi=null,Ki=0,Yi=[],Zi=0,Ji=null,Xi=1,Qi="";function $i(e,t){Wi[Hi++]=Ki,Wi[Hi++]=zi,zi=e,Ki=t}function eo(e,t,n){Yi[Zi++]=Xi,Yi[Zi++]=Qi,Yi[Zi++]=Ji,Ji=e;var r=Xi;e=Qi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-st(t)+i|n<<i|r,Qi=o+e}else Xi=1<<o|n<<i|r,Qi=e}function to(e){null!==e.return&&($i(e,1),eo(e,1,0))}function no(e){for(;e===zi;)zi=Wi[--Hi],Wi[Hi]=null,Ki=Wi[--Hi],Wi[Hi]=null;for(;e===Ji;)Ji=Yi[--Zi],Yi[Zi]=null,Qi=Yi[--Zi],Yi[Zi]=null,Xi=Yi[--Zi],Yi[Zi]=null}var ro=null,io=null,oo=!1,ao=null;function so(e,t){var n=ju(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function co(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ro=e,io=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ro=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Xi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=ju(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ro=e,io=null,!0);default:return!1}}function uo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(oo){var t=io;if(t){var n=t;if(!co(e,t)){if(uo(e))throw Error(a(418));t=li(n.nextSibling);var r=ro;t&&co(e,t)?so(r,n):(e.flags=-4097&e.flags|2,oo=!1,ro=e)}}else{if(uo(e))throw Error(a(418));e.flags=-4097&e.flags|2,oo=!1,ro=e}}}function ho(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ro=e}function fo(e){if(e!==ro)return!1;if(!oo)return ho(e),oo=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=io)){if(uo(e))throw po(),Error(a(418));for(;t;)so(e,t),t=li(t.nextSibling)}if(ho(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=ro?li(e.stateNode.nextSibling):null;return!0}function po(){for(var e=io;e;)e=li(e.nextSibling)}function vo(){io=ro=null,oo=!1}function go(e){null===ao?ao=[e]:ao.push(e)}var mo=E.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var bo=Ti(null),_o=null,Eo=null,So=null;function wo(){So=Eo=_o=null}function xo(e){var t=bo.current;Ii(bo),e._currentValue=t}function To(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Io(e,t){_o=e,So=Eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Es=!0),e.firstContext=null)}function Ro(e){var t=e._currentValue;if(So!==e)if(e={context:e,memoizedValue:t,next:null},null===Eo){if(null===_o)throw Error(a(308));Eo=e,_o.dependencies={lanes:0,firstContext:e}}else Eo=Eo.next=e;return t}var ko=null;function Oo(e){null===ko?ko=[e]:ko.push(e)}function Co(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Oo(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ao(e,r)}function Ao(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var No=!1;function jo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Po(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ao(e,n)}return null===(i=r.interleaved)?(t.next=t,Oo(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ao(e,n)}function Mo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Uo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vo(e,t,n,r){var i=e.updateQueue;No=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var c=s,u=c.next;c.next=null,null===a?o=u:a.next=u,a=c;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==a&&(null===s?l.firstBaseUpdate=u:s.next=u,l.lastBaseUpdate=c))}if(null!==o){var d=i.baseState;for(a=0,l=u=c=null,s=o;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,f=n,v.tag){case 1:if("function"===typeof(p=v.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(f,d,h):p)||void 0===h)break e;d=U({},d,h);break e;case 2:No=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(u=l=f,c=d):l=l.next=f,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Uc|=a,e.lanes=a,e.memoizedState=d}}function Fo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Bo=(new i.Component).refs;function Go(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qo={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nu(),i=ru(e),o=Po(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(iu(t,e,i,r),Mo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nu(),i=ru(e),o=Po(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(iu(t,e,i,r),Mo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nu(),r=ru(e),i=Po(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Lo(e,i,r))&&(iu(t,e,r,n),Mo(t,e,r))}};function Wo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function Ho(e,t,n){var r=!1,i=ki,o=t.contextType;return"object"===typeof o&&null!==o?o=Ro(o):(i=ji(t)?Ai:Oi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):ki),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function zo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qo.enqueueReplaceState(t,t.state,null)}function Ko(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Bo,jo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Ro(o):(o=ji(t)?Ai:Oi.current,i.context=Ni(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Go(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qo.enqueueReplaceState(i,i.state,null),Vo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Bo&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Zo(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jo(e){return(0,e._init)(e._payload)}function Xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Vu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===x?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===j&&Jo(o)===t.type)?((r=i(t,n.props)).ref=Yo(e,t,n),r.return=e,r):((r=Lu(n.type,n.key,n.props,null,e.mode,r)).ref=Yo(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Mu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Lu(t.type,t.key,t.props,null,e.mode,n)).ref=Yo(e,null,t),n.return=e,n;case w:return(t=Fu(t,e.mode,n)).return=e,t;case j:return h(e,(0,t._init)(t._payload),n)}if(ne(t)||L(t))return(t=Mu(t,e.mode,n,null)).return=e,t;Zo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===i?u(e,t,n,r):null;case w:return n.key===i?l(e,t,n,r):null;case j:return f(e,t,(i=n._init)(n._payload),r)}if(ne(n)||L(n))return null!==i?null:d(e,t,n,r,null);Zo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case j:return p(e,t,n,(0,r._init)(r._payload),i)}if(ne(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);Zo(t,r)}return null}function v(i,a,s,c){for(var u=null,l=null,d=a,v=a=0,g=null;null!==d&&v<s.length;v++){d.index>v?(g=d,d=null):g=d.sibling;var m=f(i,d,s[v],c);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(i,d),a=o(m,a,v),null===l?u=m:l.sibling=m,l=m,d=g}if(v===s.length)return n(i,d),oo&&$i(i,v),u;if(null===d){for(;v<s.length;v++)null!==(d=h(i,s[v],c))&&(a=o(d,a,v),null===l?u=d:l.sibling=d,l=d);return oo&&$i(i,v),u}for(d=r(i,d);v<s.length;v++)null!==(g=p(d,i,v,s[v],c))&&(e&&null!==g.alternate&&d.delete(null===g.key?v:g.key),a=o(g,a,v),null===l?u=g:l.sibling=g,l=g);return e&&d.forEach((function(e){return t(i,e)})),oo&&$i(i,v),u}function g(i,s,c,u){var l=L(c);if("function"!==typeof l)throw Error(a(150));if(null==(c=l.call(c)))throw Error(a(151));for(var d=l=null,v=s,g=s=0,m=null,y=c.next();null!==v&&!y.done;g++,y=c.next()){v.index>g?(m=v,v=null):m=v.sibling;var b=f(i,v,y.value,u);if(null===b){null===v&&(v=m);break}e&&v&&null===b.alternate&&t(i,v),s=o(b,s,g),null===d?l=b:d.sibling=b,d=b,v=m}if(y.done)return n(i,v),oo&&$i(i,g),l;if(null===v){for(;!y.done;g++,y=c.next())null!==(y=h(i,y.value,u))&&(s=o(y,s,g),null===d?l=y:d.sibling=y,d=y);return oo&&$i(i,g),l}for(v=r(i,v);!y.done;g++,y=c.next())null!==(y=p(v,i,g,y.value,u))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=o(y,s,g),null===d?l=y:d.sibling=y,d=y);return e&&v.forEach((function(e){return t(i,e)})),oo&&$i(i,g),l}return function e(r,o,a,c){if("object"===typeof a&&null!==a&&a.type===x&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case S:e:{for(var u=a.key,l=o;null!==l;){if(l.key===u){if((u=a.type)===x){if(7===l.tag){n(r,l.sibling),(o=i(l,a.props.children)).return=r,r=o;break e}}else if(l.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===j&&Jo(u)===l.type){n(r,l.sibling),(o=i(l,a.props)).ref=Yo(r,l,a),o.return=r,r=o;break e}n(r,l);break}t(r,l),l=l.sibling}a.type===x?((o=Mu(a.props.children,r.mode,c,a.key)).return=r,r=o):((c=Lu(a.type,a.key,a.props,null,r.mode,c)).ref=Yo(r,o,a),c.return=r,r=c)}return s(r);case w:e:{for(l=a.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fu(a,r.mode,c)).return=r,r=o}return s(r);case j:return e(r,o,(l=a._init)(a._payload),c)}if(ne(a))return v(r,o,a,c);if(L(a))return g(r,o,a,c);Zo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Vu(a,r.mode,c)).return=r,r=o),s(r)):n(r,o)}}var Qo=Xo(!0),$o=Xo(!1),ea={},ta=Ti(ea),na=Ti(ea),ra=Ti(ea);function ia(e){if(e===ea)throw Error(a(174));return e}function oa(e,t){switch(Ri(ra,t),Ri(na,e),Ri(ta,ea),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(ta),Ri(ta,t)}function aa(){Ii(ta),Ii(na),Ii(ra)}function sa(e){ia(ra.current);var t=ia(ta.current),n=ue(t,e.type);t!==n&&(Ri(na,e),Ri(ta,n))}function ca(e){na.current===e&&(Ii(ta),Ii(na))}var ua=Ti(0);function la(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var da=[];function ha(){for(var e=0;e<da.length;e++)da[e]._workInProgressVersionPrimary=null;da.length=0}var fa=E.ReactCurrentDispatcher,pa=E.ReactCurrentBatchConfig,va=0,ga=null,ma=null,ya=null,ba=!1,_a=!1,Ea=0,Sa=0;function wa(){throw Error(a(321))}function xa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function Ta(e,t,n,r,i,o){if(va=o,ga=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fa.current=null===e||null===e.memoizedState?cs:us,e=n(r,i),_a){o=0;do{if(_a=!1,Ea=0,25<=o)throw Error(a(301));o+=1,ya=ma=null,t.updateQueue=null,fa.current=ls,e=n(r,i)}while(_a)}if(fa.current=ss,t=null!==ma&&null!==ma.next,va=0,ya=ma=ga=null,ba=!1,t)throw Error(a(300));return e}function Ia(){var e=0!==Ea;return Ea=0,e}function Ra(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?ga.memoizedState=ya=e:ya=ya.next=e,ya}function ka(){if(null===ma){var e=ga.alternate;e=null!==e?e.memoizedState:null}else e=ma.next;var t=null===ya?ga.memoizedState:ya.next;if(null!==t)ya=t,ma=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ma=e).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ya?ga.memoizedState=ya=e:ya=ya.next=e}return ya}function Oa(e,t){return"function"===typeof t?t(e):t}function Ca(e){var t=ka(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ma,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=s=null,u=null,l=o;do{var d=l.lane;if((va&d)===d)null!==u&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===u?(c=u=h,s=r):u=u.next=h,ga.lanes|=d,Uc|=d}l=l.next}while(null!==l&&l!==o);null===u?s=r:u.next=c,cr(r,t.memoizedState)||(Es=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,ga.lanes|=o,Uc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Aa(e){var t=ka(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);cr(o,t.memoizedState)||(Es=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Na(){}function ja(e,t){var n=ga,r=ka(),i=t(),o=!cr(r.memoizedState,i);if(o&&(r.memoizedState=i,Es=!0),r=r.queue,Ha(La.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ya&&1&ya.memoizedState.tag){if(n.flags|=2048,Fa(9,Pa.bind(null,n,r,i,t),void 0,null),null===Ac)throw Error(a(349));0!==(30&va)||Da(n,t,i)}return i}function Da(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ga.updateQueue)?(t={lastEffect:null,stores:null},ga.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Pa(e,t,n,r){t.value=n,t.getSnapshot=r,Ma(t)&&Ua(e)}function La(e,t,n){return n((function(){Ma(t)&&Ua(e)}))}function Ma(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cr(e,n)}catch(r){return!0}}function Ua(e){var t=Ao(e,1);null!==t&&iu(t,e,1,-1)}function Va(e){var t=Ra();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:e},t.queue=e,e=e.dispatch=rs.bind(null,ga,e),[t.memoizedState,e]}function Fa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ga.updateQueue)?(t={lastEffect:null,stores:null},ga.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ba(){return ka().memoizedState}function Ga(e,t,n,r){var i=Ra();ga.flags|=e,i.memoizedState=Fa(1|t,n,void 0,void 0===r?null:r)}function qa(e,t,n,r){var i=ka();r=void 0===r?null:r;var o=void 0;if(null!==ma){var a=ma.memoizedState;if(o=a.destroy,null!==r&&xa(r,a.deps))return void(i.memoizedState=Fa(t,n,o,r))}ga.flags|=e,i.memoizedState=Fa(1|t,n,o,r)}function Wa(e,t){return Ga(8390656,8,e,t)}function Ha(e,t){return qa(2048,8,e,t)}function za(e,t){return qa(4,2,e,t)}function Ka(e,t){return qa(4,4,e,t)}function Ya(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qa(4,4,Ya.bind(null,t,e),n)}function Ja(){}function Xa(e,t){var n=ka();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qa(e,t){var n=ka();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $a(e,t,n){return 0===(21&va)?(e.baseState&&(e.baseState=!1,Es=!0),e.memoizedState=n):(cr(n,t)||(n=gt(),ga.lanes|=n,Uc|=n,e.baseState=!0),t)}function es(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=pa.transition;pa.transition={};try{e(!1),t()}finally{_t=n,pa.transition=r}}function ts(){return ka().memoizedState}function ns(e,t,n){var r=ru(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},is(e))os(t,n);else if(null!==(n=Co(e,t,n,r))){iu(n,e,r,nu()),as(n,t,r)}}function rs(e,t,n){var r=ru(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(is(e))os(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,cr(s,a)){var c=t.interleaved;return null===c?(i.next=i,Oo(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Co(e,t,i,r))&&(iu(n,e,r,i=nu()),as(n,t,r))}}function is(e){var t=e.alternate;return e===ga||null!==t&&t===ga}function os(e,t){_a=ba=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var ss={readContext:Ro,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},cs={readContext:Ro,useCallback:function(e,t){return Ra().memoizedState=[e,void 0===t?null:t],e},useContext:Ro,useEffect:Wa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ga(4194308,4,Ya.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ga(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ga(4,2,e,t)},useMemo:function(e,t){var n=Ra();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ra();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ns.bind(null,ga,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ra().memoizedState=e},useState:Va,useDebugValue:Ja,useDeferredValue:function(e){return Ra().memoizedState=e},useTransition:function(){var e=Va(!1),t=e[0];return e=es.bind(null,e[1]),Ra().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ga,i=Ra();if(oo){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ac)throw Error(a(349));0!==(30&va)||Da(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Wa(La.bind(null,r,o,e),[e]),r.flags|=2048,Fa(9,Pa.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ra(),t=Ac.identifierPrefix;if(oo){var n=Qi;t=":"+t+"R"+(n=(Xi&~(1<<32-st(Xi)-1)).toString(32)+n),0<(n=Ea++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Sa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ro,useCallback:Xa,useContext:Ro,useEffect:Ha,useImperativeHandle:Za,useInsertionEffect:za,useLayoutEffect:Ka,useMemo:Qa,useReducer:Ca,useRef:Ba,useState:function(){return Ca(Oa)},useDebugValue:Ja,useDeferredValue:function(e){return $a(ka(),ma.memoizedState,e)},useTransition:function(){return[Ca(Oa)[0],ka().memoizedState]},useMutableSource:Na,useSyncExternalStore:ja,useId:ts,unstable_isNewReconciler:!1},ls={readContext:Ro,useCallback:Xa,useContext:Ro,useEffect:Ha,useImperativeHandle:Za,useInsertionEffect:za,useLayoutEffect:Ka,useMemo:Qa,useReducer:Aa,useRef:Ba,useState:function(){return Aa(Oa)},useDebugValue:Ja,useDeferredValue:function(e){var t=ka();return null===ma?t.memoizedState=e:$a(t,ma.memoizedState,e)},useTransition:function(){return[Aa(Oa)[0],ka().memoizedState]},useMutableSource:Na,useSyncExternalStore:ja,useId:ts,unstable_isNewReconciler:!1};function ds(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function vs(e,t,n){(n=Po(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zc||(zc=!0,Kc=r),fs(0,t)},n}function gs(e,t,n){(n=Po(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Yc?Yc=new Set([this]):Yc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ru.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Po(-1,1)).tag=2,Lo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _s=E.ReactCurrentOwner,Es=!1;function Ss(e,t,n,r){t.child=null===e?$o(t,null,n,r):Qo(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var o=t.ref;return Io(t,i),r=Ta(e,t,n,r,o,i),n=Ia(),null===e||Es?(oo&&n&&to(t),t.flags|=1,Ss(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function xs(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Du(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ts(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return zs(e,t,i)}return t.flags|=1,(e=Pu(o,r)).ref=t.ref,e.return=t,t.child=e}function Ts(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ur(o,r)&&e.ref===t.ref){if(Es=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,zs(e,t,i);0!==(131072&e.flags)&&(Es=!0)}}return ks(e,t,n,r,i)}function Is(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ri(Pc,Dc),Dc|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ri(Pc,Dc),Dc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ri(Pc,Dc),Dc|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ri(Pc,Dc),Dc|=r;return Ss(e,t,i,n),t.child}function Rs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ks(e,t,n,r,i){var o=ji(n)?Ai:Oi.current;return o=Ni(t,o),Io(t,i),n=Ta(e,t,n,r,o,i),r=Ia(),null===e||Es?(oo&&r&&to(t),t.flags|=1,Ss(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function Os(e,t,n,r,i){if(ji(n)){var o=!0;Mi(t)}else o=!1;if(Io(t,i),null===t.stateNode)Hs(e,t),Ho(t,n,r),Ko(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ro(u):u=Ni(t,u=ji(n)?Ai:Oi.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||c!==u)&&zo(t,a,r,u),No=!1;var h=t.memoizedState;a.state=h,Vo(t,r,a,i),c=t.memoizedState,s!==r||h!==c||Ci.current||No?("function"===typeof l&&(Go(t,n,l,r),c=t.memoizedState),(s=No||Wo(t,n,s,r,h,c,u))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Do(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:yo(t.type,s),a.props=u,d=t.pendingProps,h=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=Ro(c):c=Ni(t,c=ji(n)?Ai:Oi.current);var f=n.getDerivedStateFromProps;(l="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==c)&&zo(t,a,r,c),No=!1,h=t.memoizedState,a.state=h,Vo(t,r,a,i);var p=t.memoizedState;s!==d||h!==p||Ci.current||No?("function"===typeof f&&(Go(t,n,f,r),p=t.memoizedState),(u=No||Wo(t,n,u,r,h,p,c)||!1)?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cs(e,t,n,r,o,i)}function Cs(e,t,n,r,i,o){Rs(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Ui(t,n,!1),zs(e,t,o);r=t.stateNode,_s.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Qo(t,e.child,null,o),t.child=Qo(t,null,s,o)):Ss(e,t,s,o),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),oa(e,t.containerInfo)}function Ns(e,t,n,r,i){return vo(),go(i),t.flags|=256,Ss(e,t,n,r),t.child}var js,Ds,Ps,Ls,Ms={dehydrated:null,treeContext:null,retryLane:0};function Us(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vs(e,t,n){var r,i=t.pendingProps,o=ua.current,s=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ri(ua,1&o),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,s?(i=t.mode,s=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=c):s=Uu(c,i,0,null),e=Mu(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Us(n),t.memoizedState=Ms,e):Fs(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Uu({mode:"visible",children:r.children},i,0,null),(o=Mu(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Qo(t,e.child,null,s),t.child.memoizedState=Us(s),t.memoizedState=Ms,o);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Bs(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(c=0!==(s&e.childLanes),Es||c){if(null!==(r=Ac)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ao(e,i),iu(r,e,i,-1))}return mu(),Bs(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ou.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,io=li(i.nextSibling),ro=t,oo=!0,ao=null,null!==e&&(Yi[Zi++]=Xi,Yi[Zi++]=Qi,Yi[Zi++]=Ji,Xi=e.id,Qi=e.overflow,Ji=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,o,n);if(s){s=i.fallback,c=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Pu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Pu(r,s):(s=Mu(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,c=null===(c=e.child.memoizedState)?Us(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,i}return e=(s=e.child).sibling,i=Pu(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=Uu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&go(r),Qo(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Gs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),To(e.return,t,n)}function qs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ws(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ss(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Gs(e,n,t);else if(19===e.tag)Gs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ri(ua,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===la(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===la(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qs(t,!0,n,null,o);break;case"together":qs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Uc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!oo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Zs(e,t,n){var r=t.pendingProps;switch(no(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ys(t),null;case 1:case 17:return ji(t.type)&&Di(),Ys(t),null;case 3:return r=t.stateNode,aa(),Ii(Ci),Ii(Oi),ha(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ao&&(cu(ao),ao=null))),Ds(e,t),Ys(t),null;case 5:ca(t);var i=ia(ra.current);if(n=t.type,null!==e&&null!=t.stateNode)Ps(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ys(t),null}if(e=ia(ta.current),fo(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":oe(r,o),Fr("invalid",r)}for(var s in be(n,o),i=null,o)if(o.hasOwnProperty(s)){var u=o[s];"children"===s?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,u,e),i=["children",""+u]):c.hasOwnProperty(s)&&null!=u&&"onScroll"===s&&Fr("scroll",r)}switch(n){case"input":K(r),ee(r,o,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=ei)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ce(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fi]=t,e[pi]=r,js(e,t,!1,!1),t.stateNode=e;e:{switch(s=_e(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":X(e,r),i=J(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":oe(e,r),i=ie(e,r),Fr("invalid",e)}for(o in be(n,i),u=i)if(u.hasOwnProperty(o)){var l=u[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(c.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Fr("scroll",e):null!=l&&_(e,o,l,s))}switch(n){case"input":K(e),ee(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?re(e,!!r.multiple,o,!1):null!=r.defaultValue&&re(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ei)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ys(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=ia(ra.current),ia(ta.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=ro))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Ys(t),null;case 13:if(Ii(ua),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(oo&&null!==io&&0!==(1&t.mode)&&0===(128&t.flags))po(),vo(),t.flags|=98560,o=!1;else if(o=fo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else vo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ys(t),o=!1}else null!==ao&&(cu(ao),ao=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ua.current)?0===Lc&&(Lc=3):mu())),null!==t.updateQueue&&(t.flags|=4),Ys(t),null);case 4:return aa(),Ds(e,t),null===e&&qr(t.stateNode.containerInfo),Ys(t),null;case 10:return xo(t.type._context),Ys(t),null;case 19:if(Ii(ua),null===(o=t.memoizedState))return Ys(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ks(o,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=la(e))){for(t.flags|=128,Ks(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ri(ua,1&ua.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Wc&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=la(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!oo)return Ys(t),null}else 2*Qe()-o.renderingStartTime>Wc&&1073741824!==n&&(t.flags|=128,r=!0,Ks(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=ua.current,Ri(ua,r?1&n|2:1&n),t):(Ys(t),null);case 22:case 23:return fu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dc)&&(Ys(t),6&t.subtreeFlags&&(t.flags|=8192)):Ys(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Js(e,t){switch(no(t),t.tag){case 1:return ji(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return aa(),Ii(Ci),Ii(Oi),ha(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ca(t),null;case 13:if(Ii(ua),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));vo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(ua),null;case 4:return aa(),null;case 10:return xo(t.type._context),null;case 22:case 23:return fu(),null;default:return null}}js=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},Ps=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ia(ta.current);var o,a=null;switch(n){case"input":i=J(e,i),r=J(e,r),a=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),a=[];break;case"textarea":i=ie(e,i),r=ie(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ei)}for(l in be(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(c.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(null!=u||null!=s))if("style"===l)if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(a=a||[]).push(l,u)):"children"===l?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(c.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&Fr("scroll",e),a||s===u||(a=[])):(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Qs=!1,$s="function"===typeof WeakSet?WeakSet:Set,ec=null;function tc(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Iu(e,t,r)}else n.current=null}function nc(e,t,n){try{n()}catch(r){Iu(e,t,r)}}var rc=!1;function ic(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&nc(t,n,o)}i=i.next}while(i!==r)}}function oc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ac(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sc(e){var t=e.alternate;null!==t&&(e.alternate=null,sc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[pi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cc(e){return 5===e.tag||3===e.tag||4===e.tag}function uc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||cc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ei));else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}function dc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(dc(e,t,n),e=e.sibling;null!==e;)dc(e,t,n),e=e.sibling}var hc=null,fc=!1;function pc(e,t,n){for(n=n.child;null!==n;)vc(e,t,n),n=n.sibling}function vc(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Qs||tc(n,t);case 6:var r=hc,i=fc;hc=null,pc(e,t,n),fc=i,null!==(hc=r)&&(fc?(e=hc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hc.removeChild(n.stateNode));break;case 18:null!==hc&&(fc?(e=hc,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),qt(e)):ui(hc,n.stateNode));break;case 4:r=hc,i=fc,hc=n.stateNode.containerInfo,fc=!0,pc(e,t,n),hc=r,fc=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&nc(n,t,a),i=i.next}while(i!==r)}pc(e,t,n);break;case 1:if(!Qs&&(tc(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Iu(n,t,s)}pc(e,t,n);break;case 21:pc(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,pc(e,t,n),Qs=r):pc(e,t,n);break;default:pc(e,t,n)}}function gc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var r=Cu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 5:hc=c.stateNode,fc=!1;break e;case 3:case 4:hc=c.stateNode.containerInfo,fc=!0;break e}c=c.return}if(null===hc)throw Error(a(160));vc(o,s,i),hc=null,fc=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(l){Iu(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yc(t,e),t=t.sibling}function yc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),bc(e),4&r){try{ic(3,e,e.return),oc(3,e)}catch(g){Iu(e,e.return,g)}try{ic(5,e,e.return)}catch(g){Iu(e,e.return,g)}}break;case 1:mc(t,e),bc(e),512&r&&null!==n&&tc(n,n.return);break;case 5:if(mc(t,e),bc(e),512&r&&null!==n&&tc(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(g){Iu(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,c=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===c&&"radio"===o.type&&null!=o.name&&Q(i,o),_e(c,s);var l=_e(c,o);for(s=0;s<u.length;s+=2){var d=u[s],h=u[s+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?he(i,h):"children"===d?fe(i,h):_(i,d,h,l)}switch(c){case"input":$(i,o);break;case"textarea":ae(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?re(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?re(i,!!o.multiple,o.defaultValue,!0):re(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){Iu(e,e.return,g)}}break;case 6:if(mc(t,e),bc(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Iu(e,e.return,g)}}break;case 3:if(mc(t,e),bc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){Iu(e,e.return,g)}break;case 4:default:mc(t,e),bc(e);break;case 13:mc(t,e),bc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qc=Qe())),4&r&&gc(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(l=Qs)||d,mc(t,e),Qs=l):mc(t,e),bc(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!d&&0!==(1&e.mode))for(ec=e,d=e.child;null!==d;){for(h=ec=d;null!==ec;){switch(p=(f=ec).child,f.tag){case 0:case 11:case 14:case 15:ic(4,f,f.return);break;case 1:tc(f,f.return);var v=f.stateNode;if("function"===typeof v.componentWillUnmount){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){Iu(r,n,g)}}break;case 5:tc(f,f.return);break;case 22:if(null!==f.memoizedState){wc(h);continue}}null!==p?(p.return=f,ec=p):wc(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=h.stateNode,s=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,c.style.display=ge("display",s))}catch(g){Iu(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(g){Iu(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mc(t,e),bc(e),4&r&&gc(e);case 21:}}function bc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(cc(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),dc(e,uc(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;lc(e,uc(e),o);break;default:throw Error(a(161))}}catch(s){Iu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _c(e,t,n){ec=e,Ec(e,t,n)}function Ec(e,t,n){for(var r=0!==(1&e.mode);null!==ec;){var i=ec,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Xs;if(!a){var s=i.alternate,c=null!==s&&null!==s.memoizedState||Qs;s=Xs;var u=Qs;if(Xs=a,(Qs=c)&&!u)for(ec=i;null!==ec;)c=(a=ec).child,22===a.tag&&null!==a.memoizedState?xc(i):null!==c?(c.return=a,ec=c):xc(i);for(;null!==o;)ec=o,Ec(o,t,n),o=o.sibling;ec=i,Xs=s,Qs=u}Sc(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,ec=o):Sc(e)}}function Sc(e){for(;null!==ec;){var t=ec;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||oc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fo(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fo(t,s,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var d=l.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}Qs||512&t.flags&&ac(t)}catch(f){Iu(t,t.return,f)}}if(t===e){ec=null;break}if(null!==(n=t.sibling)){n.return=t.return,ec=n;break}ec=t.return}}function wc(e){for(;null!==ec;){var t=ec;if(t===e){ec=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ec=n;break}ec=t.return}}function xc(e){for(;null!==ec;){var t=ec;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{oc(4,t)}catch(c){Iu(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Iu(t,i,c)}}var o=t.return;try{ac(t)}catch(c){Iu(t,o,c)}break;case 5:var a=t.return;try{ac(t)}catch(c){Iu(t,a,c)}}}catch(c){Iu(t,t.return,c)}if(t===e){ec=null;break}var s=t.sibling;if(null!==s){s.return=t.return,ec=s;break}ec=t.return}}var Tc,Ic=Math.ceil,Rc=E.ReactCurrentDispatcher,kc=E.ReactCurrentOwner,Oc=E.ReactCurrentBatchConfig,Cc=0,Ac=null,Nc=null,jc=0,Dc=0,Pc=Ti(0),Lc=0,Mc=null,Uc=0,Vc=0,Fc=0,Bc=null,Gc=null,qc=0,Wc=1/0,Hc=null,zc=!1,Kc=null,Yc=null,Zc=!1,Jc=null,Xc=0,Qc=0,$c=null,eu=-1,tu=0;function nu(){return 0!==(6&Cc)?Qe():-1!==eu?eu:eu=Qe()}function ru(e){return 0===(1&e.mode)?1:0!==(2&Cc)&&0!==jc?jc&-jc:null!==mo.transition?(0===tu&&(tu=gt()),tu):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function iu(e,t,n,r){if(50<Qc)throw Qc=0,$c=null,Error(a(185));yt(e,n,r),0!==(2&Cc)&&e===Ac||(e===Ac&&(0===(2&Cc)&&(Vc|=n),4===Lc&&uu(e,jc)),ou(e,r),1===n&&0===Cc&&0===(1&t.mode)&&(Wc=Qe()+500,Fi&&qi()))}function ou(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-st(o),s=1<<a,c=i[a];-1===c?0!==(s&n)&&0===(s&r)||(i[a]=pt(s,t)):c<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ft(e,e===Ac?jc:0);if(0===r)null!==n&&Ze(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ze(n),1===t)0===e.tag?function(e){Fi=!0,Gi(e)}(lu.bind(null,e)):Gi(lu.bind(null,e)),si((function(){0===(6&Cc)&&qi()})),n=null;else{switch(Et(r)){case 1:n=et;break;case 4:n=tt;break;case 16:default:n=nt;break;case 536870912:n=it}n=Au(n,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function au(e,t){if(eu=-1,tu=0,0!==(6&Cc))throw Error(a(327));var n=e.callbackNode;if(xu()&&e.callbackNode!==n)return null;var r=ft(e,e===Ac?jc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yu(e,r);else{t=r;var i=Cc;Cc|=2;var o=gu();for(Ac===e&&jc===t||(Hc=null,Wc=Qe()+500,pu(e,t));;)try{_u();break}catch(c){vu(e,c)}wo(),Rc.current=o,Cc=i,null!==Nc?t=0:(Ac=null,jc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=su(e,i))),1===t)throw n=Mc,pu(e,0),uu(e,r),ou(e,Qe()),n;if(6===t)uu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!cr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yu(e,r))&&(0!==(o=vt(e))&&(r=o,t=su(e,o))),1===t))throw n=Mc,pu(e,0),uu(e,r),ou(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wu(e,Gc,Hc);break;case 3:if(uu(e,r),(130023424&r)===r&&10<(t=qc+500-Qe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){nu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ii(wu.bind(null,e,Gc,Hc),t);break}wu(e,Gc,Hc);break;case 4:if(uu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-st(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ic(r/1960))-r)){e.timeoutHandle=ii(wu.bind(null,e,Gc,Hc),r);break}wu(e,Gc,Hc);break;default:throw Error(a(329))}}}return ou(e,Qe()),e.callbackNode===n?au.bind(null,e):null}function su(e,t){var n=Bc;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=yu(e,t))&&(t=Gc,Gc=n,null!==t&&cu(t)),e}function cu(e){null===Gc?Gc=e:Gc.push.apply(Gc,e)}function uu(e,t){for(t&=~Fc,t&=~Vc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&Cc))throw Error(a(327));xu();var t=ft(e,0);if(0===(1&t))return ou(e,Qe()),null;var n=yu(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=su(e,r))}if(1===n)throw n=Mc,pu(e,0),uu(e,t),ou(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,Gc,Hc),ou(e,Qe()),null}function du(e,t){var n=Cc;Cc|=1;try{return e(t)}finally{0===(Cc=n)&&(Wc=Qe()+500,Fi&&qi())}}function hu(e){null!==Jc&&0===Jc.tag&&0===(6&Cc)&&xu();var t=Cc;Cc|=1;var n=Oc.transition,r=_t;try{if(Oc.transition=null,_t=1,e)return e()}finally{_t=r,Oc.transition=n,0===(6&(Cc=t))&&qi()}}function fu(){Dc=Pc.current,Ii(Pc)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oi(n)),null!==Nc)for(n=Nc.return;null!==n;){var r=n;switch(no(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:aa(),Ii(Ci),Ii(Oi),ha();break;case 5:ca(r);break;case 4:aa();break;case 13:case 19:Ii(ua);break;case 10:xo(r.type._context);break;case 22:case 23:fu()}n=n.return}if(Ac=e,Nc=e=Pu(e.current,null),jc=Dc=t,Lc=0,Mc=null,Fc=Vc=Uc=0,Gc=Bc=null,null!==ko){for(t=0;t<ko.length;t++)if(null!==(r=(n=ko[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}ko=null}return e}function vu(e,t){for(;;){var n=Nc;try{if(wo(),fa.current=ss,ba){for(var r=ga.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ba=!1}if(va=0,ya=ma=ga=null,_a=!1,Ea=0,kc.current=null,null===n||null===n.return){Lc=1,Mc=t,Nc=null;break}e:{var o=e,s=n.return,c=n,u=t;if(t=jc,c.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u,d=c,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ys(s);if(null!==p){p.flags&=-257,bs(p,s,c,0,t),1&p.mode&&ms(o,l,t),u=l;var v=(t=p).updateQueue;if(null===v){var g=new Set;g.add(u),t.updateQueue=g}else v.add(u);break e}if(0===(1&t)){ms(o,l,t),mu();break e}u=Error(a(426))}else if(oo&&1&c.mode){var m=ys(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),bs(m,s,c,0,t),go(ds(u,c));break e}}o=u=ds(u,c),4!==Lc&&(Lc=2),null===Bc?Bc=[o]:Bc.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Uo(o,vs(0,u,t));break e;case 1:c=u;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Yc||!Yc.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Uo(o,gs(o,c,t));break e}}o=o.return}while(null!==o)}Su(n)}catch(_){t=_,Nc===n&&null!==n&&(Nc=n=n.return);continue}break}}function gu(){var e=Rc.current;return Rc.current=ss,null===e?ss:e}function mu(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Ac||0===(268435455&Uc)&&0===(268435455&Vc)||uu(Ac,jc)}function yu(t,n){var r=Cc;Cc|=2;var i=gu();for(Ac===t&&jc===n||(Hc=null,pu(t,n));;)try{bu();break}catch(e){vu(t,e)}if(wo(),Cc=r,Rc.current=i,null!==Nc)throw Error(a(261));return Ac=null,jc=0,Lc}function bu(){for(;null!==Nc;)Eu(Nc)}function _u(){for(;null!==Nc&&!Je();)Eu(Nc)}function Eu(e){var t=Tc(e.alternate,e,Dc);e.memoizedProps=e.pendingProps,null===t?Su(e):Nc=t,kc.current=null}function Su(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Zs(n,t,Dc)))return void(Nc=n)}else{if(null!==(n=Js(n,t)))return n.flags&=32767,void(Nc=n);if(null===e)return Lc=6,void(Nc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nc=t);Nc=t=e}while(null!==t);0===Lc&&(Lc=5)}function wu(e,t,n){var r=_t,i=Oc.transition;try{Oc.transition=null,_t=1,function(e,t,n,r){do{xu()}while(null!==Jc);if(0!==(6&Cc))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,o),e===Ac&&(Nc=Ac=null,jc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Zc||(Zc=!0,Au(nt,(function(){return xu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Oc.transition,Oc.transition=null;var s=_t;_t=1;var c=Cc;Cc|=4,kc.current=null,function(e,t){if(ti=Ht,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(E){n=null;break e}var s=0,c=-1,u=-1,l=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(c=s+i),h!==o||0!==r&&3!==h.nodeType||(u=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++l===i&&(c=s),f===o&&++d===r&&(u=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===c||-1===u?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ni={focusedElem:e,selectionRange:n},Ht=!1,ec=t;null!==ec;)if(e=(t=ec).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,ec=e;else for(;null!==ec;){t=ec;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var g=v.memoizedProps,m=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:yo(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(E){Iu(t,t.return,E)}if(null!==(e=t.sibling)){e.return=t.return,ec=e;break}ec=t.return}v=rc,rc=!1}(e,n),yc(n,e),vr(ni),Ht=!!ti,ni=ti=null,e.current=n,_c(n,e,i),Xe(),Cc=c,_t=s,Oc.transition=o}else e.current=n;if(Zc&&(Zc=!1,Jc=e,Xc=i),o=e.pendingLanes,0===o&&(Yc=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ou(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zc)throw zc=!1,e=Kc,Kc=null,e;0!==(1&Xc)&&0!==e.tag&&xu(),o=e.pendingLanes,0!==(1&o)?e===$c?Qc++:(Qc=0,$c=e):Qc=0,qi()}(e,t,n,r)}finally{Oc.transition=i,_t=r}return null}function xu(){if(null!==Jc){var e=Et(Xc),t=Oc.transition,n=_t;try{if(Oc.transition=null,_t=16>e?16:e,null===Jc)var r=!1;else{if(e=Jc,Jc=null,Xc=0,0!==(6&Cc))throw Error(a(331));var i=Cc;for(Cc|=4,ec=e.current;null!==ec;){var o=ec,s=o.child;if(0!==(16&ec.flags)){var c=o.deletions;if(null!==c){for(var u=0;u<c.length;u++){var l=c[u];for(ec=l;null!==ec;){var d=ec;switch(d.tag){case 0:case 11:case 15:ic(8,d,o)}var h=d.child;if(null!==h)h.return=d,ec=h;else for(;null!==ec;){var f=(d=ec).sibling,p=d.return;if(sc(d),d===l){ec=null;break}if(null!==f){f.return=p,ec=f;break}ec=p}}}var v=o.alternate;if(null!==v){var g=v.child;if(null!==g){v.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}ec=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,ec=s;else e:for(;null!==ec;){if(0!==(2048&(o=ec).flags))switch(o.tag){case 0:case 11:case 15:ic(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,ec=y;break e}ec=o.return}}var b=e.current;for(ec=b;null!==ec;){var _=(s=ec).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,ec=_;else e:for(s=b;null!==ec;){if(0!==(2048&(c=ec).flags))try{switch(c.tag){case 0:case 11:case 15:oc(9,c)}}catch(S){Iu(c,c.return,S)}if(c===s){ec=null;break e}var E=c.sibling;if(null!==E){E.return=c.return,ec=E;break e}ec=c.return}}if(Cc=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(ot,e)}catch(S){}r=!0}return r}finally{_t=n,Oc.transition=t}}return!1}function Tu(e,t,n){e=Lo(e,t=vs(0,t=ds(n,t),1),1),t=nu(),null!==e&&(yt(e,1,t),ou(e,t))}function Iu(e,t,n){if(3===e.tag)Tu(e,e,n);else for(;null!==t;){if(3===t.tag){Tu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yc||!Yc.has(r))){t=Lo(t,e=gs(t,e=ds(n,e),1),1),e=nu(),null!==t&&(yt(t,1,e),ou(t,e));break}}t=t.return}}function Ru(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nu(),e.pingedLanes|=e.suspendedLanes&n,Ac===e&&(jc&n)===n&&(4===Lc||3===Lc&&(130023424&jc)===jc&&500>Qe()-qc?pu(e,0):Fc|=n),ou(e,t)}function ku(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=nu();null!==(e=Ao(e,t))&&(yt(e,t,n),ou(e,n))}function Ou(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ku(e,n)}function Cu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),ku(e,n)}function Au(e,t){return Ye(e,t)}function Nu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ju(e,t,n,r){return new Nu(e,t,n,r)}function Du(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pu(e,t){var n=e.alternate;return null===n?((n=ju(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Du(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Mu(n.children,i,o,t);case T:s=8,i|=8;break;case I:return(e=ju(12,n,t,2|i)).elementType=I,e.lanes=o,e;case C:return(e=ju(13,n,t,i)).elementType=C,e.lanes=o,e;case A:return(e=ju(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Uu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case R:s=10;break e;case k:s=9;break e;case O:s=11;break e;case N:s=14;break e;case j:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=ju(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mu(e,t,n,r){return(e=ju(7,e,r,t)).lanes=n,e}function Uu(e,t,n,r){return(e=ju(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Vu(e,t,n){return(e=ju(6,e,null,t)).lanes=n,e}function Fu(e,t,n){return(t=ju(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gu(e,t,n,r,i,o,a,s,c){return e=new Bu(e,t,n,s,c),1===t?(t=1,!0===o&&(t|=8)):t=0,o=ju(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jo(o),e}function qu(e){if(!e)return ki;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ji(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(ji(n))return Li(e,n,t)}return t}function Wu(e,t,n,r,i,o,a,s,c){return(e=Gu(n,r,!0,e,0,o,0,s,c)).context=qu(null),n=e.current,(o=Po(r=nu(),i=ru(n))).callback=void 0!==t&&null!==t?t:null,Lo(n,o,i),e.current.lanes=i,yt(e,i,r),ou(e,r),e}function Hu(e,t,n,r){var i=t.current,o=nu(),a=ru(i);return n=qu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Po(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Lo(i,t,a))&&(iu(e,i,a,o),Mo(e,i,a)),a}function zu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ku(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yu(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}Tc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)Es=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Es=!1,function(e,t,n){switch(t.tag){case 3:As(t),vo();break;case 5:sa(t);break;case 1:ji(t.type)&&Mi(t);break;case 4:oa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ri(bo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ri(ua,1&ua.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Vs(e,t,n):(Ri(ua,1&ua.current),null!==(e=zs(e,t,n))?e.sibling:null);Ri(ua,1&ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ri(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Is(e,t,n)}return zs(e,t,n)}(e,t,n);Es=0!==(131072&e.flags)}else Es=!1,oo&&0!==(1048576&t.flags)&&eo(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var i=Ni(t,Oi.current);Io(t,n),i=Ta(null,t,r,e,i,n);var o=Ia();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ji(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,jo(t),i.updater=qo,t.stateNode=i,i._reactInternals=t,Ko(t,r,e,n),t=Cs(null,t,r,!0,o,n)):(t.tag=0,oo&&o&&to(t),Ss(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Du(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===O)return 11;if(e===N)return 14}return 2}(r),e=yo(r,e),i){case 0:t=ks(null,t,r,e,n);break e;case 1:t=Os(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=xs(null,t,r,yo(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Os(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 3:e:{if(As(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Do(e,t),Vo(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ns(e,t,r,n,i=ds(Error(a(423)),t));break e}if(r!==i){t=Ns(e,t,r,n,i=ds(Error(a(424)),t));break e}for(io=li(t.stateNode.containerInfo.firstChild),ro=t,oo=!0,ao=null,n=$o(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(vo(),r===i){t=zs(e,t,n);break e}Ss(e,t,r,n)}t=t.child}return t;case 5:return sa(t),null===e&&lo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ri(r,i)?s=null:null!==o&&ri(r,o)&&(t.flags|=32),Rs(e,t),Ss(e,t,s,n),t.child;case 6:return null===e&&lo(t),null;case 13:return Vs(e,t,n);case 4:return oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Qo(t,null,r,n):Ss(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 7:return Ss(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ss(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ri(bo,r._currentValue),r._currentValue=s,null!==o)if(cr(o.value,s)){if(o.children===i.children&&!Ci.current){t=zs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){s=o.child;for(var u=c.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Po(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var d=(l=l.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),l.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),To(o.return,n,t),c.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),To(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}Ss(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Io(t,n),r=r(i=Ro(i)),t.flags|=1,Ss(e,t,r,n),t.child;case 14:return i=yo(r=t.type,t.pendingProps),xs(e,t,r,i=yo(r.type,i),n);case 15:return Ts(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yo(r,i),Hs(e,t),t.tag=1,ji(r)?(e=!0,Mi(t)):e=!1,Io(t,n),Ho(t,r,i),Ko(t,r,i,n),Cs(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Is(e,t,n)}throw Error(a(156,t.tag))};var Zu="function"===typeof reportError?reportError:function(e){console.error(e)};function Ju(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function el(){}function tl(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=zu(a);s.call(e)}}Hu(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=zu(a);o.call(e)}}var a=Wu(t,r,e,0,null,!1,0,"",el);return e._reactRootContainer=a,e[vi]=a.current,qr(8===e.nodeType?e.parentNode:e),hu(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=zu(c);s.call(e)}}var c=Gu(e,0,!1,null,0,!1,0,"",el);return e._reactRootContainer=c,e[vi]=c.current,qr(8===e.nodeType?e.parentNode:e),hu((function(){Hu(t,c,n,r)})),c}(n,t,e,i,r);return zu(a)}Xu.prototype.render=Ju.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hu(e,t,null,null)},Xu.prototype.unmount=Ju.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){Hu(null,e,null,null)})),t[vi]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ut(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(bt(t,1|n),ou(t,Qe()),0===(6&Cc)&&(Wc=Qe()+500,qi()))}break;case 13:hu((function(){var t=Ao(e,1);if(null!==t){var n=nu();iu(t,e,1,n)}})),Yu(e,1)}},wt=function(e){if(13===e.tag){var t=Ao(e,134217728);if(null!==t)iu(t,e,134217728,nu());Yu(e,134217728)}},xt=function(e){if(13===e.tag){var t=ru(e),n=Ao(e,t);if(null!==n)iu(n,e,t,nu());Yu(e,t)}},Tt=function(){return _t},It=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},we=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Si(r);if(!i)throw Error(a(90));Y(r),$(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&re(e,!!n.multiple,t,!1)}},Oe=du,Ce=hu;var nl={usingClientEntryPoint:!1,Events:[_i,Ei,Si,Re,ke,du]},rl={findFiberByHostInstance:bi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},il={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ze(e))?null:e.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ol.isDisabled&&ol.supportsFiber)try{ot=ol.inject(il),at=ol}catch(de){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nl,n.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},n.createRoot=function(e,t){if(!Qu(e))throw Error(a(299));var n=!1,r="",i=Zu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Gu(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Ju(t)},n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=ze(t))?null:e.stateNode},n.flushSync=function(e){return hu(e)},n.hydrate=function(e,t,n){if(!$u(t))throw Error(a(200));return tl(null,e,t,!0,n)},n.hydrateRoot=function(e,t,n){if(!Qu(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Zu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wu(t,null,e,1,null!=n?n:null,i,0,o,s),e[vi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xu(t)},n.render=function(e,t,n){if(!$u(t))throw Error(a(200));return tl(null,e,t,!1,n)},n.unmountComponentAtNode=function(e){if(!$u(e))throw Error(a(40));return!!e._reactRootContainer&&(hu((function(){tl(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},n.unstable_batchedUpdates=du,n.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$u(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return tl(e,t,n,!1,r)},n.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},77:function(e){var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){if(e.constructor!==a.constructor)return!1;var s,c,u,l;if(Array.isArray(e)){if((s=e.length)!=a.length)return!1;for(c=s;0!==c--;)if(!o(e[c],a[c]))return!1;return!0}if(n&&e instanceof Map&&a instanceof Map){if(e.size!==a.size)return!1;for(l=e.entries();!(c=l.next()).done;)if(!a.has(c.value[0]))return!1;for(l=e.entries();!(c=l.next()).done;)if(!o(c.value[1],a.get(c.value[0])))return!1;return!0}if(r&&e instanceof Set&&a instanceof Set){if(e.size!==a.size)return!1;for(l=e.entries();!(c=l.next()).done;)if(!a.has(c.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(a)){if((s=e.length)!=a.length)return!1;for(c=s;0!==c--;)if(e[c]!==a[c])return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof a.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof a.toString)return e.toString()===a.toString();if((s=(u=Object.keys(e)).length)!==Object.keys(a).length)return!1;for(c=s;0!==c--;)if(!Object.prototype.hasOwnProperty.call(a,u[c]))return!1;if(t&&e instanceof Element)return!1;for(c=s;0!==c--;)if(("_owner"!==u[c]&&"__v"!==u[c]&&"__o"!==u[c]||!e.$$typeof)&&!o(e[u[c]],a[u[c]]))return!1;return!0}return e!==e&&a!==a}e.exports=function(e,t){try{return o(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},8879:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(2791)),a=u(n(2007)),s=u(n(5095)),c=n(6930);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");n.autocompleteService=new window.google.maps.places.AutocompleteService,n.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,n.setState((function(e){return e.ready?null:{ready:!0}}))},n.autocompleteCallback=function(e,t){if(n.setState({loading:!1}),t===n.autocompleteOK){var r=n.props.highlightFirstSuggestion;n.setState({suggestions:e.map((function(e,t){return{id:e.id,description:e.description,placeId:e.place_id,active:!(!r||0!==t),index:t,formattedSuggestion:(n=e.structured_formatting,{mainText:n.main_text,secondaryText:n.secondary_text}),matchedSubstrings:e.matched_substrings,terms:e.terms,types:e.types};var n}))})}else n.props.onError(t,n.clearSuggestions)},n.fetchPredictions=function(){var e=n.props.value;e.length&&(n.setState({loading:!0}),n.autocompleteService.getPlacePredictions(r({},n.props.searchOptions,{input:e}),n.autocompleteCallback))},n.clearSuggestions=function(){n.setState({suggestions:[]})},n.clearActive=function(){n.setState({suggestions:n.state.suggestions.map((function(e){return r({},e,{active:!1})}))})},n.handleSelect=function(e,t,r){n.clearSuggestions(),n.props.onSelect?n.props.onSelect(e,t,r):n.props.onChange(e)},n.getActiveSuggestion=function(){return n.state.suggestions.find((function(e){return e.active}))},n.selectActiveAtIndex=function(e){var t=n.state.suggestions.find((function(t){return t.index===e})).description;n.setActiveAtIndex(e),n.props.onChange(t)},n.selectUserInputValue=function(){n.clearActive(),n.props.onChange(n.state.userInputValue)},n.handleEnterKey=function(){var e=n.getActiveSuggestion();void 0===e?n.handleSelect(n.props.value,null,null):n.handleSelect(e.description,e.placeId,e)},n.handleDownKey=function(){if(0!==n.state.suggestions.length){var e=n.getActiveSuggestion();void 0===e?n.selectActiveAtIndex(0):e.index===n.state.suggestions.length-1?n.selectUserInputValue():n.selectActiveAtIndex(e.index+1)}},n.handleUpKey=function(){if(0!==n.state.suggestions.length){var e=n.getActiveSuggestion();void 0===e?n.selectActiveAtIndex(n.state.suggestions.length-1):0===e.index?n.selectUserInputValue():n.selectActiveAtIndex(e.index-1)}},n.handleInputKeyDown=function(e){switch(e.key){case"Enter":e.preventDefault(),n.handleEnterKey();break;case"ArrowDown":e.preventDefault(),n.handleDownKey();break;case"ArrowUp":e.preventDefault(),n.handleUpKey();break;case"Escape":n.clearSuggestions()}},n.setActiveAtIndex=function(e){n.setState({suggestions:n.state.suggestions.map((function(t,n){return r({},t,n===e?{active:!0}:{active:!1})}))})},n.handleInputChange=function(e){var t=e.target.value;n.props.onChange(t),n.setState({userInputValue:t}),t?n.props.shouldFetchSuggestions&&n.debouncedFetchPredictions():n.clearSuggestions()},n.handleInputOnBlur=function(){n.mousedownOnSuggestion||n.clearSuggestions()},n.getActiveSuggestionId=function(){var e=n.getActiveSuggestion();return e?"PlacesAutocomplete__suggestion-"+e.placeId:void 0},n.getIsExpanded=function(){return n.state.suggestions.length>0},n.getInputProps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(e.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var t={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":n.getIsExpanded(),"aria-activedescendant":n.getActiveSuggestionId(),disabled:!n.state.ready};return r({},t,e,{onKeyDown:(0,c.compose)(n.handleInputKeyDown,e.onKeyDown),onBlur:(0,c.compose)(n.handleInputOnBlur,e.onBlur),value:n.props.value,onChange:function(e){n.handleInputChange(e)}})},n.getSuggestionItemProps=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.handleSuggestionMouseEnter.bind(n,e.index),o=n.handleSuggestionClick.bind(n,e);return r({},t,{key:e.id,id:n.getActiveSuggestionId(),role:"option",onMouseEnter:(0,c.compose)(i,t.onMouseEnter),onMouseLeave:(0,c.compose)(n.handleSuggestionMouseLeave,t.onMouseLeave),onMouseDown:(0,c.compose)(n.handleSuggestionMouseDown,t.onMouseDown),onMouseUp:(0,c.compose)(n.handleSuggestionMouseUp,t.onMouseUp),onTouchStart:(0,c.compose)(n.handleSuggestionTouchStart,t.onTouchStart),onTouchEnd:(0,c.compose)(n.handleSuggestionMouseUp,t.onTouchEnd),onClick:(0,c.compose)(o,t.onClick)})},n.handleSuggestionMouseEnter=function(e){n.setActiveAtIndex(e)},n.handleSuggestionMouseLeave=function(){n.mousedownOnSuggestion=!1,n.clearActive()},n.handleSuggestionMouseDown=function(e){e.preventDefault(),n.mousedownOnSuggestion=!0},n.handleSuggestionTouchStart=function(){n.mousedownOnSuggestion=!0},n.handleSuggestionMouseUp=function(){n.mousedownOnSuggestion=!1},n.handleSuggestionClick=function(e,t){t&&t.preventDefault&&t.preventDefault();var r=e.description,i=e.placeId;n.handleSelect(r,i,e),setTimeout((function(){n.mousedownOnSuggestion=!1}))},n.state={loading:!1,suggestions:[],userInputValue:e.value,ready:!e.googleCallbackName},n.debouncedFetchPredictions=(0,s.default)(n.fetchPredictions,e.debounce),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.props.googleCallbackName;e?window.google&&window.google.maps&&window.google.maps.places?this.init():window[e]=this.init:this.init()}},{key:"componentWillUnmount",value:function(){var e=this.props.googleCallbackName;e&&window[e]&&delete window[e]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),t}(o.default.Component);l.propTypes={onChange:a.default.func.isRequired,value:a.default.string.isRequired,children:a.default.func.isRequired,onError:a.default.func,onSelect:a.default.func,searchOptions:a.default.shape({bounds:a.default.object,componentRestrictions:a.default.object,location:a.default.object,offset:a.default.oneOfType([a.default.number,a.default.string]),radius:a.default.oneOfType([a.default.number,a.default.string]),types:a.default.array}),debounce:a.default.number,highlightFirstSuggestion:a.default.bool,shouldFetchSuggestions:a.default.bool,googleCallbackName:a.default.string},l.defaultProps={onError:function(e,t){return console.error("[react-places-autocomplete]: error happened when fetching data from Google Maps API.\nPlease check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)\nStatus: ",e)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0},t.default=l},6930:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.compose=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e&&e.apply(void 0,n)}))}},t.pick=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e&&e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}},382:function(e,t,n){"use strict";t.WV=t.NU=void 0;var r,i=n(8879),o=(r=i)&&r.__esModule?r:{default:r},a=n(4496);t.NU=a.geocodeByAddress,a.geocodeByPlaceId,t.WV=a.getLatLng,t.ZP=o.default},4496:function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.geocodeByAddress=function(e){var t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise((function(r,i){t.geocode({address:e},(function(e,t){t!==n&&i(t),r(e)}))}))},n.getLatLng=function(t){return new Promise((function(n,r){try{n({lat:t.geometry.location.lat(),lng:t.geometry.location.lng()})}catch(e){r(e)}}))},n.geocodeByPlaceId=function(e){var t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise((function(r,i){t.geocode({placeId:e},(function(e,t){t!==n&&i(t),r(e)}))}))}},9434:function(t,n,r){"use strict";function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(r(2791)),s=(o=r(77))&&o.__esModule?o:{default:o},c=r(9174),u=r(135);function l(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=g(t);if(n){var o=g(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;return v(e)}(this,e)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,e);var t,n,r,i=p(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(v(e=i.call.apply(i,[this].concat(n))),"mounted",!1),m(v(e),"isReady",!1),m(v(e),"isPlaying",!1),m(v(e),"isLoading",!0),m(v(e),"loadOnReady",null),m(v(e),"startOnPlay",!0),m(v(e),"seekOnPlay",null),m(v(e),"onDurationCalled",!1),m(v(e),"handlePlayerMount",(function(t){e.player||(e.player=t,e.player.load(e.props.url)),e.progress()})),m(v(e),"getInternalPlayer",(function(t){return e.player?e.player[t]:null})),m(v(e),"progress",(function(){if(e.props.url&&e.player&&e.isReady){var t=e.getCurrentTime()||0,n=e.getSecondsLoaded(),r=e.getDuration();if(r){var i={playedSeconds:t,played:t/r};null!==n&&(i.loadedSeconds=n,i.loaded=n/r),i.playedSeconds===e.prevPlayed&&i.loadedSeconds===e.prevLoaded||e.props.onProgress(i),e.prevPlayed=i.playedSeconds,e.prevLoaded=i.loadedSeconds}}e.progressTimeout=setTimeout(e.progress,e.props.progressFrequency||e.props.progressInterval)})),m(v(e),"handleReady",(function(){if(e.mounted){e.isReady=!0,e.isLoading=!1;var t=e.props,n=t.onReady,r=t.playing,i=t.volume,o=t.muted;n(),o||null===i||e.player.setVolume(i),e.loadOnReady?(e.player.load(e.loadOnReady,!0),e.loadOnReady=null):r&&e.player.play(),e.handleDurationCheck()}})),m(v(e),"handlePlay",(function(){e.isPlaying=!0,e.isLoading=!1;var t=e.props,n=t.onStart,r=t.onPlay,i=t.playbackRate;e.startOnPlay&&(e.player.setPlaybackRate&&1!==i&&e.player.setPlaybackRate(i),n(),e.startOnPlay=!1),r(),e.seekOnPlay&&(e.seekTo(e.seekOnPlay),e.seekOnPlay=null),e.handleDurationCheck()})),m(v(e),"handlePause",(function(t){e.isPlaying=!1,e.isLoading||e.props.onPause(t)})),m(v(e),"handleEnded",(function(){var t=e.props,n=t.activePlayer,r=t.loop,i=t.onEnded;n.loopOnEnded&&r&&e.seekTo(0),r||(e.isPlaying=!1,i())})),m(v(e),"handleError",(function(){var t;e.isLoading=!1,(t=e.props).onError.apply(t,arguments)})),m(v(e),"handleDurationCheck",(function(){clearTimeout(e.durationCheckTimeout);var t=e.getDuration();t?e.onDurationCalled||(e.props.onDuration(t),e.onDurationCalled=!0):e.durationCheckTimeout=setTimeout(e.handleDurationCheck,100)})),m(v(e),"handleLoaded",(function(){e.isLoading=!1})),e}return t=o,n=[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.player){var n=this.props,r=n.url,i=n.playing,o=n.volume,a=n.muted,c=n.playbackRate,l=n.pip,d=n.loop,h=n.activePlayer,f=n.disableDeferredLoading;if(!(0,s.default)(e.url,r)){if(this.isLoading&&!h.forceLoad&&!f&&!(0,u.isMediaStream)(r))return console.warn("ReactPlayer: the attempt to load ".concat(r," is being deferred until the player has loaded")),void(this.loadOnReady=r);this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(r,this.isReady)}e.playing||!i||this.isPlaying||this.player.play(),e.playing&&!i&&this.isPlaying&&this.player.pause(),!e.pip&&l&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!l&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==o&&null!==o&&this.player.setVolume(o),e.muted!==a&&(a?this.player.mute():(this.player.unmute(),null!==o&&setTimeout((function(){return t.player.setVolume(o)})))),e.playbackRate!==c&&this.player.setPlaybackRate&&this.player.setPlaybackRate(c),e.loop!==d&&this.player.setLoop&&this.player.setLoop(d)}}},{key:"getDuration",value:function(){return this.isReady?this.player.getDuration():null}},{key:"getCurrentTime",value:function(){return this.isReady?this.player.getCurrentTime():null}},{key:"getSecondsLoaded",value:function(){return this.isReady?this.player.getSecondsLoaded():null}},{key:"seekTo",value:function(e,t){var n=this;if(this.isReady){if(t?"fraction"===t:e>0&&e<1){var r=this.player.getDuration();return r?void this.player.seekTo(r*e):void console.warn("ReactPlayer: could not seek using fraction \u2013\xa0duration not yet available")}this.player.seekTo(e)}else 0!==e&&(this.seekOnPlay=e,setTimeout((function(){n.seekOnPlay=null}),5e3))}},{key:"render",value:function(){var e=this.props.activePlayer;return e?a.default.createElement(e,d({},this.props,{onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError})):null}}],n&&h(t.prototype,n),r&&h(t,r),o}(a.Component);n.default=y,m(y,"displayName","Player"),m(y,"propTypes",c.propTypes),m(y,"defaultProps",c.defaultProps)},8275:function(t,n,r){"use strict";function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(r(2791));function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=f(t);if(n){var o=f(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;return h(e)}(this,e)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v="64px",g={},m=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(a,e);var t,n,r,i=d(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(h(e=i.call.apply(i,[this].concat(n))),"mounted",!1),p(h(e),"state",{image:null}),p(h(e),"handleKeyPress",(function(t){"Enter"!==t.key&&" "!==t.key||e.props.onClick()})),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.mounted=!0,this.fetchImage(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.url,r=t.light;e.url===n&&e.light===r||this.fetchImage(this.props)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetchImage",value:function(e){var t=this,n=e.url,r=e.light,i=e.oEmbedUrl;if(!o.default.isValidElement(r))if("string"!==typeof r){if(!g[n])return this.setState({image:null}),window.fetch(i.replace("{url}",n)).then((function(e){return e.json()})).then((function(e){if(e.thumbnail_url&&t.mounted){var r=e.thumbnail_url.replace("height=100","height=480").replace("-d_295x166","-d_640");t.setState({image:r}),g[n]=r}}));this.setState({image:g[n]})}else this.setState({image:r})}},{key:"render",value:function(){var e=this.props,t=e.light,n=e.onClick,r=e.playIcon,i=e.previewTabIndex,a=this.state.image,s=o.default.isValidElement(t),u={display:"flex",alignItems:"center",justifyContent:"center"},l={preview:c({width:"100%",height:"100%",backgroundImage:a&&!s?"url(".concat(a,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer"},u),shadow:c({background:"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)",borderRadius:v,width:v,height:v,position:s?"absolute":void 0},u),playIcon:{borderStyle:"solid",borderWidth:"16px 0 16px 26px",borderColor:"transparent transparent transparent white",marginLeft:"7px"}},d=o.default.createElement("div",{style:l.shadow,className:"react-player__shadow"},o.default.createElement("div",{style:l.playIcon,className:"react-player__play-icon"}));return o.default.createElement("div",{style:l.preview,className:"react-player__preview",onClick:n,tabIndex:i,onKeyPress:this.handleKeyPress},s?t:null,r||d)}}])&&u(t.prototype,n),r&&u(t,r),a}(o.Component);n.default=m},2646:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createReactPlayer=void 0;var i=T(r(2791)),o=d(r(9948)),a=d(r(5781)),s=d(r(77)),c=r(9174),u=r(135),l=d(r(9434));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}function g(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function _(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=S(t);if(n){var i=S(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"===typeof t))return t;return E(e)}(this,e)}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return x=function(){return e},e}function T(e){if(e&&e.__esModule)return e;if(null===e||"object"!==h(e)&&"function"!==typeof e)return{default:e};var t=x();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}var I=(0,i.lazy)((function(){return Promise.resolve().then((function(){return T(r(8275))}))})),R="undefined"!==typeof window&&window.document,k="undefined"!==typeof r.g&&r.g.window&&r.g.window.document,O=Object.keys(c.propTypes),C=R||k?i.Suspense:function(){return null},A=[];n.createReactPlayer=function(e,t){var n,r;return r=n=function(n){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(m,n);var r,d,h,f=_(m);function m(){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);for(var r=arguments.length,s=new Array(r),d=0;d<r;d++)s[d]=arguments[d];return w(E(n=f.call.apply(f,[this].concat(s))),"state",{showPreview:!!n.props.light}),w(E(n),"references",{wrapper:function(e){n.wrapper=e},player:function(e){n.player=e}}),w(E(n),"handleClickPreview",(function(e){n.setState({showPreview:!1}),n.props.onClickPreview(e)})),w(E(n),"showPreview",(function(){n.setState({showPreview:!0})})),w(E(n),"getDuration",(function(){return n.player?n.player.getDuration():null})),w(E(n),"getCurrentTime",(function(){return n.player?n.player.getCurrentTime():null})),w(E(n),"getSecondsLoaded",(function(){return n.player?n.player.getSecondsLoaded():null})),w(E(n),"getInternalPlayer",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player";return n.player?n.player.getInternalPlayer(e):null})),w(E(n),"seekTo",(function(e,t){if(!n.player)return null;n.player.seekTo(e,t)})),w(E(n),"handleReady",(function(){n.props.onReady(E(n))})),w(E(n),"getActivePlayer",(0,a.default)((function(n){for(var r=0,i=[].concat(A,g(e));r<i.length;r++){var o=i[r];if(o.canPlay(n))return o}return t||null}))),w(E(n),"getConfig",(0,a.default)((function(e,t){var r=n.props.config;return o.default.all([c.defaultProps.config,c.defaultProps.config[t]||{},r,r[t]||{}])}))),w(E(n),"getAttributes",(0,a.default)((function(e){return(0,u.omit)(n.props,O)}))),w(E(n),"renderActivePlayer",(function(e){if(!e)return null;var t=n.getActivePlayer(e);if(!t)return null;var r=n.getConfig(e,t.key);return i.default.createElement(l.default,v({},n.props,{key:t.key,ref:n.references.player,config:r,activePlayer:t.lazyPlayer||t,onReady:n.handleReady}))})),n}return r=m,d=[{key:"shouldComponentUpdate",value:function(e,t){return!(0,s.default)(this.props,e)||!(0,s.default)(this.state,t)}},{key:"componentDidUpdate",value:function(e){var t=this.props.light;!e.light&&t&&this.setState({showPreview:!0}),e.light&&!t&&this.setState({showPreview:!1})}},{key:"renderPreview",value:function(e){if(!e)return null;var t=this.props,n=t.light,r=t.playIcon,o=t.previewTabIndex,a=t.oEmbedUrl;return i.default.createElement(I,{url:e,light:n,playIcon:r,previewTabIndex:o,oEmbedUrl:a,onClick:this.handleClickPreview})}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.style,r=e.width,o=e.height,a=e.fallback,s=e.wrapper,c=this.state.showPreview,u=this.getAttributes(t),l="string"===typeof s?this.references.wrapper:void 0;return i.default.createElement(s,v({ref:l,style:p(p({},n),{},{width:r,height:o})},u),i.default.createElement(C,{fallback:a},c?this.renderPreview(t):this.renderActivePlayer(t)))}}],d&&y(r.prototype,d),h&&y(r,h),m}(i.Component),w(n,"displayName","ReactPlayer"),w(n,"propTypes",c.propTypes),w(n,"defaultProps",c.defaultProps),w(n,"addCustomPlayer",(function(e){A.push(e)})),w(n,"removeCustomPlayers",(function(){A.length=0})),w(n,"canPlay",(function(t){for(var n=0,r=[].concat(A,g(e));n<r.length;n++){if(r[n].canPlay(t))return!0}return!1})),w(n,"canEnablePIP",(function(t){for(var n=0,r=[].concat(A,g(e));n<r.length;n++){var i=r[n];if(i.canEnablePIP&&i.canEnablePIP(t))return!0}return!1})),r}},6710:function(e,t,n){"use strict";t.Z=void 0;var r,i=(r=n(4687))&&r.__esModule?r:{default:r},o=n(2646);var a=i.default[i.default.length-1],s=(0,o.createReactPlayer)(i.default,a);t.Z=s},365:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canPlay=t.FLV_EXTENSIONS=t.DASH_EXTENSIONS=t.HLS_EXTENSIONS=t.VIDEO_EXTENSIONS=t.AUDIO_EXTENSIONS=t.MATCH_URL_KALTURA=t.MATCH_URL_VIDYARD=t.MATCH_URL_MIXCLOUD=t.MATCH_URL_DAILYMOTION=t.MATCH_URL_TWITCH_CHANNEL=t.MATCH_URL_TWITCH_VIDEO=t.MATCH_URL_WISTIA=t.MATCH_URL_STREAMABLE=t.MATCH_URL_FACEBOOK_WATCH=t.MATCH_URL_FACEBOOK=t.MATCH_URL_VIMEO=t.MATCH_URL_SOUNDCLOUD=t.MATCH_URL_YOUTUBE=void 0;var r=n(135);function i(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=/(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//;t.MATCH_URL_YOUTUBE=a;var s=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/;t.MATCH_URL_SOUNDCLOUD=s;var c=/vimeo\.com\/(?!progressive_redirect).+/;t.MATCH_URL_VIMEO=c;var u=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/;t.MATCH_URL_FACEBOOK=u;var l=/^https?:\/\/fb\.watch\/.+$/;t.MATCH_URL_FACEBOOK_WATCH=l;var d=/streamable\.com\/([a-z0-9]+)$/;t.MATCH_URL_STREAMABLE=d;var h=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?(.*)$/;t.MATCH_URL_WISTIA=h;var f=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/;t.MATCH_URL_TWITCH_VIDEO=f;var p=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/;t.MATCH_URL_TWITCH_CHANNEL=p;var v=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/;t.MATCH_URL_DAILYMOTION=v;var g=/mixcloud\.com\/([^/]+\/[^/]+)/;t.MATCH_URL_MIXCLOUD=g;var m=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/;t.MATCH_URL_VIDYARD=m;var y=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/;t.MATCH_URL_KALTURA=y;var b=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i;t.AUDIO_EXTENSIONS=b;var _=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i;t.VIDEO_EXTENSIONS=_;var E=/\.(m3u8)($|\?)/i;t.HLS_EXTENSIONS=E;var S=/\.(mpd)($|\?)/i;t.DASH_EXTENSIONS=S;var w=/\.(flv)($|\?)/i;t.FLV_EXTENSIONS=w;var x={youtube:function(e){return e instanceof Array?e.every((function(e){return a.test(e)})):a.test(e)},soundcloud:function(e){return s.test(e)&&!b.test(e)},vimeo:function(e){return c.test(e)&&!_.test(e)&&!E.test(e)},facebook:function(e){return u.test(e)||l.test(e)},streamable:function(e){return d.test(e)},wistia:function(e){return h.test(e)},twitch:function(e){return f.test(e)||p.test(e)},dailymotion:function(e){return v.test(e)},mixcloud:function(e){return g.test(e)},vidyard:function(e){return m.test(e)},kaltura:function(e){return y.test(e)},file:function e(t){if(t instanceof Array){var n,o=i(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;if("string"===typeof a&&e(a))return!0;if(e(a.src))return!0}}catch(s){o.e(s)}finally{o.f()}return!1}return!(!(0,r.isMediaStream)(t)&&!(0,r.isBlobUrl)(t))||(b.test(t)||_.test(t)||E.test(t)||S.test(t)||w.test(t))}};t.canPlay=x},4303:function(t,n,r){"use strict";function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(r(2791)),a=r(135),s=r(365);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function v(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=m(t);if(n){var o=m(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;return g(e)}(this,e)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,n,r,i=v(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(g(e=i.call.apply(i,[this].concat(n))),"callPlayer",a.callPlayer),y(g(e),"onDurationChange",(function(){var t=e.getDuration();e.props.onDuration(t)})),y(g(e),"mute",(function(){e.callPlayer("setMuted",!0)})),y(g(e),"unmute",(function(){e.callPlayer("setMuted",!1)})),y(g(e),"ref",(function(t){e.container=t})),e}return t=c,(n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this,n=this.props,r=n.controls,i=n.config,o=n.onError,c=n.playing,u=d(e.match(s.MATCH_URL_DAILYMOTION),2)[1];this.player?this.player.load(u,{start:(0,a.parseStartTime)(e),autoplay:c}):(0,a.getSDK)("https://api.dmcdn.net/all.js","DM","dmAsyncInit",(function(e){return e.player})).then((function(n){if(t.container){var s=n.player;t.player=new s(t.container,{width:"100%",height:"100%",video:u,params:l({controls:r,autoplay:t.props.playing,mute:t.props.muted,start:(0,a.parseStartTime)(e),origin:window.location.origin},i.params),events:{apiready:t.props.onReady,seeked:function(){return t.props.onSeek(t.player.currentTime)},video_end:t.props.onEnded,durationchange:t.onDurationChange,pause:t.props.onPause,playing:t.props.onPlay,waiting:t.props.onBuffer,error:function(e){return o(e)}}})}}),o)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"getDuration",value:function(){return this.player.duration||null}},{key:"getCurrentTime",value:function(){return this.player.currentTime}},{key:"getSecondsLoaded",value:function(){return this.player.bufferedTime}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return o.default.createElement("div",{style:e},o.default.createElement("div",{ref:this.ref}))}}])&&f(t.prototype,n),r&&f(t,r),c}(o.Component);n.default=b,y(b,"displayName","DailyMotion"),y(b,"canPlay",s.canPlay.dailymotion),y(b,"loopOnEnded",!0)},4793:function(t,n,r){"use strict";function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(r(2791)),a=r(135),s=r(365);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;return f(e)}(this,e)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g="https://connect.facebook.net/en_US/sdk.js",m="fbAsyncInit",y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,e);var t,n,r,i=h(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(f(e=i.call.apply(i,[this].concat(n))),"callPlayer",a.callPlayer),v(f(e),"playerID",e.props.config.playerId||"".concat("facebook-player-").concat((0,a.randomString)())),v(f(e),"mute",(function(){e.callPlayer("mute")})),v(f(e),"unmute",(function(){e.callPlayer("unmute")})),e}return t=s,(n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e,t){var n=this;t?(0,a.getSDK)(g,"FB",m).then((function(e){return e.XFBML.parse()})):(0,a.getSDK)(g,"FB",m).then((function(e){e.init({appId:n.props.config.appId,xfbml:!0,version:n.props.config.version}),e.Event.subscribe("xfbml.render",(function(e){n.props.onLoaded()})),e.Event.subscribe("xfbml.ready",(function(e){"video"===e.type&&e.id===n.playerID&&(n.player=e.instance,n.player.subscribe("startedPlaying",n.props.onPlay),n.player.subscribe("paused",n.props.onPause),n.player.subscribe("finishedPlaying",n.props.onEnded),n.player.subscribe("startedBuffering",n.props.onBuffer),n.player.subscribe("finishedBuffering",n.props.onBufferEnd),n.player.subscribe("error",n.props.onError),n.props.muted?n.callPlayer("mute"):n.callPlayer("unmute"),n.props.onReady(),document.getElementById(n.playerID).querySelector("iframe").style.visibility="visible")}))}))}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentPosition")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e=this.props.config.attributes;return o.default.createElement("div",u({style:{width:"100%",height:"100%"},id:this.playerID,className:"fb-video","data-href":this.props.url,"data-autoplay":this.props.playing?"true":"false","data-allowfullscreen":"true","data-controls":this.props.controls?"true":"false"},e))}}])&&l(t.prototype,n),r&&l(t,r),s}(o.Component);n.default=y,v(y,"displayName","Facebook"),v(y,"canPlay",s.canPlay.facebook),v(y,"loopOnEnded",!0)},8997:function(t,n,r){"use strict";function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(r(2791)),a=r(135),s=r(365);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;return f(e)}(this,e)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g="undefined"!==typeof navigator,m=g&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,y=g&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||m)&&!window.MSStream,b=g&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&!window.MSStream,_=/www\.dropbox\.com\/.+/,E=/https:\/\/watch\.cloudflarestream\.com\/([a-z0-9]+)/,S=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(p,t);var n,r,i,c=h(p);function p(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(f(e=c.call.apply(c,[this].concat(n))),"onReady",(function(){var t;return(t=e.props).onReady.apply(t,arguments)})),v(f(e),"onPlay",(function(){var t;return(t=e.props).onPlay.apply(t,arguments)})),v(f(e),"onBuffer",(function(){var t;return(t=e.props).onBuffer.apply(t,arguments)})),v(f(e),"onBufferEnd",(function(){var t;return(t=e.props).onBufferEnd.apply(t,arguments)})),v(f(e),"onPause",(function(){var t;return(t=e.props).onPause.apply(t,arguments)})),v(f(e),"onEnded",(function(){var t;return(t=e.props).onEnded.apply(t,arguments)})),v(f(e),"onError",(function(){var t;return(t=e.props).onError.apply(t,arguments)})),v(f(e),"onPlayBackRateChange",(function(t){return e.props.onPlaybackRateChange(t.target.playbackRate)})),v(f(e),"onEnablePIP",(function(){var t;return(t=e.props).onEnablePIP.apply(t,arguments)})),v(f(e),"onDisablePIP",(function(t){var n=e.props,r=n.onDisablePIP,i=n.playing;r(t),i&&e.play()})),v(f(e),"onPresentationModeChange",(function(t){if(e.player&&(0,a.supportsWebKitPresentationMode)(e.player)){var n=e.player.webkitPresentationMode;"picture-in-picture"===n?e.onEnablePIP(t):"inline"===n&&e.onDisablePIP(t)}})),v(f(e),"onSeek",(function(t){e.props.onSeek(t.target.currentTime)})),v(f(e),"mute",(function(){e.player.muted=!0})),v(f(e),"unmute",(function(){e.player.muted=!1})),v(f(e),"renderSourceElement",(function(e,t){return"string"===typeof e?o.default.createElement("source",{key:t,src:e}):o.default.createElement("source",u({key:t},e))})),v(f(e),"renderTrack",(function(e,t){return o.default.createElement("track",u({key:t},e))})),v(f(e),"ref",(function(t){e.player&&(e.prevPlayer=e.player),e.player=t})),e}return n=p,(r=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this),this.addListeners(this.player),this.player.src=this.getSource(this.props.url),y&&this.player.load()}},{key:"componentDidUpdate",value:function(e){this.shouldUseAudio(this.props)!==this.shouldUseAudio(e)&&(this.removeListeners(this.prevPlayer,e.url),this.addListeners(this.player)),this.props.url===e.url||(0,a.isMediaStream)(this.props.url)||(this.player.srcObject=null)}},{key:"componentWillUnmount",value:function(){this.player.src="",this.removeListeners(this.player),this.hls&&this.hls.destroy()}},{key:"addListeners",value:function(e){var t=this.props,n=t.url,r=t.playsinline;e.addEventListener("play",this.onPlay),e.addEventListener("waiting",this.onBuffer),e.addEventListener("playing",this.onBufferEnd),e.addEventListener("pause",this.onPause),e.addEventListener("seeked",this.onSeek),e.addEventListener("ended",this.onEnded),e.addEventListener("error",this.onError),e.addEventListener("ratechange",this.onPlayBackRateChange),e.addEventListener("enterpictureinpicture",this.onEnablePIP),e.addEventListener("leavepictureinpicture",this.onDisablePIP),e.addEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(n)||e.addEventListener("canplay",this.onReady),r&&(e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e.setAttribute("x5-playsinline",""))}},{key:"removeListeners",value:function(e,t){e.removeEventListener("canplay",this.onReady),e.removeEventListener("play",this.onPlay),e.removeEventListener("waiting",this.onBuffer),e.removeEventListener("playing",this.onBufferEnd),e.removeEventListener("pause",this.onPause),e.removeEventListener("seeked",this.onSeek),e.removeEventListener("ended",this.onEnded),e.removeEventListener("error",this.onError),e.removeEventListener("ratechange",this.onPlayBackRateChange),e.removeEventListener("enterpictureinpicture",this.onEnablePIP),e.removeEventListener("leavepictureinpicture",this.onDisablePIP),e.removeEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(t)||e.removeEventListener("canplay",this.onReady)}},{key:"shouldUseAudio",value:function(e){return!e.config.forceVideo&&!e.config.attributes.poster&&(s.AUDIO_EXTENSIONS.test(e.url)||e.config.forceAudio)}},{key:"shouldUseHLS",value:function(e){return!!this.props.config.forceHLS||!(!b||!this.props.config.forceSafariHLS)||!y&&(s.HLS_EXTENSIONS.test(e)||E.test(e))}},{key:"shouldUseDASH",value:function(e){return s.DASH_EXTENSIONS.test(e)||this.props.config.forceDASH}},{key:"shouldUseFLV",value:function(e){return s.FLV_EXTENSIONS.test(e)||this.props.config.forceFLV}},{key:"load",value:function(t){var n=this,r=this.props.config,i=r.hlsVersion,o=r.hlsOptions,s=r.dashVersion,c=r.flvVersion;if(this.hls&&this.hls.destroy(),this.dash&&this.dash.reset(),this.shouldUseHLS(t)&&(0,a.getSDK)("https://cdn.jsdelivr.net/npm/hls.js@VERSION/dist/hls.min.js".replace("VERSION",i),"Hls").then((function(e){if(n.hls=new e(o),n.hls.on(e.Events.MANIFEST_PARSED,(function(){n.props.onReady()})),n.hls.on(e.Events.ERROR,(function(t,r){n.props.onError(t,r,n.hls,e)})),E.test(t)){var r=t.match(E)[1];n.hls.loadSource("https://videodelivery.net/{id}/manifest/video.m3u8".replace("{id}",r))}else n.hls.loadSource(t);n.hls.attachMedia(n.player),n.props.onLoaded()})),this.shouldUseDASH(t)&&(0,a.getSDK)("https://cdnjs.cloudflare.com/ajax/libs/dashjs/VERSION/dash.all.min.js".replace("VERSION",s),"dashjs").then((function(e){n.dash=e.MediaPlayer().create(),n.dash.initialize(n.player,t,n.props.playing),n.dash.on("error",n.props.onError),parseInt(s)<3?n.dash.getDebug().setLogToBrowserConsole(!1):n.dash.updateSettings({debug:{logLevel:e.Debug.LOG_LEVEL_NONE}}),n.props.onLoaded()})),this.shouldUseFLV(t)&&(0,a.getSDK)("https://cdn.jsdelivr.net/npm/flv.js@VERSION/dist/flv.min.js".replace("VERSION",c),"flvjs").then((function(e){n.flv=e.createPlayer({type:"flv",url:t}),n.flv.attachMediaElement(n.player),n.flv.on(e.Events.ERROR,(function(t,r){n.props.onError(t,r,n.flv,e)})),n.flv.load(),n.props.onLoaded()})),t instanceof Array)this.player.load();else if((0,a.isMediaStream)(t))try{this.player.srcObject=t}catch(e){this.player.src=window.URL.createObjectURL(t)}}},{key:"play",value:function(){var e=this.player.play();e&&e.catch(this.props.onError)}},{key:"pause",value:function(){this.player.pause()}},{key:"stop",value:function(){this.player.removeAttribute("src"),this.dash&&this.dash.reset()}},{key:"seekTo",value:function(e){this.player.currentTime=e}},{key:"setVolume",value:function(e){this.player.volume=e}},{key:"enablePIP",value:function(){this.player.requestPictureInPicture&&document.pictureInPictureElement!==this.player?this.player.requestPictureInPicture():(0,a.supportsWebKitPresentationMode)(this.player)&&"picture-in-picture"!==this.player.webkitPresentationMode&&this.player.webkitSetPresentationMode("picture-in-picture")}},{key:"disablePIP",value:function(){document.exitPictureInPicture&&document.pictureInPictureElement===this.player?document.exitPictureInPicture():(0,a.supportsWebKitPresentationMode)(this.player)&&"inline"!==this.player.webkitPresentationMode&&this.player.webkitSetPresentationMode("inline")}},{key:"setPlaybackRate",value:function(e){try{this.player.playbackRate=e}catch(t){this.props.onError(t)}}},{key:"getDuration",value:function(){if(!this.player)return null;var e=this.player,t=e.duration,n=e.seekable;return t===1/0&&n.length>0?n.end(n.length-1):t}},{key:"getCurrentTime",value:function(){return this.player?this.player.currentTime:null}},{key:"getSecondsLoaded",value:function(){if(!this.player)return null;var e=this.player.buffered;if(0===e.length)return 0;var t=e.end(e.length-1),n=this.getDuration();return t>n?n:t}},{key:"getSource",value:function(e){var t=this.shouldUseHLS(e),n=this.shouldUseDASH(e),r=this.shouldUseFLV(e);if(!(e instanceof Array||(0,a.isMediaStream)(e)||t||n||r))return _.test(e)?e.replace("www.dropbox.com","dl.dropboxusercontent.com"):e}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.playing,r=e.loop,i=e.controls,a=e.muted,s=e.config,c=e.width,l=e.height,d=this.shouldUseAudio(this.props)?"audio":"video",h={width:"auto"===c?c:"100%",height:"auto"===l?l:"100%"};return o.default.createElement(d,u({ref:this.ref,src:this.getSource(t),style:h,preload:"auto",autoPlay:n||void 0,controls:i,muted:a,loop:r},s.attributes),t instanceof Array&&t.map(this.renderSourceElement),s.tracks.map(this.renderTrack))}}])&&l(n.prototype,r),i&&l(n,i),p}(o.Component);n.default=S,v(S,"displayName","FilePlayer"),v(S,"canPlay",s.canPlay.file)},9332:function(t,n,r){"use strict";function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(r(2791)),a=r(135),s=r(365);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=f(t);if(n){var o=f(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;return h(e)}(this,e)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,e);var t,n,r,i=d(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(h(e=i.call.apply(i,[this].concat(n))),"callPlayer",a.callPlayer),p(h(e),"duration",null),p(h(e),"currentTime",null),p(h(e),"secondsLoaded",null),p(h(e),"mute",(function(){e.callPlayer("mute")})),p(h(e),"unmute",(function(){e.callPlayer("unmute")})),p(h(e),"ref",(function(t){e.iframe=t})),e}return t=s,(n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;(0,a.getSDK)("https://cdn.embed.ly/player-0.1.0.min.js","playerjs").then((function(e){t.iframe&&(t.player=new e.Player(t.iframe),t.player.on("ready",(function(){setTimeout((function(){t.player.isReady=!0,t.player.setLoop(t.props.loop),t.props.muted&&t.player.mute(),t.addListeners(t.player,t.props),t.props.onReady()}),500)})))}),this.props.onError)}},{key:"addListeners",value:function(e,t){var n=this;e.on("play",t.onPlay),e.on("pause",t.onPause),e.on("ended",t.onEnded),e.on("error",t.onError),e.on("timeupdate",(function(e){var t=e.duration,r=e.seconds;n.duration=t,n.currentTime=r}))}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("setCurrentTime",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){return o.default.createElement("iframe",{ref:this.ref,src:this.props.url,frameBorder:"0",scrolling:"no",style:{width:"100%",height:"100%"},allow:"encrypted-media; autoplay; fullscreen;",referrerPolicy:"no-referrer-when-downgrade"})}}])&&u(t.prototype,n),r&&u(t,r),s}(o.Component);n.default=v,p(v,"displayName","Kaltura"),p(v,"canPlay",s.canPlay.kaltura)},2732:function(t,n,r){"use strict";function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(r(2791)),a=r(135),s=r(365);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function f(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=v(t);if(n){var o=v(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;return p(e)}(this,e)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(c,e);var t,n,r,i=f(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(p(e=i.call.apply(i,[this].concat(n))),"callPlayer",a.callPlayer),g(p(e),"duration",null),g(p(e),"currentTime",null),g(p(e),"secondsLoaded",null),g(p(e),"mute",(function(){})),g(p(e),"unmute",(function(){})),g(p(e),"ref",(function(t){e.iframe=t})),e}return t=c,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;(0,a.getSDK)("https://widget.mixcloud.com/media/js/widgetApi.js","Mixcloud").then((function(e){t.player=e.PlayerWidget(t.iframe),t.player.ready.then((function(){t.player.events.play.on(t.props.onPlay),t.player.events.pause.on(t.props.onPause),t.player.events.ended.on(t.props.onEnded),t.player.events.error.on(t.props.error),t.player.events.progress.on((function(e,n){t.currentTime=e,t.duration=n})),t.props.onReady()}))}),this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.config,r=t.match(s.MATCH_URL_MIXCLOUD)[1],i=(0,a.queryString)(l(l({},n.options),{},{feed:"/".concat(r,"/")}));return o.default.createElement("iframe",{key:r,ref:this.ref,style:{width:"100%",height:"100%"},src:"https://www.mixcloud.com/widget/iframe/?".concat(i),frameBorder:"0",allow:"autoplay"})}}],n&&d(t.prototype,n),r&&d(t,r),c}(o.Component);n.default=m,g(m,"displayName","Mixcloud"),g(m,"canPlay",s.canPlay.mixcloud),g(m,"loopOnEnded",!0)},1801:function(t,n,r){"use strict";function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(r(2791)),a=r(135),s=r(365);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function f(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=v(t);if(n){var o=v(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;return p(e)}(this,e)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(s,e);var t,n,r,i=f(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(p(e=i.call.apply(i,[this].concat(n))),"callPlayer",a.callPlayer),g(p(e),"duration",null),g(p(e),"currentTime",null),g(p(e),"fractionLoaded",null),g(p(e),"mute",(function(){e.setVolume(0)})),g(p(e),"unmute",(function(){null!==e.props.volume&&e.setVolume(e.props.volume)})),g(p(e),"ref",(function(t){e.iframe=t})),e}return t=s,(n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e,t){var n=this;(0,a.getSDK)("https://w.soundcloud.com/player/api.js","SC").then((function(r){if(n.iframe){var i=r.Widget.Events,o=i.PLAY,a=i.PLAY_PROGRESS,s=i.PAUSE,c=i.FINISH,u=i.ERROR;t||(n.player=r.Widget(n.iframe),n.player.bind(o,n.props.onPlay),n.player.bind(s,(function(){n.duration-n.currentTime<.05||n.props.onPause()})),n.player.bind(a,(function(e){n.currentTime=e.currentPosition/1e3,n.fractionLoaded=e.loadedProgress})),n.player.bind(c,(function(){return n.props.onEnded()})),n.player.bind(u,(function(e){return n.props.onError(e)}))),n.player.load(e,l(l({},n.props.config.options),{},{callback:function(){n.player.getDuration((function(e){n.duration=e/1e3,n.props.onReady()}))}}))}}))}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("seekTo",1e3*e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.fractionLoaded*this.duration}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return o.default.createElement("iframe",{ref:this.ref,src:"https://w.soundcloud.com/player/?url=".concat(encodeURIComponent(this.props.url)),style:e,frameBorder:0,allow:"autoplay"})}}])&&d(t.prototype,n),r&&d(t,r),s}(o.Component);n.default=m,g(m,"displayName","SoundCloud"),g(m,"canPlay",s.canPlay.soundcloud),g(m,"loopOnEnded",!0)},1286:function(t,n,r){"use strict";function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(r(2791)),a=r(135),s=r(365);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function d(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=f(t);if(n){var o=f(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;return h(e)}(this,e)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(c,e);var t,n,r,i=d(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(h(e=i.call.apply(i,[this].concat(n))),"callPlayer",a.callPlayer),p(h(e),"duration",null),p(h(e),"currentTime",null),p(h(e),"secondsLoaded",null),p(h(e),"mute",(function(){e.callPlayer("mute")})),p(h(e),"unmute",(function(){e.callPlayer("unmute")})),p(h(e),"ref",(function(t){e.iframe=t})),e}return t=c,(n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;(0,a.getSDK)("https://cdn.embed.ly/player-0.1.0.min.js","playerjs").then((function(e){t.iframe&&(t.player=new e.Player(t.iframe),t.player.setLoop(t.props.loop),t.player.on("ready",t.props.onReady),t.player.on("play",t.props.onPlay),t.player.on("pause",t.props.onPause),t.player.on("seeked",t.props.onSeek),t.player.on("ended",t.props.onEnded),t.player.on("error",t.props.onError),t.player.on("timeupdate",(function(e){var n=e.duration,r=e.seconds;t.duration=n,t.currentTime=r})),t.player.on("buffered",(function(e){var n=e.percent;t.duration&&(t.secondsLoaded=t.duration*n)})),t.props.muted&&t.player.mute())}),this.props.onError)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){}},{key:"seekTo",value:function(e){this.callPlayer("setCurrentTime",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var e=this.props.url.match(s.MATCH_URL_STREAMABLE)[1];return o.default.createElement("iframe",{ref:this.ref,src:"https://streamable.com/o/".concat(e),frameBorder:"0",scrolling:"no",style:{width:"100%",height:"100%"},allow:"encrypted-media; autoplay; fullscreen;"})}}])&&u(t.prototype,n),r&&u(t,r),c}(o.Component);n.default=v,p(v,"displayName","Streamable"),p(v,"canPlay",s.canPlay.streamable)},6741:function(t,n,r){"use strict";function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(r(2791)),a=r(135),s=r(365);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;return f(e)}(this,e)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(c,e);var t,n,r,i=h(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(f(e=i.call.apply(i,[this].concat(n))),"callPlayer",a.callPlayer),v(f(e),"playerID",e.props.config.playerId||"".concat("twitch-player-").concat((0,a.randomString)())),v(f(e),"mute",(function(){e.callPlayer("setMuted",!0)})),v(f(e),"unmute",(function(){e.callPlayer("setMuted",!1)})),e}return t=c,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e,t){var n=this,r=this.props,i=r.playsinline,o=r.onError,c=r.config,l=r.controls,d=s.MATCH_URL_TWITCH_CHANNEL.test(e),h=d?e.match(s.MATCH_URL_TWITCH_CHANNEL)[1]:e.match(s.MATCH_URL_TWITCH_VIDEO)[1];t?d?this.player.setChannel(h):this.player.setVideo("v"+h):(0,a.getSDK)("https://player.twitch.tv/js/embed/v1.js","Twitch").then((function(t){n.player=new t.Player(n.playerID,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({video:d?"":h,channel:d?h:"",height:"100%",width:"100%",playsinline:i,autoplay:n.props.playing,muted:n.props.muted,controls:!!d||l,time:(0,a.parseStartTime)(e)},c.options));var r=t.Player,o=r.READY,s=r.PLAYING,f=r.PAUSE,p=r.ENDED,g=r.ONLINE,m=r.OFFLINE,y=r.SEEK;n.player.addEventListener(o,n.props.onReady),n.player.addEventListener(s,n.props.onPlay),n.player.addEventListener(f,n.props.onPause),n.player.addEventListener(p,n.props.onEnded),n.player.addEventListener(y,n.props.onSeek),n.player.addEventListener(g,n.props.onLoaded),n.player.addEventListener(m,n.props.onLoaded)}),o)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("pause")}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){return o.default.createElement("div",{style:{width:"100%",height:"100%"},id:this.playerID})}}],n&&l(t.prototype,n),r&&l(t,r),c}(o.Component);n.default=g,v(g,"displayName","Twitch"),v(g,"canPlay",s.canPlay.twitch),v(g,"loopOnEnded",!0)},5561:function(t,n,r){"use strict";function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(r(2791)),a=r(135),s=r(365);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;return f(e)}(this,e)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(c,e);var t,n,r,i=h(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(f(e=i.call.apply(i,[this].concat(n))),"callPlayer",a.callPlayer),v(f(e),"mute",(function(){e.setVolume(0)})),v(f(e),"unmute",(function(){null!==e.props.volume&&e.setVolume(e.props.volume)})),v(f(e),"ref",(function(t){e.container=t})),e}return t=c,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this,n=this.props,r=n.playing,i=n.config,o=n.onError,c=n.onDuration,l=e&&e.match(s.MATCH_URL_VIDYARD)[1];this.player&&this.stop(),(0,a.getSDK)("https://play.vidyard.com/embed/v4.js","VidyardV4","onVidyardAPI").then((function(e){t.container&&(e.api.addReadyListener((function(e,n){t.player||(t.player=n,t.player.on("ready",t.props.onReady),t.player.on("play",t.props.onPlay),t.player.on("pause",t.props.onPause),t.player.on("seek",t.props.onSeek),t.player.on("playerComplete",t.props.onEnded))}),l),e.api.renderPlayer(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({uuid:l,container:t.container,autoplay:r?1:0},i.options)),e.api.getPlayerMetadata(l).then((function(e){t.duration=e.length_in_seconds,c(e.length_in_seconds)})))}),o)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){window.VidyardV4.api.destroyPlayer(this.player)}},{key:"seekTo",value:function(e){this.callPlayer("seek",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackSpeed",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.callPlayer("currentTime")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return o.default.createElement("div",{style:e},o.default.createElement("div",{ref:this.ref}))}}],n&&l(t.prototype,n),r&&l(t,r),c}(o.Component);n.default=g,v(g,"displayName","Vidyard"),v(g,"canPlay",s.canPlay.vidyard)},7600:function(t,n,r){"use strict";function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(r(2791)),a=r(135),s=r(365);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;return f(e)}(this,e)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,e);var t,n,r,i=h(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(f(e=i.call.apply(i,[this].concat(n))),"callPlayer",a.callPlayer),v(f(e),"duration",null),v(f(e),"currentTime",null),v(f(e),"secondsLoaded",null),v(f(e),"mute",(function(){e.setMuted(!0)})),v(f(e),"unmute",(function(){e.setMuted(!1)})),v(f(e),"ref",(function(t){e.container=t})),e}return t=s,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this;this.duration=null,(0,a.getSDK)("https://player.vimeo.com/api/player.js","Vimeo").then((function(n){if(t.container){var r=t.props.config,i=r.playerOptions,o=r.title;t.player=new n.Player(t.container,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({url:e,autoplay:t.props.playing,muted:t.props.muted,loop:t.props.loop,playsinline:t.props.playsinline,controls:t.props.controls},i)),t.player.ready().then((function(){var e=t.container.querySelector("iframe");e.style.width="100%",e.style.height="100%",o&&(e.title=o)})).catch(t.props.onError),t.player.on("loaded",(function(){t.props.onReady(),t.refreshDuration()})),t.player.on("play",(function(){t.props.onPlay(),t.refreshDuration()})),t.player.on("pause",t.props.onPause),t.player.on("seeked",(function(e){return t.props.onSeek(e.seconds)})),t.player.on("ended",t.props.onEnded),t.player.on("error",t.props.onError),t.player.on("timeupdate",(function(e){var n=e.seconds;t.currentTime=n})),t.player.on("progress",(function(e){var n=e.seconds;t.secondsLoaded=n})),t.player.on("bufferstart",t.props.onBuffer),t.player.on("bufferend",t.props.onBufferEnd),t.player.on("playbackratechange",(function(e){return t.props.onPlaybackRateChange(e.playbackRate)}))}}),this.props.onError)}},{key:"refreshDuration",value:function(){var e=this;this.player.getDuration().then((function(t){e.duration=t}))}},{key:"play",value:function(){var e=this.callPlayer("play");e&&e.catch(this.props.onError)}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.callPlayer("unload")}},{key:"seekTo",value:function(e){this.callPlayer("setCurrentTime",e)}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",e)}},{key:"setMuted",value:function(e){this.callPlayer("setMuted",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackRate",e)}},{key:"getDuration",value:function(){return this.duration}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getSecondsLoaded",value:function(){return this.secondsLoaded}},{key:"render",value:function(){var e={width:"100%",height:"100%",overflow:"hidden",display:this.props.display};return o.default.createElement("div",{key:this.props.url,ref:this.ref,style:e})}}],n&&l(t.prototype,n),r&&l(t,r),s}(o.Component);n.default=g,v(g,"displayName","Vimeo"),v(g,"canPlay",s.canPlay.vimeo),v(g,"forceLoad",!0)},5793:function(t,n,r){"use strict";function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(r(2791)),a=r(135),s=r(365);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function f(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=v(t);if(n){var o=v(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;return p(e)}(this,e)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(c,e);var t,n,r,i=f(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(p(e=i.call.apply(i,[this].concat(n))),"callPlayer",a.callPlayer),g(p(e),"playerID",e.props.config.playerId||"".concat("wistia-player-").concat((0,a.randomString)())),g(p(e),"onPlay",(function(){var t;return(t=e.props).onPlay.apply(t,arguments)})),g(p(e),"onPause",(function(){var t;return(t=e.props).onPause.apply(t,arguments)})),g(p(e),"onSeek",(function(){var t;return(t=e.props).onSeek.apply(t,arguments)})),g(p(e),"onEnded",(function(){var t;return(t=e.props).onEnded.apply(t,arguments)})),g(p(e),"onPlaybackRateChange",(function(){var t;return(t=e.props).onPlaybackRateChange.apply(t,arguments)})),g(p(e),"mute",(function(){e.callPlayer("mute")})),g(p(e),"unmute",(function(){e.callPlayer("unmute")})),e}return t=c,n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"load",value:function(e){var t=this,n=this.props,r=n.playing,i=n.muted,o=n.controls,s=n.onReady,c=n.config,u=n.onError;(0,a.getSDK)("https://fast.wistia.com/assets/external/E-v1.js","Wistia").then((function(e){c.customControls&&c.customControls.forEach((function(t){return e.defineControl(t)})),window._wq=window._wq||[],window._wq.push({id:t.playerID,options:l({autoPlay:r,silentAutoPlay:"allow",muted:i,controlsVisibleOnLoad:o,fullscreenButton:o,playbar:o,playbackRateControl:o,qualityControl:o,volumeControl:o,settingsControl:o,smallPlayButton:o},c.options),onReady:function(e){t.player=e,t.unbind(),t.player.bind("play",t.onPlay),t.player.bind("pause",t.onPause),t.player.bind("seek",t.onSeek),t.player.bind("end",t.onEnded),t.player.bind("playbackratechange",t.onPlaybackRateChange),s()}})}),u)}},{key:"unbind",value:function(){this.player.unbind("play",this.onPlay),this.player.unbind("pause",this.onPause),this.player.unbind("seek",this.onSeek),this.player.unbind("end",this.onEnded),this.player.unbind("playbackratechange",this.onPlaybackRateChange)}},{key:"play",value:function(){this.callPlayer("play")}},{key:"pause",value:function(){this.callPlayer("pause")}},{key:"stop",value:function(){this.unbind(),this.callPlayer("remove")}},{key:"seekTo",value:function(e){this.callPlayer("time",e)}},{key:"setVolume",value:function(e){this.callPlayer("volume",e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("playbackRate",e)}},{key:"getDuration",value:function(){return this.callPlayer("duration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("time")}},{key:"getSecondsLoaded",value:function(){return null}},{key:"render",value:function(){var e=this.props.url,t=e&&e.match(s.MATCH_URL_WISTIA)[1],n="wistia_embed wistia_async_".concat(t);return o.default.createElement("div",{id:this.playerID,key:t,className:n,style:{width:"100%",height:"100%"}})}}],n&&d(t.prototype,n),r&&d(t,r),c}(o.Component);n.default=m,g(m,"displayName","Wistia"),g(m,"canPlay",s.canPlay.wistia),g(m,"loopOnEnded",!0)},8322:function(t,n,r){"use strict";function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(r(2791)),a=r(135),s=r(365);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function v(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=m(t);if(n){var o=m(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;return g(e)}(this,e)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=/[?&](?:list|channel)=([a-zA-Z0-9_-]+)/,_=/user\/([a-zA-Z0-9_-]+)\/?/,E=/youtube-nocookie\.com/,S=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,n,r,i=v(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(g(e=i.call.apply(i,[this].concat(n))),"callPlayer",a.callPlayer),y(g(e),"parsePlaylist",(function(t){return t instanceof Array?{listType:"playlist",playlist:t.map(e.getID).join(",")}:b.test(t)?{listType:"playlist",list:d(t.match(b),2)[1].replace(/^UC/,"UU")}:_.test(t)?{listType:"user_uploads",list:d(t.match(_),2)[1]}:{}})),y(g(e),"onStateChange",(function(t){var n=t.data,r=e.props,i=r.onPlay,o=r.onPause,a=r.onBuffer,s=r.onBufferEnd,c=r.onEnded,u=r.onReady,l=r.loop,d=r.config,h=d.playerVars,f=d.onUnstarted,p=window.YT.PlayerState,v=p.UNSTARTED,g=p.PLAYING,m=p.PAUSED,y=p.BUFFERING,b=p.ENDED,_=p.CUED;if(n===v&&f(),n===g&&(i(),s()),n===m&&o(),n===y&&a(),n===b){var E=!!e.callPlayer("getPlaylist");l&&!E&&(h.start?e.seekTo(h.start):e.play()),c()}n===_&&u()})),y(g(e),"mute",(function(){e.callPlayer("mute")})),y(g(e),"unmute",(function(){e.callPlayer("unMute")})),y(g(e),"ref",(function(t){e.container=t})),e}return t=c,(n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"getID",value:function(e){return!e||e instanceof Array||b.test(e)?null:e.match(s.MATCH_URL_YOUTUBE)[1]}},{key:"load",value:function(e,t){var n=this,r=this.props,i=r.playing,o=r.muted,s=r.playsinline,c=r.controls,u=r.loop,d=r.config,h=r.onError,f=d.playerVars,p=d.embedOptions,v=this.getID(e);if(t)return b.test(e)||_.test(e)||e instanceof Array?void this.player.loadPlaylist(this.parsePlaylist(e)):void this.player.cueVideoById({videoId:v,startSeconds:(0,a.parseStartTime)(e)||f.start,endSeconds:(0,a.parseEndTime)(e)||f.end});(0,a.getSDK)("https://www.youtube.com/iframe_api","YT","onYouTubeIframeAPIReady",(function(e){return e.loaded})).then((function(t){n.container&&(n.player=new t.Player(n.container,l({width:"100%",height:"100%",videoId:v,playerVars:l(l({autoplay:i?1:0,mute:o?1:0,controls:c?1:0,start:(0,a.parseStartTime)(e),end:(0,a.parseEndTime)(e),origin:window.location.origin,playsinline:s?1:0},n.parsePlaylist(e)),f),events:{onReady:function(){u&&n.player.setLoop(!0),n.props.onReady()},onPlaybackRateChange:function(e){return n.props.onPlaybackRateChange(e.data)},onStateChange:n.onStateChange,onError:function(e){return h(e.data)}},host:E.test(e)?"https://www.youtube-nocookie.com":void 0},p)))}),h),p.events&&console.warn("Using `embedOptions.events` will likely break things. Use ReactPlayer\u2019s callback props instead, eg onReady, onPlay, onPause")}},{key:"play",value:function(){this.callPlayer("playVideo")}},{key:"pause",value:function(){this.callPlayer("pauseVideo")}},{key:"stop",value:function(){document.body.contains(this.callPlayer("getIframe"))&&this.callPlayer("stopVideo")}},{key:"seekTo",value:function(e){this.callPlayer("seekTo",e),this.props.playing||this.pause()}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackRate",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return this.callPlayer("getVideoLoadedFraction")*this.getDuration()}},{key:"render",value:function(){var e={width:"100%",height:"100%",display:this.props.display};return o.default.createElement("div",{style:e},o.default.createElement("div",{ref:this.ref}))}}])&&f(t.prototype,n),r&&f(t,r),c}(o.Component);n.default=S,y(S,"displayName","YouTube"),y(S,"canPlay",s.canPlay.youtube)},4687:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(2791),i=n(135),o=n(365);function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}var u=[{key:"youtube",name:"YouTube",canPlay:o.canPlay.youtube,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return c(n(8322))}))}))},{key:"soundcloud",name:"SoundCloud",canPlay:o.canPlay.soundcloud,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return c(n(1801))}))}))},{key:"vimeo",name:"Vimeo",canPlay:o.canPlay.vimeo,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return c(n(7600))}))}))},{key:"facebook",name:"Facebook",canPlay:o.canPlay.facebook,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return c(n(4793))}))}))},{key:"streamable",name:"Streamable",canPlay:o.canPlay.streamable,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return c(n(1286))}))}))},{key:"wistia",name:"Wistia",canPlay:o.canPlay.wistia,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return c(n(5793))}))}))},{key:"twitch",name:"Twitch",canPlay:o.canPlay.twitch,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return c(n(6741))}))}))},{key:"dailymotion",name:"DailyMotion",canPlay:o.canPlay.dailymotion,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return c(n(4303))}))}))},{key:"mixcloud",name:"Mixcloud",canPlay:o.canPlay.mixcloud,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return c(n(2732))}))}))},{key:"vidyard",name:"Vidyard",canPlay:o.canPlay.vidyard,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return c(n(5561))}))}))},{key:"kaltura",name:"Kaltura",canPlay:o.canPlay.kaltura,lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return c(n(9332))}))}))},{key:"file",name:"FilePlayer",canPlay:o.canPlay.file,canEnablePIP:function(e){return o.canPlay.file(e)&&(document.pictureInPictureEnabled||(0,i.supportsWebKitPresentationMode)())&&!o.AUDIO_EXTENSIONS.test(e)},lazyPlayer:(0,r.lazy)((function(){return Promise.resolve().then((function(){return c(n(8997))}))}))}];t.default=u},9174:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=t.propTypes=void 0;var r,i=(r=n(2007))&&r.__esModule?r:{default:r};var o=i.default.string,a=i.default.bool,s=i.default.number,c=i.default.array,u=i.default.oneOfType,l=i.default.shape,d=i.default.object,h=i.default.func,f=i.default.node,p={url:u([o,c,d]),playing:a,loop:a,controls:a,volume:s,muted:a,playbackRate:s,width:u([o,s]),height:u([o,s]),style:d,progressInterval:s,playsinline:a,pip:a,stopOnUnmount:a,light:u([a,o,d]),playIcon:f,previewTabIndex:s,fallback:f,oEmbedUrl:o,wrapper:u([o,h,l({render:h.isRequired})]),config:l({soundcloud:l({options:d}),youtube:l({playerVars:d,embedOptions:d,onUnstarted:h}),facebook:l({appId:o,version:o,playerId:o,attributes:d}),dailymotion:l({params:d}),vimeo:l({playerOptions:d,title:o}),file:l({attributes:d,tracks:c,forceVideo:a,forceAudio:a,forceHLS:a,forceSafariHLS:a,forceDASH:a,forceFLV:a,hlsOptions:d,hlsVersion:o,dashVersion:o,flvVersion:o}),wistia:l({options:d,playerId:o,customControls:c}),mixcloud:l({options:d}),twitch:l({options:d,playerId:o}),vidyard:l({options:d})}),onReady:h,onStart:h,onPlay:h,onPause:h,onBuffer:h,onBufferEnd:h,onEnded:h,onError:h,onDuration:h,onSeek:h,onPlaybackRateChange:h,onProgress:h,onClickPreview:h,onEnablePIP:h,onDisablePIP:h};t.propTypes=p;var v=function(){},g={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:v},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0"},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:v,onStart:v,onPlay:v,onPause:v,onBuffer:v,onBufferEnd:v,onEnded:v,onError:v,onDuration:v,onSeek:v,onPlaybackRateChange:v,onProgress:v,onClickPreview:v,onEnablePIP:v,onDisablePIP:v};t.defaultProps=g},135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseStartTime=function(e){return h(e,c)},t.parseEndTime=function(e){return h(e,u)},t.randomString=function(){return Math.random().toString(36).substr(2,5)},t.queryString=function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")},t.getSDK=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.default,a=f(t);if(a&&i(a))return Promise.resolve(a);return new Promise((function(r,i){if(p[e])p[e].push({resolve:r,reject:i});else{p[e]=[{resolve:r,reject:i}];var a=function(t){p[e].forEach((function(e){return e.resolve(t)}))};if(n){var s=window[n];window[n]=function(){s&&s(),a(f(t))}}o(e,(function(r){r?(p[e].forEach((function(e){return e.reject(r)})),p[e]=null):n||a(f(t))}))}}))},t.getConfig=function(e,t){return(0,i.default)(t.config,e.config)},t.omit=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=(t=[]).concat.apply(t,r),a={},s=Object.keys(e),c=0,u=s;c<u.length;c++){var l=u[c];-1===o.indexOf(l)&&(a[l]=e[l])}return a},t.callPlayer=function(e){var t;if(!this.player||!this.player[e]){var n="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(e,"%c \u2013 ");return this.player?this.player[e]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(t=this.player)[e].apply(t,i)},t.isMediaStream=function(e){return"undefined"!==typeof window&&"undefined"!==typeof window.MediaStream&&e instanceof window.MediaStream},t.isBlobUrl=function(e){return/^blob:/.test(e)},t.supportsWebKitPresentationMode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("video"),t=!1===/iPhone|iPod/.test(navigator.userAgent);return e.webkitSupportsPresentationMode&&"function"===typeof e.webkitSetPresentationMode&&t};var r=o(n(5102)),i=o(n(9948));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=/[?&#](?:start|t)=([0-9hms]+)/,u=/[?&#]end=([0-9hms]+)/,l=/(\d+)(h|m|s)/g,d=/^\d+$/;function h(e,t){if(!(e instanceof Array)){var n=e.match(t);if(n){var r=n[1];if(r.match(l))return function(e){var t=0,n=l.exec(e);for(;null!==n;){var r=a(n,3),i=r[1],o=r[2];"h"===o&&(t+=60*parseInt(i,10)*60),"m"===o&&(t+=60*parseInt(i,10)),"s"===o&&(t+=parseInt(i,10)),n=l.exec(e)}return t}(r);if(d.test(r))return parseInt(r)}}}function f(e){return window[e]?window[e]:window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:null}var p={}},1087:function(t,n,r){"use strict";r.d(n,{VK:function(){return d},rU:function(){return p}});var i=r(9439),o=r(2791),a=r(7689),s=r(8278);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function u(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var l=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function d(e){var t=e.basename,n=e.children,r=e.window,c=o.useRef();null==c.current&&(c.current=(0,s.lX)({window:r,v5Compat:!0}));var u=c.current,l=o.useState({action:u.action,location:u.location}),d=(0,i.Z)(l,2),h=d[0],f=d[1];return o.useLayoutEffect((function(){return u.listen(f)}),[u]),o.createElement(a.F0,{basename:t,children:n,location:h.location,navigationType:h.action,navigator:u})}var h="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,f=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,p=o.forwardRef((function(t,n){var r,i=t.onClick,d=t.relative,p=t.reloadDocument,v=t.replace,g=t.state,m=t.target,y=t.to,b=t.preventScrollReset,_=u(t,l),E=o.useContext(a.Us).basename,S=!1;if("string"===typeof y&&f.test(y)&&(r=y,h))try{var w=new URL(window.location.href),x=y.startsWith("//")?new URL(w.protocol+y):new URL(y),T=(0,s.Zn)(x.pathname,E);x.origin===w.origin&&null!=T?y=T+x.search+x.hash:S=!0}catch(e){}var I=(0,a.oQ)(y,{relative:d}),R=function(e,t){var n=void 0===t?{}:t,r=n.target,i=n.replace,c=n.state,u=n.preventScrollReset,l=n.relative,d=(0,a.s0)(),h=(0,a.TH)(),f=(0,a.WU)(e,{relative:l});return o.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==i?i:(0,s.Ep)(h)===(0,s.Ep)(f);d(e,{replace:n,state:c,preventScrollReset:u,relative:l})}}),[h,d,f,i,c,r,e,u,l])}(y,{replace:v,state:g,target:m,preventScrollReset:b,relative:d});return o.createElement("a",c({},_,{href:r||I,onClick:S||p?i:function(e){i&&i(e),e.defaultPrevented||R(e)},ref:n,target:m}))}));var v,g;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(v||(v={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(g||(g={}))},7689:function(e,t,n){"use strict";n.d(t,{AW:function(){return M},F0:function(){return U},Fg:function(){return L},TH:function(){return _},Us:function(){return p},WU:function(){return w},Z5:function(){return V},oQ:function(){return y},s0:function(){return S}});var r=n(3433),i=n(5671),o=n(3144),a=n(136),s=n(7277),c=n(2791),u=n(8278);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}var d=c.createContext(null);var h=c.createContext(null);var f=c.createContext(null);var p=c.createContext(null);var v=c.createContext(null);var g=c.createContext({outlet:null,matches:[],isDataRoute:!1});var m=c.createContext(null);function y(e,t){var n=(void 0===t?{}:t).relative;b()||(0,u.J0)(!1);var r=c.useContext(p),i=r.basename,o=r.navigator,a=w(e,{relative:n}),s=a.hash,l=a.pathname,d=a.search,h=l;return"/"!==i&&(h="/"===l?i:(0,u.RQ)([i,l])),o.createHref({pathname:h,search:d,hash:s})}function b(){return null!=c.useContext(v)}function _(){return b()||(0,u.J0)(!1),c.useContext(v).location}function E(e){c.useContext(p).static||c.useLayoutEffect(e)}function S(){return c.useContext(g).isDataRoute?function(){var e=N(I.UseNavigateStable).router,t=D(R.UseNavigateStable),n=c.useRef(!1);return E((function(){n.current=!0})),c.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,l({fromRouteId:t},i)))}),[e,t])}():function(){b()||(0,u.J0)(!1);var e=c.useContext(p),t=e.basename,n=e.navigator,r=c.useContext(g).matches,i=_().pathname,o=JSON.stringify((0,u.Zq)(r).map((function(e){return e.pathnameBase}))),a=c.useRef(!1);return E((function(){a.current=!0})),c.useCallback((function(e,r){if(void 0===r&&(r={}),a.current)if("number"!==typeof e){var s=(0,u.pC)(e,JSON.parse(o),i,"path"===r.relative);"/"!==t&&(s.pathname="/"===s.pathname?t:(0,u.RQ)([t,s.pathname])),(r.replace?n.replace:n.push)(s,r.state,r)}else n.go(e)}),[t,n,o,i])}()}function w(e,t){var n=(void 0===t?{}:t).relative,r=c.useContext(g).matches,i=_().pathname,o=JSON.stringify((0,u.Zq)(r).map((function(e){return e.pathnameBase})));return c.useMemo((function(){return(0,u.pC)(e,JSON.parse(o),i,"path"===n)}),[e,o,i,n])}function x(e,t,n){b()||(0,u.J0)(!1);var r,i=c.useContext(p).navigator,o=c.useContext(g).matches,a=o[o.length-1],s=a?a.params:{},d=(a&&a.pathname,a?a.pathnameBase:"/"),h=(a&&a.route,_());if(t){var f,m="string"===typeof t?(0,u.cP)(t):t;"/"===d||(null==(f=m.pathname)?void 0:f.startsWith(d))||(0,u.J0)(!1),r=m}else r=h;var y=r.pathname||"/",E="/"===d?y:y.slice(d.length)||"/",S=(0,u.fp)(e,{pathname:E});var w=A(S&&S.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:(0,u.RQ)([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:(0,u.RQ)([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,n);return t&&w?c.createElement(v.Provider,{value:{location:l({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:u.aU.Pop}},w):w}function T(){var e=function(){var e,t=c.useContext(m),n=j(R.UseRouteError),r=D(R.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=(0,u.WK)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},t),n?c.createElement("pre",{style:i},n):null,null)}var I,R,k=c.createElement(T,null),O=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return(0,o.Z)(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?c.createElement(g.Provider,{value:this.props.routeContext},c.createElement(m.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(c.Component);function C(e){var t=e.routeContext,n=e.match,r=e.children,i=c.useContext(d);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),c.createElement(g.Provider,{value:t},r)}function A(e,t,n){var r;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var i;if(null==(i=n)||!i.errors)return null;e=n.matches}var o=e,a=null==(r=n)?void 0:r.errors;if(null!=a){var s=o.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));s>=0||(0,u.J0)(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,r,i){var s=r.route.id?null==a?void 0:a[r.route.id]:null,u=null;n&&(u=r.route.errorElement||k);var l=t.concat(o.slice(0,i+1)),d=function(){var t;return t=s?u:r.route.Component?c.createElement(r.route.Component,null):r.route.element?r.route.element:e,c.createElement(C,{match:r,routeContext:{outlet:e,matches:l,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?c.createElement(O,{location:n.location,revalidation:n.revalidation,component:u,error:s,children:d(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):d()}),null)}function N(e){var t=c.useContext(d);return t||(0,u.J0)(!1),t}function j(e){var t=c.useContext(h);return t||(0,u.J0)(!1),t}function D(e){var t=function(e){var t=c.useContext(g);return t||(0,u.J0)(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||(0,u.J0)(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(I||(I={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(R||(R={}));var P;function L(e){var t=e.to,n=e.replace,r=e.state,i=e.relative;b()||(0,u.J0)(!1);var o=c.useContext(g).matches,a=_().pathname,s=S(),l=(0,u.pC)(t,(0,u.Zq)(o).map((function(e){return e.pathnameBase})),a,"path"===i),d=JSON.stringify(l);return c.useEffect((function(){return s(JSON.parse(d),{replace:n,state:r,relative:i})}),[s,d,i,n,r]),null}function M(e){(0,u.J0)(!1)}function U(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,i=void 0===r?null:r,o=e.location,a=e.navigationType,s=void 0===a?u.aU.Pop:a,l=e.navigator,d=e.static,h=void 0!==d&&d;b()&&(0,u.J0)(!1);var f=n.replace(/^\/*/,"/"),g=c.useMemo((function(){return{basename:f,navigator:l,static:h}}),[f,l,h]);"string"===typeof o&&(o=(0,u.cP)(o));var m=o,y=m.pathname,_=void 0===y?"/":y,E=m.search,S=void 0===E?"":E,w=m.hash,x=void 0===w?"":w,T=m.state,I=void 0===T?null:T,R=m.key,k=void 0===R?"default":R,O=c.useMemo((function(){var e=(0,u.Zn)(_,f);return null==e?null:{location:{pathname:e,search:S,hash:x,state:I,key:k},navigationType:s}}),[f,_,S,x,I,k,s]);return null==O?null:c.createElement(p.Provider,{value:g},c.createElement(v.Provider,{children:i,value:O}))}function V(e){var t=e.children,n=e.location;return x(B(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(P||(P={}));var F=new Promise((function(){}));c.Component;function B(e,t){void 0===t&&(t=[]);var n=[];return c.Children.forEach(e,(function(e,i){if(c.isValidElement(e)){var o=[].concat((0,r.Z)(t),[i]);if(e.type!==c.Fragment){e.type!==M&&(0,u.J0)(!1),e.props.index&&e.props.children&&(0,u.J0)(!1);var a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=B(e.props.children,o)),n.push(a)}else n.push.apply(n,B(e.props.children,o))}})),n}},8436:function(t,n,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.PrevArrow=n.NextArrow=void 0;var o=c(r(2791)),a=c(r(1694)),s=r(8026);function c(e){return e&&e.__esModule?e:{default:e}}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function y(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=b(t);if(n){var o=b(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var _=function(e){g(n,e);var t=y(n);function n(){return f(this,n),t.apply(this,arguments)}return v(n,[{key:"clickHandler",value:function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)}},{key:"render",value:function(){var e={"slick-arrow":!0,"slick-prev":!0},t=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(0===this.props.currentSlide||this.props.slideCount<=this.props.slidesToShow)&&(e["slick-disabled"]=!0,t=null);var n={key:"0","data-role":"none",className:(0,a.default)(e),style:{display:"block"},onClick:t},r={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount};return this.props.prevArrow?o.default.cloneElement(this.props.prevArrow,d(d({},n),r)):o.default.createElement("button",u({key:"0",type:"button"},n)," ","Previous")}}]),n}(o.default.PureComponent);n.PrevArrow=_;var E=function(e){g(n,e);var t=y(n);function n(){return f(this,n),t.apply(this,arguments)}return v(n,[{key:"clickHandler",value:function(e,t){t&&t.preventDefault(),this.props.clickHandler(e,t)}},{key:"render",value:function(){var e={"slick-arrow":!0,"slick-next":!0},t=this.clickHandler.bind(this,{message:"next"});(0,s.canGoNext)(this.props)||(e["slick-disabled"]=!0,t=null);var n={key:"1","data-role":"none",className:(0,a.default)(e),style:{display:"block"},onClick:t},r={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount};return this.props.nextArrow?o.default.cloneElement(this.props.nextArrow,d(d({},n),r)):o.default.createElement("button",u({key:"1",type:"button"},n)," ","Next")}}]),n}(o.default.PureComponent);n.NextArrow=E},5484:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2791))&&r.__esModule?r:{default:r};var o={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(e){return i.default.createElement("ul",{style:{display:"block"}},e)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(e){return i.default.createElement("button",null,e+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0};t.default=o},3800:function(t,n,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Dots=void 0;var o=c(r(2791)),a=c(r(1694)),s=r(8026);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function f(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var v=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(c,e);var t,n,r,i=f(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.apply(this,arguments)}return t=c,n=[{key:"clickHandler",value:function(e,t){t.preventDefault(),this.props.clickHandler(e)}},{key:"render",value:function(){for(var e,t=this.props,n=t.onMouseEnter,r=t.onMouseOver,i=t.onMouseLeave,c=t.infinite,d=t.slidesToScroll,h=t.slidesToShow,f=t.slideCount,p=t.currentSlide,v=(e={slideCount:f,slidesToScroll:d,slidesToShow:h,infinite:c}).infinite?Math.ceil(e.slideCount/e.slidesToScroll):Math.ceil((e.slideCount-e.slidesToShow)/e.slidesToScroll)+1,g={onMouseEnter:n,onMouseOver:r,onMouseLeave:i},m=[],y=0;y<v;y++){var b=(y+1)*d-1,_=c?b:(0,s.clamp)(b,0,f-1),E=_-(d-1),S=c?E:(0,s.clamp)(E,0,f-1),w=(0,a.default)({"slick-active":c?p>=S&&p<=_:p===S}),x={message:"dots",index:y,slidesToScroll:d,currentSlide:p},T=this.clickHandler.bind(this,x);m=m.concat(o.default.createElement("li",{key:y,className:w},o.default.cloneElement(this.props.customPaging(y),{onClick:T})))}return o.default.cloneElement(this.props.appendDots(m),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:this.props.dotsClass},g))}}],n&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.default.PureComponent);n.Dots=v},5717:function(e,t,n){"use strict";var r;t.Z=void 0;var i=((r=n(3178))&&r.__esModule?r:{default:r}).default;t.Z=i},1382:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};t.default=n},8293:function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.InnerSlider=void 0;var i=f(r(2791)),o=f(r(1382)),a=f(r(5095)),s=f(r(1694)),c=r(8026),u=r(4931),l=r(3800),d=r(8436),h=f(r(474));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function E(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=w(t);if(n){var i=w(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}(this,e)}}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(m,e);var t,n,r,f=E(m);function m(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),x(S(t=f.call(this,e)),"listRefHandler",(function(e){return t.list=e})),x(S(t),"trackRefHandler",(function(e){return t.track=e})),x(S(t),"adaptHeight",(function(){if(t.props.adaptiveHeight&&t.list){var e=t.list.querySelector('[data-index="'.concat(t.state.currentSlide,'"]'));t.list.style.height=(0,c.getHeight)(e)+"px"}})),x(S(t),"componentDidMount",(function(){if(t.props.onInit&&t.props.onInit(),t.props.lazyLoad){var e=(0,c.getOnDemandLazySlides)(y(y({},t.props),t.state));e.length>0&&(t.setState((function(t){return{lazyLoadedList:t.lazyLoadedList.concat(e)}})),t.props.onLazyLoad&&t.props.onLazyLoad(e))}var n=y({listRef:t.list,trackRef:t.track},t.props);t.updateState(n,!0,(function(){t.adaptHeight(),t.props.autoplay&&t.autoPlay("update")})),"progressive"===t.props.lazyLoad&&(t.lazyLoadTimer=setInterval(t.progressiveLazyLoad,1e3)),t.ro=new h.default((function(){t.state.animating?(t.onWindowResized(!1),t.callbackTimers.push(setTimeout((function(){return t.onWindowResized()}),t.props.speed))):t.onWindowResized()})),t.ro.observe(t.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),(function(e){e.onfocus=t.props.pauseOnFocus?t.onSlideFocus:null,e.onblur=t.props.pauseOnFocus?t.onSlideBlur:null})),window.addEventListener?window.addEventListener("resize",t.onWindowResized):window.attachEvent("onresize",t.onWindowResized)})),x(S(t),"componentWillUnmount",(function(){t.animationEndCallback&&clearTimeout(t.animationEndCallback),t.lazyLoadTimer&&clearInterval(t.lazyLoadTimer),t.callbackTimers.length&&(t.callbackTimers.forEach((function(e){return clearTimeout(e)})),t.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",t.onWindowResized):window.detachEvent("onresize",t.onWindowResized),t.autoplayTimer&&clearInterval(t.autoplayTimer),t.ro.disconnect()})),x(S(t),"componentDidUpdate",(function(e){if(t.checkImagesLoad(),t.props.onReInit&&t.props.onReInit(),t.props.lazyLoad){var n=(0,c.getOnDemandLazySlides)(y(y({},t.props),t.state));n.length>0&&(t.setState((function(e){return{lazyLoadedList:e.lazyLoadedList.concat(n)}})),t.props.onLazyLoad&&t.props.onLazyLoad(n))}t.adaptHeight();var r=y(y({listRef:t.list,trackRef:t.track},t.props),t.state),o=t.didPropsChange(e);o&&t.updateState(r,o,(function(){t.state.currentSlide>=i.default.Children.count(t.props.children)&&t.changeSlide({message:"index",index:i.default.Children.count(t.props.children)-t.props.slidesToShow,currentSlide:t.state.currentSlide}),t.props.autoplay?t.autoPlay("update"):t.pause("paused")}))})),x(S(t),"onWindowResized",(function(e){t.debouncedResize&&t.debouncedResize.cancel(),t.debouncedResize=(0,a.default)((function(){return t.resizeWindow(e)}),50),t.debouncedResize()})),x(S(t),"resizeWindow",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(Boolean(t.track&&t.track.node)){var n=y(y({listRef:t.list,trackRef:t.track},t.props),t.state);t.updateState(n,e,(function(){t.props.autoplay?t.autoPlay("update"):t.pause("paused")})),t.setState({animating:!1}),clearTimeout(t.animationEndCallback),delete t.animationEndCallback}})),x(S(t),"updateState",(function(e,n,r){var o=(0,c.initializedState)(e);e=y(y(y({},e),o),{},{slideIndex:o.currentSlide});var a=(0,c.getTrackLeft)(e);e=y(y({},e),{},{left:a});var s=(0,c.getTrackCSS)(e);(n||i.default.Children.count(t.props.children)!==i.default.Children.count(e.children))&&(o.trackStyle=s),t.setState(o,r)})),x(S(t),"ssrInit",(function(){if(t.props.variableWidth){var e=0,n=0,r=[],o=(0,c.getPreClones)(y(y(y({},t.props),t.state),{},{slideCount:t.props.children.length})),a=(0,c.getPostClones)(y(y(y({},t.props),t.state),{},{slideCount:t.props.children.length}));t.props.children.forEach((function(t){r.push(t.props.style.width),e+=t.props.style.width}));for(var s=0;s<o;s++)n+=r[r.length-1-s],e+=r[r.length-1-s];for(var u=0;u<a;u++)e+=r[u];for(var l=0;l<t.state.currentSlide;l++)n+=r[l];var d={width:e+"px",left:-n+"px"};if(t.props.centerMode){var h="".concat(r[t.state.currentSlide],"px");d.left="calc(".concat(d.left," + (100% - ").concat(h,") / 2 ) ")}return{trackStyle:d}}var f=i.default.Children.count(t.props.children),p=y(y(y({},t.props),t.state),{},{slideCount:f}),v=(0,c.getPreClones)(p)+(0,c.getPostClones)(p)+f,g=100/t.props.slidesToShow*v,m=100/v,b=-m*((0,c.getPreClones)(p)+t.state.currentSlide)*g/100;return t.props.centerMode&&(b+=(100-m*g/100)/2),{slideWidth:m+"%",trackStyle:{width:g+"%",left:b+"%"}}})),x(S(t),"checkImagesLoad",(function(){var e=t.list&&t.list.querySelectorAll&&t.list.querySelectorAll(".slick-slide img")||[],n=e.length,r=0;Array.prototype.forEach.call(e,(function(e){var i=function(){return++r&&r>=n&&t.onWindowResized()};if(e.onclick){var o=e.onclick;e.onclick=function(){o(),e.parentNode.focus()}}else e.onclick=function(){return e.parentNode.focus()};e.onload||(t.props.lazyLoad?e.onload=function(){t.adaptHeight(),t.callbackTimers.push(setTimeout(t.onWindowResized,t.props.speed))}:(e.onload=i,e.onerror=function(){i(),t.props.onLazyLoadError&&t.props.onLazyLoadError()}))}))})),x(S(t),"progressiveLazyLoad",(function(){for(var e=[],n=y(y({},t.props),t.state),r=t.state.currentSlide;r<t.state.slideCount+(0,c.getPostClones)(n);r++)if(t.state.lazyLoadedList.indexOf(r)<0){e.push(r);break}for(var i=t.state.currentSlide-1;i>=-(0,c.getPreClones)(n);i--)if(t.state.lazyLoadedList.indexOf(i)<0){e.push(i);break}e.length>0?(t.setState((function(t){return{lazyLoadedList:t.lazyLoadedList.concat(e)}})),t.props.onLazyLoad&&t.props.onLazyLoad(e)):t.lazyLoadTimer&&(clearInterval(t.lazyLoadTimer),delete t.lazyLoadTimer)})),x(S(t),"slideHandler",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.props,i=r.asNavFor,o=r.beforeChange,a=r.onLazyLoad,s=r.speed,u=r.afterChange,l=t.state.currentSlide,d=(0,c.slideHandler)(y(y(y({index:e},t.props),t.state),{},{trackRef:t.track,useCSS:t.props.useCSS&&!n})),h=d.state,f=d.nextState;if(h){o&&o(l,h.currentSlide);var p=h.lazyLoadedList.filter((function(e){return t.state.lazyLoadedList.indexOf(e)<0}));a&&p.length>0&&a(p),!t.props.waitForAnimate&&t.animationEndCallback&&(clearTimeout(t.animationEndCallback),u&&u(l),delete t.animationEndCallback),t.setState(h,(function(){i&&t.asNavForIndex!==e&&(t.asNavForIndex=e,i.innerSlider.slideHandler(e)),f&&(t.animationEndCallback=setTimeout((function(){var e=f.animating,n=g(f,["animating"]);t.setState(n,(function(){t.callbackTimers.push(setTimeout((function(){return t.setState({animating:e})}),10)),u&&u(h.currentSlide),delete t.animationEndCallback}))}),s))}))}})),x(S(t),"changeSlide",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=y(y({},t.props),t.state),i=(0,c.changeSlide)(r,e);if((0===i||i)&&(!0===n?t.slideHandler(i,n):t.slideHandler(i),t.props.autoplay&&t.autoPlay("update"),t.props.focusOnSelect)){var o=t.list.querySelectorAll(".slick-current");o[0]&&o[0].focus()}})),x(S(t),"clickHandler",(function(e){!1===t.clickable&&(e.stopPropagation(),e.preventDefault()),t.clickable=!0})),x(S(t),"keyHandler",(function(e){var n=(0,c.keyHandler)(e,t.props.accessibility,t.props.rtl);""!==n&&t.changeSlide({message:n})})),x(S(t),"selectHandler",(function(e){t.changeSlide(e)})),x(S(t),"disableBodyScroll",(function(){window.ontouchmove=function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1}})),x(S(t),"enableBodyScroll",(function(){window.ontouchmove=null})),x(S(t),"swipeStart",(function(e){t.props.verticalSwiping&&t.disableBodyScroll();var n=(0,c.swipeStart)(e,t.props.swipe,t.props.draggable);""!==n&&t.setState(n)})),x(S(t),"swipeMove",(function(e){var n=(0,c.swipeMove)(e,y(y(y({},t.props),t.state),{},{trackRef:t.track,listRef:t.list,slideIndex:t.state.currentSlide}));n&&(n.swiping&&(t.clickable=!1),t.setState(n))})),x(S(t),"swipeEnd",(function(e){var n=(0,c.swipeEnd)(e,y(y(y({},t.props),t.state),{},{trackRef:t.track,listRef:t.list,slideIndex:t.state.currentSlide}));if(n){var r=n.triggerSlideHandler;delete n.triggerSlideHandler,t.setState(n),void 0!==r&&(t.slideHandler(r),t.props.verticalSwiping&&t.enableBodyScroll())}})),x(S(t),"touchEnd",(function(e){t.swipeEnd(e),t.clickable=!0})),x(S(t),"slickPrev",(function(){t.callbackTimers.push(setTimeout((function(){return t.changeSlide({message:"previous"})}),0))})),x(S(t),"slickNext",(function(){t.callbackTimers.push(setTimeout((function(){return t.changeSlide({message:"next"})}),0))})),x(S(t),"slickGoTo",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e=Number(e),isNaN(e))return"";t.callbackTimers.push(setTimeout((function(){return t.changeSlide({message:"index",index:e,currentSlide:t.state.currentSlide},n)}),0))})),x(S(t),"play",(function(){var e;if(t.props.rtl)e=t.state.currentSlide-t.props.slidesToScroll;else{if(!(0,c.canGoNext)(y(y({},t.props),t.state)))return!1;e=t.state.currentSlide+t.props.slidesToScroll}t.slideHandler(e)})),x(S(t),"autoPlay",(function(e){t.autoplayTimer&&clearInterval(t.autoplayTimer);var n=t.state.autoplaying;if("update"===e){if("hovered"===n||"focused"===n||"paused"===n)return}else if("leave"===e){if("paused"===n||"focused"===n)return}else if("blur"===e&&("paused"===n||"hovered"===n))return;t.autoplayTimer=setInterval(t.play,t.props.autoplaySpeed+50),t.setState({autoplaying:"playing"})})),x(S(t),"pause",(function(e){t.autoplayTimer&&(clearInterval(t.autoplayTimer),t.autoplayTimer=null);var n=t.state.autoplaying;"paused"===e?t.setState({autoplaying:"paused"}):"focused"===e?"hovered"!==n&&"playing"!==n||t.setState({autoplaying:"focused"}):"playing"===n&&t.setState({autoplaying:"hovered"})})),x(S(t),"onDotsOver",(function(){return t.props.autoplay&&t.pause("hovered")})),x(S(t),"onDotsLeave",(function(){return t.props.autoplay&&"hovered"===t.state.autoplaying&&t.autoPlay("leave")})),x(S(t),"onTrackOver",(function(){return t.props.autoplay&&t.pause("hovered")})),x(S(t),"onTrackLeave",(function(){return t.props.autoplay&&"hovered"===t.state.autoplaying&&t.autoPlay("leave")})),x(S(t),"onSlideFocus",(function(){return t.props.autoplay&&t.pause("focused")})),x(S(t),"onSlideBlur",(function(){return t.props.autoplay&&"focused"===t.state.autoplaying&&t.autoPlay("blur")})),x(S(t),"render",(function(){var e,n,r,o=(0,s.default)("slick-slider",t.props.className,{"slick-vertical":t.props.vertical,"slick-initialized":!0}),a=y(y({},t.props),t.state),h=(0,c.extractObject)(a,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),f=t.props.pauseOnHover;if(h=y(y({},h),{},{onMouseEnter:f?t.onTrackOver:null,onMouseLeave:f?t.onTrackLeave:null,onMouseOver:f?t.onTrackOver:null,focusOnSelect:t.props.focusOnSelect&&t.clickable?t.selectHandler:null}),!0===t.props.dots&&t.state.slideCount>=t.props.slidesToShow){var p=(0,c.extractObject)(a,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),g=t.props.pauseOnDotsHover;p=y(y({},p),{},{clickHandler:t.changeSlide,onMouseEnter:g?t.onDotsLeave:null,onMouseOver:g?t.onDotsOver:null,onMouseLeave:g?t.onDotsLeave:null}),e=i.default.createElement(l.Dots,p)}var m=(0,c.extractObject)(a,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);m.clickHandler=t.changeSlide,t.props.arrows&&(n=i.default.createElement(d.PrevArrow,m),r=i.default.createElement(d.NextArrow,m));var b=null;t.props.vertical&&(b={height:t.state.listHeight});var _=null;!1===t.props.vertical?!0===t.props.centerMode&&(_={padding:"0px "+t.props.centerPadding}):!0===t.props.centerMode&&(_={padding:t.props.centerPadding+" 0px"});var E=y(y({},b),_),S=t.props.touchMove,w={className:"slick-list",style:E,onClick:t.clickHandler,onMouseDown:S?t.swipeStart:null,onMouseMove:t.state.dragging&&S?t.swipeMove:null,onMouseUp:S?t.swipeEnd:null,onMouseLeave:t.state.dragging&&S?t.swipeEnd:null,onTouchStart:S?t.swipeStart:null,onTouchMove:t.state.dragging&&S?t.swipeMove:null,onTouchEnd:S?t.touchEnd:null,onTouchCancel:t.state.dragging&&S?t.swipeEnd:null,onKeyDown:t.props.accessibility?t.keyHandler:null},x={className:o,dir:"ltr",style:t.props.style};return t.props.unslick&&(w={className:"slick-list"},x={className:o}),i.default.createElement("div",x,t.props.unslick?"":n,i.default.createElement("div",v({ref:t.listRefHandler},w),i.default.createElement(u.Track,v({ref:t.trackRefHandler},h),t.props.children)),t.props.unslick?"":r,t.props.unslick?"":e)})),t.list=null,t.track=null,t.state=y(y({},o.default),{},{currentSlide:t.props.initialSlide,slideCount:i.default.Children.count(t.props.children)}),t.callbackTimers=[],t.clickable=!0,t.debouncedResize=null;var n=t.ssrInit();return t.state=y(y({},t.state),n),t}return t=m,(n=[{key:"didPropsChange",value:function(e){for(var t=!1,n=0,r=Object.keys(this.props);n<r.length;n++){var o=r[n];if(!e.hasOwnProperty(o)){t=!0;break}if("object"!==p(e[o])&&"function"!==typeof e[o]&&e[o]!==this.props[o]){t=!0;break}}return t||i.default.Children.count(this.props.children)!==i.default.Children.count(e.children)}}])&&b(t.prototype,n),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),m}(i.default.Component);n.InnerSlider=T},3178:function(t,n,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=l(r(2791)),a=r(8293),s=l(r(5477)),c=l(r(5484)),u=r(8026);function l(e){return e&&e.__esModule?e:{default:e}}function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function g(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=y(t);if(n){var o=y(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}(this,e)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=(0,u.canUseDOM)()&&r(8153),E=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(l,e);var t,n,r,i=g(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),b(m(t=i.call(this,e)),"innerSliderRefHandler",(function(e){return t.innerSlider=e})),b(m(t),"slickPrev",(function(){return t.innerSlider.slickPrev()})),b(m(t),"slickNext",(function(){return t.innerSlider.slickNext()})),b(m(t),"slickGoTo",(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.innerSlider.slickGoTo(e,n)})),b(m(t),"slickPause",(function(){return t.innerSlider.pause("paused")})),b(m(t),"slickPlay",(function(){return t.innerSlider.autoPlay("play")})),t.state={breakpoint:null},t._responsiveMediaHandlers=[],t}return t=l,(n=[{key:"media",value:function(e,t){_.register(e,t),this._responsiveMediaHandlers.push({query:e,handler:t})}},{key:"componentDidMount",value:function(){var e=this;if(this.props.responsive){var t=this.props.responsive.map((function(e){return e.breakpoint}));t.sort((function(e,t){return e-t})),t.forEach((function(n,r){var i;i=0===r?(0,s.default)({minWidth:0,maxWidth:n}):(0,s.default)({minWidth:t[r-1]+1,maxWidth:n}),(0,u.canUseDOM)()&&e.media(i,(function(){e.setState({breakpoint:n})}))}));var n=(0,s.default)({minWidth:t.slice(-1)[0]});(0,u.canUseDOM)()&&this.media(n,(function(){e.setState({breakpoint:null})}))}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach((function(e){_.unregister(e.query,e.handler)}))}},{key:"render",value:function(){var e,t,n=this;(e=this.state.breakpoint?"unslick"===(t=this.props.responsive.filter((function(e){return e.breakpoint===n.state.breakpoint})))[0].settings?"unslick":f(f(f({},c.default),this.props),t[0].settings):f(f({},c.default),this.props)).centerMode&&(e.slidesToScroll,e.slidesToScroll=1),e.fade&&(e.slidesToShow,e.slidesToScroll,e.slidesToShow=1,e.slidesToScroll=1);var r=o.default.Children.toArray(this.props.children);r=r.filter((function(e){return"string"===typeof e?!!e.trim():!!e})),e.variableWidth&&(e.rows>1||e.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),e.variableWidth=!1);for(var i=[],s=null,u=0;u<r.length;u+=e.rows*e.slidesPerRow){for(var l=[],h=u;h<u+e.rows*e.slidesPerRow;h+=e.slidesPerRow){for(var p=[],v=h;v<h+e.slidesPerRow&&(e.variableWidth&&r[v].props.style&&(s=r[v].props.style.width),!(v>=r.length));v+=1)p.push(o.default.cloneElement(r[v],{key:100*u+10*h+v,tabIndex:-1,style:{width:"".concat(100/e.slidesPerRow,"%"),display:"inline-block"}}));l.push(o.default.createElement("div",{key:10*u+h},p))}e.variableWidth?i.push(o.default.createElement("div",{key:u,style:{width:s}},l)):i.push(o.default.createElement("div",{key:u},l))}if("unslick"===e){var g="regular slider "+(this.props.className||"");return o.default.createElement("div",{className:g},r)}return i.length<=e.slidesToShow&&(e.unslick=!0),o.default.createElement(a.InnerSlider,d({style:this.props.style,ref:this.innerSliderRefHandler},e),i)}}])&&p(t.prototype,n),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(o.default.Component);n.default=E},4931:function(t,n,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.Track=void 0;var o=c(r(2791)),a=c(r(1694)),s=r(8026);function c(e){return e&&e.__esModule?e:{default:e}}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,e)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){var t,n,r,i,o;return r=(o=e.rtl?e.slideCount-1-e.index:e.index)<0||o>=e.slideCount,e.centerMode?(i=Math.floor(e.slidesToShow/2),n=(o-e.currentSlide)%e.slideCount===0,o>e.currentSlide-i-1&&o<=e.currentSlide+i&&(t=!0)):t=e.currentSlide<=o&&o<e.currentSlide+e.slidesToShow,{"slick-slide":!0,"slick-active":t,"slick-center":n,"slick-cloned":r,"slick-current":o===(e.targetSlide<0?e.targetSlide+e.slideCount:e.targetSlide>=e.slideCount?e.targetSlide-e.slideCount:e.targetSlide)}},b=function(e,t){return e.key||t},_=function(e){var t,n=[],r=[],i=[],c=o.default.Children.count(e.children),u=(0,s.lazyStartIndex)(e),l=(0,s.lazyEndIndex)(e);return o.default.Children.forEach(e.children,(function(d,h){var f,p={message:"children",index:h,slidesToScroll:e.slidesToScroll,currentSlide:e.currentSlide};f=!e.lazyLoad||e.lazyLoad&&e.lazyLoadedList.indexOf(h)>=0?d:o.default.createElement("div",null);var v=function(e){var t={};return void 0!==e.variableWidth&&!1!==e.variableWidth||(t.width=e.slideWidth),e.fade&&(t.position="relative",e.vertical?t.top=-e.index*parseInt(e.slideHeight):t.left=-e.index*parseInt(e.slideWidth),t.opacity=e.currentSlide===e.index?1:0,e.useCSS&&(t.transition="opacity "+e.speed+"ms "+e.cssEase+", visibility "+e.speed+"ms "+e.cssEase)),t}(g(g({},e),{},{index:h})),m=f.props.className||"",_=y(g(g({},e),{},{index:h}));if(n.push(o.default.cloneElement(f,{key:"original"+b(f,h),"data-index":h,className:(0,a.default)(_,m),tabIndex:"-1","aria-hidden":!_["slick-active"],style:g(g({outline:"none"},f.props.style||{}),v),onClick:function(t){f.props&&f.props.onClick&&f.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(p)}})),e.infinite&&!1===e.fade){var E=c-h;E<=(0,s.getPreClones)(e)&&c!==e.slidesToShow&&((t=-E)>=u&&(f=d),_=y(g(g({},e),{},{index:t})),r.push(o.default.cloneElement(f,{key:"precloned"+b(f,t),"data-index":t,tabIndex:"-1",className:(0,a.default)(_,m),"aria-hidden":!_["slick-active"],style:g(g({},f.props.style||{}),v),onClick:function(t){f.props&&f.props.onClick&&f.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(p)}}))),c!==e.slidesToShow&&((t=c+h)<l&&(f=d),_=y(g(g({},e),{},{index:t})),i.push(o.default.cloneElement(f,{key:"postcloned"+b(f,t),"data-index":t,tabIndex:"-1",className:(0,a.default)(_,m),"aria-hidden":!_["slick-active"],style:g(g({},f.props.style||{}),v),onClick:function(t){f.props&&f.props.onClick&&f.props.onClick(t),e.focusOnSelect&&e.focusOnSelect(p)}})))}})),e.rtl?r.concat(n,i).reverse():r.concat(n,i)},E=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(a,e);var t,n,r,i=h(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(f(e=i.call.apply(i,[this].concat(n))),"node",null),m(f(e),"handleRef",(function(t){e.node=t})),e}return t=a,(n=[{key:"render",value:function(){var e=_(this.props),t=this.props,n={onMouseEnter:t.onMouseEnter,onMouseOver:t.onMouseOver,onMouseLeave:t.onMouseLeave};return o.default.createElement("div",u({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},n),e)}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.default.PureComponent);n.Track=E},8026:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkSpecKeys=t.checkNavigable=t.changeSlide=t.canUseDOM=t.canGoNext=void 0,t.clamp=c,t.swipeStart=t.swipeMove=t.swipeEnd=t.slidesOnRight=t.slidesOnLeft=t.slideHandler=t.siblingDirection=t.safePreventDefault=t.lazyStartIndex=t.lazySlidesOnRight=t.lazySlidesOnLeft=t.lazyEndIndex=t.keyHandler=t.initializedState=t.getWidth=t.getTrackLeft=t.getTrackCSS=t.getTrackAnimateCSS=t.getTotalSlides=t.getSwipeDirection=t.getSlideCount=t.getRequiredLazySlides=t.getPreClones=t.getPostClones=t.getOnDemandLazySlides=t.getNavigableIndexes=t.getHeight=t.extractObject=void 0;var r,i=(r=n(2791))&&r.__esModule?r:{default:r};function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n){return Math.max(t,Math.min(e,n))}var u=function(e){["onTouchStart","onTouchMove","onWheel"].includes(e._reactName)||e.preventDefault()};t.safePreventDefault=u;var l=function(e){for(var t=[],n=d(e),r=h(e),i=n;i<r;i++)e.lazyLoadedList.indexOf(i)<0&&t.push(i);return t};t.getOnDemandLazySlides=l;t.getRequiredLazySlides=function(e){for(var t=[],n=d(e),r=h(e),i=n;i<r;i++)t.push(i);return t};var d=function(e){return e.currentSlide-f(e)};t.lazyStartIndex=d;var h=function(e){return e.currentSlide+p(e)};t.lazyEndIndex=h;var f=function(e){return e.centerMode?Math.floor(e.slidesToShow/2)+(parseInt(e.centerPadding)>0?1:0):0};t.lazySlidesOnLeft=f;var p=function(e){return e.centerMode?Math.floor((e.slidesToShow-1)/2)+1+(parseInt(e.centerPadding)>0?1:0):e.slidesToShow};t.lazySlidesOnRight=p;var v=function(e){return e&&e.offsetWidth||0};t.getWidth=v;var g=function(e){return e&&e.offsetHeight||0};t.getHeight=g;var m=function(e){var t,n,r,i,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=e.startX-e.curX,n=e.startY-e.curY,r=Math.atan2(n,t),(i=Math.round(180*r/Math.PI))<0&&(i=360-Math.abs(i)),i<=45&&i>=0||i<=360&&i>=315?"left":i>=135&&i<=225?"right":!0===o?i>=35&&i<=135?"up":"down":"vertical"};t.getSwipeDirection=m;var y=function(e){var t=!0;return e.infinite||(e.centerMode&&e.currentSlide>=e.slideCount-1||e.slideCount<=e.slidesToShow||e.currentSlide>=e.slideCount-e.slidesToShow)&&(t=!1),t};t.canGoNext=y;t.extractObject=function(e,t){var n={};return t.forEach((function(t){return n[t]=e[t]})),n};t.initializedState=function(e){var t,n=i.default.Children.count(e.children),r=e.listRef,o=Math.ceil(v(r)),s=e.trackRef&&e.trackRef.node,c=Math.ceil(v(s));if(e.vertical)t=o;else{var u=e.centerMode&&2*parseInt(e.centerPadding);"string"===typeof e.centerPadding&&"%"===e.centerPadding.slice(-1)&&(u*=o/100),t=Math.ceil((o-u)/e.slidesToShow)}var d=r&&g(r.querySelector('[data-index="0"]')),h=d*e.slidesToShow,f=void 0===e.currentSlide?e.initialSlide:e.currentSlide;e.rtl&&void 0===e.currentSlide&&(f=n-1-e.initialSlide);var p=e.lazyLoadedList||[],m=l(a(a({},e),{},{currentSlide:f,lazyLoadedList:p})),y={slideCount:n,slideWidth:t,listWidth:o,trackWidth:c,currentSlide:f,slideHeight:d,listHeight:h,lazyLoadedList:p=p.concat(m)};return null===e.autoplaying&&e.autoplay&&(y.autoplaying="playing"),y};t.slideHandler=function(e){var t=e.waitForAnimate,n=e.animating,r=e.fade,i=e.infinite,o=e.index,s=e.slideCount,u=e.lazyLoad,d=e.currentSlide,h=e.centerMode,f=e.slidesToScroll,p=e.slidesToShow,v=e.useCSS,g=e.lazyLoadedList;if(t&&n)return{};var m,b,_,E=o,S={},I={},R=i?o:c(o,0,s-1);if(r){if(!i&&(o<0||o>=s))return{};o<0?E=o+s:o>=s&&(E=o-s),u&&g.indexOf(E)<0&&(g=g.concat(E)),S={animating:!0,currentSlide:E,lazyLoadedList:g,targetSlide:E},I={animating:!1,targetSlide:E}}else m=E,E<0?(m=E+s,i?s%f!==0&&(m=s-s%f):m=0):!y(e)&&E>d?E=m=d:h&&E>=s?(E=i?s:s-1,m=i?0:s-1):E>=s&&(m=E-s,i?s%f!==0&&(m=0):m=s-p),!i&&E+p>=s&&(m=s-p),b=T(a(a({},e),{},{slideIndex:E})),_=T(a(a({},e),{},{slideIndex:m})),i||(b===_&&(E=m),b=_),u&&(g=g.concat(l(a(a({},e),{},{currentSlide:E})))),v?(S={animating:!0,currentSlide:m,trackStyle:x(a(a({},e),{},{left:b})),lazyLoadedList:g,targetSlide:R},I={animating:!1,currentSlide:m,trackStyle:w(a(a({},e),{},{left:_})),swipeLeft:null,targetSlide:R}):S={currentSlide:m,trackStyle:w(a(a({},e),{},{left:_})),lazyLoadedList:g,targetSlide:R};return{state:S,nextState:I}};t.changeSlide=function(e,t){var n,r,i,o,s=e.slidesToScroll,c=e.slidesToShow,u=e.slideCount,l=e.currentSlide,d=e.targetSlide,h=e.lazyLoad,f=e.infinite;if(n=u%s!==0?0:(u-l)%s,"previous"===t.message)o=l-(i=0===n?s:c-n),h&&!f&&(o=-1===(r=l-i)?u-1:r),f||(o=d-s);else if("next"===t.message)o=l+(i=0===n?s:n),h&&!f&&(o=(l+s)%u+n),f||(o=d+s);else if("dots"===t.message)o=t.index*t.slidesToScroll;else if("children"===t.message){if(o=t.index,f){var p=O(a(a({},e),{},{targetSlide:o}));o>t.currentSlide&&"left"===p?o-=u:o<t.currentSlide&&"right"===p&&(o+=u)}}else"index"===t.message&&(o=Number(t.index));return o};t.keyHandler=function(e,t,n){return e.target.tagName.match("TEXTAREA|INPUT|SELECT")||!t?"":37===e.keyCode?n?"next":"previous":39===e.keyCode?n?"previous":"next":""};t.swipeStart=function(e,t,n){return"IMG"===e.target.tagName&&u(e),!t||!n&&-1!==e.type.indexOf("mouse")?"":{dragging:!0,touchObject:{startX:e.touches?e.touches[0].pageX:e.clientX,startY:e.touches?e.touches[0].pageY:e.clientY,curX:e.touches?e.touches[0].pageX:e.clientX,curY:e.touches?e.touches[0].pageY:e.clientY}}};t.swipeMove=function(e,t){var n=t.scrolling,r=t.animating,i=t.vertical,o=t.swipeToSlide,s=t.verticalSwiping,c=t.rtl,l=t.currentSlide,d=t.edgeFriction,h=t.edgeDragged,f=t.onEdge,p=t.swiped,v=t.swiping,g=t.slideCount,b=t.slidesToScroll,_=t.infinite,E=t.touchObject,S=t.swipeEvent,x=t.listHeight,I=t.listWidth;if(!n){if(r)return u(e);i&&o&&s&&u(e);var R,k={},O=T(t);E.curX=e.touches?e.touches[0].pageX:e.clientX,E.curY=e.touches?e.touches[0].pageY:e.clientY,E.swipeLength=Math.round(Math.sqrt(Math.pow(E.curX-E.startX,2)));var C=Math.round(Math.sqrt(Math.pow(E.curY-E.startY,2)));if(!s&&!v&&C>10)return{scrolling:!0};s&&(E.swipeLength=C);var A=(c?-1:1)*(E.curX>E.startX?1:-1);s&&(A=E.curY>E.startY?1:-1);var N=Math.ceil(g/b),j=m(t.touchObject,s),D=E.swipeLength;return _||(0===l&&("right"===j||"down"===j)||l+1>=N&&("left"===j||"up"===j)||!y(t)&&("left"===j||"up"===j))&&(D=E.swipeLength*d,!1===h&&f&&(f(j),k.edgeDragged=!0)),!p&&S&&(S(j),k.swiped=!0),R=i?O+D*(x/I)*A:c?O-D*A:O+D*A,s&&(R=O+D*A),k=a(a({},k),{},{touchObject:E,swipeLeft:R,trackStyle:w(a(a({},t),{},{left:R}))}),Math.abs(E.curX-E.startX)<.8*Math.abs(E.curY-E.startY)?k:(E.swipeLength>10&&(k.swiping=!0,u(e)),k)}};t.swipeEnd=function(e,t){var n=t.dragging,r=t.swipe,i=t.touchObject,o=t.listWidth,s=t.touchThreshold,c=t.verticalSwiping,l=t.listHeight,d=t.swipeToSlide,h=t.scrolling,f=t.onSwipe,p=t.targetSlide,v=t.currentSlide,g=t.infinite;if(!n)return r&&u(e),{};var y=c?l/s:o/s,b=m(i,c),S={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(h)return S;if(!i.swipeLength)return S;if(i.swipeLength>y){var w,I;u(e),f&&f(b);var R=g?v:p;switch(b){case"left":case"up":I=R+E(t),w=d?_(t,I):I,S.currentDirection=0;break;case"right":case"down":I=R-E(t),w=d?_(t,I):I,S.currentDirection=1;break;default:w=R}S.triggerSlideHandler=w}else{var k=T(t);S.trackStyle=x(a(a({},t),{},{left:k}))}return S};var b=function(e){for(var t=e.infinite?2*e.slideCount:e.slideCount,n=e.infinite?-1*e.slidesToShow:0,r=e.infinite?-1*e.slidesToShow:0,i=[];n<t;)i.push(n),n=r+e.slidesToScroll,r+=Math.min(e.slidesToScroll,e.slidesToShow);return i};t.getNavigableIndexes=b;var _=function(e,t){var n=b(e),r=0;if(t>n[n.length-1])t=n[n.length-1];else for(var i in n){if(t<n[i]){t=r;break}r=n[i]}return t};t.checkNavigable=_;var E=function(e){var t=e.centerMode?e.slideWidth*Math.floor(e.slidesToShow/2):0;if(e.swipeToSlide){var n,r=e.listRef,i=r.querySelectorAll&&r.querySelectorAll(".slick-slide")||[];if(Array.from(i).every((function(r){if(e.vertical){if(r.offsetTop+g(r)/2>-1*e.swipeLeft)return n=r,!1}else if(r.offsetLeft-t+v(r)/2>-1*e.swipeLeft)return n=r,!1;return!0})),!n)return 0;var o=!0===e.rtl?e.slideCount-e.currentSlide:e.currentSlide;return Math.abs(n.dataset.index-o)||1}return e.slidesToScroll};t.getSlideCount=E;var S=function(e,t){return t.reduce((function(t,n){return t&&e.hasOwnProperty(n)}),!0)?null:console.error("Keys Missing:",e)};t.checkSpecKeys=S;var w=function(e){var t,n;S(e,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var r=e.slideCount+2*e.slidesToShow;e.vertical?n=r*e.slideHeight:t=k(e)*e.slideWidth;var i={opacity:1,transition:"",WebkitTransition:""};if(e.useTransform){var o=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",s=e.vertical?"translate3d(0px, "+e.left+"px, 0px)":"translate3d("+e.left+"px, 0px, 0px)",c=e.vertical?"translateY("+e.left+"px)":"translateX("+e.left+"px)";i=a(a({},i),{},{WebkitTransform:o,transform:s,msTransform:c})}else e.vertical?i.top=e.left:i.left=e.left;return e.fade&&(i={opacity:1}),t&&(i.width=t),n&&(i.height=n),window&&!window.addEventListener&&window.attachEvent&&(e.vertical?i.marginTop=e.left+"px":i.marginLeft=e.left+"px"),i};t.getTrackCSS=w;var x=function(e){S(e,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var t=w(e);return e.useTransform?(t.WebkitTransition="-webkit-transform "+e.speed+"ms "+e.cssEase,t.transition="transform "+e.speed+"ms "+e.cssEase):e.vertical?t.transition="top "+e.speed+"ms "+e.cssEase:t.transition="left "+e.speed+"ms "+e.cssEase,t};t.getTrackAnimateCSS=x;var T=function(e){if(e.unslick)return 0;S(e,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var t,n,r=e.slideIndex,i=e.trackRef,o=e.infinite,a=e.centerMode,s=e.slideCount,c=e.slidesToShow,u=e.slidesToScroll,l=e.slideWidth,d=e.listWidth,h=e.variableWidth,f=e.slideHeight,p=e.fade,v=e.vertical;if(p||1===e.slideCount)return 0;var g=0;if(o?(g=-I(e),s%u!==0&&r+u>s&&(g=-(r>s?c-(r-s):s%u)),a&&(g+=parseInt(c/2))):(s%u!==0&&r+u>s&&(g=c-s%u),a&&(g=parseInt(c/2))),t=v?r*f*-1+g*f:r*l*-1+g*l,!0===h){var m,y=i&&i.node;if(m=r+I(e),t=(n=y&&y.childNodes[m])?-1*n.offsetLeft:0,!0===a){m=o?r+I(e):r,n=y&&y.children[m],t=0;for(var b=0;b<m;b++)t-=y&&y.children[b]&&y.children[b].offsetWidth;t-=parseInt(e.centerPadding),t+=n&&(d-n.offsetWidth)/2}}return t};t.getTrackLeft=T;var I=function(e){return e.unslick||!e.infinite?0:e.variableWidth?e.slideCount:e.slidesToShow+(e.centerMode?1:0)};t.getPreClones=I;var R=function(e){return e.unslick||!e.infinite?0:e.slideCount};t.getPostClones=R;var k=function(e){return 1===e.slideCount?1:I(e)+e.slideCount+R(e)};t.getTotalSlides=k;var O=function(e){return e.targetSlide>e.currentSlide?e.targetSlide>e.currentSlide+C(e)?"left":"right":e.targetSlide<e.currentSlide-A(e)?"right":"left"};t.siblingDirection=O;var C=function(e){var t=e.slidesToShow,n=e.centerMode,r=e.rtl,i=e.centerPadding;if(n){var o=(t-1)/2+1;return parseInt(i)>0&&(o+=1),r&&t%2===0&&(o+=1),o}return r?0:t-1};t.slidesOnRight=C;var A=function(e){var t=e.slidesToShow,n=e.centerMode,r=e.rtl,i=e.centerPadding;if(n){var o=(t-1)/2+1;return parseInt(i)>0&&(o+=1),r||t%2!==0||(o+=1),o}return r?t-1:0};t.slidesOnLeft=A;t.canUseDOM=function(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:l,props:o,_owner:s.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var _=b.prototype=new y;_.constructor=b,v(_,m.prototype),_.isPureReactComponent=!0;var E=Array.isArray,S=Object.prototype.hasOwnProperty,w={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!x.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:w.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var R=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function O(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return a=a(c=e),e=""===o?"."+k(c,0):o,E(a)?(i="",null!=e&&(i=e.replace(R,"$&/")+"/"),O(a,t,i,"",(function(e){return e}))):null!=a&&(I(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(R,"$&/")+"/")+e)),t.push(a)),1;if(c=0,o=""===o?".":o+":",E(e))for(var u=0;u<e.length;u++){var l=o+k(s=e[u],u);c+=O(s,t,i,l,a)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(s=e.next()).done;)c+=O(s=s.value,t,i,l=o+k(s,u++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function C(e,t,n){if(null==e)return e;var r=[],i=0;return O(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},j={transition:null},D={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:j,ReactCurrentOwner:w};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)S.call(t,u)&&!x.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){c=Array(u);for(var l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},474:function(e,t,n){"use strict";n.r(t);var r=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),i="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,o="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),a="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var s=["top","right","bottom","left","width","height","size","weight"],c="undefined"!==typeof MutationObserver,u=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&c()}function s(){a(o)}function c(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(s,t);i=e}return c}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;s.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),l=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},h=y(0,0,0,0);function f(e){return parseFloat(e)||0}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+f(e["border-"+n+"-width"])}),0)}function v(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return h;var r=d(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=f(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=f(r.width),c=f(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=p(r,"left","right")+o),Math.round(c+a)!==n&&(c-=p(r,"top","bottom")+a)),!function(e){return e===d(e).document.documentElement}(e)){var u=Math.round(s+o)-t,l=Math.round(c+a)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(l)&&(c-=l)}return y(i.left,i.top,s,c)}var g="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"===typeof e.getBBox};function m(e){return i?g(e)?function(e){var t=e.getBBox();return y(0,0,t.width,t.height)}(e):v(e):h}function y(e,t,n,r){return{x:e,y:t,width:n,height:r}}var b=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=m(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),_=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return l(a,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),a}(t);l(this,{target:e,contentRect:n})},E=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new _(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),S="undefined"!==typeof WeakMap?new WeakMap:new r,w=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),r=new E(t,n,this);S.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){w.prototype[e]=function(){var t;return(t=S.get(this))[e].apply(t,arguments)}}));var x="undefined"!==typeof o.ResizeObserver?o.ResizeObserver:w;t.default=x},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,c=e[s],u=s+1,l=e[u];if(0>o(c,n))u<i&&0>o(l,c)?(e[r]=l,e[u]=n,r=u):(e[r]=c,e[s]=n,r=s);else{if(!(u<i&&0>o(l,n)))break e;e[r]=l,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var u=[],l=[],d=1,h=null,f=3,p=!1,v=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(u,t)}t=r(l)}}function E(e){if(g=!1,_(e),!v)if(null!==r(u))v=!0,j(S);else{var t=r(l);null!==t&&D(E,t.startTime-e)}}function S(e,n){v=!1,g&&(g=!1,y(I),I=-1),p=!0;var o=f;try{for(_(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!O());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(u)&&i(u),_(n)}else i(u);h=r(u)}if(null!==h)var c=!0;else{var d=r(l);null!==d&&D(E,d.startTime-n),c=!1}return c}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,x=!1,T=null,I=-1,R=5,k=-1;function O(){return!(t.unstable_now()-k<R)}function C(){if(null!==T){var e=t.unstable_now();k=e;var n=!0;try{n=T(!0,e)}finally{n?w():(x=!1,T=null)}}else x=!1}if("function"===typeof b)w=function(){b(C)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,N=A.port2;A.port1.onmessage=C,w=function(){N.postMessage(null)}}else w=function(){m(C,0)};function j(e){T=e,x||(x=!0,w())}function D(e,n){I=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,j(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(l,e),null===r(u)&&e===r(l)&&(g?(y(I),I=-1):g=!0,D(E,o-a))):(e.sortIndex=s,n(u,e),v||p||(v=!0,j(S))),e},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},2806:function(e){e.exports=function(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})).toLowerCase()}},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var r=n(3897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},7156:function(e){function t(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=e.apply(n,r);function s(e){t(a,i,o,s,c,"next",e)}function c(e){t(a,i,o,s,c,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3515:function(e,t,n){var r=n(6015),i=n(9617);function o(t,n,a){return i()?(e.exports=o=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=o=function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o},e.exports.__esModule=!0,e.exports.default=e.exports),o.apply(null,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var r=n(4062);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,n){var r=n(6116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var r=n(3808),i=n(9617),o=n(4993);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var a=r(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,n){var r=n(4062);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},1588:function(e,t,n){var r=n(1753);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},6035:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(t){t.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,i=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var r=n(8698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(A){d=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),s=new k(r||[]);return a(o,"_invoke",{value:x(e,n,s)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}t.wrap=h;var p={};function v(){}function g(){}function m(){}var y={};d(y,c,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(O([])));_&&_!==n&&o.call(_,c)&&(y=_);var E=m.prototype=v.prototype=Object.create(y);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,a,s,c){var u=f(e[i],e,a);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==r(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,c)}))}c(u.arg)}var i;a(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}})}function x(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=f(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function T(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return g.prototype=m,a(E,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:g,configurable:!0}),g.displayName=d(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,d(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(w.prototype),d(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new w(h(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),d(E,l,"Generator"),d(E,c,(function(){return this})),d(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),i=n(8872),o=n(6116),a=n(2218);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},1753:function(e,t,n){var r=n(3808);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(3405),i=n(9498),o=n(6116),a=n(2281);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},3496:function(e,t,n){var r=n(3808),i=n(6015),o=n(6035),a=n(3515);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},5647:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(9611),i=n(8814);function o(e,t,n){return o=(0,i.Z)()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&(0,r.Z)(o,n.prototype),o},o.apply(null,arguments)}},3144:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(9142);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,r.Z)(i.key),i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},7762:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(181);function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}},7277:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(1120),i=n(8814),o=n(1002),a=n(7326);function s(e){var t=(0,i.Z)();return function(){var n,i=(0,r.Z)(e);if(t){var s=(0,r.Z)(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===(0,o.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,a.Z)(e)}(this,n)}}},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},1120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9611);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},8814:function(t,n,r){"use strict";function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}r.d(n,{Z:function(){return i}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},1413:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(4942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(3878);var i=n(181),o=n(5267);function a(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||(0,i.Z)(e,t)||(0,o.Z)()}},4506:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(3878),i=n(9199),o=n(181),a=n(5267);function s(e){return(0,r.Z)(e)||(0,i.Z)(e)||(0,o.Z)(e)||(0,a.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);var i=n(9199),o=n(181);function a(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},8664:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1120),i=n(9611);var o=n(5647);function a(e){var t="function"===typeof Map?new Map:void 0;return a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return(0,o.Z)(e,arguments,(0,r.Z)(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),(0,i.Z)(a,e)},a(e)}},6215:function(t,n,r){"use strict";r.r(n),r.d(n,{ANIMATION_MODULE_TYPE:function(){return td},APP_BOOTSTRAP_LISTENER:function(){return yS},APP_ID:function(){return Jl},APP_INITIALIZER:function(){return xE},ApplicationInitStatus:function(){return TE},ApplicationModule:function(){return Aw},ApplicationRef:function(){return LS},Attribute:function(){return Xa},COMPILER_OPTIONS:function(){return PE},CSP_NONCE:function(){return nd},CUSTOM_ELEMENTS_SCHEMA:function(){return Gs},ChangeDetectionStrategy:function(){return Jt},ChangeDetectorRef:function(){return JS},Compiler:function(){return DE},CompilerFactory:function(){return LE},Component:function(){return mE},ComponentFactory:function(){return Ad},ComponentFactoryResolver:function(){return Dd},ComponentRef:function(){return Cd},ContentChild:function(){return es},ContentChildren:function(){return $a},DEFAULT_CURRENCY_CODE:function(){return OE},DebugElement:function(){return rw},DebugEventListener:function(){return ew},DebugNode:function(){return nw},DefaultIterableDiffer:function(){return pw},DestroyRef:function(){return th},Directive:function(){return gE},ENVIRONMENT_INITIALIZER:function(){return wl},ElementRef:function(){return Ld},EmbeddedViewRef:function(){return $S},EnvironmentInjector:function(){return Wl},ErrorHandler:function(){return gh},EventEmitter:function(){return zb},Host:function(){return Is},HostBinding:function(){return EE},HostListener:function(){return SE},INJECTOR:function(){return xl},Inject:function(){return Ss},InjectFlags:function(){return Ot},Injectable:function(){return Xd},InjectionToken:function(){return Sl},Injector:function(){return eh},Input:function(){return bE},IterableDiffers:function(){return ww},KeyValueDiffers:function(){return Tw},LOCALE_ID:function(){return kE},MissingTranslationStrategy:function(){return RE},ModuleWithComponentFactories:function(){return jE},NO_ERRORS_SCHEMA:function(){return qs},NgModule:function(){return wE},NgModuleFactory:function(){return $y},NgModuleRef:function(){return Qy},NgProbeToken:function(){return wS},NgZone:function(){return eS},Optional:function(){return ws},Output:function(){return _E},PACKAGE_ROOT_URL:function(){return ed},PLATFORM_ID:function(){return $l},PLATFORM_INITIALIZER:function(){return Ql},Pipe:function(){return yE},PlatformRef:function(){return NS},Query:function(){return Qa},QueryList:function(){return Yb},Renderer2:function(){return Vd},RendererFactory2:function(){return Ud},RendererStyleFlags2:function(){return rc},Sanitizer:function(){return Fd},SecurityContext:function(){return Yu},Self:function(){return xs},SimpleChange:function(){return Di},SkipSelf:function(){return Ts},TRANSLATIONS:function(){return CE},TRANSLATIONS_FORMAT:function(){return AE},TemplateRef:function(){return Jb},Testability:function(){return dS},TestabilityRegistry:function(){return fS},TransferState:function(){return od},Type:function(){return is},VERSION:function(){return Gd},Version:function(){return Bd},ViewChild:function(){return ns},ViewChildren:function(){return ts},ViewContainerRef:function(){return a_},ViewEncapsulation:function(){return Xt},ViewRef:function(){return QS},afterNextRender:function(){return lh},afterRender:function(){return uh},asNativeElements:function(){return tw},assertInInjectionContext:function(){return Hd},assertPlatform:function(){return kS},booleanAttribute:function(){return Qw},computed:function(){return Ei},createComponent:function(){return ux},createEnvironmentInjector:function(){return ob},createNgModule:function(){return eb},createNgModuleRef:function(){return tb},createPlatform:function(){return xS},createPlatformFactory:function(){return RS},defineInjectable:function(){return wt},destroyPlatform:function(){return CS},effect:function(){return If},enableProdMode:function(){return zS},forwardRef:function(){return He},getDebugNode:function(){return dw},getModuleFactory:function(){return KS},getNgModuleById:function(){return YS},getPlatform:function(){return AS},importProvidersFrom:function(){return kl},inject:function(){return ln},isDevMode:function(){return HS},isSignal:function(){return li},isStandalone:function(){return tr},makeEnvironmentProviders:function(){return Rl},makeStateKey:function(){return id},mergeApplicationConfig:function(){return dx},numberAttribute:function(){return $w},platformCore:function(){return Cw},provideZoneChangeDetection:function(){return WS},reflectComponentType:function(){return lx},resolveForwardRef:function(){return ze},runInInjectionContext:function(){return Wd},setTestabilityGetter:function(){return pS},signal:function(){return Ci},untracked:function(){return Ai},"\u0275ALLOW_MULTIPLE_PLATFORMS":function(){return gS},"\u0275AfterRenderEventManager":function(){return hh},"\u0275ComponentFactory":function(){return Ad},"\u0275Console":function(){return IE},"\u0275DEFAULT_LOCALE_ID":function(){return Im},"\u0275ENABLED_SSR_FEATURES":function(){return rd},"\u0275INJECTOR_SCOPE":function(){return Vl},"\u0275IS_HYDRATION_DOM_REUSE_ENABLED":function(){return mh},"\u0275InitialRenderPendingTasks":function(){return NE},"\u0275LContext":function(){return gc},"\u0275LifecycleHooksFeature":function(){return Wf},"\u0275LocaleDataIndex":function(){return vm},"\u0275NG_COMP_DEF":function(){return yn},"\u0275NG_DIR_DEF":function(){return bn},"\u0275NG_ELEMENT_ID":function(){return wn},"\u0275NG_INJ_DEF":function(){return Nt},"\u0275NG_MOD_DEF":function(){return En},"\u0275NG_PIPE_DEF":function(){return _n},"\u0275NG_PROV_DEF":function(){return At},"\u0275NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR":function(){return qd},"\u0275NO_CHANGE":function(){return Ah},"\u0275NgModuleFactory":function(){return rb},"\u0275NoopNgZone":function(){return aS},"\u0275ReflectionCapabilities":function(){return bs},"\u0275Render3ComponentFactory":function(){return Gf},"\u0275Render3ComponentRef":function(){return qf},"\u0275Render3NgModuleRef":function(){return nb},"\u0275RuntimeError":function(){return Xe},"\u0275SSR_CONTENT_INTEGRITY_MARKER":function(){return bd},"\u0275TESTABILITY":function(){return uS},"\u0275TESTABILITY_GETTER":function(){return lS},"\u0275ViewRef":function(){return Mf},"\u0275XSS_SECURITY_URL":function(){return Je},"\u0275_sanitizeHtml":function(){return dl},"\u0275_sanitizeUrl":function(){return Wu},"\u0275allowSanitizationBypassAndThrow":function(){return ju},"\u0275annotateForHydration":function(){return Uw},"\u0275bypassSanitizationTrustHtml":function(){return Pu},"\u0275bypassSanitizationTrustResourceUrl":function(){return Vu},"\u0275bypassSanitizationTrustScript":function(){return Mu},"\u0275bypassSanitizationTrustStyle":function(){return Lu},"\u0275bypassSanitizationTrustUrl":function(){return Uu},"\u0275clearResolutionOfComponentResourcesQueue":function(){return Ps},"\u0275compileComponent":function(){return $_},"\u0275compileDirective":function(){return tE},"\u0275compileNgModule":function(){return F_},"\u0275compileNgModuleDefs":function(){return B_},"\u0275compileNgModuleFactory":function(){return bS},"\u0275compilePipe":function(){return pE},"\u0275convertToBitFlags":function(){return dn},"\u0275createInjector":function(){return Qd},"\u0275defaultIterableDiffers":function(){return kw},"\u0275defaultKeyValueDiffers":function(){return Ow},"\u0275detectChanges":function(){return Af},"\u0275devModeEqual":function(){return up},"\u0275findLocaleData":function(){return bm},"\u0275flushModuleScopingQueueAsMuchAsPossible":function(){return U_},"\u0275formatRuntimeError":function(){return Qe},"\u0275getDebugNode":function(){return dw},"\u0275getDirectives":function(){return fb},"\u0275getHostElement":function(){return gb},"\u0275getInjectableDef":function(){return Tt},"\u0275getLContext":function(){return mc},"\u0275getLocaleCurrencyCode":function(){return _m},"\u0275getLocalePluralCase":function(){return Em},"\u0275getSanitizationBypassType":function(){return Du},"\u0275getUnknownElementStrictMode":function(){return zs},"\u0275getUnknownPropertyStrictMode":function(){return Zs},"\u0275global":function(){return Vt},"\u0275injectChangeDetectorRef":function(){return XS},"\u0275internalCreateApplication":function(){return IS},"\u0275isBoundToModule":function(){return SS},"\u0275isEnvironmentProviders":function(){return Ye},"\u0275isInjectable":function(){return It},"\u0275isNgModule":function(){return P_},"\u0275isPromise":function(){return Sv},"\u0275isSubscribable":function(){return wv},"\u0275noSideEffects":function(){return vn},"\u0275patchComponentDefWithScope":function(){return Z_},"\u0275publishDefaultGlobalUtils":function(){return JE},"\u0275publishGlobalUtil":function(){return XE},"\u0275registerLocaleData":function(){return ym},"\u0275resetCompiledComponents":function(){return z_},"\u0275resetJitOptions":function(){return j_},"\u0275resolveComponentResources":function(){return As},"\u0275setAllowDuplicateNgModuleIdsForTest":function(){return Bs},"\u0275setAlternateWeakRefImpl":function(){return vi},"\u0275setClassMetadata":function(){return _b},"\u0275setCurrentInjector":function(){return an},"\u0275setDocument":function(){return _u},"\u0275setInjectorProfilerContext":function(){return Gt},"\u0275setLocaleId":function(){return Cm},"\u0275setUnknownElementStrictMode":function(){return Hs},"\u0275setUnknownPropertyStrictMode":function(){return Ys},"\u0275store":function(){return sv},"\u0275stringify":function(){return Ge},"\u0275transitiveScopesFor":function(){return J_},"\u0275unregisterLocaleData":function(){return wm},"\u0275unwrapSafeValue":function(){return Nu},"\u0275withDomHydration":function(){return Xw},"\u0275\u0275CopyDefinitionFeature":function(){return $f},"\u0275\u0275FactoryTarget":function(){return Ya},"\u0275\u0275HostDirectivesFeature":function(){return ep},"\u0275\u0275InheritDefinitionFeature":function(){return zf},"\u0275\u0275InputTransformsFeature":function(){return ap},"\u0275\u0275NgOnChangesFeature":function(){return Pi},"\u0275\u0275ProvidersFeature":function(){return Xy},"\u0275\u0275StandaloneFeature":function(){return sb},"\u0275\u0275advance":function(){return Nh},"\u0275\u0275attribute":function(){return gp},"\u0275\u0275attributeInterpolate1":function(){return Ip},"\u0275\u0275attributeInterpolate2":function(){return Rp},"\u0275\u0275attributeInterpolate3":function(){return kp},"\u0275\u0275attributeInterpolate4":function(){return Op},"\u0275\u0275attributeInterpolate5":function(){return Cp},"\u0275\u0275attributeInterpolate6":function(){return Ap},"\u0275\u0275attributeInterpolate7":function(){return Np},"\u0275\u0275attributeInterpolate8":function(){return jp},"\u0275\u0275attributeInterpolateV":function(){return Dp},"\u0275\u0275classMap":function(){return hg},"\u0275\u0275classMapInterpolate1":function(){return Vg},"\u0275\u0275classMapInterpolate2":function(){return Fg},"\u0275\u0275classMapInterpolate3":function(){return Bg},"\u0275\u0275classMapInterpolate4":function(){return Gg},"\u0275\u0275classMapInterpolate5":function(){return qg},"\u0275\u0275classMapInterpolate6":function(){return Wg},"\u0275\u0275classMapInterpolate7":function(){return Hg},"\u0275\u0275classMapInterpolate8":function(){return zg},"\u0275\u0275classMapInterpolateV":function(){return Kg},"\u0275\u0275classProp":function(){return ug},"\u0275\u0275contentQuery":function(){return T_},"\u0275\u0275defer":function(){return qy},"\u0275\u0275defineComponent":function(){return qn},"\u0275\u0275defineDirective":function(){return Jn},"\u0275\u0275defineInjectable":function(){return St},"\u0275\u0275defineInjector":function(){return xt},"\u0275\u0275defineNgModule":function(){return Kn},"\u0275\u0275definePipe":function(){return Xn},"\u0275\u0275directiveInject":function(){return Dh},"\u0275\u0275disableBindings":function(){return lo},"\u0275\u0275element":function(){return fv},"\u0275\u0275elementContainer":function(){return yv},"\u0275\u0275elementContainerEnd":function(){return mv},"\u0275\u0275elementContainerStart":function(){return gv},"\u0275\u0275elementEnd":function(){return hv},"\u0275\u0275elementStart":function(){return dv},"\u0275\u0275enableBindings":function(){return uo},"\u0275\u0275getCurrentView":function(){return Ev},"\u0275\u0275getInheritedFactory":function(){return Ma},"\u0275\u0275hostProperty":function(){return hm},"\u0275\u0275i18n":function(){return Uy},"\u0275\u0275i18nApply":function(){return By},"\u0275\u0275i18nAttributes":function(){return Vy},"\u0275\u0275i18nEnd":function(){return My},"\u0275\u0275i18nExp":function(){return Fy},"\u0275\u0275i18nPostprocess":function(){return Gy},"\u0275\u0275i18nStart":function(){return Ly},"\u0275\u0275inject":function(){return cn},"\u0275\u0275injectAttribute":function(){return Fa},"\u0275\u0275invalidFactory":function(){return Ph},"\u0275\u0275invalidFactoryDep":function(){return un},"\u0275\u0275listener":function(){return xv},"\u0275\u0275loadQuery":function(){return I_},"\u0275\u0275namespaceHTML":function(){return Zo},"\u0275\u0275namespaceMathML":function(){return Yo},"\u0275\u0275namespaceSVG":function(){return Ko},"\u0275\u0275nextContext":function(){return Ov},"\u0275\u0275ngDeclareClassMetadata":function(){return tx},"\u0275\u0275ngDeclareComponent":function(){return nx},"\u0275\u0275ngDeclareDirective":function(){return ex},"\u0275\u0275ngDeclareFactory":function(){return rx},"\u0275\u0275ngDeclareInjectable":function(){return ox},"\u0275\u0275ngDeclareInjector":function(){return ax},"\u0275\u0275ngDeclareNgModule":function(){return sx},"\u0275\u0275ngDeclarePipe":function(){return cx},"\u0275\u0275pipe":function(){return Mb},"\u0275\u0275pipeBind1":function(){return Ub},"\u0275\u0275pipeBind2":function(){return Vb},"\u0275\u0275pipeBind3":function(){return Fb},"\u0275\u0275pipeBind4":function(){return Bb},"\u0275\u0275pipeBindV":function(){return Gb},"\u0275\u0275projection":function(){return Nv},"\u0275\u0275projectionDef":function(){return Av},"\u0275\u0275property":function(){return uv},"\u0275\u0275propertyInterpolate":function(){return jv},"\u0275\u0275propertyInterpolate1":function(){return Dv},"\u0275\u0275propertyInterpolate2":function(){return Pv},"\u0275\u0275propertyInterpolate3":function(){return Lv},"\u0275\u0275propertyInterpolate4":function(){return Mv},"\u0275\u0275propertyInterpolate5":function(){return Uv},"\u0275\u0275propertyInterpolate6":function(){return Vv},"\u0275\u0275propertyInterpolate7":function(){return Fv},"\u0275\u0275propertyInterpolate8":function(){return Bv},"\u0275\u0275propertyInterpolateV":function(){return Gv},"\u0275\u0275pureFunction0":function(){return Eb},"\u0275\u0275pureFunction1":function(){return Sb},"\u0275\u0275pureFunction2":function(){return wb},"\u0275\u0275pureFunction3":function(){return xb},"\u0275\u0275pureFunction4":function(){return Tb},"\u0275\u0275pureFunction5":function(){return Ib},"\u0275\u0275pureFunction6":function(){return Rb},"\u0275\u0275pureFunction7":function(){return kb},"\u0275\u0275pureFunction8":function(){return Ob},"\u0275\u0275pureFunctionV":function(){return Cb},"\u0275\u0275queryRefresh":function(){return w_},"\u0275\u0275reference":function(){return cv},"\u0275\u0275registerNgModuleType":function(){return Vs},"\u0275\u0275resetView":function(){return vo},"\u0275\u0275resolveBody":function(){return oh},"\u0275\u0275resolveDocument":function(){return ih},"\u0275\u0275resolveWindow":function(){return rh},"\u0275\u0275restoreView":function(){return po},"\u0275\u0275sanitizeHtml":function(){return fl},"\u0275\u0275sanitizeResourceUrl":function(){return gl},"\u0275\u0275sanitizeScript":function(){return ml},"\u0275\u0275sanitizeStyle":function(){return pl},"\u0275\u0275sanitizeUrl":function(){return vl},"\u0275\u0275sanitizeUrlOrResourceUrl":function(){return _l},"\u0275\u0275setComponentScope":function(){return Wn},"\u0275\u0275setNgModuleScope":function(){return Yn},"\u0275\u0275styleMap":function(){return lg},"\u0275\u0275styleMapInterpolate1":function(){return Yg},"\u0275\u0275styleMapInterpolate2":function(){return Zg},"\u0275\u0275styleMapInterpolate3":function(){return Jg},"\u0275\u0275styleMapInterpolate4":function(){return Xg},"\u0275\u0275styleMapInterpolate5":function(){return Qg},"\u0275\u0275styleMapInterpolate6":function(){return $g},"\u0275\u0275styleMapInterpolate7":function(){return em},"\u0275\u0275styleMapInterpolate8":function(){return tm},"\u0275\u0275styleMapInterpolateV":function(){return nm},"\u0275\u0275styleProp":function(){return cg},"\u0275\u0275stylePropInterpolate1":function(){return rm},"\u0275\u0275stylePropInterpolate2":function(){return im},"\u0275\u0275stylePropInterpolate3":function(){return om},"\u0275\u0275stylePropInterpolate4":function(){return am},"\u0275\u0275stylePropInterpolate5":function(){return sm},"\u0275\u0275stylePropInterpolate6":function(){return cm},"\u0275\u0275stylePropInterpolate7":function(){return um},"\u0275\u0275stylePropInterpolate8":function(){return lm},"\u0275\u0275stylePropInterpolateV":function(){return dm},"\u0275\u0275syntheticHostListener":function(){return Tv},"\u0275\u0275syntheticHostProperty":function(){return fm},"\u0275\u0275template":function(){return rv},"\u0275\u0275templateRefExtractor":function(){return C_},"\u0275\u0275text":function(){return Ig},"\u0275\u0275textInterpolate":function(){return Og},"\u0275\u0275textInterpolate1":function(){return Cg},"\u0275\u0275textInterpolate2":function(){return Ag},"\u0275\u0275textInterpolate3":function(){return Ng},"\u0275\u0275textInterpolate4":function(){return jg},"\u0275\u0275textInterpolate5":function(){return Dg},"\u0275\u0275textInterpolate6":function(){return Pg},"\u0275\u0275textInterpolate7":function(){return Lg},"\u0275\u0275textInterpolate8":function(){return Mg},"\u0275\u0275textInterpolateV":function(){return Ug},"\u0275\u0275trustConstantHtml":function(){return yl},"\u0275\u0275trustConstantResourceUrl":function(){return bl},"\u0275\u0275validateIframeAttribute":function(){return mu},"\u0275\u0275viewQuery":function(){return x_}});var i=r(1120);function o(){return o="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,i.Z)(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},o.apply(this,arguments)}var a=r(4942),s=r(4506),c=r(7326),u=r(3433),l=r(5647),d=r(9439),h=r(7762),f=r(1413),p=r(3144),v=r(5671),g=r(136),m=r(7277),y=r(8664),b=function(e,t){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},b(e,t)};function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function E(t,n,r,i){return new(r||(r=Promise))((function(o,a){function s(t){try{u(i.next(t))}catch(e){a(e)}}function c(t){try{u(i.throw(t))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,c)}u((i=i.apply(t,n||[])).next())}))}function S(t,n){var r,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(u){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(s=0)),s;)try{if(r=1,i&&(o=2&c[0]?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,i=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){s=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){s.label=c[1];break}if(6===c[0]&&s.label<o[1]){s.label=o[1],o=c;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(c);break}o[2]&&s.ops.pop(),s.trys.pop();continue}c=n.call(t,s)}catch(e){c=[6,e],i=0}finally{r=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}}Object.create;function w(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function x(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function T(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function I(e){return this instanceof I?(this.v=e,this):new I(e)}function R(t,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=r.apply(t,n||[]),a=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){o[e]&&(i[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||c(e,t)}))})}function c(t,n){try{(r=o[t](n)).value instanceof I?Promise.resolve(r.value.v).then(u,l):d(a[0][2],r)}catch(e){d(a[0][3],e)}var r}function u(e){c("next",e)}function l(e){c("throw",e)}function d(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}}function k(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=w(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}Object.create;function O(e){return"function"===typeof e}function C(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var A=C((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function N(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var j=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=w(a),c=s.next();!c.done;c=s.next()){c.value.remove(this)}}catch(p){t={error:p}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}else a.remove(this);var u=this.initialTeardown;if(O(u))try{u()}catch(e){o=e instanceof A?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var d=w(l),h=d.next();!h.done;h=d.next()){var f=h.value;try{L(f)}catch(v){o=null!==o&&void 0!==o?o:[],v instanceof A?o=T(T([],x(o)),x(v.errors)):o.push(v)}}}catch(g){r={error:g}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}if(o)throw new A(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)L(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&N(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&N(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),D=j.EMPTY;function P(e){return e instanceof j||e&&"closed"in e&&O(e.remove)&&O(e.add)&&O(e.unsubscribe)}function L(e){O(e)?e():e.unsubscribe()}var M={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},U={setTimeout:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=U.delegate;return(null===i||void 0===i?void 0:i.setTimeout)?i.setTimeout.apply(i,T([e,t],x(n))):setTimeout.apply(void 0,T([e,t],x(n)))})),clearTimeout:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=U.delegate;return((null===t||void 0===t?void 0:t.clearTimeout)||clearTimeout)(e)})),delegate:void 0};function V(e){U.setTimeout((function(){var t=M.onUnhandledError;if(!t)throw e;t(e)}))}function F(){}var B=G("C",void 0,void 0);function G(e,t,n){return{kind:e,value:t,error:n}}var q=null;function W(e){if(M.useDeprecatedSynchronousErrorHandling){var t=!q;if(t&&(q={errorThrown:!1,error:null}),e(),t){var n=q,r=n.errorThrown,i=n.error;if(q=null,r)throw i}}else e()}var H=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,P(t)&&t.add(n)):n.destination=Q,n}return _(t,e),t.create=function(e,t,n){return new Z(e,t,n)},t.prototype.next=function(e){this.isStopped?X(function(e){return G("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?X(G("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?X(B,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(j),z=Function.prototype.bind;function K(e,t){return z.call(e,t)}var Y=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){J(n)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){J(n)}else J(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){J(t)}},e}(),Z=function(e){function t(t,n,r){var i,o,a=e.call(this)||this;O(t)||!t?i={next:null!==t&&void 0!==t?t:void 0,error:null!==n&&void 0!==n?n:void 0,complete:null!==r&&void 0!==r?r:void 0}:a&&M.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},i={next:t.next&&K(t.next,o),error:t.error&&K(t.error,o),complete:t.complete&&K(t.complete,o)}):i=t;return a.destination=new Y(i),a}return _(t,e),t}(H);function J(e){var t;M.useDeprecatedSynchronousErrorHandling?(t=e,M.useDeprecatedSynchronousErrorHandling&&q&&(q.errorThrown=!0,q.error=t)):V(e)}function X(e,t){var n=M.onStoppedNotification;n&&U.setTimeout((function(){return n(e,t)}))}var Q={closed:!0,next:F,error:function(e){throw e},complete:F},$="function"===typeof Symbol&&Symbol.observable||"@@observable";function ee(e){return e}function te(e){return 0===e.length?ee:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var ne=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,o=(r=e)&&r instanceof H||function(e){return e&&O(e.next)&&O(e.error)&&O(e.complete)}(r)&&P(r)?e:new Z(e,t,n);return W((function(){var e=i,t=e.operator,n=e.source;o.add(t?t.call(o,n):n?i._subscribe(o):i._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=re(t))((function(t,r){var i=new Z({next:function(t){try{e(t)}catch(n){r(n),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[$]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return te(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=re(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function re(e){var t;return null!==(t=null!==e&&void 0!==e?e:M.Promise)&&void 0!==t?t:Promise}var ie=C((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),oe=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return _(t,e),t.prototype.lift=function(e){var t=new ae(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new ie},t.prototype.next=function(e){var t=this;W((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=w(t.currentObservers),o=i.next();!o.done;o=i.next()){o.value.next(e)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;W((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;W((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,o=n.observers;return r||i?D:(this.currentObservers=null,o.push(e),new j((function(){t.currentObservers=null,N(o,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new ne;return e.source=this,e},t.create=function(e,t){return new ae(e,t)},t}(ne),ae=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return _(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:D},t}(oe),se=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return _(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(oe);function ce(e){return function(t){if(function(e){return O(null===e||void 0===e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(n){this.error(n)}}));throw new TypeError("Unable to lift unknown Observable type")}}function ue(e,t,n,r,i){return new le(e,t,n,r,i)}var le=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t)||this;return s.onFinalize=o,s.shouldUnsubscribe=a,s._next=n?function(e){try{n(e)}catch(r){t.error(r)}}:e.prototype._next,s._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return _(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(H);var de=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e};function he(e){return O(null===e||void 0===e?void 0:e.then)}function fe(e){return O(e[$])}function pe(e){return Symbol.asyncIterator&&O(null===e||void 0===e?void 0:e[Symbol.asyncIterator])}function ve(e){return new TypeError("You provided "+(null!==e&&"object"===typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var ge="function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function me(e){return O(null===e||void 0===e?void 0:e[ge])}function ye(e){return R(this,arguments,(function(){var t,n,r;return S(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,I(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,I(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,I(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function be(e){return O(null===e||void 0===e?void 0:e.getReader)}function _e(e){if(e instanceof ne)return e;if(null!=e){if(fe(e))return i=e,new ne((function(e){var t=i[$]();if(O(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(de(e))return r=e,new ne((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(he(e))return n=e,new ne((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,V)}));if(pe(e))return Ee(e);if(me(e))return t=e,new ne((function(e){var n,r;try{for(var i=w(t),o=i.next();!o.done;o=i.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()}));if(be(e))return Ee(ye(e))}var t,n,r,i;throw ve(e)}function Ee(e){return new ne((function(t){(function(e,t){var n,r,i,o;return E(this,void 0,void 0,(function(){var a,s;return S(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=k(e),c.label=1;case 1:return[4,n.next()];case 2:if((r=c.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),i={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function Se(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=t.schedule((function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(o),!i)return o}function we(e,t,n){return void 0===n&&(n=1/0),O(t)?we((function(n,r){return function(e,t){return ce((function(n,r){var i=0;n.subscribe(ue(r,(function(n){r.next(e.call(t,n,i++))})))}))}((function(e,i){return t(n,e,r,i)}))(_e(e(n,r)))}),n):("number"===typeof t&&(n=t),ce((function(t,r){return function(e,t,n,r,i,o,a,s){var c=[],u=0,l=0,d=!1,h=function(){!d||c.length||u||t.complete()},f=function(e){return u<r?p(e):c.push(e)},p=function e(s){o&&t.next(s),u++;var d=!1;_e(n(s,l++)).subscribe(ue(t,(function(e){null===i||void 0===i||i(e),o?f(e):t.next(e)}),(function(){d=!0}),void 0,(function(){if(d)try{u--;for(var n=function(){var n=c.shift();a?Se(t,a,(function(){return e(n)})):e(n)};c.length&&u<r;)n();h()}catch(i){t.error(i)}})))};return e.subscribe(ue(t,f,(function(){d=!0,h()}))),function(){null===s||void 0===s||s()}}(t,r,e,n)})))}var xe=new ne((function(e){return e.complete()}));function Te(e){return e[e.length-1]}function Ie(e){return(t=Te(e))&&O(t.schedule)?e.pop():void 0;var t}function Re(e,t){return void 0===t&&(t=0),ce((function(n,r){n.subscribe(ue(r,(function(n){return Se(r,e,(function(){return r.next(n)}),t)}),(function(){return Se(r,e,(function(){return r.complete()}),t)}),(function(n){return Se(r,e,(function(){return r.error(n)}),t)})))}))}function ke(e,t){return void 0===t&&(t=0),ce((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function Oe(e,t){if(!e)throw new Error("Iterable cannot be null");return new ne((function(n){Se(n,t,(function(){var r=e[Symbol.asyncIterator]();Se(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function Ce(e,t){if(null!=e){if(fe(e))return function(e,t){return _e(e).pipe(ke(t),Re(t))}(e,t);if(de(e))return function(e,t){return new ne((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if(he(e))return function(e,t){return _e(e).pipe(ke(t),Re(t))}(e,t);if(pe(e))return Oe(e,t);if(me(e))return function(e,t){return new ne((function(n){var r;return Se(n,t,(function(){r=e[ge](),Se(n,t,(function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(o){return void n.error(o)}i?n.complete():n.next(t)}),0,!0)})),function(){return O(null===r||void 0===r?void 0:r.return)&&r.return()}}))}(e,t);if(be(e))return function(e,t){return Oe(ye(e),t)}(e,t)}throw ve(e)}function Ae(e,t){return t?Ce(e,t):_e(e)}function Ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ie(e),r=function(e,t){return"number"===typeof Te(e)?e.pop():t}(e,1/0),i=e;return i.length?1===i.length?_e(i[0]):function(e){return void 0===e&&(e=1/0),we(ee,e)}(r)(Ae(i,n)):xe}function je(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new oe}:t,r=e.resetOnError,i=void 0===r||r,o=e.resetOnComplete,a=void 0===o||o,s=e.resetOnRefCountZero,c=void 0===s||s;return function(e){var t,r,o,s=0,u=!1,l=!1,d=function(){null===r||void 0===r||r.unsubscribe(),r=void 0},h=function(){d(),t=o=void 0,u=l=!1},f=function(){var e=t;h(),null===e||void 0===e||e.unsubscribe()};return ce((function(e,p){s++,l||u||d();var v=o=null!==o&&void 0!==o?o:n();p.add((function(){0!==--s||l||u||(r=De(f,c))})),v.subscribe(p),!t&&s>0&&(t=new Z({next:function(e){return v.next(e)},error:function(e){l=!0,d(),r=De(h,i,e),v.error(e)},complete:function(){u=!0,d(),r=De(h,a),v.complete()}}),_e(e).subscribe(t))}))(e)}}function De(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!0!==t){if(!1!==t){var i=new Z({next:function(){i.unsubscribe(),e()}});return _e(t.apply(void 0,T([],x(n)))).subscribe(i)}}else e()}function Pe(e,t){return e===t}var Le,Me=C((function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}));function Ue(){return new Me}function Ve(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?function(e,t){return ce((function(n,r){var i=0;n.subscribe(ue(r,(function(n){return e.call(t,n,i++)&&r.next(n)})))}))}((function(t,n){return e(t,n,r)})):ee,(o=1)<=0?function(){return xe}:ce((function(e,t){var n=0;e.subscribe(ue(t,(function(e){++n<=o&&(t.next(e),o<=n&&t.complete())})))})),n?function(e){return ce((function(t,n){var r=!1;t.subscribe(ue(n,(function(e){r=!0,n.next(e)}),(function(){r||n.next(e),n.complete()})))}))}(t):(void 0===(i=function(){return new Me})&&(i=Ue),ce((function(e,t){var n=!1;e.subscribe(ue(t,(function(e){n=!0,t.next(e)}),(function(){return n?t.complete():t.error(i())})))}))));var i,o}}function Fe(e){for(var t in e)if(e[t]===Fe)return t;throw Error("Could not find renamed property on target object.")}function Be(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Ge(e){if("string"===typeof e)return e;if(Array.isArray(e))return"["+e.map(Ge).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function qe(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var We=Fe({__forward_ref__:Fe});function He(e){return e.__forward_ref__=He,e.toString=function(){return Ge(this())},e}function ze(e){return Ke(e)?e():e}function Ke(e){return"function"===typeof e&&e.hasOwnProperty(We)&&e.__forward_ref__===He}function Ye(e){return e&&!!e.\u0275providers}var Ze="https://angular.io/errors",Je="https://g.co/ng/security#xss",Xe=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(e,r){var i;return(0,v.Z)(this,n),(i=t.call(this,Qe(e,r))).code=e,i}return(0,p.Z)(n)}((0,y.Z)(Error));function Qe(e,t){var n="NG0".concat(Math.abs(e)),r="".concat(n).concat(t?": "+t:"");if(ngDevMode&&e<0){var i=!r.match(/[.,;!?\n]$/)?".":"";r="".concat(r).concat(i," Find more at ").concat(Ze,"/").concat(n)}return r}function $e(e){return"string"===typeof e?e:null==e?"":String(e)}function et(e){return"function"===typeof e?e.name||e.toString():"object"===typeof e&&null!=e&&"function"===typeof e.type?e.type.name||e.type.toString():$e(e)}function tt(e,t){var n=t?". Dependency path: ".concat(t.join(" > ")," > ").concat(e):"";throw new Xe(-200,"Circular dependency in DI detected for ".concat(e).concat(n))}function nt(){throw new Error("Cannot mix multi providers and regular providers")}function rt(e,t,n){if(e&&t){var r=t.map((function(e){return e==n?"?"+n+"?":"..."}));throw new Error("Invalid provider for the NgModule '".concat(Ge(e),"' - only instances of Provider and Type are allowed, got: [").concat(r.join(", "),"]"))}throw Ye(n)?n.\u0275fromNgModule?new Xe(207,"Invalid providers from 'importProvidersFrom' present in a non-environment injector. 'importProvidersFrom' can't be used for component providers."):new Xe(207,"Invalid providers present in a non-environment injector. 'EnvironmentProviders' can't be used for component providers."):new Error("Invalid provider")}function it(e,t){var n=t?" in ".concat(t):"";throw new Xe(-201,ngDevMode&&"No provider for ".concat(et(e)," found").concat(n))}function ot(e,t){"number"!==typeof e&&yt(t,typeof e,"number","===")}function at(e,t,n){ot(e,"Expected a number"),pt(e,n,"Expected number to be less than or equal to"),gt(e,t,"Expected number to be greater than or equal to")}function st(e,t){"string"!==typeof e&&yt(t,null===e?"null":typeof e,"string","===")}function ct(e,t){"function"!==typeof e&&yt(t,null===e?"null":typeof e,"function","===")}function ut(e,t,n){e!=t&&yt(n,e,t,"==")}function lt(e,t,n){e==t&&yt(n,e,t,"!=")}function dt(e,t,n){e!==t&&yt(n,e,t,"===")}function ht(e,t,n){e===t&&yt(n,e,t,"!==")}function ft(e,t,n){e<t||yt(n,e,t,"<")}function pt(e,t,n){e<=t||yt(n,e,t,"<=")}function vt(e,t,n){e>t||yt(n,e,t,">")}function gt(e,t,n){e>=t||yt(n,e,t,">=")}function mt(e,t){null==e&&yt(t,e,null,"!=")}function yt(e,t,n,r){throw new Error("ASSERTION ERROR: ".concat(e)+(null==r?"":" [Expected=> ".concat(n," ").concat(r," ").concat(t," <=Actual]")))}function bt(e){e instanceof Node||yt("The provided value must be an instance of a DOM Node but got ".concat(Ge(e)))}function _t(e,t){mt(e,"Array must be defined.");var n=e.length;(t<0||t>=n)&&yt("Index expected to be less than ".concat(n," but got ").concat(t))}function Et(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(-1!==n.indexOf(e))return!0;yt("Expected value to be one of ".concat(JSON.stringify(n)," but was ").concat(JSON.stringify(e),"."))}function St(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}var wt=St;function xt(e){return{providers:e.providers||[],imports:e.imports||[]}}function Tt(e){return Rt(e,At)||Rt(e,jt)}function It(e){return null!==Tt(e)}function Rt(e,t){return e.hasOwnProperty(t)?e[t]:null}function kt(e){return e&&(e.hasOwnProperty(Nt)||e.hasOwnProperty(Dt))?e[Nt]:null}var Ot,Ct,At=Fe({"\u0275prov":Fe}),Nt=Fe({"\u0275inj":Fe}),jt=Fe({ngInjectableDef:Fe}),Dt=Fe({ngInjectorDef:Fe});function Pt(){return Ct}function Lt(e){var t=Ct;return Ct=e,t}function Mt(e,t,n){var r=Tt(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Ot.Optional?null:void 0!==t?t:void it(Ge(e),"Injector")}!function(e){e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional"}(Ot||(Ot={}));var Ut,Vt=globalThis;function Ft(){return!("undefined"!==typeof ngDevMode&&!ngDevMode)&&("object"!==typeof ngDevMode&&function(){var e="undefined"!==typeof location?location.toString():"",t={namedConstructors:-1!=e.indexOf("ngDevMode=namedConstructors"),firstCreatePass:0,tNode:0,tView:0,rendererCreateTextNode:0,rendererSetText:0,rendererCreateElement:0,rendererAddEventListener:0,rendererSetAttribute:0,rendererRemoveAttribute:0,rendererSetProperty:0,rendererSetClassName:0,rendererAddClass:0,rendererRemoveClass:0,rendererSetStyle:0,rendererRemoveStyle:0,rendererDestroy:0,rendererDestroyNode:0,rendererMoveNode:0,rendererRemoveNode:0,rendererAppendChild:0,rendererInsertBefore:0,rendererCreateComment:0,hydratedNodes:0,hydratedComponents:0,dehydratedViewsRemoved:0,dehydratedViewsCleanupRuns:0,componentsSkippedHydration:0},n=-1===e.indexOf("ngDevMode=false");Vt.ngDevMode=n&&t}(),"undefined"!==typeof ngDevMode&&!!ngDevMode)}function Bt(){return!ngDevMode&&yt("getInjectorProfilerContext should never be called in production mode"),Ut}function Gt(e){!ngDevMode&&yt("setInjectorProfilerContext should never be called in production mode");var t=Ut;return Ut=e,t}var qt=null,Wt=function(e){!ngDevMode&&yt("setInjectorProfiler should never be called in production mode"),qt=e};function Ht(e){!ngDevMode&&yt("Injector profiler should never be called in production mode"),null!=qt&&qt(e)}function zt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!ngDevMode&&yt("Injector profiler should never be called in production mode"),Ht({type:2,context:Bt(),providerRecord:{token:"function"===typeof e?e:ze(e.provide),provider:e,isViewProvider:t}})}function Kt(e){!ngDevMode&&yt("Injector profiler should never be called in production mode"),Ht({type:1,context:Bt(),instance:{value:e}})}function Yt(e,t,n){!ngDevMode&&yt("Injector profiler should never be called in production mode"),Ht({type:0,context:Bt(),service:{token:e,value:t,flags:n}})}function Zt(e,t,n){!ngDevMode&&yt("runInInjectorProfilerContext should never be called in production mode");var r=Gt({injector:e,token:t});try{n()}finally{Gt(r)}}var Jt,Xt,Qt={},$t="__NG_DI_FLAG__",en="ngTempTokenPath",tn=/\n/gm,nn="\u0275",rn="__source",on=void 0;function an(e){var t=on;return on=e,t}function sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Default;if(void 0===on)throw new Xe(-203,ngDevMode&&"inject() must be called from an injection context such as a constructor, a factory function, a field initializer, or a function used with `runInInjectionContext`.");if(null===on)return Mt(e,void 0,t);var n=on.get(e,t&Ot.Optional?null:void 0,t);return ngDevMode&&Yt(e,n,t),n}function cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Default;return(Pt()||sn)(ze(e),t)}function un(e){throw new Xe(202,ngDevMode&&"This constructor is not compatible with Angular Dependency Injection because its dependency at index ".concat(e," of the parameter list is invalid.\nThis can happen if the dependency type is a primitive like a string or if an ancestor of this class is missing an Angular decorator.\n\nPlease check that 1) the type for the parameter at index ").concat(e," is correct and 2) the correct Angular decorators are defined for this class and its ancestors."))}function ln(e){return cn(e,dn(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Default))}function dn(e){return"undefined"===typeof e||"number"===typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function hn(e){for(var t=[],n=0;n<e.length;n++){var r=ze(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Xe(900,ngDevMode&&"Arguments array must have arguments.");for(var i=void 0,o=Ot.Default,a=0;a<r.length;a++){var s=r[a],c=s[$t];"number"===typeof c?-1===c?i=s.token:o|=c:i=s}t.push(cn(i,o))}else t.push(cn(r))}return t}function fn(e,t){return e[$t]=t,e.prototype[$t]=t,e}function pn(e,t,n,r){var i=e[en];throw t[rn]&&i.unshift(t[rn]),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&e.charAt(1)==nn?e.slice(2):e;var i=Ge(t);if(Array.isArray(t))i=t.map(Ge).join(" -> ");else if("object"===typeof t){var o=[];for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];o.push(a+":"+("string"===typeof s?JSON.stringify(s):Ge(s)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(tn,"\n  "))}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[en]=null,e}function vn(e){return{toString:e}.toString()}!function(e){e[e.OnPush=0]="OnPush",e[e.Default=1]="Default"}(Jt||(Jt={})),function(e){e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom"}(Xt||(Xt={}));var gn={},mn=[];("undefined"===typeof ngDevMode||ngDevMode)&&Ft()&&(Object.freeze(gn),Object.freeze(mn));var yn=Fe({"\u0275cmp":Fe}),bn=Fe({"\u0275dir":Fe}),_n=Fe({"\u0275pipe":Fe}),En=Fe({"\u0275mod":Fe}),Sn=Fe({"\u0275fac":Fe}),wn=Fe({__NG_ELEMENT_ID__:Fe}),xn=Fe({__NG_ENV_ID__:Fe});function Tn(e,t,n){ngDevMode&&lt(t,"",'can not look for "" string.');for(var r=e.length;;){var i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){var o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function In(e,t,n){for(var r=0;r<n.length;){var i=n[r];if("number"===typeof i){if(0!==i)break;r++;var o=n[r++],a=n[r++],s=n[r++];ngDevMode&&ngDevMode.rendererSetAttribute++,e.setAttribute(t,a,s,o)}else{var c=i,u=n[++r];ngDevMode&&ngDevMode.rendererSetAttribute++,kn(c)?e.setProperty(t,c,u):e.setAttribute(t,c,u),r++}}return r}function Rn(e){return 3===e||4===e||6===e}function kn(e){return 64===e.charCodeAt(0)}function On(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var i=t[r];"number"===typeof i?n=i:0===n||Cn(e,n,i,null,-1===n||2===n?t[++r]:null)}return e}function Cn(e,t,n,r,i){var o=0,a=e.length;if(-1===t)a=-1;else for(;o<e.length;){var s=e[o++];if("number"===typeof s){if(s===t){a=-1;break}if(s>t){a=o-1;break}}}for(;o<e.length;){var c=e[o];if("number"===typeof c)break;if(c===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}var An="ng-template";function Nn(e,t,n){ngDevMode&&ut(t,t.toLowerCase(),"Class name expected to be lowercase.");for(var r=0,i=!0;r<e.length;){var o=e[r++];if("string"===typeof o&&i){var a=e[r++];if(n&&"class"===o&&-1!==Tn(a.toLowerCase(),t,0))return!0}else{if(1===o){for(;r<e.length&&"string"==typeof(o=e[r++]);)if(o.toLowerCase()===t)return!0;return!1}"number"===typeof o&&(i=!1)}}return!1}function jn(e){return 4===e.type&&e.value!==An}function Dn(e,t,n){return t===(4!==e.type||n?e.value:An)}function Pn(e,t,n){ngDevMode&&mt(t[0],"Selector should have a tag name");for(var r=4,i=e.attrs||[],o=function(e){for(var t=0;t<e.length;t++){if(Rn(e[t]))return t}return e.length}(i),a=!1,s=0;s<t.length;s++){var c=t[s];if("number"!==typeof c){if(!a)if(4&r){if(r=2|1&r,""!==c&&!Dn(e,c,n)||""===c&&1===t.length){if(Ln(r))return!1;a=!0}}else{var u=8&r?c:t[++s];if(8&r&&null!==e.attrs){if(!Nn(e.attrs,u,n)){if(Ln(r))return!1;a=!0}continue}var l=Mn(8&r?"class":c,i,jn(e),n);if(-1===l){if(Ln(r))return!1;a=!0;continue}if(""!==u){var d=void 0;l>o?d="":(ngDevMode&&lt(i[l],0,"We do not match directives on namespaced attributes"),d=i[l+1].toLowerCase());var h=8&r?d:null;if(h&&-1!==Tn(h,u,0)||2&r&&u!==d){if(Ln(r))return!1;a=!0}}}}else{if(!a&&!Ln(r)&&!Ln(c))return!1;if(a&&Ln(c))continue;a=!1,r=c|1&r}}return Ln(r)||a}function Ln(e){return 0===(1&e)}function Mn(e,t,n,r){if(null===t)return-1;var i=0;if(r||!n){for(var o=!1;i<t.length;){var a=t[i];if(a===e)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){for(var s=t[++i];"string"===typeof s;)s=t[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){var r=e[n];if("number"===typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Un(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(Pn(e,t[r],n))return!0;return!1}function Vn(e,t){e:for(var n=0;n<t.length;n++){var r=t[n];if(e.length===r.length){for(var i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function Fn(e,t){return e?":not("+t.trim()+")":t}function Bn(e){for(var t=e[0],n=1,r=2,i="",o=!1;n<e.length;){var a=e[n];if("string"===typeof a)if(2&r){var s=e[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""===i||Ln(a)||(t+=Fn(o,i),i=""),r=a,o=o||!Ln(r);n++}return""!==i&&(t+=Fn(o,i)),t}function Gn(e){return e.map(Bn).join(",")}function qn(e){return vn((function(){var t;("undefined"===typeof ngDevMode||ngDevMode)&&Ft();var n=rr(e),r=(0,f.Z)((0,f.Z)({},n),{},{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Jt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:null!==(t=e.signals)&&void 0!==t&&t,data:e.data||{},encapsulation:e.encapsulation||Xt.Emulated,styles:e.styles||mn,_:null,schemas:e.schemas||null,tView:null,id:""});ir(r);var i=e.dependencies;return r.directiveDefs=or(i,!1),r.pipeDefs=or(i,!0),r.id=function(e){var t,n=0,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|"),i=(0,h.Z)(r);try{for(i.s();!(t=i.n()).done;){var o=t.value;n=Math.imul(31,n)+o.charCodeAt(0)<<0}}catch(c){i.e(c)}finally{i.f()}var a="c"+(n+=2147483648);if("undefined"===typeof ngDevMode||ngDevMode)if(ar.has(a)){var s=ar.get(a);s!==e.type&&console.warn(Qe(-912,"Component ID generation collision detected. Components '".concat(s.name,"' and '").concat(e.type.name,"' with selector '").concat(Gn(e.selectors),"' generated the same component ID. To fix this, you can change the selector of one of those components or add an extra host attribute to force a different ID.")))}else ar.set(a,e.type);return a}(r),r}))}function Wn(e,t,n){var r=e.\u0275cmp;r.directiveDefs=or(t,!1),r.pipeDefs=or(n,!0)}function Hn(e){return Qn(e)||$n(e)}function zn(e){return null!==e}function Kn(e){return vn((function(){return{type:e.type,bootstrap:e.bootstrap||mn,declarations:e.declarations||mn,imports:e.imports||mn,exports:e.exports||mn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}}))}function Yn(e,t){return vn((function(){var n=nr(e,!0);n.declarations=t.declarations||mn,n.imports=t.imports||mn,n.exports=t.exports||mn}))}function Zn(e,t){if(null==e)return gn;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}function Jn(e){return vn((function(){var t=rr(e);return ir(t),t}))}function Xn(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Qn(e){return e[yn]||null}function $n(e){return e[bn]||null}function er(e){return e[_n]||null}function tr(e){var t=Qn(e)||$n(e)||er(e);return null!==t&&t.standalone}function nr(e,t){var n=e[En]||null;if(!n&&!0===t)throw new Error("Type ".concat(Ge(e)," does not have '\u0275mod' property."));return n}function rr(e){var t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||gn,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||mn,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Zn(e.inputs,t),outputs:Zn(e.outputs)}}function ir(e){var t;null===(t=e.features)||void 0===t||t.forEach((function(t){return t(e)}))}function or(e,t){if(!e)return null;var n=t?er:Hn;return function(){return("function"===typeof e?e():e).map((function(e){return n(e)})).filter(zn)}}var ar=new Map;var sr=0,cr=1,ur=2,lr=3,dr=4,hr=5,fr=6,pr=7,vr=8,gr=9,mr=10,yr=11,br=12,_r=13,Er=14,Sr=15,wr=16,xr=17,Tr=18,Ir=19,Rr=20,kr=21,Or=22,Cr=23,Ar=24,Nr=25,jr=1,Dr=2,Pr=7,Lr=8,Mr=9,Ur=10,Vr=11;function Fr(e){return Array.isArray(e)&&"object"===typeof e[jr]}function Br(e){return Array.isArray(e)&&!0===e[jr]}function Gr(e){return 0!==(4&e.flags)}function qr(e){return e.componentOffset>-1}function Wr(e){return 1===(1&e.flags)}function Hr(e){return!!e.template}function zr(e){return 0!==(512&e[ur])}function Kr(e){return 16===(16&e.type)}function Yr(e,t){Zr(e,t[cr])}function Zr(e,t){Jr(e);for(var n=t.data,r=Nr;r<n.length;r++)if(n[r]===e)return;yt("This TNode does not belong to this TView.")}function Jr(e){mt(e,"TNode must be defined"),e&&"object"===typeof e&&e.hasOwnProperty("directiveStylingLast")||yt("Not of type TNode, got: "+e)}function Xr(e){mt(e,"Expected TIcu to be defined"),"number"!==typeof e.currentCaseLViewIndex&&yt("Object is not of TIcu type.")}function Qr(e){mt(e,"currentTNode should exist!"),mt(e.parent,"currentTNode should have a parent")}function $r(e){mt(e,"LContainer must be defined"),ut(Br(e),!0,"Expecting LContainer")}function ei(e){e&&ut(Fr(e),!0,"Expecting LView or undefined or null")}function ti(e){mt(e,"LView must be defined"),ut(Fr(e),!0,"Expecting LView")}function ni(e,t){ut(e.firstCreatePass,!0,t||"Should only be called in first create pass.")}function ri(e,t){ut(e.firstUpdatePass,!0,t||"Should only be called in first update pass.")}function ii(e,t){oi(e[1].expandoStartIndex,e.length,t)}function oi(e,t,n){e<=n&&n<t||yt("Index out of range (expecting ".concat(e," <= ").concat(n," < ").concat(t,")"))}function ai(e,t){mt(e,t||"Component views should always have a parent view (component's host view)")}function si(e,t){ii(e,t),ii(e,t+8),ot(e[t+0],"injectorIndex should point to a bloom filter"),ot(e[t+1],"injectorIndex should point to a bloom filter"),ot(e[t+2],"injectorIndex should point to a bloom filter"),ot(e[t+3],"injectorIndex should point to a bloom filter"),ot(e[t+4],"injectorIndex should point to a bloom filter"),ot(e[t+5],"injectorIndex should point to a bloom filter"),ot(e[t+6],"injectorIndex should point to a bloom filter"),ot(e[t+7],"injectorIndex should point to a bloom filter"),ot(e[t+8],"injectorIndex should point to parent injector")}function ci(e,t){var n=e.hasOwnProperty(Sn);if(!n&&!0===t&&ngDevMode)throw new Error("Type ".concat(Ge(e)," does not have '\u0275fac' property."));return n?e[Sn]:null}var ui=Symbol("SIGNAL");function li(e){return"function"===typeof e&&void 0!==e[ui]}function di(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t[ui]=e,Object.assign(t,n)}function hi(e,t){return(null===e||"object"!==typeof e)&&Object.is(e,t)}var fi=function(){function e(t){(0,v.Z)(this,e),this.ref=t}return(0,p.Z)(e,[{key:"deref",value:function(){return this.ref}}]),e}(),pi=null!==(Le=Vt.WeakRef)&&void 0!==Le?Le:fi;function vi(e){}var gi=0,mi=null,yi=!1;function bi(e){var t=mi;return mi=e,t}var _i=function(){function e(){(0,v.Z)(this,e),this.id=gi++,this.ref=function(e){if("undefined"!==typeof ngDevMode&&ngDevMode&&void 0===pi)throw new Error("Angular requires a browser which supports the 'WeakRef' API");return new pi(e)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}return(0,p.Z)(e,[{key:"consumerPollProducersForChange",value:function(){var e,t=(0,h.Z)(this.producers);try{for(t.s();!(e=t.n()).done;){var n=(0,d.Z)(e.value,2),r=n[0],i=n[1],o=i.producerNode.deref();if(null!=o&&i.atTrackingVersion===this.trackingVersion){if(o.producerPollStatus(i.seenValueVersion))return!0}else this.producers.delete(r),null===o||void 0===o||o.consumers.delete(this.id)}}catch(a){t.e(a)}finally{t.f()}return!1}},{key:"producerMayHaveChanged",value:function(){var e=yi;yi=!0;try{var t,n=(0,h.Z)(this.consumers);try{for(n.s();!(t=n.n()).done;){var r=(0,d.Z)(t.value,2),i=r[0],o=r[1],a=o.consumerNode.deref();null!=a&&a.trackingVersion===o.atTrackingVersion?a.onConsumerDependencyMayHaveChanged():(this.consumers.delete(i),null===a||void 0===a||a.producers.delete(this.id))}}catch(s){n.e(s)}finally{n.f()}}finally{yi=e}}},{key:"producerAccessed",value:function(){if(yi)throw new Error("undefined"!==typeof ngDevMode&&ngDevMode?"Assertion error: signal read during notification phase":"");if(null!==mi){var e=mi.producers.get(this.id);void 0===e?(e={consumerNode:mi.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:mi.trackingVersion},mi.producers.set(this.id,e),this.consumers.set(mi.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=mi.trackingVersion)}}},{key:"hasProducers",get:function(){return this.producers.size>0}},{key:"producerUpdatesAllowed",get:function(){var e;return!1!==(null===(e=mi)||void 0===e?void 0:e.consumerAllowSignalWrites)}},{key:"producerPollStatus",value:function(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}]),e}();function Ei(e,t){var n,r=new Ti(e,null!==(n=null===t||void 0===t?void 0:t.equal)&&void 0!==n?n:hi);return di(r,r.signal.bind(r))}var Si=Symbol("UNSET"),wi=Symbol("COMPUTING"),xi=Symbol("ERRORED"),Ti=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(e,r){var i;return(0,v.Z)(this,n),(i=t.call(this)).computation=e,i.equal=r,i.value=Si,i.error=null,i.stale=!0,i.consumerAllowSignalWrites=!1,i}return(0,p.Z)(n,[{key:"onConsumerDependencyMayHaveChanged",value:function(){this.stale||(this.stale=!0,this.producerMayHaveChanged())}},{key:"onProducerUpdateValueVersion",value:function(){this.stale&&(this.value===Si||this.value===wi||this.consumerPollProducersForChange()?this.recomputeValue():this.stale=!1)}},{key:"recomputeValue",value:function(){if(this.value===wi)throw new Error("Detected cycle in computations.");var e=this.value;this.value=wi,this.trackingVersion++;var t,n=bi(this);try{t=this.computation()}catch(r){t=xi,this.error=r}finally{bi(n)}this.stale=!1,e!==Si&&e!==xi&&t!==xi&&this.equal(e,t)?this.value=e:(this.value=t,this.valueVersion++)}},{key:"signal",value:function(){if(this.onProducerUpdateValueVersion(),this.producerAccessed(),this.value===xi)throw this.error;return this.value}}]),n}(_i);var Ii=function(){throw new Error};function Ri(){Ii()}var ki=null,Oi=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(e,r){var i;return(0,v.Z)(this,n),(i=t.call(this)).value=e,i.equal=r,i.consumerAllowSignalWrites=!1,i}return(0,p.Z)(n,[{key:"onConsumerDependencyMayHaveChanged",value:function(){}},{key:"onProducerUpdateValueVersion",value:function(){}},{key:"set",value:function(e){var t;(this.producerUpdatesAllowed||Ri(),this.equal(this.value,e))||(this.value=e,this.valueVersion++,this.producerMayHaveChanged(),null===(t=ki)||void 0===t||t())}},{key:"update",value:function(e){this.producerUpdatesAllowed||Ri(),this.set(e(this.value))}},{key:"mutate",value:function(e){var t;this.producerUpdatesAllowed||Ri(),e(this.value),this.valueVersion++,this.producerMayHaveChanged(),null===(t=ki)||void 0===t||t()}},{key:"asReadonly",value:function(){var e=this;return void 0===this.readonlySignal&&(this.readonlySignal=di(this,(function(){return e.signal()}))),this.readonlySignal}},{key:"signal",value:function(){return this.producerAccessed(),this.value}}]),n}(_i);function Ci(e,t){var n,r=new Oi(e,null!==(n=null===t||void 0===t?void 0:t.equal)&&void 0!==n?n:hi);return di(r,r.signal.bind(r),{set:r.set.bind(r),update:r.update.bind(r),mutate:r.mutate.bind(r),asReadonly:r.asReadonly.bind(r)})}function Ai(e){var t=bi(null);try{return e()}finally{bi(t)}}var Ni=function(){},ji=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(e,r,i){var o;return(0,v.Z)(this,n),(o=t.call(this)).watch=e,o.schedule=r,o.dirty=!1,o.cleanupFn=Ni,o.registerOnCleanup=function(e){o.cleanupFn=e},o.consumerAllowSignalWrites=i,o}return(0,p.Z)(n,[{key:"notify",value:function(){this.dirty||this.schedule(this),this.dirty=!0}},{key:"onConsumerDependencyMayHaveChanged",value:function(){this.notify()}},{key:"onProducerUpdateValueVersion",value:function(){}},{key:"run",value:function(){if(this.dirty=!1,0===this.trackingVersion||this.consumerPollProducersForChange()){var e=bi(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Ni,this.watch(this.registerOnCleanup)}finally{bi(e)}}}},{key:"cleanup",value:function(){this.cleanupFn()}}]),n}(_i),Di=function(){function e(t,n,r){(0,v.Z)(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return(0,p.Z)(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function Pi(){return Li}function Li(e){return e.type.prototype.ngOnChanges&&(e.setInput=Ui),Mi}function Mi(){var e=Fi(this),t=null===e||void 0===e?void 0:e.current;if(t){var n=e.previous;if(n===gn)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Ui(e,t,n,r){var i=this.declaredInputs[n];ngDevMode&&st(i,"Name of input in ngOnChanges has to be a string");var o=Fi(e)||function(e,t){return e[Vi]=t}(e,{previous:gn,current:null}),a=o.current||(o.current={}),s=o.previous,c=s[i];a[i]=new Di(c&&c.currentValue,t,s===gn),e[r]=t}Pi.ngInherit=!0;var Vi="__ngSimpleChanges__";function Fi(e){return e[Vi]||null}var Bi=null,Gi=function(e){Bi=e},qi=function(e,t,n){null!=Bi&&Bi(e,t,n)},Wi="svg",Hi="math";function zi(e){for(;Array.isArray(e);)e=e[sr];return e}function Ki(e,t){return ngDevMode&&_t(t,e),ngDevMode&&gt(e,Nr,"Expected to be past HEADER_OFFSET"),zi(t[e])}function Yi(e,t){return ngDevMode&&Yr(e,t),ngDevMode&&_t(t,e.index),zi(t[e.index])}function Zi(e,t){ngDevMode&&vt(t,-1,"wrong index for TNode"),ngDevMode&&ft(t,e.data.length,"wrong index for TNode");var n=e.data[t];return ngDevMode&&null!==n&&Jr(n),n}function Ji(e,t){return ngDevMode&&_t(e,t),e[t]}function Xi(e,t){ngDevMode&&_t(t,e);var n=t[e];return Fr(n)?n:n[sr]}function Qi(e){return 4===(4&e[ur])}function $i(e,t){return null===t||void 0===t?null:(ngDevMode&&_t(e,t),e[t])}function eo(e){e[xr]=0}function to(e){0===(1024&e[ur])&&(e[ur]|=1024,ro(e,1))}function no(e){1024&e[ur]&&(e[ur]&=-1025,ro(e,-1))}function ro(e,t){var n=e[lr];if(null!==n){n[hr]+=t;var r=n;for(n=n[lr];null!==n&&(1===t&&1===r[hr]||-1===t&&0===r[hr]);)n[hr]+=t,r=n,n=n[lr]}}function io(e,t){if(256===(256&e[ur]))throw new Xe(911,ngDevMode&&"View has already been destroyed.");null===e[kr]&&(e[kr]=[]),e[kr].push(t)}var oo={lFrame:Vo(null),bindingsEnabled:!0,skipHydrationRootTNode:null},ao=!1;function so(){return oo.bindingsEnabled}function co(){return null!==oo.skipHydrationRootTNode}function uo(){oo.bindingsEnabled=!0}function lo(){oo.bindingsEnabled=!1}function ho(){return oo.lFrame.lView}function fo(){return oo.lFrame.tView}function po(e){return oo.lFrame.contextLView=e,e[vr]}function vo(e){return oo.lFrame.contextLView=null,e}function go(){for(var e=mo();null!==e&&64===e.type;)e=e.parent;return e}function mo(){return oo.lFrame.currentTNode}function yo(){var e=oo.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function bo(e,t){ngDevMode&&e&&Zr(e,oo.lFrame.tView);var n=oo.lFrame;n.currentTNode=e,n.isParent=t}function _o(){return oo.lFrame.isParent}function Eo(){oo.lFrame.isParent=!1}function So(){return!ngDevMode&&yt("Must never be called in production mode"),ao}function wo(e){!ngDevMode&&yt("Must never be called in production mode"),ao=e}function xo(){var e=oo.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function To(){return oo.lFrame.bindingIndex}function Io(e){return oo.lFrame.bindingIndex=e}function Ro(){return oo.lFrame.bindingIndex++}function ko(e){var t=oo.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Oo(e){oo.lFrame.inI18n=e}function Co(e,t){var n=oo.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ao(t)}function Ao(e){oo.lFrame.currentDirectiveIndex=e}function No(e){var t=oo.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function jo(){return oo.lFrame.currentQueryIndex}function Do(e){oo.lFrame.currentQueryIndex=e}function Po(e){var t=e[cr];return 2===t.type?(ngDevMode&&mt(t.declTNode,"Embedded TNodes should have declaration parents."),t.declTNode):1===t.type?e[fr]:null}function Lo(e,t,n){if(ngDevMode&&ei(e),n&Ot.SkipSelf){ngDevMode&&Zr(t,e[cr]);for(var r=t,i=e;ngDevMode&&mt(r,"Parent TNode should be defined"),!(null!==(r=r.parent)||n&Ot.Host)&&null!==(r=Po(i))&&(ngDevMode&&mt(i,"Parent LView should be defined"),i=i[Er],!(10&r.type)););if(null===r)return!1;t=r,e=i}ngDevMode&&Yr(t,e);var o=oo.lFrame=Uo();return o.currentTNode=t,o.lView=e,!0}function Mo(e){ngDevMode&&lt(e[0],e[1],"????"),ngDevMode&&ei(e);var t=Uo();ngDevMode&&(ut(t.isParent,!0,"Expected clean LFrame"),ut(t.lView,null,"Expected clean LFrame"),ut(t.tView,null,"Expected clean LFrame"),ut(t.selectedIndex,-1,"Expected clean LFrame"),ut(t.elementDepthCount,0,"Expected clean LFrame"),ut(t.currentDirectiveIndex,-1,"Expected clean LFrame"),ut(t.currentNamespace,null,"Expected clean LFrame"),ut(t.bindingRootIndex,-1,"Expected clean LFrame"),ut(t.currentQueryIndex,0,"Expected clean LFrame"));var n=e[cr];oo.lFrame=t,ngDevMode&&n.firstChild&&Zr(n.firstChild,n),t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Uo(){var e=oo.lFrame,t=null===e?null:e.child;return null===t?Vo(e):t}function Vo(e){var t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Fo(){var e=oo.lFrame;return oo.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Bo=Fo;function Go(){var e=Fo();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function qo(e){return(oo.lFrame.contextLView=function(e,t){for(;e>0;)ngDevMode&&mt(t[Er],"Declaration view should be defined if nesting level is greater than 0."),t=t[Er],e--;return t}(e,oo.lFrame.contextLView))[vr]}function Wo(){return oo.lFrame.selectedIndex}function Ho(e){ngDevMode&&-1!==e&&gt(e,Nr,"Index must be past HEADER_OFFSET (or -1)."),ngDevMode&&ft(e,oo.lFrame.lView.length,"Can't set index passed end of LView"),oo.lFrame.selectedIndex=e}function zo(){var e=oo.lFrame;return Zi(e.tView,e.selectedIndex)}function Ko(){oo.lFrame.currentNamespace=Wi}function Yo(){oo.lFrame.currentNamespace=Hi}function Zo(){oo.lFrame.currentNamespace=null}function Jo(){return oo.lFrame.currentNamespace}var Xo=!0;function Qo(){return Xo}function $o(e){Xo=e}function ea(e,t){ngDevMode&&ni(e);for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var i=e.data[n];ngDevMode&&mt(i,"Expecting DirectiveDef");var o,a,s,c,u,l,d,h=i.type.prototype,f=h.ngAfterContentInit,p=h.ngAfterContentChecked,v=h.ngAfterViewInit,g=h.ngAfterViewChecked,m=h.ngOnDestroy;if(f)(null!==(o=e.contentHooks)&&void 0!==o?o:e.contentHooks=[]).push(-n,f);if(p)(null!==(a=e.contentHooks)&&void 0!==a?a:e.contentHooks=[]).push(n,p),(null!==(s=e.contentCheckHooks)&&void 0!==s?s:e.contentCheckHooks=[]).push(n,p);if(v)(null!==(c=e.viewHooks)&&void 0!==c?c:e.viewHooks=[]).push(-n,v);if(g)(null!==(u=e.viewHooks)&&void 0!==u?u:e.viewHooks=[]).push(n,g),(null!==(l=e.viewCheckHooks)&&void 0!==l?l:e.viewCheckHooks=[]).push(n,g);if(null!=m)(null!==(d=e.destroyHooks)&&void 0!==d?d:e.destroyHooks=[]).push(n,m)}}function ta(e,t,n){ia(e,t,3,n)}function na(e,t,n,r){ngDevMode&&lt(n,3,"Init pre-order hooks should not be called more than once"),(3&e[ur])===n&&ia(e,t,n,r)}function ra(e,t){ngDevMode&&lt(t,3,"Init hooks phase should not be incremented after all init hooks have been run.");var n=e[ur];(3&n)===t&&(n&=8191,n+=1,e[ur]=n)}function ia(e,t,n,r){ngDevMode&&ut(So(),!1,"Hooks should never be run when in check no changes mode.");for(var i=void 0!==r?65535&e[xr]:0,o=null!=r?r:-1,a=t.length-1,s=0,c=i;c<a;c++){if("number"===typeof t[c+1]){if(s=t[c],null!=r&&s>=r)break}else t[c]<0&&(e[xr]+=65536),(s<o||-1==o)&&(aa(e,n,t,c),e[xr]=(4294901760&e[xr])+c+2),c++}}function oa(e,t){qi(4,e,t);var n=bi(null);try{t.call(e)}finally{bi(n),qi(5,e,t)}}function aa(e,t,n,r){var i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];i?e[ur]>>13<e[xr]>>16&&(3&e[ur])===t&&(e[ur]+=8192,oa(a,o)):oa(a,o)}var sa=-1,ca=(0,p.Z)((function e(t,n,r){(0,v.Z)(this,e),this.factory=t,this.resolving=!1,ngDevMode&&mt(t,"Factory not specified"),ngDevMode&&ut(typeof t,"function","Expected factory function."),this.canSeeViewProviders=n,this.injectImpl=r}));function ua(e){var t="";return 1&e&&(t+="|Text"),2&e&&(t+="|Element"),4&e&&(t+="|Container"),8&e&&(t+="|ElementContainer"),16&e&&(t+="|Projection"),32&e&&(t+="|IcuContainer"),64&e&&(t+="|Placeholder"),t.length>0?t.substring(1):t}function la(e,t,n){mt(e,"should be called with a TNode"),0===(e.type&t)&&yt(n||"Expected [".concat(ua(t),"] but got ").concat(ua(e.type),"."))}function da(e){return e!==sa}function ha(e){return ngDevMode&&ot(e,"Number expected"),ngDevMode&&lt(e,-1,"Not a valid state."),ngDevMode&&vt(32767&e,Nr,"Parent injector must be pointing past HEADER_OFFSET."),32767&e}function fa(e,t){for(var n=e>>16,r=t;n>0;)r=r[Er],n--;return r}var pa=!0;function va(e){var t=pa;return pa=e,t}var ga=255,ma=5,ya=0,ba={};function _a(e,t){var n=Sa(e,t);if(-1!==n)return n;var r=t[cr];r.firstCreatePass&&(e.injectorIndex=t.length,Ea(r.data,e),Ea(t,null),Ea(r.blueprint,null));var i=wa(e,t),o=e.injectorIndex;if(da(i))for(var a=ha(i),s=fa(i,t),c=s[cr].data,u=0;u<8;u++)t[o+u]=s[a+u]|c[a+u];return t[o+8]=i,o}function Ea(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Sa(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:(ngDevMode&&_t(t,e.injectorIndex),e.injectorIndex)}function wa(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=0,r=null,i=t;null!==i;){if(null===(r=Va(i)))return sa;if(ngDevMode&&r&&Yr(r,i[Er]),n++,i=i[Er],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return sa}function xa(e,t,n){!function(e,t,n){var r;ngDevMode&&ut(t.firstCreatePass,!0,"expected firstCreatePass to be true"),"string"===typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(wn)&&(r=n[wn]),null==r&&(r=n[wn]=ya++);var i=r&ga,o=1<<i;t.data[e+(i>>ma)]|=o}(e,t,n)}function Ta(e,t,n){if(n&Ot.Optional||void 0!==e)return e;it(t,"NodeInjector")}function Ia(e,t,n,r){if(n&Ot.Optional&&void 0===r&&(r=null),0===(n&(Ot.Self|Ot.Host))){var i=e[gr],o=Lt(void 0);try{return i?i.get(t,r,n&Ot.Optional):Mt(t,r,n&Ot.Optional)}finally{Lt(o)}}return Ta(r,t,n)}function Ra(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ot.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==e){if(2048&t[ur]&&!(r&Ot.Self)){var o=function(e,t,n,r,i){var o=e,a=t;for(;null!==o&&null!==a&&2048&a[ur]&&!(512&a[ur]);){ngDevMode&&Yr(o,a);var s=ka(o,a,n,r|Ot.Self,ba);if(s!==ba)return s;var c=o.parent;if(!c){var u=a[Rr];if(u){var l=u.get(n,ba,r);if(l!==ba)return l}c=Va(a),a=a[Er]}o=c}return i}(e,t,n,r,ba);if(o!==ba)return o}var a=ka(e,t,n,r,ba);if(a!==ba)return a}return Ia(t,n,r,i)}function ka(e,t,n,r,i){var o=function(e){if(ngDevMode&&mt(e,"token must be defined"),"string"===typeof e)return e.charCodeAt(0)||0;var t=e.hasOwnProperty(wn)?e[wn]:void 0;return"number"===typeof t?t>=0?t&ga:(ngDevMode&&ut(t,-1,"Expecting to get Special Injector Id"),La):t}(n);if("function"===typeof o){if(!Lo(t,e,r))return r&Ot.Host?Ta(i,n,r):Ia(t,n,r,i);try{var a;if(ngDevMode?Zt(new Pa(go(),ho()),n,(function(){null!=(a=o(r))&&Kt(a)})):a=o(r),null!=a||r&Ot.Optional)return a;it(n)}finally{Bo()}}else if("number"===typeof o){var s=null,c=Sa(e,t),u=sa,l=r&Ot.Host?t[Sr][fr]:null;for((-1===c||r&Ot.SkipSelf)&&((u=-1===c?wa(e,t):t[c+8])!==sa&&ja(r,!1)?(s=t[cr],c=ha(u),t=fa(u,t)):c=-1);-1!==c;){ngDevMode&&si(t,c);var d=t[cr];if(ngDevMode&&Yr(d.data[c+8],t),Na(o,c,d.data)){var h=Oa(c,t,n,s,r,l);if(h!==ba)return h}(u=t[c+8])!==sa&&ja(r,t[cr].data[c+8]===l)&&Na(o,c,t)?(s=d,c=ha(u),t=fa(u,t)):c=-1}}return i}function Oa(e,t,n,r,i,o){var a=t[cr],s=a.data[e+8],c=Ca(s,a,n,null==r?qr(s)&&pa:r!=a&&0!==(3&s.type),i&Ot.Host&&o===s);return null!==c?Aa(t,a,c,s):ba}function Ca(e,t,n,r,i){for(var o=e.providerIndexes,a=t.data,s=1048575&o,c=e.directiveStart,u=e.directiveEnd,l=o>>20,d=i?s+l:u,h=r?s:s+l;h<d;h++){var f=a[h];if(h<c&&n===f||h>=c&&f.type===n)return h}if(i){var p=a[c];if(p&&Hr(p)&&p.type===n)return c}return null}function Aa(e,t,n,r){var i=e[n],o=t.data;if(i instanceof ca){var a=i;a.resolving&&tt(et(o[n]));var s,c=va(a.canSeeViewProviders);if(a.resolving=!0,ngDevMode){var u=o[n].type||o[n];s=Gt({injector:new Pa(r,e),token:u})}var l=a.injectImpl?Lt(a.injectImpl):null,d=Lo(e,r,Ot.Default);ngDevMode&&ut(d,!0,"Because flags do not contain `SkipSelf' we expect this to always succeed.");try{i=e[n]=a.factory(void 0,o,e,r),ngDevMode&&Kt(i),t.firstCreatePass&&n>=r.directiveStart&&(ngDevMode&&function(e){void 0!==e.type&&void 0!=e.selectors&&void 0!==e.inputs||yt("Expected a DirectiveDef/ComponentDef and this object does not seem to have the expected shape.")}(o[n]),function(e,t,n){ngDevMode&&ni(n);var r,i,o,a=t.type.prototype,s=a.ngOnChanges,c=a.ngOnInit,u=a.ngDoCheck;if(s){var l,d,h=Li(t);(null!==(l=n.preOrderHooks)&&void 0!==l?l:n.preOrderHooks=[]).push(e,h),(null!==(d=n.preOrderCheckHooks)&&void 0!==d?d:n.preOrderCheckHooks=[]).push(e,h)}c&&(null!==(r=n.preOrderHooks)&&void 0!==r?r:n.preOrderHooks=[]).push(0-e,c),u&&((null!==(i=n.preOrderHooks)&&void 0!==i?i:n.preOrderHooks=[]).push(e,u),(null!==(o=n.preOrderCheckHooks)&&void 0!==o?o:n.preOrderCheckHooks=[]).push(e,u))}(n,o[n],t))}finally{ngDevMode&&Gt(s),null!==l&&Lt(l),va(c),a.resolving=!1,Bo()}}return i}function Na(e,t,n){var r=1<<e;return!!(n[t+(e>>ma)]&r)}function ja(e,t){return!(e&Ot.Self)&&!(e&Ot.Host&&t)}function Da(e){return e._lView}var Pa=function(){function e(t,n){(0,v.Z)(this,e),this._tNode=t,this._lView=n}return(0,p.Z)(e,[{key:"get",value:function(e,t,n){return Ra(this._tNode,this._lView,e,dn(n),t)}}]),e}();function La(){return new Pa(go(),ho())}function Ma(e){return vn((function(){for(var t=e.prototype.constructor,n=t[Sn]||Ua(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;i&&i!==r;){var o=i[Sn]||Ua(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return function(e){return new e}}))}function Ua(e){return Ke(e)?function(){var t=Ua(ze(e));return t&&t()}:ci(e)}function Va(e){var t=e[cr],n=t.type;return 2===n?(ngDevMode&&mt(t.declTNode,"Embedded TNodes should have declaration parents."),t.declTNode):1===n?e[fr]:null}function Fa(e){return function(e,t){if(ngDevMode&&la(e,15),ngDevMode&&mt(e,"expecting tNode"),"class"===t)return e.classes;if("style"===t)return e.styles;var n=e.attrs;if(n)for(var r=n.length,i=0;i<r;){var o=n[i];if(Rn(o))break;if(0===o)i+=2;else if("number"===typeof o)for(i++;i<r&&"string"===typeof n[i];)i++;else{if(o===t)return n[i+1];i+=2}}return null}(go(),e)}var Ba="__annotations__",Ga="__parameters__",qa="__prop__metadata__";function Wa(e,t,n,r,i){return vn((function(){var o=Ha(t);function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof a)return o.call.apply(o,[this].concat(t)),this;var s=(0,l.Z)(a,t);return function(e){return i&&i.apply(void 0,[e].concat(t)),(e.hasOwnProperty(Ba)?e[Ba]:Object.defineProperty(e,Ba,{value:[]})[Ba]).push(s),r&&r(e),e}}return n&&(a.prototype=Object.create(n.prototype)),a.prototype.ngMetadataName=e,a.annotationCls=a,a}))}function Ha(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}function za(e,t,n){return vn((function(){var r=Ha(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var o=(0,l.Z)(i,t);return a.annotation=o,a;function a(e,t,n){for(var r=e.hasOwnProperty(Ga)?e[Ga]:Object.defineProperty(e,Ga,{value:[]})[Ga];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}))}function Ka(e,t,n,r){return vn((function(){var i=Ha(t);function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof o)return i.apply(this,t),this;var a=(0,l.Z)(o,t);return function(e,n){if(void 0===e)throw new Error("Standard Angular field decorators are not supported in JIT mode.");var i=e.constructor,o=i.hasOwnProperty(qa)?i[qa]:Object.defineProperty(i,qa,{value:{}})[qa];o[n]=o.hasOwnProperty(n)&&o[n]||[],o[n].unshift(a),r&&r.apply(void 0,[e,n].concat(t))}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o}))}var Ya,Za,Ja,Xa=za("Attribute",(function(e){return{attributeName:e,__NG_ELEMENT_ID__:function(){return Fa(e)}}})),Qa=(0,p.Z)((function e(){(0,v.Z)(this,e)})),$a=Ka("ContentChildren",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,f.Z)({selector:e,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:true},t)}),Qa),es=Ka("ContentChild",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,f.Z)({selector:e,first:!0,isViewQuery:!1,descendants:!0},t)}),Qa),ts=Ka("ViewChildren",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,f.Z)({selector:e,first:!1,isViewQuery:!0,descendants:!0,emitDistinctChangesOnly:true},t)}),Qa),ns=Ka("ViewChild",(function(e,t){return(0,f.Z)({selector:e,first:!0,isViewQuery:!0,descendants:!0},t)}),Qa);function rs(e){var t=Vt.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;if("undefined"===typeof ngDevMode||ngDevMode){console.error("JIT compilation failed for ".concat(e.kind),e.type);var n="The ".concat(e.kind," '").concat(e.type.name,"' needs to be compiled using the JIT compiler, but '@angular/compiler' is not available.\n\n");throw 1===e.usage?(n+="The ".concat(e.kind," is part of a library that has been partially compiled.\n"),n+="However, the Angular Linker has not processed the library such that JIT compilation is used as fallback.\n",n+="\n",n+="Ideally, the library is processed using the Angular Linker to become fully AOT compiled.\n"):n+="JIT compilation is discouraged for production use-cases! Consider using AOT mode instead.\n",n+="Alternatively, the JIT compiler should be loaded by bootstrapping using '@angular/platform-browser-dynamic' or '@angular/platform-server',\n",n+="or manually provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.",new Error(n)}throw new Error("JIT compiler unavailable")}!function(e){e[e.Directive=0]="Directive",e[e.Component=1]="Component",e[e.Injectable=2]="Injectable",e[e.Pipe=3]="Pipe",e[e.NgModule=4]="NgModule"}(Ya||(Ya={})),function(e){e[e.Directive=0]="Directive",e[e.Pipe=1]="Pipe",e[e.NgModule=2]="NgModule"}(Za||(Za={})),function(e){e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom"}(Ja||(Ja={}));var is=Function;function os(e){return"function"===typeof e}function as(e){return e.flat(Number.POSITIVE_INFINITY)}function ss(e,t){e.forEach((function(e){return Array.isArray(e)?ss(e,t):t(e)}))}function cs(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function us(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function ls(e,t){for(var n=[],r=0;r<e;r++)n.push(t);return n}function ds(e,t,n){var r=fs(e,t);return r>=0?e[1|r]=n:function(e,t,n,r){ngDevMode&&pt(t,e.length,"Can't insert past array end.");var i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){var o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}(e,r=~r,t,n),r}function hs(e,t){var n=fs(e,t);if(n>=0)return e[1|n]}function fs(e,t){return ps(e,t,1)}function ps(e,t,n){ngDevMode&&ut(Array.isArray(e),!0,"Expecting an array");for(var r=0,i=e.length>>n;i!==r;){var o=r+(i-r>>1),a=e[o<<n];if(t===a)return o<<n;a>t?i=o:r=o+1}return~(i<<n)}var vs=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,gs=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,ms=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,ys=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;var bs=function(){function e(t){(0,v.Z)(this,e),this._reflect=t||Vt.Reflect}return(0,p.Z)(e,[{key:"factory",value:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(0,l.Z)(e,n)}}},{key:"_zipTypesAndAnnotations",value:function(e,t){var n;n=ls("undefined"===typeof e?t.length:e.length);for(var r=0;r<n.length;r++)"undefined"===typeof e?n[r]=[]:e[r]&&e[r]!=Object?n[r]=[e[r]]:n[r]=[],t&&null!=t[r]&&(n[r]=n[r].concat(t[r]));return n}},{key:"_ownParameters",value:function(e,t){if(function(e){return vs.test(e)||ys.test(e)||gs.test(e)&&!ms.test(e)}(e.toString()))return null;if(e.parameters&&e.parameters!==t.parameters)return e.parameters;var n=e.ctorParameters;if(n&&n!==t.ctorParameters){var r="function"===typeof n?n():n,i=r.map((function(e){return e&&e.type})),o=r.map((function(e){return e&&_s(e.decorators)}));return this._zipTypesAndAnnotations(i,o)}var a=e.hasOwnProperty(Ga)&&e[Ga],s=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",e);return s||a?this._zipTypesAndAnnotations(s,a):ls(e.length)}},{key:"parameters",value:function(e){if(!os(e))return[];var t=Es(e),n=this._ownParameters(e,t);return n||t===Object||(n=this.parameters(t)),n||[]}},{key:"_ownAnnotations",value:function(e,t){if(e.annotations&&e.annotations!==t.annotations){var n=e.annotations;return"function"===typeof n&&n.annotations&&(n=n.annotations),n}return e.decorators&&e.decorators!==t.decorators?_s(e.decorators):e.hasOwnProperty(Ba)?e[Ba]:null}},{key:"annotations",value:function(e){if(!os(e))return[];var t=Es(e),n=this._ownAnnotations(e,t)||[];return(t!==Object?this.annotations(t):[]).concat(n)}},{key:"_ownPropMetadata",value:function(e,t){if(e.propMetadata&&e.propMetadata!==t.propMetadata){var n=e.propMetadata;return"function"===typeof n&&n.propMetadata&&(n=n.propMetadata),n}if(e.propDecorators&&e.propDecorators!==t.propDecorators){var r=e.propDecorators,i={};return Object.keys(r).forEach((function(e){i[e]=_s(r[e])})),i}return e.hasOwnProperty(qa)?e[qa]:null}},{key:"propMetadata",value:function(e){if(!os(e))return{};var t=Es(e),n={};if(t!==Object){var r=this.propMetadata(t);Object.keys(r).forEach((function(e){n[e]=r[e]}))}var i=this._ownPropMetadata(e,t);return i&&Object.keys(i).forEach((function(e){var t=[];n.hasOwnProperty(e)&&t.push.apply(t,(0,u.Z)(n[e])),t.push.apply(t,(0,u.Z)(i[e])),n[e]=t})),n}},{key:"ownPropMetadata",value:function(e){return os(e)&&this._ownPropMetadata(e,Es(e))||{}}},{key:"hasLifecycleHook",value:function(e,t){return e instanceof is&&t in e.prototype}}]),e}();function _s(e){return e?e.map((function(e){var t=e.type.annotationCls,n=e.args?e.args:[];return(0,l.Z)(t,(0,u.Z)(n))})):[]}function Es(e){var t=e.prototype?Object.getPrototypeOf(e.prototype):null;return(t?t.constructor:null)||Object}var Ss=fn(za("Inject",(function(e){return{token:e}})),-1),ws=fn(za("Optional"),8),xs=fn(za("Self"),2),Ts=fn(za("SkipSelf"),4),Is=fn(za("Host"),1),Rs=null;function ks(){return Rs=Rs||new bs}function Os(e){return Cs(ks().parameters(e))}function Cs(e){return e.map((function(e){return function(e){var t={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(e)&&e.length>0)for(var n=0;n<e.length;n++){var r=e[n];if(void 0!==r){var i=Object.getPrototypeOf(r);if(r instanceof ws||"Optional"===i.ngMetadataName)t.optional=!0;else if(r instanceof Ts||"SkipSelf"===i.ngMetadataName)t.skipSelf=!0;else if(r instanceof xs||"Self"===i.ngMetadataName)t.self=!0;else if(r instanceof Is||"Host"===i.ngMetadataName)t.host=!0;else if(r instanceof Ss)t.token=r.token;else if(r instanceof Xa){if(void 0===r.attributeName)throw new Xe(204,ngDevMode&&"Attribute name must be defined.");t.attribute=r.attributeName}else t.token=r}}else void 0===e||Array.isArray(e)&&0===e.length?t.token=null:t.token=e;return t}(e)}))}function As(e){var t=[],n=new Map;function r(t){var r=n.get(t);if(!r){var i=e(t);n.set(t,r=i.then(Ls))}return r}return Ns.forEach((function(e,n){var i=[];e.templateUrl&&i.push(r(e.templateUrl).then((function(t){e.template=t})));var o=e.styleUrls,a=e.styles||(e.styles=[]),s=e.styles.length;o&&o.forEach((function(t,n){a.push(""),i.push(r(t).then((function(r){a[s+n]=r,o.splice(o.indexOf(t),1),0==o.length&&(e.styleUrls=void 0)})))}));var c=Promise.all(i).then((function(){return function(e){js.delete(e)}(n)}));t.push(c)})),Ps(),Promise.all(t).then((function(){}))}var Ns=new Map,js=new Set;function Ds(e){return!!(e.templateUrl&&!e.hasOwnProperty("template")||e.styleUrls&&e.styleUrls.length)}function Ps(){var e=Ns;return Ns=new Map,e}function Ls(e){return"string"==typeof e?e:e.text()}var Ms=new Map,Us=!0;function Vs(e,t){!function(e,t,n){if(t&&t!==n&&Us)throw new Error("Duplicate module registered for ".concat(e," - ").concat(Ge(t)," vs ").concat(Ge(t.name)))}(t,Ms.get(t)||null,e),Ms.set(t,e)}function Fs(e){return Ms.get(e)}function Bs(e){Us=!e}var Gs={name:"custom-elements"},qs={name:"no-errors-schema"},Ws=!1;function Hs(e){Ws=e}function zs(){return Ws}var Ks=!1;function Ys(e){Ks=e}function Zs(){return Ks}function Js(e,t,n,r){t||4!==n||(t="ng-template");var i=$s(r),o=ec(r),a="Can't bind to '".concat(e,"' since it isn't a known property of '").concat(t,"'").concat(o,"."),s="'".concat(i?"@Component":"@NgModule",".schemas'"),c=i?"included in the '@Component.imports' of this component":"a part of an @NgModule where this component is declared";if(tc.has(e)){var u=tc.get(e);a+="\nIf the '".concat(e,"' is an Angular control flow directive, ")+"please make sure that either the '".concat(u,"' directive or the 'CommonModule' is ").concat(c,".")}else a+="\n1. If '".concat(t,"' is an Angular component and it has the ")+"'".concat(e,"' input, then verify that it is ").concat(c,"."),t&&t.indexOf("-")>-1?(a+="\n2. If '".concat(t,"' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' ")+"to the ".concat(s," of this component to suppress this message."),a+="\n3. To allow any property add 'NO_ERRORS_SCHEMA' to "+"the ".concat(s," of this component.")):a+="\n2. To allow any property add 'NO_ERRORS_SCHEMA' to "+"the ".concat(s," of this component.");Xs(a)}function Xs(e){if(Ks)throw new Xe(303,e);console.error(Qe(303,e))}function Qs(e){!ngDevMode&&yt("Must never be called in production mode");var t=e[Sr][vr];return t&&t.constructor?Qn(t.constructor):null}function $s(e){!ngDevMode&&yt("Must never be called in production mode");var t=Qs(e);return!(null===t||void 0===t||!t.standalone)}function ec(e){var t;!ngDevMode&&yt("Must never be called in production mode");var n=Qs(e),r=null===n||void 0===n||null===(t=n.type)||void 0===t?void 0:t.name;return r?" (used in the '".concat(r,"' component template)"):""}var tc=new Map([["ngIf","NgIf"],["ngFor","NgFor"],["ngSwitchCase","NgSwitchCase"],["ngSwitchDefault","NgSwitchDefault"]]);function nc(e,t){if(null!==e)for(var n=0;n<e.length;n++){var r=e[n];if(r===qs||r===Gs&&t&&t.indexOf("-")>-1)return!0}return!1}var rc,ic="ngSkipHydration";function oc(e){var t=ic.toLowerCase(),n=e.mergedAttrs;if(null===n)return!1;for(var r=0;r<n.length;r+=2){var i=n[r];if("number"===typeof i)return!1;if("string"===typeof i&&i.toLowerCase()===t)return!0}return!1}function ac(e){return e.hasAttribute(ic)}function sc(e){return 128===(128&e.flags)}function cc(e){for(var t=e.parent;t;){if(oc(t))return!0;t=t.parent}return!1}!function(e){e[e.Important=1]="Important",e[e.DashCase=2]="DashCase"}(rc||(rc={}));var uc=/^>|^->|<!--|-->|--!>|<!-$/g,lc=/(<|>)/,dc="\u200b$1\u200b";function hc(e){return e.replace(uc,(function(e){return e.replace(lc,dc)}))}var fc=new Map,pc=0;function vc(e){return ngDevMode&&ot(e,"ID used for LView lookup must be a number"),fc.get(e)||null}var gc=function(){function e(t,n,r){(0,v.Z)(this,e),this.lViewId=t,this.nodeIndex=n,this.native=r}return(0,p.Z)(e,[{key:"lView",get:function(){return vc(this.lViewId)}}]),e}();function mc(e){var t,n=wc(e);if(n){if(Fr(n)){var r,i=n,o=void 0,a=void 0;if(Tc(e)){if(-1==(r=kc(i,e)))throw new Error("The provided component was not found in the application");o=e}else if((t=e)&&t.constructor&&t.constructor.\u0275dir){if(r=function(e,t){var n=e[cr].firstChild;for(;n;){for(var r=n.directiveStart,i=n.directiveEnd,o=r;o<i;o++)if(e[o]===t)return n.index;n=Rc(n)}return-1}(i,e),-1==r)throw new Error("The provided directive was not found in the application");a=Oc(r,i)}else if(-1==(r=Ic(i,e)))return null;var s=zi(i[r]),c=wc(s),u=c&&!Array.isArray(c)?c:yc(i,r,s);if(o&&void 0===u.component&&(u.component=o,Sc(u.component,u)),a&&void 0===u.directives){u.directives=a;for(var l=0;l<a.length;l++)Sc(a[l],u)}Sc(u.native,u),n=u}}else{var d=e;ngDevMode&&bt(d);for(var h=d;h=h.parentNode;){var f=wc(h);if(f){var p=Array.isArray(f)?f:f.lView;if(!p)return null;var v=Ic(p,d);if(v>=0){var g=zi(p[v]),m=yc(p,v,g);Sc(g,m),n=m;break}}}}return n||null}function yc(e,t,n){return new gc(e[Ir],t,n)}function bc(e){var t,n=wc(e);if(Fr(n)){var r=n,i=kc(r,e),o=yc(r,i,(t=Xi(i,r))[sr]);o.component=e,Sc(e,o),Sc(o.native,o)}else{var a=n,s=a.lView;ngDevMode&&ti(s),t=Xi(a.nodeIndex,s)}return t}var _c,Ec="__ngContext__";function Sc(e,t){var n;ngDevMode&&mt(e,"Target expected"),Fr(t)?(e[Ec]=t[Ir],n=t,ngDevMode&&ot(n[Ir],"LView must have an ID in order to be registered"),fc.set(n[Ir],n)):e[Ec]=t}function wc(e){ngDevMode&&mt(e,"Target expected");var t=e[Ec];return"number"===typeof t?vc(t):t||null}function xc(e){var t=wc(e);return t?Fr(t)?t:t.lView:null}function Tc(e){return e&&e.constructor&&e.constructor.\u0275cmp}function Ic(e,t){for(var n=e[cr],r=Nr;r<n.bindingStartIndex;r++)if(zi(e[r])===t)return r;return-1}function Rc(e){if(e.child)return e.child;if(e.next)return e.next;for(;e.parent&&!e.parent.next;)e=e.parent;return e.parent&&e.parent.next}function kc(e,t){var n=e[cr].components;if(n)for(var r=0;r<n.length;r++){var i=n[r];if(Xi(i,e)[vr]===t)return i}else if(Xi(Nr,e)[vr]===t)return Nr;return-1}function Oc(e,t){var n=t[cr].data[e];if(0===n.directiveStart)return mn;for(var r=[],i=n.directiveStart;i<n.directiveEnd;i++){var o=t[i];Tc(o)||r.push(o)}return r}function Cc(e,t){return _c(e,t)}function Ac(e){ngDevMode&&ti(e);var t=e[lr];return Br(t)?t[lr]:t}function Nc(e){var t=function(e){ngDevMode&&mt(e,"component");for(var t=Fr(e)?e:xc(e);t&&!(512&t[ur]);)t=Ac(t);return ngDevMode&&ti(t),t}(e);return ngDevMode&&mt(t[vr],"Root view has no context. Perhaps it is disconnected?"),t[vr]}function jc(e){return Pc(e[br])}function Dc(e){return Pc(e[dr])}function Pc(e){for(;null!==e&&!Br(e);)e=e[dr];return e}function Lc(e,t,n,r,i){if(null!=r){var o,a=!1;Br(r)?o=r:Fr(r)&&(a=!0,ngDevMode&&mt(r[sr],"HOST must be defined for a component LView"),r=r[sr]);var s=zi(r);0===e&&null!==n?null==i?Zc(t,n,s):Yc(t,n,s,i||null,!0):1===e&&null!==n?Yc(t,n,s,i||null,!0):2===e?cu(t,s,a):3===e&&(ngDevMode&&ngDevMode.rendererDestroyNode++,t.destroyNode(s)),null!=o&&function(e,t,n,r,i){ngDevMode&&$r(n);var o=n[Pr],a=zi(n);o!==a&&Lc(t,e,r,o,i);for(var s=Vr;s<n.length;s++){var c=n[s];du(c[cr],c,e,t,r,o)}}(t,e,o,n,i)}}function Mc(e,t){return ngDevMode&&ngDevMode.rendererCreateTextNode++,ngDevMode&&ngDevMode.rendererSetText++,e.createText(t)}function Uc(e,t,n){ngDevMode&&ngDevMode.rendererSetText++,e.setValue(t,n)}function Vc(e,t){return ngDevMode&&ngDevMode.rendererCreateComment++,e.createComment(hc(t))}function Fc(e,t,n){return ngDevMode&&ngDevMode.rendererCreateElement++,e.createElement(t,n)}function Bc(e,t,n,r){ngDevMode&&ti(t),ngDevMode&&$r(n);var i=Vr+r,o=n.length;r>0&&(n[i-1][dr]=t),r<o-Vr?(t[dr]=n[i],cs(n,Vr+r,t)):(n.push(t),t[dr]=null),t[lr]=n;var a=t[wr];null!==a&&n!==a&&function(e,t){ngDevMode&&mt(t,"LView required"),ngDevMode&&$r(e);var n=e[Mr],r=t[lr];ngDevMode&&$r(r);var i=r[lr][Sr];ngDevMode&&mt(i,"Missing insertedComponentLView");var o=t[Sr];ngDevMode&&mt(o,"Missing declaredComponentLView"),o!==i&&(e[Dr]=!0);null===n?e[Mr]=[t]:n.push(t)}(a,t);var s=t[Tr];null!==s&&s.insertView(e),t[ur]|=128}function Gc(e,t){ngDevMode&&$r(e),ngDevMode&&mt(e[Mr],"A projected view should belong to a non-empty projected views collection");var n=e[Mr],r=n.indexOf(t),i=t[lr];ngDevMode&&$r(i),no(t),n.splice(r,1)}function qc(e,t){if(!(e.length<=Vr)){var n,r=Vr+t,i=e[r];if(i){var o=i[wr];null!==o&&o!==e&&Gc(o,i),t>0&&(e[r-1][dr]=i[dr]);var a=us(e,Vr+t);du(i[cr],n=i,n[yr],2,null,null),n[sr]=null,n[fr]=null;var s=a[Tr];null!==s&&s.detachView(a[cr]),i[lr]=null,i[dr]=null,i[ur]&=-129}return i}}function Wc(e,t){if(!(256&t[ur])){var n,r,i=t[yr];null===(n=t[Cr])||void 0===n||n.destroy(),null===(r=t[Ar])||void 0===r||r.destroy(),i.destroyNode&&du(e,t,i,3,null,null),function(e){var t=e[br];if(!t)return Hc(e[cr],e);for(;t;){var n=null;if(Fr(t))n=t[br];else{ngDevMode&&$r(t);var r=t[Vr];r&&(n=r)}if(!n){for(;t&&!t[dr]&&t!==e;)Fr(t)&&Hc(t[cr],t),t=t[lr];null===t&&(t=e),Fr(t)&&Hc(t[cr],t),n=t&&t[dr]}t=n}}(t)}}function Hc(e,t){if(!(256&t[ur])){t[ur]&=-129,t[ur]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var i=t[n[r]];if(!(i instanceof ca)){var o=n[r+1];if(Array.isArray(o))for(var a=0;a<o.length;a+=2){var s=i[o[a]],c=o[a+1];qi(4,s,c);try{c.call(s)}finally{qi(5,s,c)}}else{qi(4,i,o);try{o.call(i)}finally{qi(5,i,o)}}}}}(e,t),function(e,t){var n=e.cleanup,r=t[pr];if(null!==n)for(var i=0;i<n.length-1;i+=2)if("string"===typeof n[i]){var o=n[i+3];ngDevMode&&ot(o,"cleanup target must be a number"),o>=0?r[o]():r[-o].unsubscribe(),i+=2}else{var a=r[n[i+1]];n[i].call(a)}null!==r&&(t[pr]=null);var s=t[kr];if(null!==s){t[kr]=null;for(var c=0;c<s.length;c++){var u=s[c];ngDevMode&&ct(u,"Expecting destroy hook to be a function."),u()}}}(e,t),1===t[cr].type&&(ngDevMode&&ngDevMode.rendererDestroy++,t[yr].destroy());var n=t[wr];if(null!==n&&Br(t[lr])){n!==t[lr]&&Gc(n,t);var r=t[Tr];null!==r&&r.detachView(e)}!function(e){ngDevMode&&ot(e[Ir],"Cannot stop tracking an LView that does not have an ID"),fc.delete(e[Ir])}(t)}}function zc(e,t,n){return Kc(e,t.parent,n)}function Kc(e,t,n){for(var r=t;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[sr];ngDevMode&&la(r,7);var i=r.componentOffset;if(i>-1){ngDevMode&&Yr(r,n);var o=e.data[r.directiveStart+i].encapsulation;if(o===Xt.None||o===Xt.Emulated)return null}return Yi(r,n)}function Yc(e,t,n,r,i){ngDevMode&&ngDevMode.rendererInsertBefore++,e.insertBefore(t,n,r,i)}function Zc(e,t,n){ngDevMode&&ngDevMode.rendererAppendChild++,ngDevMode&&mt(t,"parent node must be defined"),e.appendChild(t,n)}function Jc(e,t,n,r,i){null!==r?Yc(e,t,n,r,i):Zc(e,t,n)}function Xc(e,t){return e.parentNode(t)}function Qc(e,t,n){return nu(e,t,n)}function $c(e,t,n){return 40&e.type?Yi(e,n):null}var eu,tu,nu=$c;function ru(e,t){nu=e,eu=t}function iu(e,t,n,r){var i=zc(e,r,t),o=t[yr],a=Qc(r.parent||t[fr],r,t);if(null!=i)if(Array.isArray(n))for(var s=0;s<n.length;s++)Jc(o,i,n[s],a,!1);else Jc(o,i,n,a,!1);void 0!==eu&&eu(o,r,t,n,i)}function ou(e,t){if(null!==t){ngDevMode&&la(t,63);var n=t.type;if(3&n)return Yi(t,e);if(4&n)return su(-1,e[t.index]);if(8&n){var r=t.child;if(null!==r)return ou(e,r);var i=e[t.index];return Br(i)?su(-1,i):zi(i)}if(32&n)return Cc(t,e)()||zi(e[t.index]);var o=au(e,t);if(null!==o){if(Array.isArray(o))return o[0];var a=Ac(e[Sr]);return ngDevMode&&ai(a),ou(a,o)}return ou(e,t.next)}return null}function au(e,t){if(null!==t){var n=e[Sr][fr],r=t.projection;return ngDevMode&&function(e,t){mt(e[Sr],"Component views should exist."),mt(e[Sr][fr].projection,t||"Components with projection nodes (<ng-content>) must have projection slots defined.")}(e),n.projection[r]}return null}function su(e,t){var n=Vr+e+1;if(n<t.length){var r=t[n],i=r[cr].firstChild;if(null!==i)return ou(r,i)}return t[Pr]}function cu(e,t,n){ngDevMode&&ngDevMode.rendererRemoveNode++;var r=Xc(e,t);r&&function(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}function uu(e){e.textContent=""}function lu(e,t,n,r,i,o,a){for(;null!=n;){ngDevMode&&Yr(n,r),ngDevMode&&la(n,63);var s=r[n.index],c=n.type;if(a&&0===t&&(s&&Sc(zi(s),r),n.flags|=2),32!==(32&n.flags))if(8&c)lu(e,t,n.child,r,i,o,!1),Lc(t,e,i,s,o);else if(32&c){for(var u=Cc(n,r),l=void 0;l=u();)Lc(t,e,i,l,o);Lc(t,e,i,s,o)}else 16&c?hu(e,t,r,n,i,o):(ngDevMode&&la(n,7),Lc(t,e,i,s,o));n=a?n.projectionNext:n.next}}function du(e,t,n,r,i,o){lu(n,r,e.firstChild,t,i,o,!1)}function hu(e,t,n,r,i,o){var a=n[Sr],s=a[fr];ngDevMode&&ut(typeof r.projection,"number","expecting projection index");var c=s.projection[r.projection];if(Array.isArray(c))for(var u=0;u<c.length;u++){Lc(t,e,i,c[u],o)}else{var l=c,d=a[lr];sc(r)&&(l.flags|=128),lu(e,t,l,d,i,o,!0)}}function fu(e,t,n){ngDevMode&&st(n,"'newValue' should be a string"),""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n),ngDevMode&&ngDevMode.rendererSetClassName++}function pu(e,t,n){var r=n.mergedAttrs,i=n.classes,o=n.styles;null!==r&&In(e,t,r),null!==i&&fu(e,t,i),null!==o&&function(e,t,n){ngDevMode&&st(n,"'newValue' should be a string"),e.setAttribute(t,"style",n),ngDevMode&&ngDevMode.rendererSetStyle++}(e,t,o)}function vu(){if(void 0===tu&&(tu=null,Vt.trustedTypes))try{tu=Vt.trustedTypes.createPolicy("angular",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(e){}return tu}function gu(e){var t;return(null===(t=vu())||void 0===t?void 0:t.createHTML(e))||e}function mu(e,t,n){var r=ho(),i=zo(),o=Yi(i,r);if(2===i.type&&"iframe"===t.toLowerCase()){var a=o;a.src="",a.srcdoc=gu(""),cu(r[yr],a);var s=ngDevMode&&"Angular has detected that the `".concat(n,"` was applied ")+"as a binding to an <iframe>".concat(ec(r),". ")+"For security reasons, the `".concat(n,"` can be set on an <iframe> ")+"as a static attribute only. \n"+"To fix this, switch the `".concat(n,"` binding to a static attribute ")+"in a template or in host bindings section.";throw new Xe(-910,s)}return e}var yu,bu=void 0;function _u(e){bu=e}function Eu(){if(void 0!==bu)return bu;if("undefined"!==typeof document)return document;throw new Xe(210,("undefined"===typeof ngDevMode||ngDevMode)&&"The document object is not available in this context. Make sure the DOCUMENT injection token is provided.")}function Su(){if(void 0===yu&&(yu=null,Vt.trustedTypes))try{yu=Vt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(e){}return yu}function wu(e){var t;return(null===(t=Su())||void 0===t?void 0:t.createHTML(e))||e}function xu(e){var t;return(null===(t=Su())||void 0===t?void 0:t.createScript(e))||e}function Tu(e){var t;return(null===(t=Su())||void 0===t?void 0:t.createScriptURL(e))||e}var Iu=function(){function e(t){(0,v.Z)(this,e),this.changingThisBreaksApplicationSecurity=t}return(0,p.Z)(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see ".concat(Je,")")}}]),e}(),Ru=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(){return(0,v.Z)(this,n),t.apply(this,arguments)}return(0,p.Z)(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Iu),ku=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(){return(0,v.Z)(this,n),t.apply(this,arguments)}return(0,p.Z)(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Iu),Ou=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(){return(0,v.Z)(this,n),t.apply(this,arguments)}return(0,p.Z)(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Iu),Cu=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(){return(0,v.Z)(this,n),t.apply(this,arguments)}return(0,p.Z)(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Iu),Au=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(){return(0,v.Z)(this,n),t.apply(this,arguments)}return(0,p.Z)(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Iu);function Nu(e){return e instanceof Iu?e.changingThisBreaksApplicationSecurity:e}function ju(e,t){var n=Du(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error("Required a safe ".concat(t,", got a ").concat(n," (see ").concat(Je,")"))}return n===t}function Du(e){return e instanceof Iu&&e.getTypeName()||null}function Pu(e){return new Ru(e)}function Lu(e){return new ku(e)}function Mu(e){return new Ou(e)}function Uu(e){return new Cu(e)}function Vu(e){return new Au(e)}function Fu(e){var t=new Gu(e);return function(){try{return!!(new window.DOMParser).parseFromString(gu(""),"text/html")}catch(e){return!1}}()?new Bu(t):t}var Bu=function(){function e(t){(0,v.Z)(this,e),this.inertDocumentHelper=t}return(0,p.Z)(e,[{key:"getInertBodyElement",value:function(e){e="<body><remove></remove>"+e;try{var t=(new window.DOMParser).parseFromString(gu(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(n){return null}}}]),e}(),Gu=function(){function e(t){(0,v.Z)(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}return(0,p.Z)(e,[{key:"getInertBodyElement",value:function(e){var t=this.inertDocument.createElement("template");return t.innerHTML=gu(e),t}}]),e}();var qu=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Wu(e){return(e=String(e)).match(qu)?e:(("undefined"===typeof ngDevMode||ngDevMode)&&console.warn("WARNING: sanitizing unsafe URL value ".concat(e," (see ").concat(Je,")")),"unsafe:"+e)}function Hu(e){var t,n={},r=(0,h.Z)(e.split(","));try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function zu(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)a.hasOwnProperty(s)&&(e[s]=!0)}return e}var Ku,Yu,Zu=Hu("area,br,col,hr,img,wbr"),Ju=Hu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Xu=Hu("rp,rt"),Qu=zu(Xu,Ju),$u=zu(Ju,Hu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),el=zu(Xu,Hu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tl=zu(Zu,$u,el,Qu),nl=Hu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rl=Hu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),il=Hu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),ol=zu(nl,rl,il),al=Hu("script,style,template"),sl=function(){function e(){(0,v.Z)(this,e),this.sanitizedSomething=!1,this.buf=[]}return(0,p.Z)(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!tl.hasOwnProperty(t))return this.sanitizedSomething=!0,!al.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n=e.attributes,r=0;r<n.length;r++){var i=n.item(r),o=i.name,a=o.toLowerCase();if(ol.hasOwnProperty(a)){var s=i.value;nl[a]&&(s=Wu(s)),this.buf.push(" ",o,'="',ll(s),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();tl.hasOwnProperty(t)&&!Zu.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(ll(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(e.outerHTML));return t}}]),e}(),cl=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ul=/([^\#-~ |!])/g;function ll(e){return e.replace(/&/g,"&amp;").replace(cl,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(ul,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function dl(e,t){var n=null;try{Ku=Ku||Fu(e);var r=t?String(t):"";n=Ku.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Ku.getInertBodyElement(r)}while(r!==o);var a=new sl,s=a.sanitizeChildren(hl(n)||n);return("undefined"===typeof ngDevMode||ngDevMode)&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see ".concat(Je)),gu(s)}finally{if(n)for(var c=hl(n)||n;c.firstChild;)c.removeChild(c.firstChild)}}function hl(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}function fl(e){var t=El();return t?wu(t.sanitize(Yu.HTML,e)||""):ju(e,"HTML")?wu(Nu(e)):dl(Eu(),$e(e))}function pl(e){var t=El();return t?t.sanitize(Yu.STYLE,e)||"":ju(e,"Style")?Nu(e):$e(e)}function vl(e){var t=El();return t?t.sanitize(Yu.URL,e)||"":ju(e,"URL")?Nu(e):Wu($e(e))}function gl(e){var t=El();if(t)return Tu(t.sanitize(Yu.RESOURCE_URL,e)||"");if(ju(e,"ResourceURL"))return Tu(Nu(e));throw new Xe(904,ngDevMode&&"unsafe value used in a resource URL context (see ".concat(Je,")"))}function ml(e){var t=El();if(t)return xu(t.sanitize(Yu.SCRIPT,e)||"");if(ju(e,"Script"))return xu(Nu(e));throw new Xe(905,ngDevMode&&"unsafe value used in a script context")}function yl(e){if(ngDevMode&&(!Array.isArray(e)||!Array.isArray(e.raw)||1!==e.length))throw new Error("Unexpected interpolation in trusted HTML constant: ".concat(e.join("?")));return gu(e[0])}function bl(e){if(ngDevMode&&(!Array.isArray(e)||!Array.isArray(e.raw)||1!==e.length))throw new Error("Unexpected interpolation in trusted URL constant: ".concat(e.join("?")));return function(e){var t;return(null===(t=vu())||void 0===t?void 0:t.createScriptURL(e))||e}(e[0])}function _l(e,t,n){return function(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?gl:vl}(t,n)(e)}function El(){var e=ho();return e&&e[mr].sanitizer}!function(e){e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL"}(Yu||(Yu={}));var Sl=function(){function e(t,n){(0,v.Z)(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?(("undefined"===typeof ngDevMode||ngDevMode)&&ft(n,0,"Only negative numbers are supported here"),this.__NG_ELEMENT_ID__=n):void 0!==n&&(this.\u0275prov=St({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return(0,p.Z)(e,[{key:"multi",get:function(){return this}},{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),wl=new Sl("ENVIRONMENT_INITIALIZER"),xl=new Sl("INJECTOR",-1),Tl=new Sl("INJECTOR_DEF_TYPES"),Il=function(){function e(){(0,v.Z)(this,e)}return(0,p.Z)(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt;if(t===Qt){var n=new Error("NullInjectorError: No provider for ".concat(Ge(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}();function Rl(e){return{"\u0275providers":e}}function kl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{"\u0275providers":Ol(!0,t),"\u0275fromNgModule":!0}}function Ol(e){for(var t,n=[],r=new Set,i=function(e){n.push(e)},o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];return ss(a,(function(n){if(("undefined"===typeof ngDevMode||ngDevMode)&&e){var o=Qn(n);if(null!==o&&void 0!==o&&o.standalone)throw new Xe(800,'Importing providers supports NgModule or ModuleWithProviders but got a standalone component "'.concat(et(n),'"'))}var a=n;Al(a,i,[],r)&&(t||(t=[]),t.push(a))})),void 0!==t&&Cl(t,i),n}function Cl(e,t){for(var n=function(){var n=e[r],i=n.ngModule,o=n.providers;jl(o,(function(e){ngDevMode&&Nl(e,o||mn,i),t(e,i)}))},r=0;r<e.length;r++)n()}function Al(e,t,n,r){if(!(e=ze(e)))return!1;var i=null,o=kt(e),a=!o&&Qn(e);if(o||a){if(a&&!a.standalone)return!1;i=e}else{var s=e.ngModule;if(!(o=kt(s)))return!1;i=s}ngDevMode&&-1!==n.indexOf(i)&&tt(Ge(i),n.map(Ge));var c=r.has(i);if(a){if(c)return!1;if(r.add(i),a.dependencies){var u,l="function"===typeof a.dependencies?a.dependencies():a.dependencies,d=(0,h.Z)(l);try{for(d.s();!(u=d.n()).done;){Al(u.value,t,n,r)}}catch(m){d.e(m)}finally{d.f()}}}else{if(!o)return!1;if(null!=o.imports&&!c){var f;ngDevMode&&n.push(i),r.add(i);try{ss(o.imports,(function(e){Al(e,t,n,r)&&(f||(f=[]),f.push(e))}))}finally{ngDevMode&&n.pop()}void 0!==f&&Cl(f,t)}if(!c){var p=ci(i)||function(){return new i};t({provide:i,useFactory:p,deps:mn},i),t({provide:Tl,useValue:i,multi:!0},i),t({provide:wl,useValue:function(){return cn(i)},multi:!0},i)}var v=o.providers;if(null!=v&&!c){var g=e;jl(v,(function(e){ngDevMode&&Nl(e,v,g),t(e,g)}))}}return i!==e&&void 0!==e.providers}function Nl(e,t,n){Ul(e)||Pl(e)||Ml(e)||Ll(e)||(ze(e&&(e.useClass||e.provide))||rt(n,t,e))}function jl(e,t){var n,r=(0,h.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;Ye(i)&&(i=i.\u0275providers),Array.isArray(i)?jl(i,t):t(i)}}catch(o){r.e(o)}finally{r.f()}}var Dl=Fe({provide:String,useValue:Fe});function Pl(e){return null!==e&&"object"==typeof e&&Dl in e}function Ll(e){return!(!e||!e.useExisting)}function Ml(e){return!(!e||!e.useFactory)}function Ul(e){return"function"===typeof e}var Vl=new Sl("Set Injector scope."),Fl={},Bl={},Gl=void 0;function ql(){return void 0===Gl&&(Gl=new Il),Gl}var Wl=(0,p.Z)((function e(){(0,v.Z)(this,e)})),Hl=function(t){(0,g.Z)(r,t);var n=(0,m.Z)(r);function r(e,t,i,o){var a;(0,v.Z)(this,r),(a=n.call(this)).parent=t,a.source=i,a.scopes=o,a.records=new Map,a._ngOnDestroyHooks=new Set,a._onDestroyHooks=[],a._destroyed=!1,Zl(e,(function(e){return a.processProvider(e)})),a.records.set(xl,Yl(void 0,(0,c.Z)(a))),o.has("environment")&&a.records.set(Wl,Yl(void 0,(0,c.Z)(a)));var s=a.records.get(Vl);return null!=s&&"string"===typeof s.value&&a.scopes.add(s.value),a.injectorDefTypes=new Set(a.get(Tl.multi,mn,Ot.Self)),a}return(0,p.Z)(r,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{var e,t=(0,h.Z)(this._ngOnDestroyHooks);try{for(t.s();!(e=t.n()).done;){e.value.ngOnDestroy()}}catch(o){t.e(o)}finally{t.f()}var n=this._onDestroyHooks;this._onDestroyHooks=[];var r,i=(0,h.Z)(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)()}}catch(o){i.e(o)}finally{i.f()}}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}},{key:"onDestroy",value:function(e){var t=this;return this.assertNotDestroyed(),this._onDestroyHooks.push(e),function(){return t.removeOnDestroy(e)}}},{key:"runInContext",value:function(e){this.assertNotDestroyed();var t,n=an(this),r=Lt(void 0);ngDevMode&&(t=Gt({injector:this,token:null}));try{return e()}finally{an(n),Lt(r),ngDevMode&&Gt(t)}}},{key:"get",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ot.Default;if(this.assertNotDestroyed(),t.hasOwnProperty(xn))return t[xn](this);i=dn(i),ngDevMode&&(n=Gt({injector:this,token:t}));var o,a=an(this),s=Lt(void 0);try{if(!(i&Ot.SkipSelf)){var c=this.records.get(t);if(void 0===c){var u=("function"===typeof(o=t)||"object"===typeof o&&o instanceof Sl)&&Tt(t);c=u&&this.injectableDefInScope(u)?Yl(zl(t),Fl):null,this.records.set(t,c)}if(null!=c)return this.hydrate(t,c)}var l=i&Ot.Self?ql():this.parent;return r=i&Ot.Optional&&r===Qt?null:r,l.get(t,r)}catch(e){if("NullInjectorError"===e.name){if((e[en]=e[en]||[]).unshift(Ge(t)),a)throw e;return pn(e,t,"R3InjectorError",this.source)}throw e}finally{Lt(s),an(a),ngDevMode&&Gt(n)}}},{key:"resolveInjectorInitializers",value:function(){var e,t=an(this),n=Lt(void 0);ngDevMode&&(e=Gt({injector:this,token:null}));try{var r=this.get(wl.multi,mn,Ot.Self);if(ngDevMode&&!Array.isArray(r))throw new Xe(-209,"Unexpected type of the `ENVIRONMENT_INITIALIZER` token value "+"(expected an array, but got ".concat(typeof r,"). ")+"Please check that the `ENVIRONMENT_INITIALIZER` token is configured as a `multi: true` provider.");var i,o=(0,h.Z)(r);try{for(o.s();!(i=o.n()).done;){(0,i.value)()}}catch(a){o.e(a)}finally{o.f()}}finally{an(t),Lt(n),ngDevMode&&Gt(e)}}},{key:"toString",value:function(){var e,t=[],n=this.records,r=(0,h.Z)(n.keys());try{for(r.s();!(e=r.n()).done;){var i=e.value;t.push(Ge(i))}}catch(o){r.e(o)}finally{r.f()}return"R3Injector[".concat(t.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Xe(205,ngDevMode&&"Injector has already been destroyed.")}},{key:"processProvider",value:function(e){var t=Ul(e=ze(e))?e:ze(e&&e.provide),n=function(e){return Pl(e)?Yl(void 0,e.useValue):Yl(Kl(e),Fl)}(e);if(ngDevMode&&Zt(this,t,(function(){Pl(e)&&Kt(e.useValue),zt(e)})),Ul(e)||!0!==e.multi){var r=this.records.get(t);ngDevMode&&r&&void 0!==r.multi&&nt()}else{var i=this.records.get(t);i?ngDevMode&&void 0===i.multi&&nt():((i=Yl(void 0,Fl,!0)).factory=function(){return hn(i.multi)},this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,n)}},{key:"hydrate",value:function(e,t){var n;return ngDevMode&&t.value===Bl?tt(Ge(e)):t.value===Fl&&(t.value=Bl,ngDevMode?Zt(this,e,(function(){t.value=t.factory(),Kt(t.value)})):t.value=t.factory()),"object"===typeof t.value&&t.value&&(null!==(n=t.value)&&"object"===typeof n&&"function"===typeof n.ngOnDestroy)&&this._ngOnDestroyHooks.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){if(!e.providedIn)return!1;var t=ze(e.providedIn);return"string"===typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}},{key:"removeOnDestroy",value:function(e){var t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}]),r}(Wl);function zl(e){var t=Tt(e),n=null!==t?t.factory:ci(e);if(null!==n)return n;if(e instanceof Sl)throw new Xe(204,ngDevMode&&"Token ".concat(Ge(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=ls(t,"?");throw new Xe(204,ngDevMode&&"Can't resolve all parameters for ".concat(Ge(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[At]||e[jt]);return t?(ngDevMode&&console.warn('DEPRECATED: DI is instantiating a token "'.concat(e.name,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in a future version of Angular. Please add @Injectable() to the "'.concat(e.name,'" class.')),t):null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Xe(204,ngDevMode&&"unreachable")}function Kl(e,t,n){var r=void 0;if(ngDevMode&&Ye(e)&&rt(void 0,n,e),Ul(e)){var i=ze(e);return ci(i)||zl(i)}if(Pl(e))r=function(){return ze(e.useValue)};else if(Ml(e))r=function(){return e.useFactory.apply(e,(0,u.Z)(hn(e.deps||[])))};else if(Ll(e))r=function(){return cn(ze(e.useExisting))};else{var o=ze(e&&(e.useClass||e.provide));if(ngDevMode&&!o&&rt(t,n,e),!e.deps)return ci(o)||zl(o);r=function(){return(0,l.Z)(o,(0,u.Z)(hn(e.deps)))}}return r}function Yl(e,t){return{factory:e,value:t,multi:arguments.length>2&&void 0!==arguments[2]&&arguments[2]?[]:void 0}}function Zl(e,t){var n,r=(0,h.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;Array.isArray(i)?Zl(i,t):i&&Ye(i)?Zl(i.\u0275providers,t):t(i)}}catch(o){r.e(o)}finally{r.f()}}var Jl=new Sl("AppId",{providedIn:"root",factory:function(){return Xl}}),Xl="ng",Ql=new Sl("Platform Initializer"),$l=new Sl("Platform ID",{providedIn:"platform",factory:function(){return"unknown"}}),ed=new Sl("Application Packages Root URL"),td=new Sl("AnimationModuleType"),nd=new Sl("CSP nonce",{providedIn:"root",factory:function(){var e,t;return(null===(e=Eu().body)||void 0===e||null===(t=e.querySelector("[ngCspNonce]"))||void 0===t?void 0:t.getAttribute("ngCspNonce"))||null}}),rd=new Sl("undefined"===typeof ngDevMode||ngDevMode?"ENABLED_SSR_FEATURES":"",{providedIn:"root",factory:function(){return new Set}});function id(e){return e}var od=function(){function t(){(0,v.Z)(this,t),this.store={},this.onSerializeCallbacks={}}return(0,p.Z)(t,[{key:"get",value:function(e,t){return void 0!==this.store[e]?this.store[e]:t}},{key:"set",value:function(e,t){this.store[e]=t}},{key:"remove",value:function(e){delete this.store[e]}},{key:"hasKey",value:function(e){return this.store.hasOwnProperty(e)}},{key:"isEmpty",get:function(){return 0===Object.keys(this.store).length}},{key:"onSerialize",value:function(e,t){this.onSerializeCallbacks[e]=t}},{key:"toJson",value:function(){for(var t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(e){console.warn("Exception in onSerialize callback: ",e)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}]),t}();od.\u0275prov=St({token:od,providedIn:"root",factory:function(){var t=new od;return"browser"===ln($l)&&(t.store=function(t,n){var r=t.getElementById(n+"-state");if(null!==r&&void 0!==r&&r.textContent)try{return JSON.parse(r.textContent)}catch(e){console.warn("Exception while restoring TransferState for app "+n,e)}return{}}(Eu(),ln(Jl))),t}});var ad,sd="h",cd="b";!function(e){e.FirstChild="f",e.NextSibling="n"}(ad||(ad={}));var ud="e",ld="t",dd="c",hd="x",fd="r",pd="i",vd="n",gd="d",md="__\u0275nghData__",yd="ngh",bd="nghm",_d=function(e,t,n){return null};function Ed(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.getAttribute(yd);if(null==i)return null;var o=i.split("|"),a=(0,d.Z)(o,2),s=a[0],c=a[1];if(!(i=r?c:s))return null;var u=r?s:c?"|".concat(c):"",l={};if(""!==i){var h=t.get(od,null,{optional:!0});if(null!==h)l=h.get(md,[])[Number(i)],ngDevMode&&mt(l,"Unable to retrieve hydration info from the TransferState.")}var f={data:l,firstChild:null!==(n=e.firstChild)&&void 0!==n?n:null};return r&&(f.firstChild=e,Td(f,0,e.nextSibling)),u?e.setAttribute(yd,u):e.removeAttribute(yd),ngDevMode&&xd(e,!1),ngDevMode&&ngDevMode.hydratedComponents++,f}function Sd(e,t){return _d(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}function wd(e){var t=e._lView;return 2===t[cr].type?null:(zr(t)&&(t=t[Nr]),t)}function xd(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!ngDevMode)throw new Error("Calling `markRNodeAsClaimedByHydration` in prod mode is not supported and likely a mistake.");if(t&&function(e){return!!e.__claimed}(e))throw new Error("Trying to claim a node, which was claimed already.");e.__claimed=!0,ngDevMode.hydratedNodes++}function Td(e,t,n){var r;null!==(r=e.segmentHeads)&&void 0!==r||(e.segmentHeads={}),e.segmentHeads[t]=n}function Id(e,t){var n,r;return null!==(n=null===(r=e.segmentHeads)||void 0===r?void 0:r[t])&&void 0!==n?n:null}function Rd(e,t){var n,r;return null!==(n=null===(r=e.data[dd])||void 0===r?void 0:r[t])&&void 0!==n?n:null}function kd(e,t){var n,r,i=null!==(n=Rd(e,t))&&void 0!==n?n:[],o=0,a=(0,h.Z)(i);try{for(a.s();!(r=a.n()).done;){var s,c=r.value;o+=c[fd]*(null!==(s=c[hd])&&void 0!==s?s:1)}}catch(u){a.e(u)}finally{a.f()}return o}function Od(e,t){var n;if("undefined"===typeof e.disconnectedNodes){var r=e.data[gd];e.disconnectedNodes=r?new Set(r):null}return!(null===(n=e.disconnectedNodes)||void 0===n||!n.has(t))}var Cd=(0,p.Z)((function e(){(0,v.Z)(this,e)})),Ad=(0,p.Z)((function e(){(0,v.Z)(this,e)}));var Nd="ngComponent";var jd=function(){function e(){(0,v.Z)(this,e)}return(0,p.Z)(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(Ge(e),"."));return t[Nd]=e,t}(e)}}]),e}(),Dd=(0,p.Z)((function e(){(0,v.Z)(this,e)}));function Pd(e,t){return new Ld(Yi(e,t))}Dd.NULL=new jd;var Ld=(0,p.Z)((function e(t){(0,v.Z)(this,e),this.nativeElement=t}));function Md(e){return e instanceof Ld?e.nativeElement:e}Ld.__NG_ELEMENT_ID__=function(){return Pd(go(),ho())};var Ud=(0,p.Z)((function e(){(0,v.Z)(this,e)})),Vd=(0,p.Z)((function e(){(0,v.Z)(this,e),this.destroyNode=null}));Vd.__NG_ELEMENT_ID__=function(){return function(){var e=ho(),t=Xi(go().index,e);return(Fr(t)?t:e)[yr]}()};var Fd=(0,p.Z)((function e(){(0,v.Z)(this,e)}));Fd.\u0275prov=St({token:Fd,providedIn:"root",factory:function(){return null}});var Bd=(0,p.Z)((function e(t){(0,v.Z)(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")})),Gd=new Bd("16.2.0"),qd={};function Wd(e,t){var n;e instanceof Hl&&e.assertNotDestroyed(),ngDevMode&&(n=Gt({injector:e,token:null}));var r=an(e),i=Lt(void 0);try{return t()}finally{an(r),ngDevMode&&Gt(n),Lt(i)}}function Hd(e){if(!Pt()&&!on)throw new Xe(-203,ngDevMode&&e.name+"() can only be used within an injection context such as a constructor, a factory function, a field initializer, or a function used with `runInInjectionContext`")}var zd={"\u0275\u0275defineInjectable":St,"\u0275\u0275defineInjector":xt,"\u0275\u0275inject":cn,"\u0275\u0275invalidFactoryDep":un,resolveForwardRef:ze};function Kd(e,t){var n=null,r=null;e.hasOwnProperty(At)||Object.defineProperty(e,At,{get:function(){if(null===n){var r=rs({usage:0,kind:"injectable",type:e});n=r.compileInjectable(zd,"ng:///".concat(e.name,"/\u0275prov.js"),function(e,t){var n=t||{providedIn:null},r={name:e.name,type:e,typeArgumentCount:0,providedIn:n.providedIn};(Zd(n)||Jd(n))&&void 0!==n.deps&&(r.deps=Cs(n.deps));Zd(n)?r.useClass=n.useClass:!function(e){return Yd in e}(n)?Jd(n)?r.useFactory=n.useFactory:function(e){return void 0!==e.useExisting}(n)&&(r.useExisting=n.useExisting):r.useValue=n.useValue;return r}(e,t))}return n}}),e.hasOwnProperty(Sn)||Object.defineProperty(e,Sn,{get:function(){if(null===r){var t=rs({usage:0,kind:"injectable",type:e});r=t.compileFactory(zd,"ng:///".concat(e.name,"/\u0275fac.js"),{name:e.name,type:e,typeArgumentCount:0,deps:Os(e),target:t.FactoryTarget.Injectable})}return r},configurable:!0})}var Yd=Fe({provide:String,useValue:Fe});function Zd(e){return void 0!==e.useClass}function Jd(e){return void 0!==e.useFactory}var Xd=Wa("Injectable",void 0,void 0,void 0,(function(e,t){return Kd(e,t)}));function Qd(e){var t=$d(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0);return t.resolveInjectorInitializers(),t}function $d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Set,o=[n||mn,kl(e)];return r=r||("object"===typeof e?void 0:Ge(e)),new Hl(o,t||ql(),r||null,i)}var eh=function(){function e(){(0,v.Z)(this,e)}return(0,p.Z)(e,null,[{key:"create",value:function(e,t){if(Array.isArray(e))return Qd({name:""},t,e,"");var n,r=null!==(n=e.name)&&void 0!==n?n:"";return Qd({name:r},e.parent,e.providers,r)}}]),e}();eh.THROW_IF_NOT_FOUND=Qt,eh.NULL=new Il,eh.\u0275prov=St({token:eh,providedIn:"any",factory:function(){return cn(xl)}}),eh.__NG_ELEMENT_ID__=-1;var th=(0,p.Z)((function e(){(0,v.Z)(this,e)}));th.__NG_ELEMENT_ID__=function(){return new nh(ho())},th.__NG_ENV_ID__=function(e){return e};var nh=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this))._lView=e,r}return(0,p.Z)(n,[{key:"onDestroy",value:function(e){var t=this;return io(this._lView,e),function(){return function(e,t){if(null!==e[kr]){var n=e[kr].indexOf(t);-1!==n&&e[kr].splice(n,1)}}(t._lView,e)}}}]),n}(th);function rh(e){return e.ownerDocument.defaultView}function ih(e){return e.ownerDocument}function oh(e){return e.ownerDocument.body}var ah="\ufffd";function sh(e){return e instanceof Function?e():e}function ch(e){return"browser"===(null!==e&&void 0!==e?e:ln(eh)).get($l)}function uh(e,t){var n;!t&&Hd(uh);var r,i=null!==(n=null===t||void 0===t?void 0:t.injector)&&void 0!==n?n:ln(eh);if(!ch(i))return{destroy:function(){}};var o=i.get(th).onDestroy((function(){var e;return null===(e=r)||void 0===e?void 0:e()})),a=i.get(hh),s=new dh(e);return r=function(){a.unregister(s),o()},a.register(s),{destroy:r}}function lh(e,t){var n;!t&&Hd(lh);var r,i=null!==(n=null===t||void 0===t?void 0:t.injector)&&void 0!==n?n:ln(eh);if(!ch(i))return{destroy:function(){}};var o=i.get(th).onDestroy((function(){var e;return null===(e=r)||void 0===e?void 0:e()})),a=i.get(hh),s=new dh((function(){var t;null===(t=r)||void 0===t||t(),e()}));return r=function(){a.unregister(s),o()},a.register(s),{destroy:r}}var dh=function(){function e(t){(0,v.Z)(this,e),this.callback=t}return(0,p.Z)(e,[{key:"invoke",value:function(){this.callback()}}]),e}(),hh=function(){function e(){(0,v.Z)(this,e),this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}return(0,p.Z)(e,[{key:"begin",value:function(){if(this.runningCallbacks)throw new Xe(102,ngDevMode&&"A new render operation began before the previous operation ended. Did you trigger change detection from afterRender or afterNextRender?");this.renderDepth++}},{key:"end",value:function(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;var e,t=(0,h.Z)(this.callbacks);try{for(t.s();!(e=t.n()).done;){e.value.invoke()}}catch(o){t.e(o)}finally{t.f()}}finally{this.runningCallbacks=!1;var n,r=(0,h.Z)(this.deferredCallbacks);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.callbacks.add(i)}}catch(o){r.e(o)}finally{r.f()}this.deferredCallbacks.clear()}}},{key:"register",value:function(e){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(e)}},{key:"unregister",value:function(e){this.callbacks.delete(e),this.deferredCallbacks.delete(e)}},{key:"ngOnDestroy",value:function(){this.callbacks.clear(),this.deferredCallbacks.clear()}}]),e}();function fh(e){for(;e;){e[ur]|=64;var t=Ac(e);if(zr(e)&&!t)return e;e=t}return null}hh.\u0275prov=St({token:hh,providedIn:"root",factory:function(){return new hh}});var ph="ngOriginalError";function vh(e){return e[ph]}var gh=function(){function e(){(0,v.Z)(this,e),this._console=console}return(0,p.Z)(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}},{key:"_findOriginalError",value:function(e){for(var t=e&&vh(e);t&&vh(t);)t=vh(t);return t||null}}]),e}(),mh=new Sl("undefined"===typeof ngDevMode||ngDevMode?"IS_HYDRATION_DOM_REUSE_ENABLED":""),yh=new Sl("undefined"===typeof ngDevMode||ngDevMode?"PRESERVE_HOST_CONTENT":"",{providedIn:"root",factory:function(){return false}});function bh(e){var t;return t=e.replace(/[$@]/g,"_"),e=t.replace(_h,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"-"+t[1].toLowerCase()})),"ng-reflect-".concat(e)}var _h=/([A-Z])/g;var Eh=200;function Sh(e){if(!Qn(e))throw new Xe(906,"The ".concat(et(e)," is not an Angular component, ")+"make sure it has the `@Component` decorator.")}function wh(e,t,n){throw new Xe(-300,"Multiple components match node with tagname ".concat(e.value,": ")+"".concat(et(t)," and ")+"".concat(et(n)))}function xh(e){var t=String(e);try{(Array.isArray(e)||"[object Object]"===t)&&(t=JSON.stringify(e))}catch(n){}return t.length>Eh?t.substring(0,Eh)+"\u2026":t}function Th(e,t,n,r,i){for(var o=r.split(ah),a=(0,s.Z)(o),c=a[0],u=a[1],l=a.slice(2),d=u,h=u,f=0;f<l.length;f++){var p=t+f;d+="".concat(e[p]).concat(l[f]),h+="".concat(p===n?i:e[p]).concat(l[f])}return{propName:c,oldValue:d,newValue:h}}var Ih=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(){var e;return(0,v.Z)(this,n),(e=t.apply(this,arguments)).consumerAllowSignalWrites=!1,e._lView=null,e}return(0,p.Z)(n,[{key:"lView",set:function(e){("undefined"===typeof ngDevMode||ngDevMode)&&ut(this._lView,null,"Consumer already associated with a view."),this._lView=e}},{key:"onConsumerDependencyMayHaveChanged",value:function(){("undefined"===typeof ngDevMode||ngDevMode)&&mt(this._lView,"Updating a signal during template or host binding execution is not allowed."),fh(this._lView)}},{key:"onProducerUpdateValueVersion",value:function(){}},{key:"hasReadASignal",get:function(){return this.hasProducers}},{key:"runInContext",value:function(e,t,n){var r=bi(this);this.trackingVersion++;try{e(t,n)}finally{bi(r)}}},{key:"destroy",value:function(){this.trackingVersion++}}]),n}(_i),Rh=null;function kh(){var e;return null!==(e=Rh)&&void 0!==e||(Rh=new Ih),Rh}function Oh(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:kh()}function Ch(e,t){var n=kh();n.hasReadASignal&&(e[t]=Rh,n.lView=e,Rh=new Ih)}var Ah="undefined"===typeof ngDevMode||ngDevMode?{__brand__:"NO_CHANGE"}:{};function Nh(e){ngDevMode&&vt(e,0,"Can only advance forward"),jh(fo(),ho(),Wo()+e,!!ngDevMode&&So())}function jh(e,t,n,r){if(ngDevMode&&function(e,t){var n=e[1];oi(Nr,n.bindingStartIndex,t)}(t,n),!r)if(3===(3&t[ur])){var i=e.preOrderCheckHooks;null!==i&&ta(t,i,n)}else{var o=e.preOrderHooks;null!==o&&na(t,o,0,n)}Ho(n)}function Dh(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot.Default,r=ho();if(null===r)return ngDevMode&&(t=Dh,ngDevMode&&lt(Ct,t,"Calling \u0275\u0275inject would cause infinite recursion")),cn(e,n);var i=Ra(go(),r,ze(e),n);return ngDevMode&&Yt(e,i,n),i}function Ph(){var e=ngDevMode?"This constructor was not compatible with Dependency Injection.":"invalid";throw new Error(e)}function Lh(e,t,n,r,i,o,a,s,c,u,l){var d=t.blueprint.slice();return d[sr]=i,d[ur]=140|r,(null!==u||e&&2048&e[ur])&&(d[ur]|=2048),eo(d),ngDevMode&&t.declTNode&&e&&Yr(t.declTNode,e),d[lr]=d[Er]=e,d[vr]=n,d[mr]=a||e&&e[mr],ngDevMode&&mt(d[mr],"LViewEnvironment is required"),d[yr]=s||e&&e[yr],ngDevMode&&mt(d[yr],"Renderer is required"),d[gr]=c||e&&e[gr]||null,d[fr]=o,d[Ir]=pc++,d[Or]=l,d[Rr]=u,ngDevMode&&ut(2!=t.type||null!==e,!0,"Embedded views must have parentLView"),d[Sr]=2==t.type?e[Sr]:d,d}function Mh(e,t,n,r,i){ngDevMode&&0!==t&&gt(t,Nr,"TNodes can't be in the LView header."),ngDevMode&&function(e){2!==e&&1!==e&&4!==e&&8!==e&&32!==e&&16!==e&&64!==e&&yt("Expected TNodeType to have only a single type selected, but got ".concat(ua(e),"."))}(n);var o=e.data[t];if(null===o)o=Uh(e,t,n,r,i),oo.lFrame.inI18n&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;var a=yo();o.injectorIndex=null===a?-1:a.injectorIndex,ngDevMode&&Zr(o,e),ngDevMode&&ut(t,o.index,"Expecting same index")}return bo(o,!0),o}function Uh(e,t,n,r,i){var o=mo(),a=_o(),s=a?o:o&&o.parent,c=e.data[t]=function(e,t,n,r,i,o){ngDevMode&&0!==r&&gt(r,Nr,"TNodes can't be in the LView header."),ngDevMode&&ht(o,void 0,"'undefined' is not valid value for 'attrs'"),ngDevMode&&ngDevMode.tNode++,ngDevMode&&t&&Zr(t,e);var a=t?t.injectorIndex:-1,s=0;co()&&(s|=128);var c={type:n,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0};ngDevMode&&Object.seal(c);return c}(e,s,n,t,r,i);return null===e.firstChild&&(e.firstChild=c),null!==o&&(a?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}function Vh(e,t,n,r){if(0===n)return-1;ngDevMode&&(ni(e),dt(e,t[cr],"`LView` must be associated with `TView`!"),ut(e.data.length,t.length,"Expecting LView to be same size as TView"),ut(e.data.length,e.blueprint.length,"Expecting Blueprint to be same size as TView"),ri(e));for(var i=t.length,o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Fh(e,t,n,r,i){var o=Oh(t,Cr),a=Wo(),s=2&r;try{if(Ho(-1),s&&t.length>Nr&&jh(e,t,Nr,!!ngDevMode&&So()),qi(s?2:0,i),s)o.runInContext(n,r,i);else{var c=bi(null);try{n(r,i)}finally{bi(c)}}}finally{s&&null===t[Cr]&&Ch(t,Cr),Ho(a),qi(s?3:1,i)}}function Bh(e,t,n){if(Gr(t)){var r=bi(null);try{for(var i=t.directiveStart,o=t.directiveEnd,a=i;a<o;a++){var s=e.data[a];s.contentQueries&&s.contentQueries(1,n[a],a)}}finally{bi(r)}}}function Gh(e,t,n){so()&&(!function(e,t,n,r){var i=n.directiveStart,o=n.directiveEnd;qr(n)&&(ngDevMode&&la(n,3),function(e,t,n){var r=Yi(t,e),i=Wh(n),o=e[mr].rendererFactory,a=16;n.signals?a=4096:n.onPush&&(a=64);var s=pf(e,Lh(e,i,null,a,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=s}(t,n,e.data[i+n.componentOffset]));e.firstCreatePass||_a(n,t);Sc(r,t);for(var a=n.initialInputs,s=i;s<o;s++){var c=e.data[s],u=Aa(t,e,s,n);if(Sc(u,t),null!==a&&uf(t,s-i,u,c,n,a),Hr(c))Xi(n.index,t)[vr]=Aa(t,e,s,n)}}(e,t,n,Yi(n,t)),64===(64&n.flags)&&tf(e,t,n))}function qh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yi,r=t.localNames;if(null!==r)for(var i=t.index+1,o=0;o<r.length;o+=2){var a=r[o+1],s=-1===a?n(t,e):e[a];e[i++]=s}}function Wh(e){var t=e.tView;if(null===t||t.incompleteFirstPass){return e.tView=Hh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id)}return t}function Hh(e,t,n,r,i,o,a,s,c,u,l){ngDevMode&&ngDevMode.tView++;var d=Nr+r,h=d+i,f=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:Ah);return n}(d,h),p="function"===typeof u?u():u,v=f[cr]={type:e,blueprint:f,template:n,queries:null,viewQuery:s,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"===typeof o?o():o,pipeRegistry:"function"===typeof a?a():a,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l};return ngDevMode&&Object.seal(v),v}function zh(e,t,n,r){var i=r.get(yh,false)||n===Xt.ShadowDom,o=e.selectRootElement(t,i);return function(e){Kh(e)}(o),o}var Kh=function(e){return null};function Yh(e){ac(e)?uu(e):function(e){for(var t,n=Eu(),r=n.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode:function(e){var t=function(e){var t;return null===(t=e.textContent)||void 0===t?void 0:t.replace(/\s/gm,"")}(e);return"ngetn"===t||"ngtns"===t?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i=[];t=r.nextNode();)i.push(t);for(var o=0,a=i;o<a.length;o++){var s=a[o];"ngetn"===s.textContent?s.replaceWith(n.createTextNode("")):s.remove()}}(e)}function Zh(e,t,n,r){for(var i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;var o=e[i];null===r?Jh(n,t,i,o):r.hasOwnProperty(i)&&Jh(n,t,r[i],o)}return n}function Jh(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function Xh(e,t,n,r,i,o,a,s){ngDevMode&&ht(i,Ah,"Incoming value should never be NO_CHANGE.");var c,u,l=Yi(t,n),d=t.inputs;!s&&null!=d&&(c=d[r])?(Ef(e,n,c,r,i),qr(t)&&function(e,t){ngDevMode&&ti(e);var n=Xi(t,e);16&n[ur]||(n[ur]|=64)}(n,t.index),ngDevMode&&function(e,t,n,r,i){if(7&n)for(var o=0;o<r.length;o+=2)Qh(e,t,n,r[o+1],i)}(n,l,t.type,c,i)):3&t.type?(r="class"===(u=r)?"className":"for"===u?"htmlFor":"formaction"===u?"formAction":"innerHtml"===u?"innerHTML":"readonly"===u?"readOnly":"tabindex"===u?"tabIndex":u,ngDevMode&&(!function(e){if(e.toLowerCase().startsWith("on")){var t="Binding to event property '".concat(e,"' is disallowed for security reasons, ")+"please use (".concat(e.slice(2),")=...")+"\nIf '".concat(e,"' is a directive input, make sure the directive is imported by the")+" current module.";throw new Xe(306,t)}}(r),function(e,t,n,r){return null===r||!!(nc(r,n)||t in e||kn(t))||"undefined"===typeof Node||null===Node||!(e instanceof Node)}(l,r,t.value,e.schemas)||Js(r,t.value,t.type,n),ngDevMode.rendererSetProperty++),i=null!=a?a(i,t.value||"",r):i,o.setProperty(l,r,i)):12&t.type&&ngDevMode&&!nc(e.schemas,t.value)&&Js(r,t.value,t.type,n)}function Qh(t,n,r,i,o){var s=t[yr];i=bh(i);var c=function(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}(o);if(3&r)null==o?s.removeAttribute(n,i):s.setAttribute(n,i,c);else{var u=hc("bindings=".concat(JSON.stringify((0,a.Z)({},i,c),null,2)));s.setValue(n,u)}}function $h(e,t,n,r){if(ngDevMode&&ni(e),so()){var i,o,a=null===r?null:{"":-1},s=function(e,t){ngDevMode&&ni(e),ngDevMode&&la(t,15);var n=e.directiveRegistry,r=null,i=null;if(n)for(var o=0;o<n.length;o++){var a,s=n[o];if(Un(t,s.selectors,!1))if(r||(r=[]),Hr(s))if(ngDevMode&&(la(t,2,'"'.concat(t.value,'" tags cannot be used as component hosts. ')+"Please use a different tag to activate the ".concat(Ge(s.type)," component.")),qr(t)&&wh(t,r.find(Hr).type,s.type)),null!==s.findHostDirectiveDefs){var c,u=[];i=i||new Map,s.findHostDirectiveDefs(s,u,i),(c=r).unshift.apply(c,u.concat([s])),rf(e,t,u.length)}else r.unshift(s),rf(e,t,0);else i=i||new Map,null===(a=s.findHostDirectiveDefs)||void 0===a||a.call(s,s,r,i),r.push(s)}return null===r?null:[r,i]}(e,n);if(null===s)i=o=null;else{var c=(0,d.Z)(s,2);i=c[0],o=c[1]}null!==i&&ef(e,t,n,i,a,o),a&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var o=n[t[i+1]];if(null==o)throw new Xe(-301,ngDevMode&&"Export of name '".concat(t[i+1],"' not found!"));r.push(t[i],o)}}(n,r,a)}n.mergedAttrs=On(n.mergedAttrs,n.attrs)}function ef(e,t,n,r,i,o){ngDevMode&&ni(e);for(var a=0;a<r.length;a++)xa(_a(n,t),e,r[a].type);!function(e,t,n){ngDevMode&&lt(n,e.directiveEnd-e.directiveStart,"Reached the max number of directives"),e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(var s=0;s<r.length;s++){var c=r[s];c.providersResolver&&c.providersResolver(c)}var u=!1,l=!1,d=Vh(e,t,r.length,null);ngDevMode&&dt(d,n.directiveStart,"TNode.directiveStart should point to just allocated space");for(var h=0;h<r.length;h++){var f=r[h];n.mergedAttrs=On(n.mergedAttrs,f.hostAttrs),af(e,n,t,d,f),of(d,f,i),null!==f.contentQueries&&(n.flags|=4),null===f.hostBindings&&null===f.hostAttrs&&0===f.hostVars||(n.flags|=64);var p,v,g=f.type.prototype;if(!u&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck))(null!==(p=e.preOrderHooks)&&void 0!==p?p:e.preOrderHooks=[]).push(n.index),u=!0;if(!l&&(g.ngOnChanges||g.ngDoCheck))(null!==(v=e.preOrderCheckHooks)&&void 0!==v?v:e.preOrderCheckHooks=[]).push(n.index),l=!0;d++}!function(e,t,n){ngDevMode&&ni(e);for(var r=t.directiveStart,i=t.directiveEnd,o=e.data,a=t.attrs,s=[],c=null,u=null,l=r;l<i;l++){var d=o[l],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;c=Zh(d.inputs,l,c,f),u=Zh(d.outputs,l,u,p);var v=null===c||null===a||jn(t)?null:df(c,l,a);s.push(v)}null!==c&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=s,t.inputs=c,t.outputs=u}(e,n,o)}function tf(e,t,n){var r=n.directiveStart,i=n.directiveEnd,o=n.index,a=oo.lFrame.currentDirectiveIndex;try{Ho(o);for(var s=r;s<i;s++){var c=e.data[s],u=t[s];Ao(s),null===c.hostBindings&&0===c.hostVars&&null===c.hostAttrs||nf(c,u)}}finally{Ho(-1),Ao(a)}}function nf(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function rf(e,t,n){var r;ngDevMode&&ni(e),ngDevMode&&vt(n,-1,"componentOffset must be great than -1"),t.componentOffset=n,(null!==(r=e.components)&&void 0!==r?r:e.components=[]).push(t.index)}function of(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Hr(t)&&(n[""]=e)}}function af(e,t,n,r,i){ngDevMode&&gt(r,Nr,"Must be in Expando section"),e.data[r]=i;var o=i.factory||(i.factory=ci(i.type,!0)),a=new ca(o,Hr(i),Dh);e.blueprint[r]=a,n[r]=a,function(e,t,n,r,i){ngDevMode&&ni(e);var o=i.hostBindings;if(o){var a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);var s=~t.index;(function(e){for(var t=e.length;t>0;){var n=e[--t];if("number"===typeof n&&n<0)return n}return 0})(a)!=s&&a.push(s),a.push(n,r,o)}}(e,t,r,Vh(e,n,i.hostVars,Ah),i)}function sf(e,t,n,r,i,o){ngDevMode&&(ht(r,Ah,"Incoming value should never be NO_CHANGE."),function(e){if(e.toLowerCase().startsWith("on")){var t="Binding to event attribute '".concat(e,"' is disallowed for security reasons, ")+"please use (".concat(e.slice(2),")=...");throw new Xe(306,t)}}(n),la(e,2,"Attempted to set attribute `".concat(n,"` on a container node. ")+"Host bindings are not valid on ng-container or ng-template."));var a=Yi(e,t);cf(t[yr],a,o,e.value,n,r,i)}function cf(e,t,n,r,i,o,a){if(null==o)ngDevMode&&ngDevMode.rendererRemoveAttribute++,e.removeAttribute(t,i,n);else{ngDevMode&&ngDevMode.rendererSetAttribute++;var s=null==a?$e(o):a(o,r||"",i);e.setAttribute(t,i,s,n)}}function uf(e,t,n,r,i,o){var a=o[t];if(null!==a)for(var s=0;s<a.length;){var c=a[s++],u=a[s++],l=a[s++];if(lf(r,n,c,u,l),ngDevMode)Qh(e,Yi(i,e),i.type,u,l)}}function lf(e,t,n,r,i){var o=bi(null);try{var a=e.inputTransforms;null!==a&&a.hasOwnProperty(r)&&(i=a[r].call(t,i)),null!==e.setInput?e.setInput(t,i,n,r):t[r]=i}finally{bi(o)}}function df(e,t,n){for(var r=null,i=0;i<n.length;){var o=n[i];if(0!==o)if(5!==o){if("number"===typeof o)break;if(e.hasOwnProperty(o)){null===r&&(r=[]);for(var a=e[o],s=0;s<a.length;s+=2)if(a[s]===t){r.push(o,a[s+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function hf(e,t,n,r){ngDevMode&&ti(t);var i=[e,!0,!1,t,null,0,r,n,null,null,null];return ngDevMode&&ut(i.length,Vr,"Should allocate correct number of slots for LContainer header."),i}function ff(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1];if(-1!==o){var a=e.data[o];ngDevMode&&mt(a,"DirectiveDef not found."),ngDevMode&&mt(a.contentQueries,"contentQueries function should be defined"),Do(i),a.contentQueries(2,t[o],o)}}}function pf(e,t){return e[br]?e[_r][dr]=t:e[br]=t,e[_r]=t,t}function vf(e,t,n){ngDevMode&&mt(t,"View queries function to execute must be defined."),Do(0);var r=bi(null);try{t(e,n)}finally{bi(r)}}function gf(e,t,n,r){if(null===e[r]&&(null==t.inputs||!t.inputs[n])){(t.propertyBindings||(t.propertyBindings=[])).push(r);for(var i=n,o=arguments.length,a=new Array(o>4?o-4:0),s=4;s<o;s++)a[s-4]=arguments[s];a.length>0&&(i+=ah+a.join(ah)),e[r]=i}}function mf(e){return e[pr]||(e[pr]=[])}function yf(e){return e.cleanup||(e.cleanup=[])}function bf(e,t,n){return(null===e||Hr(e))&&(n=function(e){for(;Array.isArray(e);){if("object"===typeof e[jr])return e;e=e[sr]}return null}(n[t.index])),n[yr]}function _f(e,t){var n=e[gr],r=n?n.get(gh,null):null;r&&r.handleError(t)}function Ef(e,t,n,r,i){for(var o=0;o<n.length;){var a=n[o++],s=n[o++],c=t[a];ngDevMode&&_t(t,a),lf(e.data[a],c,r,s,i)}}function Sf(e,t,n){ngDevMode&&st(n,"Value should be a string"),ngDevMode&&ht(n,Ah,"value should not be NO_CHANGE"),ngDevMode&&_t(e,t);var r=Ki(t,e);ngDevMode&&mt(r,"native element should exist"),Uc(e[yr],r,n)}function wf(e,t){ngDevMode&&ut(Qi(e),!0,"Should be run in creation mode");var n=Xi(t,e),r=n[cr];!function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);var i=n[sr];null!==i&&null===n[Or]&&(n[Or]=Sd(i,n[gr])),xf(r,n,n[vr])}function xf(e,t,n){ngDevMode&&ut(Qi(t),!0,"Should be run in creation mode"),Mo(t);try{var r=e.viewQuery;null!==r&&vf(1,r,n);var i=e.template;null!==i&&Fh(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&ff(e,t),e.staticViewQueries&&vf(2,e.viewQuery,n);var o=e.components;null!==o&&function(e,t){for(var n=0;n<t.length;n++)wf(e,t[n])}(t,o)}catch(a){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),a}finally{t[ur]&=-5,Go()}}var Tf=function(){function e(){(0,v.Z)(this,e),this.all=new Set,this.queue=new Map}return(0,p.Z)(e,[{key:"create",value:function(e,t,n){var r,i=this,o="undefined"===typeof Zone?null:Zone.current,a=new ji(e,(function(e){i.all.has(e)&&i.queue.set(e,o)}),n);this.all.add(a),a.notify();var s=function(){var e;a.cleanup(),null===(e=r)||void 0===e||e(),i.all.delete(a),i.queue.delete(a)};return r=null===t||void 0===t?void 0:t.onDestroy(s),{destroy:s}}},{key:"flush",value:function(){var e=this;if(0!==this.queue.size){var t,n=(0,h.Z)(this.queue);try{var r=function(){var n=(0,d.Z)(t.value,2),r=n[0],i=n[1];e.queue.delete(r),i?i.run((function(){return r.run()})):r.run()};for(n.s();!(t=n.n()).done;)r()}catch(i){n.e(i)}finally{n.f()}}}},{key:"isQueueEmpty",get:function(){return 0===this.queue.size}}]),e}();function If(e,t){var n;(null===t||void 0===t||!t.injector)&&Hd(If);var r=null!==(n=null===t||void 0===t?void 0:t.injector)&&void 0!==n?n:ln(eh),i=r.get(Tf),o=!0!==(null===t||void 0===t?void 0:t.manualCleanup)?r.get(th):null;return i.create(e,o,!(null===t||void 0===t||!t.allowSignalWrites))}function Rf(e,t,n){ngDevMode&&ni(fo(),"Expecting to be called in first template pass only");var r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(var a=0;a<t.length;a++){var s=t[a];if("number"===typeof s)o=s;else if(1==o)i=qe(i,s);else if(2==o){r=qe(r,s+": "+t[++a]+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function kf(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){ngDevMode&&la(n,63);var o=t[n.index];if(null!==o&&r.push(zi(o)),Br(o)){for(var a=Vr;a<o.length;a++){var s=o[a],c=s[cr].firstChild;null!==c&&kf(s[cr],s,c,r)}o[Pr]!==o[sr]&&r.push(o[Pr])}var l=n.type;if(8&l)kf(e,t,n.child,r);else if(32&l)for(var d=Cc(n,t),h=void 0;h=d();)r.push(h);else if(16&l){var f=au(t,n);if(Array.isArray(f))r.push.apply(r,(0,u.Z)(f));else{var p=Ac(t[Sr]);ngDevMode&&ai(p),kf(p[cr],p,f,r,!0)}}n=i?n.projectionNext:n.next}return r}function Of(e,t,n){var r,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t[mr],a=o.rendererFactory,s=o.afterRenderEventManager,c=!!ngDevMode&&So();c||(null===(r=a.begin)||void 0===r||r.call(a),null===s||void 0===s||s.begin());try{Nf(e,t,e.template,n)}catch(d){throw i&&_f(t,d),d}finally{var u,l;if(!c)null===(u=a.end)||void 0===u||u.call(a),null===(l=o.effectManager)||void 0===l||l.flush(),null===s||void 0===s||s.end()}}function Cf(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];wo(!0);try{Of(e,t,n,r)}finally{wo(!1)}}function Af(e){var t=bc(e);Of(t[cr],t,e)}function Nf(e,t,n,r){var i;ngDevMode&&ut(Qi(t),!1,"Should be run in update mode");var o=t[ur];if(256!==(256&o)){var a=ngDevMode&&So();!a&&(null===(i=t[mr].effectManager)||void 0===i||i.flush()),Mo(t);try{eo(t),Io(e.bindingStartIndex),null!==n&&Fh(e,t,n,2,r);var s=3===(3&o);if(!a)if(s){var c=e.preOrderCheckHooks;null!==c&&ta(t,c,null)}else{var u=e.preOrderHooks;null!==u&&na(t,u,0,null),ra(t,0)}if(function(e){for(var t=jc(e);null!==t;t=Dc(t))if(t[Dr]){var n=t[Mr];ngDevMode&&mt(n,"Transplanted View flags set but missing MOVED_VIEWS");for(var r=0;r<n.length;r++){var i=n[r],o=i[lr];ngDevMode&&$r(o),to(i)}}}(t),jf(t,2),null!==e.contentQueries&&ff(e,t),!a)if(s){var l=e.contentCheckHooks;null!==l&&ta(t,l)}else{var d=e.contentHooks;null!==d&&na(t,d,1),ra(t,1)}!function(e,t){var n=e.hostBindingOpCodes;if(null!==n){var r=Oh(t,Ar);try{for(var i=0;i<n.length;i++){var o=n[i];if(o<0)Ho(~o);else{var a=o,s=n[++i],c=n[++i];Co(s,a);var u=t[a];r.runInContext(c,2,u)}}}finally{null===t[Ar]&&Ch(t,Ar),Ho(-1)}}}(e,t);var h=e.components;null!==h&&Lf(t,h,0);var f=e.viewQuery;if(null!==f&&vf(2,f,r),!a)if(s){var p=e.viewCheckHooks;null!==p&&ta(t,p)}else{var v=e.viewHooks;null!==v&&na(t,v,2),ra(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),a||(t[ur]&=-73),no(t)}finally{Go()}}}function jf(e,t){for(var n=jc(e);null!==n;n=Dc(n))for(var r=Vr;r<n.length;r++){Pf(n[r],t)}}function Df(e,t,n){ngDevMode&&ut(Qi(e),!1,"Should be run in update mode"),Pf(Xi(t,e),n)}function Pf(e,t){if(128===(128&e[ur])){var n=e[cr];if(80&e[ur]&&0===t||1024&e[ur]||2===t)Nf(n,e,n.template,e[vr]);else if(e[hr]>0){jf(e,1);var r=e[cr].components;null!==r&&Lf(e,r,1)}}}function Lf(e,t,n){for(var r=0;r<t.length;r++)Df(e,t[r],n)}Tf.\u0275prov=St({token:Tf,providedIn:"root",factory:function(){return new Tf}});var Mf=function(){function e(t,n){(0,v.Z)(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}return(0,p.Z)(e,[{key:"rootNodes",get:function(){var e=this._lView,t=e[cr];return kf(t,e,t.firstChild,[])}},{key:"context",get:function(){return this._lView[vr]},set:function(e){this._lView[vr]=e}},{key:"destroyed",get:function(){return 256===(256&this._lView[ur])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var e=this._lView[lr];if(Br(e)){var t=e[Lr],n=t?t.indexOf(this):-1;n>-1&&(ngDevMode&&ut(n,e.indexOf(this._lView)-Vr,"An attached view should be in the same position within its container as its ViewRef in the VIEW_REFS array."),qc(e,n),us(t,n))}this._attachedToViewContainer=!1}Wc(this._lView[cr],this._lView)}},{key:"onDestroy",value:function(e){io(this._lView,e)}},{key:"markForCheck",value:function(){fh(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[ur]&=-129}},{key:"reattach",value:function(){this._lView[ur]|=128}},{key:"detectChanges",value:function(){Of(this._lView[cr],this._lView,this.context)}},{key:"checkNoChanges",value:function(){ngDevMode&&Cf(this._lView[cr],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Xe(902,ngDevMode&&"This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){var e,t;this._appRef=null,e=this._lView[cr],t=this._lView,du(e,t,t[yr],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._attachedToViewContainer)throw new Xe(902,ngDevMode&&"This view is already attached to a ViewContainer!");this._appRef=e}}]),e}(),Uf=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this,e))._view=e,r}return(0,p.Z)(n,[{key:"detectChanges",value:function(){var e=this._view;Of(e[cr],e,e[vr],!1)}},{key:"checkNoChanges",value:function(){if(ngDevMode){var e=this._view;Cf(e[cr],e,e[vr],!1)}}},{key:"context",get:function(){return null}}]),n}(Mf),Vf=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this)).ngModule=e,r}return(0,p.Z)(n,[{key:"resolveComponentFactory",value:function(e){ngDevMode&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Type passed in is not ComponentType, it does not have '\u0275cmp' property.";Qn(e)||yt(t)}(e);var t=Qn(e);return new Gf(t,this.ngModule)}}]),n}(Dd);function Ff(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t.push({propName:r,templateName:n})}return t}var Bf=function(){function e(t,n){(0,v.Z)(this,e),this.injector=t,this.parentInjector=n}return(0,p.Z)(e,[{key:"get",value:function(e,t,n){n=dn(n);var r=this.injector.get(e,qd,n);return r!==qd||t===qd?r:this.parentInjector.get(e,t,n)}}]),e}(),Gf=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(e,r){var i;return(0,v.Z)(this,n),(i=t.call(this)).componentDef=e,i.ngModule=r,i.componentType=e.type,i.selector=Gn(e.selectors),i.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],i.isBoundToModule=!!r,i}return(0,p.Z)(n,[{key:"inputs",get:function(){var e=this.componentDef,t=e.inputTransforms,n=Ff(e.inputs);if(null!==t){var r,i=(0,h.Z)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.hasOwnProperty(o.propName)&&(o.transform=t[o.propName])}}catch(a){i.e(a)}finally{i.f()}}return n}},{key:"outputs",get:function(){return Ff(this.componentDef.outputs)}},{key:"create",value:function(e,t,n,r){var i,o=(r=r||this.ngModule)instanceof Wl?r:null===(i=r)||void 0===i?void 0:i.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);var a=o?new Bf(e,o):e,s=a.get(Ud,null);if(null===s)throw new Xe(407,ngDevMode&&"Angular was not able to inject a renderer (RendererFactory2). Likely this is due to a broken DI hierarchy. Make sure that any injector used to create this component has a correct parent.");var c={rendererFactory:s,sanitizer:a.get(Fd,null),effectManager:a.get(Tf,null),afterRenderEventManager:a.get(hh,null)},u=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",d=n?zh(u,n,this.componentDef.encapsulation,a):Fc(u,l,function(e){var t=e.toLowerCase();return"svg"===t?Wi:"math"===t?Hi:null}(l)),f=this.componentDef.onPush?576:528,p=this.componentDef.signals?4608:f,v=null;null!==d&&(v=Sd(d,a,!0));var g,m,y=Hh(0,null,null,1,0,null,null,null,null,null,null),b=Lh(null,y,null,p,null,null,c,u,a,null,v);Mo(b);try{var _,E=this.componentDef,S=null;E.findHostDirectiveDefs?(_=[],S=new Map,E.findHostDirectiveDefs(E,_,S),_.push(E)):_=[E];var w=function(e,t,n,r,i,o,a){var s=i[cr];!function(e,t,n,r){var i,o=(0,h.Z)(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;t.mergedAttrs=On(t.mergedAttrs,a.hostAttrs)}}catch(s){o.e(s)}finally{o.f()}null!==t.mergedAttrs&&(Rf(t,t.mergedAttrs,!0),null!==n&&pu(r,n,t))}(r,e,t,a);var c=null;null!==t&&(c=Sd(t,i[gr]));var u=o.rendererFactory.createRenderer(t,n),l=16;n.signals?l=4096:n.onPush&&(l=64);var d=Lh(i,Wh(n),null,l,i[e.index],e,o,u,null,null,c);s.firstCreatePass&&rf(s,e,r.length-1);return pf(i,d),i[e.index]=d}(function(e,t){var n=e[cr],r=Nr;return ngDevMode&&_t(e,r),e[r]=t,Mh(n,r,2,"#host",null)}(b,d),d,E,_,b,c,u);m=Zi(y,Nr),d&&function(e,t,n,r){if(r)In(e,n,["ng-version",Gd.full]);else{var i=function(e){for(var t=[],n=[],r=1,i=2;r<e.length;){var o=e[r];if("string"===typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!Ln(i))break;i=o}r++}return{attrs:t,classes:n}}(t.selectors[0]),o=i.attrs,a=i.classes;o&&In(e,n,o),a&&a.length>0&&fu(e,n,a.join(" "))}}(u,E,d,n),void 0!==t&&function(e,t,n){for(var r=e.projection=[],i=0;i<t.length;i++){var o=n[i];r.push(null!=o?Array.from(o):null)}}(m,this.ngContentSelectors,t),g=function(e,t,n,r,i,o){var a=go();ngDevMode&&mt(a,"tNode should have been already created");var s=i[cr],c=Yi(a,i);ef(s,i,a,n,null,r);for(var u=0;u<n.length;u++){Sc(Aa(i,s,a.directiveStart+u,a),i)}tf(s,i,a),c&&Sc(c,i);ngDevMode&&vt(a.componentOffset,-1,"componentOffset must be great than -1");var l=Aa(i,s,a.directiveStart+a.componentOffset,a);if(e[vr]=i[vr]=l,null!==o){var d,f=(0,h.Z)(o);try{for(f.s();!(d=f.n()).done;){(0,d.value)(l,t)}}catch(p){f.e(p)}finally{f.f()}}return Bh(s,a,e),l}(w,E,_,S,b,[Wf]),xf(y,b,null)}finally{Go()}return new qf(this.componentType,g,Pd(m,b),b,m)}}]),n}(Ad),qf=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(e,r,i,o,a){var s;return(0,v.Z)(this,n),(s=t.call(this)).location=i,s._rootLView=o,s._tNode=a,s.previousInputValues=null,s.instance=r,s.hostView=s.changeDetectorRef=new Uf(o),s.componentType=e,s}return(0,p.Z)(n,[{key:"setInput",value:function(e,t){var n,r=this._tNode.inputs;if(null!==r&&(n=r[e])){var i;if(null!==(i=this.previousInputValues)&&void 0!==i||(this.previousInputValues=new Map),this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;var o=this._rootLView;Ef(o[cr],o,n,e,t),this.previousInputValues.set(e,t),fh(Xi(this._tNode.index,o))}else if(ngDevMode){var a=et(this.componentType),s="Can't set value of the '".concat(e,"' input on the '").concat(a,"' component. ");Xs(s+="Make sure that the '".concat(e,"' property is annotated with @Input() or a mapped @Input('").concat(e,"') exists."))}}},{key:"injector",get:function(){return new Pa(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(e){this.hostView.onDestroy(e)}}]),n}(Cd);function Wf(){var e=go();ngDevMode&&mt(e,"TNode is required"),ea(ho()[cr],e)}function Hf(e){return Object.getPrototypeOf(e.prototype).constructor}function zf(e){for(var t=Hf(e.type),n=!0,r=[e];t;){var i=void 0;if(Hr(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Xe(903,ngDevMode&&"Directives cannot inherit Components. Directive ".concat(et(e.type)," is attempting to extend component ").concat(et(t)));i=t.\u0275dir}if(i){if(n){r.push(i);var o=e;o.inputs=Kf(e.inputs),o.inputTransforms=Kf(e.inputTransforms),o.declaredInputs=Kf(e.declaredInputs),o.outputs=Kf(e.outputs);var a=i.hostBindings;a&&Jf(e,a);var s=i.viewQuery,c=i.contentQueries;if(s&&Yf(e,s),c&&Zf(e,c),Be(e.inputs,i.inputs),Be(e.declaredInputs,i.declaredInputs),Be(e.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Be(o.inputTransforms,i.inputTransforms)),Hr(i)&&i.data.animation){var u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}var l=i.features;if(l)for(var d=0;d<l.length;d++){var h=l[d];h&&h.ngInherit&&h(e),h===zf&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,r=e.length-1;r>=0;r--){var i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=On(i.hostAttrs,n=On(n,i.hostAttrs))}}(r)}function Kf(e){return e===gn?{}:e===mn?[]:e}function Yf(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,r){t(e,r),n(e,r)}:t}function Zf(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,r,i){t(e,r,i),n(e,r,i)}:t}function Jf(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,r){t(e,r),n(e,r)}:t}var Xf=["providersResolver"],Qf=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function $f(e){var t=Hf(e.type),n=void 0;n=Hr(e)?t.\u0275cmp:t.\u0275dir;var r,i=e,o=(0,h.Z)(Xf);try{for(o.s();!(r=o.n()).done;){var a=r.value;i[a]=n[a]}}catch(l){o.e(l)}finally{o.f()}if(Hr(n)){var s,c=(0,h.Z)(Qf);try{for(c.s();!(s=c.n()).done;){var u=s.value;i[u]=n[u]}}catch(l){c.e(l)}finally{c.f()}}}function ep(e){return function(t){t.findHostDirectiveDefs=tp,t.hostDirectives=(Array.isArray(e)?e:e()).map((function(e){return"function"===typeof e?{directive:ze(e),inputs:gn,outputs:gn}:{directive:ze(e.directive),inputs:np(e.inputs),outputs:np(e.outputs)}}))}}function tp(e,t,n){if(null!==e.hostDirectives){var r,i=(0,h.Z)(e.hostDirectives);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=$n(o.directive);("undefined"===typeof ngDevMode||ngDevMode)&&ip(o,a,t),rp(a.declaredInputs,o.inputs),tp(a,t,n),n.set(a,o),t.push(a)}}catch(s){i.e(s)}finally{i.f()}}}function np(e){if(void 0===e||0===e.length)return gn;for(var t={},n=0;n<e.length;n+=2)t[e[n]]=e[n+1];return t}function rp(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],i=e[n];("undefined"===typeof ngDevMode||ngDevMode)&&e.hasOwnProperty(r)&&ut(e[r],e[n],"Conflicting host directive input alias ".concat(n,".")),e[r]=i}}function ip(e,t,n){var r=e.directive;if(null===t){if(null!==Qn(r))throw new Xe(310,"Host directive ".concat(r.name," cannot be a component."));throw new Xe(307,"Could not resolve metadata for host directive ".concat(r.name,". ")+"Make sure that the ".concat(r.name," class is annotated with an @Directive decorator."))}if(!t.standalone)throw new Xe(308,"Host directive ".concat(t.type.name," must be standalone."));if(n.indexOf(t)>-1)throw new Xe(309,"Directive ".concat(t.type.name," matches multiple times on the same element. ")+"Directives can only match an element once.");op("input",t,e.inputs),op("output",t,e.outputs)}function op(e,t,n){var r=t.type.name,i="input"===e?t.inputs:t.outputs;for(var o in n)if(n.hasOwnProperty(o)){if(!i.hasOwnProperty(o))throw new Xe(311,"Directive ".concat(r," does not have an ").concat(e," with a public name of ").concat(o,"."));var a=n[o];if(i.hasOwnProperty(a)&&a!==o&&i[a]!==o)throw new Xe(312,"Cannot alias ".concat(e," ").concat(o," of host directive ").concat(r," to ").concat(a,", because it already has a different ").concat(e," with the same public name."))}}function ap(e){var t=e.inputConfig,n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}e.inputTransforms=n}function sp(e){return!!cp(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function cp(e){return null!==e&&("function"===typeof e||"object"===typeof e)}function up(e,t){var n=sp(e),r=sp(t);return n&&r?function(e,t,n){for(var r=e[Symbol.iterator](),i=t[Symbol.iterator]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(e,t,up):!(n||!(e&&("object"===typeof e||"function"===typeof e))||r||!(t&&("object"===typeof t||"function"===typeof t)))||Object.is(e,t)}function lp(e,t,n){return e[t]=n}function dp(e,t){return ngDevMode&&_t(e,t),ngDevMode&&ht(e[t],Ah,"Stored value should never be NO_CHANGE."),e[t]}function hp(e,t,n){ngDevMode&&ht(n,Ah,"Incoming value should never be NO_CHANGE."),ngDevMode&&ft(t,e.length,"Slot should have been initialized to NO_CHANGE");var r=e[t];if(Object.is(r,n))return!1;if(ngDevMode&&So()){var i=r!==Ah?r:void 0;if(!up(i,n)){var o=function(e,t,n,r){var i=e[cr].data,o=i[t];if("string"===typeof o)return o.indexOf(ah)>-1?Th(e,t,t,o,r):{propName:o,oldValue:n,newValue:r};if(null===o){for(var a=t-1;"string"!==typeof i[a]&&null===i[a+1];)a--;var s=i[a];if("string"===typeof s){var c=s.match(new RegExp(ah,"g"));if(c&&c.length-1>t-a)return Th(e,a,t,s,r)}}return{propName:void 0,oldValue:n,newValue:r}}(e,t,i,n);!function(e,t,n,r,i){var o,a=Qs(i),s=null===a||void 0===a||null===(o=a.type)||void 0===o?void 0:o.name,c=r?" for '".concat(r,"'"):"",u="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value".concat(c,": '").concat(xh(t),"'. Current value: '").concat(xh(n),"'.").concat(s?" Expression location: ".concat(s," component"):"");throw e&&(u+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook?"),new Xe(-100,u)}(r===Ah,o.oldValue,o.newValue,o.propName,e)}return!1}return e[t]=n,!0}function fp(e,t,n,r){var i=hp(e,t,n);return hp(e,t+1,r)||i}function pp(e,t,n,r,i){var o=fp(e,t,n,r);return hp(e,t+2,i)||o}function vp(e,t,n,r,i,o){var a=fp(e,t,n,r);return fp(e,t+2,i,o)||a}function gp(e,t,n,r){var i=ho(),o=Ro();if(hp(i,o,t)){var a=fo(),s=zo();sf(s,i,e,t,n,r),ngDevMode&&gf(a.data,s,"attr."+e,o)}return gp}function mp(e,t){ngDevMode&&ft(2,t.length,"should have at least 3 values"),ngDevMode&&ut(t.length%2,1,"should have an odd number of values");for(var n=!1,r=To(),i=1;i<t.length;i+=2)n=hp(e,r++,t[i])||n;if(Io(r),!n)return Ah;for(var o=t[0],a=1;a<t.length;a+=2)o+=$e(t[a])+t[a+1];return o}function yp(e,t,n,r){return hp(e,Ro(),n)?t+$e(n)+r:Ah}function bp(e,t,n,r,i,o){var a=fp(e,To(),n,i);return ko(2),a?t+$e(n)+r+$e(i)+o:Ah}function _p(e,t,n,r,i,o,a,s){var c=pp(e,To(),n,i,a);return ko(3),c?t+$e(n)+r+$e(i)+o+$e(a)+s:Ah}function Ep(e,t,n,r,i,o,a,s,c,u){var l=vp(e,To(),n,i,a,c);return ko(4),l?t+$e(n)+r+$e(i)+o+$e(a)+s+$e(c)+u:Ah}function Sp(e,t,n,r,i,o,a,s,c,u,l,d){var h=To(),f=vp(e,h,n,i,a,c);return f=hp(e,h+4,l)||f,ko(5),f?t+$e(n)+r+$e(i)+o+$e(a)+s+$e(c)+u+$e(l)+d:Ah}function wp(e,t,n,r,i,o,a,s,c,u,l,d,h,f){var p=To(),v=vp(e,p,n,i,a,c);return v=fp(e,p+4,l,h)||v,ko(6),v?t+$e(n)+r+$e(i)+o+$e(a)+s+$e(c)+u+$e(l)+d+$e(h)+f:Ah}function xp(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v){var g=To(),m=vp(e,g,n,i,a,c);return m=pp(e,g+4,l,h,p)||m,ko(7),m?t+$e(n)+r+$e(i)+o+$e(a)+s+$e(c)+u+$e(l)+d+$e(h)+f+$e(p)+v:Ah}function Tp(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g,m){var y=To(),b=vp(e,y,n,i,a,c);return b=vp(e,y+4,l,h,p,g)||b,ko(8),b?t+$e(n)+r+$e(i)+o+$e(a)+s+$e(c)+u+$e(l)+d+$e(h)+f+$e(p)+v+$e(g)+m:Ah}function Ip(e,t,n,r,i,o){var a=ho(),s=yp(a,t,n,r);if(s!==Ah){var c=zo();sf(c,a,e,s,i,o),ngDevMode&&gf(fo().data,c,"attr."+e,To()-1,t,r)}return Ip}function Rp(e,t,n,r,i,o,a,s){var c=ho(),u=bp(c,t,n,r,i,o);if(u!==Ah){var l=zo();sf(l,c,e,u,a,s),ngDevMode&&gf(fo().data,l,"attr."+e,To()-2,t,r,o)}return Rp}function kp(e,t,n,r,i,o,a,s,c,u){var l=ho(),d=_p(l,t,n,r,i,o,a,s);if(d!==Ah){var h=zo();sf(h,l,e,d,c,u),ngDevMode&&gf(fo().data,h,"attr."+e,To()-3,t,r,o,s)}return kp}function Op(e,t,n,r,i,o,a,s,c,u,l,d){var h=ho(),f=Ep(h,t,n,r,i,o,a,s,c,u);if(f!==Ah){var p=zo();sf(p,h,e,f,l,d),ngDevMode&&gf(fo().data,p,"attr."+e,To()-4,t,r,o,s,u)}return Op}function Cp(e,t,n,r,i,o,a,s,c,u,l,d,h,f){var p=ho(),v=Sp(p,t,n,r,i,o,a,s,c,u,l,d);if(v!==Ah){var g=zo();sf(g,p,e,v,h,f),ngDevMode&&gf(fo().data,g,"attr."+e,To()-5,t,r,o,s,u,d)}return Cp}function Ap(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v){var g=ho(),m=wp(g,t,n,r,i,o,a,s,c,u,l,d,h,f);if(m!==Ah){var y=zo();sf(y,g,e,m,p,v),ngDevMode&&gf(fo().data,y,"attr."+e,To()-6,t,r,o,s,u,d,f)}return Ap}function Np(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g,m){var y=ho(),b=xp(y,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v);if(b!==Ah){var _=zo();sf(_,y,e,b,g,m),ngDevMode&&gf(fo().data,_,"attr."+e,To()-7,t,r,o,s,u,d,f,v)}return Np}function jp(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g,m,y,b){var _=ho(),E=Tp(_,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g,m);if(E!==Ah){var S=zo();sf(S,_,e,E,y,b),ngDevMode&&gf(fo().data,S,"attr."+e,To()-8,t,r,o,s,u,d,f,v,m)}return jp}function Dp(e,t,n,r){var i=ho(),o=mp(i,t);if(o!==Ah){var a=zo();if(sf(a,i,e,o,n,r),ngDevMode){for(var s=[t[0]],c=2;c<t.length;c+=2)s.push(t[c]);gf.apply(void 0,[fo().data,a,"attr."+e,To()-s.length+1].concat(s))}}return Dp}var Pp="<-- AT THIS LOCATION";function Lp(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(!e||e.nodeType!==t||e.nodeType===Node.ELEMENT_NODE&&e.tagName.toLowerCase()!==(null===n||void 0===n?void 0:n.toLowerCase())){var a,s=zp(t,n,null),c="During hydration Angular expected ".concat(s," but "),u=Qs(r),l=null===u||void 0===u||null===(a=u.type)||void 0===a?void 0:a.name,d="Angular expected this DOM:\n\n".concat(Wp(r,i,o),"\n\n"),h="";if(e){var f,p,v=zp(e.nodeType,null!==(f=e.tagName)&&void 0!==f?f:null,null!==(p=e.textContent)&&void 0!==p?p:null);c+="found ".concat(v,".\n\n"),h="Actual DOM is:\n\n".concat(Hp(e),"\n\n")}else c+="the node was not found.\n\n";var g=Kp(l);throw new Xe(-500,c+d+h+"Note: attributes are only displayed to better represent the DOM but have no effect on hydration mismatches.\n\n"+g)}}function Mp(e){if(Up(e),!e.nextSibling){var t="Actual DOM is:\n\n".concat(Hp(e),"\n\n"),n=Kp();throw new Xe(-501,"During hydration Angular expected more sibling nodes to be present.\n\n"+t+n)}}function Up(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e){var r="",i="";throw null!==t&&null!==n&&(r="".concat(Wp(t,n,!1),"\n\n"),i=Kp()),new Xe(-502,"During hydration, Angular expected an element to be present at this location.\n\n"+r+i)}}function Vp(e,t){var n="During hydration Angular was unable to locate a node "+'using the "'.concat(t,'" path, starting from the ').concat(qp(e)," node.\n\n"),r=Kp();throw new Xe(-502,n+r)}function Fp(e){var t="".concat(Hp(e),"\n\n");return new Xe(-503,"During serialization, Angular detected DOM nodes that were created outside of Angular context and provided as projectable nodes (likely via `ViewContainerRef.createComponent` or `createComponent` APIs). Hydration is not supported for such cases, consider refactoring the code to avoid this pattern or using `ngSkipHydration` on the host element of the component.\n\n"+t+"Note: attributes are only displayed to better represent the DOM but have no effect on hydration mismatches.\n\n")}var Bp=new Set(["ngh","ng-version","ng-server-context"]);function Gp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u2026";switch(e.type){case 1:var n=e.value?"(".concat(e.value,")"):"";return"#text".concat(n);case 2:var r=function(e){var t=[];if(e.attrs)for(var n=0;n<e.attrs.length;){var r=e.attrs[n++];if("number"==typeof r)break;var i=e.attrs[n++];t.push("".concat(r,'="').concat(Yp(i),'"'))}return t.join(" ")}(e),i=e.value.toLowerCase();return"<".concat(i).concat(r?" "+r:"",">").concat(t,"</").concat(i,">");case 8:return"\x3c!-- ng-container --\x3e";case 4:return"\x3c!-- container --\x3e";default:var o=function(e){switch(e){case 4:return"view container";case 2:return"element";case 8:return"ng-container";case 32:return"icu";case 64:return"i18n";case 16:return"projection";case 1:return"text";default:return"<unknown>"}}(e.type);return"#node(".concat(o,")")}}function qp(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u2026",r=e;switch(r.nodeType){case Node.ELEMENT_NODE:var i=r.tagName.toLowerCase(),o=function(e){for(var t=[],n=0;n<e.attributes.length;n++){var r=e.attributes[n];Bp.has(r.name)||t.push("".concat(r.name,'="').concat(Yp(r.value),'"'))}return t.join(" ")}(r);return"<".concat(i).concat(o?" "+o:"",">").concat(n,"</").concat(i,">");case Node.TEXT_NODE:var a=r.textContent?Yp(r.textContent):"";return"#text".concat(a?"(".concat(a,")"):"");case Node.COMMENT_NODE:return"\x3c!-- ".concat(Yp(null!==(t=r.textContent)&&void 0!==t?t:"")," --\x3e");default:return"#node(".concat(r.nodeType,")")}}function Wp(e,t,n){var r="  ",i="";t.prev?(i+="  \u2026\n",i+=r+Gp(t.prev)+"\n"):t.type&&12&t.type&&(i+="  \u2026\n"),n?(i+=r+Gp(t)+"\n",i+=r+"\x3c!-- container --\x3e  ".concat(Pp,"\n")):i+=r+Gp(t)+"  ".concat(Pp,"\n"),i+="  \u2026\n";var o=t.type?zc(e[cr],t,e):null;return o&&(i=qp(o,"\n"+i)),i}function Hp(e){var t="  ",n="",r=e;return r.previousSibling&&(n+="  \u2026\n",n+=t+qp(r.previousSibling)+"\n"),n+=t+qp(r)+"  ".concat(Pp,"\n"),e.nextSibling&&(n+="  \u2026\n"),e.parentNode&&(n=qp(r.parentNode,"\n"+n)),n}function zp(e,t,n){switch(e){case Node.ELEMENT_NODE:return"<".concat(t.toLowerCase(),">");case Node.TEXT_NODE:var r=n?' (with the "'.concat(Yp(n),'" content)'):"";return"a text node".concat(r);case Node.COMMENT_NODE:return"a comment node";default:return"#node(nodeType=".concat(e,")")}}function Kp(e){var t=e?'the "'.concat(e,'"'):"corresponding";return"To fix this problem:\n"+"  * check ".concat(t," component for hydration-related issues\n")+"  * check to see if your template has valid HTML structure\n  * or skip hydration by adding the `ngSkipHydration` attribute to its host node in a template\n\n"}function Yp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e?(e=function(e){return e.replace(/\s+/gm,"")}(e)).length>t?"".concat(e.substring(0,t-1),"\u2026"):e:""}var Zp=new RegExp("^(\\d+)*(".concat(cd,"|").concat(sd,")*(.*)"));function Jp(e){return e.index-Nr}function Xp(e,t,n,r){var i=null,o=Jp(r),a=e.data[vd];if(null!==a&&void 0!==a&&a[o])i=function(e,t){var n,r=function(e){var t,n=e.match(Zp),r=(0,d.Z)(n,4),i=(r[0],r[1]),o=r[2],a=r[3],s=i?parseInt(i,10):o,c=[],u=(0,h.Z)(a.matchAll(/(f|n)(\d*)/g));try{for(u.s();!(t=u.n()).done;){var l=(0,d.Z)(t.value,3),f=(l[0],l[1]),p=l[2],v=parseInt(p,10)||1;c.push(f,v)}}catch(g){u.e(g)}finally{u.f()}return[s].concat(c)}(e),i=(0,s.Z)(r),o=i[0],a=i.slice(1);if(o===sd)n=t[Sr][sr];else if(o===cd)n=oh(t[Sr][sr]);else{n=zi(t[Number(o)+Nr])}return function(e,t){for(var n=e,r=0;r<t.length;r+=2)for(var i=t[r],o=t[r+1],a=0;a<o;a++){if(ngDevMode&&!n)throw Vp(e,$p(t));switch(i){case ad.FirstChild:n=n.firstChild;break;case ad.NextSibling:n=n.nextSibling}}if(ngDevMode&&!n)throw Vp(e,$p(t));return n}(n,a)}(a[o],n);else if(t.firstChild===r)i=e.firstChild;else{var c,u=null===r.prev,l=null!==(c=r.prev)&&void 0!==c?c:r.parent;if(ngDevMode&&mt(l,"Unexpected state: current TNode does not have a connection to the previous node or a parent node."),function(e){var t;return!e.prev&&8===(null===(t=e.parent)||void 0===t?void 0:t.type)}(r)){i=Id(e,Jp(r.parent))}else{var f=Yi(l,n);if(u)i=f.firstChild;else{var p=Jp(l),v=Id(e,p);if(2===l.type&&v)i=Qp(kd(e,p)+1,v);else i=f.nextSibling}}}return i}function Qp(e,t){for(var n=t,r=0;r<e;r++)ngDevMode&&Mp(n),n=n.nextSibling;return n}function $p(e){for(var t=[],n=0;n<e.length;n+=2)for(var r=e[n],i=e[n+1],o=0;o<i;o++)t.push(r===ad.FirstChild?"firstChild":"nextSibling");return t.join(".")}function ev(e,t){if(e===t)return[];if(null==e.parentElement||null==t.parentElement)return null;if(e.parentElement===t.parentElement)return function(e,t){var n=[],r=null;for(r=e;null!=r&&r!==t;r=r.nextSibling)n.push(ad.NextSibling);return null==r?null:n}(e,t);var n=t.parentElement,r=ev(e,n),i=ev(n.firstChild,t);return r&&i?[].concat((0,u.Z)(r),[ad.FirstChild],(0,u.Z)(i)):null}function tv(e,t,n){var r=ev(e,t);return null===r?null:function(e,t){var n,r=[e],i=(0,h.Z)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=r.length-1;if(a>0&&r[a-1]===o){var s=r[a]||1;r[a]=s+1}else r.push(o,"")}}catch(c){i.e(c)}finally{i.f()}return r.join("")}(n,r)}function nv(e,t){var n,r,i,o=e.parent;null!==o&&3&o.type?(r=zi(t[n=o.index]),i=$e(n-Nr)):(n=i=sd,r=t[Sr][sr]);var a=zi(t[e.index]);if(12&e.type){var s=ou(t,e);s&&(a=s)}var c=tv(r,a,i);if(null===c&&r!==a&&null===(c=tv(r.ownerDocument.body,a,cd)))throw function(e,t){var n="".concat(Wp(e,t,!1),"\n\n"),r=Kp();throw new Xe(-502,"During serialization, Angular was unable to find an element in the DOM:\n\n"+n+r)}(t,e);return c}function rv(e,t,n,r,i,o,a,s){var c=ho(),u=fo(),l=e+Nr,d=u.firstCreatePass?function(e,t,n,r,i,o,a,s,c){ngDevMode&&ni(t),ngDevMode&&ngDevMode.firstCreatePass++;var u=t.consts,l=Mh(t,e,4,a||null,$i(u,s));$h(t,n,l,$i(u,c)),ea(t,l);var d=l.tView=Hh(2,l,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return null!==t.queries&&(t.queries.template(t,l),d.queries=t.queries.embeddedTView(l)),l}(l,u,c,t,n,r,i,o,a):u.data[l];bo(d,!1);var h=iv(u,c,d,e);Qo()&&iu(u,c,h,d),Sc(h,c),pf(c,c[l]=hf(h,c,h,d)),Wr(d)&&Gh(u,c,d),null!=a&&qh(c,d,s)}var iv=ov;function ov(e,t,n,r){return $o(!0),t[yr].createComment(ngDevMode?"container":"")}function av(e,t,n,r){var i,o,a=t[Or],s=!a||co()||Od(a,r);if($o(s),s)return ov(0,t);var c=null!==(i=null===(o=a.data[ld])||void 0===o?void 0:o[r])&&void 0!==i?i:null;null!==c&&null!==n.tView&&(null===n.tView.ssrId?n.tView.ssrId=c:ngDevMode&&ut(n.tView.ssrId,c,"Unexpected value of the `ssrId` for this TView"));var u=Xp(a,e,t,n);ngDevMode&&Up(u,t,n),Td(a,r,u);var l=Qp(kd(a,r),u);return ngDevMode&&(Lp(l,Node.COMMENT_NODE,null,t,n),xd(l)),l}function sv(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function cv(e){return Ji(function(){var e=oo.lFrame.contextLView;return ngDevMode&&mt(e,"contextLView must be defined."),e}(),Nr+e)}function uv(e,t,n){var r=ho(),i=Ro();if(hp(r,i,t)){var o=fo(),a=zo();Xh(o,a,r,e,t,r[yr],n,!1),ngDevMode&&gf(o.data,a,e,i)}return uv}function lv(e,t,n,r,i){var o=i?"class":"style";Ef(e,n,t.inputs[o],o,r)}function dv(e,t,n,r){var i=ho(),o=fo(),a=Nr+e;ngDevMode&&ut(To(),o.bindingStartIndex,"elements should be created before any bindings"),ngDevMode&&_t(i,a);var s=i[yr],c=o.firstCreatePass?function(e,t,n,r,i,o){ngDevMode&&ni(t),ngDevMode&&ngDevMode.firstCreatePass++;var a=t.consts,s=Mh(t,e,2,r,$i(a,i));return $h(t,n,s,$i(a,o)),null!==s.attrs&&Rf(s,s.attrs,!1),null!==s.mergedAttrs&&Rf(s,s.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,s),s}(a,o,i,t,n,r):o.data[a],u=pv(o,i,c,s,t,e);i[a]=u;var l=Wr(c);return ngDevMode&&o.firstCreatePass&&function(e,t,n,r,i){if(null!==r&&!i&&null!==n&&("undefined"!==typeof HTMLUnknownElement&&HTMLUnknownElement&&e instanceof HTMLUnknownElement||"undefined"!==typeof customElements&&n.indexOf("-")>-1&&!customElements.get(n))&&!nc(r,n)){var o=$s(t),a=ec(t),s="'".concat(o?"@Component":"@NgModule",".schemas'"),c="'".concat(n,"' is not a known element").concat(a,":\n");if(c+="1. If '".concat(n,"' is an Angular component, then verify that it is ").concat(o?"included in the '@Component.imports' of this component":"a part of an @NgModule where this component is declared",".\n"),n&&n.indexOf("-")>-1?c+="2. If '".concat(n,"' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the ").concat(s," of this component to suppress this message."):c+="2. To allow any element add 'NO_ERRORS_SCHEMA' to the ".concat(s," of this component."),Ws)throw new Xe(304,c);console.error(Qe(304,c))}}(u,i,c.value,o.schemas,l),bo(c,!0),pu(s,u,c),32!==(32&c.flags)&&Qo()&&iu(o,i,u,c),0===oo.lFrame.elementDepthCount&&Sc(u,i),oo.lFrame.elementDepthCount++,l&&(Gh(o,i,c),Bh(o,c,i)),null!==r&&qh(i,c),dv}function hv(){var e=go();ngDevMode&&mt(e,"No parent node to close."),_o()?Eo():(ngDevMode&&Qr(go()),bo(e=e.parent,!1));var t=e;ngDevMode&&la(t,3),function(e){return oo.skipHydrationRootTNode===e}(t)&&(oo.skipHydrationRootTNode=null),oo.lFrame.elementDepthCount--;var n=fo();return n.firstCreatePass&&(ea(n,e),Gr(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!==(8&e.flags)}(t)&&lv(n,t,ho(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!==(16&e.flags)}(t)&&lv(n,t,ho(),t.stylesWithoutHost,!1),hv}function fv(e,t,n,r){return dv(e,t,n,r),hv(),fv}var pv=function(e,t,n,r,i,o){return $o(!0),Fc(r,i,Jo())};function vv(e,t,n,r,i,o){var a=t[Or],s=!a||co()||Od(a,o);if($o(s),s)return Fc(r,i,Jo());var c=Xp(a,e,t,n);if(ngDevMode&&Lp(c,Node.ELEMENT_NODE,i,t,n),ngDevMode&&xd(c),Rd(a,o)&&(ngDevMode&&Up(c.nextSibling,t,n),Td(a,o,c.nextSibling)),a&&(oc(n)||ac(c)))if(qr(n))!function(e){oo.skipHydrationRootTNode=e}(n),uu(c),ngDevMode&&ngDevMode.componentsSkippedHydration++;else if(ngDevMode)throw function(e){var t="".concat(Hp(e),"\n\n");return new Xe(-504,"The `ngSkipHydration` flag is applied on a node that doesn't act as a component host. Hydration can be skipped only on per-component basis.\n\n"+t+"Please move the `ngSkipHydration` attribute to the component host element.\n\n")}(c);return c}function gv(e,t,n){var r=ho(),i=fo(),o=e+Nr;ngDevMode&&_t(r,o),ngDevMode&&ut(To(),i.bindingStartIndex,"element containers should be created before any bindings");var a=i.firstCreatePass?function(e,t,n,r,i){ngDevMode&&ngDevMode.firstCreatePass++;var o=t.consts,a=$i(o,r),s=Mh(t,e,8,"ng-container",a);return null!==a&&Rf(s,a,!0),$h(t,n,s,$i(o,i)),null!==t.queries&&t.queries.elementStart(t,s),s}(o,i,r,t,n):i.data[o];bo(a,!0);var s=bv(i,r,a,e);return r[o]=s,Qo()&&iu(i,r,s,a),Sc(s,r),Wr(a)&&(Gh(i,r,a),Bh(i,a,r)),null!=n&&qh(r,a),gv}function mv(){var e=go(),t=fo();return _o()?Eo():(ngDevMode&&Qr(e),bo(e=e.parent,!1)),ngDevMode&&la(e,8),t.firstCreatePass&&(ea(t,e),Gr(e)&&t.queries.elementEnd(e)),mv}function yv(e,t,n){return gv(e,t,n),mv(),yv}var bv=function(e,t,n,r){return $o(!0),Vc(t[yr],ngDevMode?"ng-container":"")};function _v(e,t,n,r){var i,o=t[Or],a=!o||co();if($o(a),a)return Vc(t[yr],ngDevMode?"ng-container":"");var s=Xp(o,e,t,n);ngDevMode&&Up(s,t,n);var c=function(e,t){var n,r,i,o=e.data,a=null!==(n=null===(r=o[ud])||void 0===r?void 0:r[t])&&void 0!==n?n:null;return null===a&&null!==(i=o[dd])&&void 0!==i&&i[t]&&(a=kd(e,t)),a}(o,r);return ngDevMode&&ot(c,"Unexpected state: hydrating an <ng-container>, but no hydration info is available."),Td(o,r,s),i=Qp(c,s),ngDevMode&&(Lp(i,Node.COMMENT_NODE,null,t,n),xd(i)),i}function Ev(){return ho()}function Sv(e){return!!e&&"function"===typeof e.then}function wv(e){return!!e&&"function"===typeof e.subscribe}function xv(e,t,n,r){var i=ho(),o=fo(),a=go();return Iv(o,i,i[yr],a,e,t,r),xv}function Tv(e,t){var n=go(),r=ho(),i=fo();return Iv(i,r,bf(No(i.data),n,r),n,e,t),Tv}function Iv(e,t,n,r,i,o,a){var s=Wr(r),c=e.firstCreatePass&&yf(e),u=t[vr],l=mf(t);ngDevMode&&la(r,15);var d=!0;if(3&r.type||a){var h=Yi(r,t),f=a?a(h):h,p=l.length,v=a?function(e){return a(zi(e[r.index]))}:r.index,g=null;if(!a&&s&&(g=function(e,t,n,r){var i=e.cleanup;if(null!=i)for(var o=0;o<i.length-1;o+=2){var a=i[o];if(a===n&&i[o+1]===r){var s=t[pr],c=i[o+2];return s.length>c?s[c]:null}"string"===typeof a&&(o+=2)}return null}(e,t,i,r.index)),null!==g){(g.__ngLastListenerFn__||g).__ngNextListenerFn__=o,g.__ngLastListenerFn__=o,d=!1}else{o=kv(r,t,u,o,!1);var m=n.listen(f,i,o);ngDevMode&&ngDevMode.rendererAddEventListener++,l.push(o,m),c&&c.push(i,v,p,p+1)}}else o=kv(r,t,u,o,!1);var y,b=r.outputs;if(d&&null!==b&&(y=b[i])){var _=y.length;if(_)for(var E=0;E<_;E+=2){var S=y[E];ngDevMode&&_t(t,S);var w=y[E+1],x=t[S],T=x[w];if(ngDevMode&&!wv(T))throw new Error("@Output ".concat(w," not initialized in '").concat(x.constructor.name,"'."));var I=T.subscribe(o),R=l.length;l.push(o,I),c&&c.push(i,r.index,R,-(R+1))}}}function Rv(e,t,n,r){try{return qi(6,t,n),!1!==n(r)}catch(i){return _f(e,i),!1}finally{qi(7,t,n)}}function kv(e,t,n,r,i){return function o(a){if(a===Function)return r;fh(e.componentOffset>-1?Xi(e.index,t):t);for(var s=Rv(t,n,r,a),c=o.__ngNextListenerFn__;c;)s=Rv(t,n,c,a)&&s,c=c.__ngNextListenerFn__;return i&&!1===s&&a.preventDefault(),s}}function Ov(){return qo(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)}function Cv(e,t){for(var n=null,r=function(e){var t=e.attrs;if(null!=t){var n=t.indexOf(5);if(0===(1&n))return t[n+1]}return null}(e),i=0;i<t.length;i++){var o=t[i];if("*"!==o){if(null===r?Un(e,o,!0):Vn(r,o))return i}else n=i}return n}function Av(e){var t=ho()[Sr][fr];if(!t.projection)for(var n=e?e.length:1,r=t.projection=ls(n,null),i=r.slice(),o=t.child;null!==o;){var a=e?Cv(o,e):0;null!==a&&(i[a]?i[a].projectionNext=o:r[a]=o,i[a]=o),o=o.next}}function Nv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=ho(),i=fo(),o=Mh(i,Nr+e,16,null,n||null);null===o.projection&&(o.projection=t),Eo(),(!r[Or]||co())&&32!==(32&o.flags)&&function(e,t,n){hu(t[yr],0,t,n,zc(e,n,t),Qc(n.parent||t[fr],n,t))}(i,r,o)}function jv(e,t,n){return Dv(e,"",t,"",n),jv}function Dv(e,t,n,r,i){var o=ho(),a=yp(o,t,n,r);if(a!==Ah){var s=fo(),c=zo();Xh(s,c,o,e,a,o[yr],i,!1),ngDevMode&&gf(s.data,c,e,To()-1,t,r)}return Dv}function Pv(e,t,n,r,i,o,a){var s=ho(),c=bp(s,t,n,r,i,o);if(c!==Ah){var u=fo(),l=zo();Xh(u,l,s,e,c,s[yr],a,!1),ngDevMode&&gf(u.data,l,e,To()-2,t,r,o)}return Pv}function Lv(e,t,n,r,i,o,a,s,c){var u=ho(),l=_p(u,t,n,r,i,o,a,s);if(l!==Ah){var d=fo(),h=zo();Xh(d,h,u,e,l,u[yr],c,!1),ngDevMode&&gf(d.data,h,e,To()-3,t,r,o,s)}return Lv}function Mv(e,t,n,r,i,o,a,s,c,u,l){var d=ho(),h=Ep(d,t,n,r,i,o,a,s,c,u);if(h!==Ah){var f=fo(),p=zo();Xh(f,p,d,e,h,d[yr],l,!1),ngDevMode&&gf(f.data,p,e,To()-4,t,r,o,s,u)}return Mv}function Uv(e,t,n,r,i,o,a,s,c,u,l,d,h){var f=ho(),p=Sp(f,t,n,r,i,o,a,s,c,u,l,d);if(p!==Ah){var v=fo(),g=zo();Xh(v,g,f,e,p,f[yr],h,!1),ngDevMode&&gf(v.data,g,e,To()-5,t,r,o,s,u,d)}return Uv}function Vv(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p){var v=ho(),g=wp(v,t,n,r,i,o,a,s,c,u,l,d,h,f);if(g!==Ah){var m=fo(),y=zo();Xh(m,y,v,e,g,v[yr],p,!1),ngDevMode&&gf(m.data,y,e,To()-6,t,r,o,s,u,d,f)}return Vv}function Fv(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g){var m=ho(),y=xp(m,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v);if(y!==Ah){var b=fo(),_=zo();Xh(b,_,m,e,y,m[yr],g,!1),ngDevMode&&gf(b.data,_,e,To()-7,t,r,o,s,u,d,f,v)}return Fv}function Bv(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g,m,y){var b=ho(),_=Tp(b,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g,m);if(_!==Ah){var E=fo(),S=zo();Xh(E,S,b,e,_,b[yr],y,!1),ngDevMode&&gf(E.data,S,e,To()-8,t,r,o,s,u,d,f,v,m)}return Bv}function Gv(e,t,n){var r=ho(),i=mp(r,t);if(i!==Ah){var o=fo(),a=zo();if(Xh(o,a,r,e,i,r[yr],n,!1),ngDevMode){for(var s=[t[0]],c=2;c<t.length;c+=2)s.push(t[c]);gf.apply(void 0,[o.data,a,e,To()-s.length+1].concat(s))}}return Gv}function qv(e,t){return ngDevMode&&at(e,0,32767),ngDevMode&&at(t,0,32767),e<<17|t<<2}function Wv(e){return ngDevMode&&ot(e,"expected number"),e>>17&32767}function Hv(e){return ngDevMode&&ot(e,"expected number"),2|e}function zv(e){return ngDevMode&&ot(e,"expected number"),(131068&e)>>2}function Kv(e,t){return ngDevMode&&ot(e,"expected number"),ngDevMode&&at(t,0,32767),-131069&e|t<<2}function Yv(e){return ngDevMode&&ot(e,"expected number"),1|e}function Zv(e,t,n,r,i,o){ngDevMode&&ri(fo());var a=o?t.classBindings:t.styleBindings,s=Wv(a),c=zv(a);e[r]=n;var u,l,d,h=!1;if(Array.isArray(n)){var f=n;(null===(u=f[1])||fs(f,u)>0)&&(h=!0)}else u=n;if(i)if(0!==c){var p=Wv(e[s+1]);e[r+1]=qv(p,s),0!==p&&(e[p+1]=Kv(e[p+1],r)),e[s+1]=(l=e[s+1],d=r,ngDevMode&&ot(l,"expected number"),ngDevMode&&at(d,0,32767),131071&l|d<<17)}else e[r+1]=qv(s,0),0!==s&&(e[s+1]=Kv(e[s+1],r)),s=r;else e[r+1]=qv(c,0),ngDevMode&&ut(0!==s&&0===c,!1,"Adding template bindings after hostBindings is not allowed."),0===s?s=r:e[c+1]=Kv(e[c+1],r),c=r;h&&(e[r+1]=Hv(e[r+1])),Jv(e,u,r,!0,o),Jv(e,u,r,!1,o),function(e,t,n,r,i){var o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&fs(o,t)>=0&&(n[r+1]=Yv(n[r+1]))}(t,u,e,r,o),a=qv(s,c),o?t.classBindings=a:t.styleBindings=a}function Jv(e,t,n,r,i){for(var o=e[n+1],a=null===t,s=r?Wv(o):zv(o),c=!1;0!==s&&(!1===c||a);){ngDevMode&&_t(e,s);var u=e[s],l=e[s+1];Xv(u,t)&&(c=!0,e[s+1]=r?Yv(l):Hv(l)),s=r?Wv(l):zv(l)}c&&(e[n+1]=r?Hv(o):Yv(o))}function Xv(e,t){return ngDevMode&&lt(Array.isArray(t),!0,"Expected that 'tStylingKey' has been unwrapped"),null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!==typeof t)&&fs(e,t)>=0}var Qv={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $v(e){return e.substring(Qv.key,Qv.keyEnd)}function eg(e){return e.substring(Qv.value,Qv.valueEnd)}function tg(e,t){var n=Qv.textEnd;return n===t?-1:(t=Qv.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,Qv.key=t,n),ig(e,t,n))}function ng(e,t){var n=Qv.textEnd,r=Qv.key=ig(e,t,n);return n===r?-1:(r=Qv.keyEnd=function(e,t,n){var r;for(;t<n&&(45===(r=e.charCodeAt(t))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)t++;return t}(e,r,n),r=og(e,r,n,58),r=Qv.value=ig(e,r,n),r=Qv.valueEnd=function(e,t,n){var r=-1,i=-1,o=-1,a=t,s=a;for(;a<n;){var c=e.charCodeAt(a++);if(59===c)return s;34===c||39===c?s=a=ag(e,c,a,n):t===a-4&&85===o&&82===i&&76===r&&40===c?s=a=ag(e,41,a,n):c>32&&(s=a),o=i,i=r,r=-33&c}return s}(e,r,n),og(e,r,n,59))}function rg(e){Qv.key=0,Qv.keyEnd=0,Qv.value=0,Qv.valueEnd=0,Qv.textEnd=e.length}function ig(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function og(e,t,n,r){return(t=ig(e,t,n))<n&&(ngDevMode&&e.charCodeAt(t)!==r&&sg(e,String.fromCharCode(r),t),t++),t}function ag(e,t,n,r){for(var i=-1,o=n;o<r;){var a=e.charCodeAt(o++);if(a==t&&92!==i)return o;i=92==a&&92===i?0:a}throw ngDevMode?sg(e,String.fromCharCode(t),r):new Error}function sg(e,t,n){throw ngDevMode&&ut("string"===typeof e,!0,"String expected here"),yt("Malformed style at location ".concat(n," in string '")+e.substring(0,n)+"[>>"+e.substring(n,n+1)+"<<]"+e.slice(n+1)+"'. Expecting '".concat(t,"'."))}function cg(e,t,n){return pg(e,t,n,!1),cg}function ug(e,t){return pg(e,t,null,!0),ug}function lg(e){vg(_g,dg,e,!1)}function dg(e,t){for(var n=function(e){return rg(e),ng(e,ig(e,0,Qv.textEnd))}(t);n>=0;n=ng(t,n))_g(e,$v(t),eg(t))}function hg(e){vg(Eg,fg,e,!0)}function fg(e,t){for(var n=function(e){return rg(e),tg(e,ig(e,0,Qv.textEnd))}(t);n>=0;n=tg(t,n))ds(e,$v(t),!0)}function pg(e,t,n,r){var i=ho(),o=fo(),a=ko(2);(o.firstUpdatePass&&mg(o,e,a,r),t!==Ah&&hp(i,a,t))&&Sg(o,o.data[Wo()],i,i[yr],e,i[a+1]=function(e,t){null==e||""===e||("string"===typeof t?e+=t:"object"===typeof e&&(e=Ge(Nu(e))));return e}(t,n),r,a)}function vg(e,t,n,r){var i=fo(),o=ko(2);i.firstUpdatePass&&mg(i,null,o,r);var a=ho();if(n!==Ah&&hp(a,o,n)){var s=i.data[Wo()];if(Tg(s,r)&&!gg(i,o)){if(ngDevMode){var c=i.data[o];ut(Array.isArray(c)?c[1]:c,!1,"Styling linked list shadow input should be marked as 'false'")}var u=r?s.classesWithoutHost:s.stylesWithoutHost;ngDevMode&&!1===r&&null!==u&&ut(u.endsWith(";"),!0,"Expecting static portion to end with ';'"),null!==u&&(n=qe(u,n||"")),lv(i,s,a,n,r)}else!function(e,t,n,r,i,o,a,s){i===Ah&&(i=mn);var c=0,u=0,l=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;null!==l||null!==d;){ngDevMode&&ft(c,999,"Are we stuck in infinite loop?"),ngDevMode&&ft(u,999,"Are we stuck in infinite loop?");var h=c<i.length?i[c+1]:void 0,f=u<o.length?o[u+1]:void 0,p=null,v=void 0;l===d?(c+=2,u+=2,h!==f&&(p=d,v=f)):null===d||null!==l&&l<d?(c+=2,p=l):(ngDevMode&&mt(d,"Expecting to have a valid key"),u+=2,p=d,v=f),null!==p&&Sg(e,t,n,r,p,v,a,s),l=c<i.length?i[c]:null,d=u<o.length?o[u]:null}}(i,s,a,a[yr],a[o+1],a[o+1]=function(e,t,n){if(null==n||""===n)return mn;var r=[],i=Nu(n);if(Array.isArray(i))for(var o=0;o<i.length;o++)e(r,i[o],!0);else if("object"===typeof i)for(var a in i)i.hasOwnProperty(a)&&e(r,a,i[a]);else"string"===typeof i?t(r,i):ngDevMode&&yt("Unsupported styling type "+typeof i+": "+i);return r}(e,t,n),r,o)}}function gg(e,t){return t>=e.expandoStartIndex}function mg(e,t,n,r){ngDevMode&&ri(e);var i=e.data;if(null===i[n+1]){var o=i[Wo()];ngDevMode&&mt(o,"TNode expected");var a=gg(e,n);Tg(o,r)&&null===t&&!a&&(t=!1),t=function(e,t,n,r){var i=No(e),o=r?t.residualClasses:t.residualStyles;if(null===i){0===(r?t.classBindings:t.styleBindings)&&(n=bg(n=yg(null,e,t,n,r),t.attrs,r),o=null)}else{var a=t.directiveStylingLast;if(-1===a||e[a]!==i)if(n=yg(i,e,t,n,r),null===o){var s=function(e,t,n){var r=n?t.classBindings:t.styleBindings;if(0===zv(r))return;return e[Wv(r)]}(e,t,r);void 0!==s&&Array.isArray(s)&&function(e,t,n,r){var i=n?t.classBindings:t.styleBindings;ngDevMode&&lt(zv(i),0,"Expecting to have at least one template styling binding."),e[Wv(i)]=r}(e,t,r,s=bg(s=yg(null,e,t,s[1],r),t.attrs,r))}else o=function(e,t,n){var r=void 0,i=t.directiveEnd;ngDevMode&&lt(t.directiveStylingLast,-1,"By the time this function gets called at least one hostBindings-node styling instruction must have executed.");for(var o=1+t.directiveStylingLast;o<i;o++){r=bg(r,e[o].hostAttrs,n)}return bg(r,t.attrs,n)}(e,t,r)}void 0!==o&&(r?t.residualClasses=o:t.residualStyles=o);return n}(i,o,t,r),Zv(i,o,t,n,a,r)}}function yg(e,t,n,r,i){var o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<a&&(o=t[s],ngDevMode&&mt(o,"expected to be defined"),r=bg(r,o.hostAttrs,i),o!==e);)s++;return null!==e&&(n.directiveStylingLast=s),r}function bg(e,t,n){var r=n?1:2,i=-1;if(null!==t)for(var o=0;o<t.length;o++){var a=t[o];"number"===typeof a?i=a:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),ds(e,a,!!n||t[++o]))}return void 0===e?null:e}function _g(e,t,n){ds(e,t,Nu(n))}function Eg(e,t,n){var r=String(t);""===r||r.includes(" ")||ds(e,r,n)}function Sg(e,t,n,r,i,o,a,s){if(3&t.type){var c,u=e.data,l=u[s+1];if(!xg((c=l,ngDevMode&&ot(c,"expected number"),1===(1&c)?wg(u,t,n,i,zv(l),a):void 0)))xg(o)||function(e){return ngDevMode&&ot(e,"expected number"),2==(2&e)}(l)&&(o=wg(u,null,n,i,s,a)),function(e,t,n,r,i){if(t)i?(ngDevMode&&ngDevMode.rendererAddClass++,e.addClass(n,r)):(ngDevMode&&ngDevMode.rendererRemoveClass++,e.removeClass(n,r));else{var o=-1===r.indexOf("-")?void 0:rc.DashCase;null==i?(ngDevMode&&ngDevMode.rendererRemoveStyle++,e.removeStyle(n,r,o)):("string"===typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=rc.Important),ngDevMode&&ngDevMode.rendererSetStyle++,e.setStyle(n,r,i,o))}}(r,a,Ki(Wo(),n),i,o)}}function wg(e,t,n,r,i,o){for(var a=null===t,s=void 0;i>0;){var c=e[i],u=Array.isArray(c),l=u?c[1]:c,d=null===l,h=n[i+1];h===Ah&&(h=d?mn:void 0);var f=d?hs(h,r):l===r?h:void 0;if(u&&!xg(f)&&(f=hs(c,r)),xg(f)&&(s=f,a))return s;var p=e[i+1];i=a?Wv(p):zv(p)}if(null!==t){var v=o?t.residualClasses:t.residualStyles;null!=v&&(s=hs(v,r))}return s}function xg(e){return void 0!==e}function Tg(e,t){return 0!==(e.flags&(t?8:16))}function Ig(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=ho(),r=fo(),i=e+Nr;ngDevMode&&ut(To(),r.bindingStartIndex,"text nodes should be created before any bindings"),ngDevMode&&_t(n,i);var o=r.firstCreatePass?Mh(r,i,1,t,null):r.data[i],a=Rg(r,n,o,t,e);n[i]=a,Qo()&&iu(r,n,a,o),bo(o,!1)}var Rg=function(e,t,n,r,i){return $o(!0),Mc(t[yr],r)};function kg(e,t,n,r,i){var o=t[Or],a=!o||co()||Od(o,i);if($o(a),a)return Mc(t[yr],r);var s=Xp(o,e,t,n);return ngDevMode&&Lp(s,Node.TEXT_NODE,null,t,n),ngDevMode&&xd(s),s}function Og(e){return Cg("",e,""),Og}function Cg(e,t,n){var r=ho(),i=yp(r,e,t,n);return i!==Ah&&Sf(r,Wo(),i),Cg}function Ag(e,t,n,r,i){var o=ho(),a=bp(o,e,t,n,r,i);return a!==Ah&&Sf(o,Wo(),a),Ag}function Ng(e,t,n,r,i,o,a){var s=ho(),c=_p(s,e,t,n,r,i,o,a);return c!==Ah&&Sf(s,Wo(),c),Ng}function jg(e,t,n,r,i,o,a,s,c){var u=ho(),l=Ep(u,e,t,n,r,i,o,a,s,c);return l!==Ah&&Sf(u,Wo(),l),jg}function Dg(e,t,n,r,i,o,a,s,c,u,l){var d=ho(),h=Sp(d,e,t,n,r,i,o,a,s,c,u,l);return h!==Ah&&Sf(d,Wo(),h),Dg}function Pg(e,t,n,r,i,o,a,s,c,u,l,d,h){var f=ho(),p=wp(f,e,t,n,r,i,o,a,s,c,u,l,d,h);return p!==Ah&&Sf(f,Wo(),p),Pg}function Lg(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p){var v=ho(),g=xp(v,e,t,n,r,i,o,a,s,c,u,l,d,h,f,p);return g!==Ah&&Sf(v,Wo(),g),Lg}function Mg(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g){var m=ho(),y=Tp(m,e,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g);return y!==Ah&&Sf(m,Wo(),y),Mg}function Ug(e){var t=ho(),n=mp(t,e);return n!==Ah&&Sf(t,Wo(),n),Ug}function Vg(e,t,n){vg(ds,fg,yp(ho(),e,t,n),!0)}function Fg(e,t,n,r,i){vg(ds,fg,bp(ho(),e,t,n,r,i),!0)}function Bg(e,t,n,r,i,o,a){vg(ds,fg,_p(ho(),e,t,n,r,i,o,a),!0)}function Gg(e,t,n,r,i,o,a,s,c){vg(ds,fg,Ep(ho(),e,t,n,r,i,o,a,s,c),!0)}function qg(e,t,n,r,i,o,a,s,c,u,l){vg(ds,fg,Sp(ho(),e,t,n,r,i,o,a,s,c,u,l),!0)}function Wg(e,t,n,r,i,o,a,s,c,u,l,d,h){vg(ds,fg,wp(ho(),e,t,n,r,i,o,a,s,c,u,l,d,h),!0)}function Hg(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p){vg(ds,fg,xp(ho(),e,t,n,r,i,o,a,s,c,u,l,d,h,f,p),!0)}function zg(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g){vg(ds,fg,Tp(ho(),e,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g),!0)}function Kg(e){vg(ds,fg,mp(ho(),e),!0)}function Yg(e,t,n){lg(yp(ho(),e,t,n))}function Zg(e,t,n,r,i){lg(bp(ho(),e,t,n,r,i))}function Jg(e,t,n,r,i,o,a){lg(_p(ho(),e,t,n,r,i,o,a))}function Xg(e,t,n,r,i,o,a,s,c){lg(Ep(ho(),e,t,n,r,i,o,a,s,c))}function Qg(e,t,n,r,i,o,a,s,c,u,l){lg(Sp(ho(),e,t,n,r,i,o,a,s,c,u,l))}function $g(e,t,n,r,i,o,a,s,c,u,l,d,h){lg(wp(ho(),e,t,n,r,i,o,a,s,c,u,l,d,h))}function em(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p){lg(xp(ho(),e,t,n,r,i,o,a,s,c,u,l,d,h,f,p))}function tm(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g){lg(Tp(ho(),e,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g))}function nm(e){lg(mp(ho(),e))}function rm(e,t,n,r,i){return pg(e,yp(ho(),t,n,r),i,!1),rm}function im(e,t,n,r,i,o,a){return pg(e,bp(ho(),t,n,r,i,o),a,!1),im}function om(e,t,n,r,i,o,a,s,c){return pg(e,_p(ho(),t,n,r,i,o,a,s),c,!1),om}function am(e,t,n,r,i,o,a,s,c,u,l){return pg(e,Ep(ho(),t,n,r,i,o,a,s,c,u),l,!1),am}function sm(e,t,n,r,i,o,a,s,c,u,l,d,h){return pg(e,Sp(ho(),t,n,r,i,o,a,s,c,u,l,d),h,!1),sm}function cm(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p){return pg(e,wp(ho(),t,n,r,i,o,a,s,c,u,l,d,h,f),p,!1),cm}function um(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g){return pg(e,xp(ho(),t,n,r,i,o,a,s,c,u,l,d,h,f,p,v),g,!1),um}function lm(e,t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g,m,y){return pg(e,Tp(ho(),t,n,r,i,o,a,s,c,u,l,d,h,f,p,v,g,m),y,!1),lm}function dm(e,t,n){return pg(e,mp(ho(),t),n,!1),dm}function hm(e,t,n){var r=ho(),i=Ro();if(hp(r,i,t)){var o=fo(),a=zo();Xh(o,a,r,e,t,r[yr],n,!0),ngDevMode&&gf(o.data,a,e,i)}return hm}function fm(e,t,n){var r=ho(),i=Ro();if(hp(r,i,t)){var o=fo(),a=zo();Xh(o,a,r,e,t,bf(No(o.data),a,r),n,!0),ngDevMode&&gf(o.data,a,e,i)}return fm}"undefined"===typeof ngI18nClosureMode&&(Vt.ngI18nClosureMode="undefined"!==typeof goog&&"function"===typeof goog.getMsg);var pm=void 0;var vm,gm=["en",[["a","p"],["AM","PM"],pm],[["AM","PM"],pm,pm],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],pm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],pm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",pm,"{1} 'at' {0}",pm],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],mm={};function ym(e,t,n){"string"!==typeof t&&(n=t,t=e[vm.LocaleId]),t=t.toLowerCase().replace(/_/g,"-"),mm[t]=e,n&&(mm[t][vm.ExtraData]=n)}function bm(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=Sm(t);if(n)return n;var r=t.split("-")[0];if(n=Sm(r))return n;if("en"===r)return gm;throw new Xe(701,ngDevMode&&'Missing locale data for the locale "'.concat(e,'".'))}function _m(e){return bm(e)[vm.CurrencyCode]||null}function Em(e){return bm(e)[vm.PluralCase]}function Sm(e){return e in mm||(mm[e]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[e]),mm[e]}function wm(){mm={}}!function(e){e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData"}(vm||(vm={}));var xm=["zero","one","two","few","many"];var Tm,Im="en-US",Rm={marker:"element"},km={marker:"ICU"};!function(e){e[e.SHIFT=2]="SHIFT",e[e.APPEND_EAGERLY=1]="APPEND_EAGERLY",e[e.COMMENT=2]="COMMENT"}(Tm||(Tm={}));var Om=Im;function Cm(e){mt(e,"Expected localeId to be defined"),"string"===typeof e&&(Om=e.toLowerCase().replace(/_/g,"-"))}function Am(e,t,n){var r=t.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?$c(e,0,n):(ngDevMode&&_t(n,i),zi(n[i]))}function Nm(e,t,n,r,i){var o=t.insertBeforeIndex;if(Array.isArray(o)){ngDevMode&&bt(r);var a=r,s=null;if(3&t.type||(s=a,a=i),null!==a&&-1===t.componentOffset)for(var c=1;c<o.length;c++){Yc(e,a,n[o[c]],s,!1)}}}function jm(e,t){if(ngDevMode&&ut(t.insertBeforeIndex,null,"We expect that insertBeforeIndex is not set"),e.push(t),e.length>1)for(var n=e.length-2;n>=0;n--){var r=e[n];Dm(r)||Pm(r,t)&&null===Lm(r)&&Mm(r,t.index)}}function Dm(e){return!(64&e.type)}function Pm(e,t){return Dm(t)||e.index>t.index}function Lm(e){var t=e.insertBeforeIndex;return Array.isArray(t)?t[0]:t}function Mm(e,t){var n=e.insertBeforeIndex;Array.isArray(n)?n[0]=t:(ru(Am,Nm),e.insertBeforeIndex=t)}function Um(e,t){var n=e.data[t];if(null===n||"string"===typeof n)return null;!ngDevMode||n.hasOwnProperty("tView")||n.hasOwnProperty("currentCaseLViewIndex")||yt("We expect to get 'null'|'TIcu'|'TIcuContainer', but got: "+n);var r=n.hasOwnProperty("currentCaseLViewIndex")?n:n.value;return ngDevMode&&Xr(r),r}function Vm(e,t,n){var r=Uh(e,n,64,null,null);return jm(t,r),r}function Fm(e,t){var n=t[e.currentCaseLViewIndex];return null===n?n:n<0?~n:n}function Bm(e){return e>>>17}function Gm(e){return(131070&e)>>>1}function qm(e){return 1&e}var Wm=0,Hm=0;function zm(e,t,n,r){ngDevMode&&bt(r);for(var i,o=n[yr],a=null,s=0;s<t.length;s++){var c=t[s];if("string"==typeof c){var u=t[++s];null===n[u]&&(ngDevMode&&ngDevMode.rendererCreateTextNode++,ngDevMode&&_t(n,u),n[u]=Mc(o,c))}else if("number"==typeof c)switch(1&c){case 0:var l=Bm(c);null===a&&(a=l,i=Xc(o,r));var d=void 0,h=void 0;if(l===a?(d=r,h=i):(d=null,h=zi(n[l])),null!==h){ngDevMode&&bt(h);var f=Gm(c);ngDevMode&&vt(f,Nr,"Missing ref");var p=n[f];ngDevMode&&bt(p),Yc(o,h,p,d,!1);var v=Um(e,f);if(null!==v&&"object"===typeof v){ngDevMode&&Xr(v);var g=Fm(v,n);null!==g&&zm(e,v.create[g],n,n[v.anchorIdx])}}break;case 1:var m=c>>>1,y=t[++s],b=t[++s];cf(o,Ki(m,n),null,null,y,b,null);break;default:if(ngDevMode)throw new Xe(700,'Unable to determine the type of mutate operation for "'.concat(c,'"'))}else switch(c){case km:var _=t[++s],E=t[++s];if(null===n[E])ngDevMode&&ut(typeof _,"string",'Expected "'.concat(_,'" to be a comment node value')),ngDevMode&&ngDevMode.rendererCreateComment++,ngDevMode&&ii(n,E),Sc(n[E]=Vc(o,_),n);break;case Rm:var S=t[++s],w=t[++s];if(null===n[w])ngDevMode&&ut(typeof S,"string",'Expected "'.concat(S,'" to be an element node tag name')),ngDevMode&&ngDevMode.rendererCreateElement++,ngDevMode&&ii(n,w),Sc(n[w]=Fc(o,S,null),n);break;default:ngDevMode&&yt('Unable to determine the type of mutate operation for "'.concat(c,'"'))}}}function Km(e,t,n,r,i){for(var o=0;o<n.length;o++){var a=n[o],s=n[++o];if(a&i)for(var c="",u=o+1;u<=o+s;u++){var l=n[u];if("string"==typeof l)c+=l;else if("number"==typeof l)if(l<0)c+=$e(t[r-l]);else{var d=l>>>2;switch(3&l){case 1:var h=n[++u],f=n[++u],p=e.data[d];ngDevMode&&mt(p,"Experting TNode or string"),"string"===typeof p?cf(t[yr],t[d],null,p,h,c,f):Xh(e,p,t,h,c,t[yr],f,!1);break;case 0:var v=t[d];null!==v&&Uc(t[yr],v,c);break;case 2:Zm(e,Um(e,d),t,c);break;case 3:Ym(e,Um(e,d),r,t)}}}else{var g=n[o+1];if(g>0&&3===(3&g)){var m=Um(e,g>>>2);t[m.currentCaseLViewIndex]<0&&Ym(e,m,r,t)}}o+=s}}function Ym(e,t,n,r){ngDevMode&&_t(r,t.currentCaseLViewIndex);var i=r[t.currentCaseLViewIndex];if(null!==i){var o=Wm;i<0&&(i=r[t.currentCaseLViewIndex]=~i,o=-1),Km(e,r,t.update[i],n,o)}}function Zm(e,t,n,r){var i=function(e,t){var n=e.cases.indexOf(t);if(-1===n)switch(e.type){case 1:var r=function(e,t){var n=Em(t)(parseInt(e,10)),r=xm[n];return void 0!==r?r:"other"}(t,Om);-1===(n=e.cases.indexOf(r))&&"other"!==r&&(n=e.cases.indexOf("other"));break;case 0:n=e.cases.indexOf("other")}return-1===n?null:n}(t,r);if(Fm(t,n)!==i&&(Jm(e,t,n),n[t.currentCaseLViewIndex]=null===i?null:~i,null!==i)){var o=n[t.anchorIdx];o&&(ngDevMode&&bt(o),zm(e,t.create[i],n,o))}}function Jm(e,t,n){var r=Fm(t,n);if(null!==r)for(var i=t.remove[r],o=0;o<i.length;o++){var a=i[o];if(a>0){var s=Ki(a,n);null!==s&&cu(n[yr],s)}else Jm(e,Um(e,~a),n)}}function Xm(){var e,t,n=[],r=-1;function i(e,n){r=0;var i=Fm(e,n);null!==i?(ngDevMode&&at(i,0,e.cases.length-1),t=e.remove[i]):t=mn}function o(){if(r<t.length){var a=t[r++];if(ngDevMode&&ot(a,"Expecting OpCode number"),a>0){var s=e[a];return ngDevMode&&bt(s),s}n.push(r,t);var c=~a,u=e[cr].data[c];return ngDevMode&&Xr(u),i(u,e),o()}return 0===n.length?null:(t=n.pop(),r=n.pop(),o())}return function(t,r){for(e=r;n.length;)n.pop();return ngDevMode&&Yr(t,r),i(t.value,r),o}}function Qm(e){for(var t=e||(Array.isArray(this)?this:[]),n=[],r=0;r<t.length;r++){var i=t[r++],o=t[r],a=(i&Tm.COMMENT)===Tm.COMMENT,s=(i&Tm.APPEND_EAGERLY)===Tm.APPEND_EAGERLY,c=i>>>Tm.SHIFT;n.push("lView[".concat(c,"] = document.").concat(a?"createComment":"createText","(").concat(JSON.stringify(o),");")),s&&n.push("parent.appendChild(lView[".concat(c,"]);"))}return n}function $m(e){var t=new ny(e||(Array.isArray(this)?this:[])),n=[];function r(e){var n=e>>>2;switch(3&e){case 0:return"(lView[".concat(n,"] as Text).textContent = $$$");case 1:var r=t.consumeString(),i=t.consumeFunction(),o=i?"(".concat(i,")($$$)"):"$$$";return"(lView[".concat(n,"] as Element).setAttribute('").concat(r,"', ").concat(o,")");case 2:return"icuSwitchCase(".concat(n,", $$$)");case 3:return"icuUpdateCase(".concat(n,")")}throw new Error("unexpected OpCode")}for(;t.hasMore();){for(var i=t.consumeNumber(),o=t.consumeNumber(),a=t.i+o,s=[],c="";t.i<a;){var u=t.consumeNumberOrString();if("string"===typeof u)c+=u;else if(u<0)c+="${lView[i"+u+"]}";else{var l=r(u);s.push(l.replace("$$$","`"+c+"`")+";"),c=""}}n.push("if (mask & 0b".concat(i.toString(2),") { ").concat(s.join(" ")," }"))}return n}function ey(e){var t=new ny(e||(Array.isArray(this)?this:[])),n=[];function r(e){var n=Bm(e),r=Gm(e);switch(qm(e)){case 0:return"(lView[".concat(n,"] as Element).appendChild(lView[").concat(i,"])");case 1:return"(lView[".concat(r,'] as Element).setAttribute("').concat(t.consumeString(),'", "').concat(t.consumeString(),'")')}throw new Error("Unexpected OpCode: "+qm(e))}for(var i=-1;t.hasMore();){var o=t.consumeNumberStringOrMarker();if(o===km){var a=t.consumeString();i=t.consumeNumber(),n.push("lView[".concat(i,'] = document.createComment("').concat(a,'")'))}else if(o===Rm){var s=t.consumeString();i=t.consumeNumber(),n.push("lView[".concat(i,'] = document.createElement("').concat(s,'")'))}else if("string"===typeof o)i=t.consumeNumber(),n.push("lView[".concat(i,'] = document.createTextNode("').concat(o,'")'));else{if("number"!==typeof o)throw new Error("Unexpected value");var c=r(o);c&&n.push(c)}}return n}function ty(e){for(var t=e||(Array.isArray(this)?this:[]),n=[],r=0;r<t.length;r++){var i=t[r];i>0?n.push("remove(lView[".concat(i,"])")):n.push("removeNestedICU(".concat(~i,")"))}return n}var ny=function(){function e(t){(0,v.Z)(this,e),this.i=0,this.codes=t}return(0,p.Z)(e,[{key:"hasMore",value:function(){return this.i<this.codes.length}},{key:"consumeNumber",value:function(){var e=this.codes[this.i++];return ot(e,"expecting number in OpCode"),e}},{key:"consumeString",value:function(){var e=this.codes[this.i++];return st(e,"expecting string in OpCode"),e}},{key:"consumeFunction",value:function(){var e=this.codes[this.i++];if(null===e||"function"===typeof e)return e;throw new Error("expecting function in OpCode")}},{key:"consumeNumberOrString",value:function(){var e=this.codes[this.i++];return"string"===typeof e||ot(e,"expecting number or string in OpCode"),e}},{key:"consumeNumberStringOrMarker",value:function(){var e=this.codes[this.i++];return"string"===typeof e||"number"===typeof e||e==km||e==Rm||ot(e,"expecting number, string, ICU_MARKER or ELEMENT_MARKER in OpCode"),e}}]),e}(),ry=/\ufffd(\d+):?\d*\ufffd/gi,iy=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,oy=/\ufffd(\d+)\ufffd/,ay=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,sy="\ufffd",cy=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,uy=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,ly=/\uE500/g;function dy(e,t){if(!ngDevMode)throw new Error("This method should be guarded with `ngDevMode` so that it can be tree shaken in production!");Object.defineProperty(e,"debug",{get:t,enumerable:!1})}function hy(e,t,n,r,i,o){var a=yo(),s=[],c=[],u=[[]];ngDevMode&&(dy(s,Qm),dy(c,$m)),i=function(e,t){if(function(e){return-1===e}(t))return yy(e);var n=e.indexOf(":".concat(t).concat(sy))+2+t.toString().length,r=e.search(new RegExp("".concat(sy,"\\/\\*\\d+:").concat(t).concat(sy)));return yy(e.substring(n,r))}(i,o);for(var l=function(e){return e.replace(ly," ")}(i).split(uy),d=0;d<l.length;d++){var h=l[d];if(0===(1&d))for(var f=Ey(h),p=0;p<f.length;p++){var v=f[p];if(0===(1&p)){var g=v;ngDevMode&&st(g,"Parsed ICU part should be string"),""!==g&&py(e,a,u[0],s,c,n,g)}else{var m=v;if("object"!==typeof m)throw new Error('Unable to parse ICU expression in "'.concat(i,'" message.'));var y=fy(e,a,u[0],n,s,ngDevMode?"ICU ".concat(r,":").concat(m.mainBinding):"",!0).index;ngDevMode&&gt(y,Nr,"Index must be in absolute LView offset"),by(e,n,c,t,m,y)}}else{var b=47===h.charCodeAt(0),_=h.charCodeAt(b?1:0);ngDevMode&&Et(_,42,35);var E=Nr+Number.parseInt(h.substring(b?2:1));if(b)u.shift(),bo(yo(),!1);else{var S=Vm(e,u[0],E);u.unshift([]),bo(S,!0)}}}e.data[r]={create:s,update:c}}function fy(e,t,n,r,i,o,a){var s,c=Vh(e,r,1,null),u=c<<Tm.SHIFT,l=yo();t===l&&(l=null),null===l&&(u|=Tm.APPEND_EAGERLY),a&&(u|=Tm.COMMENT,s=Xm,void 0===_c&&(_c=s())),i.push(u,null===o?"":o);var d=Uh(e,c,a?32:1,null===o?ngDevMode?"{{?}}":"":o,null);jm(n,d);var h=d.index;return bo(d,!1),null!==l&&t!==l&&function(e,t){ngDevMode&&Jr(e);var n=e.insertBeforeIndex;null===n?(ru(Am,Nm),n=e.insertBeforeIndex=[null,t]):(ut(Array.isArray(n),!0,"Expecting array here"),n.push(t))}(l,h),d}function py(e,t,n,r,i,o,a){var s=a.match(ry),c=fy(e,t,n,o,r,s?null:a,!1);s&&vy(i,a,c.index,null,0,null)}function vy(e,t,n,r,i,o){ngDevMode&&gt(n,Nr,"Index must be in absolute LView offset");var a=e.length,s=a+1;e.push(null,null);var c=a+2;ngDevMode&&dy(e,$m);for(var u=t.split(ry),l=0,d=0;d<u.length;d++){var h=u[d];if(1&d){var f=i+parseInt(h,10);e.push(-1-f),l|=my(f)}else""!==h&&e.push(h)}return e.push(n<<2|(r?1:0)),r&&e.push(r,o),e[a]=l,e[s]=e.length-c,l}function gy(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];"number"===typeof r&&r<0&&t++}return t}function my(e){return 1<<Math.min(e,31)}function yy(e){for(var t,n,r="",i=0,o=!1;null!==(t=cy.exec(e));)o?t[0]==="".concat(sy,"/*").concat(n).concat(sy)&&(i=t.index,o=!1):(r+=e.substring(i,t.index+t[0].length),n=t[1],o=!0);return ngDevMode&&ut(o,!1,'Tag mismatch: unable to find the end of the sub-template in the translation "'.concat(e,'"')),r+=e.slice(i)}function by(e,t,n,r,i,o){ngDevMode&&mt(i,"ICU expression must be defined");var a=0,s={type:i.type,currentCaseLViewIndex:Vh(e,t,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};!function(e,t,n){e.push(my(t.mainBinding),2,-1-t.mainBinding,n<<2|2)}(n,i,o),function(e,t,n){var r=e.data[t];ngDevMode&&ut(null===r||r.hasOwnProperty("tView"),!0,"We expect to get 'null'|'TIcuContainer'"),null===r?e.data[t]=n:(ngDevMode&&la(r,32),r.value=n)}(e,o,s);for(var c=i.values,u=0;u<c.length;u++){for(var l=c[u],d=[],h=0;h<l.length;h++){var f=l[h];if("string"!==typeof f){var p=d.push(f)-1;l[h]="\x3c!--\ufffd".concat(p,"\ufffd--\x3e")}}a=Sy(e,s,t,n,r,i.cases[u],l.join(""),d)|a}a&&function(e,t,n){e.push(t,1,n<<2|3)}(n,a,o)}function _y(e){for(var t=[],n=[],r=1,i=0,o=Ey(e=e.replace(ay,(function(e,t,n){return r="select"===n?0:1,i=parseInt(t.slice(1),10),""}))),a=0;a<o.length;){var s=o[a++].trim();1===r&&(s=s.replace(/\s*(?:=)?(\w+)\s*/,"$1")),s.length&&t.push(s);var c=Ey(o[a++]);t.length>n.length&&n.push(c)}return{type:r,mainBinding:i,cases:t,values:n}}function Ey(e){if(!e)return[];var t,n=0,r=[],i=[],o=/[{}]/g;for(o.lastIndex=0;t=o.exec(e);){var a=t.index;if("}"==t[0]){if(r.pop(),0==r.length){var s=e.substring(n,a);ay.test(s)?i.push(_y(s)):i.push(s),n=a+1}}else{if(0==r.length){var c=e.substring(n,a);i.push(c),n=a+1}r.push("{")}}var u=e.substring(n);return i.push(u),i}function Sy(e,t,n,r,i,o,a,s){var c=[],u=[],l=[];ngDevMode&&(dy(c,ey),dy(u,ty),dy(l,$m)),t.cases.push(o),t.create.push(c),t.remove.push(u),t.update.push(l);var d=Fu(Eu()).getInertBodyElement(a);ngDevMode&&mt(d,"Unable to generate inert body element");var h=hl(d)||d;return h?wy(e,t,n,r,c,u,l,h,i,s,0):0}function wy(e,t,n,r,i,o,a,s,c,u,l){for(var d=0,h=s.firstChild;h;){var f=Vh(e,n,1,null);switch(h.nodeType){case Node.ELEMENT_NODE:var p=h,v=p.tagName.toLowerCase();if(tl.hasOwnProperty(v)){Iy(i,Rm,v,c,f),e.data[f]=v;for(var g=p.attributes,m=0;m<g.length;m++){var y=g.item(m),b=y.name.toLowerCase();!!y.value.match(ry)?ol.hasOwnProperty(b)?nl[b]?vy(a,y.value,f,y.name,0,Wu):vy(a,y.value,f,y.name,0,null):ngDevMode&&console.warn("WARNING: ignoring unsafe attribute value "+"".concat(b," on element ").concat(v," ")+"(see ".concat(Je,")")):Ry(i,f,y)}d=wy(e,t,n,r,i,o,a,h,f,u,l+1)|d,xy(o,f,l)}break;case Node.TEXT_NODE:var _=h.textContent||"",E=_.match(ry);Iy(i,null,E?"":_,c,f),xy(o,f,l),E&&(d=vy(a,_,f,null,0,null)|d);break;case Node.COMMENT_NODE:var S=oy.exec(h.textContent||"");if(S){var w=parseInt(S[1],10),x=u[w];Iy(i,km,ngDevMode?"nested ICU ".concat(w):"",c,f),by(e,n,r,c,x,f),Ty(o,f,l)}}h=h.nextSibling}return d}function xy(e,t,n){0===n&&e.push(t)}function Ty(e,t,n){0===n&&(e.push(~t),e.push(t))}function Iy(e,t,n,r,i){var o,a,s;null!==t&&e.push(t),e.push(n,i,(o=0,a=r,s=i,ngDevMode&&gt(a,0,"Missing parent index"),ngDevMode&&vt(s,0,"Missing ref index"),o|a<<17|s<<1))}function Ry(e,t,n){e.push(t<<1|1,n.name,n.value)}var ky=0,Oy=/\[(\ufffd.+?\ufffd?)\]/,Cy=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,Ay=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,Ny=/{([A-Z0-9_]+)}/g,jy=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,Dy=/\/\*/,Py=/\d+\:(\d+)/;function Ly(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=fo(),i=ho(),o=Nr+e;ngDevMode&&mt(r,"tView should be defined");var a=$i(r.consts,t),s=yo();(r.firstCreatePass&&hy(r,null===s?0:s.index,i,o,a,n),2===r.type)?i[Sr][ur]|=32:i[ur]|=32;var c=r.data[o],u=Kc(r,s===i[fr]?null:s,i),l=s&&8&s.type?i[s.index]:null;!function(e,t,n,r){for(var i=e[yr],o=0;o<t.length;o++){var a=t[o++],s=t[o],c=(a&Tm.COMMENT)===Tm.COMMENT,u=(a&Tm.APPEND_EAGERLY)===Tm.APPEND_EAGERLY,l=a>>>Tm.SHIFT,d=e[l];null===d&&(d=e[l]=c?i.createComment(s):Mc(i,s)),u&&null!==n&&Yc(i,n,d,r,!1)}}(i,c.create,u,l),Oo(!0)}function My(){Oo(!1)}function Uy(e,t,n){Ly(e,t,n),My()}function Vy(e,t){var n=fo();ngDevMode&&mt(n,"tView should be defined");var r=$i(n.consts,t);!function(e,t,n){var r=go().index,i=[];if(ngDevMode&&dy(i,$m),e.firstCreatePass&&null===e.data[t]){for(var o=0;o<n.length;o+=2){var a=n[o],s=n[o+1];if(""!==s){if(iy.test(s))throw new Error('ICU expressions are not supported in attributes. Message: "'.concat(s,'".'));vy(i,s,r,a,gy(i),null)}}e.data[t]=i}}(n,e+Nr,r)}function Fy(e){var t=ho();return hp(t,Ro(),e)&&(Wm|=1<<Math.min(Hm,31)),Hm++,Fy}function By(e){!function(e,t,n){if(Hm>0){ngDevMode&&mt(e,"tView should be defined");var r=e.data[n];Km(e,t,Array.isArray(r)?r:r.update,To()-Hm-1,Wm)}Wm=0,Hm=0}(fo(),ho(),e+Nr)}function Gy(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if(Oy.test(e)){var r={},i=[ky];n=n.replace(Cy,(function(e,t,n){var o=t||n,a=r[o]||[];if(a.length||(o.split("|").forEach((function(e){var t=e.match(Py),n=t?parseInt(t[1],10):ky,r=Dy.test(e);a.push([n,r,e])})),r[o]=a),!a.length)throw new Error("i18n postprocess: unmatched placeholder - ".concat(o));for(var s=i[i.length-1],c=0,u=0;u<a.length;u++)if(a[u][0]===s){c=u;break}var l=(0,d.Z)(a[c],3),h=l[0],f=l[1],p=l[2];return f?i.pop():s!==h&&i.push(h),a.splice(c,1),p}))}return Object.keys(t).length?n=(n=(n=n.replace(Ay,(function(e,n,r,i,o,a){return t.hasOwnProperty(r)?"".concat(n).concat(t[r]).concat(a):e}))).replace(Ny,(function(e,n){return t.hasOwnProperty(n)?t[n]:e}))).replace(jy,(function(e,n){if(t.hasOwnProperty(n)){var r=t[n];if(!r.length)throw new Error("i18n postprocess: unmatched ICU - ".concat(e," with key: ").concat(n));return r.shift()}return e})):n}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function qy(e,t){}function Wy(e,t,n,r,i){if(e=ze(e),Array.isArray(e))for(var o=0;o<e.length;o++)Wy(e[o],t,n,r,i);else{var a=fo(),s=ho(),c=go(),u=Ul(e)?e:ze(e.provide),l=Kl(e);if(ngDevMode)Zt(new Pa(c,s),u,(function(){zt(e,i)}));var d=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(Ul(e)||!e.multi){var p=new ca(l,i,Dh),v=Ky(u,t,i?d:d+f,h);-1===v?(xa(_a(c,s),a,u),Hy(a,e,t.length),t.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(p),s.push(p)):(n[v]=p,s[v]=p)}else{var g=Ky(u,t,d+f,h),m=Ky(u,t,d,d+f),y=g>=0&&n[g],b=m>=0&&n[m];if(i&&!b||!i&&!y){xa(_a(c,s),a,u);var _=function(e,t,n,r,i){var o=new ca(e,n,Dh);return o.multi=[],o.index=t,o.componentProviders=0,zy(o,i,r&&!n),o}(i?Zy:Yy,n.length,i,r,l);!i&&b&&(n[m].providerFactory=_),Hy(a,e,t.length,0),t.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(_),s.push(_)}else{var E=zy(n[i?m:g],l,!i&&r);Hy(a,e,g>-1?g:m,E)}!i&&r&&b&&n[m].componentProviders++}}}function Hy(e,t,n,r){var i=Ul(t),o=!!t.useClass;if(i||o){var a=(o?ze(t.useClass):t).prototype.ngOnDestroy;if(a){var s=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){ngDevMode&&mt(r,"indexInFactory when registering multi factory destroy hook");var c=s.indexOf(n);-1===c?s.push(n,[r,a]):s[c+1].push(r,a)}else s.push(n,a)}}}function zy(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Ky(e,t,n,r){for(var i=n;i<r;i++)if(t[i]===e)return i;return-1}function Yy(e,t,n,r){return Jy(this.multi,[])}function Zy(e,t,n,r){var i,o=this.multi;if(this.providerFactory){var a=this.providerFactory.componentProviders,s=Aa(n,n[cr],this.providerFactory.index,r);Jy(o,i=s.slice(0,a));for(var c=a;c<s.length;c++)i.push(s[c])}else Jy(o,i=[]);return i}function Jy(e,t){for(var n=0;n<e.length;n++){var r=e[n];t.push(r())}return t}function Xy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(e,t,n){var r=fo();if(r.firstCreatePass){var i=Hr(e);Wy(n,r.data,r.blueprint,i,!0),Wy(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}}var Qy=(0,p.Z)((function e(){(0,v.Z)(this,e)})),$y=(0,p.Z)((function e(){(0,v.Z)(this,e)}));function eb(e,t){return new nb(e,null!==t&&void 0!==t?t:null,[])}var tb=eb,nb=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(e,r,i){var o;(0,v.Z)(this,n),(o=t.call(this))._parent=r,o._bootstrapComponents=[],o.destroyCbs=[],o.componentFactoryResolver=new Vf((0,c.Z)(o));var a=nr(e);return ngDevMode&&mt(a,"NgModule '".concat(Ge(e),"' is not a subtype of 'NgModuleType'.")),o._bootstrapComponents=sh(a.bootstrap),o._r3Injector=$d(e,r,[{provide:Qy,useValue:(0,c.Z)(o)},{provide:Dd,useValue:o.componentFactoryResolver}].concat((0,u.Z)(i)),Ge(e),new Set(["environment"])),o._r3Injector.resolveInjectorInitializers(),o.instance=o._r3Injector.get(e),o}return(0,p.Z)(n,[{key:"injector",get:function(){return this._r3Injector}},{key:"destroy",value:function(){ngDevMode&&mt(this.destroyCbs,"NgModule already destroyed");var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null}},{key:"onDestroy",value:function(e){ngDevMode&&mt(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(e)}}]),n}(Qy),rb=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(e){var r;return(0,v.Z)(this,n),(r=t.call(this)).moduleType=e,r}return(0,p.Z)(n,[{key:"create",value:function(e){return new nb(this.moduleType,e,[])}}]),n}($y);var ib=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(e){var r;(0,v.Z)(this,n),(r=t.call(this)).componentFactoryResolver=new Vf((0,c.Z)(r)),r.instance=null;var i=new Hl([].concat((0,u.Z)(e.providers),[{provide:Qy,useValue:(0,c.Z)(r)},{provide:Dd,useValue:r.componentFactoryResolver}]),e.parent||ql(),e.debugName,new Set(["environment"]));return r.injector=i,e.runEnvironmentInitializers&&i.resolveInjectorInitializers(),r}return(0,p.Z)(n,[{key:"destroy",value:function(){this.injector.destroy()}},{key:"onDestroy",value:function(e){this.injector.onDestroy(e)}}]),n}(Qy);function ob(e,t){return new ib({providers:e,parent:t,debugName:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,runEnvironmentInitializers:!0}).injector}var ab=function(){function e(t){(0,v.Z)(this,e),this._injector=t,this.cachedInjectors=new Map}return(0,p.Z)(e,[{key:"getOrCreateStandaloneInjector",value:function(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){var t=Ol(!1,e.type),n=t.length>0?ob([t],this._injector,"Standalone[".concat(e.type.name,"]")):null;this.cachedInjectors.set(e,n)}return this.cachedInjectors.get(e)}},{key:"ngOnDestroy",value:function(){try{var e,t=(0,h.Z)(this.cachedInjectors.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;null!==n&&n.destroy()}}catch(r){t.e(r)}finally{t.f()}}finally{this.cachedInjectors.clear()}}}]),e}();function sb(e){e.getStandaloneInjector=function(t){return t.get(ab).getOrCreateStandaloneInjector(e)}}function cb(e){ngDevMode&&bb(e);var t=mc(e);if(null===t)return null;if(void 0===t.component){var n=t.lView;if(null===n)return null;t.component=function(e,t){var n=t[cr].data[e],r=n.directiveStart,i=n.componentOffset;return i>-1?t[r+i]:null}(t.nodeIndex,n)}return t.component}function ub(e){bb(e);var t=mc(e),n=t?t.lView:null;return null===n?null:n[vr]}function lb(e){var t,n=mc(e),r=n?n.lView:null;if(null===r)return null;for(;2===r[cr].type&&(t=Ac(r));)r=t;return 512&r[ur]?null:r[vr]}function db(e){var t=xc(e);return null!==t?[Nc(t)]:[]}function hb(e){var t=mc(e),n=t?t.lView:null;if(null===n)return eh.NULL;var r=n[cr].data[t.nodeIndex];return new Pa(r,n)}function fb(e){if(e instanceof Text)return[];var t=mc(e),n=t?t.lView:null;if(null===n)return[];var r=n[cr],i=t.nodeIndex;return null!==r&&void 0!==r&&r.data[i]?(void 0===t.directives&&(t.directives=Oc(i,n)),null===t.directives?[]:(0,u.Z)(t.directives)):[]}function pb(e){var t=e.constructor;if(!t)throw new Error("Unable to find the instance constructor");var n=Qn(t);if(n)return{inputs:n.inputs,outputs:n.outputs,encapsulation:n.encapsulation,changeDetection:n.onPush?Jt.OnPush:Jt.Default};var r=$n(t);return r?{inputs:r.inputs,outputs:r.outputs}:null}function vb(e){var t=mc(e);if(null===t)return{};if(void 0===t.localRefs){var n=t.lView;if(null===n)return{};t.localRefs=function(e,t){var n=e[cr].data[t];if(n&&n.localNames){for(var r={},i=n.index+1,o=0;o<n.localNames.length;o+=2)r[n.localNames[o]]=e[i],i++;return r}return null}(n,t.nodeIndex)}return t.localRefs||{}}function gb(e){return mc(e).native}function mb(e){ngDevMode&&bb(e);var t=mc(e),n=null===t?null:t.lView;if(null===n)return[];var r=n[cr],i=n[pr],o=r.cleanup,a=[];if(o&&i)for(var s=0;s<o.length;){var c=o[s++],u=o[s++];if("string"===typeof c){var l=c,d=zi(n[u]),h=i[o[s++]],f=o[s++],p="boolean"===typeof f||f>=0?"dom":"output",v="boolean"===typeof f&&f;e==d&&a.push({element:e,name:l,callback:h,useCapture:v,type:p})}}return a.sort(yb),a}function yb(e,t){return e.name==t.name?0:e.name<t.name?-1:1}function bb(e){if("undefined"!==typeof Element&&!(e instanceof Element))throw new Error("Expecting instance of DOM Element")}function _b(e,t,n,r){return vn((function(){var i,o=e;null!==t&&(o.hasOwnProperty("decorators")&&void 0!==o.decorators?(i=o.decorators).push.apply(i,(0,u.Z)(t)):o.decorators=t);null!==n&&(o.ctorParameters=n),null!==r&&(o.hasOwnProperty("propDecorators")&&void 0!==o.propDecorators?o.propDecorators=(0,f.Z)((0,f.Z)({},o.propDecorators),r):o.propDecorators=r)}))}function Eb(e,t,n){var r=xo()+e,i=ho();return i[r]===Ah?lp(i,r,n?t.call(n):t()):dp(i,r)}function Sb(e,t,n,r){return Nb(ho(),xo(),e,t,n,r)}function wb(e,t,n,r,i){return jb(ho(),xo(),e,t,n,r,i)}function xb(e,t,n,r,i,o){return Db(ho(),xo(),e,t,n,r,i,o)}function Tb(e,t,n,r,i,o,a){return Pb(ho(),xo(),e,t,n,r,i,o,a)}function Ib(e,t,n,r,i,o,a,s){var c=xo()+e,u=ho(),l=vp(u,c,n,r,i,o);return hp(u,c+4,a)||l?lp(u,c+5,s?t.call(s,n,r,i,o,a):t(n,r,i,o,a)):dp(u,c+5)}function Rb(e,t,n,r,i,o,a,s,c){var u=xo()+e,l=ho(),d=vp(l,u,n,r,i,o);return fp(l,u+4,a,s)||d?lp(l,u+6,c?t.call(c,n,r,i,o,a,s):t(n,r,i,o,a,s)):dp(l,u+6)}function kb(e,t,n,r,i,o,a,s,c,u){var l=xo()+e,d=ho(),h=vp(d,l,n,r,i,o);return pp(d,l+4,a,s,c)||h?lp(d,l+7,u?t.call(u,n,r,i,o,a,s,c):t(n,r,i,o,a,s,c)):dp(d,l+7)}function Ob(e,t,n,r,i,o,a,s,c,u,l){var d=xo()+e,h=ho(),f=vp(h,d,n,r,i,o);return vp(h,d+4,a,s,c,u)||f?lp(h,d+8,l?t.call(l,n,r,i,o,a,s,c,u):t(n,r,i,o,a,s,c,u)):dp(h,d+8)}function Cb(e,t,n,r){return Lb(ho(),xo(),e,t,n,r)}function Ab(e,t){ngDevMode&&_t(e,t);var n=e[t];return n===Ah?void 0:n}function Nb(e,t,n,r,i,o){var a=t+n;return hp(e,a,i)?lp(e,a+1,o?r.call(o,i):r(i)):Ab(e,a+1)}function jb(e,t,n,r,i,o,a){var s=t+n;return fp(e,s,i,o)?lp(e,s+2,a?r.call(a,i,o):r(i,o)):Ab(e,s+2)}function Db(e,t,n,r,i,o,a,s){var c=t+n;return pp(e,c,i,o,a)?lp(e,c+3,s?r.call(s,i,o,a):r(i,o,a)):Ab(e,c+3)}function Pb(e,t,n,r,i,o,a,s,c){var u=t+n;return vp(e,u,i,o,a,s)?lp(e,u+4,c?r.call(c,i,o,a,s):r(i,o,a,s)):Ab(e,u+4)}function Lb(e,t,n,r,i,o){for(var a=t+n,s=!1,c=0;c<i.length;c++)hp(e,a++,i[c])&&(s=!0);return s?lp(e,a,r.apply(o,i)):Ab(e,a)}function Mb(e,t){var n,r,i=fo(),o=e+Nr;i.firstCreatePass?(n=function(e,t){if(t){if(ngDevMode){var n=t.filter((function(t){return t.name===e}));n.length>1&&console.warn(Qe(313,function(e){var t=ho(),n=t[Sr][vr],r=$s(t),i=n?" in the '".concat(n.constructor.name,"' component"):"",o="check ".concat(r?"'@Component.imports' of this component":"the imports of this module"),a="Multiple pipes match the name `".concat(e,"`").concat(i,". ").concat(o);return a}(e)))}for(var r=t.length-1;r>=0;r--){var i=t[r];if(e===i.name)return i}}if(ngDevMode)throw new Xe(-302,function(e){var t=ho(),n=t[Sr][vr],r=$s(t),i=n?" in the '".concat(n.constructor.name,"' component"):"",o="Verify that it is ".concat(r?"included in the '@Component.imports' of this component":"declared or imported in this module"),a="The pipe '".concat(e,"' could not be found").concat(i,". ").concat(o);return a}(e))}(t,i.pipeRegistry),i.data[o]=n,n.onDestroy&&(null!==(r=i.destroyHooks)&&void 0!==r?r:i.destroyHooks=[]).push(o,n.onDestroy)):n=i.data[o];var a,s=n.factory||(n.factory=ci(n.type,!0));ngDevMode&&(a=Gt({injector:new Pa(go(),ho()),token:n.type}));var c=Lt(Dh);try{var u=va(!1),l=s();return va(u),sv(i,ho(),o,l),l}finally{Lt(c),ngDevMode&&Gt(a)}}function Ub(e,t,n){var r=e+Nr,i=ho(),o=Ji(i,r);return qb(i,r)?Nb(i,xo(),t,o.transform,n,o):o.transform(n)}function Vb(e,t,n,r){var i=e+Nr,o=ho(),a=Ji(o,i);return qb(o,i)?jb(o,xo(),t,a.transform,n,r,a):a.transform(n,r)}function Fb(e,t,n,r,i){var o=e+Nr,a=ho(),s=Ji(a,o);return qb(a,o)?Db(a,xo(),t,s.transform,n,r,i,s):s.transform(n,r,i)}function Bb(e,t,n,r,i,o){var a=e+Nr,s=ho(),c=Ji(s,a);return qb(s,a)?Pb(s,xo(),t,c.transform,n,r,i,o,c):c.transform(n,r,i,o)}function Gb(e,t,n){var r=e+Nr,i=ho(),o=Ji(i,r);return qb(i,r)?Lb(i,xo(),t,o.transform,n,o):o.transform.apply(o,n)}function qb(e,t){return e[cr].data[t].pure}ab.\u0275prov=St({token:ab,providedIn:"environment",factory:function(){return new ab(cn(Wl))}});var Wb=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,v.Z)(this,n),(e=t.call(this)).__isAsync=r,e}return(0,p.Z)(n,[{key:"emit",value:function(e){o((0,i.Z)(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,r){var a=e,s=t||function(){return null},c=r;if(e&&"object"===typeof e){var u,l,d,h=e;a=null===(u=h.next)||void 0===u?void 0:u.bind(h),s=null===(l=h.error)||void 0===l?void 0:l.bind(h),c=null===(d=h.complete)||void 0===d?void 0:d.bind(h)}this.__isAsync&&(s=Hb(s),a&&(a=Hb(a)),c&&(c=Hb(c)));var f=o((0,i.Z)(n.prototype),"subscribe",this).call(this,{next:a,error:s,complete:c});return e instanceof j&&e.add(f),f}}]),n}(oe);function Hb(e){return function(t){setTimeout(e,void 0,t)}}var zb=Wb;function Kb(){return this._results[Symbol.iterator]()}var Yb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,v.Z)(this,e),this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Kb)}return(0,p.Z)(e,[{key:"changes",get:function(){return this._changes||(this._changes=new zb)}},{key:"get",value:function(e){return this._results[e]}},{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e,t){var n=this;n.dirty=!1;var r=as(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}},{key:"notifyOnChanges",value:function(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}();function Zb(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t[cr];if(Bc(i,t,e,n),r){var o=su(n,e),a=t[yr],s=Xc(a,e[Pr]);null!==s&&function(e,t,n,r,i,o){r[sr]=i,r[fr]=t,du(e,r,n,1,i,o)}(i,e[fr],a,t,s,o)}}Symbol.iterator;var Jb=(0,p.Z)((function e(){(0,v.Z)(this,e)}));Jb.__NG_ELEMENT_ID__=function(){return Qb(go(),ho())};var Xb=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(e,r,i){var o;return(0,v.Z)(this,n),(o=t.call(this))._declarationLView=e,o._declarationTContainer=r,o.elementRef=i,o}return(0,p.Z)(n,[{key:"ssrId",get:function(){var e;return(null===(e=this._declarationTContainer.tView)||void 0===e?void 0:e.ssrId)||null}},{key:"createEmbeddedView",value:function(e,t){return this.createEmbeddedViewImpl(e,t)}},{key:"createEmbeddedViewImpl",value:function(e,t,n){var r=function(e,t,n,r){var i,o,a=t.tView;ngDevMode&&mt(a,"TView must be defined for a template node."),ngDevMode&&Yr(t,e);var s=Lh(e,a,n,4096&e[ur]?4096:16,null,t,null,null,null,null!==(i=null===r||void 0===r?void 0:r.injector)&&void 0!==i?i:null,null!==(o=null===r||void 0===r?void 0:r.hydrationInfo)&&void 0!==o?o:null),c=e[t.index];ngDevMode&&$r(c),s[wr]=c;var u=e[Tr];return null!==u&&(s[Tr]=u.createEmbeddedView(a)),xf(a,s,n),s}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:n});return new Mf(r)}}]),n}(Jb);function Qb(e,t){return 4&e.type?(ngDevMode&&mt(e.tView,"TView must be allocated"),new Xb(t,e,Pd(e,t))):null}function $b(e){var t,n,r=null!==(t=e[Ur])&&void 0!==t?t:[],i=e[lr][yr],o=(0,h.Z)(r);try{for(o.s();!(n=o.n()).done;){e_(n.value,i),ngDevMode&&ngDevMode.dehydratedViewsRemoved++}}catch(a){o.e(a)}finally{o.f()}e[Ur]=mn}function e_(e,t){var n=0,r=e.firstChild;if(r)for(var i=e.data[fd];n<i;){ngDevMode&&Mp(r);var o=r.nextSibling;cu(t,r,!1),r=o,n++}}function t_(e){$b(e);for(var t=Vr;t<e.length;t++)n_(e[t])}function n_(e){for(var t=e[cr],n=Nr;n<t.bindingStartIndex;n++){if(Br(e[n]))t_(e[n]);else Array.isArray(e[n])&&n_(e[n])}}var r_=function(e,t){return null};function i_(e,t){var n,r=null!==(n=e[Ur])&&void 0!==n?n:[];return t&&0!==r.length?r[0].data[pd]===t?r.shift():($b(e),null):null}function o_(e,t){return r_(e,t)}var a_=(0,p.Z)((function e(){(0,v.Z)(this,e)}));a_.__NG_ELEMENT_ID__=function(){return l_(go(),ho())};var s_=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(e,r,i){var o;return(0,v.Z)(this,n),(o=t.call(this))._lContainer=e,o._hostTNode=r,o._hostLView=i,o}return(0,p.Z)(n,[{key:"element",get:function(){return Pd(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new Pa(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var e=wa(this._hostTNode,this._hostLView);if(da(e)){var t=fa(e,this._hostLView),n=ha(e);ngDevMode&&si(t,n);var r=t[cr].data[n+8];return new Pa(r,t)}return new Pa(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){var t=c_(this._lContainer);return null!==t&&t[e]||null}},{key:"length",get:function(){return this._lContainer.length-Vr}},{key:"createEmbeddedView",value:function(e,t,n){var r,i;"number"===typeof n?r=n:null!=n&&(r=n.index,i=n.injector);var o=o_(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},i,o),s=!!o&&!sc(this._hostTNode);return this.insertImpl(a,r,s),a}},{key:"createComponent",value:function(e,t,n,r,i){var o,a,s,c,u=e&&!os(e);if(u)ngDevMode&&ut("object"!==typeof t,!0,"It looks like Component factory was provided as the first argument and an options object as the second argument. This combination of arguments is incompatible. You can either change the first argument to provide Component type or change the second argument to be a number (representing an index at which to insert the new component's host view into this container)"),c=t;else{ngDevMode&&(mt(Qn(e),"Provided Component class doesn't contain Component definition. Please check whether provided class has @Component decorator."),ut("number"!==typeof t,!0,"It looks like Component type was provided as the first argument and a number (representing an index at which to insert the new component's host view into this container as the second argument. This combination of arguments is incompatible. Please use an object as the second argument instead."));var l=t||{};ngDevMode&&l.environmentInjector&&l.ngModuleRef&&yt("Cannot pass both environmentInjector and ngModuleRef options to createComponent()."),c=l.index,n=l.injector,r=l.projectableNodes,i=l.environmentInjector||l.ngModuleRef}var d=u?e:new Gf(Qn(e)),h=n||this.parentInjector;if(!i&&null==d.ngModule){var f=(u?h:this.parentInjector).get(Wl,null);f&&(i=f)}var p=Qn(null!==(o=d.componentType)&&void 0!==o?o:{}),v=o_(this._lContainer,null!==(a=null===p||void 0===p?void 0:p.id)&&void 0!==a?a:null),g=null!==(s=null===v||void 0===v?void 0:v.firstChild)&&void 0!==s?s:null,m=d.create(h,r,g,i),y=!!v&&!sc(this._hostTNode);return this.insertImpl(m.hostView,c,y),m}},{key:"insert",value:function(e,t){return this.insertImpl(e,t,!1)}},{key:"insertImpl",value:function(e,t,n){var r=e._lView;r[cr];if(ngDevMode&&e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(Br(r[lr])){var i=this.indexOf(e);if(-1!==i)this.detach(i);else{var o=r[lr];ngDevMode&&ut(Br(o),!0,"An attached view should have its PARENT point to a container.");var a=new s_(o,o[fr],o[lr]);a.detach(a.indexOf(e))}}var s=this._adjustIndex(t),c=this._lContainer;return Zb(c,r,s,!n),e.attachToViewContainerRef(),cs(u_(c),s,e),e}},{key:"move",value:function(e,t){if(ngDevMode&&e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=c_(this._lContainer);return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){var t=this._adjustIndex(e,-1),n=qc(this._lContainer,t);n&&(us(u_(this._lContainer),t),Wc(n[cr],n))}},{key:"detach",value:function(e){var t=this._adjustIndex(e,-1),n=qc(this._lContainer,t);return n&&null!=us(u_(this._lContainer),t)?new Mf(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:(ngDevMode&&(vt(e,-1,"ViewRef index must be positive, got ".concat(e)),ft(e,this.length+1+t,"index")),e)}}]),n}(a_);function c_(e){return e[Lr]}function u_(e){return e[Lr]||(e[Lr]=[])}function l_(e,t){var n;ngDevMode&&la(e,15);var r=t[e.index];return Br(r)?n=r:(n=hf(r,t,null,e),t[e.index]=n,pf(t,n)),d_(n,t,e,r),new s_(n,e,t)}var d_=h_;function h_(e,t,n,r){var i;e[Pr]||(i=8&n.type?zi(r):function(e,t){var n=e[yr];ngDevMode&&ngDevMode.rendererCreateComment++;var r=n.createComment(ngDevMode?"container":""),i=Yi(t,e);return Yc(n,Xc(n,i),r,function(e,t){return e.nextSibling(t)}(n,i),!1),r}(t,n),e[Pr]=i)}function f_(e,t,n,r){var i;if(!e[Pr]||!e[Ur]){var o=t[Or],a=n.index-Nr,s=cc(n)||sc(n);if(!o||s||Od(o,a))return h_(e,t,n,r);var c=Id(o,a),u=null===(i=o.data[dd])||void 0===i?void 0:i[a];ngDevMode&&mt(u,"Unexpected state: no hydration info available for a given TNode, which represents a view container.");var l=function(e,t){var n,r=[],i=(0,h.Z)(t);try{for(i.s();!(n=i.n()).done;)for(var o=n.value,a=0;a<(null!==(s=o[hd])&&void 0!==s?s:1);a++){var s,c={data:o,firstChild:null};o[fd]>0&&(c.firstChild=e,e=Qp(o[fd],e)),r.push(c)}}catch(u){i.e(u)}finally{i.f()}return[e,r]}(c,u),f=(0,d.Z)(l,2),p=f[0],v=f[1];ngDevMode&&(Lp(p,Node.COMMENT_NODE,null,t,n,!0),xd(p,!1)),e[Pr]=p,e[Ur]=v}}var p_=function(){function e(t){(0,v.Z)(this,e),this.queryList=t,this.matches=null}return(0,p.Z)(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),v_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,v.Z)(this,e),this.queries=t}return(0,p.Z)(e,[{key:"createEmbeddedView",value:function(t){var n=t.queries;if(null!==n){for(var r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[],o=0;o<r;o++){var a=n.getByIndex(o),s=this.queries[a.indexInDeclarationView];i.push(s.clone())}return new e(i)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==O_(e,t).matches&&this.queries[t].setDirty()}}]),e}(),g_=(0,p.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,v.Z)(this,e),this.predicate=t,this.flags=n,this.read=r})),m_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,v.Z)(this,e),this.queries=t}return(0,p.Z)(e,[{key:"elementStart",value:function(e,t){ngDevMode&&ni(e,"Queries should collect results on the first template pass only");for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new e(n):null}},{key:"template",value:function(e,t){ngDevMode&&ni(e,"Queries should collect results on the first template pass only");for(var n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}},{key:"getByIndex",value:function(e){return ngDevMode&&_t(this.queries,e),this.queries[e]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(e){this.queries.push(e)}}]),e}(),y_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,v.Z)(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return(0,p.Z)(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&1!==(1&this.metadata.flags)){for(var t=this._declarationNodeIndex,n=e.parent;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(e,t,b_(t,i)),this.matchTNodeWithReadOption(e,t,Ca(t,e,i,!1,!1))}else n===Jb?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ca(t,e,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(e,t,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===Ld||r===a_||r===Jb&&4&t.type)this.addMatch(t.index,-2);else{var i=Ca(t,e,r,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,n)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function b_(e,t){var n=e.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function __(e,t,n,r){return-1===n?function(e,t){return 11&e.type?Pd(e,t):4&e.type?Qb(e,t):null}(t,e):-2===n?function(e,t,n){if(n===Ld)return Pd(t,e);if(n===Jb)return Qb(t,e);if(n===a_)return ngDevMode&&la(t,15),l_(t,e);ngDevMode&&yt("Special token to read should be one of ElementRef, TemplateRef or ViewContainerRef but got ".concat(Ge(n),"."))}(e,t,r):Aa(e,e[cr],n,t)}function E_(e,t,n,r){var i=t[Tr].queries[r];if(null===i.matches){for(var o=e.data,a=n.matches,s=[],c=0;c<a.length;c+=2){var u=a[c];if(u<0)s.push(null);else{ngDevMode&&_t(o,u);var l=o[u];s.push(__(t,l,a[c+1],n.metadata.read))}}i.matches=s}return i.matches}function S_(e,t,n,r){var i=e.queries.getByIndex(n),o=i.matches;if(null!==o)for(var a=E_(e,t,i,n),s=0;s<o.length;s+=2){var c=o[s];if(c>0)r.push(a[s/2]);else{var u=o[s+1],l=t[-c];ngDevMode&&$r(l);for(var d=Vr;d<l.length;d++){var h=l[d];h[wr]===h[lr]&&S_(h[cr],h,u,r)}if(null!==l[Mr])for(var f=l[Mr],p=0;p<f.length;p++){var v=f[p];S_(v[cr],v,u,r)}}}return r}function w_(e){var t=ho(),n=fo(),r=jo();Do(r+1);var i=O_(n,r);if(e.dirty&&Qi(t)===(2===(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{var o=i.crossesNgTemplate?S_(n,t,r,[]):E_(n,t,i,r);e.reset(o,Md),e.notifyOnChanges()}return!0}return!1}function x_(e,t,n){ngDevMode&&ot(t,"Expecting flags");var r=fo();r.firstCreatePass&&(k_(r,new g_(e,t,n),-1),2===(2&t)&&(r.staticViewQueries=!0)),R_(r,ho(),t)}function T_(e,t,n,r){ngDevMode&&ot(n,"Expecting flags");var i=fo();if(i.firstCreatePass){var o=go();k_(i,new g_(t,n,r),o.index),function(e,t){var n=e.contentQueries||(e.contentQueries=[]),r=n.length?n[n.length-1]:-1;t!==r&&n.push(e.queries.length-1,t)}(i,e),2===(2&n)&&(i.staticContentQueries=!0)}R_(i,ho(),n)}function I_(){return e=ho(),t=jo(),ngDevMode&&mt(e[Tr],"LQueries should be defined when trying to load a query"),ngDevMode&&_t(e[Tr].queries,t),e[Tr].queries[t].queryList;var e,t}function R_(e,t,n){var r=new Yb(4===(4&n));!function(e,t,n,r){var i=mf(t);ngDevMode&&mt(n,"Cleanup context is mandatory when registering framework-level destroy hooks"),i.push(n),e.firstCreatePass?yf(e).push(r,i.length-1):ngDevMode&&Object.freeze(yf(e))}(e,t,r,r.destroy),null===t[Tr]&&(t[Tr]=new v_),t[Tr].queries.push(new p_(r))}function k_(e,t,n){null===e.queries&&(e.queries=new m_),e.queries.track(new y_(t,n))}function O_(e,t){return ngDevMode&&mt(e.queries,"TQueries must be defined to retrieve a TQuery"),e.queries.getByIndex(t)}function C_(e,t){return Qb(e,t)}var A_={"\u0275\u0275attribute":gp,"\u0275\u0275attributeInterpolate1":Ip,"\u0275\u0275attributeInterpolate2":Rp,"\u0275\u0275attributeInterpolate3":kp,"\u0275\u0275attributeInterpolate4":Op,"\u0275\u0275attributeInterpolate5":Cp,"\u0275\u0275attributeInterpolate6":Ap,"\u0275\u0275attributeInterpolate7":Np,"\u0275\u0275attributeInterpolate8":jp,"\u0275\u0275attributeInterpolateV":Dp,"\u0275\u0275defineComponent":qn,"\u0275\u0275defineDirective":Jn,"\u0275\u0275defineInjectable":St,"\u0275\u0275defineInjector":xt,"\u0275\u0275defineNgModule":Kn,"\u0275\u0275definePipe":Xn,"\u0275\u0275directiveInject":Dh,"\u0275\u0275getInheritedFactory":Ma,"\u0275\u0275inject":cn,"\u0275\u0275injectAttribute":Fa,"\u0275\u0275invalidFactory":Ph,"\u0275\u0275invalidFactoryDep":un,"\u0275\u0275templateRefExtractor":C_,"\u0275\u0275resetView":vo,"\u0275\u0275HostDirectivesFeature":ep,"\u0275\u0275NgOnChangesFeature":Pi,"\u0275\u0275ProvidersFeature":Xy,"\u0275\u0275CopyDefinitionFeature":$f,"\u0275\u0275InheritDefinitionFeature":zf,"\u0275\u0275InputTransformsFeature":ap,"\u0275\u0275StandaloneFeature":sb,"\u0275\u0275nextContext":Ov,"\u0275\u0275namespaceHTML":Zo,"\u0275\u0275namespaceMathML":Yo,"\u0275\u0275namespaceSVG":Ko,"\u0275\u0275enableBindings":uo,"\u0275\u0275disableBindings":lo,"\u0275\u0275elementStart":dv,"\u0275\u0275elementEnd":hv,"\u0275\u0275element":fv,"\u0275\u0275elementContainerStart":gv,"\u0275\u0275elementContainerEnd":mv,"\u0275\u0275elementContainer":yv,"\u0275\u0275pureFunction0":Eb,"\u0275\u0275pureFunction1":Sb,"\u0275\u0275pureFunction2":wb,"\u0275\u0275pureFunction3":xb,"\u0275\u0275pureFunction4":Tb,"\u0275\u0275pureFunction5":Ib,"\u0275\u0275pureFunction6":Rb,"\u0275\u0275pureFunction7":kb,"\u0275\u0275pureFunction8":Ob,"\u0275\u0275pureFunctionV":Cb,"\u0275\u0275getCurrentView":Ev,"\u0275\u0275restoreView":po,"\u0275\u0275listener":xv,"\u0275\u0275projection":Nv,"\u0275\u0275syntheticHostProperty":fm,"\u0275\u0275syntheticHostListener":Tv,"\u0275\u0275pipeBind1":Ub,"\u0275\u0275pipeBind2":Vb,"\u0275\u0275pipeBind3":Fb,"\u0275\u0275pipeBind4":Bb,"\u0275\u0275pipeBindV":Gb,"\u0275\u0275projectionDef":Av,"\u0275\u0275hostProperty":hm,"\u0275\u0275property":uv,"\u0275\u0275propertyInterpolate":jv,"\u0275\u0275propertyInterpolate1":Dv,"\u0275\u0275propertyInterpolate2":Pv,"\u0275\u0275propertyInterpolate3":Lv,"\u0275\u0275propertyInterpolate4":Mv,"\u0275\u0275propertyInterpolate5":Uv,"\u0275\u0275propertyInterpolate6":Vv,"\u0275\u0275propertyInterpolate7":Fv,"\u0275\u0275propertyInterpolate8":Bv,"\u0275\u0275propertyInterpolateV":Gv,"\u0275\u0275pipe":Mb,"\u0275\u0275queryRefresh":w_,"\u0275\u0275viewQuery":x_,"\u0275\u0275loadQuery":I_,"\u0275\u0275contentQuery":T_,"\u0275\u0275reference":cv,"\u0275\u0275classMap":hg,"\u0275\u0275classMapInterpolate1":Vg,"\u0275\u0275classMapInterpolate2":Fg,"\u0275\u0275classMapInterpolate3":Bg,"\u0275\u0275classMapInterpolate4":Gg,"\u0275\u0275classMapInterpolate5":qg,"\u0275\u0275classMapInterpolate6":Wg,"\u0275\u0275classMapInterpolate7":Hg,"\u0275\u0275classMapInterpolate8":zg,"\u0275\u0275classMapInterpolateV":Kg,"\u0275\u0275styleMap":lg,"\u0275\u0275styleMapInterpolate1":Yg,"\u0275\u0275styleMapInterpolate2":Zg,"\u0275\u0275styleMapInterpolate3":Jg,"\u0275\u0275styleMapInterpolate4":Xg,"\u0275\u0275styleMapInterpolate5":Qg,"\u0275\u0275styleMapInterpolate6":$g,"\u0275\u0275styleMapInterpolate7":em,"\u0275\u0275styleMapInterpolate8":tm,"\u0275\u0275styleMapInterpolateV":nm,"\u0275\u0275styleProp":cg,"\u0275\u0275stylePropInterpolate1":rm,"\u0275\u0275stylePropInterpolate2":im,"\u0275\u0275stylePropInterpolate3":om,"\u0275\u0275stylePropInterpolate4":am,"\u0275\u0275stylePropInterpolate5":sm,"\u0275\u0275stylePropInterpolate6":cm,"\u0275\u0275stylePropInterpolate7":um,"\u0275\u0275stylePropInterpolate8":lm,"\u0275\u0275stylePropInterpolateV":dm,"\u0275\u0275classProp":ug,"\u0275\u0275advance":Nh,"\u0275\u0275template":rv,"\u0275\u0275defer":qy,"\u0275\u0275text":Ig,"\u0275\u0275textInterpolate":Og,"\u0275\u0275textInterpolate1":Cg,"\u0275\u0275textInterpolate2":Ag,"\u0275\u0275textInterpolate3":Ng,"\u0275\u0275textInterpolate4":jg,"\u0275\u0275textInterpolate5":Dg,"\u0275\u0275textInterpolate6":Pg,"\u0275\u0275textInterpolate7":Lg,"\u0275\u0275textInterpolate8":Mg,"\u0275\u0275textInterpolateV":Ug,"\u0275\u0275i18n":Uy,"\u0275\u0275i18nAttributes":Vy,"\u0275\u0275i18nExp":Fy,"\u0275\u0275i18nStart":Ly,"\u0275\u0275i18nEnd":My,"\u0275\u0275i18nApply":By,"\u0275\u0275i18nPostprocess":Gy,"\u0275\u0275resolveWindow":rh,"\u0275\u0275resolveDocument":ih,"\u0275\u0275resolveBody":oh,"\u0275\u0275setComponentScope":Wn,"\u0275\u0275setNgModuleScope":Yn,"\u0275\u0275registerNgModuleType":Vs,"\u0275\u0275sanitizeHtml":fl,"\u0275\u0275sanitizeStyle":pl,"\u0275\u0275sanitizeResourceUrl":gl,"\u0275\u0275sanitizeScript":ml,"\u0275\u0275sanitizeUrl":vl,"\u0275\u0275sanitizeUrlOrResourceUrl":_l,"\u0275\u0275trustConstantHtml":yl,"\u0275\u0275trustConstantResourceUrl":bl,"\u0275\u0275validateIframeAttribute":mu,forwardRef:He,resolveForwardRef:ze},N_=null;function j_(){N_=null}function D_(e){return void 0!==e.ngModule}function P_(e){return!!nr(e)}var L_=[];var M_=!1;function U_(){if(!M_){M_=!0;try{for(var e=L_.length-1;e>=0;e--){var t=L_[e],n=t.moduleType,r=t.ngModule;r.declarations&&r.declarations.every(V_)&&(L_.splice(e,1),Y_(n,r))}}finally{M_=!1}}}function V_(e){return Array.isArray(e)?e.every(V_):!!ze(e)}function F_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};B_(e,t),void 0!==t.id&&Vs(e,t.id),function(e,t){L_.push({moduleType:e,ngModule:t})}(e,t)}function B_(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];ngDevMode&&mt(e,"Required value moduleType"),ngDevMode&&mt(t,"Required value ngModule");var r=as(t.declarations||mn),i=null;Object.defineProperty(e,En,{configurable:!0,get:function(){if(null===i){if(ngDevMode&&t.imports&&t.imports.indexOf(e)>-1)throw new Error("'".concat(et(e),"' module can't import itself"));var n=rs({usage:0,kind:"NgModule",type:e});(i=n.compileNgModule(A_,"ng:///".concat(e.name,"/\u0275mod.js"),{type:e,bootstrap:as(t.bootstrap||mn).map(ze),declarations:r.map(ze),imports:as(t.imports||mn).map(ze).map(X_),exports:as(t.exports||mn).map(ze).map(X_),schemas:t.schemas?as(t.schemas):null,id:t.id||null})).schemas||(i.schemas=[])}return i}});var o=null;Object.defineProperty(e,Sn,{get:function(){if(null===o){var t=rs({usage:0,kind:"NgModule",type:e});o=t.compileFactory(A_,"ng:///".concat(e.name,"/\u0275fac.js"),{name:e.name,type:e,deps:Os(e),target:t.FactoryTarget.NgModule,typeArgumentCount:0})}return o},configurable:!!ngDevMode});var a=null;Object.defineProperty(e,Nt,{get:function(){if(null===a){ngDevMode&&G_(e,n);var r={name:e.name,type:e,providers:t.providers||mn,imports:[(t.imports||mn).map(ze),(t.exports||mn).map(ze)]},i=rs({usage:0,kind:"NgModule",type:e});a=i.compileInjector(A_,"ng:///".concat(e.name,"/\u0275inj.js"),r)}return a},configurable:!!ngDevMode})}function G_(e,t,n){if(!H_.get(e)&&!tr(e)){var r;if(H_.set(e,!0),e=ze(e),n){if(!(r=nr(e)))throw new Error("Unexpected value '".concat(e.name,"' imported by the module '").concat(n.name,"'. Please add an @NgModule annotation."))}else r=nr(e,!0);var i=[],o=sh(r.declarations),a=sh(r.imports);as(a).map(q_).forEach((function(t){d(t,e),G_(t,!1,e)}));var s=sh(r.exports);o.forEach((function(t){Qn(t=ze(t))||$n(t)||er(t)||i.push("Unexpected value '".concat(et(t),"' declared by the module '").concat(et(e),"'. Please add a @Pipe/@Directive/@Component annotation."))})),o.forEach((function(e){var t=$n(e=ze(e));!Qn(e)&&t&&0==t.selectors.length&&i.push("Directive ".concat(et(e)," has no selector, please add it!"))})),o.forEach((function(t){return function(e,t){var n=Qn(e=ze(e))||$n(e)||er(e);if(null!==n&&void 0!==n&&n.standalone){var r='"'.concat(et(t),'" NgModule');i.push(function(e,t){var n='Unexpected "'.concat(et(e),'" found in the "declarations" array of the'),r='"'.concat(et(e),"\" is marked as standalone and can't be declared ")+'in any NgModule - did you intend to import it instead (by adding it to the "imports" array)?';return"".concat(n," ").concat(t,", ").concat(r)}(e,r))}}(t,e)}));var c=[].concat((0,u.Z)(o.map(ze)),(0,u.Z)(as(a.map(K_)).map(ze)));s.forEach((function(t){var n=(Qn(t=ze(t))?"component":$n(t)&&"directive")||er(t)&&"pipe";n&&-1===c.lastIndexOf(t)&&i.push("Can't export ".concat(n," ").concat(et(t)," from ").concat(et(e)," as it was neither declared nor imported!"))})),o.forEach((function(n){return function(t,n){t=ze(t);var r=W_.get(t);if(r&&r!==e){if(!n){var o=[r,e].map(et).sort();i.push("Type ".concat(et(t)," is part of the declarations of 2 modules: ").concat(o[0]," and ").concat(o[1],"! ")+"Please consider moving ".concat(et(t)," to a higher module that imports ").concat(o[0]," and ").concat(o[1],". ")+"You can also create a new NgModule that exports and includes ".concat(et(t)," then import that NgModule in ").concat(o[0]," and ").concat(o[1],"."))}}else W_.set(t,e)}(n,t)}));var l=function(e,t){var n=null;return r(e.__annotations__),r(e.decorators),n;function r(e){e&&e.forEach(i)}function i(e){if(!n)if(Object.getPrototypeOf(e).ngMetadataName==t)n=e;else if(e.type){Object.getPrototypeOf(e.type).ngMetadataName==t&&(n=e.args[0])}}}(e,"NgModule");if(l&&(l.imports&&as(l.imports).map(q_).forEach((function(t){d(t,e),G_(t,!1,e)})),l.bootstrap&&ss(l.bootstrap,(function(e){Qn(e=ze(e))||i.push("".concat(et(e)," cannot be used as an entry component."));tr(e)&&i.push("The `".concat(et(e),"` class is a standalone component, which can ")+"not be used in the `@NgModule.bootstrap` array. Use the `bootstrapApplication` function for bootstrap instead.")})),l.bootstrap&&ss(l.bootstrap,(function(e){e=ze(e),W_.get(e)||tr(e)||i.push("Component ".concat(et(e)," is not part of any NgModule or the module has not been imported into your module."))}))),i.length)throw new Error(i.join("\n"))}function d(e,t){var n=Qn(e=ze(e))||$n(e);if(null!==n&&!n.standalone)throw new Error("Unexpected directive '".concat(e.name,"' imported by the module '").concat(t.name,"'. Please add an @NgModule annotation."));var r=er(e);if(null!==r&&!r.standalone)throw new Error("Unexpected pipe '".concat(e.name,"' imported by the module '").concat(t.name,"'. Please add an @NgModule annotation."))}}function q_(e){return(e=ze(e)).ngModule||e}var W_=new WeakMap,H_=new WeakMap;function z_(){W_=new WeakMap,H_=new WeakMap,L_.length=0,ar.clear()}function K_(e){var t=nr(e=ze(e));return null===t?[e]:as(sh(t.exports).map((function(e){return nr(e)?(G_(e,!1),K_(e)):e})))}function Y_(e,t){var n=as(t.declarations||mn),r=J_(e);n.forEach((function(t){(t=ze(t)).hasOwnProperty(yn)?Z_(Qn(t),r):t.hasOwnProperty(bn)||t.hasOwnProperty(_n)||(t.ngSelectorScope=e)}))}function Z_(e,t){e.directiveDefs=function(){return Array.from(t.compilation.directives).map((function(e){return e.hasOwnProperty(yn)?Qn(e):$n(e)})).filter((function(e){return!!e}))},e.pipeDefs=function(){return Array.from(t.compilation.pipes).map((function(e){return er(e)}))},e.schemas=t.schemas,e.tView=null}function J_(e){if(P_(e))return function(e){var t=nr(e,!0);if(null!==t.transitiveCompileScopes)return t.transitiveCompileScopes;var n={schemas:t.schemas||null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set}};return sh(t.imports).forEach((function(e){var t=J_(e);t.exported.directives.forEach((function(e){return n.compilation.directives.add(e)})),t.exported.pipes.forEach((function(e){return n.compilation.pipes.add(e)}))})),sh(t.declarations).forEach((function(e){er(e)?n.compilation.pipes.add(e):n.compilation.directives.add(e)})),sh(t.exports).forEach((function(e){var t=e;if(P_(t)){var r=J_(t);r.exported.directives.forEach((function(e){n.compilation.directives.add(e),n.exported.directives.add(e)})),r.exported.pipes.forEach((function(e){n.compilation.pipes.add(e),n.exported.pipes.add(e)}))}else er(t)?n.exported.pipes.add(t):n.exported.directives.add(t)})),t.transitiveCompileScopes=n,n}(e);if(tr(e)){if(null!==(Qn(e)||$n(e)))return{schemas:null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set([e]),pipes:new Set}};if(null!==er(e))return{schemas:null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set([e])}}}throw new Error("".concat(e.name," does not have a module def (\u0275mod property)"))}function X_(e){return D_(e)?e.ngModule:e}var Q_=0;function $_(e,t){("undefined"===typeof ngDevMode||ngDevMode)&&Ft();var n=null;!function(e,t){Ds(t)&&(Ns.set(e,t),js.add(e))}(e,t),rE(e,t),Object.defineProperty(e,yn,{get:function(){if(null===n){var r=rs({usage:0,kind:"component",type:e});if(Ds(t)){var i=["Component '".concat(e.name,"' is not resolved:")];throw t.templateUrl&&i.push(" - templateUrl: ".concat(t.templateUrl)),t.styleUrls&&t.styleUrls.length&&i.push(" - styleUrls: ".concat(JSON.stringify(t.styleUrls))),i.push("Did you run and wait for 'resolveComponentResources()'?"),new Error(i.join("\n"))}var o=N_,a=t.preserveWhitespaces;void 0===a&&(a=null!==o&&void 0!==o.preserveWhitespaces&&o.preserveWhitespaces);var s=t.encapsulation;void 0===s&&(s=null!==o&&void 0!==o.defaultEncapsulation?o.defaultEncapsulation:Xt.Emulated);var c=t.templateUrl||"ng:///".concat(e.name,"/template.html"),u=(0,f.Z)((0,f.Z)({},oE(e,t)),{},{typeSourceSpan:r.createParseSourceSpan("Component",e.name,c),template:t.template||"",preserveWhitespaces:a,styles:t.styles||mn,animations:t.animations,declarations:[],changeDetection:t.changeDetection,encapsulation:s,interpolation:t.interpolation,viewProviders:t.viewProviders||null});Q_++;try{if(u.usesInheritance&&aE(e),n=r.compileComponent(A_,c,u),t.standalone){var l=as(t.imports||mn),d=function(e,t){var n=null,r=null,i=function(){if(null===n){n=[Qn(e)];var r,i=new Set([e]),o=(0,h.Z)(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;ngDevMode&&eE(a,e);var s=ze(a);if(!i.has(s))if(i.add(s),nr(s)){var c,u=J_(s),l=(0,h.Z)(u.exported.directives);try{for(l.s();!(c=l.n()).done;){var d=c.value,f=Qn(d)||$n(d);f&&!i.has(d)&&(i.add(d),n.push(f))}}catch(v){l.e(v)}finally{l.f()}}else{var p=Qn(s)||$n(s);p&&n.push(p)}}}catch(v){o.e(v)}finally{o.f()}}return n},o=function(){if(null===r){r=[];var e,n=new Set,i=(0,h.Z)(t);try{for(i.s();!(e=i.n()).done;){var o=ze(e.value);if(!n.has(o))if(n.add(o),nr(o)){var a,s=J_(o),c=(0,h.Z)(s.exported.pipes);try{for(c.s();!(a=c.n()).done;){var u=a.value,l=er(u);l&&!n.has(u)&&(n.add(u),r.push(l))}}catch(f){c.e(f)}finally{c.f()}}else{var d=er(o);d&&r.push(d)}}}catch(f){i.e(f)}finally{i.f()}}return r};return{directiveDefs:i,pipeDefs:o}}(e,l),p=d.directiveDefs,v=d.pipeDefs;n.directiveDefs=p,n.pipeDefs=v,n.dependencies=function(){return l.map(ze)}}}finally{Q_--}if(0===Q_&&U_(),void 0!==e.ngSelectorScope){var g=J_(e.ngSelectorScope);Z_(n,g)}if(t.schemas){if(!t.standalone)throw new Error("The 'schemas' was specified for the ".concat(et(e)," but is only valid on a component that is standalone."));n.schemas=t.schemas}else t.standalone&&(n.schemas=[])}return n},configurable:!!ngDevMode})}function eE(e,t){if(Ke(e)&&!(e=ze(e)))throw new Error('Expected forwardRef function, imported from "'.concat(et(t),'", to return a standalone entity or NgModule but got "').concat(et(e)||e,'".'));if(null==nr(e)){var n=Qn(e)||$n(e)||er(e);if(null==n)throw D_(e)?new Error('A module with providers was imported from "'.concat(et(t),'". Modules with providers are not supported in standalone components imports.')):new Error('The "'.concat(et(e),'" type, imported from "').concat(et(t),'", must be a standalone component / directive / pipe or an NgModule. Did you forget to add the required @Component / @Directive / @Pipe or @NgModule annotation?'));if(!n.standalone)throw new Error('The "'.concat(et(e),'" ').concat((r=e,Qn(r)?"component":$n(r)?"directive":er(r)?"pipe":"type"),', imported from "').concat(et(t),'", is not standalone. Did you forget to add the standalone: true flag?'))}var r}function tE(e,t){var n=null;rE(e,t||{}),Object.defineProperty(e,bn,{get:function(){if(null===n){var r=nE(e,t||{}),i=rs({usage:0,kind:"directive",type:e});n=i.compileDirective(A_,r.sourceMapUrl,r.metadata)}return n},configurable:!!ngDevMode})}function nE(e,t){var n=e&&e.name,r="ng:///".concat(n,"/\u0275dir.js"),i=rs({usage:0,kind:"directive",type:e}),o=oE(e,t);return o.typeSourceSpan=i.createParseSourceSpan("Directive",n,r),o.usesInheritance&&aE(e),{metadata:o,sourceMapUrl:r}}function rE(e,t){var n=null;Object.defineProperty(e,Sn,{get:function(){if(null===n){var r=nE(e,t),i=rs({usage:0,kind:"directive",type:e});n=i.compileFactory(A_,"ng:///".concat(e.name,"/\u0275fac.js"),{name:r.metadata.name,type:r.metadata.type,typeArgumentCount:0,deps:Os(e),target:i.FactoryTarget.Directive})}return n},configurable:!!ngDevMode})}function iE(e){return Object.getPrototypeOf(e.prototype)===Object.prototype}function oE(e,t){var n,r,i=ks(),o=i.ownPropMetadata(e);return{name:e.name,type:e,selector:void 0!==t.selector?t.selector:null,host:t.host||gn,propMetadata:o,inputs:t.inputs||mn,outputs:t.outputs||mn,queries:sE(e,o,cE),lifecycle:{usesOnChanges:i.hasLifecycleHook(e,"ngOnChanges")},typeSourceSpan:null,usesInheritance:!iE(e),exportAs:(r=t.exportAs,void 0===r?null:dE(r)),providers:t.providers||null,viewQueries:sE(e,o,uE),isStandalone:!!t.standalone,isSignal:!!t.signals,hostDirectives:(null===(n=t.hostDirectives)||void 0===n?void 0:n.map((function(e){return"function"===typeof e?{directive:e}:e})))||null}}function aE(e){for(var t=Object.prototype,n=Object.getPrototypeOf(e.prototype).constructor;n&&n!==t;)$n(n)||Qn(n)||!fE(n)||tE(n,null),n=Object.getPrototypeOf(n)}function sE(e,t,n){var r=[],i=function(i){if(t.hasOwnProperty(i)){var o=t[i];o.forEach((function(t){if(n(t)){if(!t.selector)throw new Error("Can't construct a query for the property \"".concat(i,'" of ')+'"'.concat(et(e),"\" since the query selector wasn't defined."));if(o.some(lE))throw new Error("Cannot combine @Input decorators with query decorators");r.push(function(e,t){return{propertyName:e,predicate:(n=t.selector,"string"===typeof n?dE(n):ze(n)),descendants:t.descendants,first:t.first,read:t.read?t.read:null,static:!!t.static,emitDistinctChangesOnly:!!t.emitDistinctChangesOnly};var n}(i,t))}}))}};for(var o in t)i(o);return r}function cE(e){var t=e.ngMetadataName;return"ContentChild"===t||"ContentChildren"===t}function uE(e){var t=e.ngMetadataName;return"ViewChild"===t||"ViewChildren"===t}function lE(e){return"Input"===e.ngMetadataName}function dE(e){return e.split(",").map((function(e){return e.trim()}))}var hE=["ngOnChanges","ngOnInit","ngOnDestroy","ngDoCheck","ngAfterViewInit","ngAfterViewChecked","ngAfterContentInit","ngAfterContentChecked"];function fE(e){var t=ks();if(hE.some((function(n){return t.hasLifecycleHook(e,n)})))return!0;var n=t.propMetadata(e);for(var r in n)for(var i=n[r],o=0;o<i.length;o++){var a=i[o],s=a.ngMetadataName;if(lE(a)||cE(a)||uE(a)||"Output"===s||"HostBinding"===s||"HostListener"===s)return!0}return!1}function pE(e,t){var n=null,r=null;Object.defineProperty(e,Sn,{get:function(){if(null===r){var n=vE(e,t),i=rs({usage:0,kind:"pipe",type:n.type});r=i.compileFactory(A_,"ng:///".concat(n.name,"/\u0275fac.js"),{name:n.name,type:n.type,typeArgumentCount:0,deps:Os(e),target:i.FactoryTarget.Pipe})}return r},configurable:!!ngDevMode}),Object.defineProperty(e,_n,{get:function(){if(null===n){var r=vE(e,t),i=rs({usage:0,kind:"pipe",type:r.type});n=i.compilePipe(A_,"ng:///".concat(r.name,"/\u0275pipe.js"),r)}return n},configurable:!!ngDevMode})}function vE(e,t){return{type:e,name:e.name,pipeName:t.name,pure:void 0===t.pure||t.pure,isStandalone:!!t.standalone}}var gE=Wa("Directive",(function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}),void 0,void 0,(function(e,t){return tE(e,t)})),mE=Wa("Component",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.Z)({changeDetection:Jt.Default},e)}),gE,void 0,(function(e,t){return $_(e,t)})),yE=Wa("Pipe",(function(e){return(0,f.Z)({pure:!0},e)}),void 0,void 0,(function(e,t){return pE(e,t)})),bE=Ka("Input",(function(e){return e?"string"===typeof e?{alias:e}:e:{}})),_E=Ka("Output",(function(e){return{alias:e}})),EE=Ka("HostBinding",(function(e){return{hostPropertyName:e}})),SE=Ka("HostListener",(function(e,t){return{eventName:e,args:t}})),wE=Wa("NgModule",(function(e){return e}),void 0,void 0,(function(e,t){return F_(e,t)})),xE=new Sl("Application Initializer"),TE=function(){function e(){var t,n=this;if((0,v.Z)(this,e),this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){n.resolve=e,n.reject=t})),this.appInits=null!==(t=ln(xE,{optional:!0}))&&void 0!==t?t:[],("undefined"===typeof ngDevMode||ngDevMode)&&!Array.isArray(this.appInits))throw new Xe(-209,"Unexpected type of the `APP_INITIALIZER` token value "+"(expected an array, but got ".concat(typeof this.appInits,"). ")+"Please check that the `APP_INITIALIZER` token is configured as a `multi: true` provider.")}return(0,p.Z)(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t,n=[],r=(0,h.Z)(this.appInits);try{var i=function(){var e=(0,t.value)();if(Sv(e))n.push(e);else if(wv(e)){var r=new Promise((function(t,n){e.subscribe({complete:t,error:n})}));n.push(r)}};for(r.s();!(t=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}var o=function(){e.done=!0,e.resolve()};Promise.all(n).then((function(){o()})).catch((function(t){e.reject(t)})),0===n.length&&o(),this.initialized=!0}}}]),e}();TE.\u0275fac=function(e){return new(e||TE)},TE.\u0275prov=St({token:TE,factory:TE.\u0275fac,providedIn:"root"}),("undefined"===typeof ngDevMode||ngDevMode)&&_b(TE,[{type:Xd,args:[{providedIn:"root"}]}],(function(){return[]}),null);var IE=function(){function e(){(0,v.Z)(this,e)}return(0,p.Z)(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();IE.\u0275fac=function(e){return new(e||IE)},IE.\u0275prov=St({token:IE,factory:IE.\u0275fac,providedIn:"platform"}),("undefined"===typeof ngDevMode||ngDevMode)&&_b(IE,[{type:Xd,args:[{providedIn:"platform"}]}],null,null);var RE,kE=new Sl("LocaleId",{providedIn:"root",factory:function(){return ln(kE,Ot.Optional|Ot.SkipSelf)||("undefined"!==typeof ngI18nClosureMode&&ngI18nClosureMode&&"undefined"!==typeof goog&&"en"!==goog.LOCALE?goog.LOCALE:"undefined"!==typeof $localize&&$localize.locale||Im)}}),OE=new Sl("DefaultCurrencyCode",{providedIn:"root",factory:function(){return"USD"}}),CE=new Sl("Translations"),AE=new Sl("TranslationsFormat");!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Ignore=2]="Ignore"}(RE||(RE={}));var NE=function(){function e(){(0,v.Z)(this,e),this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new se(!1)}return(0,p.Z)(e,[{key:"add",value:function(){this.hasPendingTasks.next(!0);var e=this.taskId++;return this.pendingTasks.add(e),e}},{key:"remove",value:function(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}},{key:"ngOnDestroy",value:function(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}]),e}();NE.\u0275fac=function(e){return new(e||NE)},NE.\u0275prov=St({token:NE,factory:NE.\u0275fac,providedIn:"root"}),("undefined"===typeof ngDevMode||ngDevMode)&&_b(NE,[{type:Xd,args:[{providedIn:"root"}]}],null,null);var jE=(0,p.Z)((function e(t,n){(0,v.Z)(this,e),this.ngModuleFactory=t,this.componentFactories=n})),DE=function(){function e(){(0,v.Z)(this,e)}return(0,p.Z)(e,[{key:"compileModuleSync",value:function(e){return new rb(e)}},{key:"compileModuleAsync",value:function(e){return Promise.resolve(this.compileModuleSync(e))}},{key:"compileModuleAndAllComponentsSync",value:function(e){var t=this.compileModuleSync(e),n=sh(nr(e).declarations).reduce((function(e,t){var n=Qn(t);return n&&e.push(new Gf(n)),e}),[]);return new jE(t,n)}},{key:"compileModuleAndAllComponentsAsync",value:function(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}},{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();DE.\u0275fac=function(e){return new(e||DE)},DE.\u0275prov=St({token:DE,factory:DE.\u0275fac,providedIn:"root"}),("undefined"===typeof ngDevMode||ngDevMode)&&_b(DE,[{type:Xd,args:[{providedIn:"root"}]}],null,null);var PE=new Sl("compilerOptions"),LE=(0,p.Z)((function e(){(0,v.Z)(this,e)})),ME=new(function(){function e(){(0,v.Z)(this,e),this.resolverToTokenToDependencies=new WeakMap,this.resolverToProviders=new WeakMap,this.standaloneInjectorToComponent=new WeakMap}return(0,p.Z)(e,[{key:"reset",value:function(){this.resolverToTokenToDependencies=new WeakMap,this.resolverToProviders=new WeakMap,this.standaloneInjectorToComponent=new WeakMap}}]),e}());function UE(){return ME}function VE(){ME.reset(),Wt((function(e){return function(e){var t=e.context,n=e.type;0===n?function(e,t){var n=FE(e.injector);null===n&&yt("An Inject event must be run within an injection context.");var r=ME.resolverToTokenToDependencies;r.has(n)||r.set(n,new WeakMap);if(!function(e){return null!==e&&("object"===typeof e||"function"===typeof e||"symbol"===typeof e)}(e.token))return;var i=r.get(n);i.has(e.token)||i.set(e.token,[]);var o=t.token,a=t.value,s=t.flags;i.get(e.token).push({token:o,value:a,flags:s})}(t,e.service):1===n?function(e,t){var n=t.value;null===FE(e.injector)&&yt("An InjectorCreatedInstance event must be run within an injection context.");var r=void 0;"object"===typeof n&&(r=null===n||void 0===n?void 0:n.constructor);if(void 0===r||!function(e){var t=Qn(e);return!(null===t||void 0===t||!t.standalone)}(r))return;var i=e.injector.get(Wl,null,{optional:!0});if(null===i)return;var o=ME.standaloneInjectorToComponent;if(o.has(i))return;o.set(i,r)}(t,e.instance):2===n&&function(e,t){var n=ME.resolverToProviders,r=FE(null===e||void 0===e?void 0:e.injector);null===r&&yt("A ProviderConfigured event must be run within an injection context.");n.has(r)||n.set(r,[]);n.get(r).push(t)}(t,e.providerRecord)}(e)}))}function FE(e){var t=null;return void 0===e?t:t=e instanceof Pa?Da(e):e}function BE(e){ngDevMode&&mt(e,"component"),fh(bc(e)),db(e).forEach((function(e){return Af(e)}))}function GE(e,t){var n,r,i,o=e.get(t,null,{self:!0,optional:!0});if(null===o)throw new Error("Unable to determine instance of ".concat(t," in given injector"));var a=e;e instanceof Pa&&(a=Da(e));var s=null!==(n=null===(r=UE().resolverToTokenToDependencies.get(a))||void 0===r||null===(i=r.get)||void 0===i?void 0:i.call(r,t))&&void 0!==n?n:[],c=zE(e);return{instance:o,dependencies:s=s.map((function(e){var t=e.flags;e.flags={optional:8===(8&t),host:1===(1&t),self:2===(2&t),skipSelf:4===(4&t)};for(var n=0;n<c.length;n++){var r=c[n];if(0!==n||!e.flags.skipSelf){if(e.flags.host&&r instanceof Wl)break;if(null!==r.get(e.token,null,{self:!0,optional:!0})){if(e.flags.host){null!==c[0].get(e.token,null,(0,f.Z)((0,f.Z)({},e.flags),{},{optional:!0}))&&(e.providedIn=r);break}e.providedIn=r;break}if(0===n&&e.flags.self)break}}return e}))}}function qE(e){var t=new Map,n=function(e,t){return function(n,r){if(e.has(n)||e.set(n,[r]),!t.has(r)){var i,o=(0,h.Z)(e.keys());try{var a=function(){var t=i.value,n=e.get(t),o=kt(r);o||(o=kt(r.ngModule));if(!o)return{v:void 0};var a=n[0],s=!1;ss(o.imports,(function(n){var i;s||(s=n.ngModule===a||n===a)&&(null===(i=e.get(t))||void 0===i||i.unshift(r))}))};for(o.s();!(i=o.n()).done;){var s=a();if("object"===typeof s)return s.v}}catch(c){o.e(c)}finally{o.f()}}t.add(r)}}(t,new Set);return Al(e,n,[],new Set),t}function WE(e){var t,n=function(e){var t=UE().standaloneInjectorToComponent;if(t.has(e))return t.get(e);var n=e.get(Qy,null,{self:!0,optional:!0});return null===n?null:n.instance.constructor}(e);null===n&&yt("Could not determine where injector providers were configured.");var r=qE(n);return(null!==(t=UE().resolverToProviders.get(e))&&void 0!==t?t:[]).map((function(e){var t,i,o=null!==(t=r.get(e.provider))&&void 0!==t?t:[n],a=Qn(n);null===a||void 0===a||!a.standalone||(o=[n].concat((0,u.Z)(null!==(i=r.get(e.provider))&&void 0!==i?i:[])));return(0,f.Z)((0,f.Z)({},e),{},{importPath:o})}))}function HE(e){return e instanceof Pa?function(e){var t,n=Da(e);return null!==(t=UE().resolverToProviders.get(n))&&void 0!==t?t:[]}(e):e instanceof Wl?WE(e):void yt("getInjectorProviders only supports NodeInjector and EnvironmentInjector")}function zE(e){var t=[e];return KE(e,t),t}function KE(e,t){var n=function(e){if(e instanceof Hl)return e.parent;var t,n;if(e instanceof Pa)t=e._tNode,n=Da(e);else{if(e instanceof Il)return null;yt("getInjectorParent only support injectors of type R3Injector, NodeInjector, NullInjector")}var r=wa(t,n);if(da(r)){var i=ha(r),o=fa(r,n),a=o[cr].data[i+8];return new Pa(a,o)}var s,c=null===(s=n[gr].injector)||void 0===s?void 0:s.parent;if(c instanceof Pa)return c;return null}(e);if(null===n){if(e instanceof Pa){var r=t[0];if(r instanceof Pa){var i=function(e){var t;e instanceof Pa?t=Da(e):yt("getModuleInjectorOfNodeInjector must be called with a NodeInjector");var n=t[gr].parentInjector;n||yt("NodeInjector must have some connection to the module injector tree");return n}(r);null===i&&yt("NodeInjector must have some connection to the module injector tree"),t.push(i),KE(i,t)}return t}}else t.push(n),KE(n,t);return t}var YE="ng",ZE=!1;function JE(){ZE||(ZE=!0,VE(),XE("\u0275getDependenciesFromInjectable",GE),XE("\u0275getInjectorProviders",HE),XE("\u0275getInjectorResolutionPath",zE),XE("\u0275setProfiler",Gi),XE("getDirectiveMetadata",pb),XE("getComponent",cb),XE("getContext",ub),XE("getListeners",mb),XE("getOwningComponent",lb),XE("getHostElement",gb),XE("getInjector",hb),XE("getRootComponents",db),XE("getDirectives",fb),XE("applyChanges",BE))}function XE(e,t){if("undefined"===typeof COMPILED||!COMPILED){var n=Vt;if(ngDevMode&&mt(t,"function not defined"),n){var r=n[YE];r||(r=n[YE]={}),r[e]=t}}}function QE(){}var $E=function(){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console;(0,v.Z)(this,e),this.name="asyncStackTagging for "+t,this.createTask=null!==(n=null===r||void 0===r?void 0:r.createTask)&&void 0!==n?n:function(){return null}}return(0,p.Z)(e,[{key:"onScheduleTask",value:function(e,t,n,r){return r.consoleTask=this.createTask("Zone - ".concat(r.source||r.type)),e.scheduleTask(n,r)}},{key:"onInvokeTask",value:function(e,t,n,r,i,o){return r.consoleTask?r.consoleTask.run((function(){return e.invokeTask(n,r,i,o)})):e.invokeTask(n,r,i,o)}}]),e}(),eS=function(){function e(t){var n=t.enableLongStackTrace,r=void 0!==n&&n,i=t.shouldCoalesceEventChangeDetection,o=void 0!==i&&i,a=t.shouldCoalesceRunChangeDetection,s=void 0!==a&&a;if((0,v.Z)(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zb(!1),this.onMicrotaskEmpty=new zb(!1),this.onStable=new zb(!1),this.onError=new zb(!1),"undefined"==typeof Zone)throw new Xe(908,ngDevMode&&"In this configuration Angular requires Zone.js");Zone.assertZonePatched();var c=this;c._nesting=0,c._outer=c._inner=Zone.current,ngDevMode&&(c._inner=c._inner.fork(new $E("Angular"))),Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!s&&o,c.shouldCoalesceRunChangeDetection=s,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){var e="function"===typeof Vt.requestAnimationFrame,t=Vt[e?"requestAnimationFrame":"setTimeout"],n=Vt[e?"cancelAnimationFrame":"clearTimeout"];if("undefined"!==typeof Zone&&t&&n){var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);var i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(e){var t=function(){!function(e){if(e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId)return;e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Vt,(function(){e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",(function(){e.lastRequestAnimationFrameId=-1,rS(e),e.isCheckStableRunning=!0,nS(e),e.isCheckStableRunning=!1}),void 0,(function(){}),(function(){}))),e.fakeTopEventTask.invoke()})),rS(e)}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(n,r,i,o,a,s){try{return iS(e),n.invokeTask(i,o,a,s)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),oS(e)}},onInvoke:function(n,r,i,o,a,s,c){try{return iS(e),n.invoke(i,o,a,s,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),oS(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,rS(e),nS(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular((function(){return e.onError.emit(i)})),!1}})}(c)}return(0,p.Z)(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,tS,QE,QE);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return"undefined"!==typeof Zone&&!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Xe(909,ngDevMode&&"Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Xe(909,ngDevMode&&"Expected to not be in Angular Zone, but it is!")}}]),e}(),tS={};function nS(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function rS(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function iS(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function oS(e){e._nesting--,nS(e)}var aS=function(){function e(){(0,v.Z)(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zb,this.onMicrotaskEmpty=new zb,this.onStable=new zb,this.onError=new zb}return(0,p.Z)(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),sS=new Sl(ngDevMode?"isStable Observable":"",{providedIn:"root",factory:cS});function cS(){var e=ln(eS),t=!0;return Ne(new ne((function(n){t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular((function(){n.next(t),n.complete()}))})),new ne((function(n){var r;e.runOutsideAngular((function(){r=e.onStable.subscribe((function(){eS.assertNotInAngularZone(),queueMicrotask((function(){t||e.hasPendingMacrotasks||e.hasPendingMicrotasks||(t=!0,n.next(!0))}))}))}));var i=e.onUnstable.subscribe((function(){eS.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular((function(){n.next(!1)})))}));return function(){r.unsubscribe(),i.unsubscribe()}})).pipe(je()))}var uS=new Sl(""),lS=new Sl(""),dS=function(){function e(t,n,r){var i=this;(0,v.Z)(this,e),this._ngZone=t,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,hS||(pS(r),r.addToWindow(n)),this._watchAngularEvents(),t.run((function(){i.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return(0,p.Z)(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){eS.assertNotInAngularZone(),queueMicrotask((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())queueMicrotask((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(e){return e.timeoutId!==i})),e(r._didWork,r.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"registerApplication",value:function(e){this.registry.registerApplication(e,this)}},{key:"unregisterApplication",value:function(e){this.registry.unregisterApplication(e)}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();dS.\u0275fac=function(e){return new(e||dS)(cn(eS),cn(fS),cn(lS))},dS.\u0275prov=St({token:dS,factory:dS.\u0275fac}),("undefined"===typeof ngDevMode||ngDevMode)&&_b(dS,[{type:Xd}],(function(){return[{type:eS},{type:fS},{type:void 0,decorators:[{type:Ss,args:[lS]}]}]}),null);var hS,fS=function(){function e(){(0,v.Z)(this,e),this._applications=new Map}return(0,p.Z)(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t,n,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null!==(t=null===(n=hS)||void 0===n?void 0:n.findTestabilityInTree(this,e,r))&&void 0!==t?t:null}}]),e}();function pS(e){hS=e}fS.\u0275fac=function(e){return new(e||fS)},fS.\u0275prov=St({token:fS,factory:fS.\u0275fac,providedIn:"platform"}),("undefined"===typeof ngDevMode||ngDevMode)&&_b(fS,[{type:Xd,args:[{providedIn:"platform"}]}],null,null);var vS=null,gS=new Sl("AllowMultipleToken"),mS=new Sl("PlatformDestroyListeners"),yS=new Sl("appBootstrapListener");function bS(e,t,n){ngDevMode&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Type passed in is not NgModuleType, it does not have '\u0275mod' property.";nr(e)||yt(t)}(n);var r=new rb(n);if("undefined"!==typeof ngJitMode&&!ngJitMode)return Promise.resolve(r);var i=e.get(PE,[]).concat(t);if(function(e){if(null!==N_){if(e.defaultEncapsulation!==N_.defaultEncapsulation)return void(ngDevMode&&console.error("Provided value for `defaultEncapsulation` can not be changed once it has been set."));if(e.preserveWhitespaces!==N_.preserveWhitespaces)return void(ngDevMode&&console.error("Provided value for `preserveWhitespaces` can not be changed once it has been set."))}N_=e}({defaultEncapsulation:US(i.map((function(e){return e.defaultEncapsulation}))),preserveWhitespaces:US(i.map((function(e){return e.preserveWhitespaces})))}),0===Ns.size)return Promise.resolve(r);var o=i.flatMap((function(e){var t;return null!==(t=e.providers)&&void 0!==t?t:[]}));if(0===o.length)return Promise.resolve(r);var a=rs({usage:0,kind:"NgModule",type:n}),s=eh.create({providers:o}).get(a.ResourceLoader);return As((function(e){return Promise.resolve(s.get(e))})).then((function(){return r}))}function _S(){ngDevMode&&JE()}function ES(){Ii=function(){throw new Xe(600,ngDevMode&&"Writing to signals is not allowed in a `computed` or an `effect` by default. Use `allowSignalWrites` in the `CreateEffectOptions` to enable this inside effects.")}}function SS(e){return e.isBoundToModule}var wS=(0,p.Z)((function e(t,n){(0,v.Z)(this,e),this.name=t,this.token=n}));function xS(e){if(vS&&!vS.get(gS,!1))throw new Xe(400,ngDevMode&&"There can be only one platform. Destroy the previous one to create a new one.");_S(),ES(),vS=e;var t=e.get(NS);return TS(e),t}function TS(e){var t=e.get(Ql,null);null===t||void 0===t||t.forEach((function(e){return e()}))}function IS(t){try{var n=t.rootComponent,r=t.appProviders,i=t.platformProviders;"undefined"!==typeof ngDevMode&&!ngDevMode||void 0===n||function(e){if(Sh(e),!Qn(e).standalone)throw new Xe(907,"The ".concat(et(e)," component is not marked as standalone, ")+"but Angular expects to have a standalone component here. "+"Please make sure the ".concat(et(e)," component has ")+"the `standalone: true` flag in the decorator.")}(n);var o=function(){if(vS)return vS;var e=OS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]);return vS=e,_S(),ES(),TS(e),e}(i),a=[WS()].concat((0,u.Z)(r||[])),s=new ib({providers:a,parent:o,debugName:"undefined"===typeof ngDevMode||ngDevMode?"Environment Injector":"",runEnvironmentInitializers:!1}).injector,c=s.get(eS);return c.run((function(){s.resolveInjectorInitializers();var e,t=s.get(gh,null);if(("undefined"===typeof ngDevMode||ngDevMode)&&!t)throw new Xe(402,"No `ErrorHandler` found in the Dependency Injection tree.");c.runOutsideAngular((function(){e=c.onError.subscribe({next:function(e){t.handleError(e)}})}));var r=function(){return s.destroy()},i=o.get(mS);return i.add(r),s.onDestroy((function(){e.unsubscribe(),i.delete(r)})),DS(t,c,(function(){var e=s.get(TE);return e.runInitializers(),e.donePromise.then((function(){Cm(s.get(kE,Im)||Im);var e=s.get(LS);return void 0!==n&&e.bootstrap(n),e}))}))}))}catch(e){return Promise.reject(e)}}function RS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),i=new Sl(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=AS();if(!o||o.injector.get(gS,!1)){var a=[].concat((0,u.Z)(n),(0,u.Z)(t),[{provide:i,useValue:!0}]);e?e(a):xS(OS(a,r))}return kS(i)}}function kS(e){var t=AS();if(!t)throw new Xe(401,ngDevMode&&"No platform exists!");if(("undefined"===typeof ngDevMode||ngDevMode)&&!t.injector.get(e,null))throw new Xe(400,"A platform with a different configuration has been created. Please destroy it first.");return t}function OS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return eh.create({name:t,providers:[{provide:Vl,useValue:"platform"},{provide:mS,useValue:new Set([function(){return vS=null}])}].concat((0,u.Z)(e))})}function CS(){var e;null===(e=AS())||void 0===e||e.destroy()}function AS(){var e,t;return null!==(e=null===(t=vS)||void 0===t?void 0:t.get(NS))&&void 0!==e?e:null}var NS=function(){function e(t){(0,v.Z)(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return(0,p.Z)(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n=this,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"zone.js",t=arguments.length>1?arguments[1]:void 0;if("noop"===e)return new aS;if("zone.js"===e)return new eS(t);return e}(null===t||void 0===t?void 0:t.ngZone,jS({eventCoalescing:null===t||void 0===t?void 0:t.ngZoneEventCoalescing,runCoalescing:null===t||void 0===t?void 0:t.ngZoneRunCoalescing}));return r.run((function(){var t,i,o,a=(t=e.moduleType,i=n.injector,o=qS((function(){return r})),new nb(t,i,o));if(("undefined"===typeof ngDevMode||ngDevMode)&&null!==a.injector.get(GS,null))throw new Xe(207,"`bootstrapModule` does not support `provideZoneChangeDetection`. Use `BootstrapOptions` instead.");var s=a.injector.get(gh,null);if(("undefined"===typeof ngDevMode||ngDevMode)&&null===s)throw new Xe(402,"No ErrorHandler. Is platform module (BrowserModule) included?");return r.runOutsideAngular((function(){var e=r.onError.subscribe({next:function(e){s.handleError(e)}});a.onDestroy((function(){MS(n._modules,a),e.unsubscribe()}))})),DS(s,r,(function(){var e=a.injector.get(TE);return e.runInitializers(),e.donePromise.then((function(){return Cm(a.injector.get(kE,Im)||Im),n._moduleDoBootstrap(a),a}))}))}))}},{key:"bootstrapModule",value:function(e){var t=this,n=PS({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]);return bS(this.injector,n,e).then((function(e){return t.bootstrapModuleFactory(e,n)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(LS);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Xe(-403,ngDevMode&&"The module ".concat(Ge(e.instance.constructor)," was bootstrapped, ")+'but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Xe(404,ngDevMode&&"The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()}));var e=this._injector.get(mS,null);e&&(e.forEach((function(e){return e()})),e.clear()),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();function jS(e){var t,n;return{enableLongStackTrace:"undefined"!==typeof ngDevMode&&!!ngDevMode,shouldCoalesceEventChangeDetection:null!==(t=null===e||void 0===e?void 0:e.eventCoalescing)&&void 0!==t&&t,shouldCoalesceRunChangeDetection:null!==(n=null===e||void 0===e?void 0:e.runCoalescing)&&void 0!==n&&n}}function DS(t,n,r){try{var i=r();return Sv(i)?i.catch((function(e){throw n.runOutsideAngular((function(){return t.handleError(e)})),e})):i}catch(e){throw n.runOutsideAngular((function(){return t.handleError(e)})),e}}function PS(e,t){return Array.isArray(t)?t.reduce(PS,e):(0,f.Z)((0,f.Z)({},e),t)}NS.\u0275fac=function(e){return new(e||NS)(cn(eh))},NS.\u0275prov=St({token:NS,factory:NS.\u0275fac,providedIn:"platform"}),("undefined"===typeof ngDevMode||ngDevMode)&&_b(NS,[{type:Xd,args:[{providedIn:"platform"}]}],(function(){return[{type:eh}]}),null);var LS=function(){function t(){var e,n,r,i,o=this;(0,v.Z)(this,t),this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ln(VS),this.zoneIsStable=ln(sS),this.componentTypes=[],this.components=[],this.isStable=ln(NE).hasPendingTasks.pipe((r=function(e){return e?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ae(e,Ie(e))}(!1):o.zoneIsStable},ce((function(e,t){var n=null,o=0,a=!1,s=function(){return a&&!n&&t.complete()};e.subscribe(ue(t,(function(e){null===n||void 0===n||n.unsubscribe();var a=0,c=o++;_e(r(e,c)).subscribe(n=ue(t,(function(n){return t.next(i?i(e,n,c,a++):n)}),(function(){n=null,s()})))}),(function(){a=!0,s()})))}))),(void 0===n&&(n=ee),e=null!==e&&void 0!==e?e:Pe,ce((function(t,r){var i,o=!0;t.subscribe(ue(r,(function(t){var a=n(t);!o&&e(i,a)||(o=!1,i=a,r.next(t))})))}))),je()),this._injector=ln(Wl)}return(0,p.Z)(t,[{key:"destroyed",get:function(){return this._destroyed}},{key:"injector",get:function(){return this._injector}},{key:"bootstrap",value:function(e,t){var n=this;("undefined"===typeof ngDevMode||ngDevMode)&&this.warnIfDestroyed();var r,i=e instanceof Ad;if(!this._injector.get(TE).done){var o=!i&&tr(e);throw new Xe(405,("undefined"===typeof ngDevMode||ngDevMode)&&"Cannot bootstrap as there are still asynchronous initializers running."+(o?"":" Bootstrap components in the `ngDoBootstrap` method of the root module."))}i?r=e:r=this._injector.get(Dd).resolveComponentFactory(e);this.componentTypes.push(r.componentType);var a=SS(r)?void 0:this._injector.get(Qy),s=t||r.selector,c=r.create(eh.NULL,[],s,a),u=c.location.nativeElement,l=c.injector.get(uS,null);(null===l||void 0===l||l.registerApplication(u),c.onDestroy((function(){n.detachView(c.hostView),MS(n.components,c),null===l||void 0===l||l.unregisterApplication(u)})),this._loadComponent(c),"undefined"===typeof ngDevMode||ngDevMode)&&this._injector.get(IE).log("Angular is running in development mode.");return c}},{key:"tick",value:function(){if(("undefined"===typeof ngDevMode||ngDevMode)&&this.warnIfDestroyed(),this._runningTick)throw new Xe(101,ngDevMode&&"ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=(0,h.Z)(this._views);try{for(n.s();!(t=n.n()).done;){t.value.detectChanges()}}catch(o){n.e(o)}finally{n.f()}if("undefined"===typeof ngDevMode||ngDevMode){var r,i=(0,h.Z)(this._views);try{for(i.s();!(r=i.n()).done;){r.value.checkNoChanges()}}catch(o){i.e(o)}finally{i.f()}}}catch(e){this.internalErrorHandler(e)}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){("undefined"===typeof ngDevMode||ngDevMode)&&this.warnIfDestroyed();var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){("undefined"===typeof ngDevMode||ngDevMode)&&this.warnIfDestroyed();var t=e;MS(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e);var t=this._injector.get(yS,[]);if(ngDevMode&&!Array.isArray(t))throw new Xe(-209,"Unexpected type of the `APP_BOOTSTRAP_LISTENER` token value "+"(expected an array, but got ".concat(typeof t,"). ")+"Please check that the `APP_BOOTSTRAP_LISTENER` token is configured as a `multi: true` provider.");t.push.apply(t,(0,u.Z)(this._bootstrapListeners)),t.forEach((function(t){return t(e)}))}},{key:"ngOnDestroy",value:function(){if(!this._destroyed)try{this._destroyListeners.forEach((function(e){return e()})),this._views.slice().forEach((function(e){return e.destroy()}))}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}},{key:"onDestroy",value:function(e){var t=this;return("undefined"===typeof ngDevMode||ngDevMode)&&this.warnIfDestroyed(),this._destroyListeners.push(e),function(){return MS(t._destroyListeners,e)}}},{key:"destroy",value:function(){if(this._destroyed)throw new Xe(406,ngDevMode&&"This instance of the `ApplicationRef` has already been destroyed.");var e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}},{key:"viewCount",get:function(){return this._views.length}},{key:"warnIfDestroyed",value:function(){("undefined"===typeof ngDevMode||ngDevMode)&&this._destroyed&&console.warn(Qe(406,"This instance of the `ApplicationRef` has already been destroyed."))}}]),t}();function MS(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function US(e){for(var t=e.length-1;t>=0;t--)if(void 0!==e[t])return e[t]}LS.\u0275fac=function(e){return new(e||LS)},LS.\u0275prov=St({token:LS,factory:LS.\u0275fac,providedIn:"root"}),("undefined"===typeof ngDevMode||ngDevMode)&&_b(LS,[{type:Xd,args:[{providedIn:"root"}]}],null,null);var VS=new Sl("undefined"===typeof ngDevMode||ngDevMode?"internal error handler":"",{providedIn:"root",factory:function(){return ln(gh).handleError.bind(void 0)}});function FS(){var e=ln(eS),t=ln(gh);return function(n){return e.runOutsideAngular((function(){return t.handleError(n)}))}}var BS=function(){function e(){(0,v.Z)(this,e),this.zone=ln(eS),this.applicationRef=ln(LS)}return(0,p.Z)(e,[{key:"initialize",value:function(){var e=this;this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:function(){e.zone.run((function(){e.applicationRef.tick()}))}}))}},{key:"ngOnDestroy",value:function(){var e;null===(e=this._onMicrotaskEmptySubscription)||void 0===e||e.unsubscribe()}}]),e}();BS.\u0275fac=function(e){return new(e||BS)},BS.\u0275prov=St({token:BS,factory:BS.\u0275fac,providedIn:"root"}),("undefined"===typeof ngDevMode||ngDevMode)&&_b(BS,[{type:Xd,args:[{providedIn:"root"}]}],null,null);var GS=new Sl("undefined"===typeof ngDevMode||ngDevMode?"provideZoneChangeDetection token":"");function qS(e){return[{provide:eS,useFactory:e},{provide:wl,multi:!0,useFactory:function(){var e=ln(BS,{optional:!0});if(("undefined"===typeof ngDevMode||ngDevMode)&&null===e)throw new Xe(402,"A required Injectable was not found in the dependency injection tree. If you are bootstrapping an NgModule, make sure that the `BrowserModule` is imported.");return function(){return e.initialize()}}},{provide:VS,useFactory:FS},{provide:sS,useFactory:cS}]}function WS(e){var t=qS((function(){return new eS(jS(e))}));return Rl(["undefined"===typeof ngDevMode||ngDevMode?{provide:GS,useValue:!0}:[],t])}function HS(){return"undefined"===typeof ngDevMode||!!ngDevMode}function zS(){("undefined"===typeof ngDevMode||ngDevMode)&&(Vt.ngDevMode=!1)}function KS(e){var t=Fs(e);if(!t)throw ZS(e);return new rb(t)}function YS(e){var t=Fs(e);if(!t)throw ZS(e);return t}function ZS(e){return new Error("No module with ID ".concat(e," loaded"))}var JS=(0,p.Z)((function e(){(0,v.Z)(this,e)}));function XS(e){return function(e,t,n){if(qr(e)&&!n){var r=Xi(e.index,t);return new Mf(r,r)}if(47&e.type){var i=t[Sr];return new Mf(i,t)}return null}(go(),ho(),16===(16&e))}JS.__NG_ELEMENT_ID__=XS;var QS=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(){return(0,v.Z)(this,n),t.apply(this,arguments)}return(0,p.Z)(n)}(JS),$S=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(){return(0,v.Z)(this,n),t.apply(this,arguments)}return(0,p.Z)(n)}(QS),ew=(0,p.Z)((function e(t,n){(0,v.Z)(this,e),this.name=t,this.callback=n}));function tw(e){return e.map((function(e){return e.nativeElement}))}var nw=function(){function e(t){(0,v.Z)(this,e),this.nativeNode=t}return(0,p.Z)(e,[{key:"parent",get:function(){var e=this.nativeNode.parentNode;return e?new rw(e):null}},{key:"injector",get:function(){return hb(this.nativeNode)}},{key:"componentInstance",get:function(){var e=this.nativeNode;return e&&(cb(e)||lb(e))}},{key:"context",get:function(){return cb(this.nativeNode)||ub(this.nativeNode)}},{key:"listeners",get:function(){return mb(this.nativeNode).filter((function(e){return"dom"===e.type}))}},{key:"references",get:function(){return vb(this.nativeNode)}},{key:"providerTokens",get:function(){return function(e){var t=mc(e),n=t?t.lView:null;if(null===n)return[];for(var r,i=n[cr],o=i.data[t.nodeIndex],a=[],s=1048575&o.providerIndexes,c=o.directiveEnd,u=s;u<c;u++){var l=i.data[u];void 0!==(r=l).type&&void 0!==r.declaredInputs&&void 0!==r.findHostDirectiveDefs&&(l=l.type),a.push(l)}return a}(this.nativeNode)}}]),e}(),rw=function(e){(0,g.Z)(n,e);var t=(0,m.Z)(n);function n(e){return(0,v.Z)(this,n),ngDevMode&&bt(e),t.call(this,e)}return(0,p.Z)(n,[{key:"nativeElement",get:function(){return this.nativeNode.nodeType==Node.ELEMENT_NODE?this.nativeNode:null}},{key:"name",get:function(){var e=mc(this.nativeNode),t=e?e.lView:null;return null!==t?t[cr].data[e.nodeIndex].value:this.nativeNode.nodeName}},{key:"properties",get:function(){var e=mc(this.nativeNode),t=e?e.lView:null;if(null===t)return{};var n=t[cr].data,r=n[e.nodeIndex],i={};return function(e,t){if(e)for(var n=Object.getPrototypeOf(e),r=Node.prototype;null!==n&&n!==r;){var i=Object.getOwnPropertyDescriptors(n);for(var o in i)if(!o.startsWith("__")&&!o.startsWith("on")){var a=e[o];iw(a)&&(t[o]=a)}n=Object.getPrototypeOf(n)}}(this.nativeElement,i),function(e,t,n,r){var i=t.propertyBindings;if(null!==i)for(var o=0;o<i.length;o++){var a=i[o],s=r[a].split(ah),c=s[0];if(s.length>1){for(var u=s[1],l=1;l<s.length-1;l++)u+=$e(n[a+l-1])+s[l+1];e[c]=u}else e[c]=n[a]}}(i,r,t,n),i}},{key:"attributes",get:function(){var e={},t=this.nativeElement;if(!t)return e;var n=mc(t),r=n?n.lView:null;if(null===r)return{};var i=r[cr].data[n.nodeIndex].attrs,o=[];if(i)for(var a=0;a<i.length;){var s=i[a];if("string"!==typeof s)break;var c=i[a+1];e[s]=c,o.push(s.toLowerCase()),a+=2}var u,l=(0,h.Z)(t.attributes);try{for(l.s();!(u=l.n()).done;){var d=u.value;o.includes(d.name)||(e[d.name]=d.value)}}catch(f){l.e(f)}finally{l.f()}return e}},{key:"styles",get:function(){return this.nativeElement&&this.nativeElement.style?this.nativeElement.style:{}}},{key:"classes",get:function(){var e={},t=this.nativeElement.className;return("string"!==typeof t?t.baseVal.split(" "):t.split(" ")).forEach((function(t){return e[t]=!0})),e}},{key:"childNodes",get:function(){for(var e=this.nativeNode.childNodes,t=[],n=0;n<e.length;n++){var r=e[n];t.push(dw(r))}return t}},{key:"children",get:function(){var e=this.nativeElement;if(!e)return[];for(var t=e.children,n=[],r=0;r<t.length;r++){var i=t[r];n.push(dw(i))}return n}},{key:"query",value:function(e){return this.queryAll(e)[0]||null}},{key:"queryAll",value:function(e){var t=[];return ow(this,e,t,!0),t}},{key:"queryAllNodes",value:function(e){var t=[];return ow(this,e,t,!1),t}},{key:"triggerEventHandler",value:function(e,t){var n=this.nativeNode,r=[];this.listeners.forEach((function(i){if(i.name===e){var o=i.callback;o.call(n,t),r.push(o)}})),"function"===typeof n.eventListeners&&n.eventListeners(e).forEach((function(e){if(-1!==e.toString().indexOf("__ngUnwrap__")){var i=e("__ngUnwrap__");return-1===r.indexOf(i)&&i.call(n,t)}}))}}]),n}(nw);function iw(e){return"string"===typeof e||"boolean"===typeof e||"number"===typeof e||null===e}function ow(e,t,n,r){var i=mc(e.nativeNode),o=i?i.lView:null;null!==o?aw(o[cr].data[i.nodeIndex],o,t,n,r,e.nativeNode):uw(e.nativeNode,t,n,r)}function aw(e,t,n,r,i,o){ngDevMode&&Yr(e,t);var a=function(e,t){var n=null===e?-1:e.index;return-1!==n?(ngDevMode&&Yr(e,t),zi(t[n])):null}(e,t);if(11&e.type){if(cw(a,n,r,i,o),qr(e)){var s=Xi(e.index,t);s&&s[cr].firstChild&&aw(s[cr].firstChild,s,n,r,i,o)}else e.child&&aw(e.child,t,n,r,i,o),a&&uw(a,n,r,i);var c=t[e.index];Br(c)&&sw(c,n,r,i,o)}else if(4&e.type){var u=t[e.index];cw(u[Pr],n,r,i,o),sw(u,n,r,i,o)}else if(16&e.type){var l=t[Sr],d=l[fr].projection[e.projection];if(Array.isArray(d)){var f,p=(0,h.Z)(d);try{for(p.s();!(f=p.n()).done;){cw(f.value,n,r,i,o)}}catch(m){p.e(m)}finally{p.f()}}else if(d){var v=l[lr];aw(v[cr].data[d.index],v,n,r,i,o)}}else e.child&&aw(e.child,t,n,r,i,o);if(o!==a){var g=2&e.flags?e.projectionNext:e.next;g&&aw(g,t,n,r,i,o)}}function sw(e,t,n,r,i){for(var o=Vr;o<e.length;o++){var a=e[o],s=a[cr].firstChild;s&&aw(s,a,t,n,r,i)}}function cw(e,t,n,r,i){if(i!==e){var o=dw(e);if(!o)return;(r&&o instanceof rw&&t(o)&&-1===n.indexOf(o)||!r&&t(o)&&-1===n.indexOf(o))&&n.push(o)}}function uw(e,t,n,r){for(var i=e.childNodes,o=i.length,a=0;a<o;a++){var s=i[a],c=dw(s);c&&((r&&c instanceof rw&&t(c)&&-1===n.indexOf(c)||!r&&t(c)&&-1===n.indexOf(c))&&n.push(c),uw(s,t,n,r))}}new Map;var lw="__ng_debug__";function dw(e){return e instanceof Node?(e.hasOwnProperty(lw)||(e[lw]=e.nodeType==Node.ELEMENT_NODE?new rw(e):new nw(e)),e[lw]):null}var hw=function(){function e(){(0,v.Z)(this,e)}return(0,p.Z)(e,[{key:"supports",value:function(e){return sp(e)}},{key:"create",value:function(e){return new pw(e)}}]),e}(),fw=function(e,t){return t},pw=function(){function e(t){(0,v.Z)(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||fw}return(0,p.Z)(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var o=!n||t&&t.currentIndex<yw(n,r,i)?t:n,a=yw(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);var c=a-r,u=s-r;if(c!=u){for(var l=0;l<c;l++){var d=l<i.length?i[l]:i[l]=0,h=d+l;u<=h&&h<c&&(i[l]=d+1)}i[o.previousIndex]=u-c}}a!==s&&e(o,a,s)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!sp(e))throw new Xe(900,ngDevMode&&"Error trying to diff '".concat(Ge(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)r=e[s],i=this._trackByFn(s,r),null!==o&&Object.is(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),Object.is(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[Symbol.iterator]();!(r=i.next()).done;)t(r.value)}(e,(function(e){i=t._trackByFn(n,e),null!==o&&Object.is(o.trackById,i)?(a&&(o=t._verifyReinsertion(o,e,i,n)),Object.is(o.item,e)||t._addIdentityChange(o,e)):(o=t._mismatch(o,e,i,n),a=!0),o=o._next,n++})),this.length=n;return this._truncate(o),this.collection=e,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new vw(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),null===this._additionsTail?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new mw),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(null===this._movesTail?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mw),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,null===this._identityChangesTail?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}}]),e}(),vw=(0,p.Z)((function e(t,n){(0,v.Z)(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null})),gw=function(){function e(){(0,v.Z)(this,e),this._head=null,this._tail=null}return(0,p.Z)(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),mw=function(){function e(){(0,v.Z)(this,e),this.map=new Map}return(0,p.Z)(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new gw,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=e,r=this.map.get(n);return r?r.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),e}();function yw(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var bw=function(){function e(){(0,v.Z)(this,e)}return(0,p.Z)(e,[{key:"supports",value:function(e){return e instanceof Map||cp(e)}},{key:"create",value:function(){return new _w}}]),e}(),_w=function(){function e(){(0,v.Z)(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return(0,p.Z)(e,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||cp(e)))throw new Xe(900,ngDevMode&&"Error trying to diff '".concat(Ge(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Ew(e);return this._records.set(e,o),o.currentValue=t,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(n){return t(e[n],n)}))}}]),e}(),Ew=(0,p.Z)((function e(t){(0,v.Z)(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}));function Sw(){return new ww([new hw])}var ww=function(){function e(t){(0,v.Z)(this,e),this.factories=t}return(0,p.Z)(e,[{key:"find",value:function(e){var t,n=this.factories.find((function(t){return t.supports(e)}));if(null!=n)return n;throw new Xe(901,ngDevMode&&"Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||Sw())},deps:[[e,new Ts,new ws]]}}}]),e}();function xw(){return new Tw([new bw])}ww.\u0275prov=St({token:ww,providedIn:"root",factory:Sw});var Tw=function(){function e(t){(0,v.Z)(this,e),this.factories=t}return(0,p.Z)(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Xe(901,ngDevMode&&"Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||xw())},deps:[[e,new Ts,new ws]]}}}]),e}();Tw.\u0275prov=St({token:Tw,providedIn:"root",factory:xw});var Iw=[new bw],Rw=[new hw],kw=new ww(Rw),Ow=new Tw(Iw),Cw=RS(null,"core",[]),Aw=(0,p.Z)((function e(t){(0,v.Z)(this,e)}));Aw.\u0275fac=function(e){return new(e||Aw)(cn(LS))},Aw.\u0275mod=Kn({type:Aw}),Aw.\u0275inj=xt({}),("undefined"===typeof ngDevMode||ngDevMode)&&_b(Aw,[{type:wE}],(function(){return[{type:LS}]}),null);var Nw=function(){function e(){(0,v.Z)(this,e),this.views=[],this.indexByContent=new Map}return(0,p.Z)(e,[{key:"add",value:function(e){var t=JSON.stringify(e);if(!this.indexByContent.has(t)){var n=this.views.length;return this.views.push(e),this.indexByContent.set(t,n),n}return this.indexByContent.get(t)}},{key:"getAll",value:function(){return this.views}}]),e}(),jw=0;function Dw(e){return e.ssrId||(e.ssrId="t".concat(jw++)),e.ssrId}function Pw(e,t,n){var r=[];return kf(e,t,n,r),r.length}function Lw(e,t){var n=e[sr];return n&&!n.hasAttribute(ic)?qw(n,e,t):null}function Mw(e,t){var n=e[sr],r=Lw(n,t),i=zi(n[sr]),o=qw(i,e[lr],t),a=n[yr],s="".concat(r,"|").concat(o);a.setAttribute(i,yd,s)}function Uw(e,t){var n,r=new Nw,i=new Map,o=e._views,a=(0,h.Z)(o);try{for(a.s();!(n=a.n()).done;){var s=wd(n.value);if(null!==s){var c={serializedViewCollection:r,corruptedTextNodes:i};Br(s)?Mw(s,c):Lw(s,c),Ww(i,t)}}}catch(l){a.e(l)}finally{a.f()}var u=r.getAll();e.injector.get(od).set(md,u)}function Vw(e,t){for(var n=[],r="",i=Vr;i<e.length;i++){var o,s=e[i];zr(s)&&(s=s[Nr]);var c=s[cr],u=void 0,l=0;1===c.type?(u=c.ssrId,l=1):(u=Dw(c),l=Pw(c,s,c.firstChild));var d=(0,f.Z)((o={},(0,a.Z)(o,pd,u),(0,a.Z)(o,fd,l),o),Gw(e[i],t)),h=JSON.stringify(d);if(n.length>0&&h===r){var p,v=n[n.length-1];null!==(p=v[hd])&&void 0!==p||(v[hd]=1),v[hd]++}else r=h,n.push(d)}return n}function Fw(e,t,n){var r,i=t.index-Nr;null!==(r=e[vd])&&void 0!==r||(e[vd]={}),e[vd][i]=nv(t,n)}function Bw(e,t){var n,r=t.index-Nr;null!==(n=e[gd])&&void 0!==n||(e[gd]=[]),e[gd].includes(r)||e[gd].push(r)}function Gw(e,t){for(var n={},r=e[cr],i=Nr;i<r.bindingStartIndex;i++){var o=r.data[i],a=i-Nr;if(o)if(zw(o,e)&&Hw(o))Bw(n,o);else{if(Array.isArray(o.projection)){var s,c=(0,h.Z)(o.projection);try{for(c.s();!(s=c.n()).done;){var u=s.value;if(u){if(Array.isArray(u))throw Fp(zi(e[i]));Kr(u)||cc(u)||(zw(u,e)?Bw(n,u):Fw(n,u,e))}}}catch(E){c.e(E)}finally{c.f()}}if(Br(e[i])){var l,d,f=o.tView;if(null!==f)null!==(d=n[ld])&&void 0!==d||(n[ld]={}),n[ld][a]=Dw(f);var p=e[i][sr];if(Array.isArray(p)){var v=zi(p);v.hasAttribute(ic)||qw(v,p,t)}null!==(l=n[dd])&&void 0!==l||(n[dd]={}),n[dd][a]=Vw(e[i],t)}else if(Array.isArray(e[i])){var g=zi(e[i][sr]);g.hasAttribute(ic)||qw(g,e[i],t)}else{var m;if(8&o.type)null!==(m=n[ud])&&void 0!==m||(n[ud]={}),n[ud][a]=Pw(r,e,o.child);else if(16&o.type){for(var y=o.next;null!==y&&16&y.type;)y=y.next;y&&!cc(y)&&Fw(n,y,e)}else{if(1&o.type){var b,_=zi(e[i]);""===_.textContent?t.corruptedTextNodes.set(_,"ngetn"):(null===(b=_.nextSibling)||void 0===b?void 0:b.nodeType)===Node.TEXT_NODE&&t.corruptedTextNodes.set(_,"ngtns")}o.projectionNext&&o.projectionNext!==o.next&&!cc(o.projectionNext)&&Fw(n,o.projectionNext,e)}}}}return n}function qw(e,t,n){var r=t[yr];if(function(e){return 32===(32&e[ur])}(t)||function(e){var t,n=e[vr];return!(null===n||void 0===n||!n.constructor)&&(null===(t=Qn(n.constructor))||void 0===t?void 0:t.encapsulation)===Xt.ShadowDom}(t))return r.setAttribute(e,ic,""),null;var i=Gw(t,n),o=n.serializedViewCollection.add(i);return r.setAttribute(e,yd,o.toString()),o}function Ww(e,t){var n,r=(0,h.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=(0,d.Z)(n.value,2),o=i[0],a=i[1];o.after(t.createComment(a))}}catch(s){r.e(s)}finally{r.f()}}function Hw(e){for(var t=e;null!=t;){if(qr(t))return!0;t=t.parent}return!1}function zw(e,t){return!(16&e.type)&&!!t[e.index]&&!zi(t[e.index]).isConnected}var Kw=!1,Yw=1e4;function Zw(){Kw||(Kw=!0,_d=Ed,pv=vv,Rg=kg,bv=_v,iv=av,d_=f_,r_=i_,Kh=Yh)}function Jw(e,t){var n=e.isStable.pipe(Ve((function(e){return e}))).toPromise();if("undefined"!==typeof ngDevMode&&ngDevMode){var r=Yw,i=t.get(IE),o=t.get(eS).runOutsideAngular((function(){return setTimeout((function(){return function(e,t){var n="Angular hydration expected the ApplicationRef.isStable() to emit `true`, but it "+"didn't happen within ".concat(e,"ms. Angular hydration logic depends on the application becoming stable ")+"as a signal to complete hydration process.";t.warn(Qe(-506,n))}(r,i)}),r)}));n.finally((function(){return clearTimeout(o)}))}return n.then((function(){}))}function Xw(){return Rl([{provide:mh,useFactory:function(){var e=!0;if(ch()){var t=ln(od,{optional:!0});if(!(e=!(null===t||void 0===t||!t.get(md,null)))&&"undefined"!==typeof ngDevMode&&ngDevMode){var n=ln(IE),r=Qe(-505,"Angular hydration was requested on the client, but there was no serialized information present in the server response, thus hydration was not enabled. Make sure the `provideClientHydration()` is included into the list of providers in the server part of the application configuration.");n.warn(r)}}return e&&ln(rd).add("hydration"),e}},{provide:wl,useValue:function(){ch()&&ln(mh)&&(!function(){var e,t,n=Eu(),r=(0,h.Z)(n.body.childNodes);try{for(r.s();!(t=r.n()).done;){var i,o=t.value;if(o.nodeType===Node.COMMENT_NODE&&(null===(i=o.textContent)||void 0===i?void 0:i.trim())===bd){e=o;break}}}catch(a){r.e(a)}finally{r.f()}if(!e)throw new Xe(507,"undefined"!==typeof ngDevMode&&ngDevMode&&"Angular hydration logic detected that HTML content of this page was modified after it was produced during server side rendering. Make sure that there are no optimizations that remove comment nodes from HTML are enabled on your CDN. Angular hydration relies on HTML produced by the server, including whitespaces and comment nodes.")}(),Zw())},multi:!0},{provide:yh,useFactory:function(){return ch()&&ln(mh)}},{provide:yS,useFactory:function(){if(ch()&&ln(mh)){var e=ln(LS),t=ln(eh);return function(){Jw(e,t).then((function(){!function(e){var t,n=e._views,r=(0,h.Z)(n);try{for(r.s();!(t=r.n()).done;){var i=wd(t.value);null!==i&&null!==i[sr]&&(Fr(i)?n_(i):(n_(i[sr]),t_(i)),ngDevMode&&ngDevMode.dehydratedViewsCleanupRuns++)}}catch(o){r.e(o)}finally{r.f()}}(e),"undefined"!==typeof ngDevMode&&ngDevMode&&function(e){var t=e.get(IE),n="Angular hydrated ".concat(ngDevMode.hydratedComponents," component(s) ")+"and ".concat(ngDevMode.hydratedNodes," node(s), ")+"".concat(ngDevMode.componentsSkippedHydration," component(s) were skipped. ")+"Note: this feature is in Developer Preview mode. Learn more at https://angular.io/guide/hydration.";t.log(n)}(t)}))}}return function(){}},multi:!0}])}function Qw(e){return"boolean"===typeof e?e:null!=e&&"false"!==e}function $w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;return!isNaN(parseFloat(e))&&!isNaN(Number(e))?Number(e):t}function ex(e){return rs({usage:1,kind:"directive",type:e.type}).compileDirectiveDeclaration(A_,"ng:///".concat(e.type.name,"/\u0275fac.js"),e)}function tx(e){var t,n;_b(e.type,e.decorators,null!==(t=e.ctorParameters)&&void 0!==t?t:null,null!==(n=e.propDecorators)&&void 0!==n?n:null)}function nx(e){return rs({usage:1,kind:"component",type:e.type}).compileComponentDeclaration(A_,"ng:///".concat(e.type.name,"/\u0275cmp.js"),e)}function rx(e){return rs({usage:1,kind:ix(e.target),type:e.type}).compileFactoryDeclaration(A_,"ng:///".concat(e.type.name,"/\u0275fac.js"),e)}function ix(e){switch(e){case Ya.Directive:return"directive";case Ya.Component:return"component";case Ya.Injectable:return"injectable";case Ya.Pipe:return"pipe";case Ya.NgModule:return"NgModule"}}function ox(e){return rs({usage:1,kind:"injectable",type:e.type}).compileInjectableDeclaration(A_,"ng:///".concat(e.type.name,"/\u0275prov.js"),e)}function ax(e){return rs({usage:1,kind:"NgModule",type:e.type}).compileInjectorDeclaration(A_,"ng:///".concat(e.type.name,"/\u0275inj.js"),e)}function sx(e){return rs({usage:1,kind:"NgModule",type:e.type}).compileNgModuleDeclaration(A_,"ng:///".concat(e.type.name,"/\u0275mod.js"),e)}function cx(e){return rs({usage:1,kind:"pipe",type:e.type}).compilePipeDeclaration(A_,"ng:///".concat(e.type.name,"/\u0275pipe.js"),e)}function ux(e,t){ngDevMode&&Sh(e);var n=Qn(e),r=t.elementInjector||ql();return new Gf(n).create(r,t.projectableNodes,t.hostElement,t.environmentInjector)}function lx(e){var t=Qn(e);if(!t)return null;var n=new Gf(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}function dx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return Object.assign(e,t,{providers:[].concat((0,u.Z)(e.providers),(0,u.Z)(t.providers))})}),{providers:[]})}"undefined"!==typeof ngDevMode&&ngDevMode&&(Vt.$localize=Vt.$localize||function(){throw new Error("It looks like your application or one of its dependencies is using i18n.\nAngular 9 introduced a global `$localize()` function that needs to be loaded.\nPlease run `ng add @angular/localize` from the Angular CLI.\n(For non-CLI projects, add `import '@angular/localize/init';` to your `polyfills.ts` file.\nFor server-side rendering applications add the import to your `main.server.ts` file.)")})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var __webpack_exports__={};!function(){"use strict";var t={};__webpack_require__.r(t),__webpack_require__.d(t,{FirebaseError:function(){return Ur},SDK_VERSION:function(){return eo},_DEFAULT_ENTRY_NAME:function(){return Bi},_addComponent:function(){return Hi},_addOrOverwriteComponent:function(){return zi},_apps:function(){return qi},_clearComponents:function(){return Ji},_components:function(){return Wi},_getProvider:function(){return Yi},_registerComponent:function(){return Ki},_removeServiceInstance:function(){return Zi},deleteApp:function(){return io},getApp:function(){return no},getApps:function(){return ro},initializeApp:function(){return to},onLog:function(){return so},registerVersion:function(){return ao},setLogLevel:function(){return co}});var n=__webpack_require__(2791),r=__webpack_require__(1250),i=__webpack_require__(7689),o=__webpack_require__(9439),a=__webpack_require__(1087);function s(e,t){return function(){return e.apply(t,arguments)}}var c,u=Object.prototype.toString,l=Object.getPrototypeOf,d=(c=Object.create(null),function(e){var t=u.call(e);return c[t]||(c[t]=t.slice(8,-1).toLowerCase())}),h=function(e){return e=e.toLowerCase(),function(t){return d(t)===e}},f=function(e){return function(t){return typeof t===e}},p=Array.isArray,v=f("undefined");var g=h("ArrayBuffer");var m=f("string"),y=f("function"),b=f("number"),_=function(e){return null!==e&&"object"===typeof e},E=function(e){if("object"!==d(e))return!1;var t=l(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},S=h("Date"),w=h("File"),x=h("Blob"),T=h("FileList"),I=h("URLSearchParams");function R(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,o=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),p(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var a,s=o?Object.getOwnPropertyNames(e):Object.keys(e),c=s.length;for(n=0;n<c;n++)a=s[n],t.call(null,e[a],a,e)}}function k(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var O="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,C=function(e){return!v(e)&&e!==O};var A,N=(A="undefined"!==typeof Uint8Array&&l(Uint8Array),function(e){return A&&e instanceof A}),j=h("HTMLFormElement"),D=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),P=h("RegExp"),L=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};R(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},M="abcdefghijklmnopqrstuvwxyz",U="0123456789",V={DIGIT:U,ALPHA:M,ALPHA_DIGIT:M+M.toUpperCase()+U};var F=h("AsyncFunction"),B={isArray:p,isArrayBuffer:g,isBuffer:function(e){return null!==e&&!v(e)&&null!==e.constructor&&!v(e.constructor)&&y(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"===typeof FormData&&e instanceof FormData||y(e.append)&&("formdata"===(t=d(e))||"object"===t&&y(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&g(e.buffer)},isString:m,isNumber:b,isBoolean:function(e){return!0===e||!1===e},isObject:_,isPlainObject:E,isUndefined:v,isDate:S,isFile:w,isBlob:x,isRegExp:P,isFunction:y,isStream:function(e){return _(e)&&y(e.pipe)},isURLSearchParams:I,isTypedArray:N,isFileList:T,forEach:R,merge:function e(){for(var t=(C(this)&&this||{}).caseless,n={},r=function(r,i){var o=t&&k(n,i)||i;E(n[o])&&E(r)?n[o]=e(n[o],r):E(r)?n[o]=e({},r):p(r)?n[o]=r.slice():n[o]=r},i=0,o=arguments.length;i<o;i++)arguments[i]&&R(arguments[i],r);return n},extend:function(e,t,n){return R(t,(function(t,r){n&&y(t)?e[r]=s(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,o,a,s={};if(t=t||{},null==e)return t;do{for(o=(i=Object.getOwnPropertyNames(e)).length;o-- >0;)a=i[o],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&l(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:d,kindOfTest:h,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(p(e))return e;var t=e.length;if(!b(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:j,hasOwnProperty:D,hasOwnProp:D,reduceDescriptors:L,freezeMethods:function(e){L(e,(function(t,n){if(y(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];y(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return p(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:k,global:O,isContextDefined:C,ALPHABET:V,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&y(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(_(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=p(n)?[]:{};return R(n,(function(t,n){var o=e(t,r+1);!v(o)&&(i[n]=o)})),t[r]=void 0,i}}return n}(e,0)},isAsyncFn:F,isThenable:function(e){return e&&(_(e)||y(e))&&y(e.then)&&y(e.catch)}},G=__webpack_require__(5671),q=__webpack_require__(3144);function W(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}B.inherits(W,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var H=W.prototype,z={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){z[e]={value:e}})),Object.defineProperties(W,z),Object.defineProperty(H,"isAxiosError",{value:!0}),W.from=function(e,t,n,r,i,o){var a=Object.create(H);return B.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),W.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};var K=W,Y=null;function Z(e){return B.isPlainObject(e)||B.isArray(e)}function J(e){return B.endsWith(e,"[]")?e.slice(0,-2):e}function X(e,t,n){return e?e.concat(t).map((function(e,t){return e=J(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var Q=B.toFlatObject(B,{},null,(function(e){return/^is[A-Z]/.test(e)}));var $=function(e,t,n){if(!B.isObject(e))throw new TypeError("target must be an object");t=t||new(Y||FormData);var r=(n=B.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!B.isUndefined(t[e])}))).metaTokens,i=n.visitor||u,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&B.isSpecCompliantForm(t);if(!B.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(B.isDate(e))return e.toISOString();if(!s&&B.isBlob(e))throw new K("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(e)||B.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,i){var s=e;if(e&&!i&&"object"===typeof e)if(B.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(B.isArray(e)&&function(e){return B.isArray(e)&&!e.some(Z)}(e)||(B.isFileList(e)||B.endsWith(n,"[]"))&&(s=B.toArray(e)))return n=J(n),s.forEach((function(e,r){!B.isUndefined(e)&&null!==e&&t.append(!0===a?X([n],r,o):null===a?n:n+"[]",c(e))})),!1;return!!Z(e)||(t.append(X(i,n,o),c(e)),!1)}var l=[],d=Object.assign(Q,{defaultVisitor:u,convertValue:c,isVisitable:Z});if(!B.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!B.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),B.forEach(n,(function(n,o){!0===(!(B.isUndefined(n)||null===n)&&i.call(t,n,B.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])})),l.pop()}}(e),t};function ee(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function te(e,t){this._pairs=[],e&&$(e,this,t)}var ne=te.prototype;ne.append=function(e,t){this._pairs.push([e,t])},ne.toString=function(e){var t=e?function(t){return e.call(this,t,ee)}:ee;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var re=te;function ie(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function oe(e,t,n){if(!t)return e;var r,i=n&&n.encode||ie,o=n&&n.serialize;if(r=o?o(t,n):B.isURLSearchParams(t)?t.toString():new re(t,n).toString(i)){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var ae=function(){function e(){(0,G.Z)(this,e),this.handlers=[]}return(0,q.Z)(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){B.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),se=ae,ce={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ue={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:re,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var le=function(e){function t(e,n,r,i){var o=e[i++],a=Number.isFinite(+o),s=i>=e.length;return o=!o&&B.isArray(r)?r.length:o,s?(B.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a):(r[o]&&B.isObject(r[o])||(r[o]=[]),t(e,n,r[o],i)&&B.isArray(r[o])&&(r[o]=function(e){var t,n,r={},i=Object.keys(e),o=i.length;for(t=0;t<o;t++)r[n=i[t]]=e[n];return r}(r[o])),!a)}if(B.isFormData(e)&&B.isFunction(e.entries)){var n={};return B.forEachEntry(e,(function(e,r){t(function(e){return B.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null},de={"Content-Type":void 0};var he={transitional:ce,adapter:["xhr","http"],transformRequest:[function(t,n){var r,i=n.getContentType()||"",o=i.indexOf("application/json")>-1,a=B.isObject(t);if(a&&B.isHTMLForm(t)&&(t=new FormData(t)),B.isFormData(t))return o&&o?JSON.stringify(le(t)):t;if(B.isArrayBuffer(t)||B.isBuffer(t)||B.isStream(t)||B.isFile(t)||B.isBlob(t))return t;if(B.isArrayBufferView(t))return t.buffer;if(B.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return $(e,new ue.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return ue.isNode&&B.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(t,this.formSerializer).toString();if((r=B.isFileList(t))||i.indexOf("multipart/form-data")>-1){var s=this.env&&this.env.FormData;return $(r?{"files[]":t}:t,s&&new s,this.formSerializer)}}return a||o?(n.setContentType("application/json",!1),function(t,n,r){if(B.isString(t))try{return(n||JSON.parse)(t),B.trim(t)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var n=this.transitional||he.transitional,r=n&&n.forcedJSONParsing,i="json"===this.responseType;if(t&&B.isString(t)&&(r&&!this.responseType||i)){var o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(e){if(o){if("SyntaxError"===e.name)throw K.from(e,K.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ue.classes.FormData,Blob:ue.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};B.forEach(["delete","get","head"],(function(e){he.headers[e]={}})),B.forEach(["post","put","patch"],(function(e){he.headers[e]=B.merge(de)}));var fe=he,pe=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ve=Symbol("internals");function ge(e){return e&&String(e).trim().toLowerCase()}function me(e){return!1===e||null==e?e:B.isArray(e)?e.map(me):String(e)}function ye(e,t,n,r,i){return B.isFunction(r)?r.call(this,t,n):(i&&(t=n),B.isString(t)?B.isString(r)?-1!==t.indexOf(r):B.isRegExp(r)?r.test(t):void 0:void 0)}var be=function(e,t){function n(e){(0,G.Z)(this,n),e&&this.set(e)}return(0,q.Z)(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=ge(t);if(!i)throw new Error("header name must be a non-empty string");var o=B.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=me(e))}var o=function(e,t){return B.forEach(e,(function(e,n){return i(e,n,t)}))};return B.isPlainObject(e)||e instanceof this.constructor?o(e,t):B.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?o(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&pe[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=ge(e)){var n=B.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(B.isFunction(t))return t.call(this,r,n);if(B.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=ge(e)){var n=B.findKey(this,e);return!(!n||void 0===this[n]||t&&!ye(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=ge(e)){var i=B.findKey(n,e);!i||t&&!ye(0,n[i],i,t)||(delete n[i],r=!0)}}return B.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!ye(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return B.forEach(this,(function(r,i){var o=B.findKey(n,i);if(o)return t[o]=me(r),void delete t[i];var a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();a!==i&&delete t[i],t[a]=me(r),n[a]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return B.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&B.isArray(n)?n.join(", "):n)})),t}},{key:e,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=(0,o.Z)(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:t,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[ve]=this[ve]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=ge(e);t[r]||(!function(e,t){var n=B.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return B.isArray(e)?e.forEach(r):r(e),this}}]),n}(Symbol.iterator,Symbol.toStringTag);be.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),B.freezeMethods(be.prototype),B.freezeMethods(be);var _e=be;function Ee(e,t){var n=this||fe,r=t||n,i=_e.from(r.headers),o=r.data;return B.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function Se(e){return!(!e||!e.__CANCEL__)}function we(e,t,n){K.call(this,null==e?"canceled":e,K.ERR_CANCELED,t,n),this.name="CanceledError"}B.inherits(we,K,{__CANCEL__:!0});var xe=we;var Te=ue.isStandardBrowserEnv?{write:function(e,t,n,r,i,o){var a=[];a.push(e+"="+encodeURIComponent(t)),B.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),B.isString(r)&&a.push("path="+r),B.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Ie(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Re=ue.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=B.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var ke=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),o=0,a=0;return t=void 0!==t?t:1e3,function(s){var c=Date.now(),u=i[a];n||(n=c),r[o]=s,i[o]=c;for(var l=a,d=0;l!==o;)d+=r[l++],l%=e;if((o=(o+1)%e)===a&&(a=(a+1)%e),!(c-n<t)){var h=u&&c-u;return h?Math.round(1e3*d/h):void 0}}};function Oe(e,t){var n=0,r=ke(50,250);return function(i){var o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-n,c=r(s);n=o;var u={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&o<=a?(a-o)/c:void 0,event:i};u[t?"download":"upload"]=!0,e(u)}}var Ce="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,o=_e.from(e.headers).normalize(),a=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}B.isFormData(i)&&(ue.isStandardBrowserEnv||ue.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.setContentType("multipart/form-data;",!1));var c=new XMLHttpRequest;if(e.auth){var u=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(u+":"+l))}var d=Ie(e.baseURL,e.url);function h(){if(c){var r=_e.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new K("Request failed with status code "+n.status,[K.ERR_BAD_REQUEST,K.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:a&&"text"!==a&&"json"!==a?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:e,request:c}),c=null}}if(c.open(e.method.toUpperCase(),oe(d,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=h:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(h)},c.onabort=function(){c&&(n(new K("Request aborted",K.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new K("Network Error",K.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||ce;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new K(t,r.clarifyTimeoutError?K.ETIMEDOUT:K.ECONNABORTED,e,c)),c=null},ue.isStandardBrowserEnv){var f=(e.withCredentials||Re(d))&&e.xsrfCookieName&&Te.read(e.xsrfCookieName);f&&o.set(e.xsrfHeaderName,f)}void 0===i&&o.setContentType(null),"setRequestHeader"in c&&B.forEach(o.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),B.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&"json"!==a&&(c.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&c.addEventListener("progress",Oe(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Oe(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){c&&(n(!t||t.type?new xe(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(d);p&&-1===ue.protocols.indexOf(p)?n(new K("Unsupported protocol "+p+":",K.ERR_BAD_REQUEST,e)):c.send(i||null)}))},Ae={http:Y,xhr:Ce};B.forEach(Ae,(function(t,n){if(t){try{Object.defineProperty(t,"name",{value:n})}catch(e){}Object.defineProperty(t,"adapterName",{value:n})}}));var Ne=function(e){for(var t,n,r=(e=B.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=B.isString(t)?Ae[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new K("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(B.hasOwnProp(Ae,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!B.isFunction(n))throw new TypeError("adapter is not a function");return n};function je(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new xe(null,e)}function De(e){return je(e),e.headers=_e.from(e.headers),e.data=Ee.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ne(e.adapter||fe.adapter)(e).then((function(t){return je(e),t.data=Ee.call(e,e.transformResponse,t),t.headers=_e.from(t.headers),t}),(function(t){return Se(t)||(je(e),t&&t.response&&(t.response.data=Ee.call(e,e.transformResponse,t.response),t.response.headers=_e.from(t.response.headers))),Promise.reject(t)}))}var Pe=function(e){return e instanceof _e?e.toJSON():e};function Le(e,t){t=t||{};var n={};function r(e,t,n){return B.isPlainObject(e)&&B.isPlainObject(t)?B.merge.call({caseless:n},e,t):B.isPlainObject(t)?B.merge({},t):B.isArray(t)?t.slice():t}function i(e,t,n){return B.isUndefined(t)?B.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!B.isUndefined(t))return r(void 0,t)}function a(e,t){return B.isUndefined(t)?B.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:function(e,t){return i(Pe(e),Pe(t),!0)}};return B.forEach(Object.keys(Object.assign({},e,t)),(function(r){var o=c[r]||i,a=o(e[r],t[r],r);B.isUndefined(a)&&o!==s||(n[r]=a)})),n}var Me="1.4.0",Ue={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Ue[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var Ve={};Ue.transitional=function(e,t,n){function r(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,o){if(!1===e)throw new K(r(i," has been removed"+(t?" in "+t:"")),K.ERR_DEPRECATED);return t&&!Ve[i]&&(Ve[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};var Fe={assertOptions:function(e,t,n){if("object"!==typeof e)throw new K("options must be an object",K.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],c=void 0===s||a(s,o,e);if(!0!==c)throw new K("option "+o+" must be "+c,K.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new K("Unknown option "+o,K.ERR_BAD_OPTION)}},validators:Ue},Be=Fe.validators,Ge=function(){function e(t){(0,G.Z)(this,e),this.defaults=t,this.interceptors={request:new se,response:new se}}return(0,q.Z)(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n,r=t=Le(this.defaults,t),i=r.transitional,o=r.paramsSerializer,a=r.headers;void 0!==i&&Fe.assertOptions(i,{silentJSONParsing:Be.transitional(Be.boolean),forcedJSONParsing:Be.transitional(Be.boolean),clarifyTimeoutError:Be.transitional(Be.boolean)},!1),null!=o&&(B.isFunction(o)?t.paramsSerializer={serialize:o}:Fe.assertOptions(o,{encode:Be.function,serialize:Be.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=a&&B.merge(a.common,a[t.method]))&&B.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete a[e]})),t.headers=_e.concat(n,a);var s=[],c=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(c=c&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));var u,l=[];this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));var d,h=0;if(!c){var f=[De.bind(this),void 0];for(f.unshift.apply(f,s),f.push.apply(f,l),d=f.length,u=Promise.resolve(t);h<d;)u=u.then(f[h++],f[h++]);return u}d=s.length;var p=t;for(h=0;h<d;){var v=s[h++],g=s[h++];try{p=v(p)}catch(Qo){g.call(this,Qo);break}}try{u=De.call(this,p)}catch(Qo){return Promise.reject(Qo)}for(h=0,d=l.length;h<d;)u=u.then(l[h++],l[h++]);return u}},{key:"getUri",value:function(e){return oe(Ie((e=Le(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();B.forEach(["delete","get","head","options"],(function(e){Ge.prototype[e]=function(t,n){return this.request(Le(n||{},{method:e,url:t,data:(n||{}).data}))}})),B.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Le(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Ge.prototype[e]=t(),Ge.prototype[e+"Form"]=t(!0)}));var qe=Ge,We=function(){function e(t){if((0,G.Z)(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new xe(e,t,i),n(r.reason))}))}return(0,q.Z)(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}]),e}();var He={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(He).forEach((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1];He[r]=n}));var ze=He;var Ke=function e(t){var n=new qe(t),r=s(qe.prototype.request,n);return B.extend(r,qe.prototype,n,{allOwnKeys:!0}),B.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Le(t,n))},r}(fe);Ke.Axios=qe,Ke.CanceledError=xe,Ke.CancelToken=We,Ke.isCancel=Se,Ke.VERSION=Me,Ke.toFormData=$,Ke.AxiosError=K,Ke.Cancel=Ke.CanceledError,Ke.all=function(e){return Promise.all(e)},Ke.spread=function(e){return function(t){return e.apply(null,t)}},Ke.isAxiosError=function(e){return B.isObject(e)&&!0===e.isAxiosError},Ke.mergeConfig=Le,Ke.AxiosHeaders=_e,Ke.formToJSON=function(e){return le(B.isHTMLForm(e)?new FormData(e):e)},Ke.HttpStatusCode=ze,Ke.default=Ke;var Ye=Ke,Ze=__webpack_require__(4050),Je=__webpack_require__(184),Xe=function(){var e=(0,i.s0)(),t=localStorage.getItem("iddofuser"),n=(0,i.TH)(),r=["/Astrolive","/AstrologerDetail","/AstrologersList","/profile","/speaktoaustrology","/checkout","/Astrolive","/profile","/PujaListDetail","/VideoCall","/Chat","/ChatForm","/payment","/Streaming","/Chatastrologer","/Streaming"].includes(n.pathname);return!t&&r?(0,Je.jsx)(i.Fg,{to:"/login"}):(0,Je.jsx)(Je.Fragment,{children:t?(0,Je.jsx)("header",{class:"pb-md-4 pb-0",children:(0,Je.jsx)("div",{class:"top-nav top-header sticky-header",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsxs)("div",{class:"col-12",children:[(0,Je.jsxs)("div",{class:"navbar-top",children:[(0,Je.jsx)(a.rU,{to:"/",class:"web-logo nav-logo",children:(0,Je.jsx)("img",{style:{width:"283px"},src:"../assets/images/logo/222222.png",class:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{class:"middle-box",style:{color:"gray",marginLeft:"14%"},children:[(0,Je.jsx)("i",{"data-feather":"phone-call",style:{marginRight:"10px"}}),(0,Je.jsxs)("div",{class:"delivery-detail",style:{marginRight:"15px"},children:[(0,Je.jsx)("h6",{children:"Customer care"}),(0,Je.jsx)("h6",{children:"+91 888 104 2340"})]}),(0,Je.jsx)("button",{onclick:"location.href = '#';",style:{backgroundColor:"white",color:"gray",borderColor:"#ffb00d"},class:"",children:"Download App"})]}),(0,Je.jsxs)("div",{class:"rightside-box",children:[(0,Je.jsx)("div",{class:"search-full",children:(0,Je.jsxs)("div",{class:"input-group",children:[(0,Je.jsx)("span",{class:"input-group-text",children:(0,Je.jsx)("i",{"data-feather":"search",class:"font-light"})}),(0,Je.jsx)("input",{type:"text",class:"form-control search-type",placeholder:"Search here.."}),(0,Je.jsx)("span",{class:"input-group-text close-search",children:(0,Je.jsx)("i",{"data-feather":"x",class:"font-light"})})]})}),(0,Je.jsxs)("ul",{class:"right-side-menu",children:[(0,Je.jsx)("li",{class:"right-side",children:(0,Je.jsx)("div",{class:"delivery-login-box",children:(0,Je.jsx)("div",{class:"delivery-icon",children:(0,Je.jsx)("div",{class:"search-box",children:(0,Je.jsx)("i",{"data-feather":"search"})})})})}),(0,Je.jsx)("li",{class:"right-side",children:(0,Je.jsx)("div",{class:"onhover-dropdown header-badge"})}),(0,Je.jsx)("ul",{children:(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{style:{display:"flex"},children:[(0,Je.jsx)(a.rU,{to:"/profile",children:(0,Je.jsx)("div",{class:"delivery-login-box",children:(0,Je.jsx)("div",{class:"delivery-icon",children:(0,Je.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-user",children:[(0,Je.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,Je.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})})})}),(0,Je.jsx)(a.rU,{to:"/",style:{display:"flex",height:"28px"},children:(0,Je.jsx)("button",{onClick:function(){return localStorage.removeItem("iddofuser"),localStorage.removeItem("_id"),localStorage.removeItem("totalminute"),localStorage.removeItem("vcdata"),localStorage.removeItem("AstroData"),localStorage.removeItem("data"),localStorage.removeItem("videoatro_token"),localStorage.removeItem("userData"),localStorage.removeItem("chatdata"),localStorage.removeItem("videoatro_token"),localStorage.removeItem("tarotid"),localStorage.removeItem("vcidddata"),localStorage.removeItem("data"),localStorage.removeItem("videoatro_token"),localStorage.removeItem("data"),localStorage.removeItem("chatiddd"),localStorage.removeItem("videorate"),localStorage.removeItem("chatrate"),localStorage.removeItem("channel_token"),localStorage.removeItem("responseData"),localStorage.removeItem("responseDatadata"),localStorage.removeItem("nameofonetarot"),localStorage.removeItem("AstroData"),localStorage.removeItem("valuee"),localStorage.removeItem("lat"),localStorage.removeItem("tarotid"),localStorage.removeItem("tarotimage"),localStorage.removeItem("latitude"),localStorage.removeItem("longitude"),(0,Je.jsx)(i.Fg,{to:"/login"})},class:"btn btn-md bg-dark cart-button text-white w-80",children:"LogOut"})})]})})})]})]})]}),(0,Je.jsx)("div",{class:"container-fluid-lg main-nav navbar navbar-expand-xl navbar-light navbar-sticky  ",children:(0,Je.jsxs)("ul",{class:"flex-row navbar-light",children:[(0,Je.jsx)("li",{class:"nav-item ",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/",children:"Home"})}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/AstrologersList",children:"Speak to Astrologer"})}),(0,Je.jsxs)("li",{class:"nav-item dropdown",children:[(0,Je.jsx)("a",{style:{color:"black"},class:"nav-link dropdown-toggle",href:"javascript:void(0)","data-bs-toggle":"dropdown",children:"Horoscope"}),(0,Je.jsxs)("ul",{class:"dropdown-menu",children:[(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/Horoscope_page",children:"Today's Horoscope"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/Horoscope_monthly",children:"Monthly Horoscope"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/Horoscope_yearly",children:"Yearly Horoscope"})})]})]}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/spritual",children:"Spiritual Guide"})}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/panchang",children:"Panchang"})}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/kundali",children:"Kundli"})}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/kundali_milan",children:"Kundli Milan"})}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/muhurat",children:"Muhurat"})}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/tarot",children:"Tarot"})}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/nmart",children:"N-Mart"})}),(0,Je.jsxs)("li",{class:"nav-item dropdown",children:[(0,Je.jsx)("a",{style:{color:"black"},class:"nav-link dropdown-toggle",href:"javascript:void(0)","data-bs-toggle":"dropdown",children:"Others"}),(0,Je.jsxs)("ul",{class:"dropdown-menu",children:[(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/blog",children:"Blog"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/Numerology",children:"Numerology"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/nmart",children:"Vastu"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/zodiac",children:"Zodiac"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/pooja",children:"Pooja"})})]})]})]})})]})})})})}):(0,Je.jsx)("header",{class:"pb-md-4 pb-0",children:(0,Je.jsx)("div",{class:"top-nav top-header sticky-header",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsxs)("div",{class:"col-12",children:[(0,Je.jsxs)("div",{class:"navbar-top",children:[(0,Je.jsx)(a.rU,{to:"/",class:"web-logo nav-logo",children:(0,Je.jsx)("img",{style:{width:"283px"},src:"../assets/images/logo/222222.png",class:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{class:"middle-box",style:{color:"gray",marginLeft:"14%"},children:[(0,Je.jsx)("i",{"data-feather":"phone-call",style:{marginRight:"10px"}}),(0,Je.jsxs)("div",{class:"delivery-detail",style:{marginRight:"15px"},children:[(0,Je.jsx)("h6",{children:"Customer care"}),(0,Je.jsx)("h6",{children:"+91 888 104 2340"})]}),(0,Je.jsx)("button",{onclick:"location.href = '#';",style:{backgroundColor:"white",color:"gray",borderColor:"#ffb00d"},class:"",children:"Download App"})]}),(0,Je.jsxs)("div",{class:"rightside-box",children:[(0,Je.jsx)("div",{class:"search-full",children:(0,Je.jsxs)("div",{class:"input-group",children:[(0,Je.jsx)("span",{class:"input-group-text",children:(0,Je.jsx)("i",{"data-feather":"search",class:"font-light"})}),(0,Je.jsx)("input",{type:"text",class:"form-control search-type",placeholder:"Search here.."}),(0,Je.jsx)("span",{class:"input-group-text close-search",children:(0,Je.jsx)("i",{"data-feather":"x",class:"font-light"})})]})}),(0,Je.jsxs)("ul",{class:"right-side-menu",children:[(0,Je.jsx)("li",{class:"right-side",children:(0,Je.jsx)("div",{class:"delivery-login-box",children:(0,Je.jsx)("div",{class:"delivery-icon",children:(0,Je.jsx)("div",{class:"search-box",children:(0,Je.jsx)("i",{"data-feather":"search"})})})})}),(0,Je.jsx)("li",{class:"right-side",children:(0,Je.jsx)("div",{class:"onhover-dropdown header-badge"})}),(0,Je.jsx)("ul",{children:(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{style:{display:"flex",height:"28px"},children:[(0,Je.jsx)("button",{onClick:function(){return e("/login")},class:"btn btn-md bg-dark cart-button text-white w-80",children:"Login"}),(0,Je.jsx)("button",{onClick:function(){return e("/login")},class:"btn btn-md bg-dark cart-button text-white w-80",style:{marginLeft:"10px"},children:"Sign up"})]})})})]})]})]}),(0,Je.jsx)("div",{class:"container-fluid-lg main-nav navbar navbar-expand-xl navbar-light navbar-sticky  ",children:(0,Je.jsxs)("ul",{class:"flex-row navbar-light",children:[(0,Je.jsx)("li",{class:"nav-item ",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/",children:"Home"})}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/AstrologersList",children:"Speak to Astrologer"})}),(0,Je.jsxs)("li",{class:"nav-item dropdown",children:[(0,Je.jsx)("a",{style:{color:"black"},class:"nav-link dropdown-toggle",href:"javascript:void(0)","data-bs-toggle":"dropdown",children:"Horoscope"}),(0,Je.jsxs)("ul",{class:"dropdown-menu",children:[(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/Horoscope_page",children:"Today's Horoscope"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/Horoscope_monthly",children:"Monthly Horoscope"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/Horoscope_yearly",children:"Yearly Horoscope"})})]})]}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/spritual",children:"Spiritual Guide"})}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/panchang",children:"Panchang"})}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/kundali",children:"Kundli"})}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/kundali_milan",children:"Kundli Milan"})}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/muhurat",children:"Muhurat"})}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/tarot",children:"Tarot"})}),(0,Je.jsx)("li",{class:"nav-item",children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"nav-link",to:"/nmart",children:"N-Mart"})}),(0,Je.jsxs)("li",{class:"nav-item dropdown",children:[(0,Je.jsx)("a",{style:{color:"black"},class:"nav-link dropdown-toggle",href:"javascript:void(0)","data-bs-toggle":"dropdown",children:"Others"}),(0,Je.jsxs)("ul",{class:"dropdown-menu",children:[(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/blog",children:"Blog"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/Numerology",children:"Numerology"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/nmart",children:"Vastu"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/zodiac",children:"Zodiac"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)(a.rU,{style:{color:"black"},class:"dropdown-item",to:"/pooja",children:"Pooja"})})]})]})]})})]})})})})})})},Qe=function(){return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("section",{className:"home-section pt-2",children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsx)("div",{className:"row g-4",children:(0,Je.jsx)("div",{className:"col-xl-12 ratio_30",children:(0,Je.jsxs)("div",{className:"home-contain h-100",children:[(0,Je.jsx)("div",{className:"h-100",children:(0,Je.jsx)("img",{style:{width:"100%",height:"45vh"},src:"../assets/images/vegetable/banner/1.jpg",className:"bg-img blur-up lazyload img-fluid",alt:"home image"})}),(0,Je.jsx)("div",{className:"home-detail p-center-left w-60",style:{marginLeft:"27%"},children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h3",{className:"lh-base fw-bold text-white ",children:(0,Je.jsx)("span",{children:"Problems in life ?"})}),(0,Je.jsx)("h3",{className:"lh-base fw-bold text-white ",children:"Best Astrologer Available for you"}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("h3",{className:"lh-base fw-bold text-white",children:["First 2 Calls FREE",(0,Je.jsxs)("span",{className:"daily",children:[(0,Je.jsx)("button",{onclick:"location.href = '#';",className:"btn text-white btn-md mt-xxl-4 mt-2 home-button mend-auto  ",style:{marginLeft:"15px",backgroundColor:"#d99f46"},children:"Call Now"})," "]})]})]})})]})})})})})})},$e=function(){return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsx)("div",{className:"tab-content",id:"myTabContent",style:{marginTop:"-30px"},children:(0,Je.jsx)("div",{className:"tab-pane fade show active",id:"all",role:"tabpanel","aria-labelledby":"all-tab",children:(0,Je.jsxs)("div",{className:"row g-8",children:[(0,Je.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-6 col-6 wow fadeInUp",children:(0,Je.jsxs)("div",{className:"product-box-4",children:[(0,Je.jsx)("div",{className:"product-image",children:(0,Je.jsx)(a.rU,{to:"/Chatastrologer",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/cate1/chat.png",className:"img-fluid",alt:"",style:{height:"60px"}})})}),(0,Je.jsx)("div",{className:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/Chatastrologer",children:(0,Je.jsx)("h5",{className:"name",children:"Chat with Astrologer"})})})]})}),(0,Je.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-6 col-6 wow fadeInUp","data-wow-delay":"0.05s",children:(0,Je.jsxs)("div",{className:"product-box-4",children:[(0,Je.jsx)("div",{className:"product-image",children:(0,Je.jsx)(a.rU,{to:"/AstrologersList",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/cate1/phone.png",className:"img-fluid",alt:"",style:{height:"60px"}})})}),(0,Je.jsx)("div",{className:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/AstrologersList",children:(0,Je.jsx)("h5",{className:"name",children:"Talk to Astrologer"})})})]})}),(0,Je.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-6 col-6 wow fadeInUp","data-wow-delay":"0.5s",children:(0,Je.jsxs)("div",{className:"product-box-4",children:[(0,Je.jsx)("div",{className:"product-image",children:(0,Je.jsx)(a.rU,{to:"/Astrolive",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/cate1/livechat.png",className:"img-fluid",alt:"",style:{height:"60px"}})})}),(0,Je.jsx)("div",{className:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/Astrolive",children:(0,Je.jsx)("h5",{className:"name",children:"Live Astrologers"})})})]})}),(0,Je.jsx)("div",{className:"col-xxl-2 col-lg-3 col-md-6 col-6 wow fadeInUp","data-wow-delay":"0.55s",children:(0,Je.jsxs)("div",{className:"product-box-4",children:[(0,Je.jsx)("div",{className:"product-image",children:(0,Je.jsx)(a.rU,{to:"/Videocallwithastro",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/cate1/videocamera.png",className:"img-fluid",alt:"",style:{height:"60px"}})})}),(0,Je.jsx)("div",{className:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/Videocallwithastro",children:(0,Je.jsx)("h5",{className:"name",children:"Video Call With Astrologers"})})})]})})]})})})})})})})})},et=function(){return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsx)("div",{className:"banner-contain",children:(0,Je.jsxs)("div",{className:"banner-contain hover-effect",style:{height:""},children:[(0,Je.jsx)("img",{src:"../assets/images/vegetable/banner/banner1.jpg",className:"bg-img blur-up lazyload img-fluid",alt:"banner",style:{width:"100%",height:"27vh"}}),(0,Je.jsx)("div",{className:"banner-details p-center p-sm-4 p-3 text-white text-center",children:(0,Je.jsx)("div",{})})]})})})})})})})},tt=__webpack_require__(1413),nt=__webpack_require__(5717),rt=function(){var e=(0,n.useState)(null),t=(0,o.Z)(e,2),r=(t[0],t[1]),i=new Date,s=i.getDate(),c=i.getMonth()+1,u=i.getFullYear();(0,n.useEffect)((function(){var e={day:s,month:c,year:u,hour:7,min:45,lat:19.132,lon:72.342,tzone:5.5},t="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("horo_chart_image/:chartId"),e,{headers:{authorization:t,"Content-Type":"application/json"}}).then((function(e){r(e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),[]);return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("section",{className:"category-section-2",children:(0,Je.jsxs)("div",{className:"container-fluid-lg",children:[(0,Je.jsx)("div",{className:"title",children:(0,Je.jsx)("h2",{children:"Daily Horoscopes"})}),(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsx)("div",{className:"category-slider arrow-slider",children:(0,Je.jsxs)(nt.Z,(0,tt.Z)((0,tt.Z)({},{dots:!1,infinite:!0,speed:500,slidesToShow:6,slidesToScroll:1,flexDirection:"row"}),{},{children:[(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-1",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/1.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Aries"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[s,"-",c,"-",u]})]})]}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.05s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-2",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/2.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Taurus"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[s,"-",c,"-",u]})]})]})}),(0,Je.jsx)("div",{style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.1s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-3",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/3.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Gemini"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[s,"-",c,"-",u]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.15s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/4.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Cancer"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[s,"-",c,"-",u]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.2s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/5.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Leo"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[s,"-",c,"-",u]})]})]})}),(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.25s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-1",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/6.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Virgo"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[s,"-",c,"-",u]})]})]}),(0,Je.jsx)("div",{style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.3s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-2",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/7.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Libra"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[s,"-",c,"-",u]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.35s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-3",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/8.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Scorpio"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[s,"-",c,"-",u]})]})]})}),(0,Je.jsx)("div",{style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.4s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/9.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Sagittarius"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[s,"-",c,"-",u]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.45s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/10.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Capricorn"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[s,"-",c,"-",u]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.5s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/11.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Aquarius"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[s,"-",c,"-",u]})]})]})}),(0,Je.jsx)("div",{style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.55s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/12.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Pisces "}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[s,"-",c,"-",u]})]})]})})]}))})})})]})})})},it=function(){var e=(0,n.useState)(null),t=(0,o.Z)(e,2),r=t[0],i=t[1],s=localStorage.getItem("userData"),c=JSON.parse(s),u=(0,n.useState)(c),l=(0,o.Z)(u,2),d=(l[0],l[1],new Date),h=d.getDate(),f=d.getMonth()+1,p=d.getFullYear();return(0,n.useEffect)((function(){var e=localStorage.getItem("latitude"),t=localStorage.getItem("longitude"),n={day:h,month:f,year:p,hour:10,min:25,lat:e?parseFloat(e):12.12,lon:t?parseFloat(t):72.12,tzone:5.5},r="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("advanced_panchang"),n,{headers:{authorization:r,"Content-Type":"application/json"}}).then((function(e){i(e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),[h,f,p]),(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-4",children:(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-2",children:(0,Je.jsx)("div",{class:"row g-4 ratio_65",children:(0,Je.jsxs)("div",{class:"slider-3 arrow-slider row",children:[(0,Je.jsx)("div",{className:"col-sm-12 col-lg-4 col-md-4",children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)(a.rU,{to:"/panchangg",children:(0,Je.jsx)("img",{style:{height:"200px",width:"100%"},src:"../assets/images/blog/todaypan4.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",style:{overflowY:"scroll",position:"relative",height:"350px"},children:[(0,Je.jsx)("div",{children:(0,Je.jsxs)(a.rU,{to:"/panchangg",children:[(0,Je.jsx)("h3",{style:{fontSize:"30px"},children:"Panchang"}),(0,Je.jsxs)("h4",{children:[null===r||void 0===r?void 0:r.day,"  ",h,", ",f," , ",p]})]})}),(0,Je.jsxs)("div",{style:{position:"absolute"},children:[(0,Je.jsx)(a.rU,{to:"/panchangg",children:(0,Je.jsx)("ul",{children:(0,Je.jsx)("table",{class:"home_table",children:(0,Je.jsxs)("tbody",{children:[(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Date"}),(0,Je.jsxs)("td",{children:[null===r||void 0===r?void 0:r.day,", ",h,", ",f," , ",p]}),(0,Je.jsx)("hr",{})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Tithi"}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.tithi.details.tithi_name})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Day"}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.day})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Paksha"}),(0,Je.jsxs)("td",{children:[" ",null===r||void 0===r?void 0:r.paksha]})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Sunrise"}),(0,Je.jsx)("td",{id:"sunRise",children:null===r||void 0===r?void 0:r.sunrise})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Sunset"}),(0,Je.jsx)("td",{id:"sunSet",children:null===r||void 0===r?void 0:r.sunset})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Moonrise"}),(0,Je.jsxs)("td",{id:"moonRise",children:[" ",null===r||void 0===r?void 0:r.moonrise]})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Nakshatra"}),(0,Je.jsxs)("td",{children:[" ",null===r||void 0===r?void 0:r.nakshatra.details.nak_name]})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Nakshtra Till"}),(0,Je.jsxs)("td",{id:"nakshtra",children:[null===r||void 0===r?void 0:r.nakshatra.end_time.hour,":",null===r||void 0===r?void 0:r.nakshatra.end_time.minute,":",null===r||void 0===r?void 0:r.nakshatra.end_time.second]})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Yog"}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.yog.details.yog_name})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Yog Till"}),(0,Je.jsxs)("td",{id:"yog",children:[null===r||void 0===r?void 0:r.yog.end_time.hour," : ",null===r||void 0===r?void 0:r.yog.end_time.minute," : ",null===r||void 0===r?void 0:r.yog.end_time.second]})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Karan I"}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.karan.details.karan_name})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Surya Rashi"}),(0,Je.jsx)("td",{children:"Pisces"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Chandra Rashi"}),(0,Je.jsx)("td",{children:"Virgo"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Rahu Kal"}),(0,Je.jsxs)("td",{id:"rahuKal",children:[null===r||void 0===r?void 0:r.rahukaal.start," to ",null===r||void 0===r?void 0:r.rahukaal.end]})]})]})})})}),(0,Je.jsxs)(a.rU,{to:"/Panchangg",children:[(0,Je.jsxs)("button",{class:"blog-button",children:["Read More",(0,Je.jsx)("i",{class:"fa-solid fa-right-long"})]})," "]})]})]})]})}),(0,Je.jsx)("div",{className:"col-sm-12 col-lg-4 col-md-4",children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)(a.rU,{to:"/Numerology",children:(0,Je.jsx)("img",{style:{height:"200px",width:"100%"},src:"../assets/images/inner-page/numo11.png",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",style:{overflowY:"scroll",position:"relative",height:"350px"},children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"/BlogDetail",children:(0,Je.jsx)("h3",{style:{fontSize:"30px"},children:"NUMEROLOGY"})})}),(0,Je.jsx)("div",{style:{position:"absolute"},children:(0,Je.jsx)(a.rU,{to:"/Numerology",children:(0,Je.jsxs)("ul",{children:[(0,Je.jsxs)("li",{children:[(0,Je.jsx)(a.rU,{to:"#",children:"Yoga"})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)(a.rU,{to:"#",children:"Meditation"})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)(a.rU,{to:"#",children:"Gems Stone"})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)(a.rU,{to:"#",children:"Rudraskha"})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)(a.rU,{to:"#",children:"Yantra"})," "]}),(0,Je.jsx)("hr",{})]})})})]})]})}),(0,Je.jsx)("div",{className:"col-sm-12 col-lg-4 col-md-4",children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)(a.rU,{to:"/BlogDetail",children:(0,Je.jsx)("img",{style:{height:"200px",width:"100%"},src:"../assets/images/inner-page/fest11.png",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",style:{overflowY:"scroll",position:"relative",height:"350px"},children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"/BlogDetail",children:(0,Je.jsx)("h3",{style:{fontSize:"30px"},children:"FESTIVAL"})})}),(0,Je.jsx)("div",{style:{position:"absolute"},children:(0,Je.jsx)(a.rU,{to:"/BlogDetail",children:(0,Je.jsxs)("ul",{children:[(0,Je.jsxs)("li",{children:[(0,Je.jsxs)(a.rU,{to:"#",children:["Holi ",p]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)(a.rU,{to:"#",children:["Bhai Dooj ",p]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)(a.rU,{to:"#",children:["Chaitra Navratri ",p]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)(a.rU,{to:"#",children:["Gudi Padwa ",p]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)(a.rU,{to:"#",children:["Ugadi ",p]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)(a.rU,{to:"#",children:["Rama Navami ",p]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)(a.rU,{to:"#",children:["Hanuman Jyanti ",p]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)(a.rU,{to:"#",children:["Baisakhi ",p]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)(a.rU,{to:"#",children:["Diwali ",p]})," "]}),(0,Je.jsx)("hr",{})]})})})]})]})})]})})})})})})})},ot=function(){return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("section",{class:"product-section-3",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsx)("div",{class:"title",children:(0,Je.jsx)("h2",{children:"Nakshatra Mart"})}),(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-3",children:(0,Je.jsx)("div",{class:"slider-7_1 arrow-slider img-slider",style:{},children:(0,Je.jsxs)(nt.Z,(0,tt.Z)((0,tt.Z)({},{dots:!1,infinite:!0,speed:500,slidesToShow:3,slidesToScroll:1,flexDirection:"row"}),{},{children:[(0,Je.jsx)("div",{style:{width:"20%"},children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp",children:[(0,Je.jsx)("div",{class:"product-image product-image-2",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/EkMukhiRudraksha.png",class:"img-fluid blur-up lazyload",alt:""})})}),(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h5",{class:"name text-title",children:"Ek Mukhi Rudraksha"})})})]})}),(0,Je.jsx)("div",{style:{width:"20%"},children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp","data-wow-delay":"0.05s",children:[(0,Je.jsx)("div",{class:"product-image product-image-2",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/5MukhiRudraksh.png",class:"img-fluid blur-up lazyload",alt:""})})}),(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h5",{class:"name text-title",children:"5 Mukhi Rudraksh"})})})]})}),(0,Je.jsx)("div",{style:{width:"20%"},children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp","data-wow-delay":"0.1s",children:[(0,Je.jsx)("div",{class:"product-image product-image-2",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/greenstone.png",class:"img-fluid blur-up lazyload",alt:""})})}),(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h5",{class:"name text-title",children:"5.25 ratti Emerald"})})})]})}),(0,Je.jsx)("div",{style:{width:"20%"},children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp","data-wow-delay":"0.15s",children:[(0,Je.jsx)("div",{class:"product-image product-image-2",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/redstone.png",class:"img-fluid blur-up lazyload",alt:""})})}),(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h5",{class:"name text-title",children:"Onion"})})})]})}),(0,Je.jsx)("div",{style:{width:"20%"},children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp","data-wow-delay":"0.2s",children:[(0,Je.jsx)("div",{class:"product-image product-image-2",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/redstone.png",class:"img-fluid blur-up lazyload",alt:""})})}),(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h5",{class:"name text-title",children:"Baby Chili"})})})]})}),(0,Je.jsx)("div",{style:{width:"20%"},children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp","data-wow-delay":"0.25s",children:[(0,Je.jsx)("div",{class:"product-image product-image-2",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/redstone.png",class:"img-fluid blur-up lazyload",alt:""})})}),(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h5",{class:"name text-title",children:"Broccoli"})})})]})}),(0,Je.jsx)("div",{style:{width:"20%"},children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp","data-wow-delay":"0.3s",children:[(0,Je.jsx)("div",{class:"product-image product-image-2",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/redstone.png",class:"img-fluid blur-up lazyload",alt:""})})}),(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h5",{class:"name text-title",children:"Apple"})})})]})}),(0,Je.jsx)("div",{style:{width:"20%"},children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp","data-wow-delay":"0.35s",children:[(0,Je.jsx)("div",{class:"product-image product-image-2",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/redstone.png",class:"img-fluid blur-up lazyload",alt:""})})}),(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h5",{class:"name text-title",children:"Strawberry"})})})]})})]}))})})})]})})})},at=function(){(0,n.useEffect)((function(){s()}),[]);var e=(0,n.useState)([]),t=(0,o.Z)(e,2),r=t[0],i=t[1],s=function(){Ye.get("http://103.104.74.215:3012/api/user/puja_list").then((function(e){i(e.data.data)}))},c=(0,n.useState)(!1),u=(0,o.Z)(c,2),l=u[0],d=u[1];return(0,Je.jsxs)(Je.Fragment,{children:[!0===l&&(0,Je.jsxs)("div",{class:"fullpage-loader",children:[(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{})]}),(0,Je.jsx)("section",{className:"blog-section",children:(0,Je.jsxs)("div",{className:"container-fluid-lg",children:[(0,Je.jsxs)("div",{className:"title",children:[(0,Je.jsx)("h2",{children:"Nakshatra Pooja"}),(0,Je.jsx)("h4",{children:"Top Astrologers. 24 * 7 customer support. Happy to help"})]}),(0,Je.jsx)("div",{className:"slider-5 arrow-slider row",style:{},children:r.map((function(e){return(0,Je.jsx)("div",{class:"col-xl-3 col-sm-3",style:{width:""},children:(0,Je.jsxs)("div",{className:"blog-box ",style:{width:"100%",height:"100%"},children:[(0,Je.jsx)("div",{className:"blog-box-image",children:(0,Je.jsx)(a.rU,{onClick:function(){d(!0),localStorage.setItem("pujaDet",JSON.stringify(e))},to:"/PujaListDetail",children:(0,Je.jsx)("img",{src:"http://103.104.74.215:3012/uploads/"+e.file[0],className:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{className:"blog-detail",children:[(0,Je.jsx)("a",{href:"",children:(0,Je.jsx)("h2",{children:null===e||void 0===e?void 0:e.title})}),(0,Je.jsx)("div",{className:"blog-list",children:(0,Je.jsx)("span",{children:null===e||void 0===e?void 0:e.current_date.slice(0,10)})})]})]})})}))})]})})]})},st=__webpack_require__(1002);function ct(){ct=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new T(i||[]);return r(a,"_invoke",{value:E(e,n,s)}),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=u;var d={};function h(){}function f(){}function p(){}var v={};c(v,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(I([])));m&&m!==t&&n.call(m,o)&&(v=m);var y=p.prototype=h.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(r,o,a,s){var c=l(e[r],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==(0,st.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return i("throw",e,a,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function I(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:R}}function R(){return{value:void 0,done:!0}}return f.prototype=p,r(y,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(_.prototype),c(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new _(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),c(y,s,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function ut(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(Qo){return void n(Qo)}s.done?t(c):Promise.resolve(c).then(r,i)}function lt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ut(o,r,i,a,s,"next",e)}function s(e){ut(o,r,i,a,s,"throw",e)}a(void 0)}))}}var dt=function(){i.s0,Math.random().toString(36).slice(-4);var e=(0,n.useState)(!1),t=(0,o.Z)(e,2),r=t[0],s=t[1],c=(0,n.useState)([]),u=(0,o.Z)(c,2),l=u[0],d=u[1];(0,n.useEffect)((function(){h()}),[0]);var h=function(){var e=lt(ct().mark((function e(){var t,n;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{"content-type":"application/json; charset=utf-8","Access-Control-Allow-Origin":"*"}},n=JSON.stringify({}),e.next=4,Ye.get("http://103.104.74.215:3012/api/user/blog_list",n,t).then((function(e){d(e.data.data)})).catch((function(e){}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Je.jsxs)(Je.Fragment,{children:[!0===r&&(0,Je.jsxs)("div",{class:"fullpage-loader",children:[(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{})]}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{className:"title",children:[(0,Je.jsx)("h2",{children:"LATEST FROM BLOG "}),(0,Je.jsx)("h4",{children:"Top Astrologers. 24 * 7 customer support. Happy to help"})]}),(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-3",children:(0,Je.jsx)(nt.Z,(0,tt.Z)((0,tt.Z)({},{autoplay:!0,dots:!0,infinite:!0,speed:500,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:992,settings:{slidesToShow:1}},{breakpoint:576,settings:{slidesToShow:1}}]}),{},{children:l.map((function(e){return(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("blogid",e._id)},children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp",children:[(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/BlogDetail",children:(0,Je.jsx)("img",{style:{width:"100%",height:"206px",objectFit:""},src:"http://103.104.74.215:3012/uploads/"+e.image,class:"bg-img blur-up lazyload img-fluid",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain ",children:[(0,Je.jsxs)("div",{class:"blog-label",children:[(0,Je.jsxs)("span",{class:"time",children:[(0,Je.jsx)("i",{"data-feather":"clock"})," ",(0,Je.jsx)("span",{children:"28 Feg, 2023"})]}),(0,Je.jsxs)("span",{class:"super",children:[(0,Je.jsx)("i",{"data-feather":"user"})," ",(0,Je.jsx)("span",{children:"JyotiRaj Singh"})]})]}),(0,Je.jsx)(a.rU,{to:"/BlogDetail",children:(0,Je.jsx)("h3",{children:e.title})}),(0,Je.jsx)(a.rU,{to:"/BlogDetail",children:(0,Je.jsxs)("button",{onClick:function(){s(!0)},class:"blog-button",children:["                         Read More",(0,Je.jsx)("i",{class:"fa-solid fa-right-long"})]})})]})]})})}))}))})})]})})]})},ht=function(){(0,n.useEffect)((function(){s()}),[]);var e=(0,n.useState)([]),t=(0,o.Z)(e,2),r=t[0],i=t[1],s=function(){Ye.get("http://103.104.74.215:3012/api/user/client_testimonials_list").then((function(e){return i(e.data.data)}))};return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{className:"title",children:[(0,Je.jsx)("h2",{children:"NAKSHATRA TALKS REVIEWS "}),(0,Je.jsx)("h4",{children:"Here about us from our customers"})]}),(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-3 arrow-slider",children:(0,Je.jsx)(nt.Z,(0,tt.Z)((0,tt.Z)({},{autoplay:!0,dots:!1,infinite:!0,speed:500,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:992,settings:{slidesToShow:1}},{breakpoint:576,settings:{slidesToShow:1}}]}),{},{children:r.map((function(e){return(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp",children:[(0,Je.jsx)("div",{class:"blog-image",style:{borderRadius:""},children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{style:{width:"100%",height:"206px",objectFit:""},src:"http://103.104.74.215:3012/uploads/"+e.image,class:"bg-img blur-up lazyload img-fluid",alt:""})})}),(0,Je.jsx)("div",{class:"blog-contain ",children:(0,Je.jsxs)("div",{class:"blog-label",children:[(0,Je.jsxs)("span",{class:"time",children:[(0,Je.jsx)("i",{"data-feather":"clock"}),(0,Je.jsx)("span",{children:e.user_name})]}),(0,Je.jsxs)("span",{class:"super",children:[(0,Je.jsx)("i",{"data-feather":"user"})," ",(0,Je.jsx)("span",{children:e.city})]})]})})]})})}))}))})})]})})})},ft=function(){return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)("div",{class:"modal location-modal fade theme-modal",id:"locationModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:"Choose your Delivery Location"}),(0,Je.jsx)("p",{class:"mt-1 text-content",children:"Enter your address and we will specify the offer for your area."}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsxs)("div",{class:"location-list",children:[(0,Je.jsxs)("div",{class:"search-input",children:[(0,Je.jsx)("input",{type:"search",class:"form-control",placeholder:"Search Your Area"}),(0,Je.jsx)("i",{class:"fa-solid fa-magnifying-glass"})]}),(0,Je.jsx)("div",{class:"disabled-box",children:(0,Je.jsx)("h6",{children:"Select a Location"})}),(0,Je.jsxs)("ul",{class:"location-select custom-height",children:[(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Alabama"}),(0,Je.jsx)("span",{children:"Min: $130"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Arizona"}),(0,Je.jsx)("span",{children:"Min: $150"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"California"}),(0,Je.jsx)("span",{children:"Min: $110"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Colorado"}),(0,Je.jsx)("span",{children:"Min: $140"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Florida"}),(0,Je.jsx)("span",{children:"Min: $160"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Georgia"}),(0,Je.jsx)("span",{children:"Min: $120"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Kansas"}),(0,Je.jsx)("span",{children:"Min: $170"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Minnesota"}),(0,Je.jsx)("span",{children:"Min: $120"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"New York"}),(0,Je.jsx)("span",{children:"Min: $110"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Washington"}),(0,Je.jsx)("span",{children:"Min: $130"})]})})]})]})})]})})}),(0,Je.jsx)("div",{class:"modal fade theme-modal view-modal",id:"view",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-xl modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsx)("div",{class:"modal-header p-0",children:(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsxs)("div",{class:"row g-sm-4 g-2",children:[(0,Je.jsx)("div",{class:"col-lg-6",children:(0,Je.jsx)("div",{class:"slider-image",children:(0,Je.jsx)("img",{src:"../assets/images/product/category/1.jpg",class:"img-fluid blur-up lazyload",alt:""})})}),(0,Je.jsx)("div",{class:"col-lg-6",children:(0,Je.jsxs)("div",{class:"right-sidebar-modal",children:[(0,Je.jsx)("h4",{class:"title-name",children:"Peanut Butter Bite Premium Butter Cookies 600 g"}),(0,Je.jsx)("h4",{class:"price",children:"$36.99"}),(0,Je.jsxs)("div",{class:"product-rating",children:[(0,Je.jsxs)("ul",{class:"rating",children:[(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star"})})]}),(0,Je.jsx)("span",{class:"ms-2",children:"8 Reviews"}),(0,Je.jsx)("span",{class:"ms-2 text-danger",children:"6 sold in last 16 hours"})]}),(0,Je.jsxs)("div",{class:"product-detail",children:[(0,Je.jsx)("h4",{children:"Product Details :"}),(0,Je.jsx)("p",{children:"Candy canes sugar plum tart cotton candy chupa chups sugar plum chocolate I love. Caramels marshmallow icing dessert candy canes I love souffl\xe9 I love toffee. Marshmallow pie sweet sweet roll sesame snaps tiramisu jelly bear claw. Bonbon muffin I love carrot cake sugar plum dessert bonbon."})]}),(0,Je.jsxs)("ul",{class:"brand-list",children:[(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{class:"brand-box",children:[(0,Je.jsx)("h5",{children:"Brand Name:"}),(0,Je.jsx)("h6",{children:"Black Forest"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{class:"brand-box",children:[(0,Je.jsx)("h5",{children:"Product Code:"}),(0,Je.jsx)("h6",{children:"W0690034"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{class:"brand-box",children:[(0,Je.jsx)("h5",{children:"Product Type:"}),(0,Je.jsx)("h6",{children:"White Cream Cake"})]})})]}),(0,Je.jsxs)("div",{class:"select-size",children:[(0,Je.jsx)("h4",{children:"Cake Size :"}),(0,Je.jsxs)("select",{class:"form-select select-form-size",children:[(0,Je.jsx)("option",{selected:!0,children:"Select Size"}),(0,Je.jsx)("option",{value:"1.2",children:"1/2 KG"}),(0,Je.jsx)("option",{value:"0",children:"1 KG"}),(0,Je.jsx)("option",{value:"1.5",children:"1/5 KG"}),(0,Je.jsx)("option",{value:"red",children:"Red Roses"}),(0,Je.jsx)("option",{value:"pink",children:"With Pink Roses"})]})]}),(0,Je.jsxs)("div",{class:"modal-button",children:[(0,Je.jsx)("button",{onclick:"location.href = 'cart.html';",class:"btn btn-md add-cart-button icon",children:"Add To Cart"}),(0,Je.jsx)("button",{onclick:"location.href = 'product-left.html';",class:"btn theme-bg-color view-button icon text-white fw-bold btn-md",children:"View More Details"})]})]})})]})})]})})}),(0,Je.jsx)("div",{class:"modal fade theme-modal deal-modal",id:"deal-box",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h5",{class:"modal-title w-100",id:"deal_today",children:"Deal Today"}),(0,Je.jsx)("p",{class:"mt-1 text-content",children:"Recommended deals for you."})]}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsx)("div",{class:"deal-offer-box",children:(0,Je.jsxs)("ul",{class:"deal-offer-list",children:[(0,Je.jsx)("li",{class:"list-1",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/10.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})}),(0,Je.jsx)("li",{class:"list-2",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/11.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})}),(0,Je.jsx)("li",{class:"list-3",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/12.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})}),(0,Je.jsx)("li",{class:"list-1",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/13.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})})]})})})]})})}),(0,Je.jsxs)("div",{class:"add-cart-box",children:[(0,Je.jsx)("div",{class:"add-iamge",children:(0,Je.jsx)("img",{src:"../assets/images/cake/pro/1.jpg",class:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsx)("div",{class:"add-contain",children:(0,Je.jsx)("h6",{children:"Added to Cart"})})]}),(0,Je.jsx)("div",{class:"bg-overlay"})]})},pt=function(){return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("div",{style:{textAlign:"center"},children:(0,Je.jsx)("h2",{children:"Astrology"})}),(0,Je.jsx)("p",{children:"Astrology is an ancient science which helps us improve our karma by telling us what our destiny is going to be. It is not that we are consigned to accept bad situations in life; Astrology is a kind of tool to help us correct and resurrect our Life through Good deeds. Astrology is the science of gaining proficiency over deed & time management which helps us manage our life in a better way."}),(0,Je.jsx)("p",{children:"By analysing the horoscope and understanding the dharma, artha, kama and moksha, one can gains insight into the individual\u2019s basic instincts. He would also be able to suggest a better lifestyle and spiritual sadhana. The three gunas\u2014sattva, rajas and tamas coexist in a varying degree of influence that is also understood from the chart. The gunas suggest the nature of all ones thoughts, feelings and actions, so the sadhana is suggested accordingly. For example, Sativ, Rajasic, Tamasic persons are suggested yoga and meditation, devotion, Selfless service respectively."}),(0,Je.jsx)("p",{children:"It is just the knowledge of karma which helps the individual take ownership for the circumstances in which he finds himself and let go of resentment at the misfortunes indicated in the chart which is a mere messenger of one\u2019s karma or in other word an opportunity to correct one\u2019s life."}),(0,Je.jsx)("p",{children:"Vedic astrology is based on mathematical divisions of the zodiac and defined relationships between planetary locations. The zodiac is a fine band across the sky through which the sun, moon and planets travel, expressing various influences, both physical and subtle. The main zodiac division used is made of twelve signs, or rashis, of 30 degrees each."}),(0,Je.jsx)("p",{children:(0,Je.jsx)("b",{children:"Lagna"})}),(0,Je.jsx)("p",{children:"The Earth rotates at about one sign every two hours, causing the signs and planets in them to rise in the east and set in the west. The point of the sign rising in the east forms the cusp of the first house (bhava). This is the ascendant, rising sign or lagna, which determines the orientation of the chart as a whole. "}),(0,Je.jsx)("p",{children:(0,Je.jsx)("b",{children:"Navagraha"})}),(0,Je.jsx)("p",{children:'Navagraha are nine heavenly bodies (as well as deities) that affects human life as per vedic astrology. The term is derived from nava ("nine") and Graha (planet).'}),(0,Je.jsx)("p",{children:"The Navaraghas are:-"}),(0,Je.jsx)("p",{children:"1. Surya: the Sun"}),(0,Je.jsx)("p",{children:"2. Chandra: the Moon"}),(0,Je.jsx)("p",{children:"3. Mangala: Mars"}),(0,Je.jsx)("p",{children:"4. Budha: Mercury"}),(0,Je.jsx)("p",{children:"5. B\u1e5bhaspati: Jupiter"}),(0,Je.jsx)("p",{children:"6. Shukra: Venus"}),(0,Je.jsx)("p",{children:"7. Shani: Saturn"}),(0,Je.jsx)("p",{children:"8. Rahu: Shadow body"}),(0,Je.jsx)("p",{children:"9. Ketu: Shadow body"}),(0,Je.jsx)("p",{})]})})})})},vt=function(){var e=(0,n.useState)([]),t=(0,o.Z)(e,2),r=t[0],i=t[1];(0,n.useEffect)((function(){s()}),[0]);var s=function(){var e=lt(ct().mark((function e(){var t,n;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{"content-type":"application/json; charset=utf-8","Access-Control-Allow-Origin":"*"}},n=JSON.stringify({}),e.next=4,Ye.get("http://103.104.74.215:3012/api/user/news_list",n,t).then((function(e){i(e.data.data)})).catch((function(e){}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsx)("div",{className:"title",children:(0,Je.jsx)("h2",{children:"NAKSHATRA TALKS IN NEWS "})}),(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-3",children:(0,Je.jsx)(nt.Z,(0,tt.Z)((0,tt.Z)({},{autoplay:!0,dots:!0,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:1,responsive:[{breakpoint:992,settings:{slidesToShow:1}},{breakpoint:576,settings:{slidesToShow:1}}]}),{},{children:null===r||void 0===r?void 0:r.map((function(e){return(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("newlistid",e._id)},children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp",children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/NewDetails",children:(0,Je.jsx)("img",{style:{width:"100%",height:"116px",objectFit:""},src:"http://103.104.74.215:3012/uploads/"+e.image,class:"bg-img blur-up lazyload bg-size background-size: cover; background-position: center center; background-repeat: no-repeat; display: block;",alt:""})})})})})}))}))})})]})})})};var gt=function(){var e=(0,i.s0)();localStorage.getItem("_id"),(0,n.useEffect)((function(){t()}));var t=function(){Ye.get("http://103.104.74.215:3012/api/user/get_astrologer_list").then((function(e){h(e.data.data)}))};(0,n.useEffect)((function(){b(0)}),[]);var r=(0,n.useState)(""),s=(0,o.Z)(r,2),c=s[0],u=(s[1],(0,n.useState)([])),l=(0,o.Z)(u,2),d=l[0],h=l[1],f=(0,n.useState)((function(){var e=localStorage.getItem("_id");return null!=e?JSON.parse(e):[]})),p=(0,o.Z)(f,2),v=(p[0],p[1],(0,n.useState)([])),g=(0,o.Z)(v,2),m=g[0],y=g[1],b=function(){Ye.get("http://103.104.74.215:3012/api/user/astrologer_live_list").then((function(e){return y(e.data.data)}))},_=(0,n.useState)(!1),E=(0,o.Z)(_,2),S=E[0];return E[1],(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)(Qe,{}),(0,Je.jsx)($e,{}),(0,Je.jsx)(et,{}),(0,Je.jsx)("section",{class:"order-detail",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsxs)("div",{class:"row g-sm-4 g-3",children:[(0,Je.jsxs)("div",{class:"col-xxl-6 col-xl-6 col-lg-6",children:[(0,Je.jsxs)("div",{class:"title title-flex",children:[(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h2",{children:"Online Astrologers "}),(0,Je.jsx)("h4",{children:"4 Astrologers are Online"})]}),c&&(0,Je.jsx)("p",{children:c}),(0,Je.jsx)("div",{class:"timing-box",children:(0,Je.jsx)(a.rU,{to:"/AstrologersList",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/live_right_arrow.png",class:"img-fluid",alt:"",style:{height:"40px",width:"40px",marginRight:"20px"}})})})]}),(0,Je.jsx)("div",{class:"row g-sm-4 g-3",children:d.slice(0,S?d.length:4).map((function(t){return(0,Je.jsx)("div",{class:"col-xl-6 col-sm-6",style:{display:"",flexDirection:"row"},children:(0,Je.jsxs)("div",{class:"seller-grid-box seller-grid-box-1",children:[(0,Je.jsxs)("div",{class:"grid-image",children:[(0,Je.jsxs)("div",{class:"image",children:[(0,Je.jsx)("img",{onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},src:"http://103.104.74.215:3012/uploads/"+t.profile_pic,class:"img-fluid",alt:"",style:{height:"60px ",width:"60px",borderRadius:"100%"}}),(0,Je.jsxs)("button",{onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},onclick:"location.href = 'product-4-image.html';",class:"nav-item",style:{borderRadius:"15px",width:"60px",height:"30px",borderColor:"#f5b60a",boxShadow:"5px"},children:[t.review?t.review:"0",(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{style:{fontWeight:"bolder"},class:"fa fa-star-o","aria-hidden":"true"})})]})]}),(0,Je.jsx)("div",{class:"contain-name",onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h4",{children:t.name}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:t.language})}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:t.role})})]})})]}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"grid-contain",style:{width:"100%",paddingBottom:"20px"},children:[(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"60%",float:"left"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-map-pin"})}),(0,Je.jsx)("div",{class:"contact-detail",onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},children:(0,Je.jsxs)("h5",{children:[t.experiance_year," "]})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},children:(0,Je.jsx)("i",{class:"fa-solid fa-phone"})}),(0,Je.jsx)("div",{class:"contact-detail",onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},children:(0,Je.jsxs)("h5",{children:[" \u20b9 ",t.audio_rate?t.audio_rate:"0","/Min"]})})]})]}),(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"40%",float:"right"},children:[(0,Je.jsx)(a.rU,{to:"/AstrologersList",children:(0,Je.jsxs)("div",{class:"saller-contact",children:["1"===t.call_status?(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/phone.png",class:"img-fluid",alt:"",style:{height:"25px"}}):(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/calling.png",class:"img-fluid",alt:"",style:{height:"25px",background:"#d99f46",borderRadius:"50px"}}),(0,Je.jsx)(a.rU,{to:"/chatastrologer",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:"25px",marginLeft:"10px"}})})]})}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"contact-detail",children:"1"===t.call_status?(0,Je.jsx)("h6",{children:" Call"}):(0,Je.jsx)("h6",{children:" Off"})}),(0,Je.jsx)("div",{class:"contact-detail",style:{marginLeft:"10px"},children:(0,Je.jsx)("h6",{children:" Chat"})})]})]})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{})]})})}))})]}),(0,Je.jsxs)("div",{class:"col-xxl-6 col-xl-6 col-lg-6",children:[(0,Je.jsxs)("div",{class:"title title-flex",children:[(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h2",{children:"Live Sessions"}),(0,Je.jsx)("h4",{children:" Astrologers are live now"})]}),(0,Je.jsx)("div",{class:"timing-box",children:(0,Je.jsx)(a.rU,{to:"/Astrolive",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/live_right_arrow.png",class:"img-fluid",alt:"",style:{height:"40px",width:"40px"}})})})]}),(0,Je.jsx)("div",{class:"row g-sm-4 g-3",children:null===m||void 0===m?void 0:m.slice(0,4).map((function(t){return(0,Je.jsx)("div",{class:"col-xl-6 col-sm-6",style:{},children:(0,Je.jsxs)("div",{onClick:function(){localStorage.setItem("liveData",JSON.stringify(t)),e("/Streaming")},class:"product-box-4",style:{background:"linear-gradient(45deg, #8b6704, #493939)"},children:[(0,Je.jsxs)("div",{class:"grid-image",children:[(0,Je.jsx)("div",{class:"image",children:(0,Je.jsx)("img",{src:"http://103.104.74.215:3012/uploads/"+t.astrologer_data.profile_pic,class:"img-fluid",alt:"",style:{height:"55px",width:"55px",borderRadius:"100%"}})}),(0,Je.jsx)("div",{class:"contain-name",children:(0,Je.jsxs)("div",{children:[(0,Je.jsxs)("h4",{style:{color:"white"},children:[t.astrologer_data.name," "]}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{style:{color:"white"},children:"Spiritual Guidance"})}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("button",{onClick:function(){localStorage.setItem("liveData",JSON.stringify(t)),e("/Streaming")},class:"nav-item",style:{borderRadius:"15px",width:"60px",height:"30px",boxShadow:"1px",marginTop:"-30px"},children:["Live",(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{class:"fa-solid fa-circle",style:{width:"10px",color:"green"}})})]})]})})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("div",{class:"grid-contain",style:{width:"100%"},children:(0,Je.jsx)("div",{class:"seller-contact-details",children:(0,Je.jsxs)("div",{class:"saller-contact",style:{},children:[(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/calling.png",class:"img-fluid",alt:"",style:{height:"25px"}})}),(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:"25px",marginLeft:"10px"}})}),(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:" 25px",marginLeft:"10px"}})})]})})})]})})}))}),(0,Je.jsx)("br",{})]})]})})}),(0,Je.jsx)(rt,{}),(0,Je.jsx)(it,{}),(0,Je.jsx)(ot,{}),(0,Je.jsx)(at,{}),(0,Je.jsx)(dt,{}),(0,Je.jsx)(ht,{}),(0,Je.jsx)(pt,{}),(0,Je.jsx)(vt,{}),(0,Je.jsx)(Ze.default,{}),(0,Je.jsx)(ft,{})]})},mt=__webpack_require__(4942);function yt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var bt=__webpack_require__(3433);function _t(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=_t(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var Et=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=_t(e))&&(r&&(r+=" "),r+=t);return r},St=["theme","type"],wt=["delay","staleId"],xt=function(e){return"number"==typeof e&&!isNaN(e)},Tt=function(e){return"string"==typeof e},It=function(e){return"function"==typeof e},Rt=function(e){return Tt(e)||It(e)?e:null},kt=function(e){return(0,n.isValidElement)(e)||Tt(e)||It(e)||xt(e)};function Ot(e){var t=e.enter,r=e.exit,i=e.appendPosition,o=void 0!==i&&i,a=e.collapse,s=void 0===a||a,c=e.collapseDuration,u=void 0===c?300:c;return function(e){var i=e.children,a=e.position,c=e.preventExitTransition,l=e.done,d=e.nodeRef,h=e.isIn,f=o?"".concat(t,"--").concat(a):t,p=o?"".concat(r,"--").concat(a):r,v=(0,n.useRef)(0);return(0,n.useLayoutEffect)((function(){var e,t=d.current,n=f.split(" "),r=function e(r){var i;r.target===d.current&&(t.dispatchEvent(new Event("d")),t.removeEventListener("animationend",e),t.removeEventListener("animationcancel",e),0===v.current&&"animationcancel"!==r.type&&(i=t.classList).remove.apply(i,(0,bt.Z)(n)))};(e=t.classList).add.apply(e,(0,bt.Z)(n)),t.addEventListener("animationend",r),t.addEventListener("animationcancel",r)}),[]),(0,n.useEffect)((function(){var e=d.current,t=function t(){e.removeEventListener("animationend",t),s?function(e,t,n){void 0===n&&(n=300);var r=e.scrollHeight,i=e.style;requestAnimationFrame((function(){i.minHeight="initial",i.height=r+"px",i.transition="all ".concat(n,"ms"),requestAnimationFrame((function(){i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,l,u):l()};h||(c?t():(v.current=1,e.className+=" ".concat(p),e.addEventListener("animationend",t)))}),[h]),n.createElement(n.Fragment,null,i)}}function Ct(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}var At={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var n=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){var t=arguments,n=this;this.list.has(e)&&this.list.get(e).forEach((function(r){var i=setTimeout((function(){r.apply(void 0,(0,bt.Z)([].slice.call(t,1)))}),0);n.emitQueue.has(e)||n.emitQueue.set(e,[]),n.emitQueue.get(e).push(i)}))}},Nt=function(e){var t=e.theme,r=e.type,i=yt(e,St);return n.createElement("svg",(0,tt.Z)({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-".concat(r,")")},i))},jt={info:function(e){return n.createElement(Nt,(0,tt.Z)({},e),n.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return n.createElement(Nt,(0,tt.Z)({},e),n.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return n.createElement(Nt,(0,tt.Z)({},e),n.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return n.createElement(Nt,(0,tt.Z)({},e),n.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return n.createElement("div",{className:"Toastify__spinner"})}};function Dt(e){var t=(0,n.useReducer)((function(e){return e+1}),0),r=(0,o.Z)(t,2)[1],i=(0,n.useState)([]),a=(0,o.Z)(i,2),s=a[0],c=a[1],u=(0,n.useRef)(null),l=(0,n.useRef)(new Map).current,d=function(e){return-1!==s.indexOf(e)},h=(0,n.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:d,getToast:function(e){return l.get(e)}}).current;function f(e){var t=e.containerId;!h.props.limit||t&&h.containerId!==t||(h.count-=h.queue.length,h.queue=[])}function p(e){c((function(t){return null==e?[]:t.filter((function(t){return t!==e}))}))}function v(){var e=h.queue.shift();m(e.toastContent,e.toastProps,e.staleId)}function g(e,t){var i=t.delay,a=t.staleId,s=yt(t,wt);if(kt(e)&&!function(e){return!u.current||h.props.enableMultiContainer&&e.containerId!==h.props.containerId||l.has(e.toastId)&&null==e.updateId}(s)){var c=s.toastId,d=s.updateId,f=s.data,g=h.props,y=function(){return p(c)},b=null==d;b&&h.count++;var _,E,S=(0,tt.Z)((0,tt.Z)((0,tt.Z)({},g),{},{style:g.toastStyle,key:h.toastKey++},Object.fromEntries(Object.entries(s).filter((function(e){var t=(0,o.Z)(e,2);t[0];return null!=t[1]})))),{},{toastId:c,updateId:d,data:f,closeToast:y,isIn:!1,className:Rt(s.className||g.toastClassName),bodyClassName:Rt(s.bodyClassName||g.bodyClassName),progressClassName:Rt(s.progressClassName||g.progressClassName),autoClose:!s.isLoading&&(_=s.autoClose,E=g.autoClose,!1===_||xt(_)&&_>0?_:E),deleteToast:function(){var e=Ct(l.get(c),"removed");l.delete(c),At.emit(4,e);var t=h.queue.length;if(h.count=null==c?h.count-h.displayedToast:h.count-1,h.count<0&&(h.count=0),t>0){var n=null==c?h.props.limit:1;if(1===t||1===n)h.displayedToast++,v();else{var i=n>t?t:n;h.displayedToast=i;for(var o=0;o<i;o++)v()}}else r()}});S.iconOut=function(e){var t=e.theme,r=e.type,i=e.isLoading,o=e.icon,a=null,s={theme:t,type:r};return!1===o||(It(o)?a=o(s):(0,n.isValidElement)(o)?a=(0,n.cloneElement)(o,s):Tt(o)||xt(o)?a=o:i?a=jt.spinner():function(e){return e in jt}(r)&&(a=jt[r](s))),a}(S),It(s.onOpen)&&(S.onOpen=s.onOpen),It(s.onClose)&&(S.onClose=s.onClose),S.closeButton=g.closeButton,!1===s.closeButton||kt(s.closeButton)?S.closeButton=s.closeButton:!0===s.closeButton&&(S.closeButton=!kt(g.closeButton)||g.closeButton);var w=e;(0,n.isValidElement)(e)&&!Tt(e.type)?w=(0,n.cloneElement)(e,{closeToast:y,toastProps:S,data:f}):It(e)&&(w=e({closeToast:y,toastProps:S,data:f})),g.limit&&g.limit>0&&h.count>g.limit&&b?h.queue.push({toastContent:w,toastProps:S,staleId:a}):xt(i)?setTimeout((function(){m(w,S,a)}),i):m(w,S,a)}}function m(e,t,n){var r=t.toastId;n&&l.delete(n);var i={content:e,props:t};l.set(r,i),c((function(e){return[].concat((0,bt.Z)(e),[r]).filter((function(e){return e!==n}))})),At.emit(4,Ct(i,null==i.props.updateId?"added":"updated"))}return(0,n.useEffect)((function(){return h.containerId=e.containerId,At.cancelEmit(3).on(0,g).on(1,(function(e){return u.current&&p(e)})).on(5,f).emit(2,h),function(){l.clear(),At.emit(3,h)}}),[]),(0,n.useEffect)((function(){h.props=e,h.isToastActive=d,h.displayedToast=s.length})),{getToastToRender:function(t){var n=new Map,r=Array.from(l.values());return e.newestOnTop&&r.reverse(),r.forEach((function(e){var t=e.props.position;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(function(e){return t(e[0],e[1])}))},containerRef:u,isToastActive:d}}function Pt(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function Lt(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function Mt(e){var t=(0,n.useState)(!1),r=(0,o.Z)(t,2),i=r[0],a=r[1],s=(0,n.useState)(!1),c=(0,o.Z)(s,2),u=c[0],l=c[1],d=(0,n.useRef)(null),h=(0,n.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,f=(0,n.useRef)(e),p=e.autoClose,v=e.pauseOnHover,g=e.closeToast,m=e.onClick,y=e.closeOnClick;function b(t){if(e.draggable){"touchstart"===t.nativeEvent.type&&t.nativeEvent.preventDefault(),h.didMove=!1,document.addEventListener("mousemove",w),document.addEventListener("mouseup",x),document.addEventListener("touchmove",w),document.addEventListener("touchend",x);var n=d.current;h.canCloseOnClick=!0,h.canDrag=!0,h.boundingRect=n.getBoundingClientRect(),n.style.transition="",h.x=Pt(t.nativeEvent),h.y=Lt(t.nativeEvent),"x"===e.draggableDirection?(h.start=h.x,h.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(h.start=h.y,h.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function _(t){if(h.boundingRect){var n=h.boundingRect,r=n.top,i=n.bottom,o=n.left,a=n.right;"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&h.x>=o&&h.x<=a&&h.y>=r&&h.y<=i?S():E()}}function E(){a(!0)}function S(){a(!1)}function w(t){var n=d.current;h.canDrag&&n&&(h.didMove=!0,i&&S(),h.x=Pt(t),h.y=Lt(t),h.delta="x"===e.draggableDirection?h.x-h.start:h.y-h.start,h.start!==h.x&&(h.canCloseOnClick=!1),n.style.transform="translate".concat(e.draggableDirection,"(").concat(h.delta,"px)"),n.style.opacity=""+(1-Math.abs(h.delta/h.removalDistance)))}function x(){document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",w),document.removeEventListener("touchend",x);var t=d.current;if(h.canDrag&&h.didMove&&t){if(h.canDrag=!1,Math.abs(h.delta)>h.removalDistance)return l(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate".concat(e.draggableDirection,"(0)"),t.style.opacity="1"}}(0,n.useEffect)((function(){f.current=e})),(0,n.useEffect)((function(){return d.current&&d.current.addEventListener("d",E,{once:!0}),It(e.onOpen)&&e.onOpen((0,n.isValidElement)(e.children)&&e.children.props),function(){var e=f.current;It(e.onClose)&&e.onClose((0,n.isValidElement)(e.children)&&e.children.props)}}),[]),(0,n.useEffect)((function(){return e.pauseOnFocusLoss&&(document.hasFocus()||S(),window.addEventListener("focus",E),window.addEventListener("blur",S)),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",E),window.removeEventListener("blur",S))}}),[e.pauseOnFocusLoss]);var T={onMouseDown:b,onTouchStart:b,onMouseUp:_,onTouchEnd:_};return p&&v&&(T.onMouseEnter=S,T.onMouseLeave=E),y&&(T.onClick=function(e){m&&m(e),h.canCloseOnClick&&g()}),{playToast:E,pauseToast:S,isRunning:i,preventExitTransition:u,toastRef:d,eventHandlers:T}}function Ut(e){var t=e.closeToast,r=e.theme,i=e.ariaLabel,o=void 0===i?"close":i;return n.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(r),type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":o},n.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},n.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Vt(e){var t=e.delay,r=e.isRunning,i=e.closeToast,o=e.type,a=void 0===o?"default":o,s=e.hide,c=e.className,u=e.style,l=e.controlledProgress,d=e.progress,h=e.rtl,f=e.isIn,p=e.theme,v=s||l&&0===d,g=(0,tt.Z)((0,tt.Z)({},u),{},{animationDuration:"".concat(t,"ms"),animationPlayState:r?"running":"paused",opacity:v?0:1});l&&(g.transform="scaleX(".concat(d,")"));var m=Et("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(p),"Toastify__progress-bar--".concat(a),{"Toastify__progress-bar--rtl":h}),y=It(c)?c({rtl:h,type:a,defaultClassName:m}):Et(m,c);return n.createElement("div",(0,mt.Z)({role:"progressbar","aria-hidden":v?"true":"false","aria-label":"notification timer",className:y,style:g},l&&d>=1?"onTransitionEnd":"onAnimationEnd",l&&d<1?null:function(){f&&i()}))}var Ft=function(e){var t=Mt(e),r=t.isRunning,i=t.preventExitTransition,o=t.toastRef,a=t.eventHandlers,s=e.closeButton,c=e.children,u=e.autoClose,l=e.onClick,d=e.type,h=e.hideProgressBar,f=e.closeToast,p=e.transition,v=e.position,g=e.className,m=e.style,y=e.bodyClassName,b=e.bodyStyle,_=e.progressClassName,E=e.progressStyle,S=e.updateId,w=e.role,x=e.progress,T=e.rtl,I=e.toastId,R=e.deleteToast,k=e.isIn,O=e.isLoading,C=e.iconOut,A=e.closeOnClick,N=e.theme,j=Et("Toastify__toast","Toastify__toast-theme--".concat(N),"Toastify__toast--".concat(d),{"Toastify__toast--rtl":T},{"Toastify__toast--close-on-click":A}),D=It(g)?g({rtl:T,position:v,type:d,defaultClassName:j}):Et(j,g),P=!!x||!u,L={closeToast:f,type:d,theme:N},M=null;return!1===s||(M=It(s)?s(L):(0,n.isValidElement)(s)?(0,n.cloneElement)(s,L):Ut(L)),n.createElement(p,{isIn:k,done:R,position:v,preventExitTransition:i,nodeRef:o},n.createElement("div",(0,tt.Z)((0,tt.Z)({id:I,onClick:l,className:D},a),{},{style:m,ref:o}),n.createElement("div",(0,tt.Z)((0,tt.Z)({},k&&{role:w}),{},{className:It(y)?y({type:d}):Et("Toastify__toast-body",y),style:b}),null!=C&&n.createElement("div",{className:Et("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!O})},C),n.createElement("div",null,c)),M,n.createElement(Vt,(0,tt.Z)((0,tt.Z)({},S&&!P?{key:"pb-".concat(S)}:{}),{},{rtl:T,theme:N,delay:u,isRunning:r,isIn:k,closeToast:f,hide:h,type:d,style:E,className:_,controlledProgress:P,progress:x||0}))))},Bt=function(e,t){return void 0===t&&(t=!1),{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},Gt=Ot(Bt("bounce",!0)),qt=(Ot(Bt("slide",!0)),Ot(Bt("zoom")),Ot(Bt("flip")),(0,n.forwardRef)((function(e,t){var r=Dt(e),i=r.getToastToRender,o=r.containerRef,a=r.isToastActive,s=e.className,c=e.style,u=e.rtl,l=e.containerId;function d(e){var t=Et("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":u});return It(s)?s({position:e,rtl:u,defaultClassName:t}):Et(t,Rt(s))}return(0,n.useEffect)((function(){t&&(t.current=o.current)}),[]),n.createElement("div",{ref:o,className:"Toastify",id:l},i((function(e,t){var r=t.length?(0,tt.Z)({},c):(0,tt.Z)((0,tt.Z)({},c),{},{pointerEvents:"none"});return n.createElement("div",{className:d(e),style:r,key:"container-".concat(e)},t.map((function(e,r){var i=e.content,o=e.props;return n.createElement(Ft,(0,tt.Z)((0,tt.Z)({},o),{},{isIn:a(o.toastId),style:(0,tt.Z)((0,tt.Z)({},o.style),{},{"--nth":r+1,"--len":t.length}),key:"toast-".concat(o.key)}),i)})))})))})));qt.displayName="ToastContainer",qt.defaultProps={position:"top-right",transition:Gt,autoClose:5e3,closeButton:Ut,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var Wt,Ht=new Map,zt=[],Kt=1;function Yt(){return""+Kt++}function Zt(e){return e&&(Tt(e.toastId)||xt(e.toastId))?e.toastId:Yt()}function Jt(e,t){return Ht.size>0?At.emit(0,e,t):zt.push({content:e,options:t}),t.toastId}function Xt(e,t){return(0,tt.Z)((0,tt.Z)({},t),{},{type:t&&t.type||e,toastId:Zt(t)})}function Qt(e){return function(t,n){return Jt(t,Xt(e,n))}}function $t(e,t){return Jt(e,Xt("default",t))}$t.loading=function(e,t){return Jt(e,Xt("default",(0,tt.Z)({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},$t.promise=function(e,t,n){var r,i=t.pending,o=t.error,a=t.success;i&&(r=Tt(i)?$t.loading(i,n):$t.loading(i.render,(0,tt.Z)((0,tt.Z)({},n),i)));var s={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=function(e,t,i){if(null!=t){var o=(0,tt.Z)((0,tt.Z)((0,tt.Z)({type:e},s),n),{},{data:i}),a=Tt(t)?{render:t}:t;return r?$t.update(r,(0,tt.Z)((0,tt.Z)({},o),a)):$t(a.render,(0,tt.Z)((0,tt.Z)({},o),a)),i}$t.dismiss(r)},u=It(e)?e():e;return u.then((function(e){return c("success",a,e)})).catch((function(e){return c("error",o,e)})),u},$t.success=Qt("success"),$t.info=Qt("info"),$t.error=Qt("error"),$t.warning=Qt("warning"),$t.warn=$t.warning,$t.dark=function(e,t){return Jt(e,Xt("default",(0,tt.Z)({theme:"dark"},t)))},$t.dismiss=function(e){Ht.size>0?At.emit(1,e):zt=zt.filter((function(t){return null!=e&&t.options.toastId!==e}))},$t.clearWaitingQueue=function(e){return void 0===e&&(e={}),At.emit(5,e)},$t.isActive=function(e){var t=!1;return Ht.forEach((function(n){n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},$t.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var n=function(e,t){var n=t.containerId,r=Ht.get(n||Wt);return r&&r.getToast(e)}(e,t);if(n){var r=n.props,i=n.content,o=(0,tt.Z)((0,tt.Z)((0,tt.Z)({delay:100},r),t),{},{toastId:t.toastId||e,updateId:Yt()});o.toastId!==e&&(o.staleId=e);var a=o.render||i;delete o.render,Jt(a,o)}}),0)},$t.done=function(e){$t.update(e,{progress:1})},$t.onChange=function(e){return At.on(4,e),function(){At.off(4,e)}},$t.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},$t.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},At.on(2,(function(e){Wt=e.containerId||e,Ht.set(Wt,e),zt.forEach((function(e){At.emit(0,e.content,e.options)})),zt=[]})).on(3,(function(e){Ht.delete(e.containerId||e),0===Ht.size&&At.off(0).off(1).off(5)}));var en=(0,n.lazy)((function(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,4050))}));var tn=function(){var e=(0,n.useState)({}),t=(0,o.Z)(e,2),r=(t[0],t[1],(0,i.s0)()),a=(localStorage.getItem("_id"),(0,n.useState)("")),s=(0,o.Z)(a,2),c=(s[0],s[1]),u=(0,n.useState)({day:"",month:"",year:"",hour:"",min:"",am_pm:"AM"}),l=(0,o.Z)(u,2),d=l[0],h=l[1],f=function(e,t){return Array.from({length:t-e+1},(function(t,n){return n+e})).map((function(e){return(0,Je.jsx)("option",{children:e},e)}))};(0,n.useEffect)((function(){h({day:6,month:1,year:2e3,hour:7,min:45,am_pm:"AM"})}),[]);var p=function(e){var t=e.target,n=t.name,r=t.value;h((function(e){return(0,tt.Z)((0,tt.Z)({},e),{},(0,mt.Z)({},n,r))}))};return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)(qt,{}),(0,Je.jsx)("section",{className:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsx)("div",{className:"breadscrumb-contain",children:(0,Je.jsx)("h2",{children:"Sign In"})})})})})}),(0,Je.jsx)("section",{className:"log-in-section section-b-space",children:(0,Je.jsx)("div",{className:"container-fluid-lg w-100",children:(0,Je.jsxs)("div",{className:"row",children:[(0,Je.jsx)("div",{className:"col-xxl-6 col-xl-5 col-lg-6 d-lg-block d-none ms-auto",children:(0,Je.jsx)("div",{className:"image-contain",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/sign-up.png",className:"img-fluid",alt:""})})}),(0,Je.jsx)("div",{className:"col-xxl-4 col-xl-5 col-lg-6 col-sm-8 mx-auto",children:(0,Je.jsxs)("div",{className:"log-in-box",children:[(0,Je.jsxs)("div",{className:"log-in-title",children:[(0,Je.jsx)("h3",{children:"Welcome To NakshatraTalkS"}),(0,Je.jsx)("h4",{children:"Please Submit The Details"})]}),(0,Je.jsx)("div",{className:"input-box",children:(0,Je.jsxs)("form",{className:"row g-4",method:"post",onSubmit:function(e){e.preventDefault(),d.day&&d.month&&d.year&&d.hour&&d.min&&d.am_pm?n.startTransition((function(){localStorage.setItem("userData",JSON.stringify(d)),console.log("User data:",d),r("/")})):c("Please fill in all required fields.")},children:[(0,Je.jsxs)("div",{className:"col-12",children:[(0,Je.jsx)("label",{htmlFor:"dob",className:"form-label",children:"Date of Birth"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsxs)("div",{style:{width:"100%"},children:[(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"day",value:d.day,onChange:p,children:[(0,Je.jsx)("option",{children:"Day"}),f(1,31)]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"month",value:d.month,onChange:p,children:[(0,Je.jsx)("option",{children:"Month"}),f(1,12)]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"year",value:d.year,onChange:p,children:[(0,Je.jsx)("option",{children:"Year"}),f(1950,(new Date).getFullYear())]})]})})]}),(0,Je.jsxs)("div",{className:"col-12",children:[(0,Je.jsx)("label",{htmlFor:"birthTime",className:"form-label",children:"Birth Time"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsxs)("div",{style:{width:"100%"},children:[(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"hour",value:d.hour,onChange:p,children:[(0,Je.jsx)("option",{children:"Hour"}),f(1,12)]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"min",value:d.min,onChange:p,children:[(0,Je.jsx)("option",{children:"Minute"}),f(0,59)]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"am_pm",value:d.am_pm,onChange:p,children:[(0,Je.jsx)("option",{children:"AM"}),(0,Je.jsx)("option",{children:"PM"})]})]})})]}),(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsx)("button",{type:"submit",class:"btn btn-md bg-dark cart-button text-white w-80",children:"Submit"})})]})})]})})]})})}),(0,Je.jsx)(en,{})]})};var nn=function(){return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)(tn,{}),(0,Je.jsx)(Ze.default,{}),(0,Je.jsx)(ft,{})]})};var rn=function(e){return"object"===typeof e&&null!==e},on=function(e){var t=e.value,r=void 0===t?"":t,i=e.numInputs,o=void 0===i?4:i,a=e.onChange,s=e.renderInput,c=e.shouldAutoFocus,u=void 0!==c&&c,l=e.inputType,d=void 0===l?"text":l,h=e.renderSeparator,f=e.placeholder,p=e.containerStyle,v=e.inputStyle,g=n.useState(0),m=g[0],y=g[1],b=n.useRef([]),_=function(){return r?r.toString().split(""):[]},E="number"===d||"tel"===d;n.useEffect((function(){b.current=b.current.slice(0,o)}),[o]),n.useEffect((function(){var e;u&&(null===(e=b.current[0])||void 0===e||e.focus())}),[u]);var S=function(){if("string"===typeof f){if(f.length===o)return f;f.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},w=function(e){return(E?!isNaN(Number(e)):"string"===typeof e)&&1===e.trim().length},x=function(e){var t=e.target.value;if(w(t))k(t),R(m+1);else{var n=e.nativeEvent;null===n.data&&"deleteContentBackward"===n.inputType&&(e.preventDefault(),k(""),R(m-1))}},T=function(){y(m-1)},I=function(e){var t=_();[e.code,e.key].includes("Backspace")?(e.preventDefault(),k(""),R(m-1)):"Delete"===e.code?(e.preventDefault(),k("")):"ArrowLeft"===e.code?(e.preventDefault(),R(m-1)):"ArrowRight"===e.code||e.key===t[m]?(e.preventDefault(),R(m+1)):("Spacebar"===e.code||"Space"===e.code||"ArrowUp"===e.code||"ArrowDown"===e.code||E&&!w(e.key))&&e.preventDefault()},R=function(e){var t,n,r=Math.max(Math.min(o-1,e),0);b.current[r]&&(null===(t=b.current[r])||void 0===t||t.focus(),null===(n=b.current[r])||void 0===n||n.select(),y(r))},k=function(e){var t=_();t[m]=e[0],O(t)},O=function(e){var t=e.join("");a(t)},C=function(e){var t;e.preventDefault();var n=_(),r=m,i=e.clipboardData.getData("text/plain").slice(0,o-m).split("");if(!E||!i.some((function(e){return isNaN(Number(e))}))){for(var a=0;a<o;++a)a>=m&&i.length>0&&(n[a]=null!==(t=i.shift())&&void 0!==t?t:"",r++);R(r),O(n)}};return n.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},rn(p)&&p),className:"string"===typeof p?p:void 0},Array.from({length:o},(function(e,t){return t})).map((function(e){var t,r,i;return n.createElement(n.Fragment,{key:e},s({value:null!==(t=_()[e])&&void 0!==t?t:"",placeholder:null!==(i=null===(r=S())||void 0===r?void 0:r[e])&&void 0!==i?i:void 0,ref:function(t){return b.current[e]=t},onChange:x,onFocus:function(t){return function(e){return function(t){y(t),e.target.select()}}(t)(e)},onBlur:T,onKeyDown:I,onPaste:C,autoComplete:"off",maxLength:1,"aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign({width:"1em",textAlign:"center"},rn(v)&&v),className:"string"===typeof v?v:void 0,type:d},e),e<o-1&&("function"===typeof h?h(e):h))})))};var an=function(){var e=(0,n.useState)(null),t=(0,o.Z)(e,2),r=(t[0],t[1]),a=(0,n.useState)(null),s=(0,o.Z)(a,2),c=(s[0],s[1]),u=(0,i.s0)(),l=(0,n.useState)(""),d=(0,o.Z)(l,2),h=d[0],f=d[1],p=(0,n.useState)({mobile_no:""}),v=(0,o.Z)(p,2),g=v[0],m=v[1],y=(0,n.useState)(!1),b=(0,o.Z)(y,2),_=b[0],E=b[1],S=function(){var e=lt(ct().mark((function e(t){var n,r;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Ye.post("http://103.104.74.215:3012/api/user/signup",g);case 3:n=e.sent,E(!0),n.data.data&&($t("otp sent successfully"),$t(n.data.data[0].otp),r=n.data.data[0]._id,I((0,tt.Z)((0,tt.Z)({},T),{},{_id:r})),localStorage.setItem("_id",JSON.stringify(r)),localStorage.setItem("iddofuser",r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=(0,n.useState)({_id:"",otp:""}),x=(0,o.Z)(w,2),T=x[0],I=x[1];return(0,n.useEffect)((function(){var e=h;I((0,tt.Z)((0,tt.Z)({},T),{},{otp:e}))}),[h]),(0,n.useEffect)((function(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,n=t.latitude,i=t.longitude;r(n),c(i),localStorage.setItem("latitude",n),localStorage.setItem("longitude",i)}),(function(e){console.error("Error getting geolocation:",e.message)})):console.error("Geolocation is not supported by this browser.")}),[]),(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)(qt,{}),(0,Je.jsx)("section",{className:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsxs)("div",{className:"breadscrumb-contain",children:[(0,Je.jsx)("h2",{children:"Log In"}),(0,Je.jsx)("nav",{children:(0,Je.jsx)("ol",{className:"breadcrumb mb-0"})})]})})})})}),(0,Je.jsx)("section",{className:"log-in-section otp-section section-b-space",children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsxs)("div",{className:"row",children:[(0,Je.jsx)("div",{className:"col-xxl-6 col-xl-5 col-lg-6 d-lg-block d-none ms-auto",children:(0,Je.jsx)("div",{className:"image-contain",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/otp.png",className:"img-fluid",alt:""})})}),(0,Je.jsx)("div",{className:"col-xxl-4 col-xl-5 col-lg-6 col-sm-8 mx-auto",children:(0,Je.jsx)("div",{className:"d-flex align-items-center justify-content-center h-100",children:(0,Je.jsx)("div",{className:"log-in-box",children:(0,Je.jsxs)("div",{className:"log-in-title",children:[(0,Je.jsx)("h3",{children:"Welcome To NAKSHATRA TALKS"}),!0===_?(0,Je.jsxs)("div",{children:[(0,Je.jsx)("div",{className:"log-in-title",children:(0,Je.jsxs)("h5",{className:"text-content",children:["A code has been sent to ",(0,Je.jsx)("span",{children:"Your Mobile Number"})]})}),(0,Je.jsxs)("form",{action:"",method:"post",children:[(0,Je.jsx)("div",{id:"otp",className:"inputs d-flex flex-row justify-content-center",children:(0,Je.jsx)(on,{value:h,onChange:f,numInputs:4,inputStyle:{width:"100px",height:"50px"},style:{width:"100px",height:"100px"},renderInput:function(e){return(0,Je.jsx)("input",(0,tt.Z)({},e))},inputProps:{type:"number"}})}),(0,Je.jsx)("div",{className:"send-box pt-4",onClick:function(){Ye.patch("http://103.104.74.215:3012/api/user/resend_otp/",g).then((function(e){e.data.result&&($t.success(e.data.msg),$t.success(e.data.data.otp))})).catch((function(e){console.log(e)}))},children:(0,Je.jsxs)("h5",{children:["Didn't get the code?"," ",(0,Je.jsx)("a",{href:"javascript:void(0)",className:"theme-color fw-bold",children:"Resend It"})]})}),(0,Je.jsx)("a",{children:(0,Je.jsx)("button",{className:"btn  w-100 mt-3",type:"submit",onClick:function(e){e.preventDefault(),Ye.post("http://103.104.74.215:3012/api/user/verify_otp",T).then((function(e){e.data.result?($t.success(e.data.msg),setTimeout((function(){u("/")}),2e3)):$t.error("invalid otp")}))},style:{backgroundColor:"#d99f46",fontWeight:"bold",color:"white"},children:"verify otp"})})]})]}):(0,Je.jsxs)("div",{children:[(0,Je.jsx)("p",{children:"Please enter your mobile number to Login/Sign Up on Nakshatra Talks"}),(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsxs)("form",{method:"post",onSubmit:S,children:[(0,Je.jsxs)("div",{className:"form-floating theme-form-floating log-in-form",children:[(0,Je.jsx)("input",{type:"tel",maxLength:"10",className:"form-control",id:"email",placeholder:"Mobile Number",name:"mobile_no",onChange:function(e){var t=e.target.name,n=e.target.value;m((0,tt.Z)((0,tt.Z)({},g),{},(0,mt.Z)({},t,n)))}}),(0,Je.jsx)("label",{children:"Mobile Number"})]}),(0,Je.jsx)("a",{children:(0,Je.jsx)("button",{style:{backgroundColor:"#d99f46",fontWeight:"bold",color:"white"},className:"btn w-100 ",type:"submit",children:"Generate otp"})})]})})]})]})})})})]})})})]})};var sn=function(){return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)(an,{}),(0,Je.jsx)(Ze.default,{}),(0,Je.jsx)(ft,{})]})},cn=__webpack_require__(382),un=(__webpack_require__(9147),function(){var e=(0,n.useState)(),t=(0,o.Z)(e,2),r=(t[0],t[1]),a=(0,n.useState)(""),s=(0,o.Z)(a,2),c=(s[0],s[1],(0,n.useState)([])),u=(0,o.Z)(c,2),l=(u[0],u[1],(0,n.useState)([])),d=(0,o.Z)(l,2),h=(d[0],d[1],(0,n.useState)("")),f=(0,o.Z)(h,2),p=f[0],v=f[1],g=function(){var e=lt(ct().mark((function e(t){var n,r;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,cn.NU)(t);case 2:return n=e.sent,e.next=5,(0,cn.WV)(n[0]);case 5:r=e.sent,console.log("Latitude and Longitude:",r),v(t),localStorage.setItem("valuee",t),localStorage.setItem("lat",JSON.stringify(r));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=localStorage.getItem("lat"),y=JSON.parse(m),b=(0,n.useState)(y),_=(0,o.Z)(b,2),E=_[0],S=(_[1],(0,i.s0)()),w=(0,n.useState)({name:"",gender:"",day:"",month:"",year:"",hour:"",min:"",am_pm:"",placeOfBirth:""}),x=(0,o.Z)(w,2),T=x[0],I=x[1],R=(0,n.useState)(""),k=(0,o.Z)(R,2),O=k[0],C=k[1],A=function(e){var t=e.target,n=t.name,r=t.value;I((0,tt.Z)((0,tt.Z)({},T),{},(0,mt.Z)({},n,r)))};return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)("section",{className:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsx)("div",{className:"breadscrumb-contain",children:(0,Je.jsx)("h2",{children:"Kundli "})})})})})}),(0,Je.jsx)("section",{className:"fresh-vegetable-section section-lg-space",children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsx)("div",{className:"title",style:{padding:"5px"},children:(0,Je.jsxs)("div",{className:"row",children:[(0,Je.jsx)("div",{className:"col-lg-3",children:(0,Je.jsx)("img",{className:"img2",src:"../assets/images/logo/kun.jpg",alt:"aries",width:"170",height:"170"})}),(0,Je.jsxs)("div",{className:"col-lg-9",children:[(0,Je.jsx)("h2",{children:"Kundli"}),(0,Je.jsx)("p",{children:"Kundli is an astrological chart which shows the exact position of heavenly bodies and planets at a particular time. Janam Kundli or Horoscope is a similar astrological chart that is constructed by Vedic astrologers on the basis of the exact birthdate, birthplace and birth time of an individual."})]})]})})})}),(0,Je.jsx)("section",{className:"client-section section-lg-space",children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsxs)("div",{className:"row",children:[(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsx)("div",{className:"about-us-title text-center",children:(0,Je.jsx)("h2",{className:"center",children:"Get Your free Janam Kundli"})})}),(0,Je.jsx)("div",{className:"col-lg-12",children:(0,Je.jsxs)("div",{className:"right-sidebar-box",children:[(0,Je.jsx)("font",{style:{color:"blue"},children:O&&(0,Je.jsx)("p",{children:O})}),(0,Je.jsx)("form",{onSubmit:function(e){e.preventDefault();if(T.day)if(T.month)if(T.year)if(T.hour)if(T.min)if(T.name)if(T.gender)if(p){var t=localStorage.getItem("latitude"),n=localStorage.getItem("longitude"),i={day:Number(T.day),month:Number(T.month),year:Number(T.year),hour:Number(T.hour),min:Number(T.min),lat:t?null===E||void 0===E?void 0:E.lat:12.12,lon:n?null===E||void 0===E?void 0:E.lng:72.12,tzone:5.5,name:T.name,birthplace:p,gender:T.gender};console.log("dataataaaa",i),localStorage.setItem("responseDatadata",JSON.stringify(i));var o="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("birth_details"),i,{headers:{authorization:o,"Content-Type":"application/json"}}).then((function(e){r(e.data),localStorage.setItem("responseData",JSON.stringify(e.data)),S("/selfkundali")})).catch((function(e){console.error("Error fetching data:",e)}))}else C("Please Enter Bithplace.");else C("Please select a Gender.");else C("Please Enter a Name.");else C("Please a minute.");else C("Please select a Hour.");else C("Please select a year.");else C("Please a Month .");else C("Please Select a day.")},children:(0,Je.jsxs)("div",{className:"row",children:[(0,Je.jsx)("div",{className:"col-xxl-6 col-lg-6 col-sm-6",children:(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",placeholder:"Enter Your Name",value:T.name,onChange:A})})]})}),(0,Je.jsx)("div",{className:"col-xxl-6 col-lg-6 col-sm-6",children:(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{htmlFor:"gender",className:"form-label",children:"Gender"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsxs)("select",{style:{paddingTop:"5px"},className:"form-control",id:"gender",name:"gender",value:T.gender,onChange:A,children:[(0,Je.jsx)("option",{value:"",children:"Select Gender"}),(0,Je.jsx)("option",{value:"male",children:"Male"}),(0,Je.jsx)("option",{value:"female",children:"Female"})]})})]})}),(0,Je.jsx)("div",{className:"col-xxl-6 col-lg-6 col-sm-6",children:(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{htmlFor:"dob",className:"form-label",children:"Date of Birth"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsxs)("div",{style:{width:"100%"},children:[(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"day",value:T.day,onChange:A,children:[(0,Je.jsx)("option",{children:"Day"}),Array.from({length:31},(function(e,t){return t+1})).map((function(e){return(0,Je.jsx)("option",{children:e},e)}))]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"month",value:T.month,onChange:A,children:[(0,Je.jsx)("option",{children:"Month"}),Array.from({length:12},(function(e,t){return t+1})).map((function(e){return(0,Je.jsx)("option",{value:e,children:new Date(0,e-1).toLocaleString("default",{month:"long"})},e)}))]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"year",value:T.year,onChange:A,children:[(0,Je.jsx)("option",{children:"Year"}),function(){var e=(new Date).getFullYear();return Array.from({length:e-1950+1},(function(t,n){return e-n})).map((function(e){return(0,Je.jsx)("option",{children:e},e)}))}()]})]})})]})}),(0,Je.jsx)("div",{className:"col-xxl-6 col-lg-6 col-sm-6",children:(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{htmlFor:"birthTime",className:"form-label",children:"Birth Time"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsxs)("div",{style:{width:"100%"},children:[(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"hour",value:T.hour,onChange:A,children:[(0,Je.jsx)("option",{children:"Hour"}),Array.from({length:12},(function(e,t){return t+1})).map((function(e){return(0,Je.jsx)("option",{children:e},e)}))]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"min",value:T.min,onChange:A,children:[(0,Je.jsx)("option",{children:"Minute"}),Array.from({length:60},(function(e,t){return t})).map((function(e){return(0,Je.jsx)("option",{children:e.toString().padStart(2,"0")},e)}))]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"am_pm",value:T.am_pm,onChange:A,children:[(0,Je.jsx)("option",{children:"AM"}),(0,Je.jsx)("option",{children:"PM"})]})]})})]})}),(0,Je.jsxs)("div",{className:"col-xxl-6 col-lg-6 col-sm-6",children:[(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{htmlFor:"name",className:"form-label",children:"Birth Place"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsx)(cn.ZP,{value:p,onChange:function(e){return v(e)},onSelect:g,children:function(e){var t=e.getInputProps,n=e.suggestions,r=e.getSuggestionItemProps,i=e.loading;return(0,Je.jsxs)("div",{children:[(0,Je.jsx)("input",(0,tt.Z)({className:"form-control"},t({placeholder:"Type address"}))),(0,Je.jsxs)("div",{children:[i&&(0,Je.jsx)("div",{children:"Loading..."}),n.map((function(e){var t={backgroundColor:e.active?"#41b6e6":"#fff"};return(0,Je.jsx)("div",(0,tt.Z)((0,tt.Z)({},r(e,{style:t})),{},{children:e.description}))}))]})]})}})})]}),(0,Je.jsx)("div",{}),(0,Je.jsx)("div",{className:"col-xxl-6 col-lg-3 col-sm-6",children:(0,Je.jsx)("div",{className:"mb-md-4 mb-3 custom-form",children:(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsx)("button",{type:"submit",className:"btn btn-animation btn-md fw-bold ms-auto",children:"Get Your Kundli"})})})})]})]})})]})})]})})})]})}),ln=function(){return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("section",{className:"team-section section-lg-space",children:(0,Je.jsxs)("div",{className:"container-fluid-lg",children:[(0,Je.jsx)("div",{className:"about-us-title text-center"}),(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsx)("div",{className:"slider-user product-wrapper",children:(0,Je.jsxs)(nt.Z,(0,tt.Z)((0,tt.Z)({},{dots:!0,autoplay:!0,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:1,flexDirection:"row"}),{},{children:[(0,Je.jsx)("div",{className:"team-box",children:(0,Je.jsxs)("a",{href:"#",children:[(0,Je.jsx)("div",{className:"team-image",children:(0,Je.jsx)("img",{src:"../assets/images/blog/Kundali.jpg",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsx)("div",{className:"team-name",children:(0,Je.jsx)("h3",{children:"Matchmaking"})})]})}),(0,Je.jsx)("div",{className:"team-box",children:(0,Je.jsxs)("a",{href:"#",children:[(0,Je.jsx)("div",{className:"team-image",children:(0,Je.jsx)("img",{src:"../assets/images/blog/Kundali.jpg",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsx)("div",{className:"team-name",children:(0,Je.jsx)("h3",{children:"Matchmaking"})})]})}),(0,Je.jsx)("div",{className:"team-box",children:(0,Je.jsxs)("a",{href:"#",children:[(0,Je.jsx)("div",{className:"team-image",children:(0,Je.jsx)("img",{src:"../assets/images/blog/Kundali.jpg",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsx)("div",{className:"team-name",children:(0,Je.jsx)("h3",{children:"Matchmaking"})})]})}),(0,Je.jsx)("div",{className:"team-box",children:(0,Je.jsxs)("a",{href:"#",children:[(0,Je.jsx)("div",{className:"team-image",children:(0,Je.jsx)("img",{src:"../assets/images/blog/Kundali.jpg",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsx)("div",{className:"team-name",children:(0,Je.jsx)("h3",{children:"Matchmaking"})})]})}),(0,Je.jsx)("div",{className:"team-box",children:(0,Je.jsxs)("a",{href:"#",children:[(0,Je.jsx)("div",{className:"team-image",children:(0,Je.jsx)("img",{src:"../assets/images/blog/Kundali.jpg",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsx)("div",{className:"team-name",children:(0,Je.jsx)("h3",{children:"Matchmaking"})})]})}),(0,Je.jsx)("div",{className:"team-box",children:(0,Je.jsxs)("a",{href:"#",children:[(0,Je.jsx)("div",{className:"team-image",children:(0,Je.jsx)("img",{src:"../assets/images/blog/Kundali.jpg",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsx)("div",{className:"team-name",children:(0,Je.jsx)("h3",{children:"Kundli Type"})})]})})]}))})})})]})})})},dn=function(){return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)("section",{class:"review-section section-lg-space",children:(0,Je.jsxs)("div",{class:"container-fluid",children:[(0,Je.jsx)("div",{class:"about-us-title text-center",children:(0,Je.jsx)("h4",{class:"center",children:"Free Online Kundli"})}),(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsx)("p",{children:" The Kundli is mostly referred to as \u2018Janam Patrika\u2019 or Horoscope. It would contain the details of all major astrological aspects of a person at the time of his/her birth. This chart tells the location of various zodiac signs, planet and other aspects which are considered in an astrological analysis. Kundli creation is to be only done by an expert and experienced astrologers as it is a very complex procedure and contains intricate details. Which planet makes what kind of yoga? What are the defects in the horoscope? Many such questions can be answered after analyzing one\u2019s Kundli. Overall, the horoscope describes the condition and direction of the planets at the time of birth, on the basis of which the future of the individual is anticipated. You can check your free online kundli on this page."})})})]})}),(0,Je.jsx)("section",{class:"section-lg-space",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsx)("div",{class:"about-us-title text-center",children:(0,Je.jsx)("h2",{class:"center",children:"Benefits of the Kundli?"})}),(0,Je.jsx)("div",{class:"row",children:(0,Je.jsxs)("div",{class:"col-12",children:[(0,Je.jsx)("p",{children:"As per Vedic Astrology, one's 'kundli' is the blueprint of his/her life. It would provide insights about major milestones in one's life and the time frame in which it would happen. It also bolsters the fact that everything in life happens for a reason and everything in the universe adheres to the cosmic laws of the universe. Astrology studies the connection of life on earth to the cosmos. Just like the effect of Moon on the tides and currents, our lives and emotions are being influenced by planets and heavenly bodies. A deeper look at it would reveal the scientific aspect of astrology and we would be surprised to learn how advanced a science is Vedic astrology which is being disdained and labelled as superstitious by some people nowadays. Astrology will help one to get insights and guidance about his time and fortune, of course timely and wise actions can reduce the ill effects and negative impacts and take advantage of the favourable time period. To decode these negative impacts and implications in-depth knowledge and expertise in Vedic astrology is required which will only be processed by a seasoned Vedic astrologer."}),(0,Je.jsx)("p",{children:" Astroyogi\u2019s horoscope page will provide you with free online 'kundli' which will contain all the basic information required for a basic analysis of your horoscope. You can also analyse your horoscope with the information you obtain here, depending on your knowledge level in Vedic astrology. This is also an effort to protect you from misleading and incorrect information given by fraud and fake astrologers. How is the \u2018Kundli\u2019 formed? How many types of \u2018Kundli\u2019 are there? How are yogas made in the \u2018Kundli\u2019? What are the defects in the \u2018Kundli\u2019? The ocean of the knowledge related to astrology is quite vast and what has been shared her e is quite limited whereby it is suggested to consult best Astrologers in India available listed on Astroyogi's 'Talk to Astrologer' section if you want to learn more."})]})})]})})]})},hn=function(){return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("div",{"_ngcontent-serverapp-c87":"",class:"faq_about_aries_horoscope",children:(0,Je.jsxs)("div",{"_ngcontent-serverapp-c87":"",class:"container",children:[(0,Je.jsx)("h2",{"_ngcontent-serverapp-c87":"",class:"heading_seo_content_headline_chinese_horoscope",style:{textAlign:"center"},children:"Frequently Asked Questions"}),(0,Je.jsxs)("div",{"_ngcontent-serverapp-c87":"",class:"",style:{paddingTop:"10px"},children:[(0,Je.jsx)("h3",{style:{textAlign:"center"},children:(0,Je.jsx)("strong",{children:"What is a Janma Kundli?"})}),(0,Je.jsx)("hr",{}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"Janma Kundli or Janampatri, or birth chart as we know it in English, is the map of the sky at the time of an individual\u2019s birth. Janam Kundli is critical in predicting what an individual\u2019s future is going to be like."})}),(0,Je.jsx)("hr",{}),(0,Je.jsx)("h3",{style:{textAlign:"center"},children:(0,Je.jsx)("strong",{children:"Is an online Kundli helpful?"})}),(0,Je.jsx)("hr",{}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"Nowadays, getting your Kundli created online and getting an analysis is quite common. An online Kundli report can turn out to be incredibly reliable and useful when it is being created on a trustworthy website. You can now easily get your Kundli made and matched on Astroyogi - Your GPS for Life!"})}),(0,Je.jsx)("hr",{}),(0,Je.jsx)("h3",{style:{textAlign:"center"},children:(0,Je.jsx)("strong",{children:"What is the Lagna chart?"})}),(0,Je.jsx)("hr",{}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"Lagna Chart is one of the most important charts of kundli in Vedic astrology. The Lagna chart is drawn by taking an individual's birth time as the source. This particular chart is used to depict an individual's outer behaviour. It tells about a person's education, relationships, income, etc."})}),(0,Je.jsx)("hr",{}),(0,Je.jsx)("h3",{style:{textAlign:"center"},children:(0,Je.jsx)("strong",{children:"How do I get my online Janam Kundli created?"})}),(0,Je.jsx)("hr",{}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"Getting an online Janam Kundli is now easy with Astroyogi. All you need to do is put in the correct information in the given boxes on Astroyogi\u2019s Kundli page and click on the \u2018Get Your Kundli\u2019 box to generate your Kundli. Check your Kundli now and get to know what lies ahead in your future."})}),(0,Je.jsx)("hr",{}),(0,Je.jsx)("h3",{style:{textAlign:"center"},children:(0,Je.jsx)("strong",{children:"What is the Navamsa chart?"})}),(0,Je.jsx)("hr",{}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"Navamsa chart is a divisional chart. When a zodiac sign is subdivided into nine parts or divisions, it is called Navamsa. Navamsa chart is used to analyse different aspects of an individual\u2019s life like fate, marriage, etc."})}),(0,Je.jsx)("hr",{})]})]})})})};var fn=function(){return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)(un,{}),(0,Je.jsx)(ln,{}),(0,Je.jsx)(dn,{}),(0,Je.jsx)(hn,{}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})]})},pn=function(){var e=(0,n.useState)(),t=(0,o.Z)(e,2),r=(t[0],t[1]),s=(0,i.s0)(),c=(0,n.useState)({name:"",gender:"",day:"",month:"",year:"",hour:"",min:"",am_pm:"",placeOfBirth:""}),u=(0,o.Z)(c,2),l=u[0],d=u[1],h=(0,n.useState)(""),f=(0,o.Z)(h,2),p=f[0],v=f[1],g=function(e){var t=e.target,n=t.name,r=t.value;d((0,tt.Z)((0,tt.Z)({},l),{},(0,mt.Z)({},n,r)))},m=function(){return Array.from({length:31},(function(e,t){return t+1})).map((function(e){return(0,Je.jsx)("option",{children:e},e)}))},y=function(){return Array.from({length:12},(function(e,t){return t+1})).map((function(e){return(0,Je.jsx)("option",{value:e,children:new Date(0,e-1).toLocaleString("default",{month:"long"})},e)}))},b=function(){var e=(new Date).getFullYear();return Array.from({length:e-1950+1},(function(t,n){return e-n})).map((function(e){return(0,Je.jsx)("option",{children:e},e)}))},_=function(){return Array.from({length:12},(function(e,t){return t+1})).map((function(e){return(0,Je.jsx)("option",{children:e},e)}))},E=function(){return Array.from({length:60},(function(e,t){return t})).map((function(e){return(0,Je.jsx)("option",{children:e.toString().padStart(2,"0")},e)}))};return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)("section",{class:"home-section pt-2",children:(0,Je.jsx)("div",{class:"container-fluid-lg",style:{background:"linear-gradient(to bottom, #00cc00 0%, #ff99cc 100%)"},children:(0,Je.jsx)("img",{align:"right",src:"../assets/images/logo/hs.png",width:"100%"})})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsxs)("div",{class:"title",style:{paddingTop:"20px"},children:[(0,Je.jsx)("h2",{style:{textAlign:"center"},children:"Free Match Making - Kundli Milan & Gun Milan to Check Possibilities of Marriage"}),(0,Je.jsxs)("p",{children:[" ","The success of a marriage depends on your own values, tolerance, and adjustment skills, such traits in a person are easily known by reading his or her horoscope. And they can be matched with another horoscope through Kundli Milan."]}),(0,Je.jsx)("p",{children:"Kundli Milan helps in understanding the issues a couple might face in their marital life. Kundli Milan work as a guiding force, giving you a overview of areas which are strong as a couple and where would you both need to work upon."}),(0,Je.jsxs)("p",{children:["Vedic astrology enthusiasts are usually familiar with the concept of Guna Milaan. In fact, Guna Milaan and Kundli matching for marriage are often seen as the same. This is not the case. Guna Milaan is just one part of it. While matching Janam Kundli of both bride and groom, several factors are assessed. The position of natal Moon is assessed in both the partner\u2019s chart."," "]}),(0,Je.jsx)("p",{children:"For example, An expert astrologer would also assess both the chart for presence of Mangal Dosha. If it exists in both the chart, the effect nullifies but if it exists in one of the charts, some serious remedies are suggested to mitigate the harmful effects based on the severity of the Dosha. If your Moon occupies the 6th house and your partner\u2019s Moon is placed 8th then it is considered inauspicious for a marriage. The strength of 7th house of partner and 7th lord is also taken into account when conducting horoscope matching."})]})})}),(0,Je.jsx)("section",{class:"seller-grid-section",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsx)("h2",{children:"Fill Up Partner's Detail"}),(0,Je.jsx)("br",{}),(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-lg-12 col-md-12",children:(0,Je.jsx)("div",{class:"seller-grid-box",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsx)("div",{class:"col-lg-12",children:(0,Je.jsxs)("div",{className:"right-sidebar-box",children:[(0,Je.jsx)("font",{style:{color:"blue"},children:p&&(0,Je.jsx)("p",{children:p})}),(0,Je.jsxs)("form",{onSubmit:function(e){e.preventDefault();if(l.day)if(l.month)if(l.year)if(l.hour)if(l.min)if(l.name)if(l.gender){var t=localStorage.getItem("latitude"),n=localStorage.getItem("longitude"),i={m_day:Number(l.m_day),m_month:Number(l.m_month),m_year:Number(l.m_year),m_hour:Number(l.m_hour),m_min:Number(l.m_min),m_lat:t?parseFloat(t):12.12,m_lon:n?parseFloat(n):72.342,m_tzone:5.5,f_day:Number(l.f_day),f_month:Number(l.f_month),f_year:Number(l.f_year),f_hour:Number(l.f_hour),f_min:Number(l.f_min),f_lat:t?parseFloat(t):19.12,f_lon:n?parseFloat(n):72.342,f_tzone:5.5},o="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("match_birth_details"),i,{headers:{authorization:o,"Content-Type":"application/json"}}).then((function(e){r(e.data),localStorage.setItem("responseDataofbirth",JSON.stringify(e.data)),s("/kundalireport")})).catch((function(e){console.error("Error fetching data:",e)}))}else v("Please select a Gender.");else v("Please Enter a Name.");else v("Please a minute.");else v("Please select a Hour.");else v("Please select a year.");else v("Please a Month .");else v("Please Select a day.")},children:[(0,Je.jsxs)("div",{className:"row",children:[(0,Je.jsx)("div",{className:"col-lg-6 col-md-6",children:(0,Je.jsx)("div",{className:"seller-grid-box",children:(0,Je.jsx)("div",{className:"grid-contain",children:(0,Je.jsxs)("div",{className:"col-lg-12",children:[(0,Je.jsx)("div",{className:"title d-xxl-none d-block",children:(0,Je.jsx)("h2",{children:"Male"})}),(0,Je.jsxs)("div",{className:"right-sidebar-box",children:[(0,Je.jsx)("font",{style:{color:"blue"},children:p&&(0,Je.jsx)("p",{children:p})}),(0,Je.jsxs)("div",{className:"row",children:[(0,Je.jsx)("div",{className:"col-xxl-6 col-lg-6 col-sm-6",children:(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsx)("input",{type:"text",className:"form-control",id:"name",name:"m_name",placeholder:"Enter Your Name",value:l.m_name,onChange:g})})]})}),(0,Je.jsx)("div",{className:"col-xxl-6 col-lg-6 col-sm-6",children:(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{htmlFor:"gender",className:"form-label",children:"Gender"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsxs)("select",{style:{paddingTop:"5px"},type:"text",className:"form-control",id:"gender",name:"m_gender",placeholder:"Select Gender",value:l.m_gender,onChange:g,children:[(0,Je.jsx)("option",{value:"",children:"Select Gender"}),(0,Je.jsx)("option",{value:"male",children:"Male"}),(0,Je.jsx)("option",{value:"female",children:"Female"})]})})]})}),(0,Je.jsx)("div",{className:"col-xxl-6 col-lg-6 col-sm-6",children:(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{htmlFor:"dob",className:"form-label",children:"Date of Birth"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsxs)("div",{style:{width:"100%"},children:[(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"m_day",value:l.m_day,onChange:g,children:[(0,Je.jsx)("option",{children:"Day"}),m()]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"m_month",value:l.m_month,onChange:g,children:[(0,Je.jsx)("option",{children:"Month"}),y()]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"m_year",value:l.m_year,onChange:g,children:[(0,Je.jsx)("option",{children:"Year"}),b()]})]})})]})}),(0,Je.jsx)("div",{className:"col-xxl-6 col-lg-6 col-sm-6",children:(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{htmlFor:"birthTime",className:"form-label",children:"Birth Time"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsxs)("div",{style:{width:"100%"},children:[(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"m_hour",value:l.m_hour,onChange:g,children:[(0,Je.jsx)("option",{children:"Hour"}),_()]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"m_min",value:l.m_min,onChange:g,children:[(0,Je.jsx)("option",{children:"Minute"}),E()]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"m_am_pm",value:l.m_am_pm,onChange:g,children:[(0,Je.jsx)("option",{children:"AM"}),(0,Je.jsx)("option",{children:"PM"})]})]})})]})}),(0,Je.jsx)("div",{className:"col-xxl-12 col-lg-12 col-sm-12",children:(0,Je.jsxs)("div",{className:"mb-md-6 mb-3 custom-form",children:[(0,Je.jsx)("label",{htmlFor:"name",className:"form-label",children:"Birth Place"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsx)("input",{type:"text",className:"form-control",id:"place",name:"m_birthplace",placeholder:"Enter Your Birth-place",value:l.m_birthplace,onChange:g})})]})})]})]})]})})})}),(0,Je.jsx)("div",{className:"col-lg-6 col-md-6",children:(0,Je.jsx)("div",{className:"seller-grid-box",children:(0,Je.jsx)("div",{className:"grid-contain",children:(0,Je.jsxs)("div",{className:"col-lg-12",children:[(0,Je.jsx)("div",{className:"title d-xxl-none d-block",children:(0,Je.jsx)("h2",{children:"Female"})}),(0,Je.jsxs)("div",{className:"right-sidebar-box",children:[(0,Je.jsx)("font",{style:{color:"blue"},children:p&&(0,Je.jsx)("p",{children:p})}),(0,Je.jsxs)("div",{className:"row",children:[(0,Je.jsx)("div",{className:"col-xxl-6 col-lg-6 col-sm-6",children:(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsx)("input",{type:"text",className:"form-control",id:"name",name:"f_name",placeholder:"Enter Your Name",value:l.f_name,onChange:g})})]})}),(0,Je.jsx)("div",{className:"col-xxl-6 col-lg-6 col-sm-6",children:(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{htmlFor:"gender",className:"form-label",children:"Gender"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsxs)("select",{style:{paddingTop:"5px"},type:"text",className:"form-control",id:"gender",name:"f_gender",placeholder:"Select Gender",value:l.f_gender,onChange:g,children:[(0,Je.jsx)("option",{value:"",children:"Select Gender"}),(0,Je.jsx)("option",{value:"male",children:"Male"}),(0,Je.jsx)("option",{value:"female",children:"Female"})]})})]})}),(0,Je.jsx)("div",{className:"col-xxl-6 col-lg-6 col-sm-6",children:(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{htmlFor:"dob",className:"form-label",children:"Date of Birth"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsxs)("div",{style:{width:"100%"},children:[(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"f_day",value:l.f_day,onChange:g,children:[(0,Je.jsx)("option",{children:"Day"}),m()]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"f_month",value:l.f_month,onChange:g,children:[(0,Je.jsx)("option",{children:"Month"}),y()]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"f_year",value:l.f_year,onChange:g,children:[(0,Je.jsx)("option",{children:"Year"}),b()]})]})})]})}),(0,Je.jsx)("div",{className:"col-xxl-6 col-lg-6 col-sm-6",children:(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{htmlFor:"birthTime",className:"form-label",children:"Birth Time"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsxs)("div",{style:{width:"100%"},children:[(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"f_hour",value:l.f_hour,onChange:g,children:[(0,Je.jsx)("option",{children:"Hour"}),_()]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"f_min",value:l.f_min,onChange:g,children:[(0,Je.jsx)("option",{children:"Minute"}),E()]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"f_am_pm",value:l.f_am_pm,onChange:g,children:[(0,Je.jsx)("option",{children:"AM"}),(0,Je.jsx)("option",{children:"PM"})]})]})})]})}),(0,Je.jsx)("div",{className:"col-xxl-12 col-lg-12 col-sm-12",children:(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{htmlFor:"name",className:"form-label",children:"Birth Place"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsx)("input",{type:"text",className:"form-control",id:"place",name:"f_birthplace",placeholder:"Enter Your Bith-place",value:l.f_birthplace,onChange:g})})]})})]})]})]})})})})]}),(0,Je.jsx)(a.rU,{to:"/kundalireport",children:(0,Je.jsx)("button",{type:"submit",className:"btn btn-animation btn-md fw-bold ms-auto",style:{borderRadius:"20px"},children:"Match Horoscope"})})]})]})})})})})})]})})]})},vn=function(){return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{"_ngcontent-serverapp-c87":"",class:"faq_about_aries_horoscope",children:(0,Je.jsxs)("div",{"_ngcontent-serverapp-c87":"",class:"container",children:[(0,Je.jsx)("h2",{"_ngcontent-serverapp-c87":"",class:"heading_seo_content_headline_chinese_horoscope",style:{texTAlign:"center"},children:"Kundli Matching : Kundli Gun Milan"}),(0,Je.jsxs)("div",{"_ngcontent-serverapp-c87":"",class:"",style:{paddingTop:"10px"},children:[(0,Je.jsx)("p",{children:"Every human being who walks this earth brings with themselves their own set of energies. And each of these energy fields is governed by certain planets and zodiac signs. As a whole different person, the energy field that you entertain ought to be completely different from others. Or to simplify, your energies might not be compatible with others, and this what makes you and any other person you meet, different."}),(0,Je.jsx)("p",{children:"Horoscope matching, also known as Kundli matching in Vedic astrology, considers both; the position of the planets at the time of your birth and their current positions to find how compatible two people are for each other. Kundli matching is necessary to find if the position of the planets is likely or unlikely. For example, if Rahu is poised negatively (Rahu Mahadasha) in one\u2019s Rashi, it is not the best time for them to get married. Similarly, the Kundli matching process can help find if the girl or the boy is Mangalik or not? And in case one of them is, your kundli helps in highlighting how one\u2019s Managalik dosha will affect the other person."}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"Kundli Milan - A Friend Or A Foe?"})}),(0,Je.jsx)("p",{children:"However, the world, in recent times, has grown up to develop a very wrong perception about Kundli matching (match making). Couples, especially the ones who dream of a love marriage, find Kundli matching as a hurdle in their relationship. Many of them are scared of the questions that would arise if their kundlis don't match and thus find ways to skip the gun milan ritual. However, this perception of the couples about kundli matching is nothing but merely wrong facts aka half baked knowledge that have been forced into their minds."}),(0,Je.jsx)("p",{children:"However, the world, in recent times, has grown up to develop a very wrong perception about Kundli matching (match making). Couples, especially the ones who dream of a love marriage, find Kundli matching as a hurdle in their relationship. Many of them are scared of the questions that would arise if their kundlis don't match and thus find ways to skip the gun milan ritual. However, this perception of the couples about kundli matching is nothing but merely wrong facts aka half baked knowledge that have been forced into their minds."}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"What happens during Kundli milan?"})}),(0,Je.jsx)("p",{children:"The eight parameters or categories among which the points have been divided are:-"}),(0,Je.jsxs)("ul",{children:[(0,Je.jsx)("li",{children:(0,Je.jsxs)("p",{children:[(0,Je.jsx)("strong",{children:"Varna"})," - it is the classification of people in four categories namely Brahmin, Kshatriya, Vaishya and Shudra."]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("p",{children:[(0,Je.jsx)("strong",{children:"Vashya"})," - the Vashya denotes the power or dominance in Vedic astrology. Vahsya classifies a person into five types \u2013 Human, Wild Animals, Small animals, Waterborne animals and Insect."]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("p",{children:[(0,Je.jsx)("strong",{children:"Tara"})," - it is used to denote the birth star compatibility of the person."]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("p",{children:[(0,Je.jsx)("strong",{children:"Yoni"})," - is the sexual compatibility the two people would share with each other."]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("p",{children:[(0,Je.jsx)("strong",{children:"Rasyadhipati"})," - This defines who is the Lord of the zodiac."]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("p",{children:[(0,Je.jsx)("strong",{children:"Gana"})," - The three Ganas in Astrology are; Dev, Manav and Rakshasa."]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("p",{children:[(0,Je.jsx)("strong",{children:"Rashi"})," - This category denotes love that the two people would share. The category takes into account the exact position of the Moon in the bride\u2019s and groom\u2019s horoscope."]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("p",{children:[(0,Je.jsx)("strong",{children:"Nandi"})," - Nadi Koot is related to the health of the bride and the groom. The three Nadis in astrology are Vata (air), Pitta (bile) and Kappa (phlegm)."]})})]}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"How to avail kundli matching service online?"})}),(0,Je.jsxs)("p",{children:["To avail kundli matching service online, you can simply log in to the ",(0,Je.jsx)(a.rU,{to:"#",children:"NAKSHATRA TALKS"})," \xa0app and find the horoscope matching online option on the same. Once you click on it, all you need to enter are details about both the girl and the boy, and once you have entered all the details correctly, we would match the kundlis for you. Moreover, you can ",(0,Je.jsx)(a.rU,{to:"/chatastrologer",children:"chat with astrologers online"})," Or ",(0,Je.jsx)(a.rU,{to:"/AstrologersList",children:"talk to astrologers"})," for kundali matching."]})]})]})})})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsxs)("div",{style:{textAlign:"center"},children:[(0,Je.jsx)("h2",{children:"Horoscope Matching - FAQs"}),(0,Je.jsx)("h3",{children:"All you need to know about Guna Milan (Kundli Milan)"})]}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"How many Gunas must at least match for a successful marriage?"})}),(0,Je.jsx)("p",{children:"At least 18 gunas must match for the couple if they wish to witness a long and hurdle-free marriage. However, for couples for whom 18 gunas do not match can too get married, but it is advised that they firstly, must understand that they will have to work very hard in their relationship and secondly, they must talk to astrologer to find how they can make up for the gunas that don\u2019t match."}),(0,Je.jsx)("br",{}),(0,Je.jsx)("strong",{children:"What are the most important parameters in kundli matchmaking?"}),(0,Je.jsx)("p",{children:"As per our astrologers, Mangal dosha matching and Nandi matching are some of the most important parameters when it comes to kundli matching."}),(0,Je.jsx)("br",{}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"Can I marry if kundli does not match?"})}),(0,Je.jsx)("p",{children:"Yes, you can marry if your kundli does not match. However, you must first talk to an astrologer to be well aware of the consequences that come along when you marry despite the horoscope not matching for you. This way, you two will be well aware of things you need to work on to make your relationship work."})]})})}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-4",children:(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-2",children:(0,Je.jsxs)("div",{class:"row g-4 ratio_65",children:[(0,Je.jsx)("div",{class:"col-xxl-4 col-sm-3",children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",children:[(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/horoscope_page",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/km.jpg",class:"bg-img blur-up lazyload",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"/horoscope_page",children:(0,Je.jsx)("h3",{children:"Today's Horoscope"})})}),(0,Je.jsx)(a.rU,{to:"/horoscope_page",children:(0,Je.jsx)("p",{children:" Get free Aries daily horoscope prediction today online from the best astrologer. Read your Aries Zodiac Sign horoscope today! "})})]})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-sm-3",children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",children:[(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/kundali",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/km.jpg",class:"bg-img blur-up lazyload",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"/kundali",children:(0,Je.jsx)("h3",{children:"Free Kundli"})})}),(0,Je.jsx)(a.rU,{to:"/kundali",children:(0,Je.jsx)("p",{children:" Generate your free online kundli report from Astrotalk. Our Kundli software can help you predict the future for yourself by reading the birth chart. "})})]})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-sm-3",children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",children:[(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/kundali_milan",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/km.jpg",class:"bg-img blur-up lazyload",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"/kundali_milan",children:(0,Je.jsx)("h3",{children:"Compatibility"})})}),(0,Je.jsx)(a.rU,{to:"/kundali_milan",children:(0,Je.jsx)("p",{children:" Love could be confusing, but only until you haven\u2019t found how compatible you two are for each other... "})})]})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-sm-3",children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.15s",children:[(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/kundali_milan",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/km.jpg",class:"bg-img blur-up lazyload",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"/kundali_milan",children:(0,Je.jsx)("h3",{children:"Kundli Matching"})})}),(0,Je.jsx)(a.rU,{to:"/kundali_milan",children:(0,Je.jsx)("p",{children:" Check Love Compatibility and Marriage Prediction online at Astrotalk. Get the best Horoscope and kundli matching predictions today! ."})})]})]})})]})})})})})]})};var gn=function(){return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)(pn,{}),(0,Je.jsx)(vn,{}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})]})};var mn=function(){i.s0,Math.random().toString(36).slice(-4);var e=(0,n.useState)(!1),t=(0,o.Z)(e,2),r=t[0],s=t[1],c=(0,n.useState)([]),u=(0,o.Z)(c,2),l=u[0],d=u[1];(0,n.useEffect)((function(){h()}),[0]);var h=function(){var e=lt(ct().mark((function e(){var t,n;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{"content-type":"application/json; charset=utf-8","Access-Control-Allow-Origin":"*"}},n=JSON.stringify({}),e.next=4,Ye.get("http://103.104.74.215:3012/api/user/blog_list",n,t).then((function(e){d(e.data.data)})).catch((function(e){}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Je.jsxs)("div",{children:[!0===r&&(0,Je.jsxs)("div",{class:"fullpage-loader",children:[(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{})]}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{className:"title",children:[(0,Je.jsx)("h2",{children:"LATEST FROM BLOG "}),(0,Je.jsx)("h4",{children:"Top Astrologers. 24 * 7 customer support. Happy to help"})]}),(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-3 arrow-slider",children:(0,Je.jsx)(nt.Z,(0,tt.Z)((0,tt.Z)({},{autoplay:!0,dots:!1,infinite:!0,speed:500,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:992,settings:{slidesToShow:1}},{breakpoint:576,settings:{slidesToShow:1}}]}),{},{children:l.map((function(e){return(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("blogid",e._id)},children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp",children:[(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/BlogDetail",children:(0,Je.jsx)("img",{style:{width:"100%",height:"206px",objectFit:""},src:"http://103.104.74.215:3012/uploads/"+e.image,class:"bg-img blur-up lazyload img-fluid",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain ",children:[(0,Je.jsxs)("div",{class:"blog-label",children:[(0,Je.jsxs)("span",{class:"time",children:[(0,Je.jsx)("i",{"data-feather":"clock"})," ",(0,Je.jsx)("span",{children:"28 Feg, 2023"})]}),(0,Je.jsxs)("span",{class:"super",children:[(0,Je.jsx)("i",{"data-feather":"user"})," ",(0,Je.jsx)("span",{children:"JyotiRaj Singh"})]})]}),(0,Je.jsx)(a.rU,{to:"/BlogDetail",children:(0,Je.jsx)("h3",{children:e.title})}),(0,Je.jsx)(a.rU,{to:"/BlogDetail",children:(0,Je.jsxs)("button",{onClick:function(){s(!0)},class:"blog-button",children:["                         Read More",(0,Je.jsx)("i",{class:"fa-solid fa-right-long"})]})})]})]})})}))}))})})]})}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{})]})};var yn=function(){return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)(mn,{}),(0,Je.jsx)(Ze.default,{})]})},bn=function(){return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsxs)("section",{className:"coming-soon-section pt-0",children:[(0,Je.jsx)("div",{className:"bg-black"}),(0,Je.jsx)("div",{className:"container-fluid-lg w-100",children:(0,Je.jsxs)("div",{className:"row",children:[(0,Je.jsx)("div",{className:"col-lg-5"}),(0,Je.jsx)("div",{className:"col-xxl-5 col-xl-6 col-lg-7",children:(0,Je.jsx)("div",{className:"coming-box",children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("div",{className:"coming-title",children:(0,Je.jsx)("h2",{style:{color:"white"},children:"We are Coming Soon..."})}),(0,Je.jsx)("p",{className:"coming-text",style:{color:"white"},children:"We are currently working on an awesome new site. Stay tuned for more information. Subscribe to our newsletter to stay updated on our progress."}),(0,Je.jsx)("div",{className:"coming-timer",id:"clockdiv-1","data-hours":"1","data-minutes":"2","data-seconds":"3",children:(0,Je.jsxs)("ul",{className:"d-flex justify-content-center",children:[(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{className:"counter",children:[(0,Je.jsx)("div",{className:"days",children:(0,Je.jsx)("h6",{})}),(0,Je.jsx)("p",{children:"Day"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{className:"counter",children:[(0,Je.jsx)("div",{className:"hours",children:(0,Je.jsx)("h6",{})}),(0,Je.jsx)("p",{children:"Hour"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{className:"counter",children:[(0,Je.jsx)("div",{className:"minutes",children:(0,Je.jsx)("h6",{})}),(0,Je.jsx)("p",{children:"Min"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{className:"counter",children:[(0,Je.jsx)("div",{className:"seconds",children:(0,Je.jsx)("h6",{})}),(0,Je.jsx)("p",{children:"Sec"})]})})]})}),(0,Je.jsx)("div",{className:"coming-contain",children:(0,Je.jsxs)("div",{className:"coming-form input-group",children:[(0,Je.jsx)("input",{type:"email",className:"form-control",id:"exampleFormControlInput1",placeholder:"Enter Your Email Address"}),(0,Je.jsx)(a.rU,{to:"#"}),(0,Je.jsx)("button",{className:"coming-button",children:"Sign Up"})]})})]})})})]})})]})})},_n=function(){var e=(0,n.useState)(""),t=(0,o.Z)(e,2),r=t[0],i=t[1];return console.log("state sadasd",r),(0,n.useEffect)((function(){var e="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("tarot_predictions"),{love:13,career:2,finance:54},{headers:{authorization:e,"Content-Type":"application/json"}}).then((function(e){i(e.data),console.log("Api responseasdresponseeessad",e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),[]),(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)("section",{class:"home-section pt-2",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-4",children:(0,Je.jsx)("div",{class:"col-xl-12 ratio_30",children:(0,Je.jsxs)("div",{class:"home-contain h-100",children:[(0,Je.jsx)("div",{class:"h-100",children:(0,Je.jsx)("img",{style:{width:"100%",height:"40vh"},src:"../assets/images/vegetable/banner/1.jpg",class:"bg-img blur-up lazyload",alt:""})}),(0,Je.jsx)("div",{class:"home-detail p-center-left w-60",style:{marginLeft:"27%"},children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h3",{class:"lh-base fw-bold text-white ",children:(0,Je.jsx)("span",{children:"Problems in life ?"})}),(0,Je.jsx)("h3",{class:"lh-base fw-bold text-white ",children:"Best Astrologer Available for you"}),(0,Je.jsx)("br",{}),(0,Je.jsx)("h3",{class:"lh-base fw-bold text-white",children:(0,Je.jsxs)("span",{class:"daily",children:[(0,Je.jsx)("button",{onclick:"location.href = 'shop-top-filter1.html';",class:"btn text-white btn-md mt-xxl-4 mt-2 home-button mend-auto theme-bg-color",style:{marginLeft:"15px"},children:"Consult Tarot Card Reader"})," "]})})]})})]})})})})}),(0,Je.jsx)("section",{class:"blog-section",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{class:"title",children:[(0,Je.jsx)("h2",{children:"TAROT"}),(0,Je.jsxs)("p",{children:["Tarot reading is a powerful form of divination that use an ancient deck of cards to help you find answers to your questions about your love, relationships, career, wellness and more."," "]})]}),(0,Je.jsxs)("div",{class:"slider-3 arrow-slider row",style:{display:"",flexDirection:"row"},children:[(0,Je.jsx)("div",{class:"col-xl-6 col-sm-6",style:{width:""},children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",style:{margin:"5px"},children:[(0,Je.jsx)("div",{class:"blog-box-image text-center",children:(0,Je.jsx)(a.rU,{to:"/Onecard",children:(0,Je.jsx)("img",{style:{width:"100%",height:"360px"},src:"../assets/images/inner-page/tarot6.jpeg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"/Onecard",children:(0,Je.jsx)("h3",{children:"One Card Tarot Reading"})})}),(0,Je.jsx)(a.rU,{to:"/Onecard",children:(0,Je.jsx)("p",{children:"Need answers or solutions to your problems in life as soon as possible?...."})}),(0,Je.jsxs)("button",{class:"blog-button",children:[" ",(0,Je.jsx)(a.rU,{to:"/Onecard",children:"Read More"}),(0,Je.jsx)("i",{class:"fa-solid fa-right-long"})]})]})]})}),(0,Je.jsx)("div",{class:"col-xl-6 col-sm-6",style:{width:""},children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",style:{margin:"5px"},children:[(0,Je.jsx)("div",{class:"blog-box-image text-center",children:(0,Je.jsx)(a.rU,{to:"/AstrologersList",children:(0,Je.jsx)("img",{style:{width:"100%",height:"360px"},src:"../assets/images/blog/card.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"/AstrologersList",children:(0,Je.jsx)("h3",{children:"Talk To Best Astrologer"})})}),(0,Je.jsx)(a.rU,{to:"/AstrologersList",children:(0,Je.jsx)("p",{children:"Need answers or solutions to your problems in life as soon as possible?...."})}),(0,Je.jsxs)("button",{class:"blog-button",children:[(0,Je.jsx)(a.rU,{to:"/AstrologersList",children:"Read More"}),(0,Je.jsx)("i",{class:"fa-solid fa-right-long"})]})]})]})}),(0,Je.jsx)("div",{})]})]})}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-4",children:(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-2",children:(0,Je.jsx)("div",{class:"row g-4 ratio_65",children:(0,Je.jsxs)("div",{class:"slider-3 arrow-slider row",children:[(0,Je.jsx)("div",{class:"col-xl-4 col-sm-4",style:{width:""},children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",style:{height:"150px"},children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{width:"100%",src:"../assets/images/inner-page/lovehs.jpg",class:"bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",style:{overflowY:"scroll",position:"relative",height:"350px"},children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h3",{children:"LOVE"})})}),(0,Je.jsx)("div",{style:{position:""},children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("ul",{children:(0,Je.jsx)("table",{class:"home_table",children:(0,Je.jsx)("tbody",{children:(0,Je.jsx)("tr",{children:(0,Je.jsx)("td",{style:{textAlign:"justify"},children:null===r||void 0===r?void 0:r.love})})})})})})})]})]})}),(0,Je.jsx)("div",{class:"col-xl-4 col-sm-4",style:{width:""},children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",style:{height:"150px"},children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{width:"100%",src:"../assets/images/blog/lunar.jpg",class:"bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",style:{overflowY:"scroll",position:"relative",height:"350px"},children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h3",{children:"CAREER"})})}),(0,Je.jsx)("div",{style:{position:""},children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("ul",{children:(0,Je.jsx)("table",{class:"home_table",children:(0,Je.jsx)("tbody",{children:(0,Je.jsx)("tr",{children:(0,Je.jsx)("td",{style:{textAlign:"justify"},children:null===r||void 0===r?void 0:r.career})})})})})})})]})]})}),(0,Je.jsx)("div",{class:"col-xl-4 col-sm-4",style:{width:""},children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",style:{height:"150px"},children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{width:"100%",src:"../assets/images/blog/askay.jpg",class:"bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",style:{overflowY:"scroll",position:"relative",height:"350px"},children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h3",{children:"FINANCE"})})}),(0,Je.jsx)("div",{style:{position:""},children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("ul",{children:(0,Je.jsx)("table",{class:"home_table",children:(0,Je.jsx)("tbody",{children:(0,Je.jsx)("tr",{children:(0,Je.jsx)("td",{style:{textAlign:"justify"},children:null===r||void 0===r?void 0:r.finance})})})})})})})]})]})})]})})})})})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"title",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsxs)("div",{class:"col-lg-8",children:[(0,Je.jsx)("h2",{children:"TAROT CARD READING"}),(0,Je.jsxs)("p",{children:["Tarot Cards is an ancient divinatory system in which tarot cards are used for gaining insights and to find out what the future indicates. All this is based on the interpretation of tarot cards. The meanings of the cards that we know of today are credited to Cartomancer Jean-Baptiste Alliette (also known as Etteilla) and Mlle Marie-Anne Adelaide Lenormand (1776-1843). A traditional tarot deck comprises seventy eight cards. The deck is further divided into Major Arcana and the Minor Arcana. The Major Arcana has 22 cards and each card has an interpretation that only one with an understanding of the cards can help you figure out. Tarot cards can be used to uncover secrets about a future event and can also be used to plan one`s future. Each Major Arcana card represents a scene featuring a person or several people along with various elements."," "]}),(0,Je.jsxs)("p",{children:[" ","56 suit cards comprise the Minor Arcana, also referred to as the lesser arcana. There are four suits with 14 cards in each suit. The suits are Wands, Cups, Swords and Pentacles. These cards too, form an integral part of any tarot reading."," "]})]})})})})})]})};var En,Sn=function(){return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)(_n,{}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})]})},wn=function(){var e=(0,n.useState)(null),t=(0,o.Z)(e,2),r=t[0],i=t[1],s=new Date,c=s.getDate(),u=s.getMonth()+1,l=s.getFullYear();return(0,n.useEffect)((function(){var e=localStorage.getItem("latitude"),t=localStorage.getItem("longitude"),n={day:c,month:u,year:l,hour:7,min:45,lat:e?parseFloat(e):12.12,lon:t?parseFloat(t):72.12,tzone:5.5},r="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("advanced_panchang"),n,{headers:{authorization:r,"Content-Type":"application/json"}}).then((function(e){i(e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),[]),(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)("section",{class:"home-section pt-2",children:(0,Je.jsx)("div",{class:"container-fluid-lg",style:{background:"linear-gradient(to bottom, #00cc00 0%, #ff99cc 100%)"},children:(0,Je.jsx)("img",{align:"right",src:"../assets/images/logo/hs.png",width:"100%"})})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"20px"},children:[(0,Je.jsxs)("h2",{style:{textAlign:"center"},children:["Shubh Muhurat ",l]}),(0,Je.jsx)("p",{children:"It is highly important to perform any auspicious work during Shubh Muhurta. Hindus regard certain dates to be auspicious for starting any worthwhile endeavours. When undertaking an optimistic task during Shubh Muhurta, good outcomes are usually obtained. As a result, the custom of determining the auspicious moment and beginning fresh work has existed for millennia. Shubh Muhurta, according to Vedic astrology, is the exact moment when the solar system's location of the planets and onstellations is favourable for carrying out a certain activity. People, therefore, have the view that keeping this fortunate hour assists to obtain more beneficial and effective achievements without encountering any obstacles or issues."}),(0,Je.jsx)("p",{children:"The importance of Shubh Muhurta (auspicious muhurat) is vast, following Sanatan Dharma. It claims that if labour begins at a fortunate moment, the individual can greatly profit from it. Additionally, completing a task at a fortunate moment enhances our achievement moving forward in life. Hence, the majority of Hindus still wait for an auspicious moment to act, even in today's generation."})]})})}),(0,Je.jsx)("section",{children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsxs)("h2",{children:["Importance Of Shubh Muhurta ",l]}),(0,Je.jsx)("p",{children:'Why is picking an opportune moment to begin any new task seen so important? Everybody wants to succeed in their endeavours, whether it be a profession, starting a business, getting married, or house events like naming ceremonies or annaprashan. As a result, the individual gave the assurance that doing the aforementioned activity at the fortunate moment would bring them success and riches. Therefore, we preferred to complete any tasks during Shubh Muhurta, which was determined based on the positions of the planets and constellations. Consequently, choosing an auspicious period is important. Since the beginning of time, people have observed fortunate periods. It holds that starting a project at a fortunate moment increases the likelihood of success and ensures that it will be completed smoothly and without incident. A "Shubh Muhurat" is a moment when it is considered auspicious to begin any endeavour when all of the planets and nakshatras are in favourable positions.'}),(0,Je.jsxs)("p",{children:["To Chat With Astrologer: ",(0,Je.jsx)(a.rU,{to:"#",target:"",children:"Visit Here"})]})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h2",{children:"Different Muhurat and its Characteristics"}),(0,Je.jsx)("p",{children:"Hinduism has so far evaluated 30 Muhurtas for determining the auspicious hour. The first Muhurta, known as Rudra Muhurta, begins at six in the morning and is classified as an unlucky Muhurta. The second Muhurta then begins 48 minutes after the first Muhurta. Ahi Muhurta is the name of this muhurta, which belongs to the pessimistic muhurta genre. You may learn more about each lucky Muhurta and its features here. Additionally, you should be aware that this Muhurta takes a break for 48\u201348 minutes."}),(0,Je.jsx)("div",{class:"col-12 col-md-6 table-responsive",children:(0,Je.jsxs)("table",{class:"table table-bordered",children:[(0,Je.jsx)("thead",{children:(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("th",{children:"Muhurat"}),(0,Je.jsx)("th",{children:"Auspicious or Inauspicious"})]})}),(0,Je.jsxs)("tbody",{children:[(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Rudra"}),(0,Je.jsx)("td",{children:"Inauspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Asahi"}),(0,Je.jsx)("td",{children:"Inauspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Mitra"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Pitra"}),(0,Je.jsx)("td",{children:"Inauspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Vasu"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Varaaha"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Vishwadeva"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Vidhi"}),(0,Je.jsx)("td",{children:"Auspicious (except on Mondays and Fridays)"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Saptamukhi"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Puruhut"}),(0,Je.jsx)("td",{children:"Inauspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Wahini"}),(0,Je.jsx)("td",{children:"Inauspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Naktankara"}),(0,Je.jsx)("td",{children:"Inauspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Varun"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Ayarma"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Bhag"}),(0,Je.jsx)("td",{children:"Inauspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Girish"}),(0,Je.jsx)("td",{children:"Inauspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Ajpaad"}),(0,Je.jsx)("td",{children:"Inauspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Ahir-Budhiya"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Pushya"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Ashwini"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Yam"}),(0,Je.jsx)("td",{children:"Inauspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Agni"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Vidharth"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Kand"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Aditi"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Jeev/ Amrit"}),(0,Je.jsx)("td",{children:"Pretty auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Vishnu"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Dyutiman"}),(0,Je.jsx)("td",{children:"Auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Brahma"}),(0,Je.jsx)("td",{children:"Pretty auspicious"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:"Samudram"}),(0,Je.jsx)("td",{children:"Auspicious"})]})]})]})}),(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h2",{children:"Panchang Tithi"}),(0,Je.jsxs)("p",{children:[null===r||void 0===r?void 0:r.tithi.details.tithi_name," - ",null===r||void 0===r?void 0:r.tithi.details.special," - ",null===r||void 0===r?void 0:r.tithi.details.summary,"."]})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsxs)("h2",{children:["Shubh Muhurt ",l," must-know factors"]}),(0,Je.jsx)("p",{children:"As we mentioned earlier, some factors should be considered while calculating auspicious times, i.e., Tithi, Vaar, Nakshatra, Yoga, and Karana. Let's understand some crucial aspects related to them."}),(0,Je.jsxs)("p",{children:["To speak to an Astrologer: ",(0,Je.jsx)(a.rU,{to:"#",target:"",children:"Visit here"})]})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h2",{children:"Name of pakshas"}),(0,Je.jsxs)("p",{children:[(0,Je.jsxs)("b",{children:[null===r||void 0===r?void 0:r.paksha," -"]}),null===r||void 0===r?void 0:r.ritu," ."]})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h2",{children:"Day or Var"}),(0,Je.jsx)("p",{children:"There are seven Vars each week according to the Hindu calendar: Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, and Sunday. Every planet in astrology has its features, therefore every day supports a few things. Muslims, for instance, see Friday as one of the most fortunate days. Similar to how some days are regarded as lucky for marriage and others for shaving your head, etc. According to astrology, the best days are Tuesday, Sunday, and Thursday."})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h2",{children:"Nakshatra"}),(0,Je.jsxs)("p",{children:[null===r||void 0===r?void 0:r.nakshatra.details.nak_name," - ",null===r||void 0===r?void 0:r.nakshatra.details.special," - ",null===r||void 0===r?void 0:r.nakshatra.details.summary,"."]})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h2",{children:"27 Nakshatras:"}),(0,Je.jsx)("p",{children:"According to astrology, Ashwani, Bharani, Kritika, Rohini, Mrigashira, Ardra, Punarvasu, Pushya, Ashlesha, Magha, Poorvaphalguni, Uttaraphalguni, Hasta, Chitra, Swati, Visakha, Anuradha, Jyeshtha, Mool, Purvashadha, Uttarashada, Shravan, Dhanishta, Shatabhisha, Uttara Purva Bhadrapada Bhadrapada and Revathi are the constellations."})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h2",{children:"Nakshatra's Ruling Lord"}),(0,Je.jsxs)("ul",{children:[(0,Je.jsxs)("li",{children:[(0,Je.jsx)("b",{children:"Ketu -"})," Ashwani, Magha, And Mool"]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("b",{children:"Venus -"})," Bharani, Poorva Phalguni, and Poorvashadha."]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("b",{children:"Sun -"})," Kritika, Uttaraphalguni, and Uttarashada."]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("b",{children:"Moon -"})," Rohini, Hasta, and Shravan."]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("b",{children:"Mars -"})," Mrigashira, Chitra, and Dhanishta's lord."]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("b",{children:"Rahu -"})," Ardra, Swati, and Satabhisha."]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("b",{children:"Jupiter -"})," Punarvasu, Visakha, and Poorvabhadrapada."]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("b",{children:"Saturn -"}),"  Pushya, Anuradha, and Uttarabhadrapada."]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("b",{children:"Mercury -"})," Ashlesha, Jyestha, and Revati."]})]})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h2",{children:"Yoga"}),(0,Je.jsxs)("p",{children:[null===r||void 0===r?void 0:r.yog.details.special," ",null===r||void 0===r?void 0:r.yog.details.meaning,"."]})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h2",{children:"Yoga's name as per astrology"}),(0,Je.jsxs)("p",{children:[(0,Je.jsx)("b",{children:"Shubh yoga in astrology -"}),null===r||void 0===r?void 0:r.yog.details.yog_name,"."]}),(0,Je.jsxs)("p",{children:[(0,Je.jsx)("b",{children:"Ashubha yoga in astrology -"}),"Vishkumbh, Atigund, Shool, Gand, Vyaghat, Vajra, Vytipat, Parigha, and Vaidhriti"]})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsxs)("h2",{children:["Important things to do at Shubh Muhurat ",l]}),(0,Je.jsxs)("p",{children:["What steps can you take to get good luck in the year ",l,"? Sanatan Dharma has an ancient history and an old tradition of working in auspicious times. It believes that starting a project during Shubh Muhurat ",l," will bring success, complete smoothly, and the person will get favourable results from that project for their whole life."]})]}),(0,Je.jsxs)("div",{class:"col-12",children:[(0,Je.jsxs)("p",{style:{paddingTop:"10px"},children:[" ",(0,Je.jsxs)("b",{children:["we will know in detail about Vivah Muhurat ",l,", Naamkaran Muhurta ",l,", Mundan Muhurat ",l,", Shubh Muhurta to buy a car and bike in ",l,", and an auspicious time to buy gold in ",l," etc."]})]}),(0,Je.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,Je.jsxs)("h4",{children:["Annanprashan Muhurat ",l]}),(0,Je.jsx)("p",{style:{paddingTop:"5px"},children:(0,Je.jsxs)(a.rU,{to:"#",children:["Click here to get details about all Annanprashan Muhurat ",l]})})]}),(0,Je.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,Je.jsxs)("h4",{children:["NaamKaran Muhurat ",l]}),(0,Je.jsx)("p",{style:{paddingTop:"5px"},children:(0,Je.jsxs)(a.rU,{to:"#",children:["Click here to get details about all NaamKaran Muhurat ",l]})})]}),(0,Je.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,Je.jsxs)("h4",{children:["Mudan Muhurat ",l]}),(0,Je.jsx)("p",{style:{paddingTop:"5px"},children:(0,Je.jsxs)(a.rU,{to:"#",children:["Click here to get details about all Mudan Muhurat ",l]})})]}),(0,Je.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,Je.jsxs)("h4",{children:["Car/Bike Muhurat ",l]}),(0,Je.jsx)("p",{style:{paddingTop:"5px"},children:(0,Je.jsxs)(a.rU,{to:"#",children:["Click here to get details about all Car/Bike Muhurat ",l]})})]}),(0,Je.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,Je.jsxs)("h4",{children:["Marriage Muhurat ",l]}),(0,Je.jsx)("p",{style:{paddingTop:"5px"},children:(0,Je.jsxs)(a.rU,{to:"#",children:["Click here to get details about all Marriage Muhurat ",l]})})]}),(0,Je.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,Je.jsxs)("h4",{children:["Gold Buying Muhurat ",l]}),(0,Je.jsx)("p",{style:{paddingTop:"5px"},children:(0,Je.jsxs)(a.rU,{to:"#",children:["Click here to get details about all Gold Buying Muhurat ",l]})})]}),(0,Je.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,Je.jsxs)("h4",{children:["Bhoomi Pujan Muhurat ",l]}),(0,Je.jsx)("p",{style:{paddingTop:"5px"},children:(0,Je.jsxs)(a.rU,{to:"#",children:["Click here to get details about all Bhoomi Pujan Muhurat ",l]})})]}),(0,Je.jsxs)("div",{style:{paddingTop:"10px"},children:[(0,Je.jsxs)("h4",{children:["Griha Pravesh Muhurat ",l]}),(0,Je.jsx)("p",{style:{paddingTop:"5px"},children:(0,Je.jsxs)(a.rU,{to:"#",children:["Click here to get details about all Griha Pravesh Muhurat ",l]})})]})]}),(0,Je.jsx)("div",{"_ngcontent-serverapp-c87":"",class:"faq_about_aries_horoscope",children:(0,Je.jsxs)("div",{"_ngcontent-serverapp-c87":"",class:"container",children:[(0,Je.jsx)("h2",{"_ngcontent-serverapp-c87":"",class:"heading_seo_content_headline_chinese_horoscope",style:{textAlign:"center"},children:"FAQs"}),(0,Je.jsxs)("div",{"_ngcontent-serverapp-c87":"",class:"",style:{paddingTop:"10px"},children:[(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"What is the meaning of Abhijit Muhurat?"})}),(0,Je.jsx)("p",{children:"According to astrology, Abhijit Muhurta is the eighth and the most auspicious time out of all the fifteen Muhurtas from sunrise to sunset. This Muhurta is considered self-made and situated at the root of space."}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"Why is work done according to the auspicious time?"})}),(0,Je.jsx)("p",{children:"Work done at an auspicious time helps to get optimal results and also end several pre existing problems. Additionally, the work done at an auspicious time leads the person towards success."}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"What is the meaning of Brahma Muhurta?"})}),(0,Je.jsx)("p",{children:"Brahma Muhurta is a period that begins 1 hour 36 minutes before sunrise and ends after 48 minutes."})]})]})})]})]})}),(0,Je.jsx)($e,{})]})},xn=function(){return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)(wn,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})]})})},Tn=function(){return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"section-b-space shop-section",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsxs)("div",{class:"col-12",children:[(0,Je.jsx)("div",{class:"show-button",children:(0,Je.jsx)("div",{class:"top-filter-menu-2",children:(0,Je.jsx)("div",{class:"sidebar-filter-menu","data-bs-toggle":"collapse","data-bs-target":"#collapseExample",children:(0,Je.jsxs)("a",{href:"shop-top-filter1.html",children:[(0,Je.jsx)("i",{class:"fa-solid fa-house"})," Chat With Astrologer"]})})})}),(0,Je.jsxs)("div",{class:"row g-sm-4 g-3",children:[(0,Je.jsxs)("div",{class:"col-xxl-3 col-xl-6 col-lg-6",children:[(0,Je.jsx)("div",{class:"title title-flex"}),(0,Je.jsxs)("div",{class:"row g-sm-4 g-3",children:[(0,Je.jsx)("div",{class:"col-xl-6 col-sm-6",children:(0,Je.jsx)("div",{class:"seller-grid-box seller-grid-box-1",children:(0,Je.jsxs)("a",{href:"product-4-image.html",children:[(0,Je.jsxs)("div",{class:"grid-image",children:[(0,Je.jsxs)("div",{class:"image",children:[(0,Je.jsx)("img",{src:"../assets/images/inner-page/user/1.jpg",class:"img-fluid",alt:"",style:{height:"60px",width:"60px",borderRadius:" 100%"}}),(0,Je.jsxs)("button",{onclick:"location.href = 'shop-left-sidebar.html';",class:"nav-item",style:{borderRadius:"15px",width:"60px",height:"30px",borderColor:"#f5b60a",boxShadow:"5px"},children:["26",(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill",style:{width:"13px"}})})]})]}),(0,Je.jsx)("div",{class:"contain-name",children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h4",{children:"Nature Food"}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"English, Hindi"})}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"Vedic, Tarot"})})]})})]}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"grid-contain",style:{width:"100%",paddingBottom:"20px"},children:[(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"60%",float:"left"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-map-pin"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:"14 years"})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-phone"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:" \u20b9 39/Min"})})]})]}),(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"40%",float:"right"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/phone.png",class:"img-fluid",alt:"",style:{height:"25px"}})}),(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:"25px",marginLeft:"10px"}})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h6",{children:" Call"})}),(0,Je.jsx)("div",{class:"contact-detail",style:{marginLeft:"10px"},children:(0,Je.jsx)("h6",{children:" Chat"})})]})]})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{})]})})}),(0,Je.jsx)("div",{class:"col-xl-6 col-sm-6",children:(0,Je.jsx)("div",{class:"seller-grid-box seller-grid-box-1",children:(0,Je.jsxs)("a",{href:"product-4-image.html",children:[(0,Je.jsxs)("div",{class:"grid-image",children:[(0,Je.jsxs)("div",{class:"image",children:[(0,Je.jsx)("img",{src:"../assets/images/inner-page/user/1.jpg",class:"img-fluid",alt:"",style:{height:"60px",width:"60px",borderRadius:" 100%"}}),(0,Je.jsxs)("button",{onclick:"location.href = 'shop-left-sidebar.html';",class:"nav-item",style:{borderRadius:"15px",width:"60px",height:"30px",borderColor:"#f5b60a",boxShadow:"5px"},children:["26",(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill",style:{width:"13px"}})})]})]}),(0,Je.jsx)("div",{class:"contain-name",children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h4",{children:"Nature Food"}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"English, Hindi"})}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"Vedic, Tarot"})})]})})]}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"grid-contain",style:{width:"100%",paddingBottom:"20px"},children:[(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"60%",float:"left"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-map-pin"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:"14 years"})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-phone"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:" \u20b9 39/Min"})})]})]}),(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"40%",float:"right"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/phone.png",class:"img-fluid",alt:"",style:{height:"25px"}})}),(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:"25px",marginLeft:"10px"}})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h6",{children:" Call"})}),(0,Je.jsx)("div",{class:"contact-detail",style:{marginLeft:"10px"},children:(0,Je.jsx)("h6",{children:" Chat"})})]})]})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{})]})})}),(0,Je.jsx)("div",{class:"col-xl-6 col-sm-6",children:(0,Je.jsx)("div",{class:"seller-grid-box seller-grid-box-1",children:(0,Je.jsxs)("a",{href:"product-4-image.html",children:[(0,Je.jsxs)("div",{class:"grid-image",children:[(0,Je.jsxs)("div",{class:"image",children:[(0,Je.jsx)("img",{src:"../assets/images/inner-page/user/1.jpg",class:"img-fluid",alt:"",style:{height:"60px",width:"60px",borderRadius:" 100%"}}),(0,Je.jsxs)("button",{onclick:"location.href = 'shop-left-sidebar.html';",class:"nav-item",style:{borderRadius:"15px",width:"60px",height:"30px",borderColor:"#f5b60a",boxShadow:"5px"},children:["26",(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill",style:{width:"13px"}})})]})]}),(0,Je.jsx)("div",{class:"contain-name",children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h4",{children:"Nature Food"}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"English, Hindi"})}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"Vedic, Tarot"})})]})})]}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"grid-contain",style:{width:"100%",paddingBottom:"20px"},children:[(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"60%",float:"left"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-map-pin"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:"14 years"})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-phone"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:" \u20b9 39/Min"})})]})]}),(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"40%",float:"right"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/phone.png",class:"img-fluid",alt:"",style:{height:"25px"}})}),(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:"25px",marginLeft:"10px"}})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h6",{children:" Call"})}),(0,Je.jsx)("div",{class:"contact-detail",style:{marginLeft:"10px"},children:(0,Je.jsx)("h6",{children:" Chat"})})]})]})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{})]})})}),(0,Je.jsx)("div",{class:"col-xl-6 col-sm-6",children:(0,Je.jsx)("div",{class:"seller-grid-box seller-grid-box-1",children:(0,Je.jsxs)("a",{href:"product-4-image.html",children:[(0,Je.jsxs)("div",{class:"grid-image",children:[(0,Je.jsxs)("div",{class:"image",children:[(0,Je.jsx)("img",{src:"../assets/images/inner-page/user/1.jpg",class:"img-fluid",alt:"",style:{height:"60px",width:"60px",borderRadius:" 100%"}}),(0,Je.jsxs)("button",{onclick:"location.href = 'shop-left-sidebar.html';",class:"nav-item",style:{borderRadius:"15px",width:"60px",height:"30px",borderColor:"#f5b60a",boxShadow:"5px"},children:["26",(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill",style:{width:"13px"}})})]})]}),(0,Je.jsx)("div",{class:"contain-name",children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h4",{children:"Nature Food"}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"English, Hindi"})}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"Vedic, Tarot"})})]})})]}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"grid-contain",style:{width:"100%",paddingBottom:"20px"},children:[(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"60%",float:"left"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-map-pin"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:"14 years"})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-phone"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:" \u20b9 39/Min"})})]})]}),(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"40%",float:"right"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/phone.png",class:"img-fluid",alt:"",style:{height:"25px"}})}),(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:"25px",marginLeft:"10px"}})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h6",{children:" Call"})}),(0,Je.jsx)("div",{class:"contact-detail",style:{marginLeft:"10px"},children:(0,Je.jsx)("h6",{children:" Chat"})})]})]})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{})]})})})]})]}),(0,Je.jsxs)("div",{class:"col-xxl-3 col-xl-6 col-lg-6",children:[(0,Je.jsx)("div",{class:"title title-flex"}),(0,Je.jsxs)("div",{class:"row g-sm-4 g-3",children:[(0,Je.jsx)("div",{class:"col-xl-6 col-sm-6",children:(0,Je.jsx)("div",{class:"seller-grid-box seller-grid-box-1",children:(0,Je.jsxs)("a",{href:"product-4-image.html",children:[(0,Je.jsxs)("div",{class:"grid-image",children:[(0,Je.jsxs)("div",{class:"image",children:[(0,Je.jsx)("img",{src:"../assets/images/inner-page/user/1.jpg",class:"img-fluid",alt:"",style:{height:"60px",width:"60px",borderRadius:" 100%"}}),(0,Je.jsxs)("button",{onclick:"location.href = 'shop-left-sidebar.html';",class:"nav-item",style:{borderRadius:"15px",width:"60px",height:"30px",borderColor:"#f5b60a",boxShadow:"5px"},children:["26",(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill",style:{width:"13px"}})})]})]}),(0,Je.jsx)("div",{class:"contain-name",children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h4",{children:"Nature Food"}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"English, Hindi"})}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"Vedic, Tarot"})})]})})]}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"grid-contain",style:{width:"100%",paddingBottom:"20px"},children:[(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"60%",float:"left"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-map-pin"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:"14 years"})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-phone"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:" \u20b9 39/Min"})})]})]}),(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"40%",float:"right"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/phone.png",class:"img-fluid",alt:"",style:{height:"25px"}})}),(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:"25px",marginLeft:"10px"}})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h6",{children:" Call"})}),(0,Je.jsx)("div",{class:"contact-detail",style:{marginLeft:"10px"},children:(0,Je.jsx)("h6",{children:" Chat"})})]})]})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{})]})})}),(0,Je.jsx)("div",{class:"col-xl-6 col-sm-6",children:(0,Je.jsx)("div",{class:"seller-grid-box seller-grid-box-1",children:(0,Je.jsxs)("a",{href:"product-4-image.html",children:[(0,Je.jsxs)("div",{class:"grid-image",children:[(0,Je.jsxs)("div",{class:"image",children:[(0,Je.jsx)("img",{src:"../assets/images/inner-page/user/1.jpg",class:"img-fluid",alt:"",style:{height:"60px",width:"60px",borderRadius:" 100%"}}),(0,Je.jsxs)("button",{onclick:"location.href = 'shop-left-sidebar.html';",class:"nav-item",style:{borderRadius:"15px",width:"60px",height:"30px",borderColor:"#f5b60a",boxShadow:"5px"},children:["26",(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill",style:{width:"13px"}})})]})]}),(0,Je.jsx)("div",{class:"contain-name",children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h4",{children:"Nature Food"}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"English, Hindi"})}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"Vedic, Tarot"})})]})})]}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"grid-contain",style:{width:"100%",paddingBottom:"20px"},children:[(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"60%",float:"left"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-map-pin"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:"14 years"})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-phone"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:" \u20b9 39/Min"})})]})]}),(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"40%",float:"right"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/phone.png",class:"img-fluid",alt:"",style:{height:"25px"}})}),(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:"25px",marginLeft:"10px"}})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h6",{children:" Call"})}),(0,Je.jsx)("div",{class:"contact-detail",style:{marginLeft:"10px"},children:(0,Je.jsx)("h6",{children:" Chat"})})]})]})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{})]})})}),(0,Je.jsx)("div",{class:"col-xl-6 col-sm-6",children:(0,Je.jsx)("div",{class:"seller-grid-box seller-grid-box-1",children:(0,Je.jsxs)("a",{href:"product-4-image.html",children:[(0,Je.jsxs)("div",{class:"grid-image",children:[(0,Je.jsxs)("div",{class:"image",children:[(0,Je.jsx)("img",{src:"../assets/images/inner-page/user/1.jpg",class:"img-fluid",alt:"",style:{height:"60px",width:"60px",borderRadius:" 100%"}}),(0,Je.jsxs)("button",{onclick:"location.href = 'shop-left-sidebar.html';",class:"nav-item",style:{borderRadius:"15px",width:"60px",height:"30px",borderColor:"#f5b60a",boxShadow:"5px"},children:["26",(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill",style:{width:"13px"}})})]})]}),(0,Je.jsx)("div",{class:"contain-name",children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h4",{children:"Nature Food"}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"English, Hindi"})}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"Vedic, Tarot"})})]})})]}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"grid-contain",style:{width:"100%",paddingBottom:"20px"},children:[(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"60%",float:"left"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-map-pin"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:"14 years"})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-phone"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:" \u20b9 39/Min"})})]})]}),(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"40%",float:"right"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/phone.png",class:"img-fluid",alt:"",style:{height:"25px"}})}),(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:"25px",marginLeft:"10px"}})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h6",{children:" Call"})}),(0,Je.jsx)("div",{class:"contact-detail",style:{marginLeft:"10px"},children:(0,Je.jsx)("h6",{children:" Chat"})})]})]})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{})]})})}),(0,Je.jsx)("div",{class:"col-xl-6 col-sm-6",children:(0,Je.jsx)("div",{class:"seller-grid-box seller-grid-box-1",children:(0,Je.jsxs)("a",{href:"product-4-image.html",children:[(0,Je.jsxs)("div",{class:"grid-image",children:[(0,Je.jsxs)("div",{class:"image",children:[(0,Je.jsx)("img",{src:"../assets/images/inner-page/user/1.jpg",class:"img-fluid",alt:"",style:{height:"60px",width:"60px",borderRadius:" 100%"}}),(0,Je.jsxs)("button",{onclick:"location.href = 'shop-left-sidebar.html';",class:"nav-item",style:{borderRadius:"15px",width:"60px",height:"30px",borderColor:"#f5b60a",boxShadow:"5px"},children:["26",(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill",style:{width:"13px"}})})]})]}),(0,Je.jsx)("div",{class:"contain-name",children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h4",{children:"Nature Food"}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"English, Hindi"})}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:"Vedic, Tarot"})})]})})]}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"grid-contain",style:{width:"100%",paddingBottom:"20px"},children:[(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"60%",float:"left"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-map-pin"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:"14 years"})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-phone"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h5",{children:" \u20b9 39/Min"})})]})]}),(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"40%",float:"right"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/phone.png",class:"img-fluid",alt:"",style:{height:"25px"}})}),(0,Je.jsx)("a",{href:"product-4-image.html",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:"25px",marginLeft:"10px"}})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsx)("h6",{children:" Call"})}),(0,Je.jsx)("div",{class:"contact-detail",style:{marginLeft:"10px"},children:(0,Je.jsx)("h6",{children:" Chat"})})]})]})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{})]})})})]})]})]})]})})})}),(0,Je.jsx)(Ze.default,{}),(0,Je.jsx)(ft,{})]})},In=function(){return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"home-section pt-2",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("img",{align:"right",src:"../assets/images/logo/sp.jpg",style:{height:"350px",width:"100%"}})})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"20px"},children:[(0,Je.jsx)("h2",{style:{textAlign:"center"},children:"Spiritual Path Guidance"}),(0,Je.jsxs)("div",{class:"col-lg-12",children:[(0,Je.jsx)("p",{children:"We intend to provide a Unique life transformation services based on Vedic scriptures, Bhagwat Gita and Astrology. Law of Karma is at core of our methodology."}),(0,Je.jsx)("p",{children:"Today world is changing at fast pace leading to uncertainty in every walk of life. At some point of time, we all feel the need for divine intervention to solve all our problems & turn ourselves into Seeker."}),(0,Je.jsx)("p",{children:(0,Je.jsx)("b",{children:"Questions like why am I going through all this pain? Have I done something wrong? Am I destined to do this small job?"})}),(0,Je.jsx)("p",{children:"All the answers to these questions lie within us in our past & present deeds. Law of Karma can answer to all our problems. All you need a good Spiritual Guide /Astrologer who can decipher your charts, help you understand this law of Karma and suggest you best solution for solving problems in your life."}),(0,Je.jsx)("p",{children:"All of us are bound to Law of Karma. This is a famous proverb \u201cAs you sow, so shall you reap\u201d."}),(0,Je.jsx)("p",{children:"Your deeds are carried over from one birth to another birth. Therefore, deeds done in past life will also affect present life in a good or bad way depending upon your deeds/misdeeds."}),(0,Je.jsx)("p",{children:"But there are ways to repent and resurrect our present & future life. We help you find these ways to resurrect and live a life full of happiness, joy & contentment."}),(0,Je.jsx)("p",{children:"We have designed our services to provide you continuous support in your journey for life correction and resurrection with spirituality. Our team will be available to help you with every step in this journey towards understanding the meaning & purpose of your life. It starts with analysing your charts in detail, sharing feedback & suggests spiritual path based on Law of Karma. "}),(0,Je.jsx)("p",{children:"Our panel of team for this service includes an Astrologer, Tarot Card Reader & Palmist. You would be able to freely discuss in person chat/call sessions with our team."}),(0,Je.jsx)("p",{children:"We assure you best of our services. However if you are not happy with our services we assure 100% *refund (No questions asked)."})]})]})})}),(0,Je.jsx)("section",{class:"seller-grid-section",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsx)("div",{class:"row g-4",children:(0,Je.jsx)("div",{class:"col-xxl-4 col-md-6",children:(0,Je.jsx)("div",{class:"seller-grid-box",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h3",{children:"Annual Plan :- Multiple chat/call/video session with Spiritual Guide (Upto 100 Mins)"}),(0,Je.jsxs)("p",{children:["Validity         :- 1 year Price        :- Rs 1,500",(0,Je.jsx)("br",{}),"Buy our Spiritual Guidance plan ",(0,Je.jsx)("button",{type:"button",children:"Buy"})]})]})})})})}),(0,Je.jsx)("nav",{class:"custome-pagination"})]})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"title",style:{padding:"20px"},children:(0,Je.jsxs)("div",{class:"col-lg-12",children:[(0,Je.jsxs)("h5",{children:[" ",(0,Je.jsx)("b",{children:" *Terms & Conditions:-"})]}),(0,Je.jsx)("p",{children:"1.  100% refund only if the written request is made within 2 weeks of subscription."})]})})})}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{}),(0,Je.jsx)(ft,{})]})},Rn=function(){var e=(0,n.useState)(null),t=(0,o.Z)(e,2),r=t[0],i=t[1],s=new Date,c=s.getDate(),u=s.getMonth()+1,l=s.getFullYear();return(0,n.useEffect)((function(){var e=localStorage.getItem("latitude"),t=localStorage.getItem("longitude"),n={day:c,month:u,year:l,hour:10,min:25,lat:e?parseFloat(e):12.12,lon:t?parseFloat(t):72.12,tzone:5.5},r="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("advanced_panchang"),n,{headers:{authorization:r,"Content-Type":"application/json"}}).then((function(e){i(e.data),console.log("asdresponseeessad",e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),[]),(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"blog-section",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{class:"title",children:[(0,Je.jsx)("h2",{children:"Panchang"}),(0,Je.jsxs)("p",{children:["A Panchang (Sanskrit: \u092a\u091e\u094d\u091a\u093e\u0919\u094d\u0917\u092e\u094d) is a Hindu calendar and almanac, which is used in Astrology. It follows traditional units of Hindu timekeeping, and presents important dates and their calculations in a tabulated form."," "]}),(0,Je.jsx)("p",{children:"The study of Panchang involves understanding Rasi phala, the impact of the signs of the zodiac on the individual. Astrologers consult the Panchang to understand present with movement of planets & its effect on individual, set auspicious date for occasions like engagement, weddings and other activities."})]}),(0,Je.jsxs)("div",{class:"slider-3 arrow-slider row",style:{},children:[(0,Je.jsx)("div",{className:"col-sm-12 col-lg-4 col-md-4",children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)(a.rU,{to:"/panchangg",children:(0,Je.jsx)("img",{style:{width:"100%",height:"180px"},src:"../assets/images/blog/todaypan.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",style:{overflowY:"scroll",position:"relative",height:"350px"},children:[(0,Je.jsx)("div",{children:(0,Je.jsxs)(a.rU,{to:"/panchangg",children:[(0,Je.jsx)("h3",{style:{fontSize:"30px"},children:"Panchang"}),(0,Je.jsxs)("h4",{children:[null===r||void 0===r?void 0:r.day,"  ",c,", ",u," , ",l]})]})}),(0,Je.jsxs)("div",{style:{position:"absolute"},children:[(0,Je.jsx)(a.rU,{to:"/panchangg",children:(0,Je.jsx)("ul",{children:(0,Je.jsx)("table",{class:"home_table",children:(0,Je.jsxs)("tbody",{children:[(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Date"}),(0,Je.jsxs)("td",{children:[null===r||void 0===r?void 0:r.day,"  ",c,", ",u," , ",l]}),(0,Je.jsx)("hr",{})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Tithi"}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.tithi.details.tithi_name})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Day"}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.day})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Paksha"}),(0,Je.jsxs)("td",{children:[" ",null===r||void 0===r?void 0:r.paksha]})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Sunrise"}),(0,Je.jsx)("td",{id:"sunRise",children:null===r||void 0===r?void 0:r.sunrise})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Sunset"}),(0,Je.jsx)("td",{id:"sunSet",children:null===r||void 0===r?void 0:r.sunset})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Moonrise"}),(0,Je.jsxs)("td",{id:"moonRise",children:[" ",null===r||void 0===r?void 0:r.moonrise]})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Nakshatra"}),(0,Je.jsxs)("td",{children:[" ",null===r||void 0===r?void 0:r.nakshatra.details.nak_name]})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Nakshtra Till"}),(0,Je.jsxs)("td",{id:"nakshtra",children:[null===r||void 0===r?void 0:r.nakshatra.end_time.hour,":",null===r||void 0===r?void 0:r.nakshatra.end_time.minute,":",null===r||void 0===r?void 0:r.nakshatra.end_time.second]})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Yog"}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.yog.details.yog_name})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Yog Till"}),(0,Je.jsxs)("td",{id:"yog",children:[null===r||void 0===r?void 0:r.yog.end_time.hour," : ",null===r||void 0===r?void 0:r.yog.end_time.minute," : ",null===r||void 0===r?void 0:r.yog.end_time.second]})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Karan I"}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.karan.details.karan_name})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Surya Rashi"}),(0,Je.jsx)("td",{children:"Pisces"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Chandra Rashi"}),(0,Je.jsx)("td",{children:"Virgo"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{scope:"row",children:"Rahu Kal"}),(0,Je.jsxs)("td",{id:"rahuKal",children:[null===r||void 0===r?void 0:r.rahukaal.start," to ",null===r||void 0===r?void 0:r.rahukaal.end]})]})]})})})}),(0,Je.jsxs)(a.rU,{to:"/Panchangg",children:[(0,Je.jsxs)("button",{class:"blog-button",children:["Read More",(0,Je.jsx)("i",{class:"fa-solid fa-right-long"})]})," "]})]})]})]})}),(0,Je.jsx)("div",{className:"col-sm-12 col-lg-4 col-md-4",children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{style:{width:"100%",height:"180px"},src:"../assets/images/blog/panchang.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",style:{overflowY:"scroll",position:"relative",height:"350px"},children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h3",{children:"Explore More"})})}),(0,Je.jsx)("div",{style:{position:"absolute"},children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsxs)("ul",{children:[(0,Je.jsxs)("li",{children:[(0,Je.jsx)("a",{href:"#",children:"Today's Tithi"})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("a",{href:"#",children:"Today's vaar"})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("a",{href:"#",children:"Today's Shubh Muhurat"})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("a",{href:"#",children:"Today's Nakshatra"})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("a",{href:"#",children:"Today's Choghdiya"})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("a",{href:"#",children:"Today's Rahu Kaal"})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("a",{href:"#",children:"Today's Shubh Hora"})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("a",{href:"#",children:"Today's Yoga"})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("a",{href:"#",children:"Today's Karana"})," "]}),(0,Je.jsx)("hr",{})]})})})]})]})}),(0,Je.jsx)("div",{className:"col-sm-12 col-lg-4 col-md-4",children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{style:{width:"100%",height:"180px"},src:"../assets/images/blog/festival.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",style:{overflowY:"scroll",position:"relative",height:"350px"},children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsxs)("h3",{children:["Feast and Festival ",l]})})}),(0,Je.jsx)("div",{style:{position:"absolute"},children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsxs)("ul",{children:[(0,Je.jsxs)("li",{children:[(0,Je.jsxs)("a",{href:"#",children:["Holi ",l]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)("a",{href:"#",children:["Bhai Dooj ",l]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)("a",{href:"#",children:["Chaitra Navratri ",l]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)("a",{href:"#",children:["Gudi Padwa ",l]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)("a",{href:"#",children:["Ugadi ",l]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)("a",{href:"#",children:["Rama Navami ",l]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)("a",{href:"#",children:["Hanuman Jyanti ",l]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)("a",{href:"#",children:["Baisakhi ",l]})," "]}),(0,Je.jsx)("hr",{}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)("a",{href:"#",children:["Diwali ",l]})," "]}),(0,Je.jsx)("hr",{})]})})})]})]})})]})]})}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsxs)("div",{class:"row g-4",children:[(0,Je.jsx)("h2",{children:"Panchang"}),(0,Je.jsxs)("p",{children:["Accuracy of attributes depending upon the Moon's motions were considered most crucial for the reliability of a Panchang, because the Moon is the fastest among all heavenly entities shown in traditional Panchang."," "]}),(0,Je.jsx)("p",{children:'Tithi, Nakshatra, Rasi, Yoga, and Karana depend upon Moon\'s motions, which are five in number. Panchang is a Sanskrit word it means " five limbs". If these five limbs which represents five attributes depending upon Moon, are accurate, an almanac is considered accurate, because it\u2019s easy to calculate other elements due to their slow rates of change.'}),(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-2",children:(0,Je.jsxs)("div",{class:"row g-4 ratio_65",children:[(0,Je.jsx)("div",{class:"col-xxl-4 col-sm-3",children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",children:[(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/AstrologersList",children:(0,Je.jsx)("img",{style:{width:"100%"},src:"../assets/images/blog/festival.jpg",class:"bg-img img-fluid",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"/AstrologersList",children:(0,Je.jsx)("h3",{children:"Talk's Best Astrologer"})})}),(0,Je.jsx)(a.rU,{to:"/AstrologersList",children:(0,Je.jsx)("p",{children:"A horoscope is an astrology chart that is well prepared in order to examine the future...."})}),(0,Je.jsx)(a.rU,{to:"/AstrologersList",children:(0,Je.jsxs)("button",{onclick:"location.href = 'todays-horoscope.html';",class:"blog-button",children:["Read More",(0,Je.jsx)("i",{class:"fa-solid fa-right-long"})]})})]})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-sm-3",children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",children:[(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_page",children:(0,Je.jsx)("img",{style:{width:"100%"},src:"../assets/images/blog/festival.jpg",class:"bg-img img-fluid",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"/Horoscope_page",children:(0,Je.jsx)("h3",{children:"Today's Horoscope"})})}),(0,Je.jsx)(a.rU,{to:"/Horoscope_page",children:(0,Je.jsx)("p",{children:"A horoscope is an astrology chart that is well prepared in order to examine the future...."})}),(0,Je.jsx)(a.rU,{to:"/Horoscope_page",children:(0,Je.jsxs)("button",{onclick:"location.href = 'todays-horoscope.html';",class:"blog-button",children:["Read More",(0,Je.jsx)("i",{class:"fa-solid fa-right-long"})]})})]})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-sm-3",children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",children:[(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/blog",children:(0,Je.jsx)("img",{style:{width:"100%"},src:"../assets/images/blog/festival.jpg",class:"bg-img img-fluid",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"/blog",children:(0,Je.jsx)("h3",{children:"Festival"})})}),(0,Je.jsx)(a.rU,{to:"/blog",children:(0,Je.jsx)("p",{children:"Festivals are an important part of our lives; they represent the beauty of our culture....."})}),(0,Je.jsx)(a.rU,{to:"/blog",children:(0,Je.jsxs)("button",{onclick:"location.href = 'blog-detail.html';",class:"blog-button",children:["Read More",(0,Je.jsx)("i",{class:"fa-solid fa-right-long"})]})})]})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-sm-3",children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.15s",children:[(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/zodiac",children:(0,Je.jsx)("img",{style:{width:"100%"},src:"../assets/images/blog/festival.jpg",class:"bg-img img-fluid",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",children:[(0,Je.jsx)("div",{children:(0,Je.jsx)(a.rU,{to:"/zodiac",children:(0,Je.jsx)("h3",{children:"Zodiac Signs"})})}),(0,Je.jsx)(a.rU,{to:"/zodiac",children:(0,Je.jsx)("p",{children:"Astrology, focuses on a person\u2019s astrological or zodiac sign, to a large extent. There are 12 Zodiac...."})}),(0,Je.jsx)(a.rU,{to:"/zodiac",children:(0,Je.jsxs)("button",{onclick:"location.href = 'zodiac_signs.html';",class:"blog-button",children:["Read More",(0,Je.jsx)("i",{class:"fa-solid fa-right-long"})]})})]})]})})]})})]})})}),(0,Je.jsx)("section",{class:"category-section-3",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{class:"title",children:[(0,Je.jsx)("h2",{children:"Sombreness of Panchang"}),(0,Je.jsx)("p",{children:"Panchang consists of two words namely, 'Panch' and 'Ang', Panch means 'Five' and Ang means 'Limbs'. Panchang is created by taking into account five aspects of the tradition Hindu timekeeping limbs or \u2018ang\u2019: day of the week (vaar); tithi or lunar day; constellation or nakshatra; yoga; and karan. The study of Panchang is the fundamental understanding of Rashi Phala, the impact of each of the 12 zodiac signs on an individual and how their day to day lives change based on several movements of the planets. The casting of a Panchang requires elaborate mathematical work involving high level of spherical geometry and in depth understanding of astronomical phenomena. However, in practice the tabulation is done on the basis of short-cut formulations as propounded by ancient Vedic sages and scholars."}),(0,Je.jsx)("p",{children:"Panchang is created for the fundamental use of providing information on how a day might look like, how people should optimize the \u2018subh\u2019 or positive span of time in order to lead a happy and prosperous life and what should they refrain from doing at negative hours of the day to avoid problems. Panchangs are optimally utilizing in the Hindu culture for planning important events and functions in a person\u2019s life. Panchang matches the current planetary configurations with the position of the heavenly bodies in a person\u2019s astrological chart, so that the auspicious days can be pin-pointed in their best interests."})]}),(0,Je.jsx)("div",{class:"row"})]})}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{}),(0,Je.jsx)(ft,{})]})},kn=function(){var e=(0,i.s0)();(0,n.useEffect)((function(){L()}),[]);var t=(0,n.useState)(""),r=(0,o.Z)(t,2),s=r[0],c=(r[1],(0,n.useState)("")),u=(0,o.Z)(c,2),l=u[0],d=(u[1],(0,n.useState)("")),h=(0,o.Z)(d,2),f=h[0],p=(h[1],(0,n.useState)("")),v=(0,o.Z)(p,2),g=v[0],m=(v[1],(0,n.useState)("")),y=(0,o.Z)(m,2),b=y[0],_=(y[1],(0,n.useState)("")),E=(0,o.Z)(_,2),S=E[0],w=(E[1],(0,n.useState)("")),x=(0,o.Z)(w,2),T=x[0],I=(x[1],(0,n.useState)("")),R=(0,o.Z)(I,2),k=R[0],O=(R[1],(0,n.useState)([])),C=(0,o.Z)(O,2),A=C[0],N=C[1],j=(0,n.useState)((function(){var e=localStorage.getItem("_id");return null!=e?JSON.parse(e):[]})),D=(0,o.Z)(j,2),P=D[0],L=(D[1],function(){var e={_id:localStorage.getItem("iddofuser")};Ye.post("http://103.104.74.215:3012/api/user/get_user_profile/",e).then((function(e){return N(e.data.data)}))}),M=(0,n.useState)({_id:P,user_pic:""}),U=(0,o.Z)(M,2),V=U[0],F=U[1],B=(0,n.useState)({_id:P,cover_pic:""}),G=(0,o.Z)(B,2),q=G[0],W=G[1];(0,n.useEffect)((function(){Z()}),[]);var H=(0,n.useState)([]),z=(0,o.Z)(H,2),K=z[0],Y=z[1],Z=function(){Ye.get("http://103.104.74.215:3012/api/user/recharge_plan_list").then((function(e){return Y(e.data.data)}))},J=(0,n.useState)([]),X=(0,o.Z)(J,2),Q=X[0],$=X[1];(0,n.useEffect)((function(){ee()}),[]);var ee=function(){var e={user_id:localStorage.getItem("iddofuser")};Ye.post("http://103.104.74.215:3012/api/user/get_wallet_user",e).then((function(e){$(e.data.data)}))};return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsx)("div",{class:"breadscrumb-contain",children:(0,Je.jsx)("h2",{children:"PROFILE"})})})})})}),(0,Je.jsx)("section",{class:"user-dashboard-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsxs)("div",{class:"row",children:[(0,Je.jsx)("div",{class:"col-xxl-3 col-lg-4",children:(0,Je.jsxs)("div",{class:"dashboard-left-sidebar",children:[(0,Je.jsx)("div",{class:"close-button d-flex d-lg-none",children:(0,Je.jsx)("button",{class:"close-sidebar",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})}),(0,Je.jsxs)("div",{class:"profile-box",children:[(0,Je.jsx)("div",{class:"cover-image",children:(0,Je.jsx)("img",{src:"http://103.104.74.215:3012/uploads/"+(null===A||void 0===A?void 0:A.cover_pic),class:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{class:"profile-contain",children:[(0,Je.jsx)("div",{class:"profile-image",children:(0,Je.jsx)("div",{class:"position-relative",children:(0,Je.jsx)("img",{src:"http://103.104.74.215:3012/uploads/"+(null===A||void 0===A?void 0:A.user_pic),class:"blur-up lazyload update_img",alt:""})})}),(0,Je.jsxs)("div",{class:"profile-name",children:[(0,Je.jsx)("h3",{children:null===A||void 0===A?void 0:A.name}),(0,Je.jsx)("h6",{class:"text-content",children:null===A||void 0===A?void 0:A.email})]})]})]}),(0,Je.jsxs)("ul",{class:"nav nav-pills user-nav-pills",id:"pills-tab",role:"tablist",children:[(0,Je.jsx)("li",{class:"nav-item",role:"presentation",children:(0,Je.jsxs)("a",{href:"#pills-tabContent",class:"nav-link active",id:"pills-dashboard-tab","data-bs-toggle":"pill","data-bs-target":"#pills-dashboard",role:"tab","aria-controls":"pills-dashboard","aria-selected":"true",children:[(0,Je.jsx)("i",{"data-feather":"home"})," DashBoard"]})}),(0,Je.jsx)("li",{class:"nav-item",role:"presentation",children:(0,Je.jsxs)("button",{class:"nav-link",id:"pills-product-tab","data-bs-toggle":"pill","data-bs-target":"#pills-product",type:"button",role:"tab","aria-controls":"pills-product","aria-selected":"false",children:[(0,Je.jsx)("i",{"data-feather":"shopping-bag"}),"Buy MemberShip"]})}),(0,Je.jsx)("li",{class:"nav-item",role:"presentation",children:(0,Je.jsxs)("button",{class:"nav-link",id:"pills-order-tab","data-bs-toggle":"pill","data-bs-target":"#pills-order",type:"button",role:"tab","aria-controls":"pills-order","aria-selected":"false",children:[(0,Je.jsx)("i",{"data-feather":"shopping-bag"}),"Wallet"]})}),(0,Je.jsx)("li",{class:"nav-item",role:"presentation",children:(0,Je.jsxs)("button",{class:"nav-link",id:"pills-profile-tab","data-bs-toggle":"pill","data-bs-target":"#pills-profile",type:"button",role:"tab","aria-controls":"pills-profile","aria-selected":"false",children:[(0,Je.jsx)("i",{"data-feather":"user"})," Profile"]})}),(0,Je.jsx)("li",{class:"nav-item",role:"presentation",children:(0,Je.jsxs)("button",{class:"nav-link",id:"pills-security-tab","data-bs-toggle":"pill","data-bs-target":"#pills-security",type:"button",role:"tab","aria-controls":"pills-security","aria-selected":"false",children:[(0,Je.jsx)("i",{"data-feather":"settings"})," Setting"]})})]})]})}),(0,Je.jsx)("div",{class:"col-xxl-9 col-lg-8",children:(0,Je.jsx)("div",{class:"dashboard-right-sidebar",children:(0,Je.jsxs)("div",{class:"tab-content",id:"pills-tabContent",children:[(0,Je.jsx)("div",{class:"tab-pane fade show active",id:"pills-dashboard",role:"tabpanel","aria-labelledby":"pills-dashboard-tab",children:(0,Je.jsxs)("div",{class:"dashboard-home",children:[(0,Je.jsxs)("div",{class:"title",children:[(0,Je.jsx)("h2",{children:"My Profile"}),(0,Je.jsx)("span",{class:"title-leaf"})]}),(0,Je.jsxs)("div",{class:"dashboard-user-name",children:[(0,Je.jsxs)("h6",{class:"text-content",children:["Hello, ",(0,Je.jsx)("b",{class:"text-title",children:null===A||void 0===A?void 0:A.name})]}),(0,Je.jsx)("p",{class:"text-content",children:"From your My Account Dashboard you have the ability to view a snapshot of your recent account activity and update your account information. Select a link below to view or edit information."})]}),(0,Je.jsx)("div",{class:"total-box",children:(0,Je.jsxs)("div",{class:"row g-sm-4 g-3",children:[(0,Je.jsx)("div",{class:"col-xxl-4 col-lg-6 col-md-4 col-sm-6",children:(0,Je.jsxs)("div",{style:{background:"transparent"},class:"totle-contain",children:[(0,Je.jsx)("img",{src:"https://themes.pixelstrap.com/fastkart/assets/images/svg/order.svg",class:"img-1 blur-up lazyload",alt:""}),(0,Je.jsx)("img",{src:"https://themes.pixelstrap.com/fastkart/assets/images/svg/order.svg",class:"blur-up lazyload",alt:""}),(0,Je.jsxs)("div",{class:"totle-detail",children:[(0,Je.jsx)("h5",{children:"Wallet"}),(0,Je.jsx)("h3",{children:null===Q||void 0===Q?void 0:Q.ammount})]})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-lg-6 col-md-4 col-sm-6",children:(0,Je.jsxs)("div",{class:"totle-contain",children:[(0,Je.jsx)("img",{src:"https://themes.pixelstrap.com/fastkart/assets/images/svg/pending.svg",class:"img-1 blur-up lazyload",alt:""}),(0,Je.jsx)("img",{src:"https://themes.pixelstrap.com/fastkart/assets/images/svg/pending.svg",class:"blur-up lazyload",alt:""}),(0,Je.jsxs)("div",{class:"totle-detail",children:[(0,Je.jsx)("h5",{children:"Chat"}),(0,Je.jsx)("h3",{children:"5"})]})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-lg-6 col-md-4 col-sm-6",children:(0,Je.jsxs)("div",{class:"totle-contain",children:[(0,Je.jsx)("img",{src:"https://themes.pixelstrap.com/fastkart/assets/images/svg/wishlist.svg",class:"img-1 blur-up lazyload",alt:""}),(0,Je.jsx)("img",{src:"https://themes.pixelstrap.com/fastkart/assets/images/svg/wishlist.svg",class:"blur-up lazyload",alt:""}),(0,Je.jsxs)("div",{class:"totle-detail",children:[(0,Je.jsx)("h5",{children:"Call"}),(0,Je.jsx)("h3",{children:"3"})]})]})})]})})]})}),(0,Je.jsx)("div",{class:"tab-pane fade",id:"pills-product",role:"tabpanel","aria-labelledby":"pills-product-tab",children:(0,Je.jsxs)("div",{class:"product-tab",children:[(0,Je.jsx)("div",{class:"title",children:(0,Je.jsx)("h2",{children:"MemberShip Plan"})}),(0,Je.jsx)("div",{class:"table-responsive dashboard-bg-box",children:(0,Je.jsxs)("table",{class:"table product-table",children:[(0,Je.jsx)("thead",{children:(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("th",{scope:"col",children:"S.No."}),(0,Je.jsx)("th",{scope:"col",children:"Price"}),(0,Je.jsx)("th",{scope:"col",children:"Buy Now"})]})}),(0,Je.jsx)("tbody",{children:K.map((function(e,t){return(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:t+1}),(0,Je.jsx)("td",{children:(0,Je.jsx)("h6",{class:"theme-color fw-bold",children:e.ammount})}),(0,Je.jsx)("td",{class:"efit-delete",children:(0,Je.jsxs)(a.rU,{to:"/payment",children:[" ",(0,Je.jsx)("button",{onClick:function(){localStorage.setItem("packdetails",e.ammount),localStorage.setItem("idd",e._id)},style:{borderRadius:5,border:"none"},class:" theme-bg-color text-white",children:"Buy"})]})})]})}))})]})})]})}),(0,Je.jsx)("div",{class:"tab-pane fade",id:"pills-order",role:"tabpanel","aria-labelledby":"pills-order-tab",children:(0,Je.jsxs)("div",{class:"dashboard-order",children:[(0,Je.jsxs)("div",{class:"title",children:[(0,Je.jsx)("h2",{children:"Transactions"}),(0,Je.jsxs)("h3",{children:["Available balance : \u20b9 ",null===Q||void 0===Q?void 0:Q.ammount," ",(0,Je.jsx)("button",{children:"Recharge"})]})]}),(0,Je.jsx)("div",{class:"order-tab dashboard-bg-box",children:(0,Je.jsx)("div",{class:"table-responsive",children:(0,Je.jsxs)("table",{class:"table order-table",children:[(0,Je.jsx)("thead",{children:(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("th",{scope:"col",children:"Description"}),(0,Je.jsx)("th",{scope:"col",children:"Invoice"}),(0,Je.jsx)("th",{scope:"col",children:"Transaction Amount"}),(0,Je.jsx)("th",{scope:"col",children:"Date Time"}),(0,Je.jsx)("th",{scope:"col",children:"Action"})]})}),(0,Je.jsx)("tbody",{children:(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{class:"product-image",children:"chat with astrologer"}),(0,Je.jsx)("td",{}),(0,Je.jsx)("td",{children:(0,Je.jsx)("label",{class:"success",children:"0"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("h6",{children:"Apr 05,2023,10:30 AM"})}),(0,Je.jsx)("td",{class:"efit-delete",children:(0,Je.jsx)("i",{"data-feather":"trash-2",class:"delete"})})]})})]})})})]})}),(0,Je.jsx)("div",{class:"tab-pane fade",id:"pills-profile",role:"tabpanel","aria-labelledby":"pills-profile-tab",children:(0,Je.jsxs)("div",{class:"dashboard-profile",children:[(0,Je.jsx)("div",{class:"title",children:(0,Je.jsx)("h2",{children:"My Profile"})}),(0,Je.jsxs)("div",{class:"profile-tab dashboard-bg-box",children:[(0,Je.jsxs)("div",{class:"dashboard-title dashboard-flex",children:[(0,Je.jsx)("h3",{children:"Profile"}),(0,Je.jsx)("button",{class:"btn btn-sm theme-bg-color text-white","data-bs-toggle":"modal","data-bs-target":"#edit-profile",children:"Edit Profile"})]}),(0,Je.jsxs)("ul",{children:[(0,Je.jsxs)("li",{children:[(0,Je.jsx)("h5",{children:"Name :"}),(0,Je.jsx)("h5",{children:null===A||void 0===A?void 0:A.name})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("h5",{children:"Email Address :"}),(0,Je.jsx)("h5",{children:null===A||void 0===A?void 0:A.email})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("h5",{children:"Mobile Number :"}),(0,Je.jsx)("h5",{children:null===A||void 0===A?void 0:A.mobile_no})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("h5",{children:"Current Address :"}),(0,Je.jsx)("h5",{children:null===A||void 0===A?void 0:A.current_address})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("h5",{children:"Gender :"}),(0,Je.jsx)("h5",{children:null===A||void 0===A?void 0:A.gender})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("h5",{children:"Date of birth :"}),(0,Je.jsx)("h5",{children:null===A||void 0===A?void 0:A.dob})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("h5",{children:"Time of birth :"}),(0,Je.jsx)("h5",{children:null===A||void 0===A?void 0:A.tob})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("h5",{children:"Place of birth :"}),(0,Je.jsx)("h5",{children:null===A||void 0===A?void 0:A.pob})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("h5",{children:"Zip :"}),(0,Je.jsx)("h5",{children:null===A||void 0===A?void 0:A.pin_code})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)("form",{method:"get",children:[(0,Je.jsx)("label",{style:{cursor:"pointer",backgroundColor:"#d99f46",color:"#ffffff",padding:10},for:"upload",children:"Select Profile Picture"}),(0,Je.jsx)("input",{onChange:function(e){F((0,tt.Z)((0,tt.Z)({},V),{},(0,mt.Z)({},e.target.name,e.target.files[0])))},style:{display:"none"},type:"file",name:"user_pic",id:"upload"})]}),(0,Je.jsx)("i",{className:"asd",onClick:function(){var e=new FormData;e.append("user_pic",V.user_pic,V.user_pic.name),e.append("_id",V._id),Ye.patch("http://103.104.74.215:3012/api/user/upload_image",e).then((function(){return L()}))},class:"fa fa-cloud-upload fa-2x","aria-hidden":"true"})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsxs)("form",{method:"get",children:[(0,Je.jsx)("label",{style:{cursor:"pointer",backgroundColor:"#d99f46",color:"#ffffff",padding:10},for:"uploadd",children:"Select Cover Picture"}),(0,Je.jsx)("input",{style:{display:"none"},onChange:function(e){W((0,tt.Z)((0,tt.Z)({},q),{},(0,mt.Z)({},e.target.name,e.target.files[0])))},type:"file",id:"uploadd",name:"cover_pic",required:!0})]}),(0,Je.jsx)("i",{onClick:function(){var e=new FormData;e.append("cover_pic",q.cover_pic,q.cover_pic.name),e.append("_id",q._id),Ye.patch("http://103.104.74.215:3012/api/user/upload_cover_image",e).then((function(){return L()}))},class:"fa fa-cloud-upload fa-2x","aria-hidden":"true"})]})]})]})]})}),(0,Je.jsx)("div",{class:"tab-pane fade",id:"pills-security",role:"tabpanel","aria-labelledby":"pills-security-tab",children:(0,Je.jsxs)("div",{class:"dashboard-privacy",children:[(0,Je.jsx)("div",{class:"title",children:(0,Je.jsx)("h2",{children:"My Setting"})}),(0,Je.jsxs)("div",{class:"dashboard-bg-box",children:[(0,Je.jsx)("div",{class:"dashboard-title mb-4",children:(0,Je.jsx)(a.rU,{to:"/PrivacyPolicy",children:(0,Je.jsx)("h3",{children:"Term & Condition"})})}),(0,Je.jsx)("div",{class:"dashboard-title mb-4",children:(0,Je.jsxs)(a.rU,{to:"/PrivacyPolicy",children:[" ",(0,Je.jsx)("h3",{children:"Privacy Policy"})]})}),(0,Je.jsx)("div",{class:"dashboard-title mb-4",onClick:function(){localStorage.removeItem("_id"),e("/login")},children:(0,Je.jsxs)(a.rU,{to:"#",children:[" ",(0,Je.jsx)("h3",{children:"Logout"})]})})]})]})})]})})})]})})}),(0,Je.jsx)("div",{class:"modal fade theme-modal deal-modal",id:"deal-box",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h5",{class:"modal-title w-100",id:"deal_today",children:"Deal Today"}),(0,Je.jsx)("p",{class:"mt-1 text-content",children:"Recommended deals for you."})]}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsx)("div",{class:"deal-offer-box",children:(0,Je.jsxs)("ul",{class:"deal-offer-list",children:[(0,Je.jsx)("li",{class:"list-1",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/10.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})}),(0,Je.jsx)("li",{class:"list-2",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/11.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})}),(0,Je.jsx)("li",{class:"list-3",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/12.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})}),(0,Je.jsx)("li",{class:"list-1",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/13.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})})]})})})]})})}),(0,Je.jsxs)("div",{class:"theme-option",children:[(0,Je.jsxs)("div",{class:"setting-box",children:[(0,Je.jsx)("button",{class:"btn setting-button",children:(0,Je.jsx)("i",{class:"fa-solid fa-gear"})}),(0,Je.jsx)("div",{class:"theme-setting-2",children:(0,Je.jsx)("div",{class:"theme-box",children:(0,Je.jsxs)("ul",{children:[(0,Je.jsxs)("li",{children:[(0,Je.jsx)("div",{class:"setting-name",children:(0,Je.jsx)("h4",{children:"Color"})}),(0,Je.jsx)("div",{class:"theme-setting-button color-picker",children:(0,Je.jsxs)("form",{class:"form-control",children:[(0,Je.jsx)("label",{for:"colorPick",class:"form-label mb-0",children:"Theme Color"}),(0,Je.jsx)("input",{type:"color",class:"form-control form-control-color",id:"colorPick",value:"#0da487",title:"Choose your color"})]})})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("div",{class:"setting-name",children:(0,Je.jsx)("h4",{children:"Dark"})}),(0,Je.jsxs)("div",{class:"theme-setting-button",children:[(0,Je.jsx)("button",{class:"btn btn-2 outline",id:"darkButton",children:"Dark"}),(0,Je.jsx)("button",{class:"btn btn-2 unline",id:"lightButton",children:"Light"})]})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("div",{class:"setting-name",children:(0,Je.jsx)("h4",{children:"RTL"})}),(0,Je.jsxs)("div",{class:"theme-setting-button rtl",children:[(0,Je.jsx)("button",{class:"btn btn-2 rtl-unline",children:"LTR"}),(0,Je.jsx)("button",{class:"btn btn-2 rtl-outline",children:"RTL"})]})]})]})})})]}),(0,Je.jsx)("div",{class:"back-to-top",children:(0,Je.jsx)("a",{id:"back-to-top",href:"#",children:(0,Je.jsx)("i",{class:"fas fa-chevron-up"})})})]}),(0,Je.jsx)("div",{class:"modal fade theme-modal",id:"add-address",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:"Add a new address"}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsxs)("div",{class:"modal-body",children:[(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating mb-4 theme-form-floating",children:[(0,Je.jsx)("input",{type:"text",class:"form-control",id:"fname",placeholder:"Enter First Name"}),(0,Je.jsx)("label",{for:"fname",children:"First Name"})]})}),(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating mb-4 theme-form-floating",children:[(0,Je.jsx)("input",{type:"text",class:"form-control",id:"lname",placeholder:"Enter Last Name"}),(0,Je.jsx)("label",{for:"lname",children:"Last Name"})]})}),(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating mb-4 theme-form-floating",children:[(0,Je.jsx)("input",{type:"email",class:"form-control",id:"email",placeholder:"Enter Email Address"}),(0,Je.jsx)("label",{for:"email",children:"Email Address"})]})}),(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating mb-4 theme-form-floating",children:[(0,Je.jsx)("textarea",{class:"form-control",placeholder:"Leave a comment here",id:"address",style:{height:100}}),(0,Je.jsx)("label",{for:"address",children:"Enter Address"})]})}),(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating mb-4 theme-form-floating",children:[(0,Je.jsx)("input",{type:"email",class:"form-control",id:"pin",placeholder:"Enter Pin Code"}),(0,Je.jsx)("label",{for:"pin",children:"Pin Code"})]})})]}),(0,Je.jsxs)("div",{class:"modal-footer",children:[(0,Je.jsx)("button",{type:"button",class:"btn btn-secondary btn-md","data-bs-dismiss":"modal",children:"Close"}),(0,Je.jsx)("button",{type:"button",class:"btn theme-bg-color btn-md text-white","data-bs-dismiss":"modal",children:"Save changes"})]})]})})}),(0,Je.jsx)("div",{class:"modal location-modal fade theme-modal",id:"locationModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsx)("h5",{class:"modal-title",id:"exampleModalLabel1",children:"Choose your Delivery Location"}),(0,Je.jsx)("p",{class:"mt-1 text-content",children:"Enter your address and we will specify the offer for your area."}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsxs)("div",{class:"location-list",children:[(0,Je.jsxs)("div",{class:"search-input",children:[(0,Je.jsx)("input",{type:"search",class:"form-control",placeholder:"Search Your Area"}),(0,Je.jsx)("i",{class:"fa-solid fa-magnifying-glass"})]}),(0,Je.jsx)("div",{class:"disabled-box",children:(0,Je.jsx)("h6",{children:"Select a Location"})}),(0,Je.jsxs)("ul",{class:"location-select custom-height",children:[(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Alabama"}),(0,Je.jsx)("span",{children:"Min: $130"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Arizona"}),(0,Je.jsx)("span",{children:"Min: $150"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"California"}),(0,Je.jsx)("span",{children:"Min: $110"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Colorado"}),(0,Je.jsx)("span",{children:"Min: $140"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Florida"}),(0,Je.jsx)("span",{children:"Min: $160"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Georgia"}),(0,Je.jsx)("span",{children:"Min: $120"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Kansas"}),(0,Je.jsx)("span",{children:"Min: $170"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Minnesota"}),(0,Je.jsx)("span",{children:"Min: $120"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"New York"}),(0,Je.jsx)("span",{children:"Min: $110"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Washington"}),(0,Je.jsx)("span",{children:"Min: $130"})]})})]})]})})]})})}),(0,Je.jsx)("div",{class:"modal fade theme-modal",id:"editProfile",tabindex:"-1","aria-labelledby":"exampleModalLabel2","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-lg modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsx)("h5",{class:"modal-title",id:"exampleModalLabel2",children:"Edit Profile"}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsxs)("div",{class:"row g-4",children:[(0,Je.jsx)("div",{class:"col-xxl-12",children:(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating theme-form-floating",children:[(0,Je.jsx)("input",{type:"text",class:"form-control",id:"pname",value:"Jack Jennas"}),(0,Je.jsx)("label",{for:"pname",children:"Full Name"})]})})}),(0,Je.jsx)("div",{class:"col-xxl-6",children:(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating theme-form-floating",children:[(0,Je.jsx)("input",{type:"email",class:"form-control",id:"email1",value:"vicki.pope@gmail.com"}),(0,Je.jsx)("label",{for:"email1",children:"Email address"})]})})}),(0,Je.jsx)("div",{class:"col-xxl-6",children:(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating theme-form-floating",children:[(0,Je.jsx)("input",{class:"form-control",type:"tel",value:"4567891234",name:"mobile",id:"mobile",maxlength:"10",oninput:"javascript: if (this.value.length > this.maxLength) this.value =\r this.value.slice(0, this.maxLength);"}),(0,Je.jsx)("label",{for:"mobile",children:"Email address"})]})})}),(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating theme-form-floating",children:[(0,Je.jsx)("input",{type:"text",class:"form-control",id:"address1",value:"8424 James Lane South San Francisco"}),(0,Je.jsx)("label",{for:"address1",children:"Add Address"})]})})}),(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating theme-form-floating",children:[(0,Je.jsx)("input",{type:"text",class:"form-control",id:"address2",value:"CA 94080"}),(0,Je.jsx)("label",{for:"address2",children:"Add Address 2"})]})})}),(0,Je.jsx)("div",{class:"col-xxl-4",children:(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating theme-form-floating",children:[(0,Je.jsxs)("select",{class:"form-select",id:"floatingSelect1","aria-label":"Floating label select example",children:[(0,Je.jsx)("option",{selected:!0,children:"Choose Your Country"}),(0,Je.jsx)("option",{value:"kindom",children:"United Kingdom"}),(0,Je.jsx)("option",{value:"states",children:"United States"}),(0,Je.jsx)("option",{value:"fra",children:"France"}),(0,Je.jsx)("option",{value:"china",children:"China"}),(0,Je.jsx)("option",{value:"spain",children:"Spain"}),(0,Je.jsx)("option",{value:"italy",children:"Italy"}),(0,Je.jsx)("option",{value:"turkey",children:"Turkey"}),(0,Je.jsx)("option",{value:"germany",children:"Germany"}),(0,Je.jsx)("option",{value:"russian",children:"Russian Federation"}),(0,Je.jsx)("option",{value:"malay",children:"Malaysia"}),(0,Je.jsx)("option",{value:"mexico",children:"Mexico"}),(0,Je.jsx)("option",{value:"austria",children:"Austria"}),(0,Je.jsx)("option",{value:"hong",children:"Hong Kong SAR, China"}),(0,Je.jsx)("option",{value:"ukraine",children:"Ukraine"}),(0,Je.jsx)("option",{value:"thailand",children:"Thailand"}),(0,Je.jsx)("option",{value:"saudi",children:"Saudi Arabia"}),(0,Je.jsx)("option",{value:"canada",children:"Canada"}),(0,Je.jsx)("option",{value:"singa",children:"Singapore"})]}),(0,Je.jsx)("label",{for:"floatingSelect",children:"Country"})]})})}),(0,Je.jsx)("div",{class:"col-xxl-4",children:(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating theme-form-floating",children:[(0,Je.jsxs)("select",{class:"form-select",id:"floatingSelect",children:[(0,Je.jsx)("option",{selected:!0,children:"Choose Your City"}),(0,Je.jsx)("option",{value:"kindom",children:"India"}),(0,Je.jsx)("option",{value:"states",children:"Canada"}),(0,Je.jsx)("option",{value:"fra",children:"Dubai"}),(0,Je.jsx)("option",{value:"china",children:"Los Angeles"}),(0,Je.jsx)("option",{value:"spain",children:"Thailand"})]}),(0,Je.jsx)("label",{for:"floatingSelect",children:"City"})]})})}),(0,Je.jsx)("div",{class:"col-xxl-4",children:(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating theme-form-floating",children:[(0,Je.jsx)("input",{type:"text",class:"form-control",id:"address3",value:"94080"}),(0,Je.jsx)("label",{for:"address3",children:"Pin Code"})]})})})]})}),(0,Je.jsxs)("div",{class:"modal-footer",children:[(0,Je.jsx)("button",{type:"button",class:"btn btn-animation btn-md fw-bold","data-bs-dismiss":"modal",children:"Close"}),(0,Je.jsx)("button",{type:"button","data-bs-dismiss":"modal",class:"btn theme-bg-color btn-md fw-bold text-light",children:"Save changes"})]})]})})}),(0,Je.jsx)("div",{class:"modal fade theme-modal",id:"editCard",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-lg modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsx)("h5",{class:"modal-title",id:"exampleModalLabel8",children:"Edit Card"}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsxs)("div",{class:"row g-4",children:[(0,Je.jsx)("div",{class:"col-xxl-6",children:(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating theme-form-floating",children:[(0,Je.jsx)("input",{type:"text",class:"form-control",id:"finame",value:"Mark"}),(0,Je.jsx)("label",{for:"finame",children:"First Name"})]})})}),(0,Je.jsx)("div",{class:"col-xxl-6",children:(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating theme-form-floating",children:[(0,Je.jsx)("input",{type:"text",class:"form-control",id:"laname",value:"Jecno"}),(0,Je.jsx)("label",{for:"laname",children:"Last Name"})]})})}),(0,Je.jsx)("div",{class:"col-xxl-4",children:(0,Je.jsx)("form",{children:(0,Je.jsxs)("div",{class:"form-floating theme-form-floating",children:[(0,Je.jsxs)("select",{class:"form-select",id:"floatingSelect12","aria-label":"Floating label select example",children:[(0,Je.jsx)("option",{selected:!0,children:"Card Type"}),(0,Je.jsx)("option",{value:"kindom",children:"Visa Card"}),(0,Je.jsx)("option",{value:"states",children:"MasterCard Card"}),(0,Je.jsx)("option",{value:"fra",children:"RuPay Card"}),(0,Je.jsx)("option",{value:"china",children:"Contactless Card"}),(0,Je.jsx)("option",{value:"spain",children:"Maestro Card"})]}),(0,Je.jsx)("label",{for:"floatingSelect12",children:"Card Type"})]})})})]})}),(0,Je.jsxs)("div",{class:"modal-footer",children:[(0,Je.jsx)("button",{type:"button",class:"btn btn-animation btn-md fw-bold","data-bs-dismiss":"modal",children:"Cancel"}),(0,Je.jsx)("button",{type:"button",class:"btn theme-bg-color btn-md fw-bold text-light",children:"Update Card"})]})]})})}),(0,Je.jsx)("div",{class:"modal fade theme-modal remove-profile",id:"removeProfile",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header d-block text-center",children:[(0,Je.jsx)("h5",{class:"modal-title w-100",id:"exampleModalLabel22",children:"Are You Sure ?"}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsx)("div",{class:"remove-box",children:(0,Je.jsx)("p",{children:"The permission for the use/group, preview is inherited from the object, object will create a new permission for this object"})})}),(0,Je.jsxs)("div",{class:"modal-footer",children:[(0,Je.jsx)("button",{type:"button",class:"btn btn-animation btn-md fw-bold","data-bs-dismiss":"modal",children:"No"}),(0,Je.jsx)("button",{type:"button",class:"btn theme-bg-color btn-md fw-bold text-light","data-bs-target":"#removeAddress","data-bs-toggle":"modal",children:"Yes"})]})]})})}),(0,Je.jsx)("div",{class:"modal fade theme-modal remove-profile",id:"removeAddress",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsx)("h5",{class:"modal-title text-center",id:"exampleModalLabel12",children:"Done!"}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsx)("div",{class:"remove-box text-center",children:(0,Je.jsx)("h4",{class:"text-content",children:"It's Removed."})})}),(0,Je.jsx)("div",{class:"modal-footer pt-0",children:(0,Je.jsx)("button",{type:"button",class:"btn theme-bg-color btn-md fw-bold text-light","data-bs-dismiss":"modal",children:"Close"})})]})})}),(0,Je.jsx)("div",{class:"modal fade theme-modal",id:"edit-profile",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsx)("h5",{class:"modal-title",id:"exampleModalLabel3",children:"Edit Your Profile"}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsxs)("form",{children:[(0,Je.jsxs)("div",{class:"mb-3",children:[(0,Je.jsx)("label",{for:"companyName",class:"form-label",children:"Name"}),(0,Je.jsx)("input",{onChange:function(e){return N((0,tt.Z)((0,tt.Z)({},A),{},{name:e.target.value}))},type:"text",class:"form-control",value:s||(null===A||void 0===A?void 0:A.name),id:"companyName"})]}),(0,Je.jsxs)("div",{class:"mb-3",children:[(0,Je.jsx)("label",{for:"companyName",class:"form-label",children:"Email"}),(0,Je.jsx)("input",{onChange:function(e){return N((0,tt.Z)((0,tt.Z)({},A),{},{email:e.target.value}))},type:"text",class:"form-control",id:"companyName",value:l||(null===A||void 0===A?void 0:A.email)})]}),(0,Je.jsxs)("div",{class:"mb-3",children:[(0,Je.jsx)("label",{for:"companyName",class:"form-label",children:"Gender"}),(0,Je.jsx)("input",{onChange:function(e){return N((0,tt.Z)((0,tt.Z)({},A),{},{gender:e.target.value}))},type:"text",class:"form-control",id:"companyName",value:f||(null===A||void 0===A?void 0:A.gender)})]}),(0,Je.jsxs)("div",{class:"mb-3",children:[(0,Je.jsx)("label",{for:"companyName",class:"form-label",children:"Date of birth"}),(0,Je.jsx)("input",{onChange:function(e){return N((0,tt.Z)((0,tt.Z)({},A),{},{dob:e.target.value}))},type:"text",class:"form-control",id:"companyName",value:g||(null===A||void 0===A?void 0:A.dob)})]}),(0,Je.jsxs)("div",{class:"mb-3",children:[(0,Je.jsx)("label",{for:"companyName",class:"form-label",children:"Time of birth"}),(0,Je.jsx)("input",{onChange:function(e){return N((0,tt.Z)((0,tt.Z)({},A),{},{tob:e.target.value}))},type:"text",class:"form-control",id:"companyName",value:b||(null===A||void 0===A?void 0:A.tob)})]}),(0,Je.jsxs)("div",{class:"mb-3",children:[(0,Je.jsx)("label",{for:"companyName",class:"form-label",children:"Place of birth"}),(0,Je.jsx)("input",{onChange:function(e){return N((0,tt.Z)((0,tt.Z)({},A),{},{pob:e.target.value}))},type:"text",class:"form-control",id:"companyName",value:S||(null===A||void 0===A?void 0:A.pob)})]}),(0,Je.jsxs)("div",{class:"mb-3",children:[(0,Je.jsx)("label",{for:"companyName",class:"form-label",children:"Current Address"}),(0,Je.jsx)("input",{onChange:function(e){return N((0,tt.Z)((0,tt.Z)({},A),{},{current_address:e.target.value}))},type:"text",class:"form-control",id:"companyName",value:k||(null===A||void 0===A?void 0:A.current_address)})]}),(0,Je.jsxs)("div",{class:"mb-3",children:[(0,Je.jsx)("label",{for:"companyName",class:"form-label",children:"PinCode"}),(0,Je.jsx)("input",{onChange:function(e){return N((0,tt.Z)((0,tt.Z)({},A),{},{pin_code:e.target.value}))},type:"text",class:"form-control",id:"companyName",value:T||(null===A||void 0===A?void 0:A.pin_code)})]})]})}),(0,Je.jsxs)("div",{class:"modal-footer",children:[(0,Je.jsx)("button",{type:"button",class:"btn btn-animation btn-md fw-bold","data-bs-dismiss":"modal",children:"Cancle"}),(0,Je.jsx)("button",{onClick:function(){var e={name:null===A||void 0===A?void 0:A.name,email:null===A||void 0===A?void 0:A.email,gender:null===A||void 0===A?void 0:A.gender,dob:null===A||void 0===A?void 0:A.dob,tob:null===A||void 0===A?void 0:A.tob,pob:null===A||void 0===A?void 0:A.pob,current_address:null===A||void 0===A?void 0:A.current_address,pin_code:null===A||void 0===A?void 0:A.pin_code};Ye.put("http://103.104.74.215:3012/api/user/update_user_profile_data/".concat(P),e).then((function(e){L(),console.log(e.data.data._id),console.log(e.data);var t=e.data.data;console.log(t),localStorage.setItem("userdata",JSON.stringify(t))}))},type:"button",class:"btn theme-bg-color btn-md fw-bold text-light","data-bs-dismiss":"modal",children:"Save"})]})]})})}),(0,Je.jsx)("div",{class:"modal fade theme-modal",id:"edit-data",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsx)("div",{class:"modal-content",children:(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsx)("h5",{class:"modal-title",id:"exampleModalLabel3",children:"Edit Your Profile"}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]})})})}),(0,Je.jsx)(Ze.default,{}),(0,Je.jsx)(ft,{})]})},On=function(){return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsxs)("div",{class:"breadscrumb-contain",children:[(0,Je.jsx)("h2",{children:"Love"}),(0,Je.jsx)("nav",{children:(0,Je.jsxs)("ol",{class:"breadcrumb mb-0",children:[(0,Je.jsx)("li",{class:"breadcrumb-item",children:(0,Je.jsx)("a",{href:"index-2.html",children:(0,Je.jsx)("i",{class:"fa-solid fa-house"})})}),(0,Je.jsx)("li",{class:"breadcrumb-item","aria-current":"page",children:"Love"})]})})]})})})})}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-sm-4 g-3",children:(0,Je.jsxs)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 ratio_50",children:[(0,Je.jsxs)("div",{class:"blog-detail-image rounded-3 mb-4",children:[(0,Je.jsx)("img",{src:"../assets/images/inner-page/lovehs.jpg",class:"bg-img blur-up lazyload",alt:""}),(0,Je.jsx)("div",{class:"blog-image-contain",children:(0,Je.jsx)("h2",{children:"Love & Astrology"})})]}),(0,Je.jsx)("div",{class:"blog-detail-contain",children:(0,Je.jsxs)("p",{children:[(0,Je.jsx)("span",{class:"first",children:"Z"})," odiac signs have predestined love matches that are indicated to form highly compatible matches as per astrological resources available on these signs. Water signs get along well with likeminded people and similar is the case with air, fire or earth signs. Opposites attract too! But getting insights into how well you get along with another sign and what to expect in terms of love can be more helpful than you think. The difficulty of dating a Scorpio man can only be understood by those who have been through the innumerable tests and unexplained silences these men are capable of. Aries is impulsive and will not hang around to witness how deep your thoughts are. They live in the now and it is the present that is most important to them. Taureans are very loyal in love and they expect the same in return from their partners. Libran women are as charming as they come and nobody represents femininity better than a Libran. Leo will grab the spotlight no matter what the competition and when dating this sign, be sure to take them to fine places to wine and dine. They have expensive tastes and luxury appeals to them. Pisces will do anything to remain in a secure relationship. Get more such astrological insights to understand your zodiac lover\u2019s thoughts, personality, emotions and desires. Love astrology readings can help you take your relationship to another level and you will experience happiness like never before."]})})]})})})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsxs)("div",{class:"banner-contain hover-effect",style:{boxShadow:"0 0 10px #949393"},children:[(0,Je.jsx)("img",{src:"../assets/images/cake/banner/4.jpg",class:"bg-img blur-up lazyload",alt:""}),(0,Je.jsx)("div",{class:"banner-details p-center p-sm-4 p-3 text-white text-center",style:{height:"90px"}})]})})})})}),(0,Je.jsx)("section",{class:"blog-section",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsx)("div",{class:"title"}),(0,Je.jsxs)("div",{class:"slider-3 arrow-slider",children:[(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("img",{src:"../assets/images/blog/lunar.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("h2",{children:"Moola Nakshatra: Characteristics, Compatibility & More"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 27, 2023"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"1872"})]})]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("img",{src:"../assets/images/blog/number.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("h2",{children:"Monthly Numerology Predictions For April 2023"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 9, 2021"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"200"})]})]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("img",{src:"../assets/images/blog/card.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("h2",{children:"April Tarot Reading Horoscope 2023 for Each Zodiac Sign"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 23, 2023"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"1000"})]})]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("img",{src:"../assets/images/blog/vivah.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("h2",{children:"Vivah Muhurat 2024: Auspicious Dates & Time In 2024 To Get Married"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 23, 2023"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"1000"})]})]})]})]})})]}),(0,Je.jsxs)("div",{class:"slider-3 arrow-slider",children:[(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("img",{src:"../assets/images/blog/lunar.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("h2",{children:"Moola Nakshatra: Characteristics, Compatibility & More"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 27, 2023"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"1872"})]})]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("img",{src:"../assets/images/blog/number.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("h2",{children:"Monthly Numerology Predictions For April 2023"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 9, 2021"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"200"})]})]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("img",{src:"../assets/images/blog/card.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("h2",{children:"April Tarot Reading Horoscope 2023 for Each Zodiac Sign"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 23, 2023"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"1000"})]})]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("img",{src:"../assets/images/blog/vivah.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("h2",{children:"Vivah Muhurat 2024: Auspicious Dates & Time In 2024 To Get Married"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 23, 2023"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"1000"})]})]})]})]})})]})]})}),(0,Je.jsx)(Ze.default,{})]})},Cn=function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear();return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsx)("div",{class:"breadscrumb-contain",children:(0,Je.jsx)("h2",{children:"Zodiac Sign"})})})})})}),(0,Je.jsx)("section",{class:"fresh-vegetable-section section-lg-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"title",style:{padding:" 5px"},children:(0,Je.jsxs)("div",{class:"row",children:[(0,Je.jsx)("div",{class:"col-lg-3",children:(0,Je.jsx)("img",{class:"img2",src:"../assets/images/inner-page/zodiac.jpg",alt:"aries",width:"170",height:"170",style:{borderRadius:"100%"}})}),(0,Je.jsxs)("div",{class:"col-lg-9",children:[(0,Je.jsx)("h2",{children:"Zudiac Sign"}),(0,Je.jsx)("p",{children:"Astrology, focuses on a person\u2019s astrological or zodiac sign, to a large extent. There are 12 Zodiac Signs, which are believed to be star-constellations in the sky. Each sign has different mythological stories connected to it, and each one represents a prime energy of consciousness."})]})]})})})}),(0,Je.jsx)("section",{className:"category-section-2",children:(0,Je.jsxs)("div",{className:"container-fluid-lg",children:[(0,Je.jsx)("div",{className:"title",children:(0,Je.jsx)("h2",{children:"SELECT YOUR SIGN"})}),(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsx)("div",{className:"category-slider arrow-slider",children:(0,Je.jsxs)(nt.Z,(0,tt.Z)((0,tt.Z)({},{dots:!1,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:1,flexDirection:"row"}),{},{children:[(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-1",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/1.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Aries"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[t,"-",n,"-",r]})]})]}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.05s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-2",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/2.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Taurus"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[t,"-",n,"-",r]})]})]})}),(0,Je.jsx)("div",{style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.1s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-3",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/3.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Gemini"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[t,"-",n,"-",r]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.15s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/4.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Cancer"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[t,"-",n,"-",r]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.2s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/5.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Leo"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[t,"-",n,"-",r]})]})]})}),(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.25s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-1",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/6.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Virgo"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[t,"-",n,"-",r]})]})]}),(0,Je.jsx)("div",{style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.3s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-2",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/7.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Libra"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[t,"-",n,"-",r]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.35s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-3",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/8.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Scorpio"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[t,"-",n,"-",r]})]})]})}),(0,Je.jsx)("div",{style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.4s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/9.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Sagittarius"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[t,"-",n,"-",r]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.45s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/10.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Capricorn"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[t,"-",n,"-",r]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.5s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/11.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Aquarius"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[t,"-",n,"-",r]})]})]})}),(0,Je.jsx)("div",{style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.55s",children:[(0,Je.jsx)(a.rU,{to:"/Horoscope_page",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/12.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Pisces "}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[t,"-",n,"-",r]})]})]})})]}))})})})]})}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsx)("div",{className:"title",children:(0,Je.jsx)("h2",{children:"YOU MAY ALSO LIKE "})}),(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-3",children:(0,Je.jsxs)(nt.Z,(0,tt.Z)((0,tt.Z)({},{autoplay:!0,infinite:!0,speed:500,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:992,settings:{slidesToShow:1}},{breakpoint:576,settings:{slidesToShow:1}}]}),{},{children:[(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp",children:[(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{style:{width:"100%",height:"206px",objectFit:""},src:"../assets/images/blog/number.jpg",class:"bg-img blur-up lazyload img-fluid",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h2",{children:"Moola Nakshatra: Characteristics, Compatibility"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 9, 2021"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"200"})]})]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp",children:[(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{style:{width:"100%",height:"206px",objectFit:""},src:"../assets/images/blog/number.jpg",class:"bg-img blur-up lazyload img-fluid",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h2",{children:"Monthly Numerology Predictions For April 2023"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 9, 2021"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"200"})]})]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp",children:[(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{style:{width:"100%",height:"206px",objectFit:""},src:"../assets/images/blog/card.jpg",class:"bg-img blur-up lazyload img-fluid",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h2",{children:"Tarot Reading Horoscope 2023 for Each Zodiac Sign"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 23, 2023"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"1000"})]})]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp",children:[(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{style:{width:"100%",height:"206px",objectFit:""},src:"../assets/images/blog/vivah.jpg",class:"bg-img blur-up lazyload img-fluid",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("h2",{children:"Vivah Muhurat 2024: Auspicious Dates & Time In 2024 To Get Married"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 23, 2023"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"1000"})]})]})]})]})})]}))})})]})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("div",{style:{textAlign:"center"},children:(0,Je.jsx)("h2",{children:"12 Zodiac Signs with Dates and Meaning"})}),(0,Je.jsxs)("p",{class:"text-justify",children:["According to Western astrology, the zodiac signs are the twelve 30\xb0 sectors of the ecliptic, i.e. the plane that the Sun follows. The approximate dates calculated for the Zodiac signs (starting from Aries) are-",(0,Je.jsx)("br",{}),(0,Je.jsx)("b",{children:"Aries"})," from March 21-April 19; ",(0,Je.jsx)("b",{children:"Taurus"})," from April 20-May 20;",(0,Je.jsx)("b",{children:"Gemini"})," from May 21-June 20;",(0,Je.jsx)("b",{children:"Cancer"}),"from June 21-July 22;",(0,Je.jsx)("b",{children:"Leo"})," from July 23-August 22; ",(0,Je.jsx)("b",{children:"Virgo"})," from August 23-September 22;",(0,Je.jsx)("b",{children:"Libra"})," from September 23-October 22;",(0,Je.jsx)("b",{children:"Scorpio"})," from October 23-November 21; ",(0,Je.jsx)("b",{children:"Sagittarius"})," from November 22-December 21, ",(0,Je.jsx)("b",{children:"Capricorn"})," is from December 22- January 19; ",(0,Je.jsx)("b",{children:"Aquarius"}),"Aqurius is from January 20 to February 18; and ",(0,Je.jsx)("b",{children:"Pisces"})," from February 19 to March 20.",(0,Je.jsx)("br",{})]}),(0,Je.jsxs)("p",{class:"top17 text-justify font16 line27",children:["Each zodiac sign is represented by a special \u2018symbol\u2019- ",(0,Je.jsx)("b",{children:"Aries"})," is the Ram, ",(0,Je.jsx)("b",{children:"Taurus"})," is the Bull,",(0,Je.jsx)("b",{children:"Gemini"})," is represented by the Twins, ",(0,Je.jsx)("b",{children:"Cancer"})," is the Crab, ",(0,Je.jsx)("b",{children:"Leo"})," is the Lion, ",(0,Je.jsx)("b",{children:"Virgo"})," is the Virgin, ",(0,Je.jsx)("b",{children:"Libra"}),"is represented by the Scales,",(0,Je.jsx)("b",{children:" Scorpio"})," is the Scorpion, ",(0,Je.jsx)("b",{children:"Sagittarius"})," is the Archer or the Centaur,",(0,Je.jsx)("b",{children:"Capricorn"})," is the Goat,",(0,Je.jsx)("b",{children:" Aquarius"})," is the Water Bearer, and ",(0,Je.jsx)("b",{children:"Pisces"})," is represented by the (Two) Fish."]}),(0,Je.jsx)("p",{children:"The 4 elements and their influence on the signs have been briefly explained below-"}),(0,Je.jsxs)("p",{children:[(0,Je.jsx)("b",{children:"Water Signs"}),"- The Water signs tend to be exceptionally emotional and sensitive. They are highly intuitive and they can be as mysterious. Water signs love profound conversations and intimacy. As their element suggests, the water signs can be quite fragile and, so, constantly seek security in relationships.",(0,Je.jsx)("b",{children:" The Water Signs are: Cancer, Scorpio and Pisces."})]}),(0,Je.jsxs)("p",{children:[(0,Je.jsx)("b",{children:"Fire Signs-"})," The Fire signs tend to be passionate and dynamic, yet temperamental. They get angry just as quickly as fire catches on in a dry forest, but they also forgive easily. They are adventurous and full of energy. They inspire others with their physical strength. Fire signs are intelligent, self- aware, creative and idealistic people.",(0,Je.jsx)("b",{children:" The Fire Signs are: Aries, Leo and Sagittarius."})]}),(0,Je.jsxs)("p",{children:[(0,Je.jsx)("b",{children:"Earth Signs-"})," As their element suggests, the Earth signs are \u2018grounded\u2019 and encourage people around them to be \u2018down to earth\u2019 as well. They are mostly conservative and realistic, and can also be quite emotional. They are loyal and stable, and they support their loved ones even when the times get rough. While on one hand they can be quite practical, at times they often get materialistic. ",(0,Je.jsx)("b",{children:"The Earth Signs are: Taurus, Virgo and Capricorn."})]}),(0,Je.jsxs)("p",{children:[(0,Je.jsx)("b",{children:"Air Signs-"})," The Air signs are driven by rationality. They are social, friendly, and love conversing with others. They are the thinkers in the zodiacal circle, being intellectual and analytical. They love philosophical discussions, social gatherings and good books. Their main goal is to follow their own creative and liberating ideas, and so, as the air around us, it can be hard for these signs to \u2018fit-in\u2019 in their surroundings. ",(0,Je.jsx)("b",{children:"The Air Signs are: Gemini, Libra and Aquarius."})]})]})})}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})]})},An=function(){return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsxs)("div",{class:"breadscrumb-contain",children:[(0,Je.jsx)("h2",{children:"Vastu Details Page"}),(0,Je.jsx)("nav",{children:(0,Je.jsxs)("ol",{class:"breadcrumb mb-0",children:[(0,Je.jsx)("li",{class:"breadcrumb-item",children:(0,Je.jsx)("a",{href:"index-2.html",children:(0,Je.jsx)("i",{class:"fa-solid fa-house"})})}),(0,Je.jsx)("li",{class:"breadcrumb-item","aria-current":"page",children:"Vastu"}),(0,Je.jsx)("li",{class:"breadcrumb-item active","aria-current":"page",children:"Vastu Details"})]})})]})})})})}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsxs)("div",{class:"row g-sm-4 g-3",children:[(0,Je.jsx)("div",{class:"col-xxl-3 col-xl-4 col-lg-5 d-lg-block d-none",children:(0,Je.jsx)("div",{class:"left-sidebar-box",children:(0,Je.jsx)("div",{class:"accordion left-accordion-box",id:"accordionPanelsStayOpenExample",children:(0,Je.jsxs)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{border:"2px none"},children:[(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)("a",{href:"weekly_horoscope.html",children:(0,Je.jsx)("img",{src:"../assets/images/news/weakhoro.jpg",class:"bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-contain",children:[(0,Je.jsx)("div",{children:(0,Je.jsxs)("a",{href:"blog-detail.html",children:[(0,Je.jsx)("h3",{children:"OTHER VASTU TIPS"}),(0,Je.jsx)("hr",{})]})}),(0,Je.jsxs)("a",{href:"#",children:[(0,Je.jsx)("p",{children:"Vastu For Home"}),(0,Je.jsx)("hr",{})]}),(0,Je.jsxs)("a",{href:"#",children:[(0,Je.jsx)("p",{children:"Vastu For New House"}),(0,Je.jsx)("hr",{})]}),(0,Je.jsxs)("a",{href:"#",children:[(0,Je.jsx)("p",{children:"Vastu For office"}),(0,Je.jsx)("hr",{})]}),(0,Je.jsxs)("a",{href:"#",children:[(0,Je.jsx)("p",{children:"Vastu For Factory"}),(0,Je.jsx)("hr",{})]}),(0,Je.jsxs)("a",{href:"#",children:[(0,Je.jsx)("p",{children:"Vastu For Kitchen"}),(0,Je.jsx)("hr",{})]})]})]})})})}),(0,Je.jsxs)("div",{class:"col-xxl-9 col-xl-8 col-lg-7 ratio_50",children:[(0,Je.jsxs)("div",{class:"blog-detail-image rounded-3 mb-4",children:[(0,Je.jsx)("img",{src:"../assets/images/inner-page/Vastu.jpg",class:"bg-img blur-up lazyload",alt:""}),(0,Je.jsx)("div",{class:"blog-image-contain",children:(0,Je.jsx)("h2",{style:{fontSize:"100px"},children:"Vastu"})})]}),(0,Je.jsxs)("div",{class:"blog-detail-contain",children:[(0,Je.jsx)("p",{children:"Do you know that a well-defined blueprint of your home can give you lifelong happiness? Yes, by applying the correct Vastu tips, you can prepare a blueprint that will bring prosperity to your world and help you get rid of all negativity."}),(0,Je.jsx)("p",{children:"Vastu Shastra is the science that deals with the architectural principles of a place. Initially, it originated in India and has now reached millions of people in the world who prepare proper blueprints of a building before beginning its construction."}),(0,Je.jsx)("p",{children:"It is connected with the designing and layout of a particular structure and ensures that the geographical surroundings boost up the positive vibes of every person who comes in close contact with the building."}),(0,Je.jsx)("p",{children:"This sacred science is based on ancient Hindu and Buddhist beliefs about the structuring of a building. There are different designs and geometrical patterns that are to be used for the different types of buildings such as temples, homes, offices, etc. All these things are defined by the Vastu Shastra. "}),(0,Je.jsx)("h2",{children:"What exactly is Vastu Shastra?"}),(0,Je.jsx)("p",{children:"Vastu Shastra or Vastu Vidya is the knowledge of the layout of a building that would bring peace and prosperity to the people who live there. People spend a huge amount of their time inside a building - be it their home, offices, shops, malls, temples, etc. and therefore, it becomes important that the vibes produced by that place are positive and healthy. "}),(0,Je.jsx)("p",{children:"Have you experienced sudden anxiety the moment you enter a new place? Many times you get so uncomfortable that you feel like rushing out to get some fresh air. This is what mostly happens when you enter a building that is not Vastu-compliant. Therefore, by incorporating Vastu tips, you can provide all the people who enter your place, a \u201cfeel-good\u201d experience."}),(0,Je.jsx)("h2",{children:"How does Vastu Shastra Work?"}),(0,Je.jsx)("p",{children:"The entire universe holds the energies that are a part of the cosmos that we live in. These energies are both positive and negative and their impact is very strong on the individuals who come in contact with these energies. <;/p>"}),(0,Je.jsx)("p",{children:"Vastu works upon a place in such a manner that it enhances the growth of positive energy and wards off the negative energy in order to create a progressive environment for the people who have their homes, offices or businesses set up in that particular location."}),(0,Je.jsx)("h3",{children:"Why is Vastu Shastra so Important?"}),(0,Je.jsx)("p",{children:"Not many people are aware of the importance of Vastu Shastra. The people who live or work in a building that is not aligned with the principles of Vastu are often hit with the negative forces of nature. They may suffer from physical and mental disorders, lose money without any reason or may even die due to the negativity in their surroundings."}),(0,Je.jsx)("p",{children:"It is believed that different Gods supervise the different directions that determine the places that are best suitable for a particular event. For instance, the north-east direction is the most favourable for building a temple as it is governed by many Gods. Similarly, the south-east direction is the best for building a kitchen as it is controlled by Lord Agni (fire). "}),(0,Je.jsx)("h3",{children:"Is Vastu a Science?"}),(0,Je.jsx)("p",{children:"Vastu Shastra revolves around the forces of nature that can have a deep and lasting impact on the life of people. It is considered to be a mystic science that deals with architecture, layout, and structure of a building based upon common sense. "}),(0,Je.jsx)("p",{children:"We all know that the sun is the source of all energy on earth. The standard principles of Vastu Shastra guide us to utilize the immense amounts of heat and light produced by the sun in the best possible manner. Therefore, many of these pertain to the ventilation of the building and the sunlight that it would receive. "}),(0,Je.jsx)("p",{children:"It brings together the natural energies such as light energy, thermal energy, lunar energy, solar energy, cosmic energy, etc. and aligns them in such a way that we are able to make the most of it. Thus, we may say that Vastu is an amalgamation of art, science, astronomy, and astrology."}),(0,Je.jsx)("br",{}),(0,Je.jsx)("h3",{children:"Vastu Directions and Elements"}),(0,Je.jsx)("p",{children:"Vastu is mainly based upon the eight directions and the five basic elements of nature. The Vastu directions are - North, North-West, North-East, South, South-West, South-East, West and East. These are combined with the five elements - earth, water, sky (space), fire and air."}),(0,Je.jsx)("p",{children:"Creating a balance between the forces of nature (elements) and the position of the building (directions) is the most important aspect of Vastu Shastra. It makes use of the gravitational force, the magnetic field, the design of the building, etc. to make certain calculations that would lead to the creation of a home, office or shop that brings prosperity, peace, and happiness to every individual who would reside there. "})]})]})]})})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsx)("div",{className:"banner-contain",children:(0,Je.jsxs)("div",{className:"banner-contain hover-effect",style:{height:"150px"},children:[(0,Je.jsx)("img",{src:"../assets/images/vegetable/banner/banner1.jpg",className:"bg-img blur-up lazyload",alt:"banner",style:{width:"100%",height:"15vh",objectFit:"cover"}}),(0,Je.jsx)("div",{className:"banner-details p-center p-sm-4 p-3 text-white text-center",children:(0,Je.jsx)("div",{})})]})})})})})}),(0,Je.jsx)("section",{class:"blog-section",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsx)("div",{class:"title",children:(0,Je.jsx)("h2",{children:"YOU MAY ALSO LIKE"})}),(0,Je.jsxs)("div",{class:"slider-3 arrow-slider",children:[(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("img",{src:"../assets/images/blog/lunar.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("h2",{children:"Moola Nakshatra: Characteristics, Compatibility & More"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 27, 2023"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"1872"})]})]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("img",{src:"../assets/images/blog/number.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("h2",{children:"Monthly Numerology Predictions For April 2023"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 9, 2021"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"200"})]})]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("img",{src:"../assets/images/blog/card.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("h2",{children:"April Tarot Reading Horoscope 2023 for Each Zodiac Sign"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 23, 2023"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"1000"})]})]})]})]})}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{class:"blog-box ratio_50",children:[(0,Je.jsx)("div",{class:"blog-box-image",children:(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("img",{src:"../assets/images/blog/vivah.jpg",class:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{class:"blog-detail",children:[(0,Je.jsx)("a",{href:"blog-detail.html",children:(0,Je.jsx)("h2",{children:"Vivah Muhurat 2024: Auspicious Dates & Time In 2024 To Get Married"})}),(0,Je.jsxs)("div",{class:"blog-list",children:[(0,Je.jsx)("span",{children:"March 23, 2023"}),(0,Je.jsxs)("div",{class:"views_blog_box",children:[(0,Je.jsx)("i",{class:"fa fa-eye"}),(0,Je.jsx)("span",{children:"1000"})]})]})]})]})})]})]})}),(0,Je.jsx)(Ze.default,{})]})},Nn=function(){(0,n.useEffect)((function(){s()}),[]);var e=(0,n.useState)([]),t=(0,o.Z)(e,2),r=t[0],i=t[1],s=function(){Ye.get("http://103.104.74.215:3012/api/user/puja_list").then((function(e){i(e.data.data)}))},c=(0,n.useState)(!1),u=(0,o.Z)(c,2),l=u[0],d=u[1];return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)(Xe,{}),!0===l&&(0,Je.jsxs)("div",{class:"fullpage-loader",children:[(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{})]}),(0,Je.jsx)("section",{className:"blog-section",children:(0,Je.jsxs)("div",{className:"container-fluid-lg",children:[(0,Je.jsx)("div",{className:"title",children:(0,Je.jsx)("h2",{children:"Nakshatra Pooja"})}),(0,Je.jsx)("div",{className:"slider-5 arrow-slider row",style:{},children:r.map((function(e){return(0,Je.jsx)("div",{class:"col-xl-3 col-sm-3",style:{width:""},children:(0,Je.jsxs)("div",{className:"blog-box ",style:{width:"100%",height:"100%"},children:[(0,Je.jsx)("div",{className:"blog-box-image",children:(0,Je.jsx)(a.rU,{onClick:function(){d(!0),localStorage.setItem("pujaDet",JSON.stringify(e))},to:"/PujaListDetail",children:(0,Je.jsx)("img",{src:"http://103.104.74.215:3012/uploads/"+e.file[0],className:"img-fluid bg-img",alt:""})})}),(0,Je.jsxs)("div",{className:"blog-detail",children:[(0,Je.jsx)("a",{href:"",children:(0,Je.jsxs)("h2",{children:[null===e||void 0===e?void 0:e.title," ",(0,Je.jsx)("button",{class:"btn btn-md bg-dark cart-button text-white w-80",style:{float:"right",height:"29px",width:"87px"},children:"Book Now"})]})}),(0,Je.jsx)("div",{className:"blog-list",children:(0,Je.jsx)("span",{children:null===e||void 0===e?void 0:e.current_date.slice(0,10)})})]})]})})}))})]})}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})]})},jn=__webpack_require__(3322),Dn=__webpack_require__.n(jn);!function(e){e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE"}(En||(En={}));var Pn,Ln=__webpack_require__(1197),Mn=__webpack_require__.n(Ln);!function(e){e.GLOBAL="GLOBAL",e.INDIA="INDIA",e.JAPAN="JAPAN",e.ASIA="ASIA",e.EUROPE="EUROPE",e.CHINA="CHINA",e.NORTH_AMERICA="NORTH_AMERICA"}(Pn||(Pn={}));"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var Un,Vn,Fn,Bn=n.createContext({});Bn.Provider,Bn.Consumer;!function(e){e[e.yes=0]="yes",e[e.subbed=1]="subbed",e[e.no=2]="no"}(Un||(Un={})),function(e){e[e.grid=0]="grid",e[e.pin=1]="pin"}(Vn||(Vn={})),function(e){e[e.disabled=0]="disabled",e[e.enabled=1]="enabled",e[e.disabling=2]="disabling",e[e.enabling=3]="enabling"}(Fn||(Fn={}));var Gn=n.createContext({rtcProps:{appId:"",channel:"",role:"host"},rtmProps:{}}),qn=(Gn.Provider,n.createContext([])),Wn=(qn.Provider,qn.Consumer,n.createContext([])),Hn=(Wn.Provider,Wn.Consumer,n.createContext({}));Hn.Provider,Un.no,Un.no,function(e){var t}({codec:"vp8",mode:"live"}),n.createElement(n.Fragment,null,n.createElement("polygon",{points:"23 7 16 12 23 17 23 7"}),n.createElement("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})),n.createElement(n.Fragment,null,n.createElement("path",{d:"M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"}),n.createElement("line",{x1:"1",y1:"1",x2:"23",y2:"23"})),n.createElement(n.Fragment,null,n.createElement("polyline",{points:"15 3 21 3 21 9"}),n.createElement("polyline",{points:"9 21 3 21 3 15"}),n.createElement("line",{x1:"21",y1:"3",x2:"14",y2:"10"}),n.createElement("line",{x1:"3",y1:"21",x2:"10",y2:"14"})),n.createElement(n.Fragment,null,n.createElement("path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"}),n.createElement("line",{x1:"23",y1:"1",x2:"1",y2:"23"})),n.createElement(n.Fragment,null,n.createElement("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),n.createElement("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),n.createElement("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),n.createElement("line",{x1:"8",y1:"23",x2:"16",y2:"23"})),n.createElement(n.Fragment,null,n.createElement("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),n.createElement("path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"}),n.createElement("path",{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"}),n.createElement("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),n.createElement("line",{x1:"8",y1:"23",x2:"16",y2:"23"})),n.createElement(n.Fragment,null,n.createElement("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),n.createElement("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),n.createElement("line",{x1:"12",y1:"17",x2:"12",y2:"21"})),n.createElement(n.Fragment,null,n.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));(0,n.createContext)({});var zn,Kn,Yn,Zn;!function(e){e[e.initFailed=0]="initFailed",e[e.offline=1]="offline",e[e.initialising=2]="initialising",e[e.loggingIn=3]="loggingIn",e[e.loggedIn=4]="loggedIn",e[e.connected=5]="connected",e[e.loginFailed=6]="loginFailed"}(zn||(zn={})),function(e){e[e.broadcaster=0]="broadcaster",e[e.audience=1]="audience"}(Kn||(Kn={})),function(e){e[e.camera=0]="camera",e[e.microphone=1]="microphone"}(Yn||(Yn={})),function(e){e[e.closed=0]="closed",e[e.muteMic=1]="muteMic",e[e.muteCamera=2]="muteCamera",e[e.unmuteMic=3]="unmuteMic",e[e.unmuteCamera=4]="unmuteCamera"}(Zn||(Zn={}));var Jn=(0,n.createContext)(null);Jn.Provider,Jn.Consumer;(function(e,t){var n=null})({encoderConfig:{}},{encoderConfig:{}}),function(){var e}(),function(){var e}(),new TextEncoder,new TextDecoder;var Xn=function(){var e=(0,n.useState)([]),t=(0,o.Z)(e,2),r=t[0],i=t[1];(0,n.useEffect)((function(){a()}),[]);var a=function(){var e={_id:localStorage.getItem("blogid")};Ye.post("http://103.104.74.215:3012/api/user/blog_list_details",e).then((function(e){return i(e.data.data)})).then((function(e){}))};return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsx)("div",{class:"breadscrumb-contain",children:(0,Je.jsx)("h2",{children:"Blog Details Page"})})})})})}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-sm-4 g-3",children:(0,Je.jsxs)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 ratio_50",children:[(0,Je.jsxs)("div",{class:"blog-detail-image rounded-3 mb-4",children:[(0,Je.jsx)("img",{style:{width:"100%"},src:"http://103.104.74.215:3012/uploads/"+(null===r||void 0===r?void 0:r.image),class:"bg-img blur-up lazyload",alt:""}),(0,Je.jsxs)("div",{class:"blog-image-contain",children:[(0,Je.jsx)("h2",{children:r.title}),(0,Je.jsx)("ul",{class:"contain-comment-list",children:(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{class:"user-list",children:[(0,Je.jsx)("i",{"data-feather":"calendar"}),(0,Je.jsx)("span",{children:r.current_date})]})})})]})]}),(0,Je.jsx)("div",{class:"blog-detail-contain",children:(0,Je.jsx)("p",{children:r.description})})]})})})}),(0,Je.jsx)(et,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})," "]})},Qn=function(){var e=(0,n.useState)(null),t=(0,o.Z)(e,2),r=t[0],i=t[1],s=(0,n.useState)("Aries"),c=(0,o.Z)(s,2),u=c[0],l=c[1],d=new Date,h=d.getDate(),f=d.getMonth()+1,p=d.getFullYear();(0,n.useEffect)((function(){v(u)}),[u]);var v=function(e){var t="sun_sign_prediction/daily/".concat(e),n="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat(t),{},{headers:{authorization:n,"Content-Type":"application/json"}}).then((function(e){i(e.data)})).catch((function(e){console.error("Error fetching data:",e)}))},g=function(e){l(e)};return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"home-section pt-2",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsx)("img",{align:"right",src:"../assets/images/logo/hs.png",width:"100%"}),(0,Je.jsx)("div",{class:"row g-4"})]})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsxs)("div",{class:"title",children:[(0,Je.jsx)("h2",{style:{textAlign:"center"},children:"Today's Horoscope"}),(0,Je.jsx)("p",{children:"Reading your Today\u2019s horoscope is one of the best ways to predict your future. The foretelling of the future through the Daily horoscope is an ancient practice and finds relevance even today. The horoscope prediction is about predicting the individual's future based on various astrological aspects such as the position of the planets, Nakshatras, Tithi, and much more. However, it\u2019s predominantly the movement of planets from one house of the Kundli to another that influences the life of the native and thus his Daily horoscope. As planets are in motion, their position in the chart of the native on a daily basis virtually decides the course of his life and fortune."}),"mm",(0,Je.jsx)("p",{children:"Of all the ancient Vedic practices that we are aware of, horoscope reading is one of the most accepted and popular. Horoscope reading transgresses boundaries and is a tea-time read for not just the astrology-loving Indians but also people residing in western countries. In fact, these days there are numerous mediums to bring you your today's horoscope, such as TV, newspapers, magazines, and much more. Whatever the medium, the purpose of the Daily horoscope remains the same, which is to prepare you for life and make you aware of all the upcoming events, so you don\u2019t go blank into life as most people do."})]})})}),(0,Je.jsx)("section",{className:"category-section-2",children:(0,Je.jsxs)("div",{className:"container-fluid-lg",children:[(0,Je.jsx)("div",{className:"title",children:(0,Je.jsx)("h2",{children:"Daily Horoscopes"})}),(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsx)("div",{className:"category-slider arrow-slider",children:(0,Je.jsxs)(nt.Z,(0,tt.Z)((0,tt.Z)({},{dots:!1,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:1,flexDirection:"row"}),{},{children:[(0,Je.jsxs)("div",{onClick:function(){return g("aries")},className:"shop-category-box border-0 wow fadeIn",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-1",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/1.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Aries"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{onClick:function(){return g("taurus")},className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.05s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-2",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/2.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Taurus"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("gemini")},style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.1s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-3",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/3.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Gemini"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("cancer")},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.15s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/4.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Cancer"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("leo")},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.2s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/5.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Leo"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsxs)("div",{onClick:function(){return g("virgo")},className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.25s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-1",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/6.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Virgo"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]}),(0,Je.jsx)("div",{onClick:function(){return g("libra")},style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.3s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-2",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/7.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Libra"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("scorpio")},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.35s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-3",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/8.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Scorpio"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("sagittarius")},style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.4s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/9.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Sagittarius"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("capricorn")},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.45s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/10.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Capricorn"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("aquarius")},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.5s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/11.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Aquarius"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("pisces")},style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.55s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/12.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Pisces "}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})})]}))})})})]})}),(0,Je.jsx)("section",{class:"seller-grid-section",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{class:"row g-4",children:[(0,Je.jsx)("div",{class:"col-xxl-4 col-md-6",children:(0,Je.jsx)(a.rU,{to:"#",class:"seller-grid-box",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h3",{children:"Personal Life"}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/are.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsx)("p",{children:null===r||void 0===r?void 0:r.prediction.personal_life})]})})})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-6",children:(0,Je.jsx)(a.rU,{to:"#",class:"seller-grid-box",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h3",{children:"Profession"}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/tau.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsx)("p",{children:null===r||void 0===r?void 0:r.prediction.profession})]})})})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-6",children:(0,Je.jsx)(a.rU,{to:"#",class:"seller-grid-box",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h3",{children:"Health"}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/gem.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsx)("p",{children:null===r||void 0===r?void 0:r.prediction.health})]})})})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-6",children:(0,Je.jsx)(a.rU,{to:"#",class:"seller-grid-box",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h3",{children:"Travel"}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/cn.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsx)("p",{children:null===r||void 0===r?void 0:r.prediction.travel})]})})})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-6",children:(0,Je.jsx)(a.rU,{to:"#",class:"seller-grid-box",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h3",{children:"Luck"}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/leo.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsx)("p",{children:null===r||void 0===r?void 0:r.prediction.luck})]})})})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-6",children:(0,Je.jsx)(a.rU,{to:"#",class:"seller-grid-box",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h3",{children:"Emotions"}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/li.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsx)("p",{children:null===r||void 0===r?void 0:r.prediction.emotions})]})})})})]}),(0,Je.jsx)("nav",{class:"custome-pagination"})]})}),(0,Je.jsx)(et,{}),(0,Je.jsx)("section",{children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{class:"title",style:{padding:" 5px"},children:[(0,Je.jsx)("h2",{children:"Understanding Today horoscope"}),(0,Je.jsx)("span",{class:"title-leaf",children:(0,Je.jsx)("svg",{class:"icon-width",children:(0,Je.jsx)(a.rU,{to:"https://themes.pixelstrap.com/fastkart/assets/svg/leaf.svg#leaf"})})}),(0,Je.jsxs)("p",{children:["If you are a follower of astrology, you would know that each zodiac sign in astrology is ruled by a planet. For example, the Moon is the ruler of Cancer, and Mars is the ruler of both Aries and Scorpio zodiac signs. Similarly, Gemini is ruled by Mercury and so on. It\u2019s the negative and positive state of these planets that affects your zodiac sign and thus your future."," "]}),(0,Je.jsxs)("p",{children:["For example, Taurus is ruled by the planet Venus. In astrology, Mars, Jupiter, and Ketu are the enemy of the planet Venus. Hence, if Venus is placed in any house of your Kundli with Mars, Jupiter or Ketu, then the characteristics of that house may turn negative for you and reflect on your Horoscope today."," "]})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:" 5px"},children:[(0,Je.jsx)("h2",{children:"How can Today's horoscope help you?"}),(0,Je.jsx)("span",{class:"title-leaf",children:(0,Je.jsx)("svg",{class:"icon-width",children:(0,Je.jsx)(a.rU,{to:"https://themes.pixelstrap.com/fastkart/assets/svg/leaf.svg#leaf"})})}),(0,Je.jsxs)("p",{children:["We have been talking a lot about Today\u2019s horoscope, how it is prepared, and all the technicality or science that goes into predicting your future through horoscopes. And what we have gathered from the discussion is that the Daily horoscope is an insightful medium to analyse the sense of the energy of any given day. Horoscope allows us a roadmap, showing us what we might experience in the day, week or month ahead of us. Having said that, here are some more benefits that one can derive from reading their horoscope on a regular basis."," "]})]})]})}),(0,Je.jsx)("section",{class:"product-list-section section-b-space",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{class:"title",children:[(0,Je.jsx)("h2",{children:"Also Check"}),(0,Je.jsx)("span",{class:"title-leaf",children:(0,Je.jsx)("svg",{class:"icon-width",children:(0,Je.jsx)(a.rU,{to:"https://themes.pixelstrap.com/fastkart/assets/svg/leaf.svg#leaf"})})})]}),(0,Je.jsxs)("div",{class:"row g-4",children:[(0,Je.jsx)("div",{class:"col-xxl-4 col-md-4",children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp",children:[(0,Je.jsx)("div",{class:"product-header",children:(0,Je.jsx)("div",{class:"product-image",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_page",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/dh.png",class:"img-fluid blur-up lazyload",alt:""})})})}),(0,Je.jsx)("div",{class:"product-footer",children:(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_page",children:(0,Je.jsx)("h5",{class:"name",children:"Daily Horoscope"})})})})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-4",children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp",children:[(0,Je.jsx)("div",{class:"product-header",children:(0,Je.jsx)("div",{class:"product-image",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_monthly",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/dh.png",class:"img-fluid blur-up lazyload",alt:""})})})}),(0,Je.jsx)("div",{class:"product-footer",children:(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_monthly",children:(0,Je.jsx)("h5",{class:"name",children:"Montlhy Horoscope"})})})})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-4",children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp",children:[(0,Je.jsx)("div",{class:"product-header",children:(0,Je.jsx)("div",{class:"product-image",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_yearly",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/dh.png",class:"img-fluid blur-up lazyload",alt:""})})})}),(0,Je.jsx)("div",{class:"product-footer",children:(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_yearly",children:(0,Je.jsx)("h5",{class:"name",children:" Horoscope 2023"})})})})]})})]})]})}),(0,Je.jsx)($e,{}),(0,Je.jsx)("section",{}),(0,Je.jsx)("section",{}),(0,Je.jsx)(Ze.default,{})]})};var $n=function(){return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsxs)("div",{class:"breadscrumb-contain",children:[(0,Je.jsx)("h2",{children:"Blog Details Page"}),(0,Je.jsx)("nav",{children:(0,Je.jsxs)("ol",{class:"breadcrumb mb-0",children:[(0,Je.jsx)("li",{class:"breadcrumb-item",children:(0,Je.jsx)("a",{href:"index-2.html",children:(0,Je.jsx)("i",{class:"fa-solid fa-house"})})}),(0,Je.jsx)("li",{class:"breadcrumb-item","aria-current":"page",children:"Blog"}),(0,Je.jsx)("li",{class:"breadcrumb-item active","aria-current":"page",children:"Blog Details"})]})})]})})})})}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-sm-4 g-3",children:(0,Je.jsxs)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 ratio_50",children:[(0,Je.jsxs)("div",{class:"blog-detail-image rounded-3 mb-4",children:[(0,Je.jsx)("img",{style:{width:"100%"},src:"../assets/images/inner-page/blog/2.jpg",class:"bg-img blur-up lazyload",alt:""}),(0,Je.jsxs)("div",{class:"blog-image-contain",children:[(0,Je.jsx)("h2",{children:"Eclipses- change is constant"}),(0,Je.jsx)("ul",{class:"contain-comment-list",children:(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{class:"user-list",children:[(0,Je.jsx)("i",{"data-feather":"calendar"}),(0,Je.jsx)("span",{children:"20 FEG, 2023"})]})})})]})]}),(0,Je.jsxs)("div",{class:"blog-detail-contain",children:[(0,Je.jsxs)("p",{children:[(0,Je.jsx)("span",{class:"first",children:"L"}),"The most significant events that force us to focus on area of change in our lives are Eclipses. We get shocked and unbalanced but it propels us ahead. They awaken us from our profound sleep so that we might all advance from one level of life maturity to another, usually to a higher level of existence."]}),(0,Je.jsx)("p",{children:"In a typical year, there are four eclipses. Eclipses demand us to alter our behaviour and our methods."}),(0,Je.jsx)("p",{children:"Solar and Lunar eclipses occur on full moon and new moon days respectively.  Every five and half month for 18 to 24 months, they emerge in a family of signs that are united on the same axis in the horoscope wheel."}),(0,Je.jsx)("p",{children:"In a family of signs they will keep occurring in pairs, coinciding with new moons and full moons. Once a family of sign is finished it will not be back for about seven or eight years."}),(0,Je.jsx)("b",{children:"Solar vs Lunar Eclipses"}),(0,Je.jsx)("p",{children:"When the moon is between the Sun and the earth, it blocks the Sun\u2019s light from reaching the surface of the planet, causing a solar eclipse."}),(0,Je.jsx)("p",{children:"When the earth blocks the moon from the Sun, causing the moon to vanish, this is known as a lunar eclipse. Since she only reflects the Sun\u2019s light, the moon doesn\u2019t emit any light of her own. Solar eclipses usually occur on new moons, which symbolizes a fresh start. While a lunar eclipse always occurs on a full moon and typically denotes an end or a climax."}),(0,Je.jsx)("p",{children:"Any eclipse in the skies is a noteworthy occurrence; a solar eclipse actually has the strength of three new moons or full moons, whereas a lunar eclipse actually has the strength of a full moon."}),(0,Je.jsx)("b",{children:"Solar eclipses frequently result in fresh starts and exciting new prospects."}),(0,Je.jsx)("p",{children:"They frequently deliver news out of the blue, are thrilling, and are frequently quite positive. To determine if an eclipse is entirely friendly or not, we must constantly consider the kinds of discussions the moon or the Sun are having with other planets."}),(0,Je.jsx)("b",{children:"Lunar eclipses are particularly upsetting since they usher in final conclusions."}),(0,Je.jsx)("p",{children:"They frequently remind us of the passing of time and evoke feeling. A lunar eclipse on a full moon is nearly usually an emotional event. Dreams and memories resurface, and we occasionally experience sentimentality."}),(0,Je.jsx)("b",{children:"Major activities at Eclipses"}),(0,Je.jsx)("h6",{children:"1. New of major life events is announced by eclipses."}),(0,Je.jsx)("h6",{children:"2. With every eclipse, something comes to an end and something new starts."}),(0,Je.jsx)("h6",{children:"3. Each eclipse in a series is connected by a common theme."}),(0,Je.jsx)("h6",{children:"4. Unexpected, unforeseen events will be brought on by eclipses/"}),(0,Je.jsx)("h6",{children:"5. It will be set off by something that happens somewhere else, and you have no control over it. However, when the eclipses occur, Hugh changes will be delivered right to your door."}),(0,Je.jsx)("h6",{children:"6. Eclipses alter schedules and speed up your perception of time."}),(0,Je.jsx)("h6",{children:"7. Truth will probably enter your life in a surprising way because an eclipse\u2019s purpose is to shine a blazing ray of reality on the area being affected."})]})]})})})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",style:{paddingBottom:20},children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsxs)("div",{class:"banner-contain hover-effect",style:{},children:[(0,Je.jsx)("img",{style:{width:"100%",boxShadow:"0px 0px 10px"},src:"../assets/images/cake/banner/4.jpg",class:"bg-img blur-up lazyload",alt:""}),(0,Je.jsx)("div",{class:"banner-details p-center p-sm-4 p-3 text-white text-center",style:{height:90}})]})})})})}),(0,Je.jsx)(Ze.default,{})]})};var er=function(){var e=new Date,t=(e.getDate(),e.getMonth(),e.getFullYear());return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsxs)("body",{class:"bg-effect",children:[(0,Je.jsx)("section",{class:"home-section pt-2",children:(0,Je.jsx)("div",{class:"container-fluid-lg",style:{background:"lineargradient(to bottom, #00cc00 0%, #ff99cc 100%)"},children:(0,Je.jsx)("img",{align:"right",src:"../assets/images/logo/hs.png",width:"100%"})})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsxs)("div",{class:"title",style:{padding:20},children:[(0,Je.jsxs)("h2",{style:{textAlign:"center"},children:["Yearly horoscope ",t," predictions for all zodiac signs"]}),(0,Je.jsxs)("p",{children:["The New Year ",t," is finally here, and we have a lot to look forward to. From setting new goals to reflecting on the old ones, the New year brings us an opportunity to set things right back on track, and to guide you on the entire journey is your Horoscope ",t," by India\u2019s best astrologers."]}),(0,Je.jsxs)("p",{children:["When it comes to life, all of us have some goals to look forward to. These goals could be as simple as starting your own business in ",t," to finding love. As much as we wish to achieve these goals for ourselves, the restraints come from within and our surroundings. Clearly, not everything in life goes according to our plan. And as much as it is a good thing, the same, at times, is frustrating as well. In such cases, we need to reflect on what we are doing wrong or simply what is happening wrong with us. And to help you in doing so is your yearly horoscope ",t,"."]}),(0,Je.jsxs)("p",{children:["The horoscopes are to make you aware and take you on the right path in life. Similarly, the ",t," horoscope is about sharing with you all the upcoming opportunities to help you tread in the right direction. As per astrologers, it is not always the things we do that impact our goals or our relationships in life. At times, it is the energies of planets, zodiac signs, etc., that pick on decisions for us. And if one is unaware of those decisions, you are bound to take the wrong steps in life. There are times when we try to achieve a particular thing with all our heart but eventually fail in doing so. It could either be the result of your lack of trying or the impact of planets or zodiac signs on you."," "]})]})})}),(0,Je.jsx)("section",{children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{class:"title",style:{padding:5},children:[(0,Je.jsxs)("h2",{children:["Aries Horoscope ",t]}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/are.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsxs)("p",{children:["This is a superb year for Aries because the Jupiter energy really gels well with your own fiery nature. This can help you to reignite the various passions you have for life and you can begin to enjoy things again and find increased meaning in your pursuits. Jupiter increases Aries\u2019 enthusiasm level, it makes you more competitive and so you can be more inclined to get involved in sporting and business activities of a very competitive nature, simply because you love throwing your hat into the ring and show people what you can do. However, as a partner you could be a handful as you\u2019re more headstrong, pushy and a little reckless. You\u2019re unlikely to take advice and you\u2019re rather more impatient than usual and looking for new ways to live life to the full. Jupiter is also the planet of philosophy and greater understanding, so while you are experiencing a lot more luck and prosperity in terms of practical ventures, on a spiritual level you\u2019re more open minded and tolerant which is excellent for you rising above pettiness, being forgiving and seeing the bigger picture. Thus it's less likely that you will be mean-spirited and narrow-minded - not that these are in general of traits of Aries - but you are more eager to be generous of spirit and to understand the wider significance of things without letting the minutiae get your down. This is a fortune year for new relationships, for healing and for forgiveness, so because you\u2019re ready to leave the past in the past and deal with past issues, new relationships can be more successful, even if they don't become emotionally close and intimate from the get go. Existing relationships can move forward, especially if there has been a period of lack of understanding, conflict or difficulty.",t," is also a much better year for your earnings and business, there are more opportunities to create prosperity and security and also a lot more interesting avenues to explore. There's an abundance of variety abounding in your day to day life, and as we know Aries get bored quickly, so the various opportunities to learn and expand your knowledge will keep your busy and interested. Aries and your partner need to be more willing to accept personal responsibility, so while you are interested in being a team player in relationships, the buck stops with both of you and it is vital for you to understand exactly the part you play in various relationship issues, and to self-correct or take a step back and analyze your own motivations in relationships more deeply. You need to acknowledge why you\u2019re in a relationship, what your priorities are and what really makes the relationship tick, and this should help you to re-focus on strengthening relationship, but from the point of view of your own strength.",t," is definitely a positive one for your finances, particularly as in the second part of the year Jupiter will be in Taurus, along with Uranus which continues to be in Taurus and the North node is in Taurus too. Jupiter should bring you a little bit of luck, it should mean that you are able to attract bigger clients, get better contracts or make more sales, if you are self-employed or work in your own business. If you work for someone else there should be more opportunities within your current employment to earn more, or get a promotion. There can be sudden surprises and new information which changes the way you think about money, so it's not just about earning more, it's about better ways to invest, new ways to save money or how to get excellent deals on products that you need as inputs."]})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:5},children:[(0,Je.jsxs)("h2",{children:["Taurus Horoscope ",t]}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/tau.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsx)("p",{children:"Jupiter brings a lot of luck into your life, and the luck is often due to changes in attitudes or willingness to be more open-minded and expensive in terms of your thinking. It has to be said that Taurus can become set in your ways and a little bit narrow, and this can limit the scope of  your opportunities, but right now you are more open emotionally and in terms of your mentality, and that will help bring fresh perspectives and thereafter new exciting opportunities into your life. You\u2019re more comfortable and far less likely to be threatened by change, because you have an adventurous spirit and more willingness to let go. If you have felt depressed, blue or your health hasn't been good, this is an excellent year where you can see improvement, however the improvement shouldn't be taken for granted because you have to understand the lessons of the illness or depression to fully recover. So during the retrograde of Jupiter in the autumn Taurus should take a pause to understand the meaning of the current era of your life in terms of the entire journey. No matter what is going on in your world or emotionally, you have to understand all the forces both within and without that brought you to this point, before the next phase of development can come clearly into focus. In terms of romance and friendships, you\u2019re more likely to encounter people who are good for you and to whom you can play a positive role. So there is an excellent symbiosis in new relationships which involves learning, excitement, stimulation and also romance and warmth. This is a time of expanding personal relationships, meeting new people, and engaging with different sorts of people, so it can be an exciting time simply because you are a social creature, and you do become highly stimulated and gratified from expanding your social circle and rubbing shoulders with people who can bring some excitement and inspiration into your life. Ideally, this year can bring about an almost spiritual relationship and a true love. So you could very well be lucky in love, the only thing that could impact this prospect, is the fact that you often don't know a good relationship when you see it, and can sometimes be distracted by the superficial elements. Thus not all relationships you form this year are going to be winners, but somewhere in there they could be a winner. This can be a very good year for your marriage and long-term relationships but it all depends on the level of give and take. Sometimes things can get a little bit extreme in relationships, there is the tendency for you and your partner to get carried away. This is not just about keeping things in perspective, this can also be in terms of finances and family matters, as you tend to take on more than you necessarily know you are ready for, and often things escalate and quickly become quite a headache. So it's very important for you to think twice before making any decisions, because often these steamroll into something that can be a little bit time-consuming or even more onerous than expected."})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:5},children:[(0,Je.jsxs)("h2",{children:["Gemini Horoscope ",t]}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/gem.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsx)("p",{children:"This is an important year for you to reignite your ideals and wishes for the future and often uniting with others and joining groups and organizations can be an important Launchpad for some of your ideas. It's of considerable benefit for you to network, seek likeminded people and expand your social circles, so you should be more involved with groups, organizations or even professional bodies which can help you to understand the potential of your life. You\u2019re likely to meet people who will enhance your life either through education or thought provoking romance. No one is an island, and Gemini understands better than most people the importance of working with others and learning about yourself via interactions with others, and this year is a point in case. It's very important for you to motivate yourself by becoming involved in activities that enhances your aims, but which are also connected to wider societal goals or issues. The spiritual element of relationships is very important to Gemini. This year new relationships will tend to have a slightly enhanced flavor in terms of the fact there is a cosmic connection. So this is a year when you can meet your soulmate or someone with whom you feel there is a special rapport and something that goes beyond the emotional and the physical. This makes it a very exciting year for relationships, but it can also be a little bit more complicated because these sort of spiritual relationships often involve a journey of self-discovery, and often it's rather revealing in terms of your own character and that of your partner, as karmic scars can be revealed. This can be a transformative time in relationships, often relationships reach a crossroads and it's a case of having to adapt or fully reconsider the relationship. Good relationships can become a lot stronger this year with greater cooperation, emotional understanding and more awareness of each other's needs, but in relationships that are poor, the gap can grow a wider and things can become more bitter and you have to watch out for issues of control. Gemini are generally looking for closer and more rewarding relationships and if that's not forthcoming you can sometimes become a little closed or evasive and this could lead to jealousy, so you do have to watch off for your partner becoming a green-eyed monster. You have to be patient in relationships because while it's possible to improve your relationships right now, this can't be done overnight and therefore a consistent sustained effort it is needed. Relationships this year need a lot of stamina, they can be demanding and exhausting and so some breaks and space are very important too. This is a year where your preparations begin bear fruit and this often coincides with an important promotion, success, recognition or culmination of activities. In many cases you are at the pinnacle of your professional life and there are often very important responsibilities and duties for you to carry out."})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:5},children:[(0,Je.jsxs)("h2",{children:["Cancer Horoscope ",t]}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/cn.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsxs)("p",{children:["This year you hear the call of your destiny, suddenly things that you dismissed as indulgent or outrageous become things that you\u2019re actually prepared to consider. You\u2019re motivated to aim higher and an inner yearning will stir in you that will be absolutely impossible to ignore. This is a year where your self-esteem increases, you have a greater trust in your innate abilities rather than the obvious skills you have, and that's why you may choose a divergent career path that reflects things that you are gifted in, rather than things you necessarily have experience of. There is a high likelihood that you will become respected and will attain goals that will bring you public attention and enhance your reputation. It's vitally important for you to recognize and correct any behavior patterns that are linked to the past, so any negative thinking or negative habits that were developed as coping mechanisms in the past 14 years have to go. Remember this year is a whole new slate, the last 14 years are over, you need to put that to bed and move on from it. So any routines, behaviors or ideas that accumulated back then now have to be reviewed, if they are positive they can continue or otherwise they have to go. In long term relationships, fairness and balance is an essential building block. Relationships which have fairness and a sense of justice at the core will thrive. However, relationships where there is this lingering feeling that there's some oppression, that one person is taking advantage or that one person is not accountable, resentment festers and communication becomes insincere. Lack of fairness, leads to secrecy and avoidance which ruins trust and so everything starts with real fairness at the heart of the relationship. This year the planet Saturn, which is the ruler of your solar 7th house enters Pisces, which represents quite an idealistic rather romantic and also sometimes a little bit of a confusing influence to relationships. So that means in ",t,", your long-term relationships benefit a great deal from romance, they can be more meaningful spirituality in terms of deeper levels of understanding, but they can also be more bewildering. Communication has to be undertaken with a lot more sensitivity and patience, this is not a year when any kind of understanding can be rushed, it may be a year when your partner is going through something which you don't fully understand or they are having certain emotions they haven't had before, possibly because of a life transition of their own. Therefore you must fully employ your sympathetic and intuitive side in order to be compassionate with your partner. So while this may not be in evidence all year, it's certainly a trend that your partner needs a little bit more compassion, understanding and maybe deeper intuitive perception, as your partner may not want to spell everything out. In fact sometimes they almost want you to be able to guess, as this is a way of seeing how much you understand them or pays attention to them."]})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:5},children:[(0,Je.jsxs)("h2",{children:["Leo Horoscope ",t]}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/leo.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsxs)("p",{children:["It's important for Leo to think of all the things in your life that are illusory and deceptive, often we create narratives in our head that become chains that bonds us, but these are only narratives and we have created them, and we can break them. In ",t," you need to think about this and the beginning of the year is ideal for a period of study into psychology, or even some form of counselling can be an excellent way of resetting your mind for success in love relationships and business relationships. Leo can often become damaged by things that have happened to you in your life, you take situations and events to heart and finds it very difficult to say 'who cares, water off a duck's back' and to move on. Yes externally you look tough as you are quite courageous and have a sunny demeanor, but often you carry scars that are very slow to heal, and this can lead to you losing self-respect and sometimes being a little bit of a walk over in relationships. So this year regaining self-respect is very important to you as it helps you restore balance in relationships and take your power back. There is a sense this year that you need to jump in the deep end, you need to do it now before you develop cold feet or gives yourself too many negatives. You have to understand in what way, and why you feel restrained and then you need to abandon those restraints and jump in, as Elvis sang, 'Wise men say only fools rush in' however in ",t," for Leo it's often opportune to rush in. Your closest relationships go through a period of rebalancing and clarity, there are greater levels of appreciation and a need to reawaken the understanding of what a partner brings into your life, and how important those deep, consistent and strong bonds are. If you are very unhappy in a relationship, this is certainly a year to give it one more try, marriage counselling and advice from others could help you gain a perspective as long as it's professional advice. Patience in relationships is very important, you cannot afford to be pushy or gung ho, this is a time to be delicate and to be more cognizant of the deeper issues at play. Psychology is very important this year and so Leo needs to continue to work on yourself, understand yourself better and that could be achieved through reading and definitely via contact with different people who are possibly less inclined to self-censor. Thus good advice often comes from total strangers rather than from people you knows, because people you knows probably know you too well to be totally honest with you. This is a good year for Leo to get married or engaged. If you have been in a long term relationship and you guys have been talking about whether you should get married, now is the time to commit to each other. Leo is stronger in a partnership, you enjoy the validity and the gratification being a partnership gives you. Despite you being an individualist, you actually like being a team player in marriage and marriage brings out a good side to you, so you guys shouldn't hesitate, if you've been together a long time, maybe now is the time to pop the question and commit."]})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:5},children:[(0,Je.jsxs)("h2",{children:["Virgo Horoscope ",t]}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/li.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsx)("p",{children:"This is quite an ambitious year, but not in the sense of material achievement or career advancement, you are more ambitious in terms of expanding your knowledge and increasing the amount of power you have in your community or your professional sphere. You\u2019re all about expanding your knowledge, so you want to be seen as someone who is wise, with noble futuristic ideas and who really cares about people beyond your circle. The reason you are successful this year is that you start your creative and business projects with a lot of enthusiasm and energy, but you can also moderate this with quite a well-rounded realistic and balanced long-term view, and while sometimes planning comes second, once you\u2019ve bumped your head a few times, the planning does happen and tends to be rather effective even if as an afterthought. In terms of your relationships, you\u2019re more sexually driven and your passionate side comes to the fore. In your relationships, you are quite sexy, you like to introduce sex chat or sexual innuendo. You\u2019re seductive, charming and you\u2019re more willing to sweep a partner of their feet, but sometimes you lose a bit of the Virgo modesty and you go all in, often exaggerating, but let's be honest you are feeling quite good about yourself and that's great. The great thing about Virgo in relationships this year is your increased levels of desire and zest for living. You\u2019re more energetic and you\u2019re also more proactive, so while you can sometimes be a flexible character who takes life as it comes, this year you want to embrace life more fully and introduce a much more vibrant energy to daily life. In terms of dating, you enjoy flirting and impressing a partner and key to dating is spontaneity, fun and a little bit of romance, but nothing to slushy or dramatic. It's all about being playful, exploring together and having a life enhancing journey together. This may also be a crucial year for you settling differences regarding a past relationship. So if you have been involved in a relationship that became contentious, nasty or over which there was a lingering bad feeling or even legal battles, you have the power to resolve these and put them into the grave. So you have the potential for drawing a line in the sand, however often it's very important for you to get legal advice in dealing with these problems, rather than just struggling on as a lay person. You must remember knowledge is power and that includes legal knowledge. If you are looking for work or a new career, you should take action and do everything you can to find the right job. It's no use sitting back and waiting for an opportunity to drop into your lap, you need to explore far and wide and to keep a totally open mind without ruling anything out by prejudging it. It's highly likely you can find a fulfilling new role and this may well be connected with something working in the outdoors, in the community sphere or with people. More generally careers that involve education, guiding people or helping people get access to the law and justice are favored. It's in the nature of Virgo to strive to understand and make sense of things in your life, but you have to learn to do that from a spiritual perspective. Often what happens now in marriage has a higher purpose or meaning that is quite difficult to understand and may only be understood in hindsight, so it's important for you not to be self-critical or to beat yourself up, remember to be kind to both yourself and your partner and to use your spiritual will to navigate relationship issues. This can potentially be a year of great romance, so don't forget to indulge with your partner in things that you both find magical, whether it's movies, music, poetry etc. It's time to make a space in your life for fantasy and escapism together i.e. little romantic getaways to somewhere secluded where the world cannot intrude."})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:5},children:[(0,Je.jsxs)("h2",{children:["Libra Horoscope ",t]}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/li.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsxs)("p",{children:["Libra may have this nagging feeling that you\u2019re come to the end of a major phase in your life, and this is quite apropos, as Pluto has been squaring the sun of all Librans from Capricorn over the past 14 years, but as it moves into Aquarius in ",t,", it means a whole era for Libra has ended and so there's no doubt that this is going to be the dawn of something valuable and important happening. As we go into ",t," Jupiter is direct in Aries and this is excellent for Libra in terms of committed relationships and marriage. You may have felt some indecision in the latter part of 2022 about things in your marriage which may have been up in the air. Perhaps decisions were put on hold or there was a breakdown in communication with you and your partner, but as you go into ",t," there is an opportunity to restore good communication, also a time for healing and it's a time for a totally new chapter in your relationship.",t,", particularly the first 6-months, are fantastic for committing to a partner, getting married, getting engaged and redefining a relationship. It's also a great time to take romances into a whole new more serious phase and start planning a future together.",t," is also a good time for healing and resolution in marriage, so whatever has gone under the bridge before, it's an excellent time for forgiveness, letting bygones be bygones, and opening a whole new chapter in your relationship. This is a very important year to use your judiciousness and sense of fairness and justice. It is an ideal time for you to take on roles like counsellor, mediator, chairperson etc. You excel in roles where you are called to unite others or bring ideas together, your gift right now is in your ability to bring harmony to conflict situations and help large groups of people to work together in constructive ways. If you are single, new relationships can become serious very quickly, simply because you are more eager to bond and form attachment with someone, because it is often life enhancing to have a partner who is also a friend and a comrade. You may be particularly attracted to working with your new partner in some way, you get a lot of fulfilment working closely with a romantic partner, even if you aren't particularly compatible the differences can be extremely stimulating. It's very important for you to unite with people who are aspirational, confident and positive. You tend to absorb a lot from other people and it's vital that you carefully choose the people you spend most time with to make sure that you are picking up the kind of positivity or influence you need in your life. You must take care to keep away from the sort of people that could be a dampening or downing influence. This can be quite a profound year for Libra in terms of reaching resolution, having a catharsis and undergoing healing at very deep psychological level. The ability to let go and move on can enhance the way you make emotional exchanges with your partner at a deep level, this improves understanding and can lead to more satisfaction on an intimate level, leading in turn to a much improved sex life. It's not only about sex life, however it's about you and your partner being able to become more comfortable with each other more, aware of each other's deep and needs and more open to sharing secrets and to letting boundaries go."]})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:5},children:[(0,Je.jsxs)("h2",{children:["Scorpio Horoscope ",t]}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/sc.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsx)("p",{children:"This year Scorpio are adept at harnessing your energy, you have a great deal of emotional and intellectual energy, and particularly this year, seeking knowledge gives you a lot of power and from this power you get control and that helps you to feel much more optimistic. This is generally an optimistic forward-looking phase, which is always important for Scorpio as Scorpio can become victims of their past through guilt, regret or resentment, but right now the only way is up! You\u2019ve got a keen eye on the future, you feel that you can take on anything and there's nothing that can scare you or get you down. This is generally a good time for the social side of work and you may experience more reward through people you work with. It's also good time for getting benefits through work, so while there may not necessarily be a pay increase or a promotion, there may be added perks and benefits that come to you through your employment. If you are young, this is an excellent time to apply for an apprenticeship as working and learning on the job is particularly favored. Jupiter brings fresh hope and possibility into the relationship, so even if your marriage has been struggling, this is a fantastic time for healing and reconciliation. Sometimes marriage counselling and getting advice from an impartial expert can help things to heal and you and your partner may be able to take things forward in a positive way. What relationships need now is fearlessness, fear is the snake in the grass in relationships. When we fear losing a partner, losing control of a partner or fear the relationship dissolving, it tends to produce control, jealousy and a lot of suspicion or even paranoia. So if you can get rid of the fear and trust in your partner and in the relationship, the relationship can only grow stronger in terms of trust and compatibility. This may be a year in which you travel due to unusual circumstances, you may take a journey to a place you have never expected to be and this can be quite educational. Travel broadens your mind and opens you to things that can certainly change the course of your life for the next few years. The key to romance and greater happiness and contentment is forgetting about the rights and wrongs, and focusing on what you have learned, what mistakes you\u2019re made (which you won\u2019t make again), and then on purging yourself of all the people, places or things that have been unhelpful influences on your life. Scorpio likes it when your back is to the wall, which isn't really the case this year, but you do like to set yourself difficult challenges. You enjoy boycotting or quitting things because when you have achieved that you feel a sense of self mastery which is very important in generating self-esteem and self-worth for Scorpio. So this year you should go ahead and set yourself quite challenging goals on a very personal level, so these might be private goals but they can also be professional and relationship goals, and then you should throw the kitchen sink at it and feel the enormous surge in power that you feel from the achievement. "})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:5},children:[(0,Je.jsxs)("h2",{children:["Sagittarius Horoscope ",t]}),(0,Je.jsx)("span",{class:"title-leaf"}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/sag.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsx)("p",{children:"This is a very important year for your personal journey of inner awareness. There's a lot going on terms of romance, sport and creativity, but this is also a time for you to connect with your destiny, to be more cognizant of what you are capable of and to possibly push yourself into new directions. It's certainly a turning point in your life and there may be big changes afoot which can radically affect the way you live. While this is a busy year, there's lots of exciting things going on and work is quite demanding, as is your family life, you need to find time for introspection and where you can adjust your attention inwards and seek for the answers. This is a perfect time for you to connect to your true Sagittarian spirit, you need to understand where you have scattered your energies and wasted time on activities or people while not being true to yourself. If you have been looking for love and have not been having much success, or maybe you haven't had enough time to devote to finding a suitable partner, during this year you should have plenty of opportunities, so it's an ideal time to start new activities, to join new clubs to do with sport or creativity etc. because these are all ideal ways to meet a new partner. You should also look for ways to enhance your social life, go out more and do things that will bring the fun factor back. It's not just about experiencing success in romance, it's about finding yourself again. It's about reconnecting with a side of yourself that is adventurous, fun and playful. Now Sagittarius are competitive, free-spirited, fun loving people, however as we go through life with all the responsibilities and the burdens, it's very easy for us all to become a little bit jaded and for us to fade, however this is an ideal time for you to get back into the driving seat of your life and that means doing things that make you feel excited and vibrant. This is a really good year for those who are entrepreneurial or inventive in nature. It suits you guys who run your own business particularly if this business involves an element of creativity, design or innovation. You are particularly proactive about problem-solving and this is certainly a good year for inventions, introducing new products or new services to your business or having launches of these new products. If you work creatively, this is an excellent time to showcase your talent, to seek publicity and to be more visible. It's a time when you can get good reviews and great feedback from the public at large, or from your customers. It's also important for married Sagittarius to be proactive and get things done, because you become more confident and the more you work as a team this enhances both of your faith in the ability of the relationship to thrive. It's also good to set the tone for the year, because the more you can achieve upfront, the less pressure there is the rest of the year and it almost sets the backdrop for doing more teamwork together and understanding how to be cooperative again. What's important for you both, is to be decisive in terms of your marriage. It's also vital to be a little bit flexible, not everything is black and white, so it's a case of deciding on a course of action, giving it a try but understanding when it isn't working and quickly moving to something else. So it's all about action, but managing that action in a careful way."})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:5},children:[(0,Je.jsxs)("h2",{children:["Capricorn Horoscope ",t]}),(0,Je.jsx)("span",{class:"title-leaf"}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/ca.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsxs)("p",{children:["This is certainly a year when you must invest in your family life, the more you invest in the people who mean most you - these can be family but also friends, neighbors or your personal support networks - the more you can draw on a sense of belonging, and these people will reciprocate with support years down the line. If you have been unhappy, or have faced quite a lot of psychological crises in the last few years, or have had many difficult pills to swallow at a psychological level, this year can really help increase your inner sense of calm and contentment. You can be a lot more in touch with your inner self, and it's a time when it's easier for you to handle truths and facts that you\u2019re normally reluctant to face, and this can help settle you down emotionally, and is very helpful in restoring relationships and easing decision-making as with you goes into the second half of the year. What's great about ",t," is that it is excellent for romance and dating, so if you are single, this is a perfect time to be more active on the social seem, to join a dating app, or to start doing a new sport with a view to potentially meeting someone who is a like-minded. You tend to have an adventurous, positive spirit and the idea in love this year is to take a 'nothing ventured nothing gained attitude', you shouldn't be looking to get cozy or settle down quite quickly, you should be looking to play the field, see what's available, experiment with different types of personalities whom you may have dismissed out of hand before, and see how that makes you feel. Love should be embraced with a spirit of adventure within you, so you don't want to go into dating with a very conservative, closed-minded attitude, you want to consider all possibilities and give everyone a fair chance. This is a terrific year for your creative projects, so whether you are pursuing creativity for a living or in connection with your hobbies, you\u2019re certainly inspired and it can be quite exciting for you developing ideas and taking them through to a conclusion. You are very inventive and great at problem solving, particularly in the second half of the year, and this can lend itself to creative development of technological products, or finding innovative solutions, so you are quite inventive and you can use that in management, IT or science careers. 2022 is a fantastic time for you to do any work on chakras in terms of releasing blockages in energy and creating a free flow of vitality throughout your body. So if you have been having any health issues, or have been feeling rather depleted or tired, a great way to tackle this is through working with your chakra energy, with a practitioner, or learning more about rebalancing chakras through mind power. There's often good news financially this year, and in terms of money and your creative projects, you can have a fair bit of luck. Often this year things suddenly go your way even if unexpectedly, so it's a year when you can really count your blessings. The middle part of the year will also be a time in relationships where you have to have more important and serious discussions with your partner, particularly about financial issues, but there may also be emotional issues that have to be resolved. The summer months in the Northern Hemisphere are a time when you may need to deal alone, or with your partner, with an ex or your partner's ex. Something from the past could crop up which is troublesome, and that may open old scars, but it has to be dealt with. Now very often couples don't like to go back over old ground or drag things up, often it isn't good to rake up the past, but to a certain extent you and a partner may need to revisit once again something from your more recent or more distant past, just to be sure that both of you had your say, felt heard, felt understood and there was a sufficient amount of either apologies or contrition in that regard."]})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:5},children:[(0,Je.jsxs)("h2",{children:["Aquarius Horoscope ",t]}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/aq.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsx)("p",{children:"This is a fantastic year for making radical decisions, for purging yourself of past toxic relationships or activities, for turning over a new leaf and also for having a whole new mindset. Pluto is the planet of psychology, so it's not just about manifestations in the outer world, it's about going deep into the core of your being and understanding yourself. So it's all about developing greater self-awareness, understanding your potential and your power, and then realizing what the blockages are, both within your own thought patterns and within the outside world, and then creatively moving forward with determination to overcome those obstacles now that Pluto is in Aquarius. So a brand new life is available to you, it all depends how much you are prepared to work on yourself and to weed out any regressive thinking. It's all about change and accepting the new, however the choice is down to you, if you are happy where you are, there's no need for you to do anything and you may not feel the impetus, but this would be a lost opportunity for growth. With Jupiter going into Taurus later in the year, this is also a fantastic time for healing within the family arena, improving family relationships and for re-establishing bonds with your nearest and dearest. Aquarius tend to have a very private side, very often you thrive in an environment where they are free to think, where they get away from it all, either in nature or in a secluded environment so they can contemplate and pontificate, and this is a very important year for you to do that. So while family is incredibly important and there may be some big and significant family events, you also must have your time and space by yourself to undergo all these important thought processes, some dredging up and some reassessing of the past, with the idea of putting a more positive gloss on it. Internet dating and long distance relationships can be quite successful this year, because you find it very easy to express yourself in writing. Relationships that are mainly based around messaging and an electronic relationship are very fulfilling for you. You\u2019re definitely looking for a partner who is open minded and inspirational, because this year you want to think big and you want to think a lot about the future and the possibilities, and thus you need a partner who is going to open up your horizons, rather than dragging you into a very safe and stuffy place. If you are married and you and your partner are generally getting on well, but there is a lack of fundamental compatibility, or one of both of you feel unfulfilled by the relationship, then this can be glaringly obvious in the summer months, and one or both of you may feel lonely or frustrated, and the frustration can be sexual or emotional. This is an ideal time for you and your partner to reassess how well you're really connecting, whether you are able to nurture each other and to truly work together as a couple, or whether you both just pay lip service to these things and you just go along to get along. Good relationships where there was a lot of chemistry and a great deal of love, should be worked hard upon to restore trust, quality communication and affection."})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:5},children:[(0,Je.jsxs)("h2",{children:["Pisces Horoscope ",t]}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/pi.png",alt:"aries",width:"170",height:"170"}),(0,Je.jsxs)("p",{children:["Strong relationships should become more fulfilling, more satisfying and you guys should be able to increase the level of trust, and therefore you will be more able to share and to encourage your partner to share too. It's important for you both to be good listeners as well, so there is a genuine two way highway of interaction. However, in poor relationships the problem this year is that you deal with insecurities by become extremely possessive and controlling. Your partner may be more inclined to be evasive or secretive as a response to you becoming more emotionally intrusive or manipulative. So it's very important for you to recognize that feelings of jealousy and possessiveness indicate that you are not secure in a relationship. Insecurities could stem from the fact that the level of communication is not adequate, there is no longer enough sharing on an emotional level and issues of trust have gone to the wall, and thus something radical needs to be done to restore trust. This is not a year when you will necessarily abandon a relationship because you are extremely stubborn, you\u2019re very determined to work on issues and your loyal nature is enhanced. It's unlikely that you will walk away, however it's a question of whether you will be able to deal with the issues you are facing in relationships constructively or not. Often your own level of self-awareness and security determine how well you deal with relationship issues, if you have not worked on your own self esteem or do not value yourself, your time and your potential, you are more likely to resort to the emotionally manipulative or even narcissistic behavior. Pisces have a lot of strength in terms overcoming obstacles this year, and you\u2019re more likely to find a sense of harmony in your life. Very often Pisces runs away from things, ignores things, almost acts like an ostrich with its head in the sand as that is your way of coping. However, this year with a combination of stubbornness and also the ability to gather and arm yourself with information, you feel ready to tackle problems with strength and with renewed confidence. It's very important for you to trust in your own intelligence and to develop your critical thinking skills as a wonderful complement to your natural intuitive understanding. In terms of romance there may be a work-related relationship or very close professional relationship with a person to whom you are deeply connected, but this may not develop into a passionate love affair in ",t,", it may start purely based around respect and admiration for each other, and the fact that you get on very, very well. Relationships can become incredibly strong this year and you gains a lot of security from being in a relationship where there is a soulmate connection. So in relationships where you feel you are with a soulmate are strengthened and are very fulfilling and satisfying, but it's also highly likely that you may connect with soulmate and start developing a close intimate connection. This is also a year where the sexual side of the relationship goes to a new level, it's not just about instant gratification and lust, it's more about reconnecting with a deep desire and a passion that reflects a strong emotional attachment between you and a deep feeling of being partners in life."]})]}),(0,Je.jsx)("div",{"_ngcontent-serverapp-c87":"",class:"faq_about_aries_horoscope",children:(0,Je.jsxs)("div",{"_ngcontent-serverapp-c87":"",class:"container",children:[(0,Je.jsxs)("h2",{"_ngcontent-serverapp-c87":"",class:"heading_seo_content_headline_chinese_horoscope",style:{textAlign:"center"},children:["Yearly horoscope ",t," FAQs"]}),(0,Je.jsxs)("div",{"_ngcontent-serverapp-c87":"",class:"",style:{paddingTop:10},children:[(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"What is the difference between the Sun sign and the Moon sign?"})}),(0,Je.jsx)("p",{children:"The Sun sign in astrology depends on the movement of the Sun sign. The Sun stays in each zodiac for around a month. Hence whatever zodiac sign the Sun was positioned at the time of your birth becomes your Sun Sign."}),(0,Je.jsx)("p",{children:"Meanwhile, the Moon changes its position from one sign to another every 2 days. Hence, whatever sign the Moon was placed at the time of your birth becomes your Moon sign."}),(0,Je.jsx)("p",{children:(0,Je.jsxs)("strong",{children:["Is horoscope ",t," based on the Moon sign or Sun sign?"]})}),(0,Je.jsxs)("p",{children:["Your horoscope ",t," is based on the Moon Sign as Moon sign readings are more accurate as the Moon changes its position from one sign to another more quickly.\xa0"]}),(0,Je.jsx)("p",{children:(0,Je.jsxs)("strong",{children:["Which is the luckiest zodiac sign of ",t,"?"]})}),(0,Je.jsxs)("p",{children:["As per the horoscope ",t," trends, the luckiest zodiac sign in ",t," would be Sagittarius, Leo, and Libra. These zodiac signs can hope for a glorious ",t," in many aspects of life, especially love and career.\xa0"]}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"What are the three main signs used for the horoscope predictions?"})}),(0,Je.jsx)("p",{children:"The Sun sign, Moon sign, and Ascendant sign are the three key aspects in your natal chart that define your daily life. The majority of people are aware of their Sun sign. However, most are unfamiliar with their lunar and rising signs."}),(0,Je.jsx)("p",{children:(0,Je.jsxs)("strong",{children:["Can I rely on horoscope ",t,"? Are horoscopes true?"]})}),(0,Je.jsxs)("p",{children:["The ",t," horoscope Nakshatratalk is prepared by expert astrologers. Astrologers keep a track of planetary transits and associated astrological events to present accurate horoscopes to the native.\xa0"]}),(0,Je.jsx)("p",{children:(0,Je.jsx)("strong",{children:"Is horoscope helpful for marriage purposes?"})}),(0,Je.jsx)("p",{children:"As per Vedic astrology, Kundali or your birth chart matters a lot. The significance of Kundli is equivalent to that of a horoscope, natal chart, or birth chart. The Kundli, or horoscope, governs many sectors of human life, including marriage. And knowing your marriage horoscope thus becomes vital for such important deeds and decisions."})]})]})}),(0,Je.jsxs)("div",{class:"col-12",children:[(0,Je.jsxs)("h2",{style:{textAlign:"center",paddingTop:10},children:["Why read horoscope ",t,"?"]}),(0,Je.jsx)("div",{style:{paddingTop:10}}),(0,Je.jsxs)("p",{children:["The horoscope ",t," is a compilation of the upcoming astrological events and their effects on your life. The astrological events include transits, conjunctions, retrograde, and much more. A number of these events happen on a regular basis and impact you accordingly. For example, Venus transiting in the first house of your Kundli will have an effect on your love life which will be completely different if Venus enters the third house of the Kundli. The horoscope's job is to highlight and make you aware of these transits and how they will impact various aspects of your life. When you know about the upcoming events, you can plan accordingly and make a wise decision for yourself. The yearly horoscope ",t,", thus helps you be one step ahead of everyone else in life."]}),(0,Je.jsxs)("p",{children:["Horoscope ",t," chronologically aligns the upcoming astrological events and their effects on you. By doing so, the astrologers allow you the whole picture of the year ahead of you and what you can accept from it. Using the horoscope ",t,", you can not only make the decisions for yourself but also for your family members, your children, elders, and anyone you love and need to take care of."," "]}),(0,Je.jsxs)("p",{children:["The yearly horoscope carries details about one\u2019s career opportunities, health prospects, marriage life prospects, and much more. So if you face issues in any of these aspects of life, the yearly horoscope helps you find the reason behind the same. Along with the reason, the horoscope also allows the reader remedies and solutions that they can practice to counter the malefic effects of planets on their Kundli. Practising the solutions helps them positively change their life in terms of finance, love, career, health, and more."," "]}),(0,Je.jsxs)("p",{children:["To ensure that horoscope ",t," is authentic, the best astrologers of Nashatratalk track the moment of planets along with other things to jolt down their effects on the native\u2019s life across the year. The horoscope is further split into categories ranging from health horoscope ",t," to finance horoscope ",t," to love horoscope ",t," and more."," "]}),(0,Je.jsxs)("p",{children:["The experts predict for each zodiac sign the good and bad times of the year. When you look at the horoscope for your zodiac sign, you get a precise understanding of what and when a thing or two can happen to you. And once you know this, you shall effortlessly make the best decisions for yourself. The horoscope",t," allows you to be one step ahead of anyone out there. These could be your colleagues, your friends, and even your partner when it comes to surprising them."," "]}),(0,Je.jsx)("p",{children:"Also, in case one seeks more information about their present or future, they can always connect with Nashatratalk astrologers over Chat or Call."})]})]})}),(0,Je.jsx)(et,{}),(0,Je.jsx)("section",{class:"product-list-section section-b-space",year:!0,children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{class:"title",children:[(0,Je.jsx)("h2",{children:"Also Check"}),(0,Je.jsx)("span",{class:"title-leaf",children:(0,Je.jsx)("svg",{class:"icon-width",children:(0,Je.jsx)(a.rU,{to:"https://themes.pixelstrap.com/fastkart/assets/svg/leaf.svg#leaf"})})})]}),(0,Je.jsxs)("div",{class:"row g-4",children:[(0,Je.jsx)("div",{class:"col-xxl-4 col-md-4",children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp",children:[(0,Je.jsx)("div",{class:"product-header",children:(0,Je.jsx)("div",{class:"product-image",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_page",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/dh.png",class:"img-fluid blur-up lazyload",alt:""})})})}),(0,Je.jsx)("div",{class:"product-footer",children:(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_page",children:(0,Je.jsx)("h5",{class:"name",children:"Daily Horoscope"})})})})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-4",children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp",children:[(0,Je.jsx)("div",{class:"product-header",children:(0,Je.jsx)("div",{class:"product-image",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_monthly",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/dh.png",class:"img-fluid blur-up lazyload",alt:""})})})}),(0,Je.jsx)("div",{class:"product-footer",children:(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_monthly",children:(0,Je.jsx)("h5",{class:"name",children:"Montlhy Horoscope"})})})})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-4",children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp",children:[(0,Je.jsx)("div",{class:"product-header",children:(0,Je.jsx)("div",{class:"product-image",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_yearly",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/dh.png",class:"img-fluid blur-up lazyload",alt:""})})})}),(0,Je.jsx)("div",{class:"product-footer",children:(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_yearly",children:(0,Je.jsx)("h5",{class:"name",children:" Horoscope "})})})})]})})]})]})}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{})]}),(0,Je.jsx)(Ze.default,{})]})},tr=function(){var e=(0,n.useState)(null),t=(0,o.Z)(e,2),r=t[0],i=t[1],s=(0,n.useState)("Aries"),c=(0,o.Z)(s,2),u=c[0],l=c[1],d=new Date,h=d.getDate(),f=d.getMonth()+1,p=d.getFullYear();(0,n.useEffect)((function(){v(u)}),[u]);var v=function(e){var t="horoscope_prediction/monthly/".concat(e),n="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat(t),{},{headers:{authorization:n,"Content-Type":"application/json"}}).then((function(e){i(e.data)})).catch((function(e){console.error("Error fetching data:",e)}))},g=function(e){l(e)};return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"home-section pt-2",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsx)("img",{align:"right",src:"../assets/images/logo/hs.png",width:"100%"}),(0,Je.jsx)("div",{class:"row g-4"})]})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsxs)("div",{class:"title",children:[(0,Je.jsx)("h2",{style:{textAlign:"center"},children:"Montly Horoscope"}),(0,Je.jsx)("p",{children:"Reading your Today\u2019s horoscope is one of the best ways to predict your future. The foretelling of the future through the Daily horoscope is an ancient practice and finds relevance even today. The horoscope prediction is about predicting the individual's future based on various astrological aspects such as the position of the planets, Nakshatras, Tithi, and much more. However, it\u2019s predominantly the movement of planets from one house of the Kundli to another that influences the life of the native and thus his Daily horoscope. As planets are in motion, their position in the chart of the native on a daily basis virtually decides the course of his life and fortune."}),"mm",(0,Je.jsx)("p",{children:"Of all the ancient Vedic practices that we are aware of, horoscope reading is one of the most accepted and popular. Horoscope reading transgresses boundaries and is a tea-time read for not just the astrology-loving Indians but also people residing in western countries. In fact, these days there are numerous mediums to bring you your today's horoscope, such as TV, newspapers, magazines, and much more. Whatever the medium, the purpose of the Daily horoscope remains the same, which is to prepare you for life and make you aware of all the upcoming events, so you don\u2019t go blank into life as most people do."})]})})}),(0,Je.jsx)("section",{className:"category-section-2",children:(0,Je.jsxs)("div",{className:"container-fluid-lg",children:[(0,Je.jsx)("div",{className:"title",children:(0,Je.jsx)("h2",{children:"Montlhy Horoscopes"})}),(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsx)("div",{className:"category-slider arrow-slider",children:(0,Je.jsxs)(nt.Z,(0,tt.Z)((0,tt.Z)({},{dots:!1,infinite:!0,speed:500,slidesToShow:5,slidesToScroll:1,flexDirection:"row"}),{},{children:[(0,Je.jsxs)("div",{onClick:function(){return g("aries")},className:"shop-category-box border-0 wow fadeIn",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-1",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/1.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Aries"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]}),(0,Je.jsx)("div",{children:(0,Je.jsxs)("div",{onClick:function(){return g("taurus")},className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.05s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-2",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/2.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Taurus"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("gemini")},style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.1s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-3",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/3.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Gemini"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("cancer")},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.15s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/4.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Cancer"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("leo")},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.2s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/5.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Leo"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsxs)("div",{onClick:function(){return g("virgo")},className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.25s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-1",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/6.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Virgo"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]}),(0,Je.jsx)("div",{onClick:function(){return g("libra")},style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.3s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-2",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/7.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Libra"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("scorpio")},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.35s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-3",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/8.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Scorpio"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("sagittarius")},style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.4s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/9.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Sagittarius"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("capricorn")},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.45s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/10.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Capricorn"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("aquarius")},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.5s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/11.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Aquarius"}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})}),(0,Je.jsx)("div",{onClick:function(){return g("pisces")},style:{alignSelf:"center"},children:(0,Je.jsxs)("div",{className:"shop-category-box border-0 wow fadeIn","data-wow-delay":"0.55s",children:[(0,Je.jsx)(a.rU,{to:"#",className:"circle-4",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/12.png",className:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsxs)("div",{className:"category-name",children:[(0,Je.jsx)("h6",{children:"Pisces "}),(0,Je.jsxs)("h6",{style:{fontSize:"10px"},children:[h,"-",f,"-",p]})]})]})})]}))})})})]})}),(0,Je.jsx)("section",{class:"seller-grid-section",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsx)("div",{class:"row g-4",children:(0,Je.jsx)("div",{class:"col-xxl-4 col-md-12",children:(0,Je.jsx)(a.rU,{to:"#",class:"seller-grid-box",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("img",{class:"img2",src:"../assets/images/astro/are.png",alt:"aries",width:"170",height:"170"}),r&&r.status&&r.prediction&&(0,Je.jsxs)("div",{className:"prediction-container",children:[(0,Je.jsxs)("h3",{children:["Prediction for ",r.sun_sign," - ",r.prediction_month]}),r.prediction.map((function(e,t){return(0,Je.jsx)("p",{children:e},t)}))]})]})})})})}),(0,Je.jsx)("nav",{class:"custome-pagination"})]})}),(0,Je.jsx)(et,{}),(0,Je.jsx)("section",{children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{class:"title",style:{padding:" 5px"},children:[(0,Je.jsx)("h2",{children:"Understanding Today horoscope"}),(0,Je.jsx)("span",{class:"title-leaf",children:(0,Je.jsx)("svg",{class:"icon-width",children:(0,Je.jsx)(a.rU,{to:"https://themes.pixelstrap.com/fastkart/assets/svg/leaf.svg#leaf"})})}),(0,Je.jsx)("p",{children:"If you are a follower of astrology, you would know that each zodiac sign in astrology is ruled by a planet. For example, the Moon is the ruler of Cancer, and Mars is the ruler of both Aries and Scorpio zodiac signs. Similarly, Gemini is ruled by Mercury and so on. It\u2019s the negative and positive state of these planets that affects your zodiac sign and thus your future. "}),(0,Je.jsx)("p",{children:"For example, Taurus is ruled by the planet Venus. In astrology, Mars, Jupiter, and Ketu are the enemy of the planet Venus. Hence, if Venus is placed in any house of your Kundli with Mars, Jupiter or Ketu, then the characteristics of that house may turn negative for you and reflect on your Horoscope today. "})]}),(0,Je.jsxs)("div",{class:"title",style:{padding:" 5px"},children:[(0,Je.jsx)("h2",{children:"How can Today's horoscope help you?"}),(0,Je.jsx)("span",{class:"title-leaf",children:(0,Je.jsx)("svg",{class:"icon-width",children:(0,Je.jsx)(a.rU,{to:"https://themes.pixelstrap.com/fastkart/assets/svg/leaf.svg#leaf"})})}),(0,Je.jsx)("p",{children:"We have been talking a lot about Today\u2019s horoscope, how it is prepared, and all the technicality or science that goes into predicting your future through horoscopes. And what we have gathered from the discussion is that the Daily horoscope is an insightful medium to analyse the sense of the energy of any given day. Horoscope allows us a roadmap, showing us what we might experience in the day, week or month ahead of us. Having said that, here are some more benefits that one can derive from reading their horoscope on a regular basis. "})]})]})}),(0,Je.jsx)("section",{class:"product-list-section section-b-space",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{class:"title",children:[(0,Je.jsx)("h2",{children:"Also Check"}),(0,Je.jsx)("span",{class:"title-leaf",children:(0,Je.jsx)("svg",{class:"icon-width",children:(0,Je.jsx)(a.rU,{to:"https://themes.pixelstrap.com/fastkart/assets/svg/leaf.svg#leaf"})})})]}),(0,Je.jsxs)("div",{class:"row g-4",children:[(0,Je.jsx)("div",{class:"col-xxl-4 col-md-4",children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp",children:[(0,Je.jsx)("div",{class:"product-header",children:(0,Je.jsx)("div",{class:"product-image",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_page",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/dh.png",class:"img-fluid blur-up lazyload",alt:""})})})}),(0,Je.jsx)("div",{class:"product-footer",children:(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_page",children:(0,Je.jsx)("h5",{class:"name",children:"Daily Horoscope"})})})})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-4",children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp",children:[(0,Je.jsx)("div",{class:"product-header",children:(0,Je.jsx)("div",{class:"product-image",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_monthly",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/dh.png",class:"img-fluid blur-up lazyload",alt:""})})})}),(0,Je.jsx)("div",{class:"product-footer",children:(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_monthly",children:(0,Je.jsx)("h5",{class:"name",children:"Montlhy Horoscope"})})})})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-4",children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp",children:[(0,Je.jsx)("div",{class:"product-header",children:(0,Je.jsx)("div",{class:"product-image",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_yearly",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/dh.png",class:"img-fluid blur-up lazyload",alt:""})})})}),(0,Je.jsx)("div",{class:"product-footer",children:(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_yearly",children:(0,Je.jsx)("h5",{class:"name",children:" Horoscope 2023"})})})})]})})]})]})}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})]})};var nr=function(){var e=(0,i.s0)(),t=(0,n.useState)(""),r=(0,o.Z)(t,2),a=r[0],s=r[1];(0,n.useEffect)((function(){v()}),[]);var c=(0,n.useState)([]),u=(0,o.Z)(c,2),l=u[0],d=u[1],h=(0,n.useState)((function(){var e=localStorage.getItem("_id");return null!=e?JSON.parse(e):[]})),f=(0,o.Z)(h,2),p=f[0],v=(f[1],function(){var e={user_id:p};Ye.post("http://103.104.74.215:3012/api/user/astrologer_list/",e).then((function(e){d(e.data.data)}))}),g=(0,n.useState)(),m=(0,o.Z)(g,2),y=m[0],b=m[1];(0,n.useEffect)((function(){b(y)}),[y]);var _=localStorage.getItem("videorate");(0,n.useEffect)((function(){E()}),[,y,_]);var E=function(){var e={user_id:p};Ye.post("http://103.104.74.215:3012/api/user/get_wallet_user",e).then((function(e){return b(e.data.data.ammount)}))};return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"section-b-space shop-section",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsxs)("div",{class:"col-12",children:[(0,Je.jsx)("div",{class:"show-button",children:(0,Je.jsx)("div",{class:"top-filter-menu-2",children:(0,Je.jsxs)("div",{class:"sidebar-filter-menu","data-bs-toggle":"collapse","data-bs-target":"#collapseExample",children:[(0,Je.jsxs)("a",{href:"shop-top-filter1.html",children:[(0,Je.jsx)("i",{class:"fa-solid fa-house"})," Talk With Astrologer"]}),(0,Je.jsx)("font",{style:{color:"blue"},children:a&&(0,Je.jsx)("p",{children:a})})]})})}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"row g-sm-4 g-3",children:[" ",null===l||void 0===l?void 0:l.map((function(t){return(0,Je.jsx)("div",{class:"col-xl-3 col-sm-3",style:{width:""},children:(0,Je.jsxs)("div",{class:"seller-grid-box seller-grid-box-1",children:[(0,Je.jsxs)("div",{class:"grid-image",children:[(0,Je.jsxs)("div",{class:"image",children:[(0,Je.jsx)("img",{onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},src:"http://103.104.74.215:3012/uploads/"+t.profile_pic,class:"img-fluid",alt:"",style:{height:"60px ",width:"60px",borderRadius:"100%"}}),(0,Je.jsxs)("button",{onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},onclick:"location.href = 'product-4-image.html';",class:"nav-item",style:{borderRadius:"15px",width:"60px",height:"30px",borderColor:"#f5b60a",boxShadow:"5px"},children:[t.review?t.review:"0",(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{style:{fontWeight:"bolder"},class:"fa fa-star-o","aria-hidden":"true"})})]})]}),(0,Je.jsx)("div",{class:"contain-name",children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h4",{onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},children:t.name}),(0,Je.jsx)("div",{class:"since-number",onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},children:(0,Je.jsx)("h6",{onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},children:t.language})}),(0,Je.jsx)("div",{class:"since-number",onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},children:(0,Je.jsx)("h6",{children:t.role})})]})})]}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"grid-contain",style:{width:"100%",paddingBottom:"20px"},children:[(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"60%",float:"left"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-map-pin"})}),(0,Je.jsx)("div",{class:"contact-detail",onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},children:(0,Je.jsxs)("h5",{children:[t.experiance_year," "]})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-phone"})}),(0,Je.jsx)("div",{class:"contact-detail",onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},children:(0,Je.jsxs)("h5",{children:[" ","\u20b9 ",t.audio_rate?t.audio_rate:"0","/Min"]})})]})]}),(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"40%",float:"right"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:["1"===t.call_status?(0,Je.jsx)("img",{onClick:function(){y>=t.audio_rate?function(t,n){var r=y/t,i=Math.floor(r);localStorage.setItem("totalminute",i),localStorage.getItem("vcidddata");var o={user_id:p,astrologer_id:n,final_time:i.toString(),type:"audio"};console.log("asdascalling tokennnsadasdasda",o),Ye.post("http://103.104.74.215:3012/api/user/generate_agrora_token_audio_calling",o).then((function(t){console.log(" dataaa",t),t.data.result&&(localStorage.setItem("videoatro_token",t.data.token),localStorage.setItem("channel_token",t.data.channel_name),setTimeout((function(){e("/Audiocall")}),1e3))})).catch((function(e){e.response&&400===e.response.status?s("Astrologer Busy on Another call"):s("An error occurred. Please try again later.")}))}(t.audio_rate,t._id):alert("You have Insufficient balance"),localStorage.setItem("vcidddata",t._id),localStorage.setItem("videorate",t.audio_rate)},src:"../assets/images/veg-3/category/phone.png",class:"img-fluid",alt:"",style:{height:"25px"}}):(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/calling.png",class:"img-fluid",alt:"",style:{height:"25px",background:"#d99f46",borderRadius:"50px"}}),(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:"25px",marginLeft:"10px"}})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"contact-detail",children:"1"===t.call_status?(0,Je.jsx)("h6",{children:" Call"}):(0,Je.jsx)("h6",{children:" Off"})}),(0,Je.jsx)("div",{class:"contact-detail",style:{marginLeft:"10px"},children:(0,Je.jsx)("h6",{children:" Chat"})})]})]})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{})]})})}))]})]})})})}),(0,Je.jsx)(Ze.default,{})]})};var rr=function(){var e=(0,n.useState)(""),t=(0,o.Z)(e,2),r=t[0],a=t[1],s=localStorage.getItem("AstroData"),c=JSON.parse(s),u=(0,n.useState)(c),l=(0,o.Z)(u,2),d=l[0],h=(l[1],(0,n.useState)([])),f=(0,o.Z)(h,2),p=f[0],v=f[1],g=(0,i.s0)(),m=(0,n.useState)(""),y=(0,o.Z)(m,2);y[0],y[1],(0,n.useEffect)((function(){R()}),[]);var b=(0,n.useState)([]),_=(0,o.Z)(b,2),E=_[0],S=_[1],w=(0,n.useState)((function(){var e=localStorage.getItem("_id");return null!=e?JSON.parse(e):[]})),x=(0,o.Z)(w,2),T=x[0];x[1],(0,n.useEffect)((function(){I()}));var I=function(){var e={astrologer_id:null===d||void 0===d?void 0:d._id};Ye.post("http://103.104.74.215:3012/api/astrologer/astrologer_review_list",e).then((function(e){v(e.data.data)}))},R=function(){var e={_id:null===d||void 0===d?void 0:d._id};Ye.post("http://103.104.74.215:3012/api/user/astrologer_list_details/",e).then((function(e){S(e.data.data)}))};(0,n.useEffect)((function(){}),[]),(0,n.useEffect)((function(){R()}),[]);var k=localStorage.getItem("vcdata"),O=JSON.parse(k),C=(0,n.useState)(O),A=(0,o.Z)(C,2),N=A[0],j=(A[1],(0,n.useState)(0)),D=(0,o.Z)(j,2),P=(D[0],D[1]);(0,n.useEffect)((function(){var e=setInterval((function(){P((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}),[]);var L=(0,n.useState)(),M=(0,o.Z)(L,2),U=M[0],V=M[1],F=(0,n.useState)(),B=(0,o.Z)(F,2),G=(B[0],B[1]);(0,n.useEffect)((function(){var e=U/(null===N||void 0===N?void 0:N.video_rate),t=Math.floor(e);G(t)}),[U]),(0,n.useEffect)((function(){q()}),[,U,null===N||void 0===N?void 0:N.video_rate]);var q=function(){var e={user_id:localStorage.getItem("iddofuser")};Ye.post("http://103.104.74.215:3012/api/user/get_wallet_user",e).then((function(e){return V(e.data.data.ammount)}))};return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsxs)("div",{class:"col-12",children:[(0,Je.jsx)("div",{class:"breadscrumb-contain",children:(0,Je.jsx)("h2",{children:"Talk with Astrologer"})}),(0,Je.jsx)("font",{style:{color:"blue"},children:r&&(0,Je.jsx)("p",{children:r})})]})})})}),(0,Je.jsx)("section",{class:"product-section",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsxs)("div",{class:"row g-4",children:[(0,Je.jsx)("div",{class:"col-xl-4",style:{border:"1 solid #dfdfdf",borderRadius:20,marginRight:"3%",background:"linear-gradient(45deg, #8b6704, #493939)"},children:(0,Je.jsx)("div",{class:"product-left-box",children:(0,Je.jsx)("div",{class:"row g-sm-6 g-2",children:(0,Je.jsxs)("div",{class:"product-box-4",style:{background:"linear-gradient(45deg, #8b6704, #493939)",height:400},children:[(0,Je.jsxs)("div",{class:"grid-image",children:[(0,Je.jsx)("div",{class:"image",children:(0,Je.jsx)("img",{src:"http://103.104.74.215:3012/uploads/"+d.profile_pic,class:"img-fluid",alt:"",style:{borderRadius:"100%",height:180,width:180}})}),(0,Je.jsx)("div",{class:"contain-name",children:(0,Je.jsxs)("div",{children:[(0,Je.jsxs)("h4",{style:{color:"white"},children:[null===d||void 0===d?void 0:d.name," "]}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{style:{color:"white"},children:null===d||void 0===d?void 0:d.role})}),(0,Je.jsx)("br",{})]})})]}),(0,Je.jsx)("br",{}),"1"===E.call_status?(0,Je.jsxs)("div",{style:{width:"100%",height:50,display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-evenly"},children:[(0,Je.jsxs)("div",{onClick:function(){U>=E.audio_rate?function(e){var t=U/e,n=Math.floor(t);localStorage.setItem("totalminute",n);var r=localStorage.getItem("vcidddata"),i={user_id:T,astrologer_id:r,channel_name:"test",final_time:n.toString(),type:"audio"};console.log("userdayaaaaa",i),localStorage.setItem("totalminute",n),Ye.post("http://103.104.74.215:3012/api/user/generate_agrora_token_audio_calling",i).then((function(e){console.log(" dataaa",e),e.data.result&&(localStorage.setItem("videoatro_token",e.data.token),localStorage.setItem("channel_token",e.data.channel_name),setTimeout((function(){g("/Audiocall")}),1e3))})).catch((function(e){e.response&&400===e.response.status?a("Astrologer Busy on Another call"):a("An error occurred. Please try again later.")}))}(E.audio_rate):alert("You have Insufficient balance"),localStorage.setItem("vcdata",JSON.stringify(E)),localStorage.setItem("vcidddata",E._id),localStorage.setItem("videorate",E.audio)},style:{width:"45%",border:"1px solid #ffcc00",display:"flex",justifyContent:"space-between",flexDirection:"row",alignItems:"center",borderRadius:50,padding:5},children:[(0,Je.jsx)("h4",{style:{color:"white"},children:"Calling"}),(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/calling.png",class:"img-fluid",alt:"",style:{height:35}})]}),(0,Je.jsxs)("div",{onClick:function(){U>E.chat_rate?g("/ChatForm"):alert("You have Insufficient balance"),localStorage.setItem("chatdata",JSON.stringify(E))},style:{width:"45%",border:"1px solid #ffcc00",display:"flex",justifyContent:"space-between",flexDirection:"row",alignItems:"center",borderRadius:50,padding:5},children:[(0,Je.jsx)("h4",{style:{color:"white"},children:"Chat"}),(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:35,marginLeft:10}})]}),(0,Je.jsxs)("div",{onClick:function(){U>=E.video_rate?function(e){var t=U/e,n=Math.floor(t);localStorage.setItem("totalminute",n);var r=localStorage.getItem("vcidddata"),i={user_id:T,astrologer_id:r,final_time:n.toString(),type:"video"};console.log("userdayaaaaa",i),localStorage.setItem("totalminute",n),Ye.post("http://103.104.74.215:3012/api/user/generate_agrora_token_calling",i).then((function(e){console.log(" dataaa",e),e.data.result&&(localStorage.setItem("videoatro_token",e.data.token),localStorage.setItem("channel_token",e.data.channel_name),setTimeout((function(){g("/VideoCall")}),1e3))})).catch((function(e){e.response&&400===e.response.status?a("Astrologer Busy on Another call"):a("An error occurred. Please try again later.")}))}(E.video_rate):alert("You have Insufficient balance"),localStorage.setItem("vcdata",JSON.stringify(E)),localStorage.setItem("vcidddata",E._id),localStorage.setItem("videorate",E.video_rate)},style:{width:"80%",border:"1px solid #ffcc00",display:"flex",justifyContent:"space-between",flexDirection:"row",alignItems:"center",borderRadius:50,padding:5},children:[(0,Je.jsx)("h4",{style:{color:"white"},children:"Video Call"}),(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/calling.png",class:"img-fluid",alt:"",style:{height:35}})]})]}):(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/calling.png",class:"img-fluid",alt:"",style:{height:"25px",background:"#d99f46",borderRadius:"50px"}})]})})})}),(0,Je.jsx)("div",{class:"col-xl-7",style:{padding:"3%",borderRadius:20,border:"1 solid #dfdfdf"},children:(0,Je.jsxs)("div",{class:"right-box-contain p-sticky wow fadeInUp",children:[(0,Je.jsxs)("h2",{class:"name_of_astrologer",children:[d.name," ",(0,Je.jsx)("span",{class:"famous_icon",children:(0,Je.jsx)("img",{alt:"verified",loading:"lazy",height:"20",width:"20",src:"https://d1gcna0o0ldu5v.cloudfront.net/fit-in/20x20/assets/images/astrologer_profile/verified.webp"})})]}),(0,Je.jsx)("p",{class:"name",children:d.role}),(0,Je.jsx)("p",{class:"name",children:d.language}),(0,Je.jsxs)("div",{class:"experience_astrologer",children:[(0,Je.jsx)("i",{class:"fa fa-graduation-cap"})," Exp:"," ",d.experiance_year," "]}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("h3",{class:"theme-color price",children:[(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/phone.png",class:"img-fluid",alt:"",style:{height:25}}),"\u20b9 ",d.video_rate,"/Min"]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("div",{class:"price-rating",children:(0,Je.jsxs)("div",{class:"product-rating custom-rate",children:[(0,Je.jsxs)("ul",{class:"rating",children:[(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{style:{color:"gold"},class:"fa fa-star","aria-hidden":"true"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{style:{color:"gold"},class:"fa fa-star","aria-hidden":"true"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{style:{color:"gold"},class:"fa fa-star","aria-hidden":"true"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{style:{color:"gold"},class:"fa fa-star","aria-hidden":"true"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{style:{color:"gold"},class:"fa fa-star-o","aria-hidden":"true"})})]}),(0,Je.jsxs)("span",{class:"review",children:[d.review," Customer Review"]})]})}),(0,Je.jsx)("div",{class:"procuct-contain",children:(0,Je.jsx)("p",{children:d.description})})]})}),(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsxs)("div",{class:"product-section-box",children:[(0,Je.jsx)("ul",{class:"nav nav-tabs",children:(0,Je.jsx)("li",{class:"nav-item",role:"presentation",children:(0,Je.jsx)("button",{class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#review",type:"button",role:"tab","aria-controls":"review","aria-selected":"false",children:"Review"})})}),(0,Je.jsx)("div",{class:"tab-content custom-tab",id:"myTabContent",children:(0,Je.jsx)("div",{class:"",id:"review",role:"tabpanel","aria-labelledby":"review-tab",children:(0,Je.jsx)("div",{class:"review-box",children:(0,Je.jsxs)("div",{class:"row g-4",children:[(0,Je.jsx)("div",{class:"col-xl-6"}),(0,Je.jsxs)("div",{class:"col-12",children:[(0,Je.jsx)("div",{class:"review-title",children:(0,Je.jsx)("h4",{class:"fw-500",children:"Customer questions & answers"})}),(0,Je.jsx)("div",{class:"review-people",children:null===p||void 0===p?void 0:p.map((function(e){return(0,Je.jsx)("ul",{class:"review-list",children:(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{class:"people-box",children:[(0,Je.jsx)("div",{children:(0,Je.jsx)("div",{class:"people-image",children:e.user_data.user_pic?(0,Je.jsx)("img",{src:"http://103.104.74.215:3012/uploads/"+(null===e||void 0===e?void 0:e.user_data.user_pic),class:"img-fluid blur-up lazyload",alt:""}):(0,Je.jsx)("img",{src:"../favicon.jpg",class:"img-fluid blur-up lazyload",alt:"logo"})})}),(0,Je.jsxs)("div",{class:"people-comment",children:[(0,Je.jsx)("a",{class:"name",href:"javascript:void(0)",children:null===e||void 0===e?void 0:e.user_data.name}),(0,Je.jsxs)("div",{class:"date-time",children:[(0,Je.jsx)("h6",{class:"text-content",children:null===e||void 0===e?void 0:e.current_date}),(0,Je.jsx)("div",{class:"product-rating",children:(0,Je.jsxs)("ul",{class:"rating",children:[(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star"})})]})})]}),(0,Je.jsx)("div",{class:"reply",children:(0,Je.jsxs)("p",{children:["Icing cookie carrot cake chocolate cake sugar plum jelly-o danish. Drag\xe9e drag\xe9e shortbread tootsie roll croissant muffin cake I love gummi bears. Candy canes ice cream caramels tiramisu marshmallow cake shortbread candy canes cookie.",(0,Je.jsx)("a",{href:"javascript:void(0)",children:"Reply"})]})})]})]})})})}))})]})]})})})})]})})]})})}),(0,Je.jsx)("div",{class:"modal location-modal fade theme-modal",id:"locationModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:"Choose your Delivery Location"}),(0,Je.jsx)("p",{class:"mt-1 text-content",children:"Enter your address and we will specify the offer for your area."}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsxs)("div",{class:"location-list",children:[(0,Je.jsxs)("div",{class:"search-input",children:[(0,Je.jsx)("input",{type:"search",class:"form-control",placeholder:"Search Your Area"}),(0,Je.jsx)("i",{class:"fa-solid fa-magnifying-glass"})]}),(0,Je.jsx)("div",{class:"disabled-box",children:(0,Je.jsx)("h6",{children:"Select a Location"})}),(0,Je.jsxs)("ul",{class:"location-select custom-height",children:[(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Alabama"}),(0,Je.jsx)("span",{children:"Min: $130"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Arizona"}),(0,Je.jsx)("span",{children:"Min: $150"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"California"}),(0,Je.jsx)("span",{children:"Min: $110"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Colorado"}),(0,Je.jsx)("span",{children:"Min: $140"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Florida"}),(0,Je.jsx)("span",{children:"Min: $160"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Georgia"}),(0,Je.jsx)("span",{children:"Min: $120"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Kansas"}),(0,Je.jsx)("span",{children:"Min: $170"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Minnesota"}),(0,Je.jsx)("span",{children:"Min: $120"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"New York"}),(0,Je.jsx)("span",{children:"Min: $110"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Washington"}),(0,Je.jsx)("span",{children:"Min: $130"})]})})]})]})})]})})}),(0,Je.jsx)("div",{class:"modal fade theme-modal view-modal",id:"view",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-xl modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsx)("div",{class:"modal-header p-0",children:(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsxs)("div",{class:"row g-sm-4 g-2",children:[(0,Je.jsx)("div",{class:"col-lg-6",children:(0,Je.jsx)("div",{class:"slider-image",children:(0,Je.jsx)("img",{src:"../assets/images/product/category/1.jpg",class:"img-fluid blur-up lazyload",alt:""})})}),(0,Je.jsx)("div",{class:"col-lg-6",children:(0,Je.jsxs)("div",{class:"right-sidebar-modal",children:[(0,Je.jsx)("h4",{class:"title-name",children:"Peanut Butter Bite Premium Butter Cookies 600 g"}),(0,Je.jsx)("h4",{class:"price",children:"$36.99"}),(0,Je.jsxs)("div",{class:"product-rating",children:[(0,Je.jsxs)("ul",{class:"rating",children:[(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star",class:"fill"})}),(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{"data-feather":"star"})})]}),(0,Je.jsx)("span",{class:"ms-2",children:"8 Reviews"}),(0,Je.jsx)("span",{class:"ms-2 text-danger",children:"6 sold in last 16 hours"})]}),(0,Je.jsxs)("div",{class:"product-detail",children:[(0,Je.jsx)("h4",{children:"Product Details :"}),(0,Je.jsx)("p",{children:"Candy canes sugar plum tart cotton candy chupa chups sugar plum chocolate I love. Caramels marshmallow icing dessert candy canes I love souffl\xe9 I love toffee. Marshmallow pie sweet sweet roll sesame snaps tiramisu jelly bear claw. Bonbon muffin I love carrot cake sugar plum dessert bonbon."})]}),(0,Je.jsxs)("ul",{class:"brand-list",children:[(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{class:"brand-box",children:[(0,Je.jsx)("h5",{children:"Brand Name:"}),(0,Je.jsx)("h6",{children:"Black Forest"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{class:"brand-box",children:[(0,Je.jsx)("h5",{children:"Product Code:"}),(0,Je.jsx)("h6",{children:"W0690034"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{class:"brand-box",children:[(0,Je.jsx)("h5",{children:"Product Type:"}),(0,Je.jsx)("h6",{children:"White Cream Cake"})]})})]}),(0,Je.jsxs)("div",{class:"select-size",children:[(0,Je.jsx)("h4",{children:"Cake Size :"}),(0,Je.jsxs)("select",{class:"form-select select-form-size",children:[(0,Je.jsx)("option",{selected:!0,children:"Select Size"}),(0,Je.jsx)("option",{value:"1.2",children:"1/2 KG"}),(0,Je.jsx)("option",{value:"0",children:"1 KG"}),(0,Je.jsx)("option",{value:"1.5",children:"1/5 KG"}),(0,Je.jsx)("option",{value:"red",children:"Red Roses"}),(0,Je.jsx)("option",{value:"pink",children:"With Pink Roses"})]})]}),(0,Je.jsxs)("div",{class:"modal-button",children:[(0,Je.jsx)("button",{onclick:"location.href = 'cart.html';",class:"btn btn-md add-cart-button icon",children:"Add To Cart"}),(0,Je.jsx)("button",{onclick:"location.href = 'product-left.html';",class:"btn theme-bg-color view-button icon text-white fw-bold btn-md",children:"View More Details"})]})]})})]})})]})})}),(0,Je.jsx)("div",{class:"modal fade theme-modal deal-modal",id:"deal-box",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h5",{class:"modal-title w-100",id:"deal_today",children:"Deal Today"}),(0,Je.jsx)("p",{class:"mt-1 text-content",children:"Recommended deals for you."})]}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsx)("div",{class:"deal-offer-box",children:(0,Je.jsxs)("ul",{class:"deal-offer-list",children:[(0,Je.jsx)("li",{class:"list-1",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/10.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})}),(0,Je.jsx)("li",{class:"list-2",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/11.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})}),(0,Je.jsx)("li",{class:"list-3",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/12.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})}),(0,Je.jsx)("li",{class:"list-1",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/13.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})})]})})})]})})}),(0,Je.jsxs)("div",{class:"add-cart-box",children:[(0,Je.jsx)("div",{class:"add-iamge",children:(0,Je.jsx)("img",{src:"../assets/images/cake/pro/1.jpg",class:"img-fluid blur-up lazyload",alt:""})}),(0,Je.jsx)("div",{class:"add-contain",children:(0,Je.jsx)("h6",{children:"Added to Cart"})})]}),(0,Je.jsxs)("div",{class:"theme-option",children:[(0,Je.jsxs)("div",{class:"setting-box",children:[(0,Je.jsx)("button",{class:"btn setting-button",children:(0,Je.jsx)("i",{class:"fa-solid fa-gear"})}),(0,Je.jsx)("div",{class:"theme-setting-2",children:(0,Je.jsx)("div",{class:"theme-box",children:(0,Je.jsxs)("ul",{children:[(0,Je.jsxs)("li",{children:[(0,Je.jsx)("div",{class:"setting-name",children:(0,Je.jsx)("h4",{children:"Color"})}),(0,Je.jsx)("div",{class:"theme-setting-button color-picker",children:(0,Je.jsxs)("form",{class:"form-control",children:[(0,Je.jsx)("label",{for:"colorPick",class:"form-label mb-0",children:"Theme Color"}),(0,Je.jsx)("input",{type:"color",class:"form-control form-control-color",id:"colorPick",value:"#d99f46",title:"Choose your color"})]})})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("div",{class:"setting-name",children:(0,Je.jsx)("h4",{children:"Dark"})}),(0,Je.jsxs)("div",{class:"theme-setting-button",children:[(0,Je.jsx)("button",{class:"btn btn-2 outline",id:"darkButton",children:"Dark"}),(0,Je.jsx)("button",{class:"btn btn-2 unline",id:"lightButton",children:"Light"})]})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("div",{class:"setting-name",children:(0,Je.jsx)("h4",{children:"RTL"})}),(0,Je.jsxs)("div",{class:"theme-setting-button rtl",children:[(0,Je.jsx)("button",{class:"btn btn-2 rtl-unline",children:"LTR"}),(0,Je.jsx)("button",{class:"btn btn-2 rtl-outline",children:"RTL"})]})]})]})})})]}),(0,Je.jsx)("div",{class:"back-to-top",children:(0,Je.jsx)("a",{id:"back-to-top",href:"#",children:(0,Je.jsx)("i",{class:"fas fa-chevron-up"})})})]}),(0,Je.jsx)(Ze.default,{})]})};var ir=function(){(0,i.s0)();var e=(0,i.s0)(),t=(0,n.useState)([]),r=(0,o.Z)(t,2),s=r[0],c=r[1];(0,n.useEffect)((function(){u()}),[]);var u=function(){Ye.get("http://103.104.74.215:3012/api/user/astrologer_live_list").then((function(e){e.data.result&&c(e.data.data)}))};return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"section-b-space shop-section",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsxs)("div",{class:"col-12",children:[(0,Je.jsx)("div",{class:"show-button",children:(0,Je.jsx)("div",{class:"top-filter-menu-2",children:(0,Je.jsx)("div",{class:"sidebar-filter-menu","data-bs-toggle":"collapse","data-bs-target":"#collapseExample",children:(0,Je.jsxs)(a.rU,{to:"#",children:[(0,Je.jsx)("i",{class:"fa-solid fa-house"})," Join On Live With Astrologer"]})})})}),(0,Je.jsxs)("div",{class:"row g-sm-4 g-3",children:[" ",null===s||void 0===s?void 0:s.map((function(t){return(0,Je.jsx)("div",{class:"col-xl-6 col-sm-6",style:{width:""},children:(0,Je.jsxs)("div",{class:"seller-grid-box seller-grid-box-1",children:[(0,Je.jsxs)("div",{class:"grid-image",onClick:function(){localStorage.setItem("liveData",JSON.stringify(t)),e("/Streaming")},children:[(0,Je.jsx)("div",{class:"image",children:(0,Je.jsx)("img",{src:"http://103.104.74.215:3012/uploads/"+t.astrologer_data.profile_pic,class:"img-fluid",alt:"",style:{height:"55px",width:"55px",borderRadius:"100%"}})}),(0,Je.jsx)("div",{class:"contain-name",children:(0,Je.jsxs)("div",{children:[(0,Je.jsxs)("h4",{style:{color:"black"},children:[t.astrologer_data.name," "]}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{style:{color:"black"},children:"Spiritual Guidance"})}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("button",{onClick:function(){localStorage.setItem("liveData",JSON.stringify(t)),e("/Streaming")},class:"nav-item",style:{borderRadius:"15px",width:"60px",height:"30px",boxShadow:"1px",marginTop:"-30px"},children:["Live",(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{class:"fa-solid fa-circle",style:{width:"10px",color:"green"}})})]})]})})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("div",{class:"grid-contain",style:{width:"100%"},children:(0,Je.jsx)("div",{class:"seller-contact-details",children:(0,Je.jsxs)("div",{class:"saller-contact",style:{},children:[(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/calling.png",class:"img-fluid",alt:"",style:{height:"25px"}})}),(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:"25px",marginLeft:"10px"}})}),(0,Je.jsx)(a.rU,{to:"#",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:" 25px",marginLeft:"10px"}})})]})})})]})})}))]})]})})})}),(0,Je.jsx)(Ze.default,{})]})},or=__webpack_require__(6710);var ar=function(){var e=localStorage.getItem("pujaDet"),t=JSON.parse(e),r=(0,n.useState)(t),i=(0,o.Z)(r,2),a=i[0],s=(i[1],(0,n.useState)(a.file[1])),c=(0,o.Z)(s,2),u=c[0];return c[1],(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsxs)("div",{class:"breadscrumb-contain",children:[(0,Je.jsx)("div",{}),(0,Je.jsx)("h2",{children:"Puja Details Page"})]})})})})}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-sm-4 g-3",children:(0,Je.jsxs)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 ratio_50",children:[(0,Je.jsxs)("div",{class:"blog-detail-image rounded-3 mb-4",style:{display:"flex",justifyContent:"center"},children:[u?(0,Je.jsx)(or.Z,{volume:1,url:"http://103.104.74.215:3012/uploads/"+u,controls:!0,playing:!0,width:"100%",height:"auto"}):(0,Je.jsx)("p",{children:"Loading video..."}),(0,Je.jsxs)("div",{class:"blog-image-contain",children:[(0,Je.jsx)("h2",{children:a.title}),(0,Je.jsx)("ul",{class:"contain-comment-list",children:(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{class:"user-list",children:[(0,Je.jsx)("i",{"data-feather":"calendar"}),(0,Je.jsx)("span",{children:function(e){var t=new Date(e),n=t.getDate(),r=t.getMonth()+1,i=t.getFullYear(),o=t.getHours(),a=o>12?o-12:o,s=t.getMinutes(),c=o>12?"PM":"AM",u=s<10?0:"";return"".concat(n+"/"+r+"/"+i,"       ").concat(a,":").concat(u).concat(s).concat(c)}(a.current_date)})]})})})]})]}),(0,Je.jsx)("div",{class:"blog-detail-contain",children:(0,Je.jsx)("p",{children:a.description})})]})})})}),(0,Je.jsx)(Ze.default,{})]})},sr=__webpack_require__(4334),cr=__webpack_require__.n(sr);var ur=function(){var e,t,r,a,s=(0,i.s0)();(0,n.useEffect)((function(){y()}),[]);var c=(0,n.useState)(),u=(0,o.Z)(c,2),l=u[0],d=u[1],h=localStorage.getItem("liveData"),f=JSON.parse(h),p=(0,n.useState)(f),v=(0,o.Z)(p,1)[0],g=(0,n.useState)((function(){var e=localStorage.getItem("_id");return null!=e?JSON.parse(e):[]})),m=(0,o.Z)(g,1)[0],y=function(){var e={user_id:m,token:v.token,channel_name:v.channel_name};Ye.post("http://103.104.74.215:3012/api/user/add_live_user",e).then((function(e){return console.log(e)}))},b={client:null,joined:!1,published:!1,localStream:null,remoteStreams:[],params:{}},_={appID:v.app_id,channel:v.channel_name,uid:null,token:v.token};(0,n.useEffect)((function(){b.client=cr().createClient({mode:"live",codec:"h264"}),b.client.init(_.appID,(function(){console.log("init success"),b.client.join(_.token?_.token:null,_.channel,_.uid?+_.uid:null,(function(e){console.log("join channel: "+_.channel+" success, uid: "+e),b.params.uid=e,b.client.on("connection-state-change",(function(e){console.log("audience",e)})),b.client.on("stream-added",(function(e){var t=e.stream,n=t.getId();n!==b.params.uid&&b.client.subscribe(t,(function(e){console.log("stream subscribe failed",e)})),console.log("stream-added remote-uid: ",n)})),b.client.on("stream-removed",(function(e){var t=e.stream.getId();console.log("stream-removed remote-uid: ",t)})),b.client.on("stream-subscribed",(function(e){var t=e.stream,n=t.getId();t.play("remote_video_"),console.log("stream-subscribed remote-uid: ",n)})),b.client.on("stream-unsubscribed",(function(e){var t=e.stream,n=t.getId();t.pause("remote_video_"),console.log("stream-unsubscribed remote-uid: ",n)}))}),(function(e){console.error("client join failed",e)}))}),(function(e){console.error(e)}))}),[]);var E=(0,n.useState)(""),S=(0,o.Z)(E,2),w=S[0],x=S[1];(0,n.useEffect)((function(){I()}),[]);var T=function(){var e={user_id:m,astrologer_id:v._id,msg:w};Ye.post("http://103.104.74.215:3012/api/user/add_live_comment",e).then((function(){I()}))};(0,n.useEffect)((function(){I()}),[]);var I=function(){var e={astrologer_id:v._id};Ye.post("http://103.104.74.215:3012/api/astrologer/get_live_comment_list",e).then((function(e){d(e.data.data)}))};return(0,Je.jsx)("div",{style:{width:"100%",height:"100vh",backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Je.jsxs)("div",{style:{width:"75%",height:"90vh",backgroundColor:"white",borderRadius:15,display:"flex",justifyContent:"center"},children:[(0,Je.jsxs)("button",{style:{width:80,height:40,backgroundColor:"black",alignSelf:"flex-start",color:"white",borderRadius:10,marginTop:25,marginRight:-85,zIndex:20},children:[(0,Je.jsx)("i",{class:"fa fa-eye","aria-hidden":"true"}),"\xa0 ",(0,Je.jsx)("i",{onClick:function(){var e={user_id:m,token:v.token,channel_name:v.channel_name};console.log("itemeemem",e),Ye.post("http://103.104.74.215:3012/api/user/remove_live_user",e).then((function(e){s("/"),console.log("sadasdasdadadasdad",e)}))},style:{marginTop:"",fontSize:25,color:"white",cursor:"pointer"},class:"fa fa-times","aria-hidden":"true"})]}),(0,Je.jsx)("div",{id:"remote_video_",style:{width:"48%",height:"95%",borderRadius:15,backgroundRepeat:"no-repeat",marginRight:"1%",marginTop:"1.5%"}}),(0,Je.jsxs)("div",{style:{width:"48%",height:"100%"},children:[(0,Je.jsxs)("div",{style:{width:"100%",height:"20%",backgroundColor:"rgba(0,0,0,0.03)"},children:[(0,Je.jsx)("img",{style:{width:70,height:70,borderRadius:"100%",padding:10},src:"http://103.104.74.215:3012/uploads/"+(null===v||void 0===v||null===(e=v.astrologer_data)||void 0===e?void 0:e.profile_pic)}),(0,Je.jsx)("br",{}),(0,Je.jsx)("h5",{style:{paddingLeft:10,fontWeight:"bolder",fontSize:20},children:null===(t=v.astrologer_data)||void 0===t?void 0:t.name}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("h5",{children:[null===(r=v.astrologer_data)||void 0===r?void 0:r.role," ",null===(a=v.astrologer_data)||void 0===a?void 0:a.experiance_year]}),(0,Je.jsx)("br",{})]}),(0,Je.jsx)("div",{style:{height:"60%",width:"100%",overflowY:"scroll",backgroundColor:"rgba(0,0,0,0.03)"},children:null===l||void 0===l?void 0:l.map((function(e){return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("label",{style:{width:"100%",height:50,paddingLeft:5},children:e.msg})})}))}),(0,Je.jsxs)("div",{style:{height:"20%",width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},children:[(0,Je.jsx)("input",{name:"msg",value:w,onChange:function(e){x(e.target.value)},placeholder:"say hi...",style:{height:50,width:"80%",border:"none"}}),(0,Je.jsx)("i",{onClick:function(){T(),x("")},style:{fontSize:25},class:"fa fa-paper-plane","aria-hidden":"true"})]})]})]})})};var lr=function(){return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsxs)("div",{class:"breadscrumb-contain",children:[(0,Je.jsx)("h2",{children:"Blog Details Page"}),(0,Je.jsx)("nav",{children:(0,Je.jsxs)("ol",{class:"breadcrumb mb-0",children:[(0,Je.jsx)("li",{class:"breadcrumb-item",children:(0,Je.jsx)("a",{href:"index-2.html",children:(0,Je.jsx)("i",{class:"fa-solid fa-house"})})}),(0,Je.jsx)("li",{class:"breadcrumb-item","aria-current":"page",children:"Blog"}),(0,Je.jsx)("li",{class:"breadcrumb-item active","aria-current":"page",children:"Blog Details"})]})})]})})})})}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-sm-4 g-3",children:(0,Je.jsxs)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 ratio_50",children:[(0,Je.jsxs)("div",{class:"blog-detail-image rounded-3 mb-4",children:[(0,Je.jsx)("img",{style:{width:"100%"},src:"../assets/images/inner-page/blog/3.jpg",class:"bg-img blur-up lazyload",alt:""}),(0,Je.jsxs)("div",{class:"blog-image-contain",children:[(0,Je.jsx)("h2",{children:"Vedic Astrology"}),(0,Je.jsx)("ul",{class:"contain-comment-list",children:(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{class:"user-list",children:[(0,Je.jsx)("i",{"data-feather":"calendar"}),(0,Je.jsx)("span",{children:"20 FEG, 2023"})]})})})]})]}),(0,Je.jsxs)("div",{class:"blog-detail-contain",children:[(0,Je.jsxs)("p",{children:[(0,Je.jsx)("span",{class:"first",children:"V"}),"edic astrology is founded on the idea that the stars and planets have a significant impact on our life. Vedic astrology has its roots in the Vedas, an ancient body of knowledge from India."]}),(0,Je.jsx)("p",{children:"Hindu scriptures hold that the purpose of life is to advance one's spirituality. This development is helped in part by the idea of karma, which holds that every thought and deed has an equal and opposite reaction."}),(0,Je.jsx)("p",{children:"Astrology is a way to comprehend one's karma by examining planets placements, according to the Vedas, which claim that a person's karma is directly tied to the location of the planets and stars. Vedic astrology intends to offer direction to people who are lost or bewildered."}),(0,Je.jsx)("p",{children:"In a family of signs they will keep occurring in pairs, coinciding with new moons and full moons. Once a family of sign is finished it will not be back for about seven or eight years."}),(0,Je.jsx)("p",{children:'Astrology, sometimes known as the "science of fate," is used to comprehend all facets of life, including the likelihood that a specific endeavour\u2014such as marriage, relocating to a new home, or starting a business\u2014will be successful in the future. It was also utilised in the past to forecast the results of wartime battles or a specific political choice. Because of this, kings frequently hired astrologers to provide them more insight into how they should administer their countries.'}),(0,Je.jsx)("p",{children:"Everyone and everything is governed by time, as stated in the Vedas. Individuals are forced to pass through several stages of existence under its influence before dying and being propelled into the next life, the state of which is decided by their total amount of karma."}),(0,Je.jsx)("p",{children:"Modern science holds that time and space are woven together to form the space-time fabric that supports our existence. Planets and other large objects have an impact on this fabric, which affects everything nearby."}),(0,Je.jsx)("p",{children:"Dharma:-"}),(0,Je.jsx)("b",{children:"Lunar eclipses are particularly upsetting since they usher in final conclusions."}),(0,Je.jsx)("p",{children:"It can be summed up as the behaviour that is most supportive to spiritual development. A person's life has meaning, purpose, and honour when they live up to their dharma."}),(0,Je.jsx)("b",{children:"Kama:-"}),(0,Je.jsx)("p",{children:'Kama, which is translated as "desire," alludes to the need for both sensory and emotional contentment. Every being seeks happiness in some way, and they should do so without hurting themselves or others.'}),(0,Je.jsx)("b",{children:"Artha:-"}),(0,Je.jsx)("p",{children:'Even while the word "artha" means "goal" or "purpose," it actually refers more explicitly to acquiring riches or a sense of security. A person has to have the required resources and riches in order to achieve their goals and feel the happiness that comes with doing so.'}),(0,Je.jsx)("b",{children:"Moksha:-"}),(0,Je.jsx)("p",{children:'Moksha, which translates as "liberation," is the ultimate objective and refers to a person\'s spiritual growth leading to their eventual release from the cycle of birth and death.'}),(0,Je.jsx)("p",{children:"Vedic astrology serves as our karma's road map. It enables us to navigate our life in a way that satisfies these four objectives by giving us a more clear understanding of our own character and destiny. But ultimately, it's about assisting us in achieving moksha, the ultimate objective of moksha, through our spiritual growth. By examining our horoscopes, we can have a greater understanding of the energies that are influencing us and how to effectively react to them, frequently through spiritual practises like chanting or ritual worship, which will aid in our spiritual development."})]})]})})})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",style:{paddingBottom:20},children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsxs)("div",{class:"banner-contain hover-effect",style:{},children:[(0,Je.jsx)("img",{style:{width:"100%",boxShadow:"0px 0px 10px"},src:"../assets/images/cake/banner/4.jpg",class:"bg-img blur-up lazyload",alt:""}),(0,Je.jsx)("div",{class:"banner-details p-center p-sm-4 p-3 text-white text-center",style:{height:90}})]})})})})}),(0,Je.jsx)(Ze.default,{})]})};var dr=function(){return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsxs)("div",{class:"breadscrumb-contain",children:[(0,Je.jsx)("h2",{children:"Blog Details Page"}),(0,Je.jsx)("nav",{children:(0,Je.jsxs)("ol",{class:"breadcrumb mb-0",children:[(0,Je.jsx)("li",{class:"breadcrumb-item",children:(0,Je.jsx)("a",{href:"index-2.html",children:(0,Je.jsx)("i",{class:"fa-solid fa-house"})})}),(0,Je.jsx)("li",{class:"breadcrumb-item","aria-current":"page",children:"Blog"}),(0,Je.jsx)("li",{class:"breadcrumb-item active","aria-current":"page",children:"Blog Details"})]})})]})})})})}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-sm-4 g-3",children:(0,Je.jsxs)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 ratio_50",children:[(0,Je.jsxs)("div",{class:"blog-detail-image rounded-3 mb-4",children:[(0,Je.jsx)("img",{style:{width:"100%"},src:"../assets/images/inner-page/blog/4.jpg",class:"bg-img blur-up lazyload",alt:""}),(0,Je.jsxs)("div",{class:"blog-image-contain",children:[(0,Je.jsx)("h2",{children:"Navagrahas: The planets in Astrology"}),(0,Je.jsx)("ul",{class:"contain-comment-list",children:(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{class:"user-list",children:[(0,Je.jsx)("i",{"data-feather":"calendar"}),(0,Je.jsx)("span",{children:"20 FEG, 2023"})]})})})]})]}),(0,Je.jsxs)("div",{class:"blog-detail-contain",children:[(0,Je.jsxs)("p",{children:[(0,Je.jsx)("span",{class:"first",children:"V"}),"edic astrology is an ancient Indian practise that uses the positions of the planets and stars to forecast people's futures."]}),(0,Je.jsx)("p",{children:"Astrology, which has its roots in the Vedas, a body of holy Hindu books, is still widely used today. In fact, many Hindus will contact an astrologer before embarking on any significant life endeavour or when they are going through a particularly trying time."}),(0,Je.jsx)("p",{children:"Along with outlining a person's overall temperament and destiny, a Vedic astrologer will frequently suggest corrective actions that can be taken to lessen the impact of upcoming unfavourable events. These procedures typically centre on practising puja (worship) to a specific planet, among other things."}),(0,Je.jsx)("p",{children:"It is crucial to comprehend how the planets are viewed from a Vedic and astrological perspective in order to comprehend why Hindus in the twenty-first century would truly take seriously the idea of worshipping planets in order to improve their life's position."}),(0,Je.jsxs)("p",{children:["Each specific chapter of our lives is impacted by the planets. be a result of the way they capture and shape life, planets are referred to be grahas."," "]}),(0,Je.jsx)("p",{children:"Vedic astrology is concerned with nine grahas, collectively known as the navagrahas, where nava is the number nine. Along with the sun (Surya), moon (Chandra), Mars (Mangala), Mercury (Buddha), Jupiter (Brihaspati), Venus (Shukra), Saturn (Shani), Rahu (moon's north node), and Ketu (moon's south node), these are the planetary bodies that make up the zodiac.The tiny grahas Rahu and Ketu have no tangible mass. They stand in for the two locations in space where the sun's and moon's orbits converge. Rahu and Ketu are frequently referred to as \"shadow planets,\" and are typically indicative of negative influences, because eclipses block light and take place in relation to the nodes."}),(0,Je.jsx)("p",{children:"Each graha, according to the Vedas, represents a specific facet of existence and is governed by a different deity. The personalities that underlie the grahas are separate for providing and upholding the various conditions of a person's life."}),(0,Je.jsx)("p",{children:"Spiritual development is the ultimate goal of life. This development is made possible by karma, the Hindu idea that every thought and deed has an equal and opposite reaction."}),(0,Je.jsx)("p",{children:"In the cycle of birth and death, people experience karma over a number of lives and are presented with the lessons they need to learn in order to advance."}),(0,Je.jsxs)("p",{children:["Since the navagrahas' deities are in charge of teaching us these teachings, they are crucial to facilitating our spiritual development."," "]}),(0,Je.jsxs)("p",{children:["Shukra, for instance, is the one who rules Venus. Venus typically signifies the wife in a man's horoscope, among other things. Consequently, a poorly situated Venus can frequently portend marital issues or even difficulties finding a mate."," "]}),(0,Je.jsx)("p",{children:"A man may be having trouble finding a companion because, perhaps in a previous life, he took his wife and marriage for granted. The astrologer can advise the male to make some sort of ritual to please Shukra into reducing the negative marital karma after observing a poorly placed Venus."}),(0,Je.jsxs)("p",{children:["Life is ultimately intended for one's spiritual development, as was previously said. Divinity is not seeking retribution by making it difficult for you to locate a romantic partner. It's to make someone more aware of how valuable a companion like that is."," "]}),(0,Je.jsx)("p",{children:"Therefore, one should not consider difficulties to be simply obstacles in the way of hedonistic quest. The deities of the grahas should be regarded as venerated instructors of these lessons, and life's challenges should be understood as opportunities for developing spiritual maturity."})]})]})})})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{class:"container-fluid-lg",style:{paddingBottom:20},children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsxs)("div",{class:"banner-contain hover-effect",style:{},children:[(0,Je.jsx)("img",{style:{width:"100%",boxShadow:"0px 0px 10px"},src:"../assets/images/cake/banner/4.jpg",class:"bg-img blur-up lazyload",alt:""}),(0,Je.jsx)("div",{class:"banner-details p-center p-sm-4 p-3 text-white text-center",style:{height:90}})]})})})})}),(0,Je.jsx)("div",{class:"modal location-modal fade theme-modal",id:"locationModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:"Choose your Delivery Location"}),(0,Je.jsx)("p",{class:"mt-1 text-content",children:"Enter your address and we will specify the offer for your area."}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsxs)("div",{class:"location-list",children:[(0,Je.jsxs)("div",{class:"search-input",children:[(0,Je.jsx)("input",{type:"search",class:"form-control",placeholder:"Search Your Area"}),(0,Je.jsx)("i",{class:"fa-solid fa-magnifying-glass"})]}),(0,Je.jsx)("div",{class:"disabled-box",children:(0,Je.jsx)("h6",{children:"Select a Location"})}),(0,Je.jsxs)("ul",{class:"location-select custom-height",children:[(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Alabama"}),(0,Je.jsx)("span",{children:"Min: $130"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Arizona"}),(0,Je.jsx)("span",{children:"Min: $150"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"California"}),(0,Je.jsx)("span",{children:"Min: $110"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Colorado"}),(0,Je.jsx)("span",{children:"Min: $140"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Florida"}),(0,Je.jsx)("span",{children:"Min: $160"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Georgia"}),(0,Je.jsx)("span",{children:"Min: $120"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Kansas"}),(0,Je.jsx)("span",{children:"Min: $170"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Minnesota"}),(0,Je.jsx)("span",{children:"Min: $120"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"New York"}),(0,Je.jsx)("span",{children:"Min: $110"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Washington"}),(0,Je.jsx)("span",{children:"Min: $130"})]})})]})]})})]})})}),(0,Je.jsx)("div",{class:"modal fade theme-modal deal-modal",id:"deal-box",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h5",{class:"modal-title w-100",id:"deal_today",children:"Deal Today"}),(0,Je.jsx)("p",{class:"mt-1 text-content",children:"Recommended deals for you."})]}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsx)("div",{class:"deal-offer-box",children:(0,Je.jsxs)("ul",{class:"deal-offer-list",children:[(0,Je.jsx)("li",{class:"list-1",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/10.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})}),(0,Je.jsx)("li",{class:"list-2",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/11.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})}),(0,Je.jsx)("li",{class:"list-3",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/12.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})}),(0,Je.jsx)("li",{class:"list-1",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/13.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})})]})})})]})})}),(0,Je.jsxs)("div",{class:"theme-option",children:[(0,Je.jsxs)("div",{class:"setting-box",children:[(0,Je.jsx)("button",{class:"btn setting-button",children:(0,Je.jsx)("i",{class:"fa-solid fa-gear"})}),(0,Je.jsx)("div",{class:"theme-setting-2",children:(0,Je.jsx)("div",{class:"theme-box",children:(0,Je.jsxs)("ul",{children:[(0,Je.jsxs)("li",{children:[(0,Je.jsx)("div",{class:"setting-name",children:(0,Je.jsx)("h4",{children:"Color"})}),(0,Je.jsx)("div",{class:"theme-setting-button color-picker",children:(0,Je.jsxs)("form",{class:"form-control",children:[(0,Je.jsx)("label",{for:"colorPick",class:"form-label mb-0",children:"Theme Color"}),(0,Je.jsx)("input",{type:"color",class:"form-control form-control-color",id:"colorPick",value:"#0da487",title:"Choose your color"})]})})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("div",{class:"setting-name",children:(0,Je.jsx)("h4",{children:"Dark"})}),(0,Je.jsxs)("div",{class:"theme-setting-button",children:[(0,Je.jsx)("button",{class:"btn btn-2 outline",id:"darkButton",children:"Dark"}),(0,Je.jsx)("button",{class:"btn btn-2 unline",id:"lightButton",children:"Light"})]})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("div",{class:"setting-name",children:(0,Je.jsx)("h4",{children:"RTL"})}),(0,Je.jsxs)("div",{class:"theme-setting-button rtl",children:[(0,Je.jsx)("button",{class:"btn btn-2 rtl-unline",children:"LTR"}),(0,Je.jsx)("button",{class:"btn btn-2 rtl-outline",children:"RTL"})]})]})]})})})]}),(0,Je.jsx)("div",{class:"back-to-top",children:(0,Je.jsx)("a",{id:"back-to-top",href:"#",children:(0,Je.jsx)("i",{class:"fas fa-chevron-up"})})})]}),(0,Je.jsx)(Ze.default,{})]})};var hr=function(){var e=(0,n.useState)([]),t=(0,o.Z)(e,2),r=t[0],i=t[1];(0,n.useEffect)((function(){a()}),[]);var a=function(){Ye.get("http://103.104.74.215:3012/api/user/privacy_policy").then((function(e){return i(e.data.data)}))};return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsx)("div",{class:"breadscrumb-contain",children:(0,Je.jsx)("h2",{children:"Privacy Policy"})})})})})}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-sm-4 g-3",children:r.map((function(e){return(0,Je.jsxs)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 ratio_50",children:[(0,Je.jsx)("h2",{style:{textAlign:"center"},children:e.title}),(0,Je.jsx)("hr",{}),(0,Je.jsx)("div",{class:"blog-detail-contain",style:{paddingTop:10},children:(0,Je.jsx)("p",{children:e.description})})]})}))})})}),(0,Je.jsx)("div",{class:"modal location-modal fade theme-modal",id:"locationModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsx)("h5",{class:"modal-title",id:"exampleModalLabel",children:"Choose your Delivery Location"}),(0,Je.jsx)("p",{class:"mt-1 text-content",children:"Enter your address and we will specify the offer for your area."}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsxs)("div",{class:"location-list",children:[(0,Je.jsxs)("div",{class:"search-input",children:[(0,Je.jsx)("input",{type:"search",class:"form-control",placeholder:"Search Your Area"}),(0,Je.jsx)("i",{class:"fa-solid fa-magnifying-glass"})]}),(0,Je.jsx)("div",{class:"disabled-box",children:(0,Je.jsx)("h6",{children:"Select a Location"})}),(0,Je.jsxs)("ul",{class:"location-select custom-height",children:[(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Alabama"}),(0,Je.jsx)("span",{children:"Min: $130"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Arizona"}),(0,Je.jsx)("span",{children:"Min: $150"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"California"}),(0,Je.jsx)("span",{children:"Min: $110"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Colorado"}),(0,Je.jsx)("span",{children:"Min: $140"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Florida"}),(0,Je.jsx)("span",{children:"Min: $160"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Georgia"}),(0,Je.jsx)("span",{children:"Min: $120"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Kansas"}),(0,Je.jsx)("span",{children:"Min: $170"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Minnesota"}),(0,Je.jsx)("span",{children:"Min: $120"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"New York"}),(0,Je.jsx)("span",{children:"Min: $110"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("a",{href:"javascript:void(0)",children:[(0,Je.jsx)("h6",{children:"Washington"}),(0,Je.jsx)("span",{children:"Min: $130"})]})})]})]})})]})})}),(0,Je.jsx)("div",{class:"modal fade theme-modal deal-modal",id:"deal-box",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,Je.jsx)("div",{class:"modal-dialog modal-dialog-centered modal-fullscreen-sm-down",children:(0,Je.jsxs)("div",{class:"modal-content",children:[(0,Je.jsxs)("div",{class:"modal-header",children:[(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h5",{class:"modal-title w-100",id:"deal_today",children:"Deal Today"}),(0,Je.jsx)("p",{class:"mt-1 text-content",children:"Recommended deals for you."})]}),(0,Je.jsx)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",children:(0,Je.jsx)("i",{class:"fa-solid fa-xmark"})})]}),(0,Je.jsx)("div",{class:"modal-body",children:(0,Je.jsx)("div",{class:"deal-offer-box",children:(0,Je.jsxs)("ul",{class:"deal-offer-list",children:[(0,Je.jsx)("li",{class:"list-1",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/10.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})}),(0,Je.jsx)("li",{class:"list-2",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/11.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})}),(0,Je.jsx)("li",{class:"list-3",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/12.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})}),(0,Je.jsx)("li",{class:"list-1",children:(0,Je.jsxs)("div",{class:"deal-offer-contain",children:[(0,Je.jsx)("a",{href:"shop-left-sidebar.html",class:"deal-image",children:(0,Je.jsx)("img",{src:"../assets/images/vegetable/product/13.png",class:"blur-up lazyload",alt:""})}),(0,Je.jsxs)("a",{href:"shop-left-sidebar.html",class:"deal-contain",children:[(0,Je.jsx)("h5",{children:"Blended Instant Coffee 50 g Buy 1 Get 1 Free"}),(0,Je.jsxs)("h6",{children:["$52.57 ",(0,Je.jsx)("del",{children:"57.62"})," ",(0,Je.jsx)("span",{children:"500 G"})]})]})]})})]})})})]})})}),(0,Je.jsxs)("div",{class:"theme-option",children:[(0,Je.jsxs)("div",{class:"setting-box",children:[(0,Je.jsx)("button",{class:"btn setting-button",children:(0,Je.jsx)("i",{class:"fa-solid fa-gear"})}),(0,Je.jsx)("div",{class:"theme-setting-2",children:(0,Je.jsx)("div",{class:"theme-box",children:(0,Je.jsxs)("ul",{children:[(0,Je.jsxs)("li",{children:[(0,Je.jsx)("div",{class:"setting-name",children:(0,Je.jsx)("h4",{children:"Color"})}),(0,Je.jsx)("div",{class:"theme-setting-button color-picker",children:(0,Je.jsxs)("form",{class:"form-control",children:[(0,Je.jsx)("label",{for:"colorPick",class:"form-label mb-0",children:"Theme Color"}),(0,Je.jsx)("input",{type:"color",class:"form-control form-control-color",id:"colorPick",value:"#0da487",title:"Choose your color"})]})})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("div",{class:"setting-name",children:(0,Je.jsx)("h4",{children:"Dark"})}),(0,Je.jsxs)("div",{class:"theme-setting-button",children:[(0,Je.jsx)("button",{class:"btn btn-2 outline",id:"darkButton",children:"Dark"}),(0,Je.jsx)("button",{class:"btn btn-2 unline",id:"lightButton",children:"Light"})]})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("div",{class:"setting-name",children:(0,Je.jsx)("h4",{children:"RTL"})}),(0,Je.jsxs)("div",{class:"theme-setting-button rtl",children:[(0,Je.jsx)("button",{class:"btn btn-2 rtl-unline",children:"LTR"}),(0,Je.jsx)("button",{class:"btn btn-2 rtl-outline",children:"RTL"})]})]})]})})})]}),(0,Je.jsx)("div",{class:"back-to-top",children:(0,Je.jsx)("a",{id:"back-to-top",href:"#",children:(0,Je.jsx)("i",{class:"fas fa-chevron-up"})})})]}),(0,Je.jsx)(Ze.default,{})]})},fr=__webpack_require__(7762),pr=__webpack_require__(7326),vr=__webpack_require__(136),gr=__webpack_require__(7277),mr=__webpack_require__(8664),yr=!1,br=!1,_r="${JSCORE_VERSION}",Er=function(e,t){if(!e)throw Sr(t)},Sr=function(e){return new Error("Firebase Database ("+_r+") INTERNAL ASSERT FAILED: "+e)},wr=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},xr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,c=i+2<e.length,u=c?e[i+2]:0,l=o>>2,d=(3&o)<<4|s>>4,h=(15&s)<<2|u>>6,f=63&u;c||(f=64,a||(h=64)),r.push(n[l],n[d],n[h],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(wr(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{var s=e[n++],c=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&c)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,c=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==c)throw new Tr;var u=o<<2|a>>4;if(r.push(u),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==c){var d=s<<6&192|c;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Tr=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(){var e;return(0,G.Z)(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return(0,q.Z)(n)}((0,mr.Z)(Error)),Ir=function(e){var t=wr(e);return xr.encodeByteArray(t,!0)},Rr=function(e){return Ir(e).replace(/\./g,"")},kr=function(t){try{return xr.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Or(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Or(e[n],t[n]));return e}var Cr=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof __webpack_require__.g)return __webpack_require__.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Ar=function(){try{return Cr()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}var n=t&&kr(t[1]);return n&&JSON.parse(n)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Nr=function(){var e;return null===(e=Ar())||void 0===e?void 0:e.config},jr=function(){function e(){var t=this;(0,G.Z)(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return(0,q.Z)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Dr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Pr(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dr())}function Lr(){return!0===yr||!0===br}function Mr(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Ur=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(e,r,i){var o;return(0,G.Z)(this,n),(o=t.call(this,r)).code=e,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf((0,pr.Z)(o),n.prototype),Error.captureStackTrace&&Error.captureStackTrace((0,pr.Z)(o),Vr.prototype.create),o}return(0,q.Z)(n)}((0,mr.Z)(Error)),Vr=function(){function e(t,n,r){(0,G.Z)(this,e),this.service=t,this.serviceName=n,this.errors=r}return(0,q.Z)(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Fr,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ur(n,o,t)}}]),e}();var Fr=/\{\$([^}]+)}/g;function Br(e){return JSON.parse(e)}function Gr(e){return JSON.stringify(e)}var qr=function(t){var n={},r={},i={},o="";try{var a=t.split(".");n=Br(kr(a[0])||""),r=Br(kr(a[1])||""),o=a[2],i=r.d||{},delete r.d}catch(e){}return{header:n,claims:r,data:i,signature:o}};function Wr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Hr(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function zr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Kr(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Yr(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return!1;var s=e[a],c=t[a];if(Zr(s)&&Zr(c)){if(!Yr(s,c))return!1}else if(s!==c)return!1}for(var u=0,l=r;u<l.length;u++){var d=l[u];if(!n.includes(d))return!1}return!0}function Zr(e){return null!==e&&"object"===typeof e}var Jr=function(){function e(){(0,G.Z)(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return(0,q.Z)(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var o=16;o<80;o++){var a=n[o-3]^n[o-8]^n[o-14]^n[o-16];n[o]=4294967295&(a<<1|a>>>31)}for(var s,c,u=this.chain_[0],l=this.chain_[1],d=this.chain_[2],h=this.chain_[3],f=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=h^l&(d^h),c=1518500249):(s=l^d^h,c=1859775393):p<60?(s=l&d|h&(l|d),c=2400959708):(s=l^d^h,c=3395469782);var v=(u<<5|u>>>27)+s+f+c+n[p]&4294967295;f=h,h=d,d=4294967295&(l<<30|l>>>2),l=u,u=v}this.chain_[0]=this.chain_[0]+u&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}}]),e}();function Xr(e,t){var n=new Qr(e,t);return n.subscribe.bind(n)}var Qr=function(){function t(e,n){var r=this;(0,G.Z)(this,t),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){e(r)})).catch((function(e){r.error(e)}))}return(0,q.Z)(t,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(t,n,r){var i,o=this;if(void 0===t&&void 0===n&&void 0===r)throw new Error("Missing Observer.");void 0===(i=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=(0,fr.Z)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(o){r.e(o)}finally{r.f()}return!1}(t,["next","error","complete"])?t:{next:t,error:n,complete:r}).next&&(i.next=$r),void 0===i.error&&(i.error=$r),void 0===i.complete&&(i.complete=$r);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?i.error(o.finalError):i.complete()}catch(e){}})),this.observers.push(i),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(t,n){var r=this;this.task.then((function(){if(void 0!==r.observers&&void 0!==r.observers[t])try{n(r.observers[t])}catch(e){"undefined"!==typeof console&&console.error&&console.error(e)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),t}();function $r(){}var ei=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function ti(e,t){return"".concat(e," failed: ").concat(t," argument ")}function ni(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(ti(e,t)+"must be a valid function.")}function ri(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(ti(e,t)+"must be a valid context object.")}var ii=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function oi(e){return e&&e._delegate?e._delegate:e}var ai=function(){function e(t,n,r){(0,G.Z)(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return(0,q.Z)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),si="[DEFAULT]",ci=function(){function t(e,n){(0,G.Z)(this,t),this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return(0,q.Z)(t,[{key:"get",value:function(t){var n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){var r=new jr;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(e){}}return this.instancesDeferred.get(n).promise}},{key:"getImmediate",value:function(t){var n,r=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(n=null===t||void 0===t?void 0:t.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(i)return null;throw e}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:si})}catch(e){}var n,r=(0,fr.Z)(this.instancesDeferred.entries());try{for(r.s();!(n=r.n()).done;){var i=(0,o.Z)(n.value,2),a=i[0],s=i[1],c=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:c});s.resolve(u)}catch(e){}}}catch(l){r.e(l)}finally{r.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=lt(ct().mark((function e(){var t;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat((0,bt.Z)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),(0,bt.Z)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),s=(0,fr.Z)(this.instancesDeferred.entries());try{for(s.s();!(i=s.n()).done;){var c=(0,o.Z)(i.value,2),u=c[0],l=c[1];r===this.normalizeInstanceIdentifier(u)&&l.resolve(a)}}catch(d){s.e(d)}finally{s.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=(0,fr.Z)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;try{o(e,t)}catch(a){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===si?void 0:t),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si;return this.component?this.component.multipleInstances?e:si:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),t}();var ui,li,di=function(){function e(t){(0,G.Z)(this,e),this.name=t,this.providers=new Map}return(0,q.Z)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ci(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),hi=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(li||(li={}));var fi={debug:li.DEBUG,verbose:li.VERBOSE,info:li.INFO,warn:li.WARN,error:li.ERROR,silent:li.SILENT},pi=li.INFO,vi=(ui={},(0,mt.Z)(ui,li.DEBUG,"log"),(0,mt.Z)(ui,li.VERBOSE,"log"),(0,mt.Z)(ui,li.INFO,"info"),(0,mt.Z)(ui,li.WARN,"warn"),(0,mt.Z)(ui,li.ERROR,"error"),ui),gi=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=vi[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(a))}},mi=function(){function e(t){(0,G.Z)(this,e),this.name=t,this._logLevel=pi,this._logHandler=gi,this._userLogHandler=null,hi.push(this)}return(0,q.Z)(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in li))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?fi[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,li.DEBUG].concat(t)),this._logHandler.apply(this,[this,li.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,li.VERBOSE].concat(t)),this._logHandler.apply(this,[this,li.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,li.INFO].concat(t)),this._logHandler.apply(this,[this,li.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,li.WARN].concat(t)),this._logHandler.apply(this,[this,li.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,li.ERROR].concat(t)),this._logHandler.apply(this,[this,li.ERROR].concat(t))}}]),e}();var yi,bi,_i=function(e,t){return t.some((function(t){return e instanceof t}))};var Ei=new WeakMap,Si=new WeakMap,wi=new WeakMap,xi=new WeakMap,Ti=new WeakMap;var Ii={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Si.get(e);if("objectStoreNames"===t)return e.objectStoreNames||wi.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oi(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ri(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(bi||(bi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ci(this),n),Oi(Ei.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Oi(e.apply(Ci(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=e.call.apply(e,[Ci(this),t].concat(r));return wi.set(o,t.sort?t.sort():[t]),Oi(o)}}function ki(e){return"function"===typeof e?Ri(e):(e instanceof IDBTransaction&&function(e){if(!Si.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=function(){t(),r()},o=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Si.set(e,t)}}(e),_i(e,yi||(yi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ii):e)}function Oi(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",o)},i=function(){t(Oi(e.result)),r()},o=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((function(t){t instanceof IDBCursor&&Ei.set(t,e)})).catch((function(){})),Ti.set(t,e),t}(e);if(xi.has(e))return xi.get(e);var t=ki(e);return t!==e&&(xi.set(e,t),Ti.set(t,e)),t}var Ci=function(e){return Ti.get(e)};var Ai,Ni,ji=["get","getKey","getAll","getAllKeys","count"],Di=["put","add","delete","clear"],Pi=new Map;function Li(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Pi.get(t))return Pi.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Di.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||ji.includes(n))){var o=function(){var e=lt(ct().mark((function e(t){var o,a,s,c,u,l,d=arguments;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=this.transaction(t,i?"readwrite":"readonly"),s=a.store,c=d.length,u=new Array(c>1?c-1:0),l=1;l<c;l++)u[l-1]=d[l];return r&&(s=s.index(u.shift())),e.next=6,Promise.all([(o=s)[n].apply(o,u),i&&a.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Pi.set(t,o),o}}}Ii=function(e){return(0,tt.Z)((0,tt.Z)({},e),{},{get:function(t,n,r){return Li(t,n)||e.get(t,n,r)},has:function(t,n){return!!Li(t,n)||e.has(t,n)}})}(Ii);var Mi=function(){function e(t){(0,G.Z)(this,e),this.container=t}return(0,q.Z)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ui="@firebase/app",Vi="0.9.13",Fi=new mi("@firebase/app"),Bi="[DEFAULT]",Gi=(Ai={},(0,mt.Z)(Ai,Ui,"fire-core"),(0,mt.Z)(Ai,"@firebase/app-compat","fire-core-compat"),(0,mt.Z)(Ai,"@firebase/analytics","fire-analytics"),(0,mt.Z)(Ai,"@firebase/analytics-compat","fire-analytics-compat"),(0,mt.Z)(Ai,"@firebase/app-check","fire-app-check"),(0,mt.Z)(Ai,"@firebase/app-check-compat","fire-app-check-compat"),(0,mt.Z)(Ai,"@firebase/auth","fire-auth"),(0,mt.Z)(Ai,"@firebase/auth-compat","fire-auth-compat"),(0,mt.Z)(Ai,"@firebase/database","fire-rtdb"),(0,mt.Z)(Ai,"@firebase/database-compat","fire-rtdb-compat"),(0,mt.Z)(Ai,"@firebase/functions","fire-fn"),(0,mt.Z)(Ai,"@firebase/functions-compat","fire-fn-compat"),(0,mt.Z)(Ai,"@firebase/installations","fire-iid"),(0,mt.Z)(Ai,"@firebase/installations-compat","fire-iid-compat"),(0,mt.Z)(Ai,"@firebase/messaging","fire-fcm"),(0,mt.Z)(Ai,"@firebase/messaging-compat","fire-fcm-compat"),(0,mt.Z)(Ai,"@firebase/performance","fire-perf"),(0,mt.Z)(Ai,"@firebase/performance-compat","fire-perf-compat"),(0,mt.Z)(Ai,"@firebase/remote-config","fire-rc"),(0,mt.Z)(Ai,"@firebase/remote-config-compat","fire-rc-compat"),(0,mt.Z)(Ai,"@firebase/storage","fire-gcs"),(0,mt.Z)(Ai,"@firebase/storage-compat","fire-gcs-compat"),(0,mt.Z)(Ai,"@firebase/firestore","fire-fst"),(0,mt.Z)(Ai,"@firebase/firestore-compat","fire-fst-compat"),(0,mt.Z)(Ai,"fire-js","fire-js"),(0,mt.Z)(Ai,"firebase","fire-js-all"),Ai),qi=new Map,Wi=new Map;function Hi(t,n){try{t.container.addComponent(n)}catch(e){Fi.debug("Component ".concat(n.name," failed to register with FirebaseApp ").concat(t.name),e)}}function zi(e,t){e.container.addOrOverwriteComponent(t)}function Ki(e){var t=e.name;if(Wi.has(t))return Fi.debug("There were multiple attempts to register component ".concat(t,".")),!1;Wi.set(t,e);var n,r=(0,fr.Z)(qi.values());try{for(r.s();!(n=r.n()).done;){Hi(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Yi(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Zi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bi;Yi(e,t).clearInstance(n)}function Ji(){Wi.clear()}var Xi=(Ni={},(0,mt.Z)(Ni,"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),(0,mt.Z)(Ni,"bad-app-name","Illegal App name: '{$appName}"),(0,mt.Z)(Ni,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,mt.Z)(Ni,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,mt.Z)(Ni,"no-options","Need to provide options, when not being deployed to hosting via source."),(0,mt.Z)(Ni,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,mt.Z)(Ni,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,mt.Z)(Ni,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),(0,mt.Z)(Ni,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),(0,mt.Z)(Ni,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),(0,mt.Z)(Ni,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ni),Qi=new Vr("app","Firebase",Xi),$i=function(){function e(t,n,r){var i=this;(0,G.Z)(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ai("app",(function(){return i}),"PUBLIC"))}return(0,q.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}]),e}(),eo="9.23.0";function to(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Bi,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Qi.create("bad-app-name",{appName:String(i)});if(n||(n=Nr()),!n)throw Qi.create("no-options");var o=qi.get(i);if(o){if(Yr(n,o.options)&&Yr(r,o.config))return o;throw Qi.create("duplicate-app",{appName:i})}var a,s=new di(i),c=(0,fr.Z)(Wi.values());try{for(c.s();!(a=c.n()).done;){var u=a.value;s.addComponent(u)}}catch(d){c.e(d)}finally{c.f()}var l=new $i(n,r,s);return qi.set(i,l),l}function no(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bi,t=qi.get(e);if(!t&&e===Bi&&Nr())return to();if(!t)throw Qi.create("no-app",{appName:e});return t}function ro(){return Array.from(qi.values())}function io(e){return oo.apply(this,arguments)}function oo(){return(oo=lt(ct().mark((function e(t){var n;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!qi.has(n)){e.next=6;break}return qi.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ao(e,t,n){var r,i=null!==(r=Gi[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&s.push("and"),a&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Fi.warn(s.join(" "))}Ki(new ai("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function so(e,t){if(null!==e&&"function"!==typeof e)throw Qi.create("invalid-log-argument");!function(e,t){var n,r=(0,fr.Z)(hi);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=fi[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var s=o.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:li[n].toLowerCase(),message:s,args:o,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}}(e,t)}function co(e){var t;t=e,hi.forEach((function(e){e.setLogLevel(t)}))}var uo="firebase-heartbeat-database",lo=1,ho="firebase-heartbeat-store",fo=null;function po(){return fo||(fo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,o=n.blocking,a=n.terminated,s=indexedDB.open(e,t),c=Oi(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Oi(s.result),e.oldVersion,e.newVersion,Oi(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),c.then((function(e){a&&e.addEventListener("close",(function(){return a()})),o&&e.addEventListener("versionchange",(function(e){return o(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),c}(uo,lo,{upgrade:function(e,t){if(0===t)e.createObjectStore(ho)}}).catch((function(e){throw Qi.create("idb-open",{originalErrorMessage:e.message})}))),fo}function vo(e){return go.apply(this,arguments)}function go(){return(go=lt(ct().mark((function e(t){var n,r,i;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,po();case 3:return n=e.sent,e.next=6,n.transaction(ho).objectStore(ho).get(bo(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Ur?Fi.warn(e.t0.message):(i=Qi.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Fi.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function mo(e,t){return yo.apply(this,arguments)}function yo(){return(yo=lt(ct().mark((function e(t,n){var r,i,o,a;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,po();case 3:return r=e.sent,i=r.transaction(ho,"readwrite"),o=i.objectStore(ho),e.next=8,o.put(n,bo(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Ur?Fi.warn(e.t0.message):(a=Qi.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Fi.warn(a.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function bo(e){return"".concat(e.name,"!").concat(e.options.appId)}var _o=function(){function e(t){var n=this;(0,G.Z)(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new To(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return(0,q.Z)(e,[{key:"triggerHeartbeat",value:function(){var e=lt(ct().mark((function e(){var t,n,r;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Eo(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=lt(ct().mark((function e(){var t,n,r,i,o;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Eo(),n=So(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,o=Rr(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Eo(){return(new Date).toISOString().substring(0,10)}function So(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),o=(0,fr.Z)(e);try{var a=function(){var e=t.value,o=r.find((function(t){return t.agent===e.agent}));if(o){if(o.dates.push(e.date),Io(r)>n)return o.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Io(r)>n)return r.pop(),"break";i=i.slice(1)};for(o.s();!(t=o.n()).done;){if("break"===a())break}}catch(s){o.e(s)}finally{o.f()}return{heartbeatsToSend:r,unsentEntries:i}}var wo,xo,To=function(){function e(t){(0,G.Z)(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return(0,q.Z)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=lt(ct().mark((function e(){return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Mr()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Qo){t(Qo)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=lt(ct().mark((function e(){var t;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,vo(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=lt(ct().mark((function e(t){var n,r;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",mo(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=lt(ct().mark((function e(t){var n,r;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",mo(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,bt.Z)(r.heartbeats),(0,bt.Z)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Io(e){return Rr(JSON.stringify({version:2,heartbeats:e})).length}wo="",Ki(new ai("platform-logger",(function(e){return new Mi(e)}),"PRIVATE")),Ki(new ai("heartbeat",(function(e){return new _o(e)}),"PRIVATE")),ao(Ui,Vi,wo),ao(Ui,Vi,"esm2017"),ao("fire-js","");var Ro=function(){function e(t,n){var r=this;(0,G.Z)(this,e),this._delegate=t,this.firebase=n,Hi(t,new ai("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return(0,q.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),io(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bi;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bi;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Hi(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){zi(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),ko=(xo={},(0,mt.Z)(xo,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,mt.Z)(xo,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),xo),Oo=new Vr("app-compat","Firebase",ko);var Co=function e(){var n=function(e){var n={},r={__esModule:!0,initializeApp:function(t){var i=to(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Wr(n,i.name))return n[i.name];var o=new e(i,r);return n[i.name]=o,o},app:i,registerVersion:ao,setLogLevel:co,onLog:so,apps:null,SDK_VERSION:eo,INTERNAL:{registerComponent:function(t){var n=t.name,o=n.replace("-compat","");if(Ki(t)&&"PUBLIC"===t.type){var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw Oo.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==t.serviceProps&&Or(a,t.serviceProps),r[o]=a,e.prototype[o]=function(){for(var e=this._getService.bind(this,n),r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:t}};function i(e){if(!Wr(n,e=e||Bi))throw Oo.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=e,r}(Ro);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Or(n,e)},createSubscribe:Xr,ErrorFactory:Vr,deepExtend:Or}),n}(),Ao=new mi("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Ao.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var No=self.firebase.SDK_VERSION;No&&No.indexOf("LITE")>=0&&Ao.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var jo=Co;!function(e){ao("@firebase/app-compat","0.2.13",e)}();jo.registerVersion("firebase","9.23.0","app-compat");var Do="@firebase/database",Po="0.14.4",Lo="";function Mo(e){Lo=e}var Uo=function(){function e(t){(0,G.Z)(this,e),this.domStorage_=t,this.prefix_="firebase:"}return(0,q.Z)(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Gr(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Br(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Vo=function(){function e(){(0,G.Z)(this,e),this.cache_={},this.isInMemoryStorage=!0}return(0,q.Z)(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Wr(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Fo=function(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){var n=window[t];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new Uo(n)}}catch(e){}return new Vo},Bo=Fo("localStorage"),Go=Fo("sessionStorage"),qo=new mi("@firebase/database"),Wo=function(){var e=1;return function(){return e++}}(),Ho=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,Er(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Jr;n.update(t);var r=n.digest();return xr.encodeByteArray(r)},zo=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Gr(r):r,t+=" "}return t},Ko=null,Yo=!0,Zo=function(e,t){Er(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(qo.logLevel=li.VERBOSE,Ko=qo.log.bind(qo),t&&Go.set("logging_enabled",!0)):"function"===typeof e?Ko=e:(Ko=null,Go.remove("logging_enabled"))},Jo=function(){if(!0===Yo&&(Yo=!1,null===Ko&&!0===Go.get("logging_enabled")&&Zo(!0)),Ko){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=zo.apply(null,t);Ko(r)}},Xo=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Jo.apply(void 0,[e].concat(n))}},Qo=function(){var e="FIREBASE INTERNAL ERROR: "+zo.apply(void 0,arguments);qo.error(e)},$o=function(){var e="FIREBASE FATAL ERROR: ".concat(zo.apply(void 0,arguments));throw qo.error(e),new Error(e)},ea=function(){var e="FIREBASE WARNING: "+zo.apply(void 0,arguments);qo.warn(e)},ta=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},na="[MIN_NAME]",ra="[MAX_NAME]",ia=function(e,t){if(e===t)return 0;if(e===na||t===ra)return-1;if(t===na||e===ra)return 1;var n=ha(e),r=ha(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},oa=function(e,t){return e===t?0:e<t?-1:1},aa=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Gr(t))},sa=function e(t){if("object"!==typeof t||null===t)return Gr(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=Gr(n[o]),i+=":",i+=e(t[n[o]]);return i+="}"},ca=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function ua(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var la=function(e){Er(!ta(e),"Invalid JSON number");var t,n,r,i,o,a=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),a))+a,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var c=s.join(""),u="";for(o=0;o<64;o+=8){var l=parseInt(c.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),u+=l}return u.toLowerCase()};var da=new RegExp("^-?(0*)\\d{1,10}$"),ha=function(e){if(da.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},fa=function(t){try{t()}catch(e){setTimeout((function(){var n=e.stack||"";throw ea("Exception was thrown by user callback.",n),e}),Math.floor(0))}},pa=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},va=function(){function e(t,n){var r=this;(0,G.Z)(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return(0,q.Z)(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){ea('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),ga=function(){function e(t,n,r){var i=this;(0,G.Z)(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return(0,q.Z)(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Jo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ea(e)}}]),e}(),ma=function(){function e(t){(0,G.Z)(this,e),this.accessToken=t}return(0,q.Z)(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();ma.OWNER="owner";var ya="5",ba=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_a="ac",Ea="websocket",Sa="long_polling",wa=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]&&arguments[7];(0,G.Z)(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bo.get("host:"+t)||this._host}return(0,q.Z)(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Bo.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function xa(e,t,n){var r;if(Er("string"===typeof t,"typeof type must == string"),Er("object"===typeof n,"typeof params must == object"),t===Ea)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Sa)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return ua(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var Ta=function(){function e(){(0,G.Z)(this,e),this.counters_={}}return(0,q.Z)(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Wr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Or(void 0,this.counters_)}}]),e}(),Ia={},Ra={};function ka(e){var t=e.toString();return Ia[t]||(Ia[t]=new Ta),Ia[t]}var Oa=function(){function e(t){(0,G.Z)(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return(0,q.Z)(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&fa((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Ca="start",Aa=function(){function e(t,n,r,i,o,a,s){var c=this;(0,G.Z)(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=a,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xo(t),this.stats_=ka(n),this.urlFn=function(e){return c.appCheckToken&&(e[_a]=c.appCheckToken),xa(n,Sa,e)}}return(0,q.Z)(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Oa(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Lr()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Na((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],o=t[1],a=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Ca)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],o=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[Ca]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=ya,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[_a]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&ba.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Gr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Ir(t),r=ca(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Lr()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Gr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Lr()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Na=function(){function t(n,r,i,o){if((0,G.Z)(this,t),this.onDisconnect=i,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Lr())this.commandCB=n,this.onMessageCB=r;else{this.uniqueCallbackIdentifier=Wo(),window["pLPCommand"+this.uniqueCallbackIdentifier]=n,window["pRTLPCB"+this.uniqueCallbackIdentifier]=r,this.myIFrame=t.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(e){Jo("frame writing exception"),e.stack&&Jo(e.stack),Jo(e)}}}return(0,q.Z)(t,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(t,n){var r=this;Lr()?this.doNodeLongPoll(t,n):setTimeout((function(){try{if(!r.sendNewPolls)return;var i=r.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var e=i.readyState;e&&"loaded"!==e&&"complete"!==e||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=function(){Jo("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(i)}catch(e){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Jo("No IE domain setting required")}catch(e){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}}]),t}(),ja=null;"undefined"!==typeof MozWebSocket?ja=MozWebSocket:"undefined"!==typeof WebSocket&&(ja=WebSocket);var Da=function(){function t(e,n,r,i,o,a,s){(0,G.Z)(this,t),this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xo(this.connId),this.stats_=ka(n),this.connURL=t.connectionURL_(n,a,s,i,r),this.nodeAdmin=n.nodeAdmin}return(0,q.Z)(t,[{key:"open",value:function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bo.set("previous_websocket_failure",!0);try{var i;if(Lr()){var o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":"Firebase/".concat(ya,"/").concat(Lo,"/").concat(process.platform,"/").concat(o),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},s=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(i.proxy={origin:s})}this.mySock=new ja(this.connURL,[],i)}catch(e){this.log_("Error instantiating WebSocket.");var c=e.message||e.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(e){r.handleIncomingFrame(e)},this.mySock.onerror=function(e){r.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&r.log_(t),r.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Bo.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Br(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Er(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Gr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=ca(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var o={};return o.v=ya,!Lr()&&"undefined"!==typeof location&&location.hostname&&ba.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[_a]=r),i&&(o.p=i),xa(e,Ea,o)}},{key:"forceDisallow",value:function(){t.forceDisallow_=!0}},{key:"isAvailable",value:function(){var e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ja&&!t.forceDisallow_}},{key:"previouslyFailed",value:function(){return Bo.isInMemoryStorage||!0===Bo.get("previous_websocket_failure")}}]),t}();Da.responsesRequiredToBeHealthy=2,Da.healthyTimeout=3e4;var Pa=function(){function e(t){(0,G.Z)(this,e),this.initTransports_(t)}return(0,q.Z)(e,[{key:"initTransports_",value:function(t){var n=Da&&Da.isAvailable(),r=n&&!Da.previouslyFailed();if(t.webSocketOnly&&(n||ea("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Da];else{var i,o=this.transports_=[],a=(0,fr.Z)(e.ALL_TRANSPORTS);try{for(a.s();!(i=a.n()).done;){var s=i.value;s&&s.isAvailable()&&o.push(s)}}catch(c){a.e(c)}finally{a.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Aa,Da]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();Pa.globalTransportInitialized_=!1;var La=function(){function e(t,n,r,i,o,a,s,c,u,l){(0,G.Z)(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=a,this.onReady_=s,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xo("c:"+this.id+":"),this.transportManager_=new Pa(n),this.log_("Connection created"),this.start_()}return(0,q.Z)(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=pa((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=aa("t",e),n=aa("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=aa("t",e),n=aa("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=aa("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Qo("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Qo("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ya!==n&&ea("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),pa((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pa((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Ma=function(){function e(){(0,G.Z)(this,e)}return(0,q.Z)(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Ua=function(){function e(t){(0,G.Z)(this,e),this.allowedEvents_=t,this.listeners_={},Er(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return(0,q.Z)(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=(0,bt.Z)(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o++)t[o].callback.apply(t[o].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Er(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Va=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(){var e;return(0,G.Z)(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Pr()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return(0,q.Z)(n,[{key:"getInitialEvent",value:function(e){return Er("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ua),Fa=32,Ba=768,Ga=function(){function e(t,n){if((0,G.Z)(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return(0,q.Z)(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function qa(){return new Ga("")}function Wa(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ha(e){return e.pieces_.length-e.pieceNum_}function za(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Ga(e.pieces_,t)}function Ka(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Ya(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Za(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Ga(t,0)}function Ja(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Ga)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var o=t.split("/"),a=0;a<o.length;a++)o[a].length>0&&n.push(o[a]);return new Ga(n,0)}function Xa(e){return e.pieceNum_>=e.pieces_.length}function Qa(e,t){var n=Wa(e),r=Wa(t);if(null===n)return t;if(n===r)return Qa(za(e),za(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function $a(e,t){for(var n=Ya(e,0),r=Ya(t,0),i=0;i<n.length&&i<r.length;i++){var o=ia(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function es(e,t){if(Ha(e)!==Ha(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function ts(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Ha(e)>Ha(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var ns=(0,q.Z)((function e(t,n){(0,G.Z)(this,e),this.errorPrefix_=n,this.parts_=Ya(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ii(this.parts_[r]);rs(this)}));function rs(e){if(e.byteLength_>Ba)throw new Error(e.errorPrefix_+"has a key path longer than "+Ba+" bytes ("+e.byteLength_+").");if(e.parts_.length>Fa)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Fa+") or object contains a cycle "+is(e))}function is(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var os=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(){var e,r,i;return(0,G.Z)(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return(0,q.Z)(n,[{key:"getInitialEvent",value:function(e){return Er("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Ua),as=1e3,ss=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(e,r,i,o,a,s,c,u){var l;if((0,G.Z)(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=a,l.authTokenProvider_=s,l.appCheckTokenProvider_=c,l.authOverride_=u,l.id=n.nextPersistentConnectionId_++,l.log_=Xo("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=as,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,u&&!Lr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return os.getInstance().on("visible",l.onVisible_,(0,pr.Z)(l)),-1===e.host.indexOf("fblocal")&&Va.getInstance().on("online",l.onOnline_,(0,pr.Z)(l)),l}return(0,q.Z)(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Gr(i)),Er(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new jr,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Er(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Er(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,c=a.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(o))===e&&(t.log_("listen response",a),"ok"!==c&&t.removeListen_(i,o),e.onComplete&&e.onComplete(c,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=qr(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=qr(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Er(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Gr(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Qo("Unrecognized action received from server: "+Gr(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Er(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=as,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=as,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=as),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=lt(ct().mark((function e(){var t,r,i,a,s,c,u,l,d,h,f,p,v,g,m=this;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,c=!1,u=null,l=function(){u?u.close():(c=!0,i())},d=function(e){Er(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:l,sendRequest:d},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:f=e.sent,p=(0,o.Z)(f,2),v=p[0],g=p[1],c?Jo("getToken() completed but was canceled"):(Jo("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=g&&g.token,u=new La(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){ea(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),s)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),c||(this.repoInfo_.nodeAdmin&&ea(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Jo("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Jo("Resuming connection for reason: "+e),delete this.interruptReasons_[e],zr(this.interruptReasons_)&&(this.reconnectDelay_=as,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return sa(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Ga(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Jo("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Jo("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=(0,fr.Z)(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=e.value,i=(0,fr.Z)(r.values());try{for(i.s();!(n=i.n()).done;){var o=n.value;this.sendListen_(o)}}catch(u){i.e(u)}finally{i.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var s=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(s.action,s.pathString,s.data,s.onComplete)}for(var c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Lr()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Lo.replace(/\./g,"-")]=1,Pr()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Va.getInstance().currentlyOnline();return zr(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Wr(e,"w")){var n=Hr(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();ea("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Ma);ss.nextPersistentConnectionId_=0,ss.nextConnectionId_=0;var cs,us=function(){function e(t,n){(0,G.Z)(this,e),this.name=t,this.node=n}return(0,q.Z)(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),ls=function(){function e(){(0,G.Z)(this,e)}return(0,q.Z)(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new us(na,e),r=new us(na,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return us.MIN}}]),e}(),ds=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(){return(0,G.Z)(this,n),t.apply(this,arguments)}return(0,q.Z)(n,[{key:"compare",value:function(e,t){return ia(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Sr("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return us.MIN}},{key:"maxPost",value:function(){return new us(ra,cs)}},{key:"makePost",value:function(e,t){return Er("string"===typeof e,"KeyIndex indexValue must always be a string."),new us(e,cs)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return cs},set:function(e){cs=e}}]),n}(ls),hs=new ds,fs=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;(0,G.Z)(this,e),this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse_?t.left:t.right;else{if(0===a){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return(0,q.Z)(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),ps=function(){function e(t,n,r,i,o){(0,G.Z)(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:ms.EMPTY_NODE,this.right=null!=o?o:ms.EMPTY_NODE}return(0,q.Z)(e,[{key:"copy",value:function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return ms.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ms.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();ps.RED=!0,ps.BLACK=!1;var vs,gs=function(){function e(){(0,G.Z)(this,e)}return(0,q.Z)(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ps(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),ms=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;(0,G.Z)(this,e),this.comparator_=t,this.root_=n}return(0,q.Z)(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,ps.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ps.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new fs(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new fs(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new fs(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new fs(this.root_,null,this.comparator_,!0,e)}}]),e}();function ys(e,t){return ia(e.name,t.name)}function bs(e,t){return ia(e,t)}ms.EMPTY_NODE=new gs;var _s,Es,Ss,ws=function(e){return"number"===typeof e?"number:"+la(e):"string:"+e},xs=function(e){if(e.isLeafNode()){var t=e.val();Er("string"===typeof t||"number"===typeof t||"object"===typeof t&&Wr(t,".sv"),"Priority must be a string or number.")}else Er(e===vs||e.isEmpty(),"priority of unexpected type.");Er(e===vs||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ts=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;(0,G.Z)(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Er(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),xs(this.priorityNode_)}return(0,q.Z)(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Xa(t)?this:".priority"===Wa(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Wa(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Er(".priority"!==r||1===Ha(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(za(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+ws(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?la(this.value_):this.value_,this.lazyHash_=Ho(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Er(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return Er(i>=0,"Unknown leaf type: "+n),Er(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return _s},set:function(e){_s=e}}]),e}();Ts.VALUE_TYPE_ORDER=["object","boolean","number","string"];var Is,Rs,ks=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(){return(0,G.Z)(this,n),t.apply(this,arguments)}return(0,q.Z)(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?ia(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return us.MIN}},{key:"maxPost",value:function(){return new us(ra,new Ts("[PRIORITY-POST]",Ss))}},{key:"makePost",value:function(e,t){var n=Es(e);return new us(t,new Ts("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(ls),Os=new ks,Cs=Math.log(2),As=function(){function e(t){(0,G.Z)(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Cs,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return(0,q.Z)(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Ns=function(e,t,n,r){e.sort(t);var i=function t(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=e[r],a=n?n(o):o,new ps(a,o.node,ps.BLACK,null,null);var c=parseInt(s/2,10)+r,u=t(r,c),l=t(c+1,i);return o=e[c],a=n?n(o):o,new ps(a,o.node,ps.BLACK,u,l)},o=function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var u=i(o+1,s),l=e[o],d=n?n(l):l;c(new ps(d,l.node,r,null,u))},c=function(e){r?(r.left=e,r=e):(o=e,r=e)},u=0;u<t.count;++u){var l=t.nextBitIsOne(),d=Math.pow(2,t.count-(u+1));l?s(d,ps.BLACK):(s(d,ps.BLACK),s(d,ps.RED))}return o}(new As(e.length));return new ms(r||t,o)},js={},Ds=function(){function e(t,n){(0,G.Z)(this,e),this.indexes_=t,this.indexSet_=n}return(0,q.Z)(e,[{key:"get",value:function(e){var t=Hr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ms?t:null}},{key:"hasIndex",value:function(e){return Wr(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Er(t!==hs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(us.Wrap),s=a.getNext();s;)o=o||t.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?Ns(i,t.getCompare()):js;var c=t.toString(),u=Object.assign({},this.indexSet_);u[c]=t;var l=Object.assign({},this.indexes_);return l[c]=r,new e(l,u)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Kr(this.indexes_,(function(e,i){var o=Hr(r.indexSet_,i);if(Er(o,"Missing index implementation for "+i),e===js){if(o.isDefinedOn(t.node)){for(var a=[],s=n.getIterator(us.Wrap),c=s.getNext();c;)c.name!==t.name&&a.push(c),c=s.getNext();return a.push(t),Ns(a,o.getCompare())}return js}var u=n.get(t.name),l=e;return u&&(l=l.remove(new us(t.name,u))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Kr(this.indexes_,(function(e){if(e===js)return e;var r=n.get(t.name);return r?e.remove(new us(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Er(js&&Os,"ChildrenNode.ts has not been loaded"),Is=Is||new e({".priority":js},{".priority":Os})}}]),e}(),Ps=function(){function e(t,n,r){(0,G.Z)(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&xs(this.priorityNode_),this.children_.isEmpty()&&Er(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return(0,q.Z)(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||Rs}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Rs:t}},{key:"getChild",value:function(e){var t=Wa(e);return null===t?this:this.getImmediateChild(t).getChild(za(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Er(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,o=new us(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(o,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(o,this.children_));var a=r.isEmpty()?Rs:this.priorityNode_;return new e(r,a,i)}},{key:"updateChild",value:function(e,t){var n=Wa(e);if(null===n)return t;Er(".priority"!==Wa(e)||1===Ha(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(za(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Os,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+ws(this.getPriority().val())+":"),this.forEachChild(Os,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Ho(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new us(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new us(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new us(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,us.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,us.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ls?-1:0}},{key:"withIndex",value:function(t){if(t===hs||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===hs||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Os),r=t.getIterator(Os),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===hs?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return Rs||(Rs=new e(new ms(bs),null,Ds.Default))}}]),e}();Ps.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Ls=new(function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(){return(0,G.Z)(this,n),t.call(this,new ms(bs),Ps.EMPTY_NODE,Ds.Default)}return(0,q.Z)(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Ps.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Ps));Object.defineProperties(us,{MIN:{value:new us(na,Ps.EMPTY_NODE)},MAX:{value:new us(ra,Ls)}}),ds.__EMPTY_NODE=Ps.EMPTY_NODE,Ts.__childrenNodeConstructor=Ps,vs=Ls,function(e){Ss=e}(Ls);var Ms=!0;function Us(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Ps.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Er(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new Ts(e,Us(t));if(e instanceof Array||!Ms){var n=Ps.EMPTY_NODE;return ua(e,(function(t,r){if(Wr(e,t)&&"."!==t.substring(0,1)){var i=Us(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(Us(t))}var r=[],i=!1;if(ua(e,(function(e,t){if("."!==e.substring(0,1)){var n=Us(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new us(e,n)))}})),0===r.length)return Ps.EMPTY_NODE;var o=Ns(r,ys,(function(e){return e.name}),bs);if(i){var a=Ns(r,Os.getCompare());return new Ps(o,Us(t),new Ds({".priority":a},{".priority":Os}))}return new Ps(o,Us(t),Ds.Default)}!function(e){Es=e}(Us);var Vs=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(e){var r;return(0,G.Z)(this,n),(r=t.call(this)).indexPath_=e,Er(!Xa(e)&&".priority"!==Wa(e),"Can't create PathIndex with empty path or .priority key"),r}return(0,q.Z)(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?ia(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Us(e),r=Ps.EMPTY_NODE.updateChild(this.indexPath_,n);return new us(t,r)}},{key:"maxPost",value:function(){var e=Ps.EMPTY_NODE.updateChild(this.indexPath_,Ls);return new us(ra,e)}},{key:"toString",value:function(){return Ya(this.indexPath_,0).join("/")}}]),n}(ls),Fs=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(){return(0,G.Z)(this,n),t.apply(this,arguments)}return(0,q.Z)(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?ia(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return us.MIN}},{key:"maxPost",value:function(){return us.MAX}},{key:"makePost",value:function(e,t){var n=Us(e);return new us(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(ls),Bs=new Fs;function Gs(e){return{type:"value",snapshotNode:e}}function qs(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ws(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Hs(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var zs=function(){function e(t){(0,G.Z)(this,e),this.index_=t}return(0,q.Z)(e,[{key:"updateChild",value:function(e,t,n,r,i,o){Er(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(Ws(t,a)):Er(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(qs(t,n)):o.trackChildChange(Hs(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Os,(function(e,r){t.hasChild(e)||n.trackChildChange(Ws(e,r))})),t.isLeafNode()||t.forEachChild(Os,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Hs(t,r,i))}else n.trackChildChange(qs(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?Ps.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Ks=function(){function e(t){(0,G.Z)(this,e),this.indexedFilter_=new zs(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return(0,q.Z)(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,o){return this.matches(new us(t,n))||(n=Ps.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=Ps.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Ps.EMPTY_NODE);var i=this;return t.forEachChild(Os,(function(e,t){i.matches(new us(e,t))||(r=r.updateImmediateChild(e,Ps.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),Ys=function(){function e(t){var n=this;(0,G.Z)(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Ks(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return(0,q.Z)(e,[{key:"updateChild",value:function(e,t,n,r,i,o){return this.rangedFilter_.matches(new us(t,n))||(n=Ps.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Ps.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=Ps.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;r=r.updateImmediateChild(a.name,a.node),o++}}}else{var s;r=(r=t.withIndex(this.index_)).updatePriority(Ps.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var c=0;s.hasNext();){var u=s.getNext();c<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?c++:r=r.updateImmediateChild(u.name,Ps.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();var s=e;Er(s.numChildren()===this.limit_,"");var c=new us(t,n),u=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(c);if(s.hasChild(t)){for(var d=s.getImmediateChild(t),h=r.getChildAfterChild(this.index_,u,this.reverse_);null!=h&&(h.name===t||s.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var f=null==h?1:o(h,c);if(l&&!n.isEmpty()&&f>=0)return null!=i&&i.trackChildChange(Hs(t,n,d)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Ws(t,d));var p=s.updateImmediateChild(t,Ps.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(qs(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&o(u,c)>=0?(null!=i&&(i.trackChildChange(Ws(u.name,u.node)),i.trackChildChange(qs(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(u.name,Ps.EMPTY_NODE)):e}}]),e}(),Zs=function(){function e(){(0,G.Z)(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Os}return(0,q.Z)(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Er(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Er(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:na}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Er(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Er(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ra}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Er(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===Os}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Js(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Xs(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Qs(e,t){var n=e.copy();return n.index_=t,n}function $s(e){var t,n={};if(e.isDefault())return n;if(e.index_===Os?t="$priority":e.index_===Bs?t="$value":e.index_===hs?t="$key":(Er(e.index_ instanceof Vs,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Gr(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=Gr(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+Gr(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=Gr(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+Gr(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function ec(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Os&&(t.i=e.index_.toString()),t}var tc=function(t){(0,vr.Z)(r,t);var n=(0,gr.Z)(r);function r(e,t,i,o){var a;return(0,G.Z)(this,r),(a=n.call(this)).repoInfo_=e,a.onDataUpdate_=t,a.authTokenProvider_=i,a.appCheckTokenProvider_=o,a.log_=Xo("p:rest:"),a.listens_={},a}return(0,q.Z)(r,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,n,i){var o=this,a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);var s=r.getListenId_(e,n),c={};this.listens_[s]=c;var u=$s(e._queryParams);this.restRequest_(a+".json",u,(function(e,t){var r=t;(404===e&&(r=null,e=null),null===e&&o.onDataUpdate_(a,r,!1,n),Hr(o.listens_,s)===c)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var n=r.getListenId_(e,t);delete this.listens_[n]}},{key:"get",value:function(e){var t=this,n=$s(e._queryParams),r=e._path.toString(),i=new jr;return this.restRequest_(r+".json",n,(function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(a){var s=(0,o.Z)(a,2),c=s[0],u=s[1];c&&c.accessToken&&(r.auth=c.accessToken),u&&u.token&&(r.ac=u.token);var l=(n.repoInfo_.secure?"https://":"http://")+n.repoInfo_.host+t+"?ns="+n.repoInfo_.namespace+function(e){for(var t=[],n=function(){var e=(0,o.Z)(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}(r);n.log_("Sending REST request for "+l);var d=new XMLHttpRequest;d.onreadystatechange=function(){if(i&&4===d.readyState){n.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);var t=null;if(d.status>=200&&d.status<300){try{t=Br(d.responseText)}catch(e){ea("Failed to parse JSON response for "+l+": "+d.responseText)}i(null,t)}else 401!==d.status&&404!==d.status&&ea("Got unsuccessful REST response for "+l+" Status: "+d.status),i(d.status);i=null}},d.open("GET",l,!0),d.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Er(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),r}(Ma),nc=function(){function e(){(0,G.Z)(this,e),this.rootNode_=Ps.EMPTY_NODE}return(0,q.Z)(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function rc(){return{value:null,children:new Map}}function ic(e,t,n){if(Xa(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Wa(t);e.children.has(r)||e.children.set(r,rc()),ic(e.children.get(r),t=za(t),n)}}function oc(e,t){if(Xa(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(Os,(function(t,n){ic(e,new Ga(t),n)})),oc(e,t)}if(e.children.size>0){var r=Wa(t);if(t=za(t),e.children.has(r))oc(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function ac(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){ac(r,new Ga(t.toString()+"/"+e),n)}))}var sc,cc=function(){function e(t){(0,G.Z)(this,e),this.collection_=t,this.last_=null}return(0,q.Z)(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ua(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),uc=function(){function e(t,n){(0,G.Z)(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new cc(t);var r=1e4+2e4*Math.random();pa(this.reportStats_.bind(this),Math.floor(r))}return(0,q.Z)(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;ua(t,(function(t,i){i>0&&Wr(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),pa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function lc(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(sc||(sc={}));var dc,hc=function(){function e(t,n,r){(0,G.Z)(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=sc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return(0,q.Z)(e,[{key:"operationForChild",value:function(t){if(Xa(this.path)){if(null!=this.affectedTree.value)return Er(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Ga(t));return new e(qa(),n,this.revert)}return Er(Wa(this.path)===t,"operationForChild called for unrelated child."),new e(za(this.path),this.affectedTree,this.revert)}}]),e}(),fc=function(){function e(t,n){(0,G.Z)(this,e),this.source=t,this.path=n,this.type=sc.LISTEN_COMPLETE}return(0,q.Z)(e,[{key:"operationForChild",value:function(t){return Xa(this.path)?new e(this.source,qa()):new e(this.source,za(this.path))}}]),e}(),pc=function(){function e(t,n,r){(0,G.Z)(this,e),this.source=t,this.path=n,this.snap=r,this.type=sc.OVERWRITE}return(0,q.Z)(e,[{key:"operationForChild",value:function(t){return Xa(this.path)?new e(this.source,qa(),this.snap.getImmediateChild(t)):new e(this.source,za(this.path),this.snap)}}]),e}(),vc=function(){function e(t,n,r){(0,G.Z)(this,e),this.source=t,this.path=n,this.children=r,this.type=sc.MERGE}return(0,q.Z)(e,[{key:"operationForChild",value:function(t){if(Xa(this.path)){var n=this.children.subtree(new Ga(t));return n.isEmpty()?null:n.value?new pc(this.source,qa(),n.value):new e(this.source,qa(),n)}return Er(Wa(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,za(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),gc=function(){function e(t,n,r){(0,G.Z)(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return(0,q.Z)(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Xa(e))return this.isFullyInitialized()&&!this.filtered_;var t=Wa(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),mc=(0,q.Z)((function e(t){(0,G.Z)(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function yc(e,t,n,r,i,o){var a=r.filter((function(e){return e.type===n}));a.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Sr("Should only compare child_ events.");var r=new us(t.childName,t.snapshotNode),i=new us(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),a.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function bc(e,t){return{eventCache:e,serverCache:t}}function _c(e,t,n,r){return bc(new gc(t,n,r),e.serverCache)}function Ec(e,t,n,r){return bc(e.eventCache,new gc(t,n,r))}function Sc(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function wc(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var xc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(dc||(dc=new ms(oa)),dc);(0,G.Z)(this,e),this.value=t,this.children=n}return(0,q.Z)(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:qa(),value:this.value};if(Xa(e))return null;var n=Wa(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(za(e),t);return null!=i?{path:Ja(new Ga(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Xa(t))return this;var n=Wa(t),r=this.children.get(n);return null!==r?r.subtree(za(t)):new e(null)}},{key:"set",value:function(t,n){if(Xa(t))return new e(n,this.children);var r=Wa(t),i=(this.children.get(r)||new e(null)).set(za(t),n),o=this.children.insert(r,i);return new e(this.value,o)}},{key:"remove",value:function(t){if(Xa(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Wa(t),r=this.children.get(n);if(r){var i,o=r.remove(za(t));return i=o.isEmpty()?this.children.remove(n):this.children.insert(n,o),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Xa(e))return this.value;var t=Wa(e),n=this.children.get(t);return n?n.get(za(e)):null}},{key:"setTree",value:function(t,n){if(Xa(t))return n;var r,i=Wa(t),o=(this.children.get(i)||new e(null)).setTree(za(t),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(qa(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Ja(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,qa(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Xa(e))return null;var i=Wa(e),o=this.children.get(i);return o?o.findOnPath_(za(e),Ja(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,qa(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Xa(t))return this;this.value&&r(n,this.value);var i=Wa(t),o=this.children.get(i);return o?o.foreachOnPath_(za(t),Ja(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(qa(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Ja(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return ua(t,(function(e,t){n=n.set(new Ga(e),t)})),n}}]),e}(),Tc=function(){function e(t){(0,G.Z)(this,e),this.writeTree_=t}return(0,q.Z)(e,null,[{key:"empty",value:function(){return new e(new xc(null))}}]),e}();function Ic(e,t,n){if(Xa(t))return new Tc(new xc(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=Qa(i,t);return o=o.updateChild(a,n),new Tc(e.writeTree_.set(i,o))}var s=new xc(n),c=e.writeTree_.setTree(t,s);return new Tc(c)}function Rc(e,t,n){var r=e;return ua(n,(function(e,n){r=Ic(r,Ja(t,e),n)})),r}function kc(e,t){if(Xa(t))return Tc.empty();var n=e.writeTree_.setTree(t,new xc(null));return new Tc(n)}function Oc(e,t){return null!=Cc(e,t)}function Cc(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Qa(n.path,t)):null}function Ac(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Os,(function(e,n){t.push(new us(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new us(e,n.value))})),t}function Nc(e,t){if(Xa(t))return e;var n=Cc(e,t);return new Tc(null!=n?new xc(n):e.writeTree_.subtree(t))}function jc(e){return e.writeTree_.isEmpty()}function Dc(e,t){return Pc(qa(),e.writeTree_,t)}function Pc(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Er(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Pc(Ja(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Ja(e,".priority"),r)),n}function Lc(e,t){return Zc(t,e)}function Mc(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Er(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=e.allWrites.length-1;i&&a>=0;){var s=e.allWrites[a];s.visible&&(a>=n&&Uc(s,r.path)?i=!1:ts(r.path,s.path)&&(o=!0)),a--}if(i){if(o)return function(e){e.visibleWrites=Fc(e.allWrites,Vc,qa()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=kc(e.visibleWrites,r.path):ua(r.children,(function(t){e.visibleWrites=kc(e.visibleWrites,Ja(r.path,t))}));return!0}return!1}function Uc(e,t){if(e.snap)return ts(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&ts(Ja(e.path,n),t))return!0;return!1}function Vc(e){return e.visible}function Fc(e,t,n){for(var r=Tc.empty(),i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)ts(n,a)?r=Ic(r,s=Qa(n,a),o.snap):ts(a,n)&&(s=Qa(a,n),r=Ic(r,qa(),o.snap.getChild(s)));else{if(!o.children)throw Sr("WriteRecord should have .snap or .children");if(ts(n,a))r=Rc(r,s=Qa(n,a),o.children);else if(ts(a,n))if(Xa(s=Qa(a,n)))r=Rc(r,qa(),o.children);else{var c=Hr(o.children,Wa(s));if(c){var u=c.getChild(za(s));r=Ic(r,qa(),u)}}}}}return r}function Bc(e,t,n,r,i){if(r||i){var o=Nc(e.visibleWrites,t);if(!i&&jc(o))return n;if(i||null!=n||Oc(o,qa())){return Dc(Fc(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(ts(e.path,t)||ts(t,e.path))}),t),n||Ps.EMPTY_NODE)}return null}var a=Cc(e.visibleWrites,t);if(null!=a)return a;var s=Nc(e.visibleWrites,t);return jc(s)?n:null!=n||Oc(s,qa())?Dc(s,n||Ps.EMPTY_NODE):null}function Gc(e,t,n,r){return Bc(e.writeTree,e.treePath,t,n,r)}function qc(e,t){return function(e,t,n){var r=Ps.EMPTY_NODE,i=Cc(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Os,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var o=Nc(e.visibleWrites,t);return n.forEachChild(Os,(function(e,t){var n=Dc(Nc(o,new Ga(e)),t);r=r.updateImmediateChild(e,n)})),Ac(o).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Ac(Nc(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Wc(e,t,n,r){return function(e,t,n,r,i){Er(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=Ja(t,n);if(Oc(e.visibleWrites,o))return null;var a=Nc(e.visibleWrites,o);return jc(a)?i.getChild(n):Dc(a,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Hc(e,t){return function(e,t){return Cc(e.visibleWrites,t)}(e.writeTree,Ja(e.treePath,t))}function zc(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){var s,c=Nc(e.visibleWrites,t),u=Cc(c,qa());if(null!=u)s=u;else{if(null==n)return[];s=Dc(c,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],d=a.getCompare(),h=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),f=h.getNext();f&&l.length<i;)0!==d(f,r)&&l.push(f),f=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,o)}function Kc(e,t,n){return function(e,t,n,r){var i=Ja(t,n),o=Cc(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?Dc(Nc(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Yc(e,t){return Zc(Ja(e.treePath,t),e.writeTree)}function Zc(e,t){return{treePath:e,writeTree:t}}var Jc=function(){function e(){(0,G.Z)(this,e),this.changeMap=new Map}return(0,q.Z)(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Er("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Er(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Hs(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Ws(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,qs(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Sr("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Hs(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Xc=new(function(){function e(){(0,G.Z)(this,e)}return(0,q.Z)(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Qc=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,G.Z)(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return(0,q.Z)(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new gc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Kc(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:wc(this.viewCache_),i=zc(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function $c(e,t,n,r,i){var o,a,s=new Jc;if(n.type===sc.OVERWRITE){var c=n;c.source.fromUser?o=nu(e,t,c.path,c.snap,r,i,s):(Er(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!Xa(c.path),o=tu(e,t,c.path,c.snap,r,i,a,s))}else if(n.type===sc.MERGE){var u=n;u.source.fromUser?o=function(e,t,n,r,i,o,a){var s=t;return r.foreach((function(r,c){var u=Ja(n,r);ru(t,Wa(u))&&(s=nu(e,s,u,c,i,o,a))})),r.foreach((function(r,c){var u=Ja(n,r);ru(t,Wa(u))||(s=nu(e,s,u,c,i,o,a))})),s}(e,t,u.path,u.children,r,i,s):(Er(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.serverCache.isFiltered(),o=ou(e,t,u.path,u.children,r,i,a,s))}else if(n.type===sc.ACK_USER_WRITE){var l=n;o=l.revert?function(e,t,n,r,i,o){var a;if(null!=Hc(r,n))return t;var s,c=new Qc(r,t,i),u=t.eventCache.getNode();if(Xa(n)||".priority"===Wa(n)){var l;if(t.serverCache.isFullyInitialized())l=Gc(r,wc(t));else{var d=t.serverCache.getNode();Er(d instanceof Ps,"serverChildren would be complete if leaf node"),l=qc(r,d)}s=e.filter.updateFullNode(u,l,o)}else{var h=Wa(n),f=Kc(r,h,t.serverCache);null==f&&t.serverCache.isCompleteForChild(h)&&(f=u.getImmediateChild(h)),(s=null!=f?e.filter.updateChild(u,h,f,za(n),c,o):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(u,h,Ps.EMPTY_NODE,za(n),c,o):u).isEmpty()&&t.serverCache.isFullyInitialized()&&(a=Gc(r,wc(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,a,o))}return a=t.serverCache.isFullyInitialized()||null!=Hc(r,qa()),_c(t,s,a,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,o,a){if(null!=Hc(i,n))return t;var s=t.serverCache.isFiltered(),c=t.serverCache;if(null!=r.value){if(Xa(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return tu(e,t,n,c.getNode().getChild(n),i,o,s,a);if(Xa(n)){var u=new xc(null);return c.getNode().forEachChild(hs,(function(e,t){u=u.set(new Ga(e),t)})),ou(e,t,n,u,i,o,s,a)}return t}var l=new xc(null);return r.foreach((function(e,t){var r=Ja(n,e);c.isCompleteForPath(r)&&(l=l.set(e,c.getNode().getChild(r)))})),ou(e,t,n,l,i,o,s,a)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==sc.LISTEN_COMPLETE)throw Sr("Unknown operation type: "+n.type);o=function(e,t,n,r,i){var o=t.serverCache,a=Ec(t,o.getNode(),o.isFullyInitialized()||Xa(n),o.isFiltered());return eu(e,a,n,r,Xc,i)}(e,t,n.path,r,s)}var d=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Sc(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Gs(Sc(t)))}}(t,o,d),{viewCache:o,changes:d}}function eu(e,t,n,r,i,o){var a,s,c=t.eventCache;if(null!=Hc(r,n))return t;if(Xa(n))if(Er(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var u=wc(t),l=qc(r,u instanceof Ps?u:Ps.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{var d=Gc(r,wc(t));a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{var h=Wa(n);if(".priority"===h){Er(1===Ha(n),"Can't have a priority with additional path components");var f=c.getNode(),p=Wc(r,n,f,s=t.serverCache.getNode());a=null!=p?e.filter.updatePriority(f,p):c.getNode()}else{var v,g=za(n);if(c.isCompleteForChild(h)){s=t.serverCache.getNode();var m=Wc(r,n,c.getNode(),s);v=null!=m?c.getNode().getImmediateChild(h).updateChild(g,m):c.getNode().getImmediateChild(h)}else v=Kc(r,h,t.serverCache);a=null!=v?e.filter.updateChild(c.getNode(),h,v,g,i,o):c.getNode()}}return _c(t,a,c.isFullyInitialized()||Xa(n),e.filter.filtersNodes())}function tu(e,t,n,r,i,o,a,s){var c,u=t.serverCache,l=a?e.filter:e.filter.getIndexedFilter();if(Xa(n))c=l.updateFullNode(u.getNode(),r,null);else if(l.filtersNodes()&&!u.isFiltered()){var d=u.getNode().updateChild(n,r);c=l.updateFullNode(u.getNode(),d,null)}else{var h=Wa(n);if(!u.isCompleteForPath(n)&&Ha(n)>1)return t;var f=za(n),p=u.getNode().getImmediateChild(h).updateChild(f,r);c=".priority"===h?l.updatePriority(u.getNode(),p):l.updateChild(u.getNode(),h,p,f,Xc,null)}var v=Ec(t,c,u.isFullyInitialized()||Xa(n),l.filtersNodes());return eu(e,v,n,i,new Qc(i,v,o),s)}function nu(e,t,n,r,i,o,a){var s,c,u=t.eventCache,l=new Qc(i,t,o);if(Xa(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=_c(t,c,!0,e.filter.filtersNodes());else{var d=Wa(n);if(".priority"===d)c=e.filter.updatePriority(t.eventCache.getNode(),r),s=_c(t,c,u.isFullyInitialized(),u.isFiltered());else{var h,f=za(n),p=u.getNode().getImmediateChild(d);if(Xa(f))h=r;else{var v=l.getCompleteChild(d);h=null!=v?".priority"===Ka(f)&&v.getChild(Za(f)).isEmpty()?v:v.updateChild(f,r):Ps.EMPTY_NODE}if(p.equals(h))s=t;else s=_c(t,e.filter.updateChild(u.getNode(),d,h,f,l,a),u.isFullyInitialized(),e.filter.filtersNodes())}}return s}function ru(e,t){return e.eventCache.isCompleteForChild(t)}function iu(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function ou(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var c,u=t;c=Xa(n)?r:new xc(null).setTree(n,r);var l=t.serverCache.getNode();return c.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var c=iu(0,t.serverCache.getNode().getImmediateChild(n),r);u=tu(e,u,new Ga(n),c,i,o,a,s)}})),c.children.inorderTraversal((function(n,r){var c=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!c){var d=iu(0,t.serverCache.getNode().getImmediateChild(n),r);u=tu(e,u,new Ga(n),d,i,o,a,s)}})),u}var au,su=function(){function e(t,n){(0,G.Z)(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,o=new zs(i.getIndex()),a=(r=i).loadsAllData()?new zs(r.getIndex()):r.hasLimit()?new Ys(r):new Ks(r);this.processor_=function(e){return{filter:e}}(a);var s=n.serverCache,c=n.eventCache,u=o.updateFullNode(Ps.EMPTY_NODE,s.getNode(),null),l=a.updateFullNode(Ps.EMPTY_NODE,c.getNode(),null),d=new gc(u,s.isFullyInitialized(),o.filtersNodes()),h=new gc(l,c.isFullyInitialized(),a.filtersNodes());this.viewCache_=bc(h,d),this.eventGenerator_=new mc(this.query_)}return(0,q.Z)(e,[{key:"query",get:function(){return this.query_}}]),e}();function cu(e,t){var n=wc(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Xa(t)&&!n.getImmediateChild(Wa(t)).isEmpty())?n.getChild(t):null}function uu(e){return 0===e.eventRegistrations_.length}function lu(e,t,n){var r=[];if(n){Er(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var o=[],a=0;a<e.eventRegistrations_.length;++a){var s=e.eventRegistrations_[a];if(s.matches(t)){if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(a+1));break}}else o.push(s)}e.eventRegistrations_=o}else e.eventRegistrations_=[];return r}function du(e,t,n,r){t.type===sc.MERGE&&null!==t.source.queryId&&(Er(wc(e.viewCache_),"We should always have a full cache before handling merges"),Er(Sc(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,a=e.viewCache_,s=$c(e.processor_,a,t,n,r);return i=e.processor_,o=s.viewCache,Er(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Er(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Er(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,hu(e,s.changes,s.viewCache.eventCache.getNode(),null)}function hu(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],o=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),yc(e,i,"child_removed",t,r,n),yc(e,i,"child_added",t,r,n),yc(e,i,"child_moved",o,r,n),yc(e,i,"child_changed",t,r,n),yc(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var fu,pu=(0,q.Z)((function e(){(0,G.Z)(this,e),this.views=new Map}));function vu(e,t,n,r){var i=t.source.queryId;if(null!==i){var o=e.views.get(i);return Er(null!=o,"SyncTree gave us an op for an invalid query."),du(o,t,n,r)}var a,s=[],c=(0,fr.Z)(e.views.values());try{for(c.s();!(a=c.n()).done;){var u=a.value;s=s.concat(du(u,t,n,r))}}catch(l){c.e(l)}finally{c.f()}return s}function gu(e,t,n,r,i){var o=t._queryIdentifier,a=e.views.get(o);if(!a){var s=Gc(n,i?r:null),c=!1;s?c=!0:r instanceof Ps?(s=qc(n,r),c=!1):(s=Ps.EMPTY_NODE,c=!1);var u=bc(new gc(s,c,!1),new gc(r,i,!1));return new su(t,u)}return a}function mu(e,t,n,r,i,o){var a=gu(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Os,(function(e,t){r.push(qs(e,t))})),n.isFullyInitialized()&&r.push(Gs(n.getNode())),hu(e,r,n.getNode(),t)}(a,n)}function yu(e,t,n,r){var i=t._queryIdentifier,a=[],s=[],c=wu(e);if("default"===i){var u,l=(0,fr.Z)(e.views.entries());try{for(l.s();!(u=l.n()).done;){var d=(0,o.Z)(u.value,2),h=d[0],f=d[1];s=s.concat(lu(f,n,r)),uu(f)&&(e.views.delete(h),f.query._queryParams.loadsAllData()||a.push(f.query))}}catch(v){l.e(v)}finally{l.f()}}else{var p=e.views.get(i);p&&(s=s.concat(lu(p,n,r)),uu(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return c&&!wu(e)&&a.push(new(Er(au,"Reference.ts has not been loaded"),au)(t._repo,t._path)),{removed:a,events:s}}function bu(e){var t,n=[],r=(0,fr.Z)(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(o){r.e(o)}finally{r.f()}return n}function _u(e,t){var n,r=null,i=(0,fr.Z)(e.views.values());try{for(i.s();!(n=i.n()).done;){var o=n.value;r=r||cu(o,t)}}catch(a){i.e(a)}finally{i.f()}return r}function Eu(e,t){if(t._queryParams.loadsAllData())return xu(e);var n=t._queryIdentifier;return e.views.get(n)}function Su(e,t){return null!=Eu(e,t)}function wu(e){return null!=xu(e)}function xu(e){var t,n=(0,fr.Z)(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var Tu=1,Iu=(0,q.Z)((function e(t){(0,G.Z)(this,e),this.listenProvider_=t,this.syncPointTree_=new xc(null),this.pendingWriteTree_={visibleWrites:Tc.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Ru(e,t,n,r,i){return function(e,t,n,r,i){Er(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ic(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Lu(e,new pc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function ku(e,t,n,r){!function(e,t,n,r){Er(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Rc(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=xc.fromObject(n);return Lu(e,new vc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function Ou(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Mc(e.pendingWriteTree_,t)){var i=new xc(null);return null!=r.snap?i=i.set(qa(),!0):ua(r.children,(function(e){i=i.set(new Ga(e),!0)})),Lu(e,new hc(r.path,i,n))}return[]}function Cu(e,t,n){return Lu(e,new pc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Au(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=t._path,a=e.syncPointTree_.get(o),s=[];if(a&&("default"===t._queryIdentifier||Su(a,t))){var c=yu(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(o));var u=c.removed;if(s=c.events,!i){var l=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),d=e.syncPointTree_.findOnPath(o,(function(e,t){return wu(t)}));if(l&&!d){var h=e.syncPointTree_.subtree(o);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&wu(t))return[xu(t)];var r=[];return t&&(r=bu(t)),ua(n,(function(e,t){r=r.concat(t)})),r}))}(h),p=0;p<f.length;++p){var v=f[p],g=v.query,m=Vu(e,v);e.listenProvider_.startListening(Hu(g),Fu(e,g),m.hashFn,m.onComplete)}}if(!d&&u.length>0&&!r)if(l){e.listenProvider_.stopListening(Hu(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(Bu(t));e.listenProvider_.stopListening(Hu(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Bu(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,u)}return s}function Nu(e,t,n,r){var i=Gu(e,r);if(null!=i){var o=qu(i),a=o.path,s=o.queryId,c=Qa(a,t);return Wu(e,a,new pc(lc(s),c,n))}return[]}function ju(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,o=null,a=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=Qa(e,i);o=o||_u(t,n),a=a||wu(t)}));var s,c=e.syncPointTree_.get(i);(c?(a=a||wu(c),o=o||_u(c,qa())):(c=new pu,e.syncPointTree_=e.syncPointTree_.set(i,c)),null!=o)?s=!0:(s=!1,o=Ps.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=_u(t,qa());n&&(o=o.updateImmediateChild(e,n))})));var u=Su(c,t);if(!u&&!t._queryParams.loadsAllData()){var l=Bu(t);Er(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var d=Tu++;e.queryToTagMap.set(l,d),e.tagToQueryMap.set(d,l)}var h=mu(c,t,n,Lc(e.pendingWriteTree_,i),o,s);if(!u&&!a&&!r){var f=Eu(c,t);h=h.concat(function(e,t,n){var r=t._path,i=Fu(e,t),o=Vu(e,n),a=e.listenProvider_.startListening(Hu(t),i,o.hashFn,o.onComplete),s=e.syncPointTree_.subtree(r);if(i)Er(!wu(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=s.fold((function(e,t,n){if(!Xa(e)&&t&&wu(t))return[xu(t).query];var r=[];return t&&(r=r.concat(bu(t).map((function(e){return e.query})))),ua(n,(function(e,t){r=r.concat(t)})),r})),u=0;u<c.length;++u){var l=c[u];e.listenProvider_.stopListening(Hu(l),Fu(e,l))}return a}(e,t,f))}return h}function Du(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=_u(n,Qa(e,t));if(r)return r}));return Bc(r,t,i,n,!0)}function Pu(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=Qa(e,n);r=r||_u(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||_u(i,qa()):(i=new pu,e.syncPointTree_=e.syncPointTree_.set(n,i));var o=null!=r,a=o?new gc(r,!0,!1):null;return function(e){return Sc(e.viewCache_)}(gu(i,t,Lc(e.pendingWriteTree_,t._path),o?a.getNode():Ps.EMPTY_NODE,o))}function Lu(e,t){return Mu(t,e.syncPointTree_,null,Lc(e.pendingWriteTree_,qa()))}function Mu(e,t,n,r){if(Xa(e.path))return Uu(e,t,n,r);var i=t.get(qa());null==n&&null!=i&&(n=_u(i,qa()));var o=[],a=Wa(e.path),s=e.operationForChild(a),c=t.children.get(a);if(c&&s){var u=n?n.getImmediateChild(a):null,l=Yc(r,a);o=o.concat(Mu(s,c,u,l))}return i&&(o=o.concat(vu(i,e,r,n))),o}function Uu(e,t,n,r){var i=t.get(qa());null==n&&null!=i&&(n=_u(i,qa()));var o=[];return t.children.inorderTraversal((function(t,i){var a=n?n.getImmediateChild(t):null,s=Yc(r,t),c=e.operationForChild(t);c&&(o=o.concat(Uu(c,i,a,s)))})),i&&(o=o.concat(vu(i,e,r,n))),o}function Vu(e,t){var n=t.query,r=Fu(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Ps.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=Gu(e,n);if(r){var i=qu(r),o=i.path,a=i.queryId,s=Qa(o,t);return Wu(e,o,new fc(lc(a),s))}return[]}(e,n._path,r):function(e,t){return Lu(e,new fc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Au(e,n,null,i)}}}function Fu(e,t){var n=Bu(t);return e.queryToTagMap.get(n)}function Bu(e){return e._path.toString()+"$"+e._queryIdentifier}function Gu(e,t){return e.tagToQueryMap.get(t)}function qu(e){var t=e.indexOf("$");return Er(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Ga(e.substr(0,t))}}function Wu(e,t,n){var r=e.syncPointTree_.get(t);return Er(r,"Missing sync point for query tag that we're tracking"),vu(r,n,Lc(e.pendingWriteTree_,t),null)}function Hu(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Er(fu,"Reference.ts has not been loaded"),fu)(e._repo,e._path):e}var zu=function(){function e(t){(0,G.Z)(this,e),this.node_=t}return(0,q.Z)(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Ku=function(){function e(t,n){(0,G.Z)(this,e),this.syncTree_=t,this.path_=n}return(0,q.Z)(e,[{key:"getImmediateChild",value:function(t){var n=Ja(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return Du(this.syncTree_,this.path_)}}]),e}(),Yu=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Zu=function(e,t,n){return e&&"object"===typeof e?(Er(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Ju(e[".sv"],t,n):"object"===typeof e[".sv"]?Xu(e[".sv"],t):void Er(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Ju=function(e,t,n){if("timestamp"===e)return n.timestamp;Er(!1,"Unexpected server value: "+e)},Xu=function(e,t,n){e.hasOwnProperty("increment")||Er(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Er(!1,"Unexpected increment value: "+r);var i=t.node();if(Er(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!==typeof o?r:o+r},Qu=function(e,t,n,r){return el(t,new Ku(n,e),r)},$u=function(e,t,n){return el(e,new zu(t),n)};function el(e,t,n){var r,i=e.getPriority().val(),o=Zu(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,s=Zu(a.getValue(),t,n);return s!==a.getValue()||o!==a.getPriority().val()?new Ts(s,Us(o)):e}var c=e;return r=c,o!==c.getPriority().val()&&(r=r.updatePriority(new Ts(o))),c.forEachChild(Os,(function(e,i){var o=el(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}var tl=(0,q.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};(0,G.Z)(this,e),this.name=t,this.parent=n,this.node=r}));function nl(e,t){for(var n=t instanceof Ga?t:new Ga(t),r=e,i=Wa(n);null!==i;){var o=Hr(r.node.children,i)||{children:{},childCount:0};r=new tl(i,r,o),i=Wa(n=za(n))}return r}function rl(e){return e.node.value}function il(e,t){e.node.value=t,ul(e)}function ol(e){return e.node.childCount>0}function al(e,t){ua(e.node.children,(function(n,r){t(new tl(n,e,r))}))}function sl(e,t,n,r){n&&!r&&t(e),al(e,(function(e){sl(e,t,!0,r)})),n&&r&&t(e)}function cl(e){return new Ga(null===e.parent?e.name:cl(e.parent)+"/"+e.name)}function ul(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===rl(e)&&!ol(e)}(n),i=Wr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,ul(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,ul(e))}(e.parent,e.name,e)}var ll=/[\[\].#$\/\u0000-\u001F\u007F]/,dl=/[\[\].#$\u0000-\u001F\u007F]/,hl=10485760,fl=function(e){return"string"===typeof e&&0!==e.length&&!ll.test(e)},pl=function(e){return"string"===typeof e&&0!==e.length&&!dl.test(e)},vl=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!ta(e)||e&&"object"===typeof e&&Wr(e,".sv")},gl=function(e,t,n,r){r&&void 0===t||ml(ti(e,"value"),t,n)},ml=function e(t,n,r){var i=r instanceof Ga?new ns(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+is(i));if("function"===typeof n)throw new Error(t+"contains a function "+is(i)+" with contents = "+n.toString());if(ta(n))throw new Error(t+"contains "+n.toString()+" "+is(i));if("string"===typeof n&&n.length>hl/3&&ii(n)>hl)throw new Error(t+"contains a string greater than "+hl+" utf8 bytes "+is(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var o=!1,a=!1;if(ua(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!fl(n)))throw new Error(t+" contains an invalid key ("+n+") "+is(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,c;c=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(c),s.byteLength_+=ii(c),rs(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=ii(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),o&&a)throw new Error(t+' contains ".value" child '+is(i)+" in addition to actual children.")}},yl=function(e,t,n,r){if(!r||void 0!==t){var i=ti(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var o=[];ua(t,(function(e,t){var r=new Ga(e);if(ml(i,t,Ja(n,r)),".priority"===Ka(r)&&!vl(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=Ya(r=t[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!fl(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort($a);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&ts(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}},bl=function(e,t,n){if(!n||void 0!==t){if(ta(t))throw new Error(ti(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!vl(t))throw new Error(ti(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},_l=function(e,t,n,r){if((!r||void 0!==n)&&!fl(n))throw new Error(ti(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},El=function(e,t,n,r){if((!r||void 0!==n)&&!pl(n))throw new Error(ti(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Sl=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),El(e,t,n,r)},wl=function(e,t){if(".info"===Wa(t))throw new Error(e+" failed = Can't modify data under /.info/")},xl=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!fl(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),pl(e)}(n))throw new Error(ti(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Tl=(0,q.Z)((function e(){(0,G.Z)(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Il(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||es(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function Rl(e,t,n){Il(e,n),Ol(e,(function(e){return es(e,t)}))}function kl(e,t,n){Il(e,n),Ol(e,(function(e){return ts(e,t)||ts(t,e)}))}function Ol(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Cl(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Cl(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Ko&&Jo("event: "+n.toString()),fa(r)}}}var Al="repo_interrupt",Nl=25,jl=function(){function e(t,n,r,i){(0,G.Z)(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Tl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rc(),this.transactionQueueTree_=new tl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return(0,q.Z)(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Dl(t,n,r){if(t.stats_=ka(t.repoInfo_),t.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new tc(t.repoInfo_,(function(e,n,r,i){Ml(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return Ul(t,!0)}),0);else{if("undefined"!==typeof r&&null!==r){if("object"!==typeof r)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Gr(r)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}t.persistentConnection_=new ss(t.repoInfo_,n,(function(e,n,r,i){Ml(t,e,n,r,i)}),(function(e){Ul(t,e)}),(function(e){!function(e,t){ua(t,(function(t,n){Vl(e,t,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,r),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=function(e,t){var n=e.toString();return Ra[n]||(Ra[n]=t()),Ra[n]}(t.repoInfo_,(function(){return new uc(t.stats_,t.server_)})),t.infoData_=new nc,t.infoSyncTree_=new Iu({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=Cu(t.infoSyncTree_,e._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Vl(t,"connected",!1),t.serverSyncTree_=new Iu({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);kl(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function Pl(e){var t=e.infoData_.getNode(new Ga(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ll(e){return Yu({timestamp:Pl(e)})}function Ml(e,t,n,r,i){e.dataUpdateCount++;var o=new Ga(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var a=[];if(i)if(r){var s=Kr(n,(function(e){return Us(e)}));a=function(e,t,n,r){var i=Gu(e,r);if(i){var o=qu(i),a=o.path,s=o.queryId,c=Qa(a,t),u=xc.fromObject(n);return Wu(e,a,new vc(lc(s),c,u))}return[]}(e.serverSyncTree_,o,s,i)}else{var c=Us(n);a=Nu(e.serverSyncTree_,o,c,i)}else if(r){var u=Kr(n,(function(e){return Us(e)}));a=function(e,t,n){var r=xc.fromObject(n);return Lu(e,new vc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,u)}else{var l=Us(n);a=Cu(e.serverSyncTree_,o,l)}var d=o;a.length>0&&(d=Jl(e,o)),kl(e.eventQueue_,d,a)}function Ul(e,t){Vl(e,"connected",t),!1===t&&function(e){zl(e,"onDisconnectEvents");var t=Ll(e),n=rc();ac(e.onDisconnect_,qa(),(function(r,i){var o=Qu(r,i,e.serverSyncTree_,t);ic(n,r,o)}));var r=[];ac(n,qa(),(function(t,n){r=r.concat(Cu(e.serverSyncTree_,t,n));var i=td(e,t);Jl(e,i)})),e.onDisconnect_=rc(),kl(e.eventQueue_,qa(),r)}(e)}function Vl(e,t,n){var r=new Ga("/.info/"+t),i=Us(n);e.infoData_.updateSnapshot(r,i);var o=Cu(e.infoSyncTree_,r,i);kl(e.eventQueue_,r,o)}function Fl(e){return e.nextWriteId_++}function Bl(e,t,n,r,i){zl(e,"set",{path:t.toString(),value:n,priority:r});var o=Ll(e),a=Us(n,r),s=Du(e.serverSyncTree_,t),c=$u(a,s,o),u=Fl(e),l=Ru(e.serverSyncTree_,t,c,u,!0);Il(e.eventQueue_,l),e.server_.put(t.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||ea("set at "+t+" failed: "+n);var a=Ou(e.serverSyncTree_,u,!o);kl(e.eventQueue_,t,a),Kl(e,i,n,r)}));var d=td(e,t);Jl(e,d),kl(e.eventQueue_,d,[])}function Gl(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&oc(e.onDisconnect_,t),Kl(e,n,r,i)}))}function ql(e,t,n,r){var i=Us(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,o){"ok"===n&&ic(e.onDisconnect_,t,i),Kl(e,r,n,o)}))}function Wl(e,t,n){var r;r=".info"===Wa(t._path)?Au(e.infoSyncTree_,t,n):Au(e.serverSyncTree_,t,n),Rl(e.eventQueue_,t._path,r)}function Hl(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Al)}function zl(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Jo.apply(void 0,[t].concat(r))}function Kl(e,t,n,r){t&&fa((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=new Error(i);o.code=e,t(o)}}))}function Yl(e,t,n){return Du(e.serverSyncTree_,t,n)||Ps.EMPTY_NODE}function Zl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||ed(e,t),rl(t)){var n=Ql(e,t);Er(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Yl(e,t,r),o=i,a=i.hash(),s=0;s<n.length;s++){var c=n[s];Er(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var u=Qa(t,c.path);o=o.updateChild(u,c.currentOutputSnapshotRaw)}var l=o.val(!0),d=t;e.server_.put(d.toString(),l,(function(r){zl(e,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(t){n[t].status=2,i=i.concat(Ou(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)a(s);ed(e,nl(e.transactionQueueTree_,t)),Zl(e,e.transactionQueueTree_),kl(e.eventQueue_,t,i);for(var c=0;c<o.length;c++)fa(o[c])}else{if("datastale"===r)for(var u=0;u<n.length;u++)3===n[u].status?n[u].status=4:n[u].status=0;else{ea("transaction at "+d.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}Jl(e,t)}}),a)}(e,cl(t),n)}else ol(t)&&al(t,(function(t){Zl(e,t)}))}function Jl(e,t){var n=Xl(e,t),r=cl(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],o=t.filter((function(e){return 0===e.status})),a=o.map((function(e){return e.currentWriteId})),s=function(o){var s,c,u=t[o],l=Qa(n,u.path),d=!1;if(Er(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)d=!0,s=u.abortReason,i=i.concat(Ou(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=Nl)d=!0,s="maxretry",i=i.concat(Ou(e.serverSyncTree_,u.currentWriteId,!0));else{var h=Yl(e,u.path,a);u.currentInputSnapshot=h;var f=t[o].update(h.val());if(void 0!==f){ml("transaction failed: Data returned ",f,u.path);var p=Us(f);"object"===typeof f&&null!=f&&Wr(f,".priority")||(p=p.updatePriority(h.getPriority()));var v=u.currentWriteId,g=Ll(e),m=$u(p,h,g);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=Fl(e),a.splice(a.indexOf(v),1),i=(i=i.concat(Ru(e.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(Ou(e.serverSyncTree_,v,!0))}else d=!0,s="nodata",i=i.concat(Ou(e.serverSyncTree_,u.currentWriteId,!0))}kl(e.eventQueue_,n,i),i=[],d&&(t[o].status=2,c=t[o].unwatcher,setTimeout(c,Math.floor(0)),t[o].onComplete&&("nodata"===s?r.push((function(){return t[o].onComplete(null,!1,t[o].currentInputSnapshot)})):r.push((function(){return t[o].onComplete(new Error(s),!1,null)}))))},c=0;c<t.length;c++)s(c);ed(e,e.transactionQueueTree_);for(var u=0;u<r.length;u++)fa(r[u]);Zl(e,e.transactionQueueTree_)}(e,Ql(e,n),r),r}function Xl(e,t){var n,r=e.transactionQueueTree_;for(n=Wa(t);null!==n&&void 0===rl(r);)r=nl(r,n),n=Wa(t=za(t));return r}function Ql(e,t){var n=[];return $l(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function $l(e,t,n){var r=rl(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);al(t,(function(t){$l(e,t,n)}))}function ed(e,t){var n=rl(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,il(t,n.length>0?n:void 0)}al(t,(function(t){ed(e,t)}))}function td(e,t){var n=cl(Xl(e,t)),r=nl(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){nd(e,t)})),nd(e,r),sl(r,(function(t){nd(e,t)})),n}function nd(e,t){var n=rl(t);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Er(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(Er(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Ou(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?il(t,void 0):n.length=o+1,kl(e.eventQueue_,cl(t),i);for(var s=0;s<r.length;s++)fa(r[s])}}var rd=function(e,t){var n=id(e),r=n.namespace;"firebase.com"===n.domain&&$o(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||$o("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ea("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new wa(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Ga(n.pathString)}},id=function(t){var n="",r="",i="",o="",a="",s=!0,c="https",u=443;if("string"===typeof t){var l=t.indexOf("//");l>=0&&(c=t.substring(0,l-1),t=t.substring(l+2));var d=t.indexOf("/");-1===d&&(d=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),n=t.substring(0,Math.min(d,h)),d<h&&(o=function(t){for(var n="",r=t.split("/"),i=0;i<r.length;i++)if(r[i].length>0){var o=r[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(e){}n+="/"+o}return n}(t.substring(d,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=(0,fr.Z)(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var o=i.split("=");2===o.length?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):ea("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(a){r.e(a)}finally{r.f()}return t}(t.substring(Math.min(t.length,h)));(l=n.indexOf(":"))>=0?(s="https"===c||"wss"===c,u=parseInt(n.substring(l+1),10)):l=n.length;var p=n.slice(0,l);if("localhost"===p.toLowerCase())r="localhost";else if(p.split(".").length<=2)r=p;else{var v=n.indexOf(".");i=n.substring(0,v).toLowerCase(),r=n.substring(v+1),a=i}"ns"in f&&(a=f.ns)}return{host:n,port:u,domain:r,subdomain:i,secure:s,scheme:c,pathString:o,namespace:a}},od="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ad=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var o=new Array(8);for(r=7;r>=0;r--)o[r]=od.charAt(n%64),n=Math.floor(n/64);Er(0===n,"Cannot push at time == 0");var a=o.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)a+=od.charAt(t[r]);return Er(20===a.length,"nextPushId: Length should be 20."),a}}(),sd=function(){function e(t,n,r,i){(0,G.Z)(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return(0,q.Z)(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+Gr(this.snapshot.exportVal())}}]),e}(),cd=function(){function e(t,n,r){(0,G.Z)(this,e),this.eventRegistration=t,this.error=n,this.path=r}return(0,q.Z)(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),ud=function(){function e(t,n){(0,G.Z)(this,e),this.snapshotCallback=t,this.cancelCallback=n}return(0,q.Z)(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Er(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),ld=function(){function e(t,n){(0,G.Z)(this,e),this._repo=t,this._path=n}return(0,q.Z)(e,[{key:"cancel",value:function(){var e=new jr;return Gl(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){wl("OnDisconnect.remove",this._path);var e=new jr;return ql(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){wl("OnDisconnect.set",this._path),gl("OnDisconnect.set",e,this._path,!1);var t=new jr;return ql(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){wl("OnDisconnect.setWithPriority",this._path),gl("OnDisconnect.setWithPriority",e,this._path,!1),bl("OnDisconnect.setWithPriority",t,!1);var n=new jr;return function(e,t,n,r,i){var o=Us(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),(function(n,r){"ok"===n&&ic(e.onDisconnect_,t,o),Kl(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){wl("OnDisconnect.update",this._path),yl("OnDisconnect.update",e,this._path,!1);var t=new jr;return function(e,t,n,r){if(zr(n))return Jo("onDisconnect().update() called with empty data.  Don't do anything."),void Kl(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,o){"ok"===i&&ua(n,(function(n,r){var i=Us(r);ic(e.onDisconnect_,Ja(t,n),i)})),Kl(0,r,i,o)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),dd=function(){function e(t,n,r,i){(0,G.Z)(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return(0,q.Z)(e,[{key:"key",get:function(){return Xa(this._path)?null:Ka(this._path)}},{key:"ref",get:function(){return new vd(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=ec(this._queryParams),t=sa(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return ec(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=oi(t))instanceof e))return!1;var n=this._repo===t._repo,r=es(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function hd(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function fd(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===hs){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==na)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==ra)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===Os){if(null!=t&&!vl(t)||null!=n&&!vl(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Er(e.getIndex()instanceof Vs||e.getIndex()===Bs,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function pd(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var vd=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(e,r){return(0,G.Z)(this,n),t.call(this,e,r,new Zs,!1)}return(0,q.Z)(n,[{key:"parent",get:function(){var e=Za(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(dd),gd=function(){function e(t,n,r){(0,G.Z)(this,e),this._node=t,this.ref=n,this._index=r}return(0,q.Z)(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Ga(t),r=bd(this.ref,t);return new e(this._node.getChild(n),r,Os)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,bd(n.ref,r),Os))}))}},{key:"hasChild",value:function(e){var t=new Ga(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function md(e,t){return(e=oi(e))._checkNotDeleted("ref"),void 0!==t?bd(e._root,t):e._root}function yd(e,t){(e=oi(e))._checkNotDeleted("refFromURL");var n=rd(t,e._repo.repoInfo_.nodeAdmin);xl("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||$o("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),md(e,n.path.toString())}function bd(e,t){return null===Wa((e=oi(e))._path)?Sl("child","path",t,!1):El("child","path",t,!1),new vd(e._repo,Ja(e._path,t))}function _d(e,t){e=oi(e),wl("set",e._path),gl("set",t,e._path,!1);var n=new jr;return Bl(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Ed(e,t){yl("update",t,e._path,!1);var n=new jr;return function(e,t,n,r){zl(e,"update",{path:t.toString(),value:n});var i=!0,o=Ll(e),a={};if(ua(n,(function(n,r){i=!1,a[n]=Qu(Ja(t,n),Us(r),e.serverSyncTree_,o)})),i)Jo("update() called with empty data.  Don't do anything."),Kl(0,r,"ok",void 0);else{var s=Fl(e),c=ku(e.serverSyncTree_,t,a,s);Il(e.eventQueue_,c),e.server_.merge(t.toString(),n,(function(n,i){var o="ok"===n;o||ea("update at "+t+" failed: "+n);var a=Ou(e.serverSyncTree_,s,!o),c=a.length>0?Jl(e,t):t;kl(e.eventQueue_,c,a),Kl(0,r,n,i)})),ua(n,(function(n){var r=td(e,Ja(t,n));Jl(e,r)})),kl(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function Sd(e){e=oi(e);var t=new ud((function(){})),n=new wd(t);return function(e,t,n){var r=Pu(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,o=Us(r).withIndex(t._queryParams.getIndex());if(ju(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=Cu(e.serverSyncTree_,t._path,o);else{var a=Fu(e.serverSyncTree_,t);i=Nu(e.serverSyncTree_,t._path,o,a)}return kl(e.eventQueue_,t._path,i),Au(e.serverSyncTree_,t,n,null,!0),o}),(function(n){return zl(e,"get for query "+Gr(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new gd(t,new vd(e._repo,e._path),e._queryParams.getIndex())}))}var wd=function(){function e(t){(0,G.Z)(this,e),this.callbackContext=t}return(0,q.Z)(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new sd("value",this,new gd(e.snapshotNode,new vd(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new cd(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),xd=function(){function e(t,n){(0,G.Z)(this,e),this.eventType=t,this.callbackContext=n}return(0,q.Z)(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new cd(this,e,t):null}},{key:"createEvent",value:function(e,t){Er(null!=e.childName,"Child events should have a childName.");var n=bd(new vd(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new sd(e.type,this,new gd(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function Td(e,t,n,r,i){var o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(t,n){Wl(e._repo,e,u),a(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var c=new ud(n,o||void 0),u="value"===t?new wd(c):new xd(t,c);return function(e,t,n){var r;r=".info"===Wa(t._path)?ju(e.infoSyncTree_,t,n):ju(e.serverSyncTree_,t,n),Rl(e.eventQueue_,t._path,r)}(e._repo,e,u),function(){return Wl(e._repo,e,u)}}function Id(e,t,n,r){return Td(e,"value",t,n,r)}function Rd(e,t,n,r){return Td(e,"child_added",t,n,r)}function kd(e,t,n,r){return Td(e,"child_changed",t,n,r)}function Od(e,t,n,r){return Td(e,"child_moved",t,n,r)}function Cd(e,t,n,r){return Td(e,"child_removed",t,n,r)}function Ad(e,t,n){var r=null,i=n?new ud(n):null;"value"===t?r=new wd(i):t&&(r=new xd(t,i)),Wl(e._repo,e,r)}var Nd=(0,q.Z)((function e(){(0,G.Z)(this,e)})),jd=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(e,r){var i;return(0,G.Z)(this,n),(i=t.call(this))._value=e,i._key=r,i}return(0,q.Z)(n,[{key:"_apply",value:function(e){gl("endAt",this._value,e._path,!0);var t=Xs(e._queryParams,this._value,this._key);if(pd(t),fd(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new dd(e._repo,e._path,t,e._orderByCalled)}}]),n}(Nd);var Dd=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(e,r){var i;return(0,G.Z)(this,n),(i=t.call(this))._value=e,i._key=r,i}return(0,q.Z)(n,[{key:"_apply",value:function(e){gl("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===hs||n?Xs(e,t,n):Xs(e,t,na)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(pd(t),fd(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new dd(e._repo,e._path,t,e._orderByCalled)}}]),n}(Nd);var Pd=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(e,r){var i;return(0,G.Z)(this,n),(i=t.call(this))._value=e,i._key=r,i}return(0,q.Z)(n,[{key:"_apply",value:function(e){gl("startAt",this._value,e._path,!0);var t=Js(e._queryParams,this._value,this._key);if(pd(t),fd(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new dd(e._repo,e._path,t,e._orderByCalled)}}]),n}(Nd);var Ld=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(e,r){var i;return(0,G.Z)(this,n),(i=t.call(this))._value=e,i._key=r,i}return(0,q.Z)(n,[{key:"_apply",value:function(e){gl("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===hs||n?Js(e,t,n):Js(e,t,ra)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(pd(t),fd(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new dd(e._repo,e._path,t,e._orderByCalled)}}]),n}(Nd);var Md=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(e){var r;return(0,G.Z)(this,n),(r=t.call(this))._limit=e,r}return(0,q.Z)(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new dd(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(Nd);var Ud=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(e){var r;return(0,G.Z)(this,n),(r=t.call(this))._limit=e,r}return(0,q.Z)(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new dd(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(Nd);var Vd=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(e){var r;return(0,G.Z)(this,n),(r=t.call(this))._path=e,r}return(0,q.Z)(n,[{key:"_apply",value:function(e){hd(e,"orderByChild");var t=new Ga(this._path);if(Xa(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Vs(t),r=Qs(e._queryParams,n);return fd(r),new dd(e._repo,e._path,r,!0)}}]),n}(Nd);var Fd=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(){return(0,G.Z)(this,n),t.apply(this,arguments)}return(0,q.Z)(n,[{key:"_apply",value:function(e){hd(e,"orderByKey");var t=Qs(e._queryParams,hs);return fd(t),new dd(e._repo,e._path,t,!0)}}]),n}(Nd);var Bd=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(){return(0,G.Z)(this,n),t.apply(this,arguments)}return(0,q.Z)(n,[{key:"_apply",value:function(e){hd(e,"orderByPriority");var t=Qs(e._queryParams,Os);return fd(t),new dd(e._repo,e._path,t,!0)}}]),n}(Nd);var Gd=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(){return(0,G.Z)(this,n),t.apply(this,arguments)}return(0,q.Z)(n,[{key:"_apply",value:function(e){hd(e,"orderByValue");var t=Qs(e._queryParams,Bs);return fd(t),new dd(e._repo,e._path,t,!0)}}]),n}(Nd);var qd=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(e,r){var i;return(0,G.Z)(this,n),(i=t.call(this))._value=e,i._key=r,i}return(0,q.Z)(n,[{key:"_apply",value:function(e){if(gl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new jd(this._value,this._key)._apply(new Pd(this._value,this._key)._apply(e))}}]),n}(Nd);function Wd(e){for(var t=oi(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0,a=r;o<a.length;o++){t=a[o]._apply(t)}return t}!function(e){Er(!au,"__referenceConstructor has already been defined"),au=e}(vd),function(e){Er(!fu,"__referenceConstructor has already been defined"),fu=e}(vd);var Hd="FIREBASE_DATABASE_EMULATOR_HOST",zd={},Kd=!1;function Yd(e,t,n,r,i){var o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||$o("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Jo("Using default host for project ",e.options.projectId),o="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var a,s=rd(o,i),c=s.repoInfo,u=void 0;"undefined"!==typeof process&&(u={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[Hd]),u?(a=!0,o="http://".concat(u,"?ns=").concat(c.namespace),c=(s=rd(o,i)).repoInfo):a=!s.repoInfo.secure;var l=i&&a?new ma(ma.OWNER):new ga(e.name,e.options,t);xl("Invalid Firebase Database URL",s),Xa(s.path)||$o("Database URL must point to the root of a Firebase Database (not including a child path).");var d=function(e,t,n,r){var i=zd[t.name];i||(i={},zd[t.name]=i);var o=i[e.toURLString()];o&&$o("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new jl(e,Kd,n,r),i[e.toURLString()]=o,o}(c,e,l,new va(e.name,n));return new Zd(d,e)}var Zd=function(){function e(t,n){(0,G.Z)(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return(0,q.Z)(e,[{key:"_repo",get:function(){return this._instanceStarted||(Dl(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new vd(this._repo,qa())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=zd[t];n&&n[e.key]===e||$o("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Hl(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&$o("Cannot call "+e+" on a deleted database.")}}]),e}();function Jd(){Pa.IS_TRANSPORT_INITIALIZED&&ea("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Xd(){Jd(),Aa.forceDisallow()}function Qd(){Jd(),Da.forceDisallow(),Aa.forceAllow()}function $d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=oi(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&$o("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,o=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&$o('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ma(ma.OWNER);else if(r.mockUserToken){var a="string"===typeof r.mockUserToken?r.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Rr(JSON.stringify({alg:"none",type:"JWT"})),Rr(JSON.stringify(o)),""].join(".")}(r.mockUserToken,e.app.options.projectId);o=new ma(a)}!function(e,t,n,r){e.repoInfo_=new wa("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,o)}function eh(e){var t;(e=oi(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(Al)}function th(e,t){Zo(e,t)}var nh={".sv":"timestamp"};var rh=function(){function e(t,n){(0,G.Z)(this,e),this.committed=t,this.snapshot=n}return(0,q.Z)(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function ih(e,t,n){var r;if(e=oi(e),wl("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,o=new jr,a=Id(e,(function(){}));return function(e,t,n,r,i,o){zl(e,"transaction on "+t);var a={path:t,update:n,onComplete:r,status:null,order:Wo(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=Yl(e,t,void 0);a.currentInputSnapshot=s;var c=a.update(s.val());if(void 0===c)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{ml("transaction failed: Data returned ",c,a.path),a.status=0;var u,l=nl(e.transactionQueueTree_,t),d=rl(l)||[];d.push(a),il(l,d),"object"===typeof c&&null!==c&&Wr(c,".priority")?(u=Hr(c,".priority"),Er(vl(u),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):u=(Du(e.serverSyncTree_,t)||Ps.EMPTY_NODE).getPriority().val();var h=Ll(e),f=Us(c,u),p=$u(f,s,h);a.currentOutputSnapshotRaw=f,a.currentOutputSnapshotResolved=p,a.currentWriteId=Fl(e);var v=Ru(e.serverSyncTree_,t,p,a.currentWriteId,a.applyLocally);kl(e.eventQueue_,t,v),Zl(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?o.reject(t):(i=new gd(r,new vd(e._repo,e._path),Os),o.resolve(new rh(n,i)))}),a,i),o.promise}ss.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},ss.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Mo(eo),Ki(new ai("database",(function(e,t){var n=t.instanceIdentifier;return Yd(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),ao(Do,Po,e),ao(Do,Po,"esm2017")}();var oh=new mi("@firebase/database-compat"),ah=function(e){var t="FIREBASE WARNING: "+e;oh.warn(t)},sh=function(){function e(t){(0,G.Z)(this,e),this._delegate=t}return(0,q.Z)(e,[{key:"cancel",value:function(e){ei("OnDisconnect.cancel",0,1,arguments.length),ni("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){ei("OnDisconnect.remove",0,1,arguments.length),ni("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){ei("OnDisconnect.set",1,2,arguments.length),ni("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){ei("OnDisconnect.setWithPriority",2,3,arguments.length),ni("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(ei("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,ah("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ni("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),ch=function(){function e(t,n){(0,G.Z)(this,e),this.committed=t,this.snapshot=n}return(0,q.Z)(e,[{key:"toJSON",value:function(){return ei("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),uh=function(){function e(t,n){(0,G.Z)(this,e),this._database=t,this._delegate=n}return(0,q.Z)(e,[{key:"val",value:function(){return ei("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return ei("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return ei("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return ei("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return ei("DataSnapshot.child",0,1,arguments.length),t=String(t),El("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return ei("DataSnapshot.hasChild",1,1,arguments.length),El("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return ei("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return ei("DataSnapshot.forEach",1,1,arguments.length),ni("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return ei("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return ei("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return ei("DataSnapshot.ref",0,0,arguments.length),new dh(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),lh=function(){function e(t,n){(0,G.Z)(this,e),this.database=t,this._delegate=n}return(0,q.Z)(e,[{key:"on",value:function(t,n,r,i){var o,a=this;ei("Query.on",2,4,arguments.length),ni("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),c=function(e,t){n.call(s.context,new uh(a.database,e),t)};c.userCallback=n,c.context=s.context;var u=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(t){case"value":return Id(this._delegate,c,u),n;case"child_added":return Rd(this._delegate,c,u),n;case"child_removed":return Cd(this._delegate,c,u),n;case"child_changed":return kd(this._delegate,c,u),n;case"child_moved":return Od(this._delegate,c,u),n;default:throw new Error(ti("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(ei("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ti(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),ni("Query.off","callback",t,!0),ri("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,Ad(this._delegate,e,r)}else Ad(this._delegate,e)}},{key:"get",value:function(){var e=this;return Sd(this._delegate).then((function(t){return new uh(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var o=this;ei("Query.once",1,4,arguments.length),ni("Query.once","callback",n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),s=new jr,c=function(e,t){var r=new uh(o.database,e);n&&n.call(a.context,r,t),s.resolve(r)};c.userCallback=n,c.context=a.context;var u=function(e){a.cancel&&a.cancel.call(a.context,e),s.reject(e)};switch(t){case"value":Id(this._delegate,c,u,{onlyOnce:!0});break;case"child_added":Rd(this._delegate,c,u,{onlyOnce:!0});break;case"child_removed":Cd(this._delegate,c,u,{onlyOnce:!0});break;case"child_changed":kd(this._delegate,c,u,{onlyOnce:!0});break;case"child_moved":Od(this._delegate,c,u,{onlyOnce:!0});break;default:throw new Error(ti("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return ei("Query.limitToFirst",1,1,arguments.length),new e(this.database,Wd(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Md(e)}(t)))}},{key:"limitToLast",value:function(t){return ei("Query.limitToLast",1,1,arguments.length),new e(this.database,Wd(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ud(e)}(t)))}},{key:"orderByChild",value:function(t){return ei("Query.orderByChild",1,1,arguments.length),new e(this.database,Wd(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return El("orderByChild","path",e,!1),new Vd(e)}(t)))}},{key:"orderByKey",value:function(){return ei("Query.orderByKey",0,0,arguments.length),new e(this.database,Wd(this._delegate,new Fd))}},{key:"orderByPriority",value:function(){return ei("Query.orderByPriority",0,0,arguments.length),new e(this.database,Wd(this._delegate,new Bd))}},{key:"orderByValue",value:function(){return ei("Query.orderByValue",0,0,arguments.length),new e(this.database,Wd(this._delegate,new Gd))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ei("Query.startAt",0,2,arguments.length),new e(this.database,Wd(this._delegate,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return _l("startAt","key",t,!0),new Pd(e,t)}(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ei("Query.startAfter",0,2,arguments.length),new e(this.database,Wd(this._delegate,function(e,t){return _l("startAfter","key",t,!0),new Ld(e,t)}(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ei("Query.endAt",0,2,arguments.length),new e(this.database,Wd(this._delegate,function(e,t){return _l("endAt","key",t,!0),new jd(e,t)}(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ei("Query.endBefore",0,2,arguments.length),new e(this.database,Wd(this._delegate,function(e,t){return _l("endBefore","key",t,!0),new Dd(e,t)}(t,n)))}},{key:"equalTo",value:function(t,n){return ei("Query.equalTo",1,2,arguments.length),new e(this.database,Wd(this._delegate,function(e,t){return _l("equalTo","key",t,!0),new qd(e,t)}(t,n)))}},{key:"toString",value:function(){return ei("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return ei("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(ei("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new dh(this.database,new vd(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,ni(e,"cancel",r.cancel,!0),r.context=n,ri(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(ti(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),dh=function(e){(0,vr.Z)(n,e);var t=(0,gr.Z)(n);function n(e,r){var i;return(0,G.Z)(this,n),(i=t.call(this,e,new dd(r._repo,r._path,new Zs,!1))).database=e,i._delegate=r,i}return(0,q.Z)(n,[{key:"getKey",value:function(){return ei("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return ei("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,bd(this._delegate,e))}},{key:"getParent",value:function(){ei("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return ei("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){ei("Reference.set",1,2,arguments.length),ni("Reference.set","onComplete",t,!0);var n=_d(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(ei("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,ah("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wl("Reference.update",this._delegate._path),ni("Reference.update","onComplete",t,!0);var i=Ed(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){ei("Reference.setWithPriority",2,3,arguments.length),ni("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(wl("setWithPriority",e._path),gl("setWithPriority",t,e._path,!1),bl("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new jr;return Bl(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){ei("Reference.remove",0,1,arguments.length),ni("Reference.remove","onComplete",e,!0);var t,n=(t=this._delegate,wl("remove",t._path),_d(t,null));return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n}},{key:"transaction",value:function(e,t,n){var r=this;ei("Reference.transaction",1,3,arguments.length),ni("Reference.transaction","transactionUpdate",e,!1),ni("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(ti(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);var i=ih(this._delegate,e,{applyLocally:n}).then((function(e){return new ch(e.committed,new uh(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){ei("Reference.setPriority",1,2,arguments.length),ni("Reference.setPriority","onComplete",t,!0);var n=function(e,t){e=oi(e),wl("setPriority",e._path),bl("setPriority",t,!1);var n=new jr;return Bl(e._repo,Ja(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;ei("Reference.push",0,2,arguments.length),ni("Reference.push","onComplete",t,!0);var i=function(e,t){e=oi(e),wl("push",e._path),gl("push",t,e._path,!0);var n,r=Pl(e._repo),i=ad(r),o=bd(e,i),a=bd(e,i);return n=null!=t?_d(a,t).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),o}(this._delegate,e),o=i.then((function(e){return new n(r.database,e)}));t&&o.then((function(){return t(null)}),(function(e){return t(e)}));var a=new n(this.database,i);return a.then=o.then.bind(o),a.catch=o.catch.bind(o,void 0),a}},{key:"onDisconnect",value:function(){return wl("Reference.onDisconnect",this._delegate._path),new sh(new ld(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(lh),hh=function(){function e(t,n){var r=this;(0,G.Z)(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:Xd,forceLongPolling:Qd}}return(0,q.Z)(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$d(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(ei("database.ref",0,1,arguments.length),e instanceof dh){var t=yd(this._delegate,e.toString());return new dh(this,t)}var n=md(this._delegate,e);return new dh(this,n)}},{key:"refFromURL",value:function(e){ei("database.refFromURL",1,1,arguments.length);var t=yd(this._delegate,e);return new dh(this,t)}},{key:"goOffline",value:function(){return ei("database.goOffline",0,0,arguments.length),(e=oi(e=this._delegate))._checkNotDeleted("goOffline"),void Hl(e._repo);var e}},{key:"goOnline",value:function(){return ei("database.goOnline",0,0,arguments.length),eh(this._delegate)}}]),e}();hh.ServerValue={TIMESTAMP:nh,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var fh,ph=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,o=e.namespace,a=e.nodeAdmin,s=void 0!==a&&a;Mo(r);var c=new ci("auth-internal",new di("database-standalone"));return c.setComponent(new ai("auth-internal",(function(){return i}),"PRIVATE")),{instance:new hh(Yd(t,c,void 0,n,s),t),namespace:o}}}),vh=hh.ServerValue;(fh=jo).INTERNAL.registerComponent(new ai("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new hh(i,r)}),"PUBLIC").setServiceProps({Reference:dh,Query:lh,Database:hh,DataSnapshot:uh,enableLogging:th,INTERNAL:ph,ServerValue:vh}).setMultipleInstances(!0)),fh.registerVersion("@firebase/database-compat","0.3.4");jo.initializeApp({apiKey:"AIzaSyDpvg_yU_5Vy50xhmazhQttRzJrmiNoHXw",authDomain:"nakshtratalk-c3e11.firebaseapp.com",databaseURL:"https://nakshtratalk-c3e11-default-rtdb.firebaseio.com",projectId:"nakshtratalk-c3e11",storageBucket:"nakshtratalk-c3e11.appspot.com",messagingSenderId:"564770298148",appId:"1:564770298148:web:06f1049cabdfa628eabbb1"});var gh=jo;var mh=function(e){e.showVideo,e.remoteVideoURL;var t=(0,n.useState)(0),r=(0,o.Z)(t,2),a=r[0],s=r[1],c=(0,n.useState)(""),u=(0,o.Z)(c,2),l=u[0],d=u[1],h=(0,n.useState)((function(){var e=localStorage.getItem("_id");return console.log("idasddasdasdads",e),null!=e?e:[]})),f=((0,o.Z)(h,1)[0],localStorage.getItem("videoatro_token")),p=(0,n.useRef)(null),v=((0,n.useRef)(null),(0,n.useRef)(null)),g=(0,n.useRef)(null),m=localStorage.getItem("data"),y=JSON.parse(m),b=(0,n.useState)(y),_=(0,o.Z)(b,2),E=(_[0],_[1],(0,n.useState)([])),S=(0,o.Z)(E,2),w=(S[0],S[1]);(0,n.useEffect)((function(){x()}),[]);var x=function(){var e={user_id:localStorage.getItem("iddofuser")};Ye.post("http://103.104.74.215:3012/api/user/get_wallet_user",e).then((function(e){return w(e.data.data)})).then((function(e){w(e.data.data)}))},T=(0,n.useState)(0),I=(0,o.Z)(T,2),R=I[0],k=I[1];(0,n.useEffect)((function(){var e=setInterval((function(){k((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}),[R]);var O=(0,i.s0)(),C=(0,n.useState)([]),A=(0,o.Z)(C,2),N=(A[0],A[1],(0,n.useState)("")),j=(0,o.Z)(N,2),D=(j[0],j[1],(0,n.useState)([])),P=(0,o.Z)(D,2),L=(P[0],P[1]),M=(0,n.useState)((function(){var e=localStorage.getItem("_id");return null!=e?JSON.parse(e):[]})),U=(0,o.Z)(M,2);U[0],U[1];(0,n.useEffect)((function(){V()}),[]);var V=function(){var e={_id:localStorage.getItem("iddofuser")};Ye.post("http://103.104.74.215:3012/api/user/get_user_profile/",e).then((function(e){return L(e.data.data)}))},F=localStorage.getItem("channel_token");(0,n.useEffect)((function(){var e=function(){var e=lt(ct().mark((function e(){var t,n,r,i;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.current=Dn().createClient({mode:"rtc",codec:"vp8"}),e.next=3,p.current.join("b13de305bceb4aa1a434b8a295f990dd",F,f,null);case 3:return e.next=5,Promise.all([Dn().createMicrophoneAudioTrack(),Dn().createCameraVideoTrack()]);case 5:return t=e.sent,n=(0,o.Z)(t,2),r=n[0],i=n[1],v.current=r,g.current=i,g.current.play("<LOCAL_VIDEO_ELEMENT_ID>"),e.next=14,p.current.publish([r,i]);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f&&e(),function(){p.current&&p.current.leave()}}),[f]),(0,n.useEffect)((function(){p.current&&p.current.on("user-published",function(){var e=lt(ct().mark((function e(t,n){var r,i;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.current.subscribe(t,n);case 2:if("video"!==n){e.next=8;break}if(!(r=t.videoTrack)){e.next=6;break}return e.abrupt("return",r.play("<REMOTE_VIDEO_ELEMENT_ID>"));case 6:e.next=9;break;case 8:"audio"===n&&(i=t.audioTrack)&&i.play();case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),[f]);var B=function(){d(K);var e=localStorage.getItem("videoatro_token"),t=0;p.current&&(t=localStorage.getItem("totalminute")?K.toString():0);var n={token:e,final_time:t.toString()};console.log("sadasdasdsadada",n),Ye.post("http://103.104.74.215:3012/api/user/remove_calling_user",n).then((function(){return O("/Rating")}))},G=(0,n.useState)(0),q=(0,o.Z)(G,2),W=q[0],H=q[1];(0,n.useEffect)((function(){var e,t=(new Date).getTime();return e=setInterval((function(){var e=(new Date).getTime();H(e-t)}),1e3),function(){return clearInterval(e)}}),[]);var z=function(e){var t=Math.floor(e/36e5),n=Math.floor(e%36e5/6e4),r=Math.floor(e%6e4/1e3);return"".concat(t<10?"0"+t:t,":").concat(n<10?"0"+n:n,":").concat(r<10?"0"+r:r)},K=function(e){var t=e.split(":").map(Number),n=(0,o.Z)(t,2);return 60*n[0]+n[1]}(z(W));(0,n.useEffect)((function(){d(K)}),[l,K]),(0,n.useEffect)((function(){var e=setInterval((function(){s((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}),[]);var Y=60*localStorage.getItem("totalminute");return(0,n.useEffect)((function(){a>=Y&&B()}),[a]),(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsxs)("div",{className:"text-center",children:[(0,Je.jsx)("h4",{children:"Time Now"}),(0,Je.jsx)("p",{id:"timer",children:z(W)})]})}),(0,Je.jsx)("button",{onClick:B,class:" btn-md bg-dark  text-white w-80",children:"Disconnect"}),(0,Je.jsxs)("div",{className:"row",children:[(0,Je.jsx)("div",{className:"col-sm-6",style:{border:"1px solid black",height:"400px"},children:(0,Je.jsx)("video",{id:"<REMOTE_VIDEO_ELEMENT_ID>",autoPlay:!0,playsInline:!0,muted:!0,width:"100%",height:"100%"})}),(0,Je.jsx)("div",{className:"col-sm-6",style:{border:"1px solid black",height:"400px"},children:(0,Je.jsx)("video",{id:"<LOCAL_VIDEO_ELEMENT_ID>",autoPlay:!0,playsInline:!0,muted:!0,width:"100%",height:"100%"})})]})]})},yh=function(){var e=localStorage.getItem("data"),t=JSON.parse(e),r=(0,n.useState)(t),a=(0,o.Z)(r,2),s=(a[0],a[1],(0,n.useState)()),c=(0,o.Z)(s,2),u=c[0],l=c[1],d=(0,n.useState)(0),h=(0,o.Z)(d,2),f=h[0],p=h[1],v=(0,n.useState)(""),g=(0,o.Z)(v,2),m=(g[0],g[1],(0,n.useState)()),y=(0,o.Z)(m,2),b=y[0],_=y[1],E=localStorage.getItem("chatrate");(0,n.useEffect)((function(){var e=u/E,t=Math.floor(e);_(t)}),[u,E]),(0,n.useEffect)((function(){S()}),[]);var S=function(){var e={user_id:M};Ye.post("http://103.104.74.215:3012/api/user/get_wallet_user",e).then((function(e){return l(e.data.data.ammount)}))},w=(localStorage.getItem("totalminute"),(0,i.s0)()),x=(0,n.useState)([]),T=(0,o.Z)(x,2),I=T[0],R=T[1],k=(0,n.useState)(""),O=(0,o.Z)(k,2),C=O[0],A=O[1],N=(0,n.useState)([]),j=(0,o.Z)(N,2),D=(j[0],j[1]),P=(0,n.useState)((function(){var e=localStorage.getItem("_id");return null!=e?JSON.parse(e):[]})),L=(0,o.Z)(P,2),M=L[0],U=(L[1],localStorage.getItem("chatdata")),V=JSON.parse(U),F=(0,n.useState)(V),B=(0,o.Z)(F,2),G=B[0];B[1];(0,n.useEffect)((function(){gh.database().ref("add").on("value",(function(e){var t=e.val();if(t)Object.values(t)}))}),[]);(0,n.useEffect)((function(){q()}),[]);var q=function(){var e={_id:M};Ye.post("http://103.104.74.215:3012/api/user/get_user_profile/",e).then((function(e){return D(e.data.data)}))},W=M;(0,n.useEffect)((function(){gh.database().ref("add").on("value",(function(e){var t=e.val();if(t){var n=Object.values(t),r=(G._id,M),i=n.filter((function(e){if(e)return"receiver"===e.type||e.sender_id===r}));R(i)}}))}),[]);var H=(0,n.useState)(0),z=(0,o.Z)(H,2),K=z[0],Y=z[1];(0,n.useEffect)((function(){var e,t=(new Date).getTime();return e=setInterval((function(){var e=(new Date).getTime();Y(e-t)}),1e3),function(){return clearInterval(e)}}),[]);var Z=function(e){var t=Math.floor(e/36e5),n=Math.floor(e%36e5/6e4),r=Math.floor(e%6e4/1e3);return"".concat(t,":").concat(n,":").concat(r)},J=function(e){var t=e.split(":").map(Number),n=(0,o.Z)(t,2);return 60*n[0]+n[1]}(Z(K)),X=function(){var e={user_id:M,astrologer_id:G._id,final_time:J.toString()};console.log("sadsadasdasdasd",e),Ye.post("http://103.104.74.215:3012/api/user/disconnect_chat",e).then((function(){return w("/")}))};(0,n.useEffect)((function(){var e=setInterval((function(){p((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}),[]);var Q=60*b;return(0,n.useEffect)((function(){f>=Q&&X()}),[f]),(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsx)("section",{style:{backgroundColor:"#eee"},children:(0,Je.jsx)("div",{className:"container py-5",children:(0,Je.jsx)("div",{className:"row d-flex justify-content-center",children:(0,Je.jsx)("div",{className:"col-lg-6",children:(0,Je.jsxs)("div",{className:"card",children:[(0,Je.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-center p-3",style:{borderTop:"4px solid #ffa900"},children:[(0,Je.jsx)("h5",{className:"mb-0",children:"Chat messages"}),(0,Je.jsxs)("h4",{children:["Time Now-",Z(K)]}),(0,Je.jsx)("p",{id:"timer"}),(0,Je.jsx)("div",{className:"d-flex flex-row align-items-center",children:(0,Je.jsx)("i",{onClick:X,style:{fontSize:20,fontWeight:"bolder",cursor:"pointer"},class:"fa fa-times","aria-hidden":"true"})})]}),(0,Je.jsx)("div",{className:"card-body","data-mdb-perfect-scrollbar":"true",style:{position:"relative",height:"300px",overflowY:"scroll"},children:I.map((function(e){return(0,Je.jsx)(Je.Fragment,{children:e.sender_id==W?(0,Je.jsx)("div",{className:"direct-chat-msg",children:(0,Je.jsx)("div",{className:"direct-chat-text",style:{float:"right"},children:(0,Je.jsx)("p",{style:{float:"right"},children:e.title})})}):(0,Je.jsx)("div",{className:"direct-chat-msg",children:(0,Je.jsx)("div",{className:" direct-chat-text",style:{width:"80%",marginLeft:"0px"},children:(0,Je.jsx)("p",{children:"receiver"==e.type&&e.title})})})})}))}),(0,Je.jsx)("div",{className:"card-footer text-muted d-flex justify-content-start align-items-center p-3",children:(0,Je.jsxs)("div",{className:"input-group mb-0",children:[(0,Je.jsx)("input",{type:"text",value:C,onChange:function(e){return A(e.target.value)},className:"form-control",placeholder:"Type message","aria-label":"Recipient's username","aria-describedby":"button-addon2"}),(0,Je.jsx)("button",{onClick:function(){var e=Date.now().toString();if(""!==C.trim()){var t=e;gh.database().ref("add").child(t).set({title:C,sender_id:M,receiver_id:G._id,time:e}),A("")}},className:"btn btn-warning",type:"button",id:"button-addon2",style:{paddingTop:".55rem"},children:"Send"})]})})]})})})})})})};var bh=function(){var e=(0,i.s0)(),t=(0,n.useState)(""),r=(0,o.Z)(t,2),a=r[0],s=r[1],c=(0,n.useState)((function(){var e=localStorage.getItem("_id");return null!=e?JSON.parse(e):[]})),u=(0,o.Z)(c,2),l=u[0],d=(u[1],localStorage.getItem("chatdata")),h=JSON.parse(d),f=(0,n.useState)(h),p=(0,o.Z)(f,2),v=p[0],g=(p[1],(0,n.useState)(!1)),m=(0,o.Z)(g,2),y=m[0],b=m[1],_=(0,n.useState)([]),E=(0,o.Z)(_,2);E[0],E[1],(0,n.useEffect)((function(){S()}),[]);var S=function(){var e={user_id:l};Ye.post("http://103.104.74.215:3012/api/user/get_wallet_user",e).then((function(e){return localStorage.setItem("data",JSON.stringify(e.data.data))}))};return(0,Je.jsxs)(Je.Fragment,{children:[!0===y&&(0,Je.jsxs)("div",{class:"fullpage-loader",children:[(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{}),(0,Je.jsx)("span",{})]}),(0,Je.jsx)(Xe,{}),(0,Je.jsxs)("div",{class:"profile-tab ",style:{marginLeft:"35%"},children:[(0,Je.jsxs)("ul",{children:[(0,Je.jsxs)("li",{children:[(0,Je.jsx)("h5",{children:"Name :"}),(0,Je.jsx)("input",{onChange:function(e){return s((0,tt.Z)((0,tt.Z)({},a),{},{full_name:e.target.value}))},type:"text",class:"form-control",id:"companyName",style:{width:"30%"}})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("h5",{children:"Gender :"}),(0,Je.jsxs)("select",{onChange:function(e){return s((0,tt.Z)((0,tt.Z)({},a),{},{gender:e.target.value}))},class:"form-control",id:"companyName",style:{height:43,width:"30%"},children:[(0,Je.jsx)("option",{selected:!0,disabled:!0,children:"--select gender--"}),(0,Je.jsx)("option",{children:"Male"}),(0,Je.jsx)("option",{children:"Female"}),(0,Je.jsx)("option",{children:"Other"})]})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("h5",{children:"Date of birth :"}),(0,Je.jsx)("input",{style:{width:"30%"},onChange:function(e){return s((0,tt.Z)((0,tt.Z)({},a),{},{date_of_birth:e.target.value}))},type:"date",class:"form-control",id:"companyName"})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("h5",{children:"Time of birth :"}),(0,Je.jsx)("input",{onChange:function(e){return s((0,tt.Z)((0,tt.Z)({},a),{},{time_of_birth:e.target.value}))},type:"time",class:"form-control",id:"companyName",style:{width:"30%"}})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("h5",{children:"Place of birth :"}),(0,Je.jsx)("input",{onChange:function(e){return s((0,tt.Z)((0,tt.Z)({},a),{},{place_of_birth:e.target.value}))},type:"text",class:"form-control",id:"companyName",style:{width:"30%"}})]}),(0,Je.jsxs)("li",{children:[(0,Je.jsx)("h5",{children:"Message :"}),(0,Je.jsx)("input",{style:{width:"30%"},type:"text",class:"form-control",id:"companyName"})]}),(0,Je.jsx)("li",{})]}),(0,Je.jsx)("button",{style:{marginLeft:"20%"},class:"btn btn-sm theme-bg-color text-white",onClick:function(t){t.preventDefault();var n={sender_id:l,receiver_id:v._id,full_name:a.full_name,gender:a.gender,date_of_birth:a.date_of_birth,time_of_birth:a.time_of_birth,place_of_birth:a.place_of_birth};Ye.post("http://103.104.74.215:3012/api/user/add_chat",n).then((function(t){b(!0),e("/chat")}))},children:"submit"}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{})]}),(0,Je.jsx)(Ze.default,{})]})};var _h=function(){return(0,Je.jsx)(Je.Fragment,{children:(0,Je.jsxs)("section",{className:"coming-soon-section pt-0",children:[(0,Je.jsx)("div",{className:"bg-black"}),(0,Je.jsx)("div",{className:"container-fluid-lg w-100",children:(0,Je.jsxs)("div",{className:"row",children:[(0,Je.jsx)("div",{className:"col-lg-5"}),(0,Je.jsx)("div",{className:"col-xxl-5 col-xl-6 col-lg-7",children:(0,Je.jsx)("div",{className:"coming-box",children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("div",{className:"coming-title",children:(0,Je.jsx)("h2",{style:{color:"white"},children:"We are Coming Soon..."})}),(0,Je.jsx)("p",{className:"coming-text",style:{color:"white"},children:"We are currently working on an awesome new site. Stay tuned for more information. Subscribe to our newsletter to stay updated on our progress."}),(0,Je.jsx)("div",{className:"coming-timer",id:"clockdiv-1","data-hours":1,"data-minutes":2,"data-seconds":3,children:(0,Je.jsxs)("ul",{className:"d-flex justify-content-center",children:[(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{className:"counter",children:[(0,Je.jsx)("div",{className:"days",children:"14"}),(0,Je.jsx)("p",{children:"Day"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{className:"counter",children:[(0,Je.jsx)("div",{className:"hours",children:"23"}),(0,Je.jsx)("p",{children:"Hour"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{className:"counter",children:[(0,Je.jsx)("div",{className:"minutes",children:"59"}),(0,Je.jsx)("p",{children:"Min"})]})}),(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{className:"counter",children:[(0,Je.jsx)("div",{className:"seconds",children:"19"}),(0,Je.jsx)("p",{children:"Sec"})]})})]})}),(0,Je.jsx)("div",{className:"coming-contain",children:(0,Je.jsxs)("div",{className:"coming-form input-group",children:[(0,Je.jsx)("input",{type:"email",className:"form-control",id:"exampleFormControlInput1",placeholder:"Enter Your Email Address"}),(0,Je.jsx)("a",{href:"otp.html"}),(0,Je.jsx)("button",{className:"coming-button",children:(0,Je.jsx)("a",{href:"otp.html",children:" Sign Up"})})]})})]})})})]})})]})})};var Eh=function(){var e=(0,i.s0)();(0,n.useEffect)((function(){l()}),[]);var t=(0,n.useState)([]),r=(0,o.Z)(t,2),a=r[0],s=r[1],c=(0,n.useState)((function(){var e=localStorage.getItem("_id");return null!=e?JSON.parse(e):[]})),u=(0,o.Z)(c,2),l=(u[0],u[1],function(){var e={user_id:localStorage.getItem("iddofuser")};Ye.post("http://103.104.74.215:3012/api/user/astrologer_list/",e).then((function(e){s(e.data.data)}))}),d=(0,n.useState)(),h=(0,o.Z)(d,2),f=h[0],p=h[1],v=localStorage.getItem("chatrate"),g=(0,n.useState)(),m=(0,o.Z)(g,2),y=(m[0],m[1]);(0,n.useEffect)((function(){var e=f/v,t=Math.floor(e);y(t)}),[f]),(0,n.useEffect)((function(){b()}),[,f,v]);var b=function(){var e={user_id:localStorage.getItem("iddofuser")};Ye.post("http://103.104.74.215:3012/api/user/get_wallet_user",e).then((function(e){return p(e.data.data.ammount)}))};return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"section-b-space shop-section",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsxs)("div",{class:"col-12",children:[(0,Je.jsx)("div",{class:"show-button",children:(0,Je.jsx)("div",{class:"top-filter-menu-2",children:(0,Je.jsx)("div",{class:"sidebar-filter-menu","data-bs-toggle":"collapse","data-bs-target":"#collapseExample",children:(0,Je.jsxs)("a",{href:"shop-top-filter1.html",children:[(0,Je.jsx)("i",{class:"fa-solid fa-house"})," Chat With Astrologer"]})})})}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"row g-sm-4 g-3",children:[" ",null===a||void 0===a?void 0:a.map((function(t){return(0,Je.jsx)("div",{class:"col-xl-3 col-sm-3",style:{width:""},children:(0,Je.jsxs)("div",{class:"seller-grid-box seller-grid-box-1",children:[(0,Je.jsxs)("div",{class:"grid-image",children:[(0,Je.jsxs)("div",{class:"image",children:[(0,Je.jsx)("img",{onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},src:"http://103.104.74.215:3012/uploads/"+t.profile_pic,class:"img-fluid",alt:"",style:{height:"60px ",width:"60px",borderRadius:"100%"}}),(0,Je.jsxs)("button",{onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},onclick:"location.href = 'product-4-image.html';",class:"nav-item",style:{borderRadius:"15px",width:"60px",height:"30px",borderColor:"#f5b60a",boxShadow:"5px"},children:[t.review?t.review:"0",(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{style:{fontWeight:"bolder"},class:"fa fa-star-o","aria-hidden":"true"})})]})]}),(0,Je.jsx)("div",{class:"contain-name",onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h4",{children:t.name}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:t.language})}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:t.role})})]})})]}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{onClick:function(){localStorage.setItem("AstroData",JSON.stringify(t)),e("/AstrologerDetail")},class:"grid-contain",style:{width:"100%",paddingBottom:"20px"},children:[(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"60%",float:"left"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-map-pin"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsxs)("h5",{children:[t.experiance_year," "]})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-phone"})}),(0,Je.jsx)("div",{class:"contact-detail",children:(0,Je.jsxs)("h5",{children:[" ","\u20b9 ",t.chat_rate?t.chat_rate:"0","/Min"]})})]})]}),"1"===t.chat_status?(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"40%",float:"right"},children:[(0,Je.jsx)("div",{class:"saller-contact",children:(0,Je.jsx)("img",{onClick:function(){f>=t.chat_rate?e("/ChatForm"):alert("You have Insufficient balance"),localStorage.setItem("chatdata",JSON.stringify(t)),localStorage.setItem("chatiddd",t._id),localStorage.setItem("chatrate",t.chat_rate)},src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:"25px",marginLeft:"10px"}})}),(0,Je.jsx)("div",{class:"saller-contact",children:(0,Je.jsx)("div",{class:"contact-detail",style:{marginLeft:"10px"},children:(0,Je.jsx)("h6",{children:" Chat"})})})]}):(0,Je.jsxs)("div",{className:"seller-contact-details",style:{width:"40%",float:"right"},children:[(0,Je.jsx)("div",{className:"seller-contact",children:(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",className:"img-fluid",alt:"",style:{height:"25px",marginLeft:"10px"}})}),(0,Je.jsx)("div",{className:"saller-contact",children:(0,Je.jsx)("div",{className:"contact-detail",style:{marginLeft:"10px"},children:(0,Je.jsx)("h6",{children:"Off"})})})]})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{})]})})}))]})]})})})}),(0,Je.jsx)(Ze.default,{})]})};var Sh=function(){var e=(0,n.useState)(null),t=(0,o.Z)(e,2),r=t[0],i=t[1],a=localStorage.getItem("userData"),s=JSON.parse(a),c=(0,n.useState)(s),u=(0,o.Z)(c,2),l=(u[0],u[1],(0,n.useState)("")),d=(0,o.Z)(l,2),h=d[0],f=d[1],p=function(){var e=lt(ct().mark((function e(t){var n,r;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,cn.NU)(t);case 2:return n=e.sent,e.next=5,(0,cn.WV)(n[0]);case 5:r=e.sent,console.log("Latitude and Longitude:",r),f(t),localStorage.setItem("valuee",t),localStorage.setItem("lat",JSON.stringify(r));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=localStorage.getItem("lat"),g=JSON.parse(v),m=(0,n.useState)(g),y=(0,o.Z)(m,2),b=y[0],_=(y[1],new Date),E=_.getDate(),S=_.getMonth()+1,w=_.getFullYear();(0,n.useEffect)((function(){var e=localStorage.getItem("latitude"),t=localStorage.getItem("longitude"),n={day:E,month:S,year:w,hour:7,min:25,lat:e?null===b||void 0===b?void 0:b.lat:12.12,lon:t?null===b||void 0===b?void 0:b.lng:72.12,tzone:5.5},r="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("advanced_panchang"),n,{headers:{authorization:r,"Content-Type":"application/json"}}).then((function(e){i(e.data),console.log("asdresponseeessad of panchangeeeg",e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),[]);var x=(0,n.useState)({name:"",gender:"",day:"",month:"",year:"",hour:"",min:"",am_pm:"",placeOfBirth:""}),T=(0,o.Z)(x,2),I=T[0],R=T[1],k=(0,n.useState)(""),O=(0,o.Z)(k,2),C=O[0],A=O[1],N=function(e){var t=e.target,n=t.name,r=t.value;R((0,tt.Z)((0,tt.Z)({},I),{},(0,mt.Z)({},n,r)))};return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{className:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsx)("div",{className:"breadscrumb-contain",children:(0,Je.jsx)("h2",{children:"Panchang"})})})})})}),(0,Je.jsx)("section",{className:"fresh-vegetable-section section-lg-space",children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsxs)("div",{className:"title",style:{padding:"5px"},children:[(0,Je.jsxs)("div",{className:"row",children:[(0,Je.jsx)("div",{className:"col-lg-3",children:(0,Je.jsx)("img",{className:"img2 img-fluid",src:"../assets/images/blog/pp.jpg",alt:"aries",width:"230",height:"300"})}),(0,Je.jsxs)("div",{className:"col-lg-9",children:[(0,Je.jsx)("h2",{children:"Today Panchang"}),(0,Je.jsx)("p",{children:null===r||void 0===r?void 0:r.tithi.details.summary})]})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{className:"right-sidebar-box",children:[(0,Je.jsx)("font",{style:{color:"#ff4f4f"},children:C&&(0,Je.jsx)("p",{style:{color:"#ff4f4f"},children:C})}),(0,Je.jsx)("form",{onSubmit:function(e){e.preventDefault();if(I.day)if(I.month)if(I.year)if(h){var t=localStorage.getItem("latitude"),n=localStorage.getItem("longitude"),r={day:Number(I.day),month:Number(I.month),year:Number(I.year),hour:7,min:25,lat:t?parseFloat(t):12.12,lon:n?parseFloat(n):72.12,tzone:5.5};localStorage.setItem("responseDatadata",JSON.stringify(r));var o="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("advanced_panchang"),r,{headers:{authorization:o,"Content-Type":"application/json"}}).then((function(e){i(e.data),console.log("panchangeee dataa",e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}else A("Please select a address.");else A("Please select a year.");else A("Please a Month .");else A("Please Select a day.")},children:(0,Je.jsxs)("div",{className:"row",children:[(0,Je.jsx)("div",{className:"col-xxl-12 col-lg-12 col-sm-12",children:(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsxs)("div",{style:{width:"100%"},children:[(0,Je.jsxs)("select",{style:{width:"25%",height:"45px"},name:"day",value:I.day,onChange:N,children:[(0,Je.jsx)("option",{children:"Day"}),Array.from({length:31},(function(e,t){return t+1})).map((function(e){return(0,Je.jsx)("option",{children:e},e)}))]}),(0,Je.jsxs)("select",{style:{width:"25%",height:"45px"},name:"month",value:I.month,onChange:N,children:[(0,Je.jsx)("option",{children:"Month"}),Array.from({length:12},(function(e,t){return t+1})).map((function(e){return(0,Je.jsx)("option",{value:e,children:new Date(0,e-1).toLocaleString("default",{month:"long"})},e)}))]}),(0,Je.jsxs)("select",{style:{width:"25%",height:"45px"},name:"year",value:I.year,onChange:N,children:[(0,Je.jsx)("option",{children:"Year"}),function(){(new Date).getFullYear();return Array.from({length:101},(function(e,t){return 2050-t})).map((function(e){return(0,Je.jsx)("option",{children:e},e)}))}()]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(cn.ZP,{value:h,onChange:function(e){return f(e)},onSelect:p,children:function(e){var t=e.getInputProps,n=e.suggestions,r=e.getSuggestionItemProps,i=e.loading;return(0,Je.jsxs)("div",{children:[(0,Je.jsx)("input",(0,tt.Z)({style:{width:"50%"},className:"form-control"},t({placeholder:"Type address"}))),(0,Je.jsxs)("div",{children:[i&&(0,Je.jsx)("div",{children:"Loading..."}),n.map((function(e){var t={backgroundColor:e.active?"#41b6e6":"#fff"};return(0,Je.jsx)("div",(0,tt.Z)((0,tt.Z)({},r(e,{style:t})),{},{children:e.description}))}))]})]})}})]})}),(0,Je.jsx)("br",{})]})}),(0,Je.jsx)("button",{type:"submit",className:"btn btn-animation btn-md fw-bold ms-auto",children:"Get Panchang"})]})})]})]})})}),(0,Je.jsx)("section",{className:"client-section section-lg-space",children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsx)("div",{className:"col-lg-8",children:(0,Je.jsxs)("table",{class:"table table-bordered",children:[(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Date"})}),(0,Je.jsx)("td",{children:I.day&&I.month&&I.year?"".concat(I.day," - ").concat(I.month," - ").concat(I.year):"".concat(null===r||void 0===r?void 0:r.day," - ").concat(S," - ").concat(w)})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Tithi"})}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.tithi.details.tithi_name})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Nakshatra"})}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.nakshatra.details.nak_name})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Karana"})}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.karan.details.karan_name})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Paksha"})}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.paksha})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Yoga"})}),(0,Je.jsxs)("td",{children:[null===r||void 0===r?void 0:r.yog.details.yog_name," till"," ",null===r||void 0===r?void 0:r.yog.end_time.hour," :"," ",null===r||void 0===r?void 0:r.yog.end_time.minute," :"," ",null===r||void 0===r?void 0:r.yog.end_time.second," "]})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Day"})}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.day})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Sunrise"})}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.sunrise})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Sun Set"})}),(0,Je.jsx)("td",{children:"18:17:1"})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Moonset"})}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.moonset})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"moonrise"})}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.moonrise})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Ritu"})}),(0,Je.jsx)("td",{children:"Hemant"})]}),(0,Je.jsx)("tr",{style:{background:"#dcdcdc"},children:(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Hindu Month & Year"})})}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Shaka Samvat"})}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.shaka_samvat})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Vikram Samvat"})}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.vikram_samvat})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Manth Amanta"})}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.hindu_maah.amanta})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Manth Padwaurnimanta"})}),(0,Je.jsx)("td",{children:null===r||void 0===r?void 0:r.hindu_maah.purnimanta})]}),(0,Je.jsx)("tr",{style:{background:"#dcdcdc"},children:(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Inauspicious Timings (Ashubha Muhurat)"})})}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{style:{fontSize:"16px"},children:(0,Je.jsx)("b",{children:"Rahu Kal"})}),(0,Je.jsxs)("td",{children:[null===r||void 0===r?void 0:r.rahukaal.start," to"," ",null===r||void 0===r?void 0:r.rahukaal.end]})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{style:{fontSize:"16px"},children:(0,Je.jsx)("b",{children:"GuliKaal "})}),(0,Je.jsxs)("td",{children:[null===r||void 0===r?void 0:r.guliKaal.start," to"," ",null===r||void 0===r?void 0:r.guliKaal.end]})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{style:{fontSize:"16px"},children:(0,Je.jsx)("b",{children:"Yamghant_kaal "})}),(0,Je.jsxs)("td",{children:[null===r||void 0===r?void 0:r.yamghant_kaal.start," to"," ",null===r||void 0===r?void 0:r.yamghant_kaal.end]})]}),(0,Je.jsx)("tr",{style:{background:"#dcdcdc"},children:(0,Je.jsx)("td",{style:{fontSize:"16px"},children:(0,Je.jsx)("b",{children:"Auspicious Timings (Shubha Muhurat)"})})}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{style:{fontSize:"16px"},children:(0,Je.jsx)("b",{children:"Abhijit"})}),(0,Je.jsxs)("td",{children:[null===r||void 0===r?void 0:r.abhijit_muhurta.start," to"," ",null===r||void 0===r?void 0:r.abhijit_muhurta.end]})]})]})})})})})}),(0,Je.jsx)("br",{}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})]})};var wh=function(){var e,t,r,i,a,s,c,u,l,d,h=(0,n.useState)({}),f=(0,o.Z)(h,2),p=f[0],v=f[1],g=(0,n.useState)(null),m=(0,o.Z)(g,2),y=m[0],b=m[1],_=localStorage.getItem("responseDataofbirth");return JSON.parse(_),(0,n.useEffect)((function(){var e=localStorage.getItem("latitude"),t=localStorage.getItem("longitude"),n={m_day:5,m_month:1,m_year:2e3,m_hour:7,m_min:45,m_lat:e?parseFloat(e):12.12,m_lon:t?parseFloat(t):72.342,m_tzone:5.5,f_day:7,f_month:1,f_year:2e3,f_hour:7,f_min:45,f_lat:e?parseFloat(e):19.12,f_lon:t?parseFloat(t):72.342,f_tzone:5.5},r="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("match_ashtakoot_points"),n,{headers:{authorization:r,"Content-Type":"application/json"}}).then((function(e){b(e.data),console.log("Matchinggggaaa",e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),{}),(0,n.useEffect)((function(){var e=localStorage.getItem("latitude"),t=localStorage.getItem("longitude"),n={m_day:5,m_month:1,m_year:2e3,m_hour:7,m_min:45,m_lat:e?parseFloat(e):12.12,m_lon:t?parseFloat(t):72.342,m_tzone:5.5,f_day:7,f_month:1,f_year:2e3,f_hour:7,f_min:45,f_lat:e?parseFloat(e):19.12,f_lon:t?parseFloat(t):72.342,f_tzone:5.5},r="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("match_manglik_report?day=6&month=1&year=2000&hour=7&min=45&lat=19.132&lon=72.342&tzone=5.5"),n,{headers:{authorization:r,"Content-Type":"application/json"}}).then((function(e){v(e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),{}),(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"seller-grid-section",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsx)("h2",{children:"Kundli Matching Report"}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"row",children:[(0,Je.jsx)("div",{class:"col-lg-6 col-md-6",children:(0,Je.jsx)("div",{class:"seller-grid-box",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"col-lg-12",children:[(0,Je.jsx)("div",{class:"title d-xxl-none d-block"}),(0,Je.jsx)("div",{class:"right-sidebar-box",children:(0,Je.jsxs)("div",{class:"row",children:[(0,Je.jsx)("div",{class:"col-lg-12",children:(0,Je.jsxs)("div",{class:"custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput",class:"form-label",children:(0,Je.jsx)("h2",{children:"Name"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsx)("p",{class:"form-control",children:"Name"})})]})}),(0,Je.jsx)("div",{class:"col-lg-12",children:(0,Je.jsxs)("div",{class:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput2",class:"form-label",children:(0,Je.jsx)("h2",{children:"Date of Birth"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsx)("div",{style:{width:"100%"},children:(0,Je.jsx)("p",{class:"form-control",children:"1|Apr|2018 |2:14 AM"})})})]})}),(0,Je.jsx)("div",{class:"col-lg-12",children:(0,Je.jsxs)("div",{class:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput2",class:"form-label",children:(0,Je.jsx)("h2",{children:"Janm Rashi"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsx)("div",{style:{width:"100%"},children:(0,Je.jsx)("p",{class:"form-control",children:"Virgo"})})})]})}),(0,Je.jsx)("div",{class:"col-xxl-6 col-lg-12 col-sm-6",children:(0,Je.jsxs)("div",{class:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput",class:"form-label",children:(0,Je.jsx)("h2",{children:"Rashi Lord"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsx)("p",{class:"form-control",children:"Mercury"})})]})})]})})]})})})}),(0,Je.jsx)("div",{class:"col-lg-6 col-md-6",children:(0,Je.jsx)("div",{class:"seller-grid-box",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"col-lg-12",children:[(0,Je.jsx)("div",{class:"title d-xxl-none d-block"}),(0,Je.jsx)("div",{class:"right-sidebar-box",children:(0,Je.jsxs)("div",{class:"row",children:[(0,Je.jsx)("div",{class:"col-lg-12",children:(0,Je.jsxs)("div",{class:"custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput",class:"form-label",children:(0,Je.jsx)("h2",{children:"Name"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsx)("p",{class:"form-control",children:"Name"})})]})}),(0,Je.jsx)("div",{class:"col-lg-12",children:(0,Je.jsxs)("div",{class:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput2",class:"form-label",children:(0,Je.jsx)("h2",{children:"Date of Birth"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsx)("div",{style:{width:"100%"},children:(0,Je.jsx)("p",{class:"form-control",children:"1|Apr|2018 |2:14 AM"})})})]})}),(0,Je.jsx)("div",{class:"col-lg-12",children:(0,Je.jsxs)("div",{class:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput2",class:"form-label",children:(0,Je.jsx)("h2",{children:"Janm Rashi"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsx)("div",{style:{width:"100%"},children:(0,Je.jsx)("p",{class:"form-control",children:"Virgo"})})})]})}),(0,Je.jsx)("div",{class:"col-xxl-6 col-lg-12 col-sm-6",children:(0,Je.jsxs)("div",{class:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput",class:"form-label",children:(0,Je.jsx)("h2",{children:"Rashi Lord"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsx)("p",{class:"form-control",children:"Mercury"})})]})})]})})]})})})})]})]})}),(0,Je.jsx)("br",{}),(0,Je.jsx)("section",{class:"seller-grid-section",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsx)("h2",{children:"Lagan Chart"}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"row",children:[(0,Je.jsx)("div",{class:"col-lg-6 col-md-6",children:(0,Je.jsx)("div",{class:"seller-grid-box",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"col-lg-12",children:[(0,Je.jsx)("div",{class:"title d-xxl-none d-block",children:(0,Je.jsx)("h2",{children:"Male"})}),(0,Je.jsx)("div",{class:"right-sidebar-box",children:(0,Je.jsxs)("div",{class:"row",children:[(0,Je.jsx)("div",{class:"col-lg-12",children:(0,Je.jsxs)("div",{class:"custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput",class:"form-label",children:(0,Je.jsx)("h2",{children:"Male Manglik Detail"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsxs)("p",{class:"form-control",children:[null===(e=p.male)||void 0===e?void 0:e.percentage_manglik_present," % \u092e\u093e\u0902\u0917\u0932\u093f\u0915"]})})]})}),(0,Je.jsx)("div",{class:"col-lg-12",children:(0,Je.jsxs)("div",{class:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput2",class:"form-label",children:(0,Je.jsx)("h2",{children:"Based on house"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsx)("div",{style:{width:"100%"},children:(0,Je.jsx)("p",{class:"",children:null===(t=p.male)||void 0===t?void 0:t.manglik_present_rule.based_on_house})})})]})}),(0,Je.jsx)("div",{class:"col-lg-12",children:(0,Je.jsxs)("div",{class:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput2",class:"form-label",children:(0,Je.jsx)("h2",{children:"Based on Aspects"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsx)("div",{style:{width:"100%"},children:(0,Je.jsx)("p",{class:"",children:null===(r=p.male)||void 0===r?void 0:r.manglik_present_rule.based_on_aspect})})})]})}),(0,Je.jsx)("div",{class:"col-xxl-6 col-lg-12 col-sm-6",children:(0,Je.jsxs)("div",{class:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput",class:"form-label",children:(0,Je.jsx)("h2",{children:"Manglik Effect"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsxs)("p",{class:"",children:["\u092e\u093e\u0902\u0917\u0932\u093f\u0915 \u0926\u094b\u0937  ",null===(i=p.male)||void 0===i?void 0:i.manglik_status," \u0939\u0948"]})})]})}),(0,Je.jsx)("div",{class:"col-lg-12",children:(0,Je.jsxs)("div",{class:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput2",class:"form-label",children:(0,Je.jsx)("h2",{children:"Manglik Analysis"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsx)("div",{style:{width:"100%"},children:(0,Je.jsx)("p",{class:"",children:null===(a=p.male)||void 0===a?void 0:a.manglik_report})})})]})})]})})]})})})}),(0,Je.jsx)("div",{class:"col-lg-6 col-md-6",children:(0,Je.jsx)("div",{class:"seller-grid-box",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"col-lg-12",children:[(0,Je.jsx)("div",{class:"title d-xxl-none d-block",children:(0,Je.jsx)("h2",{children:"FeMale"})}),(0,Je.jsx)("div",{class:"right-sidebar-box",children:(0,Je.jsxs)("div",{class:"row",children:[(0,Je.jsx)("div",{class:"col-lg-12",children:(0,Je.jsxs)("div",{class:"custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput",class:"form-label",children:(0,Je.jsx)("h2",{children:"Male Manglik Detail"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsxs)("p",{class:"form-control",children:[null===(s=p.female)||void 0===s?void 0:s.percentage_manglik_present," % \u092e\u093e\u0902\u0917\u0932\u093f\u0915"]})})]})}),(0,Je.jsx)("div",{class:"col-lg-12",children:(0,Je.jsxs)("div",{class:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput2",class:"form-label",children:(0,Je.jsx)("h2",{children:"Based on house"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsx)("div",{style:{width:"100%"},children:(0,Je.jsx)("p",{class:"",children:null===(c=p.female)||void 0===c?void 0:c.manglik_present_rule.based_on_house})})})]})}),(0,Je.jsx)("div",{class:"col-lg-12",children:(0,Je.jsxs)("div",{class:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput2",class:"form-label",children:(0,Je.jsx)("h2",{children:"Based on Aspects"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsx)("div",{style:{width:"100%"},children:(0,Je.jsx)("p",{class:"",children:null===(u=p.female)||void 0===u?void 0:u.manglik_present_rule.based_on_aspect})})})]})}),(0,Je.jsx)("div",{class:"col-xxl-6 col-lg-12 col-sm-6",children:(0,Je.jsxs)("div",{class:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput",class:"form-label",children:(0,Je.jsx)("h2",{children:"Manglik Effect"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsxs)("p",{class:"",children:["\u092e\u093e\u0902\u0917\u0932\u093f\u0915 \u0926\u094b\u0937  ",null===(l=p.female)||void 0===l?void 0:l.manglik_status," \u0939\u0948"]})})]})}),(0,Je.jsx)("div",{class:"col-lg-12",children:(0,Je.jsxs)("div",{class:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("label",{for:"exampleFormControlInput2",class:"form-label",children:(0,Je.jsx)("h2",{children:"Manglik Analysis"})}),(0,Je.jsx)("div",{class:"custom-input",children:(0,Je.jsx)("div",{style:{width:"100%"},children:(0,Je.jsx)("p",{class:"",children:null===(d=p.female)||void 0===d?void 0:d.manglik_report})})})]})})]})})]})})})})]})]})}),(0,Je.jsx)("br",{}),(0,Je.jsx)("section",{className:"client-section section-lg-space",children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsxs)("div",{className:"col-lg-12",children:[(0,Je.jsx)("h1",{children:"Match Ashtakoot Points"}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("table",{class:"table table-bordered",children:[(0,Je.jsxs)("tr",{style:{background:"#dee2e6"},children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Atribute"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Male"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Female"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Out of"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Received"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Area Of Life"})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Varna"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.varna.male_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.varna.female_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.varna.total_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.varna.received_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.varna.description})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Vashya"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.vashya.male_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.vashya.female_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.vashya.total_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.vashya.received_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.vashya.description})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Tara"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.tara.male_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.tara.female_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.tara.total_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.tara.received_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.tara.description})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Yoni"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.yoni.male_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.yoni.female_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.yoni.total_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.yoni.received_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.yoni.description})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Maitri"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.maitri.male_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.maitri.female_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.maitri.total_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.maitri.received_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.maitri.description})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Gan"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.gan.male_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.gan.female_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.gan.total_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.gan.received_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.gan.description})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Bhakut"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.bhakut.male_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.bhakut.female_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.bhakut.total_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.bhakut.received_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.bhakut.description})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Nadi"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.nadi.male_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.nadi.female_koot_attribute})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.nadi.total_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.nadi.received_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.nadi.description})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Total"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"-"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"-"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.total.total_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===y||void 0===y?void 0:y.total.received_points})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"-"})})]})]}),(0,Je.jsx)("h3",{children:null===y||void 0===y?void 0:y.conclusion.report})]})})})})}),(0,Je.jsx)("br",{}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})]})};var xh=function(){var e,t,r,i,s,c,u,l,d,h,f,p,v,g,m,y,b,_,E,S,w,x,T,I,R,k,O,C,A,N,j,D,P,L,M,U,V,F,B,G,q,W,H,z,K,Y,Z,J,X,Q,$,ee,te,ne,re,ie,oe,ae,se,ce,ue,le,de,he,fe,pe,ve,ge,me,ye,be,_e,Ee,Se,we,xe,Te,Ie,Re,ke,Oe,Ce,Ae,Ne,je,De,Pe,Le,Me,Ue,Ve,Fe,Be,Ge,qe,We,He,ze,Ke,Qe,et,tt,nt,rt,it,ot,at,st,ct,ut,lt,dt,ht,ft,pt,vt,gt,mt,yt,bt,_t,Et,St,wt,xt,Tt,It,Rt,kt,Ot=(0,n.useState)({}),Ct=(0,o.Z)(Ot,2),At=Ct[0],Nt=Ct[1],jt=(0,n.useState)({}),Dt=(0,o.Z)(jt,2),Pt=Dt[0],Lt=Dt[1],Mt=(0,n.useState)(null),Ut=(0,o.Z)(Mt,2),Vt=Ut[0],Ft=Ut[1],Bt=(0,n.useState)({}),Gt=(0,o.Z)(Bt,2),qt=Gt[0],Wt=Gt[1],Ht=(0,n.useState)({}),zt=(0,o.Z)(Ht,2),Kt=zt[0],Yt=zt[1],Zt=(0,n.useState)({}),Jt=(0,o.Z)(Zt,2),Xt=Jt[0],Qt=Jt[1],$t=(0,n.useState)({}),en=(0,o.Z)($t,2),tn=en[0],nn=en[1],rn=localStorage.getItem("lat"),on=JSON.parse(rn),an=(0,n.useState)(on),sn=(0,o.Z)(an,2),cn=sn[0],un=(sn[1],localStorage.getItem("responseData")),ln=JSON.parse(un),dn=localStorage.getItem("responseDatadata");JSON.parse(dn),(0,n.useEffect)((function(){var e=localStorage.getItem("latitude"),t=localStorage.getItem("longitude"),n={day:ln.day,month:ln.month,year:ln.year,hour:ln.hour,min:ln.minute,lat:e?null===cn||void 0===cn?void 0:cn.lat:12.12,lon:t?null===cn||void 0===cn?void 0:cn.lng:72.12,tzone:5.5},r="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("ayanamsha"),n,{headers:{authorization:r,"Content-Type":"application/json"}}).then((function(e){Qt(e.data),console.log("asadasdsdresponseeessad",e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),[]),(0,n.useEffect)((function(){var e=localStorage.getItem("latitude"),t=localStorage.getItem("longitude"),n={day:ln.day,month:ln.month,year:ln.year,hour:ln.hour,min:ln.minute,lat:e?null===cn||void 0===cn?void 0:cn.lat:12.12,lon:t?null===cn||void 0===cn?void 0:cn.lng:72.12,tzone:5.5},r="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("ghat_chakra"),n,{headers:{authorization:r,"Content-Type":"application/json"}}).then((function(e){nn(e.data),console.log("asadasdsdresponseeessad",e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),[]),(0,n.useEffect)((function(){var e=localStorage.getItem("latitude"),t=localStorage.getItem("longitude"),n={day:ln.day,month:ln.month,year:ln.year,hour:ln.hour,min:ln.minute,lat:e?null===cn||void 0===cn?void 0:cn.lat:12.12,lon:t?null===cn||void 0===cn?void 0:cn.lng:72.12,tzone:5.5},r="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("major_vdasha"),n,{headers:{authorization:r,"Content-Type":"application/json"}}).then((function(e){Yt(e.data),console.log("asadasdsdresponseeessad",e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),[]),(0,n.useEffect)((function(){var e=localStorage.getItem("latitude"),t=localStorage.getItem("longitude"),n={day:ln.day,month:ln.month,year:ln.year,hour:ln.hour,min:ln.minute,lat:e?null===cn||void 0===cn?void 0:cn.lat:12.12,lon:t?null===cn||void 0===cn?void 0:cn.lng:72.12,tzone:5.5},r="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("planets"),n,{headers:{authorization:r,"Content-Type":"application/json"}}).then((function(e){Wt(e.data),console.log("asadasdsdresponseeessad",e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),[]),(0,n.useEffect)((function(){var e=localStorage.getItem("latitude"),t=localStorage.getItem("longitude"),n={day:ln.day,month:ln.month,year:ln.year,hour:ln.hour,min:ln.minute,lat:e?null===cn||void 0===cn?void 0:cn.lat:12.12,lon:t?null===cn||void 0===cn?void 0:cn.lng:72.12,tzone:5.5},r="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("advanced_panchang"),n,{headers:{authorization:r,"Content-Type":"application/json"}}).then((function(e){Ft(e.data),console.log("asadasdsdresponseeessad",e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),[]),(0,n.useEffect)((function(){var e=localStorage.getItem("latitude"),t=localStorage.getItem("longitude"),n={day:ln.day,month:ln.month,year:ln.year,hour:ln.hour,min:ln.minute,lat:e?null===cn||void 0===cn?void 0:cn.lat:12.12,lon:t?null===cn||void 0===cn?void 0:cn.lng:72.12,tzone:5.5},r="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("birth_details"),n,{headers:{authorization:r,"Content-Type":"application/json"}}).then((function(e){Nt(e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),[]),(0,n.useEffect)((function(){var e=localStorage.getItem("latitude"),t=localStorage.getItem("longitude"),n={day:ln.day,month:ln.month,year:ln.year,hour:ln.hour,min:ln.minute,lat:e?null===cn||void 0===cn?void 0:cn.lat:12.12,lon:t?null===cn||void 0===cn?void 0:cn.lng:72.12,tzone:5.5},r="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("astro_details"),n,{headers:{authorization:r,"Content-Type":"application/json"}}).then((function(e){Lt(e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),[]);var hn=localStorage.getItem("valuee");return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"seller-grid-section",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsx)("h2",{children:"Basic Details"}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"row",children:[(0,Je.jsx)("div",{class:"col-lg-6 col-md-6",children:(0,Je.jsx)("div",{class:"seller-grid-box",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"col-lg-12",children:[(0,Je.jsxs)("div",{class:"title d-xxl-none d-block",children:[(0,Je.jsx)("h2",{children:"Basic Details"}),(0,Je.jsxs)("table",{class:"table table-bordered",children:[(0,Je.jsxs)("tr",{style:{background:""},children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Name"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===ln||void 0===ln?void 0:ln.name})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Date"})}),(0,Je.jsx)("td",{children:(0,Je.jsxs)("b",{children:[null===ln||void 0===ln?void 0:ln.day,"/",null===ln||void 0===ln?void 0:ln.month,"/",null===ln||void 0===ln?void 0:ln.year]})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Time"})}),(0,Je.jsx)("td",{children:(0,Je.jsxs)("b",{children:[null===ln||void 0===ln?void 0:ln.hour,":",null===ln||void 0===ln?void 0:ln.minute]})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Place"})}),(0,Je.jsx)("td",{style:{textAlign:"justify"},children:(0,Je.jsx)("b",{children:hn})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Latitude"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===At||void 0===At?void 0:At.latitude})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Longitude"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===At||void 0===At?void 0:At.longitude})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Timezone"})}),(0,Je.jsx)("td",{children:(0,Je.jsxs)("b",{children:["GMT+",null===At||void 0===At?void 0:At.timezone]})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Sunrise"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===At||void 0===At?void 0:At.sunrise})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Sunset"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===At||void 0===At?void 0:At.sunset})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Ayanamsha"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===At||void 0===At||null===(e=At.ayanamsha)||void 0===e?void 0:e.toFixed(2)})})]})]})]}),(0,Je.jsxs)("div",{class:"title d-xxl-none d-block",children:[(0,Je.jsx)("h2",{children:"Panchang Details"}),(0,Je.jsxs)("table",{class:"table table-bordered",children:[(0,Je.jsxs)("tr",{style:{background:""},children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Tithi"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Vt||void 0===Vt?void 0:Vt.tithi.details.tithi_name})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Karan"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Vt||void 0===Vt?void 0:Vt.karan.details.karan_name})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Yog"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Vt||void 0===Vt?void 0:Vt.yog.details.yog_name})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Nakshatra"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Vt||void 0===Vt?void 0:Vt.nakshatra.details.nak_name})})]})]})]}),(0,Je.jsxs)("div",{class:"title d-xxl-none d-block",children:[(0,Je.jsx)("h2",{children:"Ayanamsha Details"}),(0,Je.jsxs)("table",{class:"table table-bordered",children:[(0,Je.jsxs)("tr",{style:{background:""},children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Type"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Degree"})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(t=Xt[0])||void 0===t?void 0:t.type})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(r=Xt[0])||void 0===r||null===(i=r.degree)||void 0===i?void 0:i.toFixed(2)})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(s=Xt[1])||void 0===s?void 0:s.type})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(c=Xt[1])||void 0===c||null===(u=c.degree)||void 0===u?void 0:u.toFixed(2)})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(l=Xt[2])||void 0===l?void 0:l.type})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(d=Xt[2])||void 0===d||null===(h=d.degree)||void 0===h?void 0:h.toFixed(2)})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(f=Xt[3])||void 0===f?void 0:f.type})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(p=Xt[3])||void 0===p||null===(v=p.degree)||void 0===v?void 0:v.toFixed(2)})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(g=Xt[4])||void 0===g?void 0:g.type})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(m=Xt[4])||void 0===m||null===(y=m.degree)||void 0===y?void 0:y.toFixed(2)})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(b=Xt[5])||void 0===b?void 0:b.type})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(_=Xt[5])||void 0===_||null===(E=_.degree)||void 0===E?void 0:E.toFixed(2)})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(S=Xt[6])||void 0===S?void 0:S.type})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(w=Xt[6])||void 0===w||null===(x=w.degree)||void 0===x?void 0:x.toFixed(2)})})]})]})]})]})})})}),(0,Je.jsx)("div",{class:"col-lg-6 col-md-6",children:(0,Je.jsx)("div",{class:"seller-grid-box",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"col-lg-12",children:[(0,Je.jsxs)("div",{class:"title d-xxl-none d-block",children:[(0,Je.jsx)("h2",{children:"Avakhada Details"}),(0,Je.jsxs)("table",{class:"table table-bordered",children:[(0,Je.jsxs)("tr",{style:{background:""},children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Varna"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Pt||void 0===Pt?void 0:Pt.Varna})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Vashya"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Pt||void 0===Pt?void 0:Pt.Vashya})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Yoni"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Pt||void 0===Pt?void 0:Pt.Yoni})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Gan"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Pt||void 0===Pt?void 0:Pt.Gan})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Nadi"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Pt||void 0===Pt?void 0:Pt.Nadi})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Sign"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Pt||void 0===Pt?void 0:Pt.sign})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Sign Lord"})}),(0,Je.jsx)("td",{children:(0,Je.jsxs)("b",{children:["GMT+",null===Pt||void 0===Pt?void 0:Pt.SignLord]})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Nakshatra-Charan"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Pt||void 0===Pt?void 0:Pt.Naksahtra})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Yog"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Pt||void 0===Pt?void 0:Pt.Yog})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Karan"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Pt||void 0===Pt?void 0:Pt.Karan})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Tithi"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Pt||void 0===Pt?void 0:Pt.Tithi})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Yunja"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Pt||void 0===Pt?void 0:Pt.yunja})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Tatva"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Pt||void 0===Pt?void 0:Pt.tatva})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Name Alphabet"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Pt||void 0===Pt?void 0:Pt.name_alphabet})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Paya"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===Pt||void 0===Pt?void 0:Pt.paya})})]})]})]}),(0,Je.jsxs)("div",{class:"title d-xxl-none d-block",children:[(0,Je.jsx)("h2",{children:"Ghat Chakra Details"}),(0,Je.jsxs)("table",{class:"table table-bordered",children:[(0,Je.jsxs)("tr",{style:{background:""},children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Month"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===tn||void 0===tn?void 0:tn.month})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Tithi"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===tn||void 0===tn?void 0:tn.tithi})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Day"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===tn||void 0===tn?void 0:tn.day})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Nakshatra"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===tn||void 0===tn?void 0:tn.nakshatra})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Yog"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===tn||void 0===tn?void 0:tn.yog})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Karan"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===tn||void 0===tn?void 0:tn.karan})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Pahar"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===tn||void 0===tn?void 0:tn.pahar})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Moon"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===tn||void 0===tn?void 0:tn.moon})})]})]})]})]})})})})]})]})}),(0,Je.jsx)("section",{className:"client-section section-lg-space",children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsxs)("div",{className:"col-lg-12",children:[(0,Je.jsx)("h1",{children:"Position of Planets"}),(0,Je.jsxs)("table",{class:"table table-bordered",children:[(0,Je.jsxs)("tr",{style:{background:"#dee2e6"},children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Planets"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"R"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Sign"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Sign Lord"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Degree"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Nakshatra"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Nakshatra Lord "})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"House "})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(T=qt[0])||void 0===T?void 0:T.name})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"-"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(I=qt[0])||void 0===I?void 0:I.sign})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(R=qt[0])||void 0===R?void 0:R.signLord})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(k=qt[0])||void 0===k||null===(O=k.normDegree)||void 0===O?void 0:O.toFixed(2)})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(C=qt[0])||void 0===C?void 0:C.nakshatra})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(A=qt[0])||void 0===A?void 0:A.nakshatraLord})}),(0,Je.jsx)("td",{children:(0,Je.jsxs)("b",{children:[null===(N=qt[0])||void 0===N?void 0:N.house," "]})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(j=qt[1])||void 0===j?void 0:j.name})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"-"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(D=qt[1])||void 0===D?void 0:D.sign})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(P=qt[1])||void 0===P?void 0:P.signLord})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(L=qt[1])||void 0===L||null===(M=L.normDegree)||void 0===M?void 0:M.toFixed(2)})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(U=qt[1])||void 0===U?void 0:U.nakshatra})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(V=qt[1])||void 0===V?void 0:V.nakshatraLord})}),(0,Je.jsx)("td",{children:(0,Je.jsxs)("b",{children:[null===(F=qt[1])||void 0===F?void 0:F.house," "]})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(B=qt[2])||void 0===B?void 0:B.name})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"-"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(G=qt[2])||void 0===G?void 0:G.sign})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(q=qt[2])||void 0===q?void 0:q.signLord})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(W=qt[2])||void 0===W||null===(H=W.normDegree)||void 0===H?void 0:H.toFixed(2)})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(z=qt[2])||void 0===z?void 0:z.nakshatra})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(K=qt[2])||void 0===K?void 0:K.nakshatraLord})}),(0,Je.jsx)("td",{children:(0,Je.jsxs)("b",{children:[null===(Y=qt[2])||void 0===Y?void 0:Y.house," "]})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Z=qt[3])||void 0===Z?void 0:Z.name})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"-"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(J=qt[3])||void 0===J?void 0:J.sign})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(X=qt[3])||void 0===X?void 0:X.signLord})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Q=qt[3])||void 0===Q||null===($=Q.normDegree)||void 0===$?void 0:$.toFixed(2)})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(ee=qt[3])||void 0===ee?void 0:ee.nakshatra})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(te=qt[3])||void 0===te?void 0:te.nakshatraLord})}),(0,Je.jsx)("td",{children:(0,Je.jsxs)("b",{children:[null===(ne=qt[3])||void 0===ne?void 0:ne.house," "]})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(re=qt[4])||void 0===re?void 0:re.name})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"-"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(ie=qt[4])||void 0===ie?void 0:ie.sign})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(oe=qt[4])||void 0===oe?void 0:oe.signLord})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(ae=qt[4])||void 0===ae||null===(se=ae.normDegree)||void 0===se?void 0:se.toFixed(2)})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(ce=qt[4])||void 0===ce?void 0:ce.nakshatra})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(ue=qt[4])||void 0===ue?void 0:ue.nakshatraLord})}),(0,Je.jsx)("td",{children:(0,Je.jsxs)("b",{children:[null===(le=qt[4])||void 0===le?void 0:le.house," "]})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(de=qt[5])||void 0===de?void 0:de.name})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"-"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(he=qt[5])||void 0===he?void 0:he.sign})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(fe=qt[5])||void 0===fe?void 0:fe.signLord})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(pe=qt[5])||void 0===pe||null===(ve=pe.normDegree)||void 0===ve?void 0:ve.toFixed(2)})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(ge=qt[5])||void 0===ge?void 0:ge.nakshatra})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(me=qt[5])||void 0===me?void 0:me.nakshatraLord})}),(0,Je.jsx)("td",{children:(0,Je.jsxs)("b",{children:[null===(ye=qt[5])||void 0===ye?void 0:ye.house," "]})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(be=qt[6])||void 0===be?void 0:be.name})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"-"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(_e=qt[6])||void 0===_e?void 0:_e.sign})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Ee=qt[6])||void 0===Ee?void 0:Ee.signLord})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Se=qt[6])||void 0===Se||null===(we=Se.normDegree)||void 0===we?void 0:we.toFixed(2)})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(xe=qt[6])||void 0===xe?void 0:xe.nakshatra})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Te=qt[6])||void 0===Te?void 0:Te.nakshatraLord})}),(0,Je.jsx)("td",{children:(0,Je.jsxs)("b",{children:[null===(Ie=qt[6])||void 0===Ie?void 0:Ie.house," "]})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Re=qt[7])||void 0===Re?void 0:Re.name})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"-"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(ke=qt[7])||void 0===ke?void 0:ke.sign})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Oe=qt[7])||void 0===Oe?void 0:Oe.signLord})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Ce=qt[7])||void 0===Ce||null===(Ae=Ce.normDegree)||void 0===Ae?void 0:Ae.toFixed(2)})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Ne=qt[7])||void 0===Ne?void 0:Ne.nakshatra})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(je=qt[7])||void 0===je?void 0:je.nakshatraLord})}),(0,Je.jsx)("td",{children:(0,Je.jsxs)("b",{children:[null===(De=qt[7])||void 0===De?void 0:De.house," "]})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Pe=qt[8])||void 0===Pe?void 0:Pe.name})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"-"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Le=qt[8])||void 0===Le?void 0:Le.sign})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Me=qt[8])||void 0===Me?void 0:Me.signLord})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Ue=qt[8])||void 0===Ue||null===(Ve=Ue.normDegree)||void 0===Ve?void 0:Ve.toFixed(2)})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Fe=qt[8])||void 0===Fe?void 0:Fe.nakshatra})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Be=qt[8])||void 0===Be?void 0:Be.nakshatraLord})}),(0,Je.jsx)("td",{children:(0,Je.jsxs)("b",{children:[null===(Ge=qt[8])||void 0===Ge?void 0:Ge.house," "]})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(qe=qt[9])||void 0===qe?void 0:qe.name})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"-"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(We=qt[9])||void 0===We?void 0:We.sign})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(He=qt[9])||void 0===He?void 0:He.signLord})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(ze=qt[9])||void 0===ze||null===(Ke=ze.normDegree)||void 0===Ke?void 0:Ke.toFixed(2)})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Qe=qt[9])||void 0===Qe?void 0:Qe.nakshatra})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(et=qt[9])||void 0===et?void 0:et.nakshatraLord})}),(0,Je.jsx)("td",{children:(0,Je.jsxs)("b",{children:[null===(tt=qt[9])||void 0===tt?void 0:tt.house," "]})})]})]})]})})})})}),(0,Je.jsx)("section",{children:(0,Je.jsx)("div",{className:"container-fluid-lg",children:(0,Je.jsx)("div",{className:"row",children:(0,Je.jsx)("div",{className:"col-12",children:(0,Je.jsxs)("div",{className:"col-lg-12",children:[(0,Je.jsx)("h1",{children:"Vimshottari Dasha"}),(0,Je.jsxs)("table",{class:"table table-bordered",children:[(0,Je.jsxs)("tr",{style:{background:"#dee2e6"},children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Planets"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"Start Date"})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:"End Date"})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(nt=Kt[0])||void 0===nt?void 0:nt.planet})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(rt=Kt[0])||void 0===rt?void 0:rt.start})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(it=Kt[0])||void 0===it?void 0:it.end})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(ot=Kt[1])||void 0===ot?void 0:ot.planet})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(at=Kt[1])||void 0===at?void 0:at.start})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(st=Kt[1])||void 0===st?void 0:st.end})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(ct=Kt[2])||void 0===ct?void 0:ct.planet})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(ut=Kt[2])||void 0===ut?void 0:ut.start})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(lt=Kt[2])||void 0===lt?void 0:lt.end})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(dt=Kt[3])||void 0===dt?void 0:dt.planet})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(ht=Kt[3])||void 0===ht?void 0:ht.start})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(ft=Kt[3])||void 0===ft?void 0:ft.end})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(pt=Kt[4])||void 0===pt?void 0:pt.planet})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(vt=Kt[4])||void 0===vt?void 0:vt.start})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(gt=Kt[4])||void 0===gt?void 0:gt.end})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(mt=Kt[5])||void 0===mt?void 0:mt.planet})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(yt=Kt[5])||void 0===yt?void 0:yt.start})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(bt=Kt[5])||void 0===bt?void 0:bt.end})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(_t=Kt[6])||void 0===_t?void 0:_t.planet})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Et=Kt[6])||void 0===Et?void 0:Et.start})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(St=Kt[6])||void 0===St?void 0:St.end})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(wt=Kt[7])||void 0===wt?void 0:wt.planet})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(xt=Kt[7])||void 0===xt?void 0:xt.start})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Tt=Kt[7])||void 0===Tt?void 0:Tt.end})})]}),(0,Je.jsxs)("tr",{children:[(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(It=Kt[8])||void 0===It?void 0:It.planet})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(Rt=Kt[8])||void 0===Rt?void 0:Rt.start})}),(0,Je.jsx)("td",{children:(0,Je.jsx)("b",{children:null===(kt=Kt[8])||void 0===kt?void 0:kt.end})})]})]})]})})})})}),(0,Je.jsx)("section",{class:"seller-grid-section",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{class:"row g-4",children:[(0,Je.jsx)("div",{class:"col-xxl-4 col-md-6",children:(0,Je.jsx)(a.rU,{to:"#",class:"",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h3",{children:"Lagna Chart"}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/logo/chart.jpeg",alt:"aries",width:"450px",height:"350px"})]})})})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-6",children:(0,Je.jsx)(a.rU,{to:"#",class:"",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h3",{children:"Navamansha Chart"}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/logo/chart.jpeg",alt:"aries",width:"470px",height:"350px"})]})})})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-6",children:(0,Je.jsx)(a.rU,{to:"#",class:"",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h3",{children:"Moon Chart"}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/logo/chart.jpeg",alt:"aries",width:"470px",height:"350px"})]})})})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-6",children:(0,Je.jsx)(a.rU,{to:"#",class:"",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h3",{children:"Sun Chart"}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/logo/chart.jpeg",alt:"aries",width:"470px",height:"350px"})]})})})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-6",children:(0,Je.jsx)(a.rU,{to:"#",class:"",children:(0,Je.jsx)("div",{class:"grid-contain",children:(0,Je.jsxs)("div",{class:"title",style:{padding:"5px"},children:[(0,Je.jsx)("h3",{children:"Chalit Chart"}),(0,Je.jsx)("img",{class:"img2",src:"../assets/images/logo/chart.jpeg",alt:"aries",width:"470px",height:"350px"})]})})})})]}),(0,Je.jsx)("nav",{class:"custome-pagination"})]})}),(0,Je.jsx)("br",{}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})]})};var Th=function(){var e=(0,n.useState)([]),t=(0,o.Z)(e,2),r=t[0],i=t[1];(0,n.useEffect)((function(){a()}),[]);var a=function(){var e={_id:localStorage.getItem("newlistid")};Ye.post("http://103.104.74.215:3012/api/user/news_list_details",e).then((function(e){return i(e.data.data)})).then((function(e){}))};return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsx)("div",{class:"breadscrumb-contain",children:(0,Je.jsx)("h2",{children:"News Details Page"})})})})})}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-sm-4 g-3",children:(0,Je.jsxs)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 ratio_50",children:[(0,Je.jsxs)("div",{class:"blog-detail-image rounded-3 mb-4",children:[(0,Je.jsx)("img",{style:{width:"100%"},src:"http://103.104.74.215:3012/uploads/"+(null===r||void 0===r?void 0:r.image),class:"bg-img blur-up lazyload",alt:""}),(0,Je.jsxs)("div",{class:"blog-image-contain",children:[(0,Je.jsx)("h2",{children:r.title}),(0,Je.jsx)("ul",{class:"contain-comment-list",children:(0,Je.jsx)("li",{children:(0,Je.jsxs)("div",{class:"user-list",children:[(0,Je.jsx)("i",{"data-feather":"calendar"}),(0,Je.jsx)("span",{children:r.current_date})]})})})]})]}),(0,Je.jsx)("div",{class:"blog-detail-contain",children:(0,Je.jsx)("p",{children:r.description})})]})})})}),(0,Je.jsx)(et,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})," "]})};var Ih=function(){var e=localStorage.getItem("pujaDet");console.log("sadasdvideodataa",e);var t=JSON.parse(e),r=(0,n.useState)(t),i=(0,o.Z)(r,2),a=i[0],s=(i[1],(0,n.useState)(a)),c=(0,o.Z)(s,2),u=c[0];return c[1],(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-12",children:(0,Je.jsxs)("div",{class:"breadscrumb-contain",children:[(0,Je.jsx)("div",{}),(0,Je.jsx)("h2",{children:"Celebrity Video"})]})})})})}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-sm-4 g-3",children:(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 ratio_50",children:(0,Je.jsx)("div",{class:"blog-detail-image rounded-3 mb-4",style:{display:"flex",justifyContent:"center"},children:u?(0,Je.jsx)(or.Z,{volume:1,url:"http://103.104.74.215:3012/uploads/"+(null===t||void 0===t?void 0:t.video),controls:!0,playing:!0,width:"100%",height:"auto"}):(0,Je.jsx)("p",{children:"Loading video..."})})})})})}),(0,Je.jsx)(Ze.default,{})]})};var Rh=function(){return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsxs)("div",{class:"row g-4",children:[(0,Je.jsx)("h2",{children:"Free Tarot Reading"}),(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-2",children:(0,Je.jsxs)("div",{class:"row g-2 ratio_65",children:[(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",1),localStorage.setItem("tarotimage","../assets/images/inner-page/1tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",style:{},children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",2),localStorage.setItem("tarotimage","../assets/images/inner-page/2tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",3),localStorage.setItem("tarotimage","../assets/images/inner-page/3tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",4),localStorage.setItem("tarotimage","../assets/images/inner-page/4tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.15s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img blur-up lazyload",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",5),localStorage.setItem("tarotimage","../assets/images/inner-page/5tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",6),localStorage.setItem("tarotimage","../assets/images/inner-page/6tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",7),localStorage.setItem("tarotimage","../assets/images/inner-page/7tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",8),localStorage.setItem("tarotimage","../assets/images/inner-page/8tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",9),localStorage.setItem("tarotimage","../assets/images/inner-page/9tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",10),localStorage.setItem("tarotimage","../assets/images/inner-page/10tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",11),localStorage.setItem("tarotimage","../assets/images/inner-page/11tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",12),localStorage.setItem("tarotimage","../assets/images/inner-page/12tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",13),localStorage.setItem("tarotimage","../assets/images/inner-page/13tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",14),localStorage.setItem("tarotimage","../assets/images/inner-page/14tarot.jpeg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",15),localStorage.setItem("tarotimage","../assets/images/inner-page/15tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",16),localStorage.setItem("tarotimage","../assets/images/inner-page/16tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",17),localStorage.setItem("tarotimage","../assets/images/inner-page/17tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",18),localStorage.setItem("tarotimage","../assets/images/inner-page/18tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",19),localStorage.setItem("tarotimage","../assets/images/inner-page/19tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",20),localStorage.setItem("tarotimage","../assets/images/inner-page/20tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",21),localStorage.setItem("tarotimage","../assets/images/inner-page/21tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{onClick:function(){localStorage.setItem("tarotid",22),localStorage.setItem("tarotimage","../assets/images/inner-page/22tarot.jpg")},class:"col-xxl-4 col-sm-2",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"250px"},children:(0,Je.jsx)("div",{class:"blog-image",children:(0,Je.jsx)(a.rU,{to:"/Onecardresult",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})})]})})]})})}),(0,Je.jsx)("br",{}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})]})};var kh=function(){var e=(0,n.useState)(""),t=(0,o.Z)(e,2),r=t[0],a=t[1],s=(0,i.s0)(""),c=(0,n.useState)({name:""}),u=(0,o.Z)(c,2),l=u[0],d=u[1];return console.log("sadasd",l),(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-4",children:(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-2",children:(0,Je.jsxs)("div",{class:"row g-4 ratio_65",children:[(0,Je.jsx)("div",{class:"col-xxl-4 col-sm-12",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"332px"},children:(0,Je.jsx)("div",{class:"blog-image",style:{},children:(0,Je.jsx)("a",{href:"#",children:(0,Je.jsx)("img",{width:"100%",src:"../assets/images/inner-page/tarot2.jpeg",class:"bg-img",alt:""})})})})}),(0,Je.jsx)("div",{children:(0,Je.jsx)("h2",{children:"ONE CARD TAROT READING"})}),(0,Je.jsx)("div",{children:(0,Je.jsx)("p",{children:"Need answers or solutions to your problems in life as soon as possible? One card reading will provide you with suggestions on all aspects of life like business, love, finance and relationships. You can explore any issue in your life by consulting the online tarot reading all by yourself right here. This tarot reading will provide you with suggestions on all aspects of life like business, love, finance and relationships. One card tarot prediction will help you decide better on what action needs to be taken and will also give you a glimpse of what is to come."})}),(0,Je.jsxs)("div",{class:"col-xxl-4 col-sm-12",style:{border:"1px solid var(--theme-color)",height:"100px"},children:[(0,Je.jsx)("br",{}),(0,Je.jsx)("font",{style:{color:"blue"},children:r&&(0,Je.jsx)("p",{children:r})}),(0,Je.jsx)("form",{onSubmit:function(e){e.preventDefault(),l.name?(localStorage.setItem("nameofonetarot",JSON.stringify(l)),s("/Onecarreading")):a("Please Enter a Name.")},children:(0,Je.jsxs)("div",{className:"row",children:[(0,Je.jsx)("div",{className:"col-sm-6",children:(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",placeholder:"Enter Your Name",value:l.name,onChange:function(e){var t=e.target,n=t.name,r=t.value;d((0,tt.Z)((0,tt.Z)({},l),{},(0,mt.Z)({},n,r)))}})})}),(0,Je.jsx)("div",{className:"col-sm-4",children:(0,Je.jsx)("button",{style:{float:"left"},type:"submit",className:"btn btn-animation btn-md fw-bold ms-auto",children:"Submit"})})]})})]})]})})})})}),(0,Je.jsx)("br",{}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})]})};var Oh=function(){var e=(0,n.useState)(null),t=(0,o.Z)(e,2),r=t[0],i=t[1],s=localStorage.getItem("nameofonetarot"),c=JSON.parse(s),u=(0,n.useState)(c),l=(0,o.Z)(u,2),d=l[0];l[1],(0,n.useEffect)((function(){var e={tarot_id:localStorage.getItem("tarotid")},t="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("yes_no_tarot"),e,{headers:{authorization:t,"Content-Type":"application/json"}}).then((function(e){i(e.data),console.log("asdresponseeessad",e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),[]);var h=localStorage.getItem("tarotimage");return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-4",children:(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-2",children:(0,Je.jsxs)("div",{class:"row g-4 ratio_65",children:[(0,Je.jsx)("div",{class:"col-xxl-4 col-sm-6",children:(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"100%"},children:(0,Je.jsx)("div",{class:"blog-image",style:{},children:(0,Je.jsx)("a",{href:"#",children:(0,Je.jsx)("img",{height:"550px",width:"100%",src:h,class:"bg-img",alt:""})})})})}),(0,Je.jsxs)("div",{class:"col-xxl-4 col-sm-6",style:{border:"0px solid var(--theme-color)",height:""},children:[(0,Je.jsx)("div",{children:(0,Je.jsx)("h2",{children:"ONE CARD TAROT READING RESULT"})}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{children:[(0,Je.jsxs)("p",{style:{textAlign:"justify",fontSize:"18px"},children:[" ",null===r||void 0===r?void 0:r.name," The card is upright"]}),(0,Je.jsxs)("p",{style:{textAlign:"justify",fontSize:"22px",fontStyle:"bold"},children:["Hi ",null===d||void 0===d?void 0:d.name," "]}),(0,Je.jsx)("p",{style:{textAlign:"justify",fontSize:"15px",color:"#4a5568"},children:null===r||void 0===r?void 0:r.description})]})]})]})})})})}),(0,Je.jsx)("section",{class:"product-list-section section-b-space",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{class:"title",children:[(0,Je.jsx)("h2",{children:"Also Check"}),(0,Je.jsx)("span",{class:"title-leaf",children:(0,Je.jsx)("svg",{class:"icon-width",children:(0,Je.jsx)(a.rU,{to:"https://themes.pixelstrap.com/fastkart/assets/svg/leaf.svg#leaf"})})})]}),(0,Je.jsxs)("div",{class:"row g-4",children:[(0,Je.jsx)("div",{class:"col-xxl-4 col-md-4",children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp",children:[(0,Je.jsx)("div",{class:"product-header",children:(0,Je.jsx)("div",{class:"product-image",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_page",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/dh.png",class:"img-fluid blur-up lazyload",alt:""})})})}),(0,Je.jsx)("div",{class:"product-footer",children:(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_page",children:(0,Je.jsx)("h5",{class:"name",children:"Daily Horoscope"})})})})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-4",children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp",children:[(0,Je.jsx)("div",{class:"product-header",children:(0,Je.jsx)("div",{class:"product-image",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_monthly",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/dh.png",class:"img-fluid blur-up lazyload",alt:""})})})}),(0,Je.jsx)("div",{class:"product-footer",children:(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_monthly",children:(0,Je.jsx)("h5",{class:"name",children:"Montlhy Horoscope"})})})})]})}),(0,Je.jsx)("div",{class:"col-xxl-4 col-md-4",children:(0,Je.jsxs)("div",{class:"product-box-4 wow fadeInUp",children:[(0,Je.jsx)("div",{class:"product-header",children:(0,Je.jsx)("div",{class:"product-image",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_yearly",children:(0,Je.jsx)("img",{src:"../assets/images/inner-page/dh.png",class:"img-fluid blur-up lazyload",alt:""})})})}),(0,Je.jsx)("div",{class:"product-footer",children:(0,Je.jsx)("div",{class:"product-detail",children:(0,Je.jsx)(a.rU,{to:"/Horoscope_yearly",children:(0,Je.jsx)("h5",{class:"name",children:" Horoscope 2023"})})})})]})})]})]})}),(0,Je.jsx)("br",{}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})]})};var Ch=function(){var e=(0,n.useState)(""),t=(0,o.Z)(e,2),r=t[0],a=t[1],s=(0,i.s0)(""),c=(0,n.useState)({name:"",day:"",month:"",year:"",placeOfBirth:""}),u=(0,o.Z)(c,2),l=u[0],d=u[1],h=function(e){var t=e.target,n=t.name,r=t.value;d((0,tt.Z)((0,tt.Z)({},l),{},(0,mt.Z)({},n,r)))};return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-4",children:(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-2",children:(0,Je.jsxs)("div",{class:"row g-4 ratio_65",children:[(0,Je.jsx)("div",{children:(0,Je.jsx)("h2",{style:{color:"#fc0",fontSize:"32px",fontWeight:"700"},className:"text-center font_yellow text-uppercase",children:"Numerology"})}),(0,Je.jsxs)("div",{children:[(0,Je.jsx)("p",{class:"text-justify-mobile",style:{fontSize:"16px"},children:"Most of the Numerology Predictions are based on your ruling number and it plays a key role in deciding your destiny. Your ruling number helps you decide what's best for you. Make career choices based on your ruling number."}),(0,Je.jsxs)("p",{class:"text-justify-mobile",style:{fontSize:"16px"},children:[" ","This will surely help you overcome obstacles on the way and achieve success in life. Numerology can also help you find the perfect match for you. You can get accurate numerology readings by finding out what your ruling number is. Your ruling number is calculated by adding the numbers of your birth date. The numbers are added till a single digit is obtained, which becomes the numerology or ruling number. Your numerology number consists of the blueprint to your life, and the various aspects in it."]})]}),(0,Je.jsxs)("div",{class:"col-xxl-4 col-sm-12",style:{border:"1px solid var(--theme-color)",height:"127px",background:"#333"},children:[(0,Je.jsx)("br",{}),(0,Je.jsx)("form",{onSubmit:function(e){e.preventDefault(),l.day?l.month?l.year?(localStorage.setItem("nameofonetarot",JSON.stringify(l)),s("/Ruling")):a("Please select a year."):a("Please a Month ."):a("Please Select a day.")},children:(0,Je.jsxs)("div",{className:"row",children:[(0,Je.jsx)("div",{className:"col-sm-6",children:(0,Je.jsxs)("div",{className:"mb-md-4 mb-3 custom-form",children:[(0,Je.jsx)("div",{style:{color:"#fff",fontSize:"20px",marginBottom:"10px"},children:"Get Ruling Number Predictions"}),(0,Je.jsx)("div",{className:"custom-input",children:(0,Je.jsxs)("div",{style:{width:"100%"},children:[(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"day",value:l.day,onChange:h,children:[(0,Je.jsx)("option",{children:"Day"}),Array.from({length:31},(function(e,t){return t+1})).map((function(e){return(0,Je.jsx)("option",{children:e},e)}))]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"month",value:l.month,onChange:h,children:[(0,Je.jsx)("option",{children:"Month"}),Array.from({length:12},(function(e,t){return t+1})).map((function(e){return(0,Je.jsx)("option",{value:e,children:new Date(0,e-1).toLocaleString("default",{month:"long"})},e)}))]}),(0,Je.jsxs)("select",{style:{width:"32%",height:"45px"},name:"year",value:l.year,onChange:h,children:[(0,Je.jsx)("option",{children:"Year"}),function(){var e=(new Date).getFullYear();return Array.from({length:e-1950+1},(function(t,n){return e-n})).map((function(e){return(0,Je.jsx)("option",{children:e},e)}))}()]}),(0,Je.jsx)("font",{style:{color:"#ffcc00"},children:r&&(0,Je.jsx)("p",{children:r})}),(0,Je.jsx)("br",{})]})})]})}),(0,Je.jsx)("div",{className:"col-sm-6",children:(0,Je.jsx)("button",{style:{float:"left",marginTop:"40px"},type:"submit",className:"btn btn-animation btn-md fw-bold ms-auto",children:"Submit"})})]})})]})]})})})})}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})]})};var Ah=function(){var e=(0,n.useState)(null),t=(0,o.Z)(e,2),r=t[0],i=t[1],a=localStorage.getItem("nameofonetarot"),s=JSON.parse(a),c=(0,n.useState)(s),u=(0,o.Z)(c,2),l=u[0];return u[1],(0,n.useEffect)((function(){localStorage.getItem("tarotid");var e={day:null===l||void 0===l?void 0:l.day,month:null===l||void 0===l?void 0:l.month,year:null===l||void 0===l?void 0:l.year},t="Basic "+btoa("623869:46046d17a932151518470e3a08a1665a");Ye.post("https://json.astrologyapi.com/v1/".concat("numero_prediction/daily"),e,{headers:{authorization:t,"Content-Type":"application/json"}}).then((function(e){i(e.data),console.log("preididcationasdresponseeessad",e.data)})).catch((function(e){console.error("Error fetching data:",e)}))}),[]),(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row g-4",children:(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-2",children:(0,Je.jsxs)("div",{class:"row g-4 ratio_65",children:[(0,Je.jsxs)("div",{class:"col-xxl-4 col-sm-12",children:[(0,Je.jsx)("div",{children:(0,Je.jsxs)("h1",{style:{color:"#20c997",fontSize:"32px",fontWeight:"700"},className:"text-center font_yellow text-uppercase",children:["Ruling Number  ",null===r||void 0===r?void 0:r.lucky_number]})}),(0,Je.jsx)("div",{class:"blog-box wow fadeInUp","data-wow-delay":"0.05s",style:{height:"100%"},children:(0,Je.jsx)("div",{class:"blog-image",style:{},children:(0,Je.jsx)("a",{href:"#",children:(0,Je.jsx)("img",{width:"100%",src:"../assets/images/inner-page/numerology1.jpg",class:"bg-img",alt:""})})})})]}),(0,Je.jsxs)("div",{class:"col-xxl-4 col-sm-12",style:{border:"0px solid var(--theme-color)",height:"100px"},children:[(0,Je.jsxs)("div",{children:[(0,Je.jsxs)("h2",{children:[" Ruling Number ",null===r||void 0===r?void 0:r.lucky_number]}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("h2",{children:[" Ruling Color - ",null===r||void 0===r?void 0:r.lucky_color]})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("div",{children:(0,Je.jsx)("p",{style:{textAlign:"center",fontSize:"17px"},children:null===r||void 0===r?void 0:r.prediction})})]})]})})})})}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)($e,{}),(0,Je.jsx)("br",{}),(0,Je.jsx)(Ze.default,{})]})},Nh=function(){var e=localStorage.getItem("packdetails"),t=localStorage.getItem("idd");console.log("asasdasdasd",t);var r=(0,n.useState)({amount:e,order_id:"124562",currency:"INR",gatewayType:"muscat"}),i=(0,o.Z)(r,2),a=i[0],s=i[1],c=(0,n.useState)(!1),u=(0,o.Z)(c,2),l=u[0],d=u[1],h=function(){var e=lt(ct().mark((function e(t){var n,r;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l){e.next=3;break}return e.abrupt("return");case 3:try{d(!0),n="muscat"===a.gatewayType?"http://103.104.74.215:3011/muscat/payment":"http://103.104.74.215:3011/",r="".concat(n,"?amount=").concat(a.amount,"&order_id=").concat(a.order_id,"&currency=").concat(a.currency,"&gatewayType=").concat(a.gatewayType),window.location.href=r}catch(Qo){console.error("Error:",Qo.message),window.location.href="https://localhost:3011/ccavResponseHandler"}finally{d(!1)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"breadscrumb-section pt-0",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsxs)("div",{class:"col-12",children:[(0,Je.jsx)("div",{class:"breadscrumb-contain",children:(0,Je.jsx)("h2",{children:"Payment Details"})}),(0,Je.jsxs)("form",{onSubmit:h,children:[(0,Je.jsxs)("div",{children:[(0,Je.jsx)("label",{children:"Amount:"}),(0,Je.jsx)("input",{type:"text",name:"amount",value:a.amount,onChange:function(e){var t=e.target,n=t.name,r=t.value;s((function(e){return(0,tt.Z)((0,tt.Z)({},e),{},(0,mt.Z)({},n,r))}))}})]}),(0,Je.jsx)("input",{type:"hidden",name:"order_id",value:a.order_id}),(0,Je.jsx)("input",{type:"hidden",name:"gatewayType",value:"muscat"}),(0,Je.jsx)("button",{class:"btn btn-md bg-dark cart-button text-white w-80",type:"submit",disabled:l,children:l?"Processing...":"Proceed to Pay"})]})]})})})})]})};var jh=function(){var e=(0,n.useState)(),t=(0,o.Z)(e,2),r=(t[0],t[1]),a=(0,n.useState)(),s=(0,o.Z)(a,2),c=(s[0],s[1],(0,i.s0)()),u=(0,n.useState)(),l=(0,o.Z)(u,2),d=l[0],h=l[1],f=(0,n.useState)(),p=(0,o.Z)(f,2),v=p[0],g=p[1],m=(0,n.useState)([]),y=(0,o.Z)(m,2);return y[0],y[1],(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"blog-section section-b-space",children:(0,Je.jsxs)("div",{class:"container-fluid-lg",children:[(0,Je.jsxs)("div",{className:"title",children:[(0,Je.jsx)("h2",{children:"NakshatraTALKS REVIEWS "}),(0,Je.jsx)("h4",{children:"Here about us from our Astrologer"})]}),(0,Je.jsx)("div",{class:"row",children:(0,Je.jsx)("div",{class:"col-xxl-12 col-xl-12 col-lg-12 order-lg-3",children:(0,Je.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={user_id:localStorage.getItem("iddofuser"),astrologer_id:localStorage.getItem("vcidddata"),review:v};Ye.post("http://103.104.74.215:3012/api/user/add_review",t).then((function(e){r(e.data.result),c("/")})).catch((function(e){console.log(e)}))},children:[(0,Je.jsxs)("div",{class:"form-group",children:[(0,Je.jsx)("label",{for:"mobile",children:"Write Here:"}),(0,Je.jsx)("input",{type:"text",className:"account__login--input",value:d,onChange:function(e){return h(e.target.value)}})]}),(0,Je.jsxs)("div",{class:"form-group",children:[(0,Je.jsx)("label",{for:"pwd",children:"Give Rating:"}),(0,Je.jsx)("div",{className:"rating",children:[1,2,3,4,5].map((function(e){return(0,Je.jsx)("span",{children:(0,Je.jsx)("i",{className:"fa ".concat(e<=v?"fa-star":"fa-star-o"),"aria-hidden":"true",style:{color:"gold",cursor:"pointer"},onClick:function(){return function(e){g(e)}(e)}})},e)}))})]}),(0,Je.jsx)("button",{type:"submit",class:"btn btn-md bg-dark cart-button text-white w-80",children:"Submit Review"})]})})})]})})]})};var Dh=function(){var e=(0,n.useState)(""),t=(0,o.Z)(e,2),r=t[0],a=t[1],s=(0,i.s0)();(0,n.useEffect)((function(){v()}),[]);var c=(0,n.useState)([]),u=(0,o.Z)(c,2),l=u[0],d=u[1],h=(0,n.useState)((function(){var e=localStorage.getItem("_id");return null!=e?JSON.parse(e):[]})),f=(0,o.Z)(h,2),p=f[0],v=(f[1],function(){var e={user_id:p};Ye.post("http://103.104.74.215:3012/api/user/astrologer_list/",e).then((function(e){d(e.data.data)}))}),g=(0,n.useState)(),m=(0,o.Z)(g,2),y=m[0],b=m[1];(0,n.useEffect)((function(){b(y)}),[y]);var _=localStorage.getItem("videorate");(0,n.useEffect)((function(){E()}),[,y,_]);var E=function(){var e={user_id:p};Ye.post("http://103.104.74.215:3012/api/user/get_wallet_user",e).then((function(e){return b(e.data.data.ammount)}))};return(0,Je.jsxs)("div",{children:[(0,Je.jsx)(Xe,{}),(0,Je.jsx)("section",{class:"section-b-space shop-section",children:(0,Je.jsx)("div",{class:"container-fluid-lg",children:(0,Je.jsx)("div",{class:"row",children:(0,Je.jsxs)("div",{class:"col-12",children:[(0,Je.jsx)("div",{class:"show-button",children:(0,Je.jsx)("div",{class:"top-filter-menu-2",children:(0,Je.jsxs)("div",{class:"sidebar-filter-menu","data-bs-toggle":"collapse","data-bs-target":"#collapseExample",children:[(0,Je.jsxs)("a",{href:"shop-top-filter1.html",children:[(0,Je.jsx)("i",{class:"fa-solid fa-house"})," Video Call With Astrologer"]}),(0,Je.jsx)("font",{style:{color:"blue"},children:r&&(0,Je.jsx)("p",{children:r})})]})})}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"row g-sm-4 g-3",children:[" ",null===l||void 0===l?void 0:l.map((function(e){return(0,Je.jsx)("div",{class:"col-xl-3 col-sm-3",style:{width:""},children:(0,Je.jsxs)("div",{class:"seller-grid-box seller-grid-box-1",children:[(0,Je.jsxs)("div",{class:"grid-image",children:[(0,Je.jsxs)("div",{class:"image",children:[(0,Je.jsx)("img",{onClick:function(){localStorage.setItem("AstroData",JSON.stringify(e)),s("/AstrologerDetail")},src:"http://103.104.74.215:3012/uploads/"+e.profile_pic,class:"img-fluid",alt:"",style:{height:"60px ",width:"60px",borderRadius:"100%"}}),(0,Je.jsxs)("button",{onClick:function(){localStorage.setItem("AstroData",JSON.stringify(e)),s("/AstrologerDetail")},onclick:"location.href = 'product-4-image.html';",class:"nav-item",style:{borderRadius:"15px",width:"60px",height:"30px",borderColor:"#f5b60a",boxShadow:"5px"},children:[e.review?e.review:"0",(0,Je.jsx)("li",{children:(0,Je.jsx)("i",{style:{fontWeight:"bolder"},class:"fa fa-star-o","aria-hidden":"true"})})]})]}),(0,Je.jsx)("div",{class:"contain-name",onClick:function(){localStorage.setItem("AstroData",JSON.stringify(e)),s("/AstrologerDetail")},children:(0,Je.jsxs)("div",{children:[(0,Je.jsx)("h4",{children:e.name}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:e.language})}),(0,Je.jsx)("div",{class:"since-number",children:(0,Je.jsx)("h6",{children:e.role})})]})})]}),(0,Je.jsx)("br",{}),(0,Je.jsxs)("div",{class:"grid-contain",style:{width:"100%",paddingBottom:"20px"},children:[(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"60%",float:"left"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-map-pin"})}),(0,Je.jsx)("div",{class:"contact-detail",onClick:function(){localStorage.setItem("AstroData",JSON.stringify(e)),s("/AstrologerDetail")},children:(0,Je.jsxs)("h5",{children:[e.experiance_year," "]})})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"seller-icon",children:(0,Je.jsx)("i",{class:"fa-solid fa-phone"})}),(0,Je.jsx)("div",{class:"contact-detail",onClick:function(){localStorage.setItem("AstroData",JSON.stringify(e)),s("/AstrologerDetail")},children:(0,Je.jsxs)("h5",{children:[" \u20b9 ",e.video_rate?e.video_rate:"0","/Min"]})})]})]}),(0,Je.jsxs)("div",{class:"seller-contact-details",style:{width:"40%",float:"right"},children:[(0,Je.jsxs)("div",{class:"saller-contact",children:["1"===e.call_status?(0,Je.jsx)("img",{onClick:function(){y>=e.video_rate?function(e,t){var n=y/e,r=Math.floor(n);localStorage.setItem("totalminute",r);var i=localStorage.getItem("vcidddata");console.log("id ofv aassatrtolwewer",i);var o={user_id:p,astrologer_id:t,final_time:r.toString(),type:"video"};console.log("asdascalling tokennn",o),Ye.post("http://103.104.74.215:3012/api/user/generate_agrora_token_calling",o).then((function(e){console.log(" dataaa",e),e.data.result&&(localStorage.setItem("videoatro_token",e.data.token),localStorage.setItem("channel_token",e.data.channel_name),setTimeout((function(){s("/VideoCall")}),1e3))})).catch((function(e){e.response&&400===e.response.status?a("Astrologer Busy on Another call"):a("An error occurred. Please try again later.")}))}(e.video_rate,e._id):alert("You have Insufficient balance"),localStorage.setItem("vcidddata",e._id),localStorage.setItem("videorate",e.video_rate)},src:"../assets/images/veg-3/category/phone.png",class:"img-fluid",alt:"",style:{height:"25px"}}):(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/calling.png",class:"img-fluid",alt:"",style:{height:"25px",background:"#d99f46",borderRadius:"50px"}}),(0,Je.jsx)("img",{src:"../assets/images/veg-3/category/chat.png",class:"img-fluid",alt:"",style:{height:"25px",marginLeft:"10px"}})]}),(0,Je.jsxs)("div",{class:"saller-contact",children:[(0,Je.jsx)("div",{class:"contact-detail",children:"1"===e.call_status?(0,Je.jsx)("h6",{children:" Call"}):(0,Je.jsx)("h6",{children:" Off"})}),(0,Je.jsx)("div",{class:"contact-detail",style:{marginLeft:"10px"},children:(0,Je.jsx)("h6",{children:" Chat"})})]})]})]}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{})]})})}))]})]})})})}),(0,Je.jsx)(Ze.default,{})]})},Ph=function(){var e=(0,n.useState)(0),t=(0,o.Z)(e,2),r=t[0],a=t[1],s=(0,n.useState)(""),c=(0,o.Z)(s,2),u=c[0],l=c[1],d=(0,n.useState)([]),h=(0,o.Z)(d,2),f=h[0],p=h[1],v=(0,n.useState)(0),g=(0,o.Z)(v,2),m=(g[0],g[1]),y=(0,n.useState)(0),b=(0,o.Z)(y,2),_=b[0],E=b[1],S=(0,n.useState)(!1),w=(0,o.Z)(S,2),x=w[0],T=w[1],I=(0,i.s0)(),R=localStorage.getItem("videoatro_token"),k=(0,n.useRef)(null),O=(0,n.useRef)(null);(0,n.useEffect)((function(){C();var e=setInterval((function(){m((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}),[]);var C=function(){var e={user_id:localStorage.getItem("iddofuser")};Ye.post("http://103.104.74.215:3012/api/user/get_wallet_user",e).then((function(e){return p(e.data.data)}))},A=localStorage.getItem("channel_token");(0,n.useEffect)((function(){var e=function(){var e=lt(ct().mark((function e(){var t;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.current=Dn().createClient({mode:"rtc",codec:"vp8"}),e.next=3,k.current.join("b13de305bceb4aa1a434b8a295f990dd",A,R,null);case 3:return e.next=5,Dn().createMicrophoneAudioTrack();case 5:return t=e.sent,O.current=t,e.next=9,k.current.publish([t]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();R&&e(),k.current&&k.current.on("user-published",function(){var e=lt(ct().mark((function e(t,n){var r;return ct().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.current.subscribe(t,n);case 2:"audio"===n&&(r=t.audioTrack)&&r.play();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),[R]);var N=function(){l(D);var e=localStorage.getItem("videoatro_token"),t=0;k.current&&(t=localStorage.getItem("totalminute")?D.toString():0);var n={token:e,final_time:t.toString()};console.log("sadasdasdsadada",n),Ye.post("http://103.104.74.215:3012/api/user/remove_audio_calling_user",n).then((function(){return I("/Rating")}))};(0,n.useEffect)((function(){var e,t=(new Date).getTime();return e=setInterval((function(){var e=(new Date).getTime();E(e-t)}),1e3),function(){return clearInterval(e)}}),[]);var j=function(e){var t=Math.floor(e/36e5),n=Math.floor(e%36e5/6e4),r=Math.floor(e%6e4/1e3);return"".concat(t<10?"0"+t:t,":").concat(n<10?"0"+n:n,":").concat(r<10?"0"+r:r)},D=(j(_),Math.floor(_/6e4));(0,n.useEffect)((function(){l(D)}),[u,D]);var P=localStorage.getItem("videorate");(0,n.useEffect)((function(){var e=f/P,t=Math.floor(e);l(t)}),[f,P]),(0,n.useEffect)((function(){var e=setInterval((function(){a((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}),[]);var L=60*localStorage.getItem("totalminute");(0,n.useEffect)((function(){r>=L&&N()}),[r]);return(0,Je.jsxs)(Je.Fragment,{children:[(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("br",{}),(0,Je.jsx)("div",{className:"audiocall-container",children:(0,Je.jsxs)("div",{className:"content-container",children:[(0,Je.jsx)("h2",{children:"Audio Call"}),(0,Je.jsxs)("div",{className:"timer",children:[(0,Je.jsx)("h4",{children:"Time Now"}),(0,Je.jsx)("p",{id:"timer",children:j(_)})]}),(0,Je.jsxs)("div",{className:"controls",children:[(0,Je.jsx)("button",{onClick:function(){O.current&&(T(!x),O.current.setEnabled(!x))},className:"mic-button ".concat(x?"muted":"unmuted"),children:x?"Unmute Mic":"Mute Mic"}),(0,Je.jsx)("button",{onClick:N,className:"disconnect-button",children:"Disconnect"})]})]})})]})};var Lh=function(){return(0,Je.jsx)("div",{children:(0,Je.jsxs)(i.Z5,{children:[(0,Je.jsx)(i.AW,{path:"/",element:(0,Je.jsx)(gt,{})}),(0,Je.jsx)(i.AW,{path:"/register",element:(0,Je.jsx)(nn,{})}),(0,Je.jsx)(i.AW,{path:"/login",element:(0,Je.jsx)(sn,{})}),(0,Je.jsx)(i.AW,{path:"/kundali",element:(0,Je.jsx)(fn,{})}),(0,Je.jsx)(i.AW,{path:"/kundali_milan",element:(0,Je.jsx)(gn,{})}),(0,Je.jsx)(i.AW,{path:"/blog",element:(0,Je.jsx)(yn,{})}),(0,Je.jsx)(i.AW,{path:"/nakshatra_mart",element:(0,Je.jsx)(bn,{})}),(0,Je.jsx)(i.AW,{path:"/tarot",element:(0,Je.jsx)(Sn,{})}),(0,Je.jsx)(i.AW,{path:"/muhurat",element:(0,Je.jsx)(xn,{})}),(0,Je.jsx)(i.AW,{path:"/speaktoaustrology",element:(0,Je.jsx)(Tn,{})}),(0,Je.jsx)(i.AW,{path:"/spritual",element:(0,Je.jsx)(In,{})}),(0,Je.jsx)(i.AW,{path:"/panchang",element:(0,Je.jsx)(Rn,{})}),(0,Je.jsx)(i.AW,{path:"/profile",element:(0,Je.jsx)(kn,{})}),(0,Je.jsx)(i.AW,{path:"/love",element:(0,Je.jsx)(On,{})}),(0,Je.jsx)(i.AW,{path:"/zodiac",element:(0,Je.jsx)(Cn,{})}),(0,Je.jsx)(i.AW,{path:"/vastu",element:(0,Je.jsx)(An,{})}),(0,Je.jsx)(i.AW,{path:"/pooja",element:(0,Je.jsx)(Nn,{})}),(0,Je.jsx)(i.AW,{path:"/SignUp",element:(0,Je.jsx)(tn,{})}),(0,Je.jsx)(i.AW,{path:"/BlogDetail",element:(0,Je.jsx)(Xn,{})}),(0,Je.jsx)(i.AW,{path:"/EclipsesBlogDetail",element:(0,Je.jsx)($n,{})}),(0,Je.jsx)(i.AW,{path:"/Horoscope_page",element:(0,Je.jsx)(Qn,{})}),(0,Je.jsx)(i.AW,{path:"/Panchang_page",element:(0,Je.jsx)(Rn,{})}),(0,Je.jsx)(i.AW,{path:"/AstrologersList",element:(0,Je.jsx)(nr,{})}),(0,Je.jsx)(i.AW,{path:"/Horoscope_yearly",element:(0,Je.jsx)(er,{})}),(0,Je.jsx)(i.AW,{path:"/Horoscope_monthly",element:(0,Je.jsx)(tr,{})}),(0,Je.jsx)(i.AW,{path:"/AstrologerDetail",element:(0,Je.jsx)(rr,{})}),(0,Je.jsx)(i.AW,{path:"/Astrolive",element:(0,Je.jsx)(ir,{})}),(0,Je.jsx)(i.AW,{path:"/PujaListDetail",element:(0,Je.jsx)(ar,{})}),(0,Je.jsx)(i.AW,{path:"/Streaming",element:(0,Je.jsx)(ur,{})}),(0,Je.jsx)(i.AW,{path:"/VedicBlog",element:(0,Je.jsx)(lr,{})}),(0,Je.jsx)(i.AW,{path:"/NavagrahasBlog",element:(0,Je.jsx)(dr,{})}),(0,Je.jsx)(i.AW,{path:"/PrivacyPolicy",element:(0,Je.jsx)(hr,{})}),(0,Je.jsx)(i.AW,{path:"/VideoCall",element:(0,Je.jsx)(mh,{})}),(0,Je.jsx)(i.AW,{path:"/Chat",element:(0,Je.jsx)(yh,{})}),(0,Je.jsx)(i.AW,{path:"/ChatForm",element:(0,Je.jsx)(bh,{})}),(0,Je.jsx)(i.AW,{path:"/nmart",element:(0,Je.jsx)(_h,{})}),(0,Je.jsx)(i.AW,{path:"/chatastrologer",element:(0,Je.jsx)(Eh,{})}),(0,Je.jsx)(i.AW,{path:"/panchangg",element:(0,Je.jsx)(Sh,{})}),(0,Je.jsx)(i.AW,{path:"/kundalireport",element:(0,Je.jsx)(wh,{})}),(0,Je.jsx)(i.AW,{path:"/selfkundali",element:(0,Je.jsx)(xh,{})}),(0,Je.jsx)(i.AW,{path:"/NewDetails",element:(0,Je.jsx)(Th,{})}),(0,Je.jsx)(i.AW,{path:"/Celebritylist",element:(0,Je.jsx)(Ih,{})}),(0,Je.jsx)(i.AW,{path:"/Onecarreading",element:(0,Je.jsx)(Rh,{})}),(0,Je.jsx)(i.AW,{path:"/Onecard",element:(0,Je.jsx)(kh,{})}),(0,Je.jsx)(i.AW,{path:"/Onecardresult",element:(0,Je.jsx)(Oh,{})}),(0,Je.jsx)(i.AW,{path:"/Numerology",element:(0,Je.jsx)(Ch,{})}),(0,Je.jsx)(i.AW,{path:"/Ruling",element:(0,Je.jsx)(Ah,{})}),(0,Je.jsx)(i.AW,{path:"/payment",element:(0,Je.jsx)(Nh,{})}),(0,Je.jsx)(i.AW,{path:"/Rating",element:(0,Je.jsx)(jh,{})}),(0,Je.jsx)(i.AW,{path:"/Videocallwithastro",element:(0,Je.jsx)(Dh,{})}),(0,Je.jsx)(i.AW,{path:"/Audiocall",element:(0,Je.jsx)(Ph,{})}),(0,Je.jsx)(i.AW,{path:"/Reviews",element:(0,Je.jsx)(ht,{})})]})})};r.createRoot(document.getElementById("root")).render((0,Je.jsx)(n.StrictMode,{children:(0,Je.jsx)(a.VK,{children:(0,Je.jsx)(Lh,{})})}))}()})();
//# sourceMappingURL=main.ba6c9c06.js.map